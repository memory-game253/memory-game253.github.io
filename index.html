<link rel="icon" href="favicon.png" type="image/x-icon">
<script>/**
 * @license
 * Copyright 2024 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).tf=e.tf||{})}(this,(function(e){"use strict";function t(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e){var t,n;function r(t,n){try{var o=e[t](n),s=o.value,u=s instanceof i;Promise.resolve(u?s.v:s).then((function(n){if(u){var i="return"===t?"return":"next";if(!s.k||n.done)return r(i,n);n=e[i](n).value}a(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise((function(i,o){var s={key:e,arg:a,resolve:i,reject:o,next:null};n?n=n.next=s:(t=n=s,r(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function i(e,t){this.v=e,this.k=t}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),s=new T(a||[]);return r(o,"_invoke",{value:w(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function f(){}function d(){}function v(){}var m={};c(m,i,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(E([])));y&&y!==t&&n.call(y,i)&&(m=y);var b=v.prototype=f.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function a(r,i,o,s){var u=h(e[r],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){a("next",e,o,s)}),(function(e){a("throw",e,o,s)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return a("throw",e,o,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return C()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=I(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var a=h(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,p;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new k(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),c(b,u,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){u(i,r,a,o,s,"next",e)}function s(e){u(i,r,a,o,s,"throw",e)}o(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,n){return(t=F(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e,t,n){return y=g()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&m(a,n.prototype),a},y.apply(null,arguments)}function b(e){var t="function"==typeof Map?new Map:void 0;return b=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return y(e,arguments,v(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m(r,e)},b(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function w(e){var t=g();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k(this,n)}}function I(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=I(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},N.apply(this,arguments)}function S(e,t){return E(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||A(e,t)||_()}function T(e){return function(e){if(Array.isArray(e))return R(e)}(e)||C(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e){if(Array.isArray(e))return e}function C(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function A(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=A(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function F(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}a.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},a.prototype.next=function(e){return this._invoke("next",e)},a.prototype.throw=function(e){return this._invoke("throw",e)},a.prototype.return=function(e){return this._invoke("return",e)};var D,M,L=function(e){return e&&e.Math==Math&&e},z=L("object"==("undefined"==typeof globalThis?"undefined":s(globalThis))&&globalThis)||L("object"==("undefined"==typeof window?"undefined":s(window))&&window)||L("object"==("undefined"==typeof self?"undefined":s(self))&&self)||L("object"==s(n)&&n)||function(){return this}()||Function("return this")(),P={},B=function(e){try{return!!e()}catch(e){return!0}},W=!B((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),U=!B((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),V=U,G=Function.prototype.call,j=V?G.bind(G):function(){return G.apply(G,arguments)},H={},q={}.propertyIsEnumerable,K=Object.getOwnPropertyDescriptor,X=K&&!q.call({1:2},1),Y=(H.f=X?function(e){var t=K(this,e);return!!t&&t.enumerable}:q,function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}),J=U,Z=Function.prototype,Q=Z.call,$=J&&Z.bind.bind(Q,Q),ee=J?$:function(e){return function(){return Q.apply(e,arguments)}},te=ee,ne=te({}.toString),re=te("".slice),ae=function(e){return re(ne(e),8,-1)},ie=B,oe=ae,se=Object,ue=ee("".split),ce=ie((function(){return!se("z").propertyIsEnumerable(0)}))?function(e){return"String"==oe(e)?ue(e,""):se(e)}:se,le=function(e){return null==e},he=le,pe=TypeError,fe=function(e){if(he(e))throw pe("Can't call method on "+e);return e},de=ce,ve=fe,me=function(e){return de(ve(e))},ge="object"==("undefined"==typeof document?"undefined":s(document))&&document.all,ye={all:ge,IS_HTMLDDA:void 0===ge&&void 0!==ge},be=ye.all,xe=ye.IS_HTMLDDA?function(e){return"function"==typeof e||e===be}:function(e){return"function"==typeof e},ke=xe,we=ye.all,Ie=ye.IS_HTMLDDA?function(e){return"object"==s(e)?null!==e:ke(e)||e===we}:function(e){return"object"==s(e)?null!==e:ke(e)},Ne=z,Se=xe,Te=function(e){return Se(e)?e:void 0},Ee=function(e,t){return arguments.length<2?Te(Ne[e]):Ne[e]&&Ne[e][t]},Ce=ee({}.isPrototypeOf),Ae="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Re=z,_e=Ae,Oe=Re.process,Fe=Re.Deno,De=Oe&&Oe.versions||Fe&&Fe.version,Me=De&&De.v8;Me&&(M=(D=Me.split("."))[0]>0&&D[0]<4?1:+(D[0]+D[1])),!M&&_e&&(!(D=_e.match(/Edge\/(\d+)/))||D[1]>=74)&&(D=_e.match(/Chrome\/(\d+)/))&&(M=+D[1]);var Le=M,ze=Le,Pe=B,Be=!!Object.getOwnPropertySymbols&&!Pe((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ze&&ze<41})),We=Be&&!Symbol.sham&&"symbol"==s(Symbol.iterator),Ue=Ee,Ve=xe,Ge=Ce,je=Object,He=We?function(e){return"symbol"==s(e)}:function(e){var t=Ue("Symbol");return Ve(t)&&Ge(t.prototype,je(e))},qe=String,Ke=function(e){try{return qe(e)}catch(e){return"Object"}},Xe=xe,Ye=Ke,Je=TypeError,Ze=function(e){if(Xe(e))return e;throw Je(Ye(e)+" is not a function")},Qe=Ze,$e=le,et=function(e,t){var n=e[t];return $e(n)?void 0:Qe(n)},tt=j,nt=xe,rt=Ie,at=TypeError,it=function(e,t){var n,r;if("string"===t&&nt(n=e.toString)&&!rt(r=tt(n,e)))return r;if(nt(n=e.valueOf)&&!rt(r=tt(n,e)))return r;if("string"!==t&&nt(n=e.toString)&&!rt(r=tt(n,e)))return r;throw at("Can't convert object to primitive value")},ot={exports:{}},st=!1,ut=z,ct=Object.defineProperty,lt=function(e,t){try{ct(ut,e,{value:t,configurable:!0,writable:!0})}catch(n){ut[e]=t}return t},ht=lt,pt="__core-js_shared__",ft=z[pt]||ht(pt,{}),dt=(ot.exports,ft);(ot.exports=function(e,t){return dt[e]||(dt[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.29.1",mode:"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"});var vt=ot.exports,mt=fe,gt=Object,yt=function(e){return gt(mt(e))},bt=yt,xt=ee({}.hasOwnProperty),kt=Object.hasOwn||function(e,t){return xt(bt(e),t)},wt=ee,It=0,Nt=Math.random(),St=wt(1..toString),Tt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+St(++It+Nt,36)},Et=vt,Ct=kt,At=Tt,Rt=Be,_t=We,Ot=z.Symbol,Ft=Et("wks"),Dt=_t?Ot.for||Ot:Ot&&Ot.withoutSetter||At,Mt=function(e){return Ct(Ft,e)||(Ft[e]=Rt&&Ct(Ot,e)?Ot[e]:Dt("Symbol."+e)),Ft[e]},Lt=j,zt=Ie,Pt=He,Bt=et,Wt=it,Ut=TypeError,Vt=Mt("toPrimitive"),Gt=function(e,t){if(!zt(e)||Pt(e))return e;var n,r=Bt(e,Vt);if(r){if(void 0===t&&(t="default"),n=Lt(r,e,t),!zt(n)||Pt(n))return n;throw Ut("Can't convert object to primitive value")}return void 0===t&&(t="number"),Wt(e,t)},jt=Gt,Ht=He,qt=function(e){var t=jt(e,"string");return Ht(t)?t:t+""},Kt=Ie,Xt=z.document,Yt=Kt(Xt)&&Kt(Xt.createElement),Jt=function(e){return Yt?Xt.createElement(e):{}},Zt=Jt,Qt=!W&&!B((function(){return 7!=Object.defineProperty(Zt("div"),"a",{get:function(){return 7}}).a})),$t=W,en=j,tn=H,nn=Y,rn=me,an=qt,on=kt,sn=Qt,un=Object.getOwnPropertyDescriptor,cn=(P.f=$t?un:function(e,t){if(e=rn(e),t=an(t),sn)try{return un(e,t)}catch(e){}if(on(e,t))return nn(!en(tn.f,e,t),e[t])},{}),ln=W&&B((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),hn=Ie,pn=String,fn=TypeError,dn=function(e){if(hn(e))return e;throw fn(pn(e)+" is not an object")},vn=W,mn=Qt,gn=ln,yn=dn,bn=qt,xn=TypeError,kn=Object.defineProperty,wn=Object.getOwnPropertyDescriptor,In="enumerable",Nn="configurable",Sn="writable",Tn=(cn.f=vn?gn?function(e,t,n){if(yn(e),t=bn(t),yn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Sn in n&&!n.writable){var r=wn(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:Nn in n?n.configurable:r.configurable,enumerable:In in n?n.enumerable:r.enumerable,writable:!1})}return kn(e,t,n)}:kn:function(e,t,n){if(yn(e),t=bn(t),yn(n),mn)try{return kn(e,t,n)}catch(e){}if("get"in n||"set"in n)throw xn("Accessors not supported");return"value"in n&&(e[t]=n.value),e},cn),En=Y,Cn=W?function(e,t,n){return Tn.f(e,t,En(1,n))}:function(e,t,n){return e[t]=n,e},An={exports:{}},Rn=W,_n=kt,On=Function.prototype,Fn=Rn&&Object.getOwnPropertyDescriptor,Dn=_n(On,"name"),Mn={EXISTS:Dn,PROPER:Dn&&"something"===function(){}.name,CONFIGURABLE:Dn&&(!Rn||Rn&&Fn(On,"name").configurable)},Ln=xe,zn=ft,Pn=ee(Function.toString);Ln(zn.inspectSource)||(zn.inspectSource=function(e){return Pn(e)});var Bn,Wn,Un,Vn=zn.inspectSource,Gn=xe,jn=z.WeakMap,Hn=Gn(jn)&&/native code/.test(String(jn)),qn=Tt,Kn=vt("keys"),Xn=function(e){return Kn[e]||(Kn[e]=qn(e))},Yn={},Jn=Hn,Zn=z,Qn=Ie,$n=Cn,er=kt,tr=ft,nr=Xn,rr=Yn,ar="Object already initialized",ir=Zn.TypeError,or=Zn.WeakMap;if(Jn||tr.state){var sr=tr.state||(tr.state=new or);sr.get=sr.get,sr.has=sr.has,sr.set=sr.set,Bn=function(e,t){if(sr.has(e))throw ir(ar);return t.facade=e,sr.set(e,t),t},Wn=function(e){return sr.get(e)||{}},Un=function(e){return sr.has(e)}}else{var ur=nr("state");rr[ur]=!0,Bn=function(e,t){if(er(e,ur))throw ir(ar);return t.facade=e,$n(e,ur,t),t},Wn=function(e){return er(e,ur)?e[ur]:{}},Un=function(e){return er(e,ur)}}var cr={set:Bn,get:Wn,has:Un,enforce:function(e){return Un(e)?Wn(e):Bn(e,{})},getterFor:function(e){return function(t){var n;if(!Qn(t)||(n=Wn(t)).type!==e)throw ir("Incompatible receiver, "+e+" required");return n}}},lr=(An.exports,ee),hr=B,pr=xe,fr=kt,dr=W,vr=Mn.CONFIGURABLE,mr=Vn,gr=cr.enforce,yr=cr.get,br=String,xr=Object.defineProperty,kr=lr("".slice),wr=lr("".replace),Ir=lr([].join),Nr=dr&&!hr((function(){return 8!==xr((function(){}),"length",{value:8}).length})),Sr=String(String).split("String"),Tr=An.exports=function(e,t,n){"Symbol("===kr(br(t),0,7)&&(t="["+wr(br(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!fr(e,"name")||vr&&e.name!==t)&&(dr?xr(e,"name",{value:t,configurable:!0}):e.name=t),Nr&&n&&fr(n,"arity")&&e.length!==n.arity&&xr(e,"length",{value:n.arity});try{n&&fr(n,"constructor")&&n.constructor?dr&&xr(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=gr(e);return fr(r,"source")||(r.source=Ir(Sr,"string"==typeof t?t:"")),e};Function.prototype.toString=Tr((function(){return pr(this)&&yr(this).source||mr(this)}),"toString");var Er=An.exports,Cr=xe,Ar=cn,Rr=Er,_r=lt,Or=function(e,t,n,r){r||(r={});var a=r.enumerable,i=void 0!==r.name?r.name:t;if(Cr(n)&&Rr(n,i,r),r.global)a?e[t]=n:_r(t,n);else{try{r.unsafe?e[t]&&(a=!0):delete e[t]}catch(e){}a?e[t]=n:Ar.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},Fr={},Dr=Math.ceil,Mr=Math.floor,Lr=Math.trunc||function(e){var t=+e;return(t>0?Mr:Dr)(t)},zr=Lr,Pr=function(e){var t=+e;return t!=t||0===t?0:zr(t)},Br=Pr,Wr=Math.max,Ur=Math.min,Vr=function(e,t){var n=Br(e);return n<0?Wr(n+t,0):Ur(n,t)},Gr=Pr,jr=Math.min,Hr=function(e){return e>0?jr(Gr(e),9007199254740991):0},qr=Hr,Kr=function(e){return qr(e.length)},Xr=me,Yr=Vr,Jr=Kr,Zr=function(e){return function(t,n,r){var a,i=Xr(t),o=Jr(i),s=Yr(r,o);if(e&&n!=n){for(;o>s;)if((a=i[s++])!=a)return!0}else for(;o>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},Qr={includes:Zr(!0),indexOf:Zr(!1)},$r=kt,ea=me,ta=Qr.indexOf,na=Yn,ra=ee([].push),aa=function(e,t){var n,r=ea(e),a=0,i=[];for(n in r)!$r(na,n)&&$r(r,n)&&ra(i,n);for(;t.length>a;)$r(r,n=t[a++])&&(~ta(i,n)||ra(i,n));return i},ia=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],oa=aa,sa=ia.concat("length","prototype"),ua=(Fr.f=Object.getOwnPropertyNames||function(e){return oa(e,sa)},{}),ca=(ua.f=Object.getOwnPropertySymbols,Ee),la=Fr,ha=ua,pa=dn,fa=ee([].concat),da=ca("Reflect","ownKeys")||function(e){var t=la.f(pa(e)),n=ha.f;return n?fa(t,n(e)):t},va=kt,ma=da,ga=P,ya=cn,ba=function(e,t,n){for(var r=ma(t),a=ya.f,i=ga.f,o=0;o<r.length;o++){var s=r[o];va(e,s)||n&&va(n,s)||a(e,s,i(t,s))}},xa=B,ka=xe,wa=/#|\.prototype\./,Ia=function(e,t){var n=Sa[Na(e)];return n==Ea||n!=Ta&&(ka(t)?xa(t):!!t)},Na=Ia.normalize=function(e){return String(e).replace(wa,".").toLowerCase()},Sa=Ia.data={},Ta=Ia.NATIVE="N",Ea=Ia.POLYFILL="P",Ca=Ia,Aa=z,Ra=P.f,_a=Cn,Oa=Or,Fa=lt,Da=ba,Ma=Ca,La=function(e,t){var n,r,a,i,o,u=e.target,c=e.global,l=e.stat;if(n=c?Aa:l?Aa[u]||Fa(u,{}):(Aa[u]||{}).prototype)for(r in t){if(i=t[r],a=e.dontCallGetSet?(o=Ra(n,r))&&o.value:n[r],!Ma(c?r:u+(l?".":"#")+r,e.forced)&&void 0!==a){if(s(i)==s(a))continue;Da(i,a)}(e.sham||a&&a.sham)&&_a(i,"sham",!0),Oa(n,r,i,e)}},za={};za[Mt("toStringTag")]="z";var Pa,Ba="[object z]"===String(za),Wa=Ba,Ua=xe,Va=ae,Ga=Mt("toStringTag"),ja=Object,Ha="Arguments"==Va(function(){return arguments}()),qa=Wa?Va:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=ja(e),Ga))?n:Ha?Va(t):"Object"==(r=Va(t))&&Ua(t.callee)?"Arguments":r},Ka=qa,Xa=String,Ya=function(e){if("Symbol"===Ka(e))throw TypeError("Cannot convert a Symbol value to a string");return Xa(e)},Ja={},Za=aa,Qa=ia,$a=Object.keys||function(e){return Za(e,Qa)},ei=W,ti=ln,ni=cn,ri=dn,ai=me,ii=$a,oi=(Ja.f=ei&&!ti?Object.defineProperties:function(e,t){ri(e);for(var n,r=ai(t),a=ii(t),i=a.length,o=0;i>o;)ni.f(e,n=a[o++],r[n]);return e},Ee("document","documentElement")),si=dn,ui=Ja,ci=ia,li=Yn,hi=oi,pi=Jt,fi=Xn("IE_PROTO"),di=function(){},vi=function(e){return"<script>"+e+"</"+"script>"},mi=function(e){e.write(vi("")),e.close();var t=e.parentWindow.Object;return e=null,t},gi=function(){try{Pa=new ActiveXObject("htmlfile")}catch(e){}var e,t;gi="undefined"!=typeof document?document.domain&&Pa?mi(Pa):((t=pi("iframe")).style.display="none",hi.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(vi("document.F=Object")),e.close(),e.F):mi(Pa);for(var n=ci.length;n--;)delete gi.prototype[ci[n]];return gi()};li[fi]=!0;var yi=Object.create||function(e,t){var n;return null!==e?(di.prototype=si(e),n=new di,di.prototype=null,n[fi]=e):n=gi(),void 0===t?n:ui.f(n,t)},bi={},xi=qt,ki=cn,wi=Y,Ii=function(e,t,n){var r=xi(t);r in e?ki.f(e,r,wi(0,n)):e[r]=n},Ni=Vr,Si=Kr,Ti=Ii,Ei=Array,Ci=Math.max,Ai=function(e,t,n){for(var r=Si(e),a=Ni(t,r),i=Ni(void 0===n?r:n,r),o=Ei(Ci(i-a,0)),s=0;a<i;a++,s++)Ti(o,s,e[a]);return o.length=s,o},Ri=ae,_i=me,Oi=Fr.f,Fi=Ai,Di="object"==("undefined"==typeof window?"undefined":s(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Mi=(bi.f=function(e){return Di&&"Window"==Ri(e)?function(e){try{return Oi(e)}catch(e){return Fi(Di)}}(e):Oi(_i(e))},Er),Li=cn,zi=function(e,t,n){return n.get&&Mi(n.get,t,{getter:!0}),n.set&&Mi(n.set,t,{setter:!0}),Li.f(e,t,n)},Pi={},Bi=Mt,Wi=(Pi.f=Bi,z),Ui=Wi,Vi=kt,Gi=Pi,ji=cn.f,Hi=function(e){var t=Ui.Symbol||(Ui.Symbol={});Vi(t,e)||ji(t,e,{value:Gi.f(e)})},qi=j,Ki=Ee,Xi=Mt,Yi=Or,Ji=function(){var e=Ki("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=Xi("toPrimitive");t&&!t[r]&&Yi(t,r,(function(e){return qi(n,this)}),{arity:1})},Zi=cn.f,Qi=kt,$i=Mt("toStringTag"),eo=function(e,t,n){e&&!n&&(e=e.prototype),e&&!Qi(e,$i)&&Zi(e,$i,{configurable:!0,value:t})},to=ae,no=ee,ro=function(e){if("Function"===to(e))return no(e)},ao=Ze,io=U,oo=ro(ro.bind),so=function(e,t){return ao(e),void 0===t?e:io?oo(e,t):function(){return e.apply(t,arguments)}},uo=ae,co=Array.isArray||function(e){return"Array"==uo(e)},lo=ee,ho=B,po=xe,fo=qa,vo=Vn,mo=function(){},go=[],yo=Ee("Reflect","construct"),bo=/^\s*(?:class|function)\b/,xo=lo(bo.exec),ko=!bo.exec(mo),wo=function(e){if(!po(e))return!1;try{return yo(mo,go,e),!0}catch(e){return!1}},Io=function(e){if(!po(e))return!1;switch(fo(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ko||!!xo(bo,vo(e))}catch(e){return!0}};Io.sham=!0;var No=!yo||ho((function(){var e;return wo(wo.call)||!wo(Object)||!wo((function(){e=!0}))||e}))?Io:wo,So=co,To=No,Eo=Ie,Co=Mt("species"),Ao=Array,Ro=function(e){var t;return So(e)&&(t=e.constructor,(To(t)&&(t===Ao||So(t.prototype))||Eo(t)&&null===(t=t[Co]))&&(t=void 0)),void 0===t?Ao:t},_o=Ro,Oo=function(e,t){return new(_o(e))(0===t?0:t)},Fo=so,Do=ce,Mo=yt,Lo=Kr,zo=Oo,Po=ee([].push),Bo=function(e){var t=1==e,n=2==e,r=3==e,a=4==e,i=6==e,o=7==e,s=5==e||i;return function(u,c,l,h){for(var p,f,d=Mo(u),v=Do(d),m=Fo(c,l),g=Lo(v),y=0,b=h||zo,x=t?b(u,g):n||o?b(u,0):void 0;g>y;y++)if((s||y in v)&&(f=m(p=v[y],y,d),e))if(t)x[y]=f;else if(f)switch(e){case 3:return!0;case 5:return p;case 6:return y;case 2:Po(x,p)}else switch(e){case 4:return!1;case 7:Po(x,p)}return i?-1:r||a?a:x}},Wo={forEach:Bo(0),map:Bo(1),filter:Bo(2),some:Bo(3),every:Bo(4),find:Bo(5),findIndex:Bo(6),filterReject:Bo(7)},Uo=La,Vo=z,Go=j,jo=ee,Ho=W,qo=Be,Ko=B,Xo=kt,Yo=Ce,Jo=dn,Zo=me,Qo=qt,$o=Ya,es=Y,ts=yi,ns=$a,rs=Fr,as=bi,is=ua,os=P,ss=cn,us=Ja,cs=H,ls=Or,hs=zi,ps=vt,fs=Yn,ds=Tt,vs=Mt,ms=Pi,gs=Hi,ys=Ji,bs=eo,xs=cr,ks=Wo.forEach,ws=Xn("hidden"),Is="Symbol",Ns=xs.set,Ss=xs.getterFor(Is),Ts=Object.prototype,Es=Vo.Symbol,Cs=Es&&Es.prototype,As=Vo.TypeError,Rs=Vo.QObject,_s=os.f,Os=ss.f,Fs=as.f,Ds=cs.f,Ms=jo([].push),Ls=ps("symbols"),zs=ps("op-symbols"),Ps=ps("wks"),Bs=!Rs||!Rs.prototype||!Rs.prototype.findChild,Ws=Ho&&Ko((function(){return 7!=ts(Os({},"a",{get:function(){return Os(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=_s(Ts,t);r&&delete Ts[t],Os(e,t,n),r&&e!==Ts&&Os(Ts,t,r)}:Os,Us=function(e,t){var n=Ls[e]=ts(Cs);return Ns(n,{type:Is,tag:e,description:t}),Ho||(n.description=t),n},Vs=function(e,t,n){e===Ts&&Vs(zs,t,n),Jo(e);var r=Qo(t);return Jo(n),Xo(Ls,r)?(n.enumerable?(Xo(e,ws)&&e[ws][r]&&(e[ws][r]=!1),n=ts(n,{enumerable:es(0,!1)})):(Xo(e,ws)||Os(e,ws,es(1,{})),e[ws][r]=!0),Ws(e,r,n)):Os(e,r,n)},Gs=function(e,t){Jo(e);var n=Zo(t),r=ns(n).concat(Ks(n));return ks(r,(function(t){Ho&&!Go(js,n,t)||Vs(e,t,n[t])})),e},js=function(e){var t=Qo(e),n=Go(Ds,this,t);return!(this===Ts&&Xo(Ls,t)&&!Xo(zs,t))&&(!(n||!Xo(this,t)||!Xo(Ls,t)||Xo(this,ws)&&this[ws][t])||n)},Hs=function(e,t){var n=Zo(e),r=Qo(t);if(n!==Ts||!Xo(Ls,r)||Xo(zs,r)){var a=_s(n,r);return!a||!Xo(Ls,r)||Xo(n,ws)&&n[ws][r]||(a.enumerable=!0),a}},qs=function(e){var t=Fs(Zo(e)),n=[];return ks(t,(function(e){Xo(Ls,e)||Xo(fs,e)||Ms(n,e)})),n},Ks=function(e){var t=e===Ts,n=Fs(t?zs:Zo(e)),r=[];return ks(n,(function(e){!Xo(Ls,e)||t&&!Xo(Ts,e)||Ms(r,Ls[e])})),r};qo||(Es=function(){if(Yo(Cs,this))throw As("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?$o(arguments[0]):void 0,t=ds(e),n=function e(n){this===Ts&&Go(e,zs,n),Xo(this,ws)&&Xo(this[ws],t)&&(this[ws][t]=!1),Ws(this,t,es(1,n))};return Ho&&Bs&&Ws(Ts,t,{configurable:!0,set:n}),Us(t,e)},ls(Cs=Es.prototype,"toString",(function(){return Ss(this).tag})),ls(Es,"withoutSetter",(function(e){return Us(ds(e),e)})),cs.f=js,ss.f=Vs,us.f=Gs,os.f=Hs,rs.f=as.f=qs,is.f=Ks,ms.f=function(e){return Us(vs(e),e)},Ho&&(hs(Cs,"description",{configurable:!0,get:function(){return Ss(this).description}}),ls(Ts,"propertyIsEnumerable",js,{unsafe:!0}))),Uo({global:!0,constructor:!0,wrap:!0,forced:!qo,sham:!qo},{Symbol:Es}),ks(ns(Ps),(function(e){gs(e)})),Uo({target:Is,stat:!0,forced:!qo},{useSetter:function(){Bs=!0},useSimple:function(){Bs=!1}}),Uo({target:"Object",stat:!0,forced:!qo,sham:!Ho},{create:function(e,t){return void 0===t?ts(e):Gs(ts(e),t)},defineProperty:Vs,defineProperties:Gs,getOwnPropertyDescriptor:Hs}),Uo({target:"Object",stat:!0,forced:!qo},{getOwnPropertyNames:qs}),ys(),bs(Es,Is),fs[ws]=!0;var Xs=Be&&!!Symbol.for&&!!Symbol.keyFor,Ys=La,Js=Ee,Zs=kt,Qs=Ya,$s=vt,eu=Xs,tu=$s("string-to-symbol-registry"),nu=$s("symbol-to-string-registry");Ys({target:"Symbol",stat:!0,forced:!eu},{for:function(e){var t=Qs(e);if(Zs(tu,t))return tu[t];var n=Js("Symbol")(t);return tu[t]=n,nu[n]=t,n}});var ru=La,au=kt,iu=He,ou=Ke,su=Xs,uu=vt("symbol-to-string-registry");ru({target:"Symbol",stat:!0,forced:!su},{keyFor:function(e){if(!iu(e))throw TypeError(ou(e)+" is not a symbol");if(au(uu,e))return uu[e]}});var cu=U,lu=Function.prototype,hu=lu.apply,pu=lu.call,fu="object"==("undefined"==typeof Reflect?"undefined":s(Reflect))&&Reflect.apply||(cu?pu.bind(hu):function(){return pu.apply(hu,arguments)}),du=ee([].slice),vu=co,mu=xe,gu=ae,yu=Ya,bu=ee([].push),xu=function(e){if(mu(e))return e;if(vu(e)){for(var t=e.length,n=[],r=0;r<t;r++){var a=e[r];"string"==typeof a?bu(n,a):"number"!=typeof a&&"Number"!=gu(a)&&"String"!=gu(a)||bu(n,yu(a))}var i=n.length,o=!0;return function(e,t){if(o)return o=!1,t;if(vu(this))return t;for(var r=0;r<i;r++)if(n[r]===e)return t}}},ku=La,wu=Ee,Iu=fu,Nu=j,Su=ee,Tu=B,Eu=xe,Cu=He,Au=du,Ru=xu,_u=Be,Ou=String,Fu=wu("JSON","stringify"),Du=Su(/./.exec),Mu=Su("".charAt),Lu=Su("".charCodeAt),zu=Su("".replace),Pu=Su(1..toString),Bu=/[\uD800-\uDFFF]/g,Wu=/^[\uD800-\uDBFF]$/,Uu=/^[\uDC00-\uDFFF]$/,Vu=!_u||Tu((function(){var e=wu("Symbol")();return"[null]"!=Fu([e])||"{}"!=Fu({a:e})||"{}"!=Fu(Object(e))})),Gu=Tu((function(){return'"\\udf06\\ud834"'!==Fu("\udf06\ud834")||'"\\udead"'!==Fu("\udead")})),ju=function(e,t){var n=Au(arguments),r=Ru(t);if(Eu(r)||void 0!==e&&!Cu(e))return n[1]=function(e,t){if(Eu(r)&&(t=Nu(r,this,Ou(e),t)),!Cu(t))return t},Iu(Fu,null,n)},Hu=function(e,t,n){var r=Mu(n,t-1),a=Mu(n,t+1);return Du(Wu,e)&&!Du(Uu,a)||Du(Uu,e)&&!Du(Wu,r)?"\\u"+Pu(Lu(e,0),16):e};Fu&&ku({target:"JSON",stat:!0,arity:3,forced:Vu||Gu},{stringify:function(e,t,n){var r=Au(arguments),a=Iu(Vu?ju:Fu,null,r);return Gu&&"string"==typeof a?zu(a,Bu,Hu):a}});var qu=ua,Ku=yt;La({target:"Object",stat:!0,forced:!Be||B((function(){qu.f(1)}))},{getOwnPropertySymbols:function(e){var t=qu.f;return t?t(Ku(e)):[]}});var Xu=La,Yu=W,Ju=ee,Zu=kt,Qu=xe,$u=Ce,ec=Ya,tc=zi,nc=ba,rc=z.Symbol,ac=rc&&rc.prototype;if(Yu&&Qu(rc)&&(!("description"in ac)||void 0!==rc().description)){var ic={},oc=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:ec(arguments[0]),t=$u(ac,this)?new rc(e):void 0===e?rc():rc(e);return""===e&&(ic[t]=!0),t};nc(oc,rc),oc.prototype=ac,ac.constructor=oc;var sc="Symbol(test)"==String(rc("test")),uc=Ju(ac.valueOf),cc=Ju(ac.toString),lc=/^Symbol\((.*)\)[^)]+$/,hc=Ju("".replace),pc=Ju("".slice);tc(ac,"description",{configurable:!0,get:function(){var e=uc(this);if(Zu(ic,e))return"";var t=cc(e),n=sc?pc(t,7,-1):hc(t,lc,"$1");return""===n?void 0:n}}),Xu({global:!0,constructor:!0,forced:!0},{Symbol:oc})}Hi("asyncIterator"),Hi("hasInstance"),Hi("isConcatSpreadable"),Hi("iterator"),Hi("match"),Hi("matchAll"),Hi("replace"),Hi("search"),Hi("species"),Hi("split");var fc=Ji;Hi("toPrimitive"),fc();var dc=Ee,vc=eo;Hi("toStringTag"),vc(dc("Symbol"),"Symbol"),Hi("unscopables");var mc=ee,gc=Ze,yc=function(e,t,n){try{return mc(gc(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}},bc=xe,xc=String,kc=TypeError,wc=function(e){if("object"==s(e)||bc(e))return e;throw kc("Can't set "+xc(e)+" as a prototype")},Ic=yc,Nc=dn,Sc=wc,Tc=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Ic(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Nc(n),Sc(r),t?e(n,r):n.__proto__=r,n}}():void 0),Ec=cn.f,Cc=function(e,t,n){n in e||Ec(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})},Ac=xe,Rc=Ie,_c=Tc,Oc=function(e,t,n){var r,a;return _c&&Ac(r=t.constructor)&&r!==n&&Rc(a=r.prototype)&&a!==n.prototype&&_c(e,a),e},Fc=Ya,Dc=function(e,t){return void 0===e?arguments.length<2?"":t:Fc(e)},Mc=Ie,Lc=Cn,zc=function(e,t){Mc(t)&&"cause"in t&&Lc(e,"cause",t.cause)},Pc=Error,Bc=ee("".replace),Wc=String(Pc("zxcasd").stack),Uc=/\n\s*at [^:]*:[^\n]*/,Vc=Uc.test(Wc),Gc=function(e,t){if(Vc&&"string"==typeof e&&!Pc.prepareStackTrace)for(;t--;)e=Bc(e,Uc,"");return e},jc=Y,Hc=!B((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",jc(1,7)),7!==e.stack)})),qc=Cn,Kc=Gc,Xc=Hc,Yc=Error.captureStackTrace,Jc=function(e,t,n,r){Xc&&(Yc?Yc(e,t):qc(e,"stack",Kc(n,r)))},Zc=Ee,Qc=kt,$c=Cn,el=Ce,tl=Tc,nl=ba,rl=Cc,al=Oc,il=Dc,ol=zc,sl=Jc,ul=W,cl=function(e,t,n,r){var a="stackTraceLimit",i=r?2:1,o=e.split("."),s=o[o.length-1],u=Zc.apply(null,o);if(u){var c=u.prototype;if(Qc(c,"cause")&&delete c.cause,!n)return u;var l=Zc("Error"),h=t((function(e,t){var n=il(r?t:e,void 0),a=r?new u(e):new u;return void 0!==n&&$c(a,"message",n),sl(a,h,a.stack,2),this&&el(c,this)&&al(a,this,h),arguments.length>i&&ol(a,arguments[i]),a}));h.prototype=c,"Error"!==s?tl?tl(h,l):nl(h,l,{name:!0}):ul&&a in u&&(rl(h,u,a),rl(h,u,"prepareStackTrace")),nl(h,u);try{c.name!==s&&$c(c,"name",s),c.constructor=h}catch(e){}return h}},ll=La,hl=fu,pl=cl,fl="WebAssembly",dl=z.WebAssembly,vl=7!==Error("e",{cause:7}).cause,ml=function(e,t){var n={};n[e]=pl(e,t,vl),ll({global:!0,constructor:!0,arity:1,forced:vl},n)},gl=function(e,t){if(dl&&dl[e]){var n={};n[e]=pl("WebAssembly."+e,t,vl),ll({target:fl,stat:!0,constructor:!0,arity:1,forced:vl},n)}};ml("Error",(function(e){return function(t){return hl(e,this,arguments)}})),ml("EvalError",(function(e){return function(t){return hl(e,this,arguments)}})),ml("RangeError",(function(e){return function(t){return hl(e,this,arguments)}})),ml("ReferenceError",(function(e){return function(t){return hl(e,this,arguments)}})),ml("SyntaxError",(function(e){return function(t){return hl(e,this,arguments)}})),ml("TypeError",(function(e){return function(t){return hl(e,this,arguments)}})),ml("URIError",(function(e){return function(t){return hl(e,this,arguments)}})),gl("CompileError",(function(e){return function(t){return hl(e,this,arguments)}})),gl("LinkError",(function(e){return function(t){return hl(e,this,arguments)}})),gl("RuntimeError",(function(e){return function(t){return hl(e,this,arguments)}}));var yl=W,bl=B,xl=dn,kl=yi,wl=Dc,Il=Error.prototype.toString,Nl=bl((function(){if(yl){var e=kl(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==Il.call(e))return!0}return"2: 1"!==Il.call({message:1,name:2})||"Error"!==Il.call({})}))?function(){var e=xl(this),t=wl(e.name,"Error"),n=wl(e.message);return t?n?t+": "+n:t:n}:Il,Sl=Or,Tl=Nl,El=Error.prototype;El.toString!==Tl&&Sl(El,"toString",Tl);var Cl=!B((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Al=kt,Rl=xe,_l=yt,Ol=Cl,Fl=Xn("IE_PROTO"),Dl=Object,Ml=Dl.prototype,Ll=Ol?Dl.getPrototypeOf:function(e){var t=_l(e);if(Al(t,Fl))return t[Fl];var n=t.constructor;return Rl(n)&&t instanceof n?n.prototype:t instanceof Dl?Ml:null},zl={},Pl=zl,Bl=Mt("iterator"),Wl=Array.prototype,Ul=function(e){return void 0!==e&&(Pl.Array===e||Wl[Bl]===e)},Vl=qa,Gl=et,jl=le,Hl=zl,ql=Mt("iterator"),Kl=function(e){if(!jl(e))return Gl(e,ql)||Gl(e,"@@iterator")||Hl[Vl(e)]},Xl=j,Yl=Ze,Jl=dn,Zl=Ke,Ql=Kl,$l=TypeError,eh=function(e,t){var n=arguments.length<2?Ql(e):t;if(Yl(n))return Jl(Xl(n,e));throw $l(Zl(e)+" is not iterable")},th=j,nh=dn,rh=et,ah=function(e,t,n){var r,a;nh(e);try{if(!(r=rh(e,"return"))){if("throw"===t)throw n;return n}r=th(r,e)}catch(e){a=!0,r=e}if("throw"===t)throw n;if(a)throw r;return nh(r),n},ih=so,oh=j,sh=dn,uh=Ke,ch=Ul,lh=Kr,hh=Ce,ph=eh,fh=Kl,dh=ah,vh=TypeError,mh=function(e,t){this.stopped=e,this.result=t},gh=mh.prototype,yh=function(e,t,n){var r,a,i,o,u,c,l,h=n&&n.that,p=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),v=!(!n||!n.INTERRUPTED),m=ih(t,h),g=function(e){return r&&dh(r,"normal",e),new mh(!0,e)},y=function(e){return p?(sh(e),v?m(e[0],e[1],g):m(e[0],e[1])):v?m(e,g):m(e)};if(f)r=e.iterator;else if(d)r=e;else{if(!(a=fh(e)))throw vh(uh(e)+" is not iterable");if(ch(a)){for(i=0,o=lh(e);o>i;i++)if((u=y(e[i]))&&hh(gh,u))return u;return new mh(!1)}r=ph(e,a)}for(c=f?e.next:r.next;!(l=oh(c,r)).done;){try{u=y(l.value)}catch(e){dh(r,"throw",e)}if("object"==s(u)&&u&&hh(gh,u))return u}return new mh(!1)},bh=La,xh=Ce,kh=Ll,wh=Tc,Ih=ba,Nh=yi,Sh=Cn,Th=Y,Eh=zc,Ch=Jc,Ah=yh,Rh=Dc,_h=Mt("toStringTag"),Oh=Error,Fh=[].push,Dh=function(e,t){var n,r=xh(Mh,this);wh?n=wh(Oh(),r?kh(this):Mh):(n=r?this:Nh(Mh),Sh(n,_h,"Error")),void 0!==t&&Sh(n,"message",Rh(t)),Ch(n,Dh,n.stack,1),arguments.length>2&&Eh(n,arguments[2]);var a=[];return Ah(e,Fh,{that:a}),Sh(n,"errors",a),n};wh?wh(Dh,Oh):Ih(Dh,Oh,{name:!0});var Mh=Dh.prototype=Nh(Oh.prototype,{constructor:Th(1,Dh),message:Th(1,""),name:Th(1,"AggregateError")});bh({global:!0,constructor:!0,arity:2},{AggregateError:Dh});var Lh=La,zh=fu,Ph=B,Bh=cl,Wh="AggregateError",Uh=Ee(Wh),Vh=!Ph((function(){return 1!==Uh([1]).errors[0]}))&&Ph((function(){return 7!==Uh([1],Wh,{cause:7}).cause}));Lh({global:!0,constructor:!0,arity:2,forced:Vh},{AggregateError:Bh(Wh,(function(e){return function(t,n){return zh(e,this,arguments)}}),Vh,!0)});var Gh=Mt,jh=yi,Hh=cn.f,qh=Gh("unscopables"),Kh=Array.prototype;null==Kh[qh]&&Hh(Kh,qh,{configurable:!0,value:jh(null)});var Xh=function(e){Kh[qh][e]=!0},Yh=yt,Jh=Kr,Zh=Pr,Qh=Xh;La({target:"Array",proto:!0},{at:function(e){var t=Yh(this),n=Jh(t),r=Zh(e),a=r>=0?r:n+r;return a<0||a>=n?void 0:t[a]}}),Qh("at");var $h=TypeError,ep=function(e){if(e>9007199254740991)throw $h("Maximum allowed index exceeded");return e},tp=B,np=Le,rp=Mt("species"),ap=function(e){return np>=51||!tp((function(){var t=[];return(t.constructor={})[rp]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},ip=La,op=B,sp=co,up=Ie,cp=yt,lp=Kr,hp=ep,pp=Ii,fp=Oo,dp=ap,vp=Le,mp=Mt("isConcatSpreadable"),gp=vp>=51||!op((function(){var e=[];return e[mp]=!1,e.concat()[0]!==e})),yp=function(e){if(!up(e))return!1;var t=e[mp];return void 0!==t?!!t:sp(e)};ip({target:"Array",proto:!0,arity:1,forced:!gp||!dp("concat")},{concat:function(e){var t,n,r,a,i,o=cp(this),s=fp(o,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(yp(i=-1===t?o:arguments[t]))for(a=lp(i),hp(u+a),n=0;n<a;n++,u++)n in i&&pp(s,u,i[n]);else hp(u+1),pp(s,u++,i);return s.length=u,s}});var bp=Ke,xp=TypeError,kp=function(e,t){if(!delete e[t])throw xp("Cannot delete property "+bp(t)+" of "+bp(e))},wp=yt,Ip=Vr,Np=Kr,Sp=kp,Tp=Math.min,Ep=[].copyWithin||function(e,t){var n=wp(this),r=Np(n),a=Ip(e,r),i=Ip(t,r),o=arguments.length>2?arguments[2]:void 0,s=Tp((void 0===o?r:Ip(o,r))-i,r-a),u=1;for(i<a&&a<i+s&&(u=-1,i+=s-1,a+=s-1);s-- >0;)i in n?n[a]=n[i]:Sp(n,a),a+=u,i+=u;return n},Cp=Xh;La({target:"Array",proto:!0},{copyWithin:Ep}),Cp("copyWithin");var Ap=B,Rp=function(e,t){var n=[][e];return!!n&&Ap((function(){n.call(null,t||function(){return 1},1)}))},_p=Wo.every;La({target:"Array",proto:!0,forced:!Rp("every")},{every:function(e){return _p(this,e,arguments.length>1?arguments[1]:void 0)}});var Op=yt,Fp=Vr,Dp=Kr,Mp=function(e){for(var t=Op(this),n=Dp(t),r=arguments.length,a=Fp(r>1?arguments[1]:void 0,n),i=r>2?arguments[2]:void 0,o=void 0===i?n:Fp(i,n);o>a;)t[a++]=e;return t},Lp=Xh;La({target:"Array",proto:!0},{fill:Mp}),Lp("fill");var zp=Wo.filter;La({target:"Array",proto:!0,forced:!ap("filter")},{filter:function(e){return zp(this,e,arguments.length>1?arguments[1]:void 0)}});var Pp=La,Bp=Wo.find,Wp=Xh,Up="find",Vp=!0;Up in[]&&Array(1).find((function(){Vp=!1})),Pp({target:"Array",proto:!0,forced:Vp},{find:function(e){return Bp(this,e,arguments.length>1?arguments[1]:void 0)}}),Wp(Up);var Gp=La,jp=Wo.findIndex,Hp=Xh,qp="findIndex",Kp=!0;qp in[]&&Array(1).findIndex((function(){Kp=!1})),Gp({target:"Array",proto:!0,forced:Kp},{findIndex:function(e){return jp(this,e,arguments.length>1?arguments[1]:void 0)}}),Hp(qp);var Xp=so,Yp=ce,Jp=yt,Zp=Kr,Qp=function(e){var t=1==e;return function(n,r,a){for(var i,o=Jp(n),s=Yp(o),u=Xp(r,a),c=Zp(s);c-- >0;)if(u(i=s[c],c,o))switch(e){case 0:return i;case 1:return c}return t?-1:void 0}},$p={findLast:Qp(0),findLastIndex:Qp(1)},ef=$p.findLast,tf=Xh;La({target:"Array",proto:!0},{findLast:function(e){return ef(this,e,arguments.length>1?arguments[1]:void 0)}}),tf("findLast");var nf=$p.findLastIndex,rf=Xh;La({target:"Array",proto:!0},{findLastIndex:function(e){return nf(this,e,arguments.length>1?arguments[1]:void 0)}}),rf("findLastIndex");var af=co,of=Kr,sf=ep,uf=so,cf=function e(t,n,r,a,i,o,s,u){for(var c,l=i,h=0,p=!!s&&uf(s,u);h<a;)h in r&&(c=p?p(r[h],h,n):r[h],o>0&&af(c)?l=e(t,n,c,of(c),l,o-1)-1:(sf(l+1),t[l]=c),l++),h++;return l},lf=cf,hf=yt,pf=Kr,ff=Pr,df=Oo;La({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=hf(this),n=pf(t),r=df(t,0);return r.length=lf(r,t,t,n,0,void 0===e?1:ff(e)),r}});var vf=cf,mf=Ze,gf=yt,yf=Kr,bf=Oo;La({target:"Array",proto:!0},{flatMap:function(e){var t,n=gf(this),r=yf(n);return mf(e),(t=bf(n,0)).length=vf(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}});var xf=Wo.forEach,kf=Rp("forEach")?[].forEach:function(e){return xf(this,e,arguments.length>1?arguments[1]:void 0)};La({target:"Array",proto:!0,forced:[].forEach!=kf},{forEach:kf});var wf=dn,If=ah,Nf=function(e,t,n,r){try{return r?t(wf(n)[0],n[1]):t(n)}catch(t){If(e,"throw",t)}},Sf=so,Tf=j,Ef=yt,Cf=Nf,Af=Ul,Rf=No,_f=Kr,Of=Ii,Ff=eh,Df=Kl,Mf=Array,Lf=function(e){var t=Ef(e),n=Rf(this),r=arguments.length,a=r>1?arguments[1]:void 0,i=void 0!==a;i&&(a=Sf(a,r>2?arguments[2]:void 0));var o,s,u,c,l,h,p=Df(t),f=0;if(!p||this===Mf&&Af(p))for(o=_f(t),s=n?new this(o):Mf(o);o>f;f++)h=i?a(t[f],f):t[f],Of(s,f,h);else for(l=(c=Ff(t,p)).next,s=n?new this:[];!(u=Tf(l,c)).done;f++)h=i?Cf(c,a,[u.value,f],!0):u.value,Of(s,f,h);return s.length=f,s},zf=Mt("iterator"),Pf=!1;try{var Bf=0,Wf={next:function(){return{done:!!Bf++}},return:function(){Pf=!0}};Wf[zf]=function(){return this},Array.from(Wf,(function(){throw 2}))}catch(e){}var Uf=function(e,t){if(!t&&!Pf)return!1;var n=!1;try{var r={};r[zf]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Vf=Lf;La({target:"Array",stat:!0,forced:!Uf((function(e){Array.from(e)}))},{from:Vf});var Gf=Qr.includes,jf=Xh;La({target:"Array",proto:!0,forced:B((function(){return!Array(1).includes()}))},{includes:function(e){return Gf(this,e,arguments.length>1?arguments[1]:void 0)}}),jf("includes");var Hf=La,qf=Qr.indexOf,Kf=Rp,Xf=ro([].indexOf),Yf=!!Xf&&1/Xf([1],1,-0)<0;Hf({target:"Array",proto:!0,forced:Yf||!Kf("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return Yf?Xf(this,e,t)||0:qf(this,e,t)}}),La({target:"Array",stat:!0},{isArray:co});var Jf,Zf,Qf,$f=B,ed=xe,td=Ie,nd=Ll,rd=Or,ad=Mt("iterator"),id=!1;[].keys&&("next"in(Qf=[].keys())?(Zf=nd(nd(Qf)))!==Object.prototype&&(Jf=Zf):id=!0);var od=!td(Jf)||$f((function(){var e={};return Jf[ad].call(e)!==e}));od&&(Jf={}),ed(Jf[ad])||rd(Jf,ad,(function(){return this}));var sd={IteratorPrototype:Jf,BUGGY_SAFARI_ITERATORS:id},ud=sd.IteratorPrototype,cd=yi,ld=Y,hd=eo,pd=zl,fd=function(){return this},dd=function(e,t,n,r){var a=t+" Iterator";return e.prototype=cd(ud,{next:ld(+!r,n)}),hd(e,a,!1,!0),pd[a]=fd,e},vd=La,md=j,gd=xe,yd=dd,bd=Ll,xd=Tc,kd=eo,wd=Cn,Id=Or,Nd=zl,Sd=Mn.PROPER,Td=Mn.CONFIGURABLE,Ed=sd.IteratorPrototype,Cd=sd.BUGGY_SAFARI_ITERATORS,Ad=Mt("iterator"),Rd="keys",_d="values",Od="entries",Fd=function(){return this},Dd=function(e,t,n,r,a,i,o){yd(n,t,r);var s,u,c,l=function(e){if(e===a&&v)return v;if(!Cd&&e in f)return f[e];switch(e){case Rd:case _d:case Od:return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",p=!1,f=e.prototype,d=f[Ad]||f["@@iterator"]||a&&f[a],v=!Cd&&d||l(a),m="Array"==t&&f.entries||d;if(m&&(s=bd(m.call(new e)))!==Object.prototype&&s.next&&(bd(s)!==Ed&&(xd?xd(s,Ed):gd(s[Ad])||Id(s,Ad,Fd)),kd(s,h,!0,!0)),Sd&&a==_d&&d&&d.name!==_d&&(Td?wd(f,"name",_d):(p=!0,v=function(){return md(d,this)})),a)if(u={values:l(_d),keys:i?v:l(Rd),entries:l(Od)},o)for(c in u)(Cd||p||!(c in f))&&Id(f,c,u[c]);else vd({target:t,proto:!0,forced:Cd||p},u);return f[Ad]!==v&&Id(f,Ad,v,{name:a}),Nd[t]=v,u},Md=function(e,t){return{value:e,done:t}},Ld=me,zd=Xh,Pd=zl,Bd=cr,Wd=cn.f,Ud=Dd,Vd=Md,Gd=W,jd="Array Iterator",Hd=Bd.set,qd=Bd.getterFor(jd),Kd=Ud(Array,"Array",(function(e,t){Hd(this,{type:jd,target:Ld(e),index:0,kind:t})}),(function(){var e=qd(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,Vd(void 0,!0)):Vd("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),Xd=Pd.Arguments=Pd.Array;if(zd("keys"),zd("values"),zd("entries"),Gd&&"values"!==Xd.name)try{Wd(Xd,"name",{value:"values"})}catch(e){}var Yd=La,Jd=ce,Zd=me,Qd=Rp,$d=ee([].join);Yd({target:"Array",proto:!0,forced:Jd!=Object||!Qd("join",",")},{join:function(e){return $d(Zd(this),void 0===e?",":e)}});var ev=fu,tv=me,nv=Pr,rv=Kr,av=Rp,iv=Math.min,ov=[].lastIndexOf,sv=!!ov&&1/[1].lastIndexOf(1,-0)<0,uv=av("lastIndexOf"),cv=sv||!uv?function(e){if(sv)return ev(ov,this,arguments)||0;var t=tv(this),n=rv(t),r=n-1;for(arguments.length>1&&(r=iv(r,nv(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:ov;La({target:"Array",proto:!0,forced:cv!==[].lastIndexOf},{lastIndexOf:cv});var lv=Wo.map;La({target:"Array",proto:!0,forced:!ap("map")},{map:function(e){return lv(this,e,arguments.length>1?arguments[1]:void 0)}});var hv=No,pv=Ii,fv=Array;La({target:"Array",stat:!0,forced:B((function(){function e(){}return!(fv.of.call(e)instanceof e)}))},{of:function(){for(var e=0,t=arguments.length,n=new(hv(this)?this:fv)(t);t>e;)pv(n,e,arguments[e++]);return n.length=t,n}});var dv=W,vv=co,mv=TypeError,gv=Object.getOwnPropertyDescriptor,yv=dv&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}()?function(e,t){if(vv(e)&&!gv(e,"length").writable)throw mv("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},bv=yt,xv=Kr,kv=yv,wv=ep;La({target:"Array",proto:!0,arity:1,forced:B((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=bv(this),n=xv(t),r=arguments.length;wv(n+r);for(var a=0;a<r;a++)t[n]=arguments[a],n++;return kv(t,n),n}});var Iv=Ze,Nv=yt,Sv=ce,Tv=Kr,Ev=TypeError,Cv=function(e){return function(t,n,r,a){Iv(n);var i=Nv(t),o=Sv(i),s=Tv(i),u=e?s-1:0,c=e?-1:1;if(r<2)for(;;){if(u in o){a=o[u],u+=c;break}if(u+=c,e?u<0:s<=u)throw Ev("Reduce of empty array with no initial value")}for(;e?u>=0:s>u;u+=c)u in o&&(a=n(a,o[u],u,i));return a}},Av={left:Cv(!1),right:Cv(!0)},Rv="undefined"!=typeof process&&"process"==ae(process),_v=Av.left;La({target:"Array",proto:!0,forced:!Rv&&Le>79&&Le<83||!Rp("reduce")},{reduce:function(e){var t=arguments.length;return _v(this,e,t,t>1?arguments[1]:void 0)}});var Ov=Av.right;La({target:"Array",proto:!0,forced:!Rv&&Le>79&&Le<83||!Rp("reduceRight")},{reduceRight:function(e){return Ov(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Fv=La,Dv=co,Mv=ee([].reverse),Lv=[1,2];Fv({target:"Array",proto:!0,forced:String(Lv)===String(Lv.reverse())},{reverse:function(){return Dv(this)&&(this.length=this.length),Mv(this)}});var zv=La,Pv=co,Bv=No,Wv=Ie,Uv=Vr,Vv=Kr,Gv=me,jv=Ii,Hv=Mt,qv=du,Kv=ap("slice"),Xv=Hv("species"),Yv=Array,Jv=Math.max;zv({target:"Array",proto:!0,forced:!Kv},{slice:function(e,t){var n,r,a,i=Gv(this),o=Vv(i),s=Uv(e,o),u=Uv(void 0===t?o:t,o);if(Pv(i)&&(n=i.constructor,(Bv(n)&&(n===Yv||Pv(n.prototype))||Wv(n)&&null===(n=n[Xv]))&&(n=void 0),n===Yv||void 0===n))return qv(i,s,u);for(r=new(void 0===n?Yv:n)(Jv(u-s,0)),a=0;s<u;s++,a++)s in i&&jv(r,a,i[s]);return r.length=a,r}});var Zv=Wo.some;La({target:"Array",proto:!0,forced:!Rp("some")},{some:function(e){return Zv(this,e,arguments.length>1?arguments[1]:void 0)}});var Qv=Ai,$v=Math.floor,em=function(e,t){for(var n,r,a=e.length,i=1;i<a;){for(r=i,n=e[i];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==i++&&(e[r]=n)}return e},tm=function(e,t,n,r){for(var a=t.length,i=n.length,o=0,s=0;o<a||s<i;)e[o+s]=o<a&&s<i?r(t[o],n[s])<=0?t[o++]:n[s++]:o<a?t[o++]:n[s++];return e},nm=function e(t,n){var r=t.length,a=$v(r/2);return r<8?em(t,n):tm(t,e(Qv(t,0,a),n),e(Qv(t,a),n),n)},rm=Ae.match(/firefox\/(\d+)/i),am=!!rm&&+rm[1],im=/MSIE|Trident/.test(Ae),om=Ae.match(/AppleWebKit\/(\d+)\./),sm=!!om&&+om[1],um=La,cm=ee,lm=Ze,hm=yt,pm=Kr,fm=kp,dm=Ya,vm=B,mm=nm,gm=Rp,ym=am,bm=im,xm=Le,km=sm,wm=[],Im=cm(wm.sort),Nm=cm(wm.push),Sm=vm((function(){wm.sort(void 0)})),Tm=vm((function(){wm.sort(null)})),Em=gm("sort"),Cm=!vm((function(){if(xm)return xm<70;if(!(ym&&ym>3)){if(bm)return!0;if(km)return km<603;var e,t,n,r,a="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)wm.push({k:t+r,v:n})}for(wm.sort((function(e,t){return t.v-e.v})),r=0;r<wm.length;r++)t=wm[r].k.charAt(0),a.charAt(a.length-1)!==t&&(a+=t);return"DGBEFHACIJK"!==a}}));um({target:"Array",proto:!0,forced:Sm||!Tm||!Em||!Cm},{sort:function(e){void 0!==e&&lm(e);var t=hm(this);if(Cm)return void 0===e?Im(t):Im(t,e);var n,r,a=[],i=pm(t);for(r=0;r<i;r++)r in t&&Nm(a,t[r]);for(mm(a,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:dm(t)>dm(n)?1:-1}}(e)),n=pm(a),r=0;r<n;)t[r]=a[r++];for(;r<i;)fm(t,r++);return t}});var Am=Ee,Rm=zi,_m=W,Om=Mt("species"),Fm=function(e){var t=Am(e);_m&&t&&!t[Om]&&Rm(t,Om,{configurable:!0,get:function(){return this}})};Fm("Array");var Dm=La,Mm=yt,Lm=Vr,zm=Pr,Pm=Kr,Bm=yv,Wm=ep,Um=Oo,Vm=Ii,Gm=kp,jm=ap("splice"),Hm=Math.max,qm=Math.min;Dm({target:"Array",proto:!0,forced:!jm},{splice:function(e,t){var n,r,a,i,o,s,u=Mm(this),c=Pm(u),l=Lm(e,c),h=arguments.length;for(0===h?n=r=0:1===h?(n=0,r=c-l):(n=h-2,r=qm(Hm(zm(t),0),c-l)),Wm(c+n-r),a=Um(u,r),i=0;i<r;i++)(o=l+i)in u&&Vm(a,i,u[o]);if(a.length=r,n<r){for(i=l;i<c-r;i++)s=i+n,(o=i+r)in u?u[s]=u[o]:Gm(u,s);for(i=c;i>c-r+n;i--)Gm(u,i-1)}else if(n>r)for(i=c-r;i>l;i--)s=i+n-1,(o=i+r-1)in u?u[s]=u[o]:Gm(u,s);for(i=0;i<n;i++)u[i+l]=arguments[i+2];return Bm(u,c-r+n),a}});var Km=Kr,Xm=function(e,t){for(var n=Km(e),r=new t(n),a=0;a<n;a++)r[a]=e[n-a-1];return r},Ym=Xm,Jm=me,Zm=Xh,Qm=Array;La({target:"Array",proto:!0},{toReversed:function(){return Ym(Jm(this),Qm)}}),Zm("toReversed");var $m=Kr,eg=function(e,t){for(var n=0,r=$m(t),a=new e(r);r>n;)a[n]=t[n++];return a},tg=z,ng=function(e){return tg[e].prototype},rg=La,ag=Ze,ig=me,og=eg,sg=Xh,ug=Array,cg=ee(ng("Array").sort);rg({target:"Array",proto:!0},{toSorted:function(e){void 0!==e&&ag(e);var t=ig(this),n=og(ug,t);return cg(n,e)}}),sg("toSorted");var lg=La,hg=Xh,pg=ep,fg=Kr,dg=Vr,vg=me,mg=Pr,gg=Array,yg=Math.max,bg=Math.min;lg({target:"Array",proto:!0},{toSpliced:function(e,t){var n,r,a,i,o=vg(this),s=fg(o),u=dg(e,s),c=arguments.length,l=0;for(0===c?n=r=0:1===c?(n=0,r=s-u):(n=c-2,r=bg(yg(mg(t),0),s-u)),a=pg(s+n-r),i=gg(a);l<u;l++)i[l]=o[l];for(;l<u+n;l++)i[l]=arguments[l-u+2];for(;l<a;l++)i[l]=o[l+r-n];return i}}),hg("toSpliced"),Xh("flat"),Xh("flatMap");var xg=yt,kg=Kr,wg=yv,Ig=kp,Ng=ep;La({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}()},{unshift:function(e){var t=xg(this),n=kg(t),r=arguments.length;if(r){Ng(n+r);for(var a=n;a--;){var i=a+r;a in t?t[i]=t[a]:Ig(t,i)}for(var o=0;o<r;o++)t[o]=arguments[o]}return wg(t,n+r)}});var Sg=Kr,Tg=Pr,Eg=RangeError,Cg=function(e,t,n,r){var a=Sg(e),i=Tg(n),o=i<0?a+i:i;if(o>=a||o<0)throw Eg("Incorrect index");for(var s=new t(a),u=0;u<a;u++)s[u]=u===o?r:e[u];return s},Ag=Cg,Rg=me,_g=Array;La({target:"Array",proto:!0},{with:function(e,t){return Ag(Rg(this),_g,e,t)}});var Og="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Fg=Or,Dg=function(e,t,n){for(var r in t)Fg(e,r,t[r],n);return e},Mg=Ce,Lg=TypeError,zg=function(e,t){if(Mg(t,e))return e;throw Lg("Incorrect invocation")},Pg=Pr,Bg=Hr,Wg=RangeError,Ug=function(e){if(void 0===e)return 0;var t=Pg(e),n=Bg(t);if(t!==n)throw Wg("Wrong length or index");return n},Vg=Array,Gg=Math.abs,jg=Math.pow,Hg=Math.floor,qg=Math.log,Kg=Math.LN2,Xg={pack:function(e,t,n){var r,a,i,o=Vg(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?jg(2,-24)-jg(2,-77):0,h=e<0||0===e&&1/e<0?1:0,p=0;for((e=Gg(e))!=e||e===1/0?(a=e!=e?1:0,r=u):(r=Hg(qg(e)/Kg),e*(i=jg(2,-r))<1&&(r--,i*=2),(e+=r+c>=1?l/i:l*jg(2,1-c))*i>=2&&(r++,i/=2),r+c>=u?(a=0,r=u):r+c>=1?(a=(e*i-1)*jg(2,t),r+=c):(a=e*jg(2,c-1)*jg(2,t),r=0));t>=8;)o[p++]=255&a,a/=256,t-=8;for(r=r<<t|a,s+=t;s>0;)o[p++]=255&r,r/=256,s-=8;return o[--p]|=128*h,o},unpack:function(e,t){var n,r=e.length,a=8*r-t-1,i=(1<<a)-1,o=i>>1,s=a-7,u=r-1,c=e[u--],l=127&c;for(c>>=7;s>0;)l=256*l+e[u--],s-=8;for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;)n=256*n+e[u--],s-=8;if(0===l)l=1-o;else{if(l===i)return n?NaN:c?-1/0:1/0;n+=jg(2,t),l-=o}return(c?-1:1)*n*jg(2,l-t)}},Yg=z,Jg=ee,Zg=W,Qg=Og,$g=Mn,ey=Cn,ty=zi,ny=Dg,ry=B,ay=zg,iy=Pr,oy=Hr,sy=Ug,uy=Xg,cy=Ll,ly=Tc,hy=Fr.f,py=Mp,fy=Ai,dy=eo,vy=cr,my=$g.PROPER,gy=$g.CONFIGURABLE,yy="ArrayBuffer",by="DataView",xy="Wrong index",ky=vy.getterFor(yy),wy=vy.getterFor(by),Iy=vy.set,Ny=Yg.ArrayBuffer,Sy=Ny,Ty=Sy&&Sy.prototype,Ey=Yg.DataView,Cy=Ey&&Ey.prototype,Ay=Object.prototype,Ry=Yg.Array,_y=Yg.RangeError,Oy=Jg(py),Fy=Jg([].reverse),Dy=uy.pack,My=uy.unpack,Ly=function(e){return[255&e]},zy=function(e){return[255&e,e>>8&255]},Py=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},By=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Wy=function(e){return Dy(e,23,4)},Uy=function(e){return Dy(e,52,8)},Vy=function(e,t,n){ty(e.prototype,t,{configurable:!0,get:function(){return n(this)[t]}})},Gy=function(e,t,n,r){var a=sy(n),i=wy(e);if(a+t>i.byteLength)throw _y(xy);var o=i.bytes,s=a+i.byteOffset,u=fy(o,s,s+t);return r?u:Fy(u)},jy=function(e,t,n,r,a,i){var o=sy(n),s=wy(e);if(o+t>s.byteLength)throw _y(xy);for(var u=s.bytes,c=o+s.byteOffset,l=r(+a),h=0;h<t;h++)u[c+h]=l[i?h:t-h-1]};if(Qg){var Hy=my&&Ny.name!==yy;if(ry((function(){Ny(1)}))&&ry((function(){new Ny(-1)}))&&!ry((function(){return new Ny,new Ny(1.5),new Ny(NaN),1!=Ny.length||Hy&&!gy})))Hy&&gy&&ey(Ny,"name",yy);else{(Sy=function(e){return ay(this,Ty),new Ny(sy(e))}).prototype=Ty;for(var qy,Ky=hy(Ny),Xy=0;Ky.length>Xy;)(qy=Ky[Xy++])in Sy||ey(Sy,qy,Ny[qy]);Ty.constructor=Sy}ly&&cy(Cy)!==Ay&&ly(Cy,Ay);var Yy=new Ey(new Sy(2)),Jy=Jg(Cy.setInt8);Yy.setInt8(0,2147483648),Yy.setInt8(1,2147483649),!Yy.getInt8(0)&&Yy.getInt8(1)||ny(Cy,{setInt8:function(e,t){Jy(this,e,t<<24>>24)},setUint8:function(e,t){Jy(this,e,t<<24>>24)}},{unsafe:!0})}else Ty=(Sy=function(e){ay(this,Ty);var t=sy(e);Iy(this,{type:yy,bytes:Oy(Ry(t),0),byteLength:t}),Zg||(this.byteLength=t,this.detached=!1)}).prototype,Ey=function(e,t,n){ay(this,Cy),ay(e,Ty);var r=ky(e),a=r.byteLength,i=iy(t);if(i<0||i>a)throw _y("Wrong offset");if(i+(n=void 0===n?a-i:oy(n))>a)throw _y("Wrong length");Iy(this,{type:by,buffer:e,byteLength:n,byteOffset:i,bytes:r.bytes}),Zg||(this.buffer=e,this.byteLength=n,this.byteOffset=i)},Cy=Ey.prototype,Zg&&(Vy(Sy,"byteLength",ky),Vy(Ey,"buffer",wy),Vy(Ey,"byteLength",wy),Vy(Ey,"byteOffset",wy)),ny(Cy,{getInt8:function(e){return Gy(this,1,e)[0]<<24>>24},getUint8:function(e){return Gy(this,1,e)[0]},getInt16:function(e){var t=Gy(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Gy(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return By(Gy(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return By(Gy(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return My(Gy(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return My(Gy(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){jy(this,1,e,Ly,t)},setUint8:function(e,t){jy(this,1,e,Ly,t)},setInt16:function(e,t){jy(this,2,e,zy,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){jy(this,2,e,zy,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){jy(this,4,e,Py,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){jy(this,4,e,Py,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){jy(this,4,e,Wy,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){jy(this,8,e,Uy,t,arguments.length>2?arguments[2]:void 0)}});dy(Sy,yy),dy(Ey,by);var Zy={ArrayBuffer:Sy,DataView:Ey},Qy=Fm,$y="ArrayBuffer",eb=Zy.ArrayBuffer;La({global:!0,constructor:!0,forced:z.ArrayBuffer!==eb},{ArrayBuffer:eb}),Qy($y);var tb,nb,rb,ab=Og,ib=W,ob=z,sb=xe,ub=Ie,cb=kt,lb=qa,hb=Ke,pb=Cn,fb=Or,db=zi,vb=Ce,mb=Ll,gb=Tc,yb=Mt,bb=Tt,xb=cr.enforce,kb=cr.get,wb=ob.Int8Array,Ib=wb&&wb.prototype,Nb=ob.Uint8ClampedArray,Sb=Nb&&Nb.prototype,Tb=wb&&mb(wb),Eb=Ib&&mb(Ib),Cb=Object.prototype,Ab=ob.TypeError,Rb=yb("toStringTag"),_b=bb("TYPED_ARRAY_TAG"),Ob="TypedArrayConstructor",Fb=ab&&!!gb&&"Opera"!==lb(ob.opera),Db=!1,Mb={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Lb={BigInt64Array:8,BigUint64Array:8},zb=function(e){if(!ub(e))return!1;var t=lb(e);return cb(Mb,t)||cb(Lb,t)};for(tb in Mb)(rb=(nb=ob[tb])&&nb.prototype)?xb(rb).TypedArrayConstructor=nb:Fb=!1;for(tb in Lb)(rb=(nb=ob[tb])&&nb.prototype)&&(xb(rb).TypedArrayConstructor=nb);if((!Fb||!sb(Tb)||Tb===Function.prototype)&&(Tb=function(){throw Ab("Incorrect invocation")},Fb))for(tb in Mb)ob[tb]&&gb(ob[tb],Tb);if((!Fb||!Eb||Eb===Cb)&&(Eb=Tb.prototype,Fb))for(tb in Mb)ob[tb]&&gb(ob[tb].prototype,Eb);if(Fb&&mb(Sb)!==Eb&&gb(Sb,Eb),ib&&!cb(Eb,Rb))for(tb in Db=!0,db(Eb,Rb,{configurable:!0,get:function(){return ub(this)?this[_b]:void 0}}),Mb)ob[tb]&&pb(ob[tb],_b,tb);var Pb={NATIVE_ARRAY_BUFFER_VIEWS:Fb,TYPED_ARRAY_TAG:Db&&_b,aTypedArray:function(e){if(zb(e))return e;throw Ab("Target is not a typed array")},aTypedArrayConstructor:function(e){if(sb(e)&&(!gb||vb(Tb,e)))return e;throw Ab(hb(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(ib){if(n)for(var a in Mb){var i=ob[a];if(i&&cb(i.prototype,e))try{delete i.prototype[e]}catch(n){try{i.prototype[e]=t}catch(e){}}}Eb[e]&&!n||fb(Eb,e,n?t:Fb&&Ib[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,a;if(ib){if(gb){if(n)for(r in Mb)if((a=ob[r])&&cb(a,e))try{delete a[e]}catch(e){}if(Tb[e]&&!n)return;try{return fb(Tb,e,n?t:Fb&&Tb[e]||t)}catch(e){}}for(r in Mb)!(a=ob[r])||a[e]&&!n||fb(a,e,t)}},getTypedArrayConstructor:function e(t){var n=mb(t);if(ub(n)){var r=kb(n);return r&&cb(r,Ob)?r.TypedArrayConstructor:e(n)}},isView:function(e){if(!ub(e))return!1;var t=lb(e);return"DataView"===t||cb(Mb,t)||cb(Lb,t)},isTypedArray:zb,TypedArray:Tb,TypedArrayPrototype:Eb};La({target:"ArrayBuffer",stat:!0,forced:!Pb.NATIVE_ARRAY_BUFFER_VIEWS},{isView:Pb.isView});var Bb=No,Wb=Ke,Ub=TypeError,Vb=function(e){if(Bb(e))return e;throw Ub(Wb(e)+" is not a constructor")},Gb=dn,jb=Vb,Hb=le,qb=Mt("species"),Kb=function(e,t){var n,r=Gb(e).constructor;return void 0===r||Hb(n=Gb(r)[qb])?t:jb(n)},Xb=La,Yb=ro,Jb=B,Zb=dn,Qb=Vr,$b=Hr,ex=Kb,tx=Zy.ArrayBuffer,nx=Zy.DataView,rx=nx.prototype,ax=Yb(tx.prototype.slice),ix=Yb(rx.getUint8),ox=Yb(rx.setUint8);Xb({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Jb((function(){return!new tx(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(ax&&void 0===t)return ax(Zb(this),e);for(var n=Zb(this).byteLength,r=Qb(e,n),a=Qb(void 0===t?n:t,n),i=new(ex(this,tx))($b(a-r)),o=new nx(this),s=new nx(i),u=0;r<a;)ox(s,u++,ix(o,r++));return i}}),La({global:!0,constructor:!0,forced:!Og},{DataView:Zy.DataView});var sx=La,ux=ee,cx=B((function(){return 120!==new Date(16e11).getYear()})),lx=ux(Date.prototype.getFullYear);sx({target:"Date",proto:!0,forced:cx},{getYear:function(){return lx(this)-1900}});var hx=La,px=Date,fx=ee(px.prototype.getTime);hx({target:"Date",stat:!0},{now:function(){return fx(new px)}});var dx=La,vx=ee,mx=Pr,gx=Date.prototype,yx=vx(gx.getTime),bx=vx(gx.setFullYear);dx({target:"Date",proto:!0},{setYear:function(e){yx(this);var t=mx(e);return bx(this,0<=t&&t<=99?t+1900:t)}}),La({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString});var xx=Pr,kx=Ya,wx=fe,Ix=RangeError,Nx=function(e){var t=kx(wx(this)),n="",r=xx(e);if(r<0||r==1/0)throw Ix("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},Sx=ee,Tx=Hr,Ex=Ya,Cx=fe,Ax=Sx(Nx),Rx=Sx("".slice),_x=Math.ceil,Ox=function(e){return function(t,n,r){var a,i,o=Ex(Cx(t)),s=Tx(n),u=o.length,c=void 0===r?" ":Ex(r);return s<=u||""==c?o:((i=Ax(c,_x((a=s-u)/c.length))).length>a&&(i=Rx(i,0,a)),e?o+i:i+o)}},Fx={start:Ox(!1),end:Ox(!0)},Dx=ee,Mx=B,Lx=Fx.start,zx=RangeError,Px=isFinite,Bx=Math.abs,Wx=Date.prototype,Ux=Wx.toISOString,Vx=Dx(Wx.getTime),Gx=Dx(Wx.getUTCDate),jx=Dx(Wx.getUTCFullYear),Hx=Dx(Wx.getUTCHours),qx=Dx(Wx.getUTCMilliseconds),Kx=Dx(Wx.getUTCMinutes),Xx=Dx(Wx.getUTCMonth),Yx=Dx(Wx.getUTCSeconds),Jx=Mx((function(){return"0385-07-25T07:06:39.999Z"!=Ux.call(new Date(-50000000000001))}))||!Mx((function(){Ux.call(new Date(NaN))}))?function(){if(!Px(Vx(this)))throw zx("Invalid time value");var e=this,t=jx(e),n=qx(e),r=t<0?"-":t>9999?"+":"";return r+Lx(Bx(t),r?6:4,0)+"-"+Lx(Xx(e)+1,2,0)+"-"+Lx(Gx(e),2,0)+"T"+Lx(Hx(e),2,0)+":"+Lx(Kx(e),2,0)+":"+Lx(Yx(e),2,0)+"."+Lx(n,3,0)+"Z"}:Ux,Zx=Jx;La({target:"Date",proto:!0,forced:Date.prototype.toISOString!==Zx},{toISOString:Zx});var Qx=yt,$x=Gt;La({target:"Date",proto:!0,arity:1,forced:B((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=Qx(this),n=$x(t,"number");return"number"!=typeof n||isFinite(n)?t.toISOString():null}});var ek=dn,tk=it,nk=TypeError,rk=function(e){if(ek(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw nk("Incorrect hint");return tk(this,e)},ak=kt,ik=Or,ok=rk,sk=Mt("toPrimitive"),uk=Date.prototype;ak(uk,sk)||ik(uk,sk,ok);var ck=ee,lk=Or,hk=Date.prototype,pk="Invalid Date",fk="toString",dk=ck(hk.toString),vk=ck(hk.getTime);String(new Date(NaN))!=pk&&lk(hk,fk,(function(){var e=vk(this);return e==e?dk(this):pk}));var mk=La,gk=ee,yk=Ya,bk=gk("".charAt),xk=gk("".charCodeAt),kk=gk(/./.exec),wk=gk(1..toString),Ik=gk("".toUpperCase),Nk=/[\w*+\-./@]/,Sk=function(e,t){for(var n=wk(e,16);n.length<t;)n="0"+n;return n};mk({global:!0},{escape:function(e){for(var t,n,r=yk(e),a="",i=r.length,o=0;o<i;)t=bk(r,o++),kk(Nk,t)?a+=t:a+=(n=xk(t,0))<256?"%"+Sk(n,2):"%u"+Ik(Sk(n,4));return a}});var Tk=ee,Ek=Ze,Ck=Ie,Ak=kt,Rk=du,_k=U,Ok=Function,Fk=Tk([].concat),Dk=Tk([].join),Mk={},Lk=function(e,t,n){if(!Ak(Mk,t)){for(var r=[],a=0;a<t;a++)r[a]="a["+a+"]";Mk[t]=Ok("C,a","return new C("+Dk(r,",")+")")}return Mk[t](e,n)},zk=_k?Ok.bind:function(e){var t=Ek(this),n=t.prototype,r=Rk(arguments,1),a=function(){var n=Fk(r,Rk(arguments));return this instanceof a?Lk(t,n.length,n):t.apply(e,n)};return Ck(n)&&(a.prototype=n),a},Pk=zk;La({target:"Function",proto:!0,forced:Function.bind!==Pk},{bind:Pk});var Bk=xe,Wk=Ie,Uk=cn,Vk=Ll,Gk=Er,jk=Mt("hasInstance"),Hk=Function.prototype;jk in Hk||Uk.f(Hk,jk,{value:Gk((function(e){if(!Bk(this)||!Wk(e))return!1;var t=this.prototype;if(!Wk(t))return e instanceof this;for(;e=Vk(e);)if(t===e)return!0;return!1}),jk)});var qk=W,Kk=Mn.EXISTS,Xk=ee,Yk=zi,Jk=Function.prototype,Zk=Xk(Jk.toString),Qk=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,$k=Xk(Qk.exec);qk&&!Kk&&Yk(Jk,"name",{configurable:!0,get:function(){try{return $k(Qk,Zk(this))[1]}catch(e){return""}}});var ew=z;La({global:!0,forced:ew.globalThis!==ew},{globalThis:ew}),eo(z.JSON,"JSON",!0);var tw={exports:{}},nw=B((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),rw=B,aw=Ie,iw=ae,ow=nw,sw=Object.isExtensible,uw=rw((function(){sw(1)}))||ow?function(e){return!!aw(e)&&((!ow||"ArrayBuffer"!=iw(e))&&(!sw||sw(e)))}:sw,cw=!B((function(){return Object.isExtensible(Object.preventExtensions({}))})),lw=(tw.exports,La),hw=ee,pw=Yn,fw=Ie,dw=kt,vw=cn.f,mw=Fr,gw=bi,yw=uw,bw=cw,xw=!1,kw=Tt("meta"),ww=0,Iw=function(e){vw(e,kw,{value:{objectID:"O"+ww++,weakData:{}}})},Nw=tw.exports={enable:function(){Nw.enable=function(){},xw=!0;var e=mw.f,t=hw([].splice),n={};n[kw]=1,e(n).length&&(mw.f=function(n){for(var r=e(n),a=0,i=r.length;a<i;a++)if(r[a]===kw){t(r,a,1);break}return r},lw({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:gw.f}))},fastKey:function(e,t){if(!fw(e))return"symbol"==s(e)?e:("string"==typeof e?"S":"P")+e;if(!dw(e,kw)){if(!yw(e))return"F";if(!t)return"E";Iw(e)}return e[kw].objectID},getWeakData:function(e,t){if(!dw(e,kw)){if(!yw(e))return!0;if(!t)return!1;Iw(e)}return e[kw].weakData},onFreeze:function(e){return bw&&xw&&yw(e)&&!dw(e,kw)&&Iw(e),e}};pw[kw]=!0;var Sw=tw.exports,Tw=La,Ew=z,Cw=ee,Aw=Ca,Rw=Or,_w=Sw,Ow=yh,Fw=zg,Dw=xe,Mw=le,Lw=Ie,zw=B,Pw=Uf,Bw=eo,Ww=Oc,Uw=function(e,t,n){var r=-1!==e.indexOf("Map"),a=-1!==e.indexOf("Weak"),i=r?"set":"add",o=Ew[e],s=o&&o.prototype,u=o,c={},l=function(e){var t=Cw(s[e]);Rw(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(a&&!Lw(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return a&&!Lw(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(a&&!Lw(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(Aw(e,!Dw(o)||!(a||s.forEach&&!zw((function(){(new o).entries().next()})))))u=n.getConstructor(t,e,r,i),_w.enable();else if(Aw(e,!0)){var h=new u,p=h[i](a?{}:-0,1)!=h,f=zw((function(){h.has(1)})),d=Pw((function(e){new o(e)})),v=!a&&zw((function(){for(var e=new o,t=5;t--;)e[i](t,t);return!e.has(-0)}));d||((u=t((function(e,t){Fw(e,s);var n=Ww(new o,e,u);return Mw(t)||Ow(t,n[i],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=u),(f||v)&&(l("delete"),l("has"),r&&l("get")),(v||p)&&l(i),a&&s.clear&&delete s.clear}return c[e]=u,Tw({global:!0,constructor:!0,forced:u!=o},c),Bw(u,e),a||n.setStrong(u,e,r),u},Vw=yi,Gw=zi,jw=Dg,Hw=so,qw=zg,Kw=le,Xw=yh,Yw=Dd,Jw=Md,Zw=Fm,Qw=W,$w=Sw.fastKey,eI=cr.set,tI=cr.getterFor,nI={getConstructor:function(e,t,n,r){var a=e((function(e,a){qw(e,i),eI(e,{type:t,index:Vw(null),first:void 0,last:void 0,size:0}),Qw||(e.size=0),Kw(a)||Xw(a,e[r],{that:e,AS_ENTRIES:n})})),i=a.prototype,o=tI(t),s=function(e,t,n){var r,a,i=o(e),s=u(e,t);return s?s.value=n:(i.last=s={index:a=$w(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=s),r&&(r.next=s),Qw?i.size++:e.size++,"F"!==a&&(i.index[a]=s)),e},u=function(e,t){var n,r=o(e),a=$w(t);if("F"!==a)return r.index[a];for(n=r.first;n;n=n.next)if(n.key==t)return n};return jw(i,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,Qw?e.size=0:this.size=0},delete:function(e){var t=this,n=o(t),r=u(t,e);if(r){var a=r.next,i=r.previous;delete n.index[r.index],r.removed=!0,i&&(i.next=a),a&&(a.previous=i),n.first==r&&(n.first=a),n.last==r&&(n.last=i),Qw?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=o(this),r=Hw(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!u(this,e)}}),jw(i,n?{get:function(e){var t=u(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Qw&&Gw(i,"size",{configurable:!0,get:function(){return o(this).size}}),a},setStrong:function(e,t,n){var r=t+" Iterator",a=tI(t),i=tI(r);Yw(e,t,(function(e,t){eI(this,{type:r,target:e,state:a(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?Jw("keys"==t?n.key:"values"==t?n.value:[n.key,n.value],!1):(e.target=void 0,Jw(void 0,!0))}),n?"entries":"values",!n,!0),Zw(t)}};Uw("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),nI);var rI=Math.log,aI=Math.log1p||function(e){var t=+e;return t>-1e-8&&t<1e-8?t-t*t/2:rI(1+t)},iI=La,oI=aI,sI=Math.acosh,uI=Math.log,cI=Math.sqrt,lI=Math.LN2;iI({target:"Math",stat:!0,forced:!sI||710!=Math.floor(sI(Number.MAX_VALUE))||sI(1/0)!=1/0},{acosh:function(e){var t=+e;return t<1?NaN:t>94906265.62425156?uI(t)+lI:oI(t-1+cI(t-1)*cI(t+1))}});var hI=La,pI=Math.asinh,fI=Math.log,dI=Math.sqrt;hI({target:"Math",stat:!0,forced:!(pI&&1/pI(0)>0)},{asinh:function e(t){var n=+t;return isFinite(n)&&0!=n?n<0?-e(-n):fI(n+dI(n*n+1)):n}});var vI=La,mI=Math.atanh,gI=Math.log;vI({target:"Math",stat:!0,forced:!(mI&&1/mI(-0)<0)},{atanh:function(e){var t=+e;return 0==t?t:gI((1+t)/(1-t))/2}});var yI=Math.sign||function(e){var t=+e;return 0==t||t!=t?t:t<0?-1:1},bI=La,xI=yI,kI=Math.abs,wI=Math.pow;bI({target:"Math",stat:!0},{cbrt:function(e){var t=+e;return xI(t)*wI(kI(t),1/3)}});var II=La,NI=Math.floor,SI=Math.log,TI=Math.LOG2E;II({target:"Math",stat:!0},{clz32:function(e){var t=e>>>0;return t?31-NI(SI(t+.5)*TI):32}});var EI=Math.expm1,CI=Math.exp,AI=!EI||EI(10)>22025.465794806718||EI(10)<22025.465794806718||-2e-17!=EI(-2e-17)?function(e){var t=+e;return 0==t?t:t>-1e-6&&t<1e-6?t+t*t/2:CI(t)-1}:EI,RI=La,_I=AI,OI=Math.cosh,FI=Math.abs,DI=Math.E;RI({target:"Math",stat:!0,forced:!OI||OI(710)===1/0},{cosh:function(e){var t=_I(FI(e)-1)+1;return(t+1/(t*DI*DI))*(DI/2)}});var MI=AI;La({target:"Math",stat:!0,forced:MI!=Math.expm1},{expm1:MI});var LI=yI,zI=Math.abs,PI=Math.pow,BI=PI(2,-52),WI=PI(2,-23),UI=PI(2,127)*(2-WI),VI=PI(2,-126),GI=Math.fround||function(e){var t,n,r=+e,a=zI(r),i=LI(r);return a<VI?i*function(e){return e+1/BI-1/BI}(a/VI/WI)*VI*WI:(n=(t=(1+WI/BI)*a)-(t-a))>UI||n!=n?i*(1/0):i*n};La({target:"Math",stat:!0},{fround:GI});var jI=La,HI=Math.hypot,qI=Math.abs,KI=Math.sqrt;jI({target:"Math",stat:!0,arity:2,forced:!!HI&&HI(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,a=0,i=0,o=arguments.length,s=0;i<o;)s<(n=qI(arguments[i++]))?(a=a*(r=s/n)*r+1,s=n):a+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*KI(a)}});var XI=La,YI=B,JI=Math.imul;XI({target:"Math",stat:!0,forced:YI((function(){return-5!=JI(4294967295,5)||2!=JI.length}))},{imul:function(e,t){var n=65535,r=+e,a=+t,i=n&r,o=n&a;return 0|i*o+((n&r>>>16)*o+i*(n&a>>>16)<<16>>>0)}});var ZI=Math.log,QI=Math.LOG10E,$I=Math.log10||function(e){return ZI(e)*QI};La({target:"Math",stat:!0},{log10:$I}),La({target:"Math",stat:!0},{log1p:aI});var eN=La,tN=Math.log,nN=Math.LN2;eN({target:"Math",stat:!0},{log2:function(e){return tN(e)/nN}}),La({target:"Math",stat:!0},{sign:yI});var rN=La,aN=B,iN=AI,oN=Math.abs,sN=Math.exp,uN=Math.E;rN({target:"Math",stat:!0,forced:aN((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(e){var t=+e;return oN(t)<1?(iN(t)-iN(-t))/2:(sN(t-1)-sN(-t-1))*(uN/2)}});var cN=La,lN=AI,hN=Math.exp;cN({target:"Math",stat:!0},{tanh:function(e){var t=+e,n=lN(t),r=lN(-t);return n==1/0?1:r==1/0?-1:(n-r)/(hN(t)+hN(-t))}}),eo(Math,"Math",!0),La({target:"Math",stat:!0},{trunc:Lr});var pN=ee(1..valueOf),fN="\t\n\v\f\r  áââââââââââââ¯âã\u2028\u2029\ufeff",dN=fe,vN=Ya,mN=fN,gN=ee("".replace),yN=RegExp("^["+mN+"]+"),bN=RegExp("(^|[^"+mN+"])["+mN+"]+$"),xN=function(e){return function(t){var n=vN(dN(t));return 1&e&&(n=gN(n,yN,"")),2&e&&(n=gN(n,bN,"$1")),n}},kN={start:xN(1),end:xN(2),trim:xN(3)},wN=La,IN=st,NN=W,SN=z,TN=Wi,EN=ee,CN=Ca,AN=kt,RN=Oc,_N=Ce,ON=He,FN=Gt,DN=B,MN=Fr.f,LN=P.f,zN=cn.f,PN=pN,BN=kN.trim,WN="Number",UN=SN.Number,VN=(TN.Number,UN.prototype),GN=SN.TypeError,jN=EN("".slice),HN=EN("".charCodeAt),qN=function(e){var t=FN(e,"number");return"bigint"==typeof t?t:KN(t)},KN=function(e){var t,n,r,a,i,o,s,u,c=FN(e,"number");if(ON(c))throw GN("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=BN(c),43===(t=HN(c,0))||45===t){if(88===(n=HN(c,2))||120===n)return NaN}else if(48===t){switch(HN(c,1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+c}for(o=(i=jN(c,2)).length,s=0;s<o;s++)if((u=HN(i,s))<48||u>a)return NaN;return parseInt(i,r)}return+c},XN=CN(WN,!UN(" 0o1")||!UN("0b1")||UN("+0x1")),YN=function(e){return _N(VN,e)&&DN((function(){PN(e)}))},JN=function(e){var t=arguments.length<1?0:UN(qN(e));return YN(this)?RN(Object(t),this,JN):t};JN.prototype=VN,XN&&(VN.constructor=JN),wN({global:!0,constructor:!0,wrap:!0,forced:XN},{Number:JN});var ZN=function(e,t){for(var n,r=NN?MN(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),a=0;r.length>a;a++)AN(t,n=r[a])&&!AN(e,n)&&zN(e,n,LN(t,n))};XN&&ZN(TN.Number,UN),La({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)});var QN=z.isFinite,$N=Number.isFinite||function(e){return"number"==typeof e&&QN(e)};La({target:"Number",stat:!0},{isFinite:$N});var eS=Ie,tS=Math.floor,nS=Number.isInteger||function(e){return!eS(e)&&isFinite(e)&&tS(e)===e};La({target:"Number",stat:!0},{isInteger:nS}),La({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var rS=La,aS=nS,iS=Math.abs;rS({target:"Number",stat:!0},{isSafeInteger:function(e){return aS(e)&&iS(e)<=9007199254740991}}),La({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991}),La({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991});var oS=z,sS=B,uS=Ya,cS=kN.trim,lS=ee("".charAt),hS=oS.parseFloat,pS=oS.Symbol,fS=pS&&pS.iterator,dS=1/hS("\t\n\v\f\r  áââââââââââââ¯âã\u2028\u2029\ufeff-0")!=-1/0||fS&&!sS((function(){hS(Object(fS))}))?function(e){var t=cS(uS(e)),n=hS(t);return 0===n&&"-"==lS(t,0)?-0:n}:hS,vS=dS;La({target:"Number",stat:!0,forced:Number.parseFloat!=vS},{parseFloat:vS});var mS=z,gS=B,yS=ee,bS=Ya,xS=kN.trim,kS=fN,wS=mS.parseInt,IS=mS.Symbol,NS=IS&&IS.iterator,SS=/^[+-]?0x/i,TS=yS(SS.exec),ES=8!==wS(kS+"08")||22!==wS(kS+"0x16")||NS&&!gS((function(){wS(Object(NS))}))?function(e,t){var n=xS(bS(e));return wS(n,t>>>0||(TS(SS,n)?16:10))}:wS,CS=ES;La({target:"Number",stat:!0,forced:Number.parseInt!=CS},{parseInt:CS});var AS=La,RS=ee,_S=Pr,OS=pN,FS=Nx,DS=$I,MS=B,LS=RangeError,zS=String,PS=isFinite,BS=Math.abs,WS=Math.floor,US=Math.pow,VS=Math.round,GS=RS(1..toExponential),jS=RS(FS),HS=RS("".slice),qS="-6.9000e-11"===GS(-69e-12,4)&&"1.25e+0"===GS(1.255,2)&&"1.235e+4"===GS(12345,3)&&"3e+1"===GS(25,0);AS({target:"Number",proto:!0,forced:!qS||!(MS((function(){GS(1,1/0)}))&&MS((function(){GS(1,-1/0)})))||!!MS((function(){GS(1/0,1/0),GS(NaN,1/0)}))},{toExponential:function(e){var t=OS(this);if(void 0===e)return GS(t);var n=_S(e);if(!PS(t))return String(t);if(n<0||n>20)throw LS("Incorrect fraction digits");if(qS)return GS(t,n);var r="",a="",i=0,o="",s="";if(t<0&&(r="-",t=-t),0===t)i=0,a=jS("0",n+1);else{var u=DS(t);i=WS(u);var c=0,l=US(10,i-n);2*t>=(2*(c=VS(t/l))+1)*l&&(c+=1),c>=US(10,n+1)&&(c/=10,i+=1),a=zS(c)}return 0!==n&&(a=HS(a,0,1)+"."+HS(a,1)),0===i?(o="+",s="0"):(o=i>0?"+":"-",s=zS(BS(i))),r+(a+="e"+o+s)}});var KS=La,XS=ee,YS=Pr,JS=pN,ZS=Nx,QS=B,$S=RangeError,eT=String,tT=Math.floor,nT=XS(ZS),rT=XS("".slice),aT=XS(1..toFixed),iT=function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)},oT=function(e,t,n){for(var r=-1,a=n;++r<6;)a+=t*e[r],e[r]=a%1e7,a=tT(a/1e7)},sT=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=tT(r/t),r=r%t*1e7},uT=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=eT(e[t]);n=""===n?r:n+nT("0",7-r.length)+r}return n};KS({target:"Number",proto:!0,forced:QS((function(){return"0.000"!==aT(8e-5,3)||"1"!==aT(.9,0)||"1.25"!==aT(1.255,2)||"1000000000000000128"!==aT(0xde0b6b3a7640080,0)}))||!QS((function(){aT({})}))},{toFixed:function(e){var t,n,r,a,i=JS(this),o=YS(e),s=[0,0,0,0,0,0],u="",c="0";if(o<0||o>20)throw $S("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return eT(i);if(i<0&&(u="-",i=-i),i>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(i*iT(2,69,1))-69)<0?i*iT(2,-t,1):i/iT(2,t,1),n*=4503599627370496,(t=52-t)>0){for(oT(s,0,n),r=o;r>=7;)oT(s,1e7,0),r-=7;for(oT(s,iT(10,r,1),0),r=t-1;r>=23;)sT(s,1<<23),r-=23;sT(s,1<<r),oT(s,1,1),sT(s,2),c=uT(s)}else oT(s,0,n),oT(s,1<<-t,0),c=uT(s)+nT("0",o);return c=o>0?u+((a=c.length)<=o?"0."+nT("0",o-a)+c:rT(c,0,a-o)+"."+rT(c,a-o)):u+c}});var cT=La,lT=B,hT=pN,pT=ee(1..toPrecision);cT({target:"Number",proto:!0,forced:lT((function(){return"1"!==pT(1,void 0)}))||!lT((function(){pT({})}))},{toPrecision:function(e){return void 0===e?pT(hT(this)):pT(hT(this),e)}});var fT=W,dT=ee,vT=j,mT=B,gT=$a,yT=ua,bT=H,xT=yt,kT=ce,wT=Object.assign,IT=Object.defineProperty,NT=dT([].concat),ST=!wT||mT((function(){if(fT&&1!==wT({b:1},wT(IT({},"a",{enumerable:!0,get:function(){IT(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=wT({},e)[n]||gT(wT({},t)).join("")!=r}))?function(e,t){for(var n=xT(e),r=arguments.length,a=1,i=yT.f,o=bT.f;r>a;)for(var s,u=kT(arguments[a++]),c=i?NT(gT(u),i(u)):gT(u),l=c.length,h=0;l>h;)s=c[h++],fT&&!vT(o,u,s)||(n[s]=u[s]);return n}:wT,TT=ST;La({target:"Object",stat:!0,arity:2,forced:Object.assign!==TT},{assign:TT}),La({target:"Object",stat:!0,sham:!W},{create:yi});var ET=z,CT=sm,AT=!B((function(){if(!(CT&&CT<535)){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete ET[e]}})),RT=Ze,_T=yt,OT=cn;W&&La({target:"Object",proto:!0,forced:AT},{__defineGetter__:function(e,t){OT.f(_T(this),e,{get:RT(t),enumerable:!0,configurable:!0})}});var FT=La,DT=W,MT=Ja.f;FT({target:"Object",stat:!0,forced:Object.defineProperties!==MT,sham:!DT},{defineProperties:MT});var LT=La,zT=W,PT=cn.f;LT({target:"Object",stat:!0,forced:Object.defineProperty!==PT,sham:!zT},{defineProperty:PT});var BT=Ze,WT=yt,UT=cn;W&&La({target:"Object",proto:!0,forced:AT},{__defineSetter__:function(e,t){UT.f(WT(this),e,{set:BT(t),enumerable:!0,configurable:!0})}});var VT=W,GT=ee,jT=$a,HT=me,qT=GT(H.f),KT=GT([].push),XT=function(e){return function(t){for(var n,r=HT(t),a=jT(r),i=a.length,o=0,s=[];i>o;)n=a[o++],VT&&!qT(r,n)||KT(s,e?[n,r[n]]:r[n]);return s}},YT={entries:XT(!0),values:XT(!1)},JT=YT.entries;La({target:"Object",stat:!0},{entries:function(e){return JT(e)}});var ZT=La,QT=cw,$T=B,eE=Ie,tE=Sw.onFreeze,nE=Object.freeze;ZT({target:"Object",stat:!0,forced:$T((function(){nE(1)})),sham:!QT},{freeze:function(e){return nE&&eE(e)?nE(tE(e)):e}});var rE=yh,aE=Ii;La({target:"Object",stat:!0},{fromEntries:function(e){var t={};return rE(e,(function(e,n){aE(t,e,n)}),{AS_ENTRIES:!0}),t}});var iE=La,oE=B,sE=me,uE=P.f,cE=W;iE({target:"Object",stat:!0,forced:!cE||oE((function(){uE(1)})),sham:!cE},{getOwnPropertyDescriptor:function(e,t){return uE(sE(e),t)}});var lE=da,hE=me,pE=P,fE=Ii;La({target:"Object",stat:!0,sham:!W},{getOwnPropertyDescriptors:function(e){for(var t,n,r=hE(e),a=pE.f,i=lE(r),o={},s=0;i.length>s;)void 0!==(n=a(r,t=i[s++]))&&fE(o,t,n);return o}});var dE=La,vE=B,mE=bi.f;dE({target:"Object",stat:!0,forced:vE((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:mE});var gE=yt,yE=Ll,bE=Cl;La({target:"Object",stat:!0,forced:B((function(){yE(1)})),sham:!bE},{getPrototypeOf:function(e){return yE(gE(e))}}),La({target:"Object",stat:!0},{hasOwn:kt});var xE=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};La({target:"Object",stat:!0},{is:xE});var kE=uw;La({target:"Object",stat:!0,forced:Object.isExtensible!==kE},{isExtensible:kE});var wE=La,IE=B,NE=Ie,SE=ae,TE=nw,EE=Object.isFrozen;wE({target:"Object",stat:!0,forced:TE||IE((function(){EE(1)}))},{isFrozen:function(e){return!NE(e)||(!(!TE||"ArrayBuffer"!=SE(e))||!!EE&&EE(e))}});var CE=La,AE=B,RE=Ie,_E=ae,OE=nw,FE=Object.isSealed;CE({target:"Object",stat:!0,forced:OE||AE((function(){FE(1)}))},{isSealed:function(e){return!RE(e)||(!(!OE||"ArrayBuffer"!=_E(e))||!!FE&&FE(e))}});var DE=yt,ME=$a;La({target:"Object",stat:!0,forced:B((function(){ME(1)}))},{keys:function(e){return ME(DE(e))}});var LE=La,zE=W,PE=AT,BE=yt,WE=qt,UE=Ll,VE=P.f;zE&&LE({target:"Object",proto:!0,forced:PE},{__lookupGetter__:function(e){var t,n=BE(this),r=WE(e);do{if(t=VE(n,r))return t.get}while(n=UE(n))}});var GE=La,jE=W,HE=AT,qE=yt,KE=qt,XE=Ll,YE=P.f;jE&&GE({target:"Object",proto:!0,forced:HE},{__lookupSetter__:function(e){var t,n=qE(this),r=KE(e);do{if(t=YE(n,r))return t.set}while(n=XE(n))}});var JE=La,ZE=Ie,QE=Sw.onFreeze,$E=cw,eC=B,tC=Object.preventExtensions;JE({target:"Object",stat:!0,forced:eC((function(){tC(1)})),sham:!$E},{preventExtensions:function(e){return tC&&ZE(e)?tC(QE(e)):e}});var nC=W,rC=zi,aC=Ie,iC=yt,oC=fe,sC=Object.getPrototypeOf,uC=Object.setPrototypeOf,cC=Object.prototype,lC="__proto__";if(nC&&sC&&uC&&!(lC in cC))try{rC(cC,lC,{configurable:!0,get:function(){return sC(iC(this))},set:function(e){var t=oC(this);(aC(e)||null===e)&&aC(t)&&uC(t,e)}})}catch(e){}var hC=La,pC=Ie,fC=Sw.onFreeze,dC=cw,vC=B,mC=Object.seal;hC({target:"Object",stat:!0,forced:vC((function(){mC(1)})),sham:!dC},{seal:function(e){return mC&&pC(e)?mC(fC(e)):e}}),La({target:"Object",stat:!0},{setPrototypeOf:Tc});var gC=qa,yC=Ba?{}.toString:function(){return"[object "+gC(this)+"]"},bC=yC;Ba||Or(Object.prototype,"toString",bC,{unsafe:!0});var xC=YT.values;La({target:"Object",stat:!0},{values:function(e){return xC(e)}});La({global:!0,forced:parseFloat!=dS},{parseFloat:dS});La({global:!0,forced:parseInt!=ES},{parseInt:ES});var kC,wC,IC,NC,SC=TypeError,TC=function(e,t){if(e<t)throw SC("Not enough arguments");return e},EC=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ae),CC=z,AC=fu,RC=so,_C=xe,OC=kt,FC=B,DC=oi,MC=du,LC=Jt,zC=TC,PC=EC,BC=Rv,WC=CC.setImmediate,UC=CC.clearImmediate,VC=CC.process,GC=CC.Dispatch,jC=CC.Function,HC=CC.MessageChannel,qC=CC.String,KC=0,XC={},YC="onreadystatechange";FC((function(){kC=CC.location}));var JC=function(e){if(OC(XC,e)){var t=XC[e];delete XC[e],t()}},ZC=function(e){return function(){JC(e)}},QC=function(e){JC(e.data)},$C=function(e){CC.postMessage(qC(e),kC.protocol+"//"+kC.host)};WC&&UC||(WC=function(e){zC(arguments.length,1);var t=_C(e)?e:jC(e),n=MC(arguments,1);return XC[++KC]=function(){AC(t,void 0,n)},wC(KC),KC},UC=function(e){delete XC[e]},BC?wC=function(e){VC.nextTick(ZC(e))}:GC&&GC.now?wC=function(e){GC.now(ZC(e))}:HC&&!PC?(NC=(IC=new HC).port2,IC.port1.onmessage=QC,wC=RC(NC.postMessage,NC)):CC.addEventListener&&_C(CC.postMessage)&&!CC.importScripts&&kC&&"file:"!==kC.protocol&&!FC($C)?(wC=$C,CC.addEventListener("message",QC,!1)):wC=YC in LC("script")?function(e){DC.appendChild(LC("script")).onreadystatechange=function(){DC.removeChild(this),JC(e)}}:function(e){setTimeout(ZC(e),0)});var eA={set:WC,clear:UC},tA=function(){this.head=null,this.tail=null};tA.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var nA,rA,aA,iA,oA,sA=tA,uA=/ipad|iphone|ipod/i.test(Ae)&&"undefined"!=typeof Pebble,cA=/web0s(?!.*chrome)/i.test(Ae),lA=z,hA=so,pA=P.f,fA=eA.set,dA=sA,vA=EC,mA=uA,gA=cA,yA=Rv,bA=lA.MutationObserver||lA.WebKitMutationObserver,xA=lA.document,kA=lA.process,wA=lA.Promise,IA=pA(lA,"queueMicrotask"),NA=IA&&IA.value;if(!NA){var SA=new dA,TA=function(){var e,t;for(yA&&(e=kA.domain)&&e.exit();t=SA.get();)try{t()}catch(e){throw SA.head&&nA(),e}e&&e.enter()};vA||yA||gA||!bA||!xA?!mA&&wA&&wA.resolve?((iA=wA.resolve(void 0)).constructor=wA,oA=hA(iA.then,iA),nA=function(){oA(TA)}):yA?nA=function(){kA.nextTick(TA)}:(fA=hA(fA,lA),nA=function(){fA(TA)}):(rA=!0,aA=xA.createTextNode(""),new bA(TA).observe(aA,{characterData:!0}),nA=function(){aA.data=rA=!rA}),NA=function(e){SA.head||nA(),SA.add(e)}}var EA,CA,AA,RA=NA,_A=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}},OA=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},FA=z.Promise,DA="object"==("undefined"==typeof Deno?"undefined":s(Deno))&&Deno&&"object"==s(Deno.version),MA=!DA&&!Rv&&"object"==("undefined"==typeof window?"undefined":s(window))&&"object"==("undefined"==typeof document?"undefined":s(document)),LA=z,zA=FA,PA=xe,BA=Ca,WA=Vn,UA=Mt,VA=MA,GA=DA,jA=Le,HA=(zA&&zA.prototype,UA("species")),qA=!1,KA=PA(LA.PromiseRejectionEvent),XA=BA("Promise",(function(){var e=WA(zA),t=e!==String(zA);if(!t&&66===jA)return!0;if(!jA||jA<51||!/native code/.test(e)){var n=new zA((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[HA]=r,!(qA=n.then((function(){}))instanceof r))return!0}return!t&&(VA||GA)&&!KA})),YA={CONSTRUCTOR:XA,REJECTION_EVENT:KA,SUBCLASSING:qA},JA={},ZA=Ze,QA=TypeError,$A=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw QA("Bad Promise constructor");t=e,n=r})),this.resolve=ZA(t),this.reject=ZA(n)},eR=(JA.f=function(e){return new $A(e)},La),tR=Rv,nR=z,rR=j,aR=Or,iR=Tc,oR=eo,sR=Fm,uR=Ze,cR=xe,lR=Ie,hR=zg,pR=Kb,fR=eA.set,dR=RA,vR=_A,mR=OA,gR=sA,yR=cr,bR=FA,xR=JA,kR="Promise",wR=YA.CONSTRUCTOR,IR=YA.REJECTION_EVENT,NR=YA.SUBCLASSING,SR=yR.getterFor(kR),TR=yR.set,ER=bR&&bR.prototype,CR=bR,AR=ER,RR=nR.TypeError,_R=nR.document,OR=nR.process,FR=xR.f,DR=FR,MR=!!(_R&&_R.createEvent&&nR.dispatchEvent),LR="unhandledrejection",zR=function(e){var t;return!(!lR(e)||!cR(t=e.then))&&t},PR=function(e,t){var n,r,a,i=t.value,o=1==t.state,s=o?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{s?(o||(2===t.rejection&&GR(t),t.rejection=1),!0===s?n=i:(l&&l.enter(),n=s(i),l&&(l.exit(),a=!0)),n===e.promise?c(RR("Promise-chain cycle")):(r=zR(n))?rR(r,n,u,c):u(n)):c(i)}catch(e){l&&!a&&l.exit(),c(e)}},BR=function(e,t){e.notified||(e.notified=!0,dR((function(){for(var n,r=e.reactions;n=r.get();)PR(n,e);e.notified=!1,t&&!e.rejection&&UR(e)})))},WR=function(e,t,n){var r,a;MR?((r=_R.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),nR.dispatchEvent(r)):r={promise:t,reason:n},!IR&&(a=nR["on"+e])?a(r):e===LR&&vR("Unhandled promise rejection",n)},UR=function(e){rR(fR,nR,(function(){var t,n=e.facade,r=e.value;if(VR(e)&&(t=mR((function(){tR?OR.emit("unhandledRejection",r,n):WR(LR,n,r)})),e.rejection=tR||VR(e)?2:1,t.error))throw t.value}))},VR=function(e){return 1!==e.rejection&&!e.parent},GR=function(e){rR(fR,nR,(function(){var t=e.facade;tR?OR.emit("rejectionHandled",t):WR("rejectionhandled",t,e.value)}))},jR=function(e,t,n){return function(r){e(t,r,n)}},HR=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,BR(e,!0))},qR=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw RR("Promise can't be resolved itself");var a=zR(n);a?dR((function(){var r={done:!1};try{rR(a,n,jR(e,r,t),jR(HR,r,t))}catch(e){HR(r,e,t)}})):(t.value=n,t.state=1,BR(t,!1))}catch(e){HR({done:!1},e,t)}}};if(wR&&(AR=(CR=function(e){hR(this,AR),uR(e),rR(EA,this);var t=SR(this);try{e(jR(qR,t),jR(HR,t))}catch(e){HR(t,e)}}).prototype,(EA=function(e){TR(this,{type:kR,done:!1,notified:!1,parent:!1,reactions:new gR,rejection:!1,state:0,value:void 0})}).prototype=aR(AR,"then",(function(e,t){var n=SR(this),r=FR(pR(this,CR));return n.parent=!0,r.ok=!cR(e)||e,r.fail=cR(t)&&t,r.domain=tR?OR.domain:void 0,0==n.state?n.reactions.add(r):dR((function(){PR(r,n)})),r.promise})),CA=function(){var e=new EA,t=SR(e);this.promise=e,this.resolve=jR(qR,t),this.reject=jR(HR,t)},xR.f=FR=function(e){return e===CR||undefined===e?new CA(e):DR(e)},cR(bR)&&ER!==Object.prototype)){AA=ER.then,NR||aR(ER,"then",(function(e,t){var n=this;return new CR((function(e,t){rR(AA,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete ER.constructor}catch(e){}iR&&iR(ER,AR)}eR({global:!0,constructor:!0,wrap:!0,forced:wR},{Promise:CR}),oR(CR,kR,!1,!0),sR(kR);var KR=FA,XR=YA.CONSTRUCTOR||!Uf((function(e){KR.all(e).then(void 0,(function(){}))})),YR=j,JR=Ze,ZR=JA,QR=OA,$R=yh;La({target:"Promise",stat:!0,forced:XR},{all:function(e){var t=this,n=ZR.f(t),r=n.resolve,a=n.reject,i=QR((function(){var n=JR(t.resolve),i=[],o=0,s=1;$R(e,(function(e){var u=o++,c=!1;s++,YR(n,t,e).then((function(e){c||(c=!0,i[u]=e,--s||r(i))}),a)})),--s||r(i)}));return i.error&&a(i.value),n.promise}});var e_=La,t_=YA.CONSTRUCTOR,n_=FA,r_=Ee,a_=xe,i_=Or,o_=n_&&n_.prototype;if(e_({target:"Promise",proto:!0,forced:t_,real:!0},{catch:function(e){return this.then(void 0,e)}}),a_(n_)){var s_=r_("Promise").prototype.catch;o_.catch!==s_&&i_(o_,"catch",s_,{unsafe:!0})}var u_=j,c_=Ze,l_=JA,h_=OA,p_=yh;La({target:"Promise",stat:!0,forced:XR},{race:function(e){var t=this,n=l_.f(t),r=n.reject,a=h_((function(){var a=c_(t.resolve);p_(e,(function(e){u_(a,t,e).then(n.resolve,r)}))}));return a.error&&r(a.value),n.promise}});var f_=j,d_=JA;La({target:"Promise",stat:!0,forced:YA.CONSTRUCTOR},{reject:function(e){var t=d_.f(this);return f_(t.reject,void 0,e),t.promise}});var v_=dn,m_=Ie,g_=JA,y_=function(e,t){if(v_(e),m_(t)&&t.constructor===e)return t;var n=g_.f(e);return(0,n.resolve)(t),n.promise},b_=La,x_=YA.CONSTRUCTOR,k_=y_;Ee("Promise");b_({target:"Promise",stat:!0,forced:x_},{resolve:function(e){return k_(this,e)}});var w_=j,I_=Ze,N_=JA,S_=OA,T_=yh;La({target:"Promise",stat:!0,forced:XR},{allSettled:function(e){var t=this,n=N_.f(t),r=n.resolve,a=n.reject,i=S_((function(){var n=I_(t.resolve),a=[],i=0,o=1;T_(e,(function(e){var s=i++,u=!1;o++,w_(n,t,e).then((function(e){u||(u=!0,a[s]={status:"fulfilled",value:e},--o||r(a))}),(function(e){u||(u=!0,a[s]={status:"rejected",reason:e},--o||r(a))}))})),--o||r(a)}));return i.error&&a(i.value),n.promise}});var E_=j,C_=Ze,A_=Ee,R_=JA,__=OA,O_=yh,F_="No one promise resolved";La({target:"Promise",stat:!0,forced:XR},{any:function(e){var t=this,n=A_("AggregateError"),r=R_.f(t),a=r.resolve,i=r.reject,o=__((function(){var r=C_(t.resolve),o=[],s=0,u=1,c=!1;O_(e,(function(e){var l=s++,h=!1;u++,E_(r,t,e).then((function(e){h||c||(c=!0,a(e))}),(function(e){h||c||(h=!0,o[l]=e,--u||i(new n(o,F_)))}))})),--u||i(new n(o,F_))}));return o.error&&i(o.value),r.promise}});var D_=La,M_=FA,L_=B,z_=Ee,P_=xe,B_=Kb,W_=y_,U_=Or,V_=M_&&M_.prototype;if(D_({target:"Promise",proto:!0,real:!0,forced:!!M_&&L_((function(){V_.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=B_(this,z_("Promise")),n=P_(e);return this.then(n?function(n){return W_(t,e()).then((function(){return n}))}:e,n?function(n){return W_(t,e()).then((function(){throw n}))}:e)}}),P_(M_)){var G_=z_("Promise").prototype.finally;V_.finally!==G_&&U_(V_,"finally",G_,{unsafe:!0})}var j_=fu,H_=Ze,q_=dn;La({target:"Reflect",stat:!0,forced:!B((function(){Reflect.apply((function(){}))}))},{apply:function(e,t,n){return j_(H_(e),t,q_(n))}});var K_=La,X_=fu,Y_=zk,J_=Vb,Z_=dn,Q_=Ie,$_=yi,eO=B,tO=Ee("Reflect","construct"),nO=Object.prototype,rO=[].push,aO=eO((function(){function e(){}return!(tO((function(){}),[],e)instanceof e)})),iO=!eO((function(){tO((function(){}))})),oO=aO||iO;K_({target:"Reflect",stat:!0,forced:oO,sham:oO},{construct:function(e,t){J_(e),Z_(t);var n=arguments.length<3?e:J_(arguments[2]);if(iO&&!aO)return tO(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return X_(rO,r,t),new(X_(Y_,e,r))}var a=n.prototype,i=$_(Q_(a)?a:nO),o=X_(e,i,t);return Q_(o)?o:i}});var sO=W,uO=dn,cO=qt,lO=cn;La({target:"Reflect",stat:!0,forced:B((function(){Reflect.defineProperty(lO.f({},1,{value:1}),1,{value:2})})),sham:!sO},{defineProperty:function(e,t,n){uO(e);var r=cO(t);uO(n);try{return lO.f(e,r,n),!0}catch(e){return!1}}});var hO=La,pO=dn,fO=P.f;hO({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=fO(pO(e),t);return!(n&&!n.configurable)&&delete e[t]}});var dO=kt,vO=function(e){return void 0!==e&&(dO(e,"value")||dO(e,"writable"))},mO=j,gO=Ie,yO=dn,bO=vO,xO=P,kO=Ll;La({target:"Reflect",stat:!0},{get:function e(t,n){var r,a,i=arguments.length<3?t:arguments[2];return yO(t)===i?t[n]:(r=xO.f(t,n))?bO(r)?r.value:void 0===r.get?void 0:mO(r.get,i):gO(a=kO(t))?e(a,n,i):void 0}});var wO=dn,IO=P;La({target:"Reflect",stat:!0,sham:!W},{getOwnPropertyDescriptor:function(e,t){return IO.f(wO(e),t)}});var NO=dn,SO=Ll;La({target:"Reflect",stat:!0,sham:!Cl},{getPrototypeOf:function(e){return SO(NO(e))}}),La({target:"Reflect",stat:!0},{has:function(e,t){return t in e}});var TO=dn,EO=uw;La({target:"Reflect",stat:!0},{isExtensible:function(e){return TO(e),EO(e)}}),La({target:"Reflect",stat:!0},{ownKeys:da});var CO=Ee,AO=dn;La({target:"Reflect",stat:!0,sham:!cw},{preventExtensions:function(e){AO(e);try{var t=CO("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}});var RO=La,_O=j,OO=dn,FO=Ie,DO=vO,MO=cn,LO=P,zO=Ll,PO=Y;var BO=B((function(){var e=function(){},t=MO.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}));RO({target:"Reflect",stat:!0,forced:BO},{set:function e(t,n,r){var a,i,o,s=arguments.length<4?t:arguments[3],u=LO.f(OO(t),n);if(!u){if(FO(i=zO(t)))return e(i,n,r,s);u=PO(0)}if(DO(u)){if(!1===u.writable||!FO(s))return!1;if(a=LO.f(s,n)){if(a.get||a.set||!1===a.writable)return!1;a.value=r,MO.f(s,n,a)}else MO.f(s,n,PO(0,r))}else{if(void 0===(o=u.set))return!1;_O(o,s,r)}return!0}});var WO=dn,UO=wc,VO=Tc;VO&&La({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){WO(e),UO(t);try{return VO(e,t),!0}catch(e){return!1}}});var GO=z,jO=eo;La({global:!0},{Reflect:{}}),jO(GO.Reflect,"Reflect",!0);var HO=Ie,qO=ae,KO=Mt("match"),XO=function(e){var t;return HO(e)&&(void 0!==(t=e[KO])?!!t:"RegExp"==qO(e))},YO=dn,JO=function(){var e=YO(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},ZO=j,QO=kt,$O=Ce,eF=JO,tF=RegExp.prototype,nF=function(e){var t=e.flags;return void 0!==t||"flags"in tF||QO(e,"flags")||!$O(tF,e)?t:ZO(eF,e)},rF=B,aF=z.RegExp,iF=rF((function(){var e=aF("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),oF=iF||rF((function(){return!aF("a","y").sticky})),sF=iF||rF((function(){var e=aF("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),uF={BROKEN_CARET:sF,MISSED_STICKY:oF,UNSUPPORTED_Y:iF},cF=B,lF=z.RegExp,hF=cF((function(){var e=lF(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),pF=B,fF=z.RegExp,dF=pF((function(){var e=fF("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),vF=W,mF=z,gF=ee,yF=Ca,bF=Oc,xF=Cn,kF=Fr.f,wF=Ce,IF=XO,NF=Ya,SF=nF,TF=uF,EF=Cc,CF=Or,AF=B,RF=kt,_F=cr.enforce,OF=Fm,FF=hF,DF=dF,MF=Mt("match"),LF=mF.RegExp,zF=LF.prototype,PF=mF.SyntaxError,BF=gF(zF.exec),WF=gF("".charAt),UF=gF("".replace),VF=gF("".indexOf),GF=gF("".slice),jF=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,HF=/a/g,qF=/a/g,KF=new LF(HF)!==HF,XF=TF.MISSED_STICKY,YF=TF.UNSUPPORTED_Y,JF=vF&&(!KF||XF||FF||DF||AF((function(){return qF[MF]=!1,LF(HF)!=HF||LF(qF)==qF||"/a/i"!=LF(HF,"i")})));if(yF("RegExp",JF)){for(var ZF=function(e,t){var n,r,a,i,o,s,u=wF(zF,this),c=IF(e),l=void 0===t,h=[],p=e;if(!u&&c&&l&&e.constructor===ZF)return e;if((c||wF(zF,e))&&(e=e.source,l&&(t=SF(p))),e=void 0===e?"":NF(e),t=void 0===t?"":NF(t),p=e,FF&&"dotAll"in HF&&(r=!!t&&VF(t,"s")>-1)&&(t=UF(t,/s/g,"")),n=t,XF&&"sticky"in HF&&(a=!!t&&VF(t,"y")>-1)&&YF&&(t=UF(t,/y/g,"")),DF&&(i=function(e){for(var t,n=e.length,r=0,a="",i=[],o={},s=!1,u=!1,c=0,l="";r<=n;r++){if("\\"===(t=WF(e,r)))t+=WF(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:BF(jF,GF(e,r+1))&&(r+=2,u=!0),a+=t,c++;continue;case">"===t&&u:if(""===l||RF(o,l))throw new PF("Invalid capture group name");o[l]=!0,i[i.length]=[l,c],u=!1,l="";continue}u?l+=t:a+=t}return[a,i]}(e),e=i[0],h=i[1]),o=bF(LF(e,t),u?this:zF,ZF),(r||a||h.length)&&(s=_F(o),r&&(s.dotAll=!0,s.raw=ZF(function(e){for(var t,n=e.length,r=0,a="",i=!1;r<=n;r++)"\\"!==(t=WF(e,r))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),a+=t):a+="[\\s\\S]":a+=t+WF(e,++r);return a}(e),n)),a&&(s.sticky=!0),h.length&&(s.groups=h)),e!==p)try{xF(o,"source",""===p?"(?:)":p)}catch(e){}return o},QF=kF(LF),$F=0;QF.length>$F;)EF(ZF,LF,QF[$F++]);zF.constructor=ZF,ZF.prototype=zF,CF(mF,"RegExp",ZF,{constructor:!0})}OF("RegExp");var eD=W,tD=hF,nD=ae,rD=zi,aD=cr.get,iD=RegExp.prototype,oD=TypeError;eD&&tD&&rD(iD,"dotAll",{configurable:!0,get:function(){if(this!==iD){if("RegExp"===nD(this))return!!aD(this).dotAll;throw oD("Incompatible receiver, RegExp required")}}});var sD=j,uD=ee,cD=Ya,lD=JO,hD=uF,pD=yi,fD=cr.get,dD=hF,vD=dF,mD=vt("native-string-replace",String.prototype.replace),gD=RegExp.prototype.exec,yD=gD,bD=uD("".charAt),xD=uD("".indexOf),kD=uD("".replace),wD=uD("".slice),ID=function(){var e=/a/,t=/b*/g;return sD(gD,e,"a"),sD(gD,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),ND=hD.BROKEN_CARET,SD=void 0!==/()??/.exec("")[1];(ID||SD||ND||dD||vD)&&(yD=function(e){var t,n,r,a,i,o,s,u=this,c=fD(u),l=cD(e),h=c.raw;if(h)return h.lastIndex=u.lastIndex,t=sD(yD,h,l),u.lastIndex=h.lastIndex,t;var p=c.groups,f=ND&&u.sticky,d=sD(lD,u),v=u.source,m=0,g=l;if(f&&(d=kD(d,"y",""),-1===xD(d,"g")&&(d+="g"),g=wD(l,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==bD(l,u.lastIndex-1))&&(v="(?: "+v+")",g=" "+g,m++),n=new RegExp("^(?:"+v+")",d)),SD&&(n=new RegExp("^"+v+"$(?!\\s)",d)),ID&&(r=u.lastIndex),a=sD(gD,f?n:u,g),f?a?(a.input=wD(a.input,m),a[0]=wD(a[0],m),a.index=u.lastIndex,u.lastIndex+=a[0].length):u.lastIndex=0:ID&&a&&(u.lastIndex=u.global?a.index+a[0].length:r),SD&&a&&a.length>1&&sD(mD,a[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(a[i]=void 0)})),a&&p)for(a.groups=o=pD(null),i=0;i<p.length;i++)o[(s=p[i])[0]]=a[s[1]];return a});var TD=yD;La({target:"RegExp",proto:!0,forced:/./.exec!==TD},{exec:TD});var ED=W,CD=zi,AD=JO,RD=B,_D=z.RegExp,OD=_D.prototype,FD=ED&&RD((function(){var e=!0;try{_D(".","d")}catch(t){e=!1}var t={},n="",r=e?"dgimsy":"gimsy",a=function(e,r){Object.defineProperty(t,e,{get:function(){return n+=r,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in e&&(i.hasIndices="d"),i)a(o,i[o]);return Object.getOwnPropertyDescriptor(OD,"flags").get.call(t)!==r||n!==r}));FD&&CD(OD,"flags",{configurable:!0,get:AD});var DD=W,MD=uF.MISSED_STICKY,LD=ae,zD=zi,PD=cr.get,BD=RegExp.prototype,WD=TypeError;DD&&MD&&zD(BD,"sticky",{configurable:!0,get:function(){if(this!==BD){if("RegExp"===LD(this))return!!PD(this).sticky;throw WD("Incompatible receiver, RegExp required")}}});var UD,VD,GD=La,jD=j,HD=xe,qD=dn,KD=Ya,XD=(UD=!1,(VD=/[ac]/).exec=function(){return UD=!0,/./.exec.apply(this,arguments)},!0===VD.test("abc")&&UD),YD=/./.test;GD({target:"RegExp",proto:!0,forced:!XD},{test:function(e){var t=qD(this),n=KD(e),r=t.exec;if(!HD(r))return jD(YD,t,n);var a=jD(r,t,n);return null!==a&&(qD(a),!0)}});var JD=Mn.PROPER,ZD=Or,QD=dn,$D=Ya,eM=B,tM=nF,nM="toString",rM=RegExp.prototype.toString,aM=eM((function(){return"/a/b"!=rM.call({source:"a",flags:"b"})})),iM=JD&&rM.name!=nM;(aM||iM)&&ZD(RegExp.prototype,nM,(function(){var e=QD(this);return"/"+$D(e.source)+"/"+$D(tM(e))}),{unsafe:!0}),Uw("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),nI);var oM=La,sM=fe,uM=Pr,cM=Ya,lM=B,hM=ee("".charAt);oM({target:"String",proto:!0,forced:lM((function(){return"\ud842"!=="ð ®·".at(-2)}))},{at:function(e){var t=cM(sM(this)),n=t.length,r=uM(e),a=r>=0?r:n+r;return a<0||a>=n?void 0:hM(t,a)}});var pM=ee,fM=Pr,dM=Ya,vM=fe,mM=pM("".charAt),gM=pM("".charCodeAt),yM=pM("".slice),bM=function(e){return function(t,n){var r,a,i=dM(vM(t)),o=fM(n),s=i.length;return o<0||o>=s?e?"":void 0:(r=gM(i,o))<55296||r>56319||o+1===s||(a=gM(i,o+1))<56320||a>57343?e?mM(i,o):r:e?yM(i,o,o+2):a-56320+(r-55296<<10)+65536}},xM={codeAt:bM(!1),charAt:bM(!0)},kM=xM.codeAt;La({target:"String",proto:!0},{codePointAt:function(e){return kM(this,e)}});var wM=XO,IM=TypeError,NM=function(e){if(wM(e))throw IM("The method doesn't accept regular expressions");return e},SM=Mt("match"),TM=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[SM]=!1,"/./"[e](t)}catch(e){}}return!1},EM=La,CM=ro,AM=P.f,RM=Hr,_M=Ya,OM=NM,FM=fe,DM=TM,MM=CM("".endsWith),LM=CM("".slice),zM=Math.min,PM=DM("endsWith"),BM=!PM&&!!function(){var e=AM(String.prototype,"endsWith");return e&&!e.writable}();EM({target:"String",proto:!0,forced:!BM&&!PM},{endsWith:function(e){var t=_M(FM(this));OM(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,a=void 0===n?r:zM(RM(n),r),i=_M(e);return MM?MM(t,i,a):LM(t,a-i.length,a)===i}});var WM=La,UM=ee,VM=Vr,GM=RangeError,jM=String.fromCharCode,HM=String.fromCodePoint,qM=UM([].join);WM({target:"String",stat:!0,arity:1,forced:!!HM&&1!=HM.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],VM(t,1114111)!==t)throw GM(t+" is not a valid code point");n[a]=t<65536?jM(t):jM(55296+((t-=65536)>>10),t%1024+56320)}return qM(n,"")}});var KM=La,XM=NM,YM=fe,JM=Ya,ZM=TM,QM=ee("".indexOf);KM({target:"String",proto:!0,forced:!ZM("includes")},{includes:function(e){return!!~QM(JM(YM(this)),JM(XM(e)),arguments.length>1?arguments[1]:void 0)}});var $M=xM.charAt,eL=Ya,tL=cr,nL=Dd,rL=Md,aL="String Iterator",iL=tL.set,oL=tL.getterFor(aL);nL(String,"String",(function(e){iL(this,{type:aL,string:eL(e),index:0})}),(function(){var e,t=oL(this),n=t.string,r=t.index;return r>=n.length?rL(void 0,!0):(e=$M(n,r),t.index+=e.length,rL(e,!1))}));var sL=ro,uL=Or,cL=TD,lL=B,hL=Mt,pL=Cn,fL=hL("species"),dL=RegExp.prototype,vL=function(e,t,n,r){var a=hL(e),i=!lL((function(){var t={};return t[a]=function(){return 7},7!=""[e](t)})),o=i&&!lL((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[fL]=function(){return n},n.flags="",n[a]=/./[a]),n.exec=function(){return t=!0,null},n[a](""),!t}));if(!i||!o||n){var s=sL(/./[a]),u=t(a,""[e],(function(e,t,n,r,a){var o=sL(e),u=t.exec;return u===cL||u===dL.exec?i&&!a?{done:!0,value:s(t,n,r)}:{done:!0,value:o(n,t,r)}:{done:!1}}));uL(String.prototype,e,u[0]),uL(dL,a,u[1])}r&&pL(dL[a],"sham",!0)},mL=xM.charAt,gL=function(e,t,n){return t+(n?mL(e,t).length:1)},yL=j,bL=dn,xL=xe,kL=ae,wL=TD,IL=TypeError,NL=function(e,t){var n=e.exec;if(xL(n)){var r=yL(n,e,t);return null!==r&&bL(r),r}if("RegExp"===kL(e))return yL(wL,e,t);throw IL("RegExp#exec called on incompatible receiver")},SL=j,TL=dn,EL=le,CL=Hr,AL=Ya,RL=fe,_L=et,OL=gL,FL=NL;vL("match",(function(e,t,n){return[function(t){var n=RL(this),r=EL(t)?void 0:_L(t,e);return r?SL(r,t,n):new RegExp(t)[e](AL(n))},function(e){var r=TL(this),a=AL(e),i=n(t,r,a);if(i.done)return i.value;if(!r.global)return FL(r,a);var o=r.unicode;r.lastIndex=0;for(var s,u=[],c=0;null!==(s=FL(r,a));){var l=AL(s[0]);u[c]=l,""===l&&(r.lastIndex=OL(a,CL(r.lastIndex),o)),c++}return 0===c?null:u}]}));var DL=La,ML=j,LL=ro,zL=dd,PL=Md,BL=fe,WL=Hr,UL=Ya,VL=dn,GL=le,jL=XO,HL=nF,qL=et,KL=Or,XL=B,YL=Kb,JL=gL,ZL=NL,QL=cr,$L=Mt("matchAll"),ez="RegExp String",tz="RegExp String Iterator",nz=QL.set,rz=QL.getterFor(tz),az=RegExp.prototype,iz=TypeError,oz=LL("".indexOf),sz=LL("".matchAll),uz=!!sz&&!XL((function(){sz("a",/./)})),cz=zL((function(e,t,n,r){nz(this,{type:tz,regexp:e,string:t,global:n,unicode:r,done:!1})}),ez,(function(){var e=rz(this);if(e.done)return PL(void 0,!0);var t=e.regexp,n=e.string,r=ZL(t,n);return null===r?(e.done=!0,PL(void 0,!0)):e.global?(""===UL(r[0])&&(t.lastIndex=JL(n,WL(t.lastIndex),e.unicode)),PL(r,!1)):(e.done=!0,PL(r,!1))})),lz=function(e){var t,n,r,a=VL(this),i=UL(e),o=YL(a,RegExp),s=UL(HL(a));return t=new o(o===RegExp?a.source:a,s),n=!!~oz(s,"g"),r=!!~oz(s,"u"),t.lastIndex=WL(a.lastIndex),new cz(t,i,n,r)};DL({target:"String",proto:!0,forced:uz},{matchAll:function(e){var t,n,r,a=BL(this);if(GL(e)){if(uz)return sz(a,e)}else{if(jL(e)&&(t=UL(BL(HL(e))),!~oz(t,"g")))throw iz("`.matchAll` does not allow non-global regexes");if(uz)return sz(a,e);if(r=qL(e,$L))return ML(r,e,a)}return n=UL(a),new RegExp(e,"g")[$L](n)}}),$L in az||KL(az,$L,lz);var hz=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(Ae),pz=Fx.end;La({target:"String",proto:!0,forced:hz},{padEnd:function(e){return pz(this,e,arguments.length>1?arguments[1]:void 0)}});var fz=Fx.start;La({target:"String",proto:!0,forced:hz},{padStart:function(e){return fz(this,e,arguments.length>1?arguments[1]:void 0)}});var dz=La,vz=ee,mz=me,gz=yt,yz=Ya,bz=Kr,xz=vz([].push),kz=vz([].join);dz({target:"String",stat:!0},{raw:function(e){var t=mz(gz(e).raw),n=bz(t);if(!n)return"";for(var r=arguments.length,a=[],i=0;;){if(xz(a,yz(t[i++])),i===n)return kz(a,"");i<r&&xz(a,yz(arguments[i]))}}}),La({target:"String",proto:!0},{repeat:Nx});var wz=ee,Iz=yt,Nz=Math.floor,Sz=wz("".charAt),Tz=wz("".replace),Ez=wz("".slice),Cz=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Az=/\$([$&'`]|\d{1,2})/g,Rz=function(e,t,n,r,a,i){var o=n+e.length,s=r.length,u=Az;return void 0!==a&&(a=Iz(a),u=Cz),Tz(i,u,(function(i,u){var c;switch(Sz(u,0)){case"$":return"$";case"&":return e;case"`":return Ez(t,0,n);case"'":return Ez(t,o);case"<":c=a[Ez(u,1,-1)];break;default:var l=+u;if(0===l)return i;if(l>s){var h=Nz(l/10);return 0===h?i:h<=s?void 0===r[h-1]?Sz(u,1):r[h-1]+Sz(u,1):i}c=r[l-1]}return void 0===c?"":c}))},_z=fu,Oz=j,Fz=ee,Dz=vL,Mz=B,Lz=dn,zz=xe,Pz=le,Bz=Pr,Wz=Hr,Uz=Ya,Vz=fe,Gz=gL,jz=et,Hz=Rz,qz=NL,Kz=Mt("replace"),Xz=Math.max,Yz=Math.min,Jz=Fz([].concat),Zz=Fz([].push),Qz=Fz("".indexOf),$z=Fz("".slice),eP="$0"==="a".replace(/./,"$0"),tP=!!/./[Kz]&&""===/./[Kz]("a","$0"),nP=!Mz((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));Dz("replace",(function(e,t,n){var r=tP?"$":"$0";return[function(e,n){var r=Vz(this),a=Pz(e)?void 0:jz(e,Kz);return a?Oz(a,e,r,n):Oz(t,Uz(r),e,n)},function(e,a){var i=Lz(this),o=Uz(e);if("string"==typeof a&&-1===Qz(a,r)&&-1===Qz(a,"$<")){var s=n(t,i,o,a);if(s.done)return s.value}var u=zz(a);u||(a=Uz(a));var c=i.global;if(c){var l=i.unicode;i.lastIndex=0}for(var h=[];;){var p=qz(i,o);if(null===p)break;if(Zz(h,p),!c)break;""===Uz(p[0])&&(i.lastIndex=Gz(o,Wz(i.lastIndex),l))}for(var f,d="",v=0,m=0;m<h.length;m++){for(var g=Uz((p=h[m])[0]),y=Xz(Yz(Bz(p.index),o.length),0),b=[],x=1;x<p.length;x++)Zz(b,void 0===(f=p[x])?f:String(f));var k=p.groups;if(u){var w=Jz([g],b,y,o);void 0!==k&&Zz(w,k);var I=Uz(_z(a,void 0,w))}else I=Hz(g,o,y,b,k,a);y>=v&&(d+=$z(o,v,y)+I,v=y+g.length)}return d+$z(o,v)}]}),!nP||!eP||tP);var rP=La,aP=j,iP=ee,oP=fe,sP=xe,uP=le,cP=XO,lP=Ya,hP=et,pP=nF,fP=Rz,dP=Mt("replace"),vP=TypeError,mP=iP("".indexOf),gP=(iP("".replace),iP("".slice)),yP=Math.max,bP=function(e,t,n){return n>e.length?-1:""===t?n:mP(e,t,n)};rP({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,a,i,o,s,u,c,l=oP(this),h=0,p=0,f="";if(!uP(e)){if(cP(e)&&(n=lP(oP(pP(e))),!~mP(n,"g")))throw vP("`.replaceAll` does not allow non-global regexes");if(r=hP(e,dP))return aP(r,e,l,t)}for(a=lP(l),i=lP(e),(o=sP(t))||(t=lP(t)),s=i.length,u=yP(1,s),h=bP(a,i,0);-1!==h;)c=o?lP(t(i,h,a)):fP(i,a,h,[],void 0,t),f+=gP(a,p,h)+c,p=h+s,h=bP(a,i,h+u);return p<a.length&&(f+=gP(a,p)),f}});var xP=j,kP=dn,wP=le,IP=fe,NP=xE,SP=Ya,TP=et,EP=NL;vL("search",(function(e,t,n){return[function(t){var n=IP(this),r=wP(t)?void 0:TP(t,e);return r?xP(r,t,n):new RegExp(t)[e](SP(n))},function(e){var r=kP(this),a=SP(e),i=n(t,r,a);if(i.done)return i.value;var o=r.lastIndex;NP(o,0)||(r.lastIndex=0);var s=EP(r,a);return NP(r.lastIndex,o)||(r.lastIndex=o),null===s?-1:s.index}]}));var CP=fu,AP=j,RP=ee,_P=vL,OP=dn,FP=le,DP=XO,MP=fe,LP=Kb,zP=gL,PP=Hr,BP=Ya,WP=et,UP=Ai,VP=NL,GP=TD,jP=B,HP=uF.UNSUPPORTED_Y,qP=4294967295,KP=Math.min,XP=[].push,YP=RP(/./.exec),JP=RP(XP),ZP=RP("".slice),QP=!jP((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));_P("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=BP(MP(this)),a=void 0===n?qP:n>>>0;if(0===a)return[];if(void 0===e)return[r];if(!DP(e))return AP(t,r,e,a);for(var i,o,s,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,h=new RegExp(e.source,c+"g");(i=AP(GP,h,r))&&!((o=h.lastIndex)>l&&(JP(u,ZP(r,l,i.index)),i.length>1&&i.index<r.length&&CP(XP,u,UP(i,1)),s=i[0].length,l=o,u.length>=a));)h.lastIndex===i.index&&h.lastIndex++;return l===r.length?!s&&YP(h,"")||JP(u,""):JP(u,ZP(r,l)),u.length>a?UP(u,0,a):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:AP(t,this,e,n)}:t,[function(t,n){var a=MP(this),i=FP(t)?void 0:WP(t,e);return i?AP(i,t,a,n):AP(r,BP(a),t,n)},function(e,a){var i=OP(this),o=BP(e),s=n(r,i,o,a,r!==t);if(s.done)return s.value;var u=LP(i,RegExp),c=i.unicode,l=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(HP?"g":"y"),h=new u(HP?"^(?:"+i.source+")":i,l),p=void 0===a?qP:a>>>0;if(0===p)return[];if(0===o.length)return null===VP(h,o)?[o]:[];for(var f=0,d=0,v=[];d<o.length;){h.lastIndex=HP?0:d;var m,g=VP(h,HP?ZP(o,d):o);if(null===g||(m=KP(PP(h.lastIndex+(HP?d:0)),o.length))===f)d=zP(o,d,c);else{if(JP(v,ZP(o,f,d)),v.length===p)return v;for(var y=1;y<=g.length-1;y++)if(JP(v,g[y]),v.length===p)return v;d=f=m}}return JP(v,ZP(o,f)),v}]}),!QP,HP);var $P=La,eB=ro,tB=P.f,nB=Hr,rB=Ya,aB=NM,iB=fe,oB=TM,sB=eB("".startsWith),uB=eB("".slice),cB=Math.min,lB=oB("startsWith"),hB=!lB&&!!function(){var e=tB(String.prototype,"startsWith");return e&&!e.writable}();$P({target:"String",proto:!0,forced:!hB&&!lB},{startsWith:function(e){var t=rB(iB(this));aB(e);var n=nB(cB(arguments.length>1?arguments[1]:void 0,t.length)),r=rB(e);return sB?sB(t,r,n):uB(t,n,n+r.length)===r}});var pB=La,fB=fe,dB=Pr,vB=Ya,mB=ee("".slice),gB=Math.max,yB=Math.min;pB({target:"String",proto:!0,forced:!"".substr||"b"!=="ab".substr(-1)},{substr:function(e,t){var n,r,a=vB(fB(this)),i=a.length,o=dB(e);return o===1/0&&(o=0),o<0&&(o=gB(i+o,0)),(n=void 0===t?i:dB(t))<=0||n===1/0||o>=(r=yB(o+n,i))?"":mB(a,o,r)}});var bB=Mn.PROPER,xB=B,kB=fN,wB=function(e){return xB((function(){return!!kB[e]()||"âÂá "!=="âÂá "[e]()||bB&&kB[e].name!==e}))},IB=kN.trim;La({target:"String",proto:!0,forced:wB("trim")},{trim:function(){return IB(this)}});var NB=kN.end,SB=wB("trimEnd")?function(){return NB(this)}:"".trimEnd;La({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==SB},{trimRight:SB});La({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==SB},{trimEnd:SB});var TB=kN.start,EB=wB("trimStart")?function(){return TB(this)}:"".trimStart;La({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==EB},{trimLeft:EB});La({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==EB},{trimStart:EB});var CB=fe,AB=Ya,RB=/"/g,_B=ee("".replace),OB=function(e,t,n,r){var a=AB(CB(e)),i="<"+t;return""!==n&&(i+=" "+n+'="'+_B(AB(r),RB,"&quot;")+'"'),i+">"+a+"</"+t+">"},FB=B,DB=function(e){return FB((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))},MB=OB;La({target:"String",proto:!0,forced:DB("anchor")},{anchor:function(e){return MB(this,"a","name",e)}});var LB=OB;La({target:"String",proto:!0,forced:DB("big")},{big:function(){return LB(this,"big","","")}});var zB=OB;La({target:"String",proto:!0,forced:DB("blink")},{blink:function(){return zB(this,"blink","","")}});var PB=OB;La({target:"String",proto:!0,forced:DB("bold")},{bold:function(){return PB(this,"b","","")}});var BB=OB;La({target:"String",proto:!0,forced:DB("fixed")},{fixed:function(){return BB(this,"tt","","")}});var WB=OB;La({target:"String",proto:!0,forced:DB("fontcolor")},{fontcolor:function(e){return WB(this,"font","color",e)}});var UB=OB;La({target:"String",proto:!0,forced:DB("fontsize")},{fontsize:function(e){return UB(this,"font","size",e)}});var VB=OB;La({target:"String",proto:!0,forced:DB("italics")},{italics:function(){return VB(this,"i","","")}});var GB=OB;La({target:"String",proto:!0,forced:DB("link")},{link:function(e){return GB(this,"a","href",e)}});var jB=OB;La({target:"String",proto:!0,forced:DB("small")},{small:function(){return jB(this,"small","","")}});var HB=OB;La({target:"String",proto:!0,forced:DB("strike")},{strike:function(){return HB(this,"strike","","")}});var qB=OB;La({target:"String",proto:!0,forced:DB("sub")},{sub:function(){return qB(this,"sub","","")}});var KB=OB;La({target:"String",proto:!0,forced:DB("sup")},{sup:function(){return KB(this,"sup","","")}});var XB={exports:{}},YB=z,JB=B,ZB=Uf,QB=Pb.NATIVE_ARRAY_BUFFER_VIEWS,$B=YB.ArrayBuffer,eW=YB.Int8Array,tW=!QB||!JB((function(){eW(1)}))||!JB((function(){new eW(-1)}))||!ZB((function(e){new eW,new eW(null),new eW(1.5),new eW(e)}),!0)||JB((function(){return 1!==new eW(new $B(2),1,void 0).length})),nW=Pr,rW=RangeError,aW=function(e){var t=nW(e);if(t<0)throw rW("The argument can't be less than 0");return t},iW=aW,oW=RangeError,sW=function(e,t){var n=iW(e);if(n%t)throw oW("Wrong offset");return n},uW=qa,cW=function(e){var t=uW(e);return"BigInt64Array"==t||"BigUint64Array"==t},lW=Gt,hW=TypeError,pW=function(e){var t=lW(e,"number");if("number"==typeof t)throw hW("Can't convert number to bigint");return BigInt(t)},fW=so,dW=j,vW=Vb,mW=yt,gW=Kr,yW=eh,bW=Kl,xW=Ul,kW=cW,wW=Pb.aTypedArrayConstructor,IW=pW,NW=function(e){var t,n,r,a,i,o,s,u,c=vW(this),l=mW(e),h=arguments.length,p=h>1?arguments[1]:void 0,f=void 0!==p,d=bW(l);if(d&&!xW(d))for(u=(s=yW(l,d)).next,l=[];!(o=dW(u,s)).done;)l.push(o.value);for(f&&h>2&&(p=fW(p,arguments[2])),n=gW(l),r=new(wW(c))(n),a=kW(r),t=0;n>t;t++)i=f?p(l[t],t):l[t],r[t]=a?IW(i):+i;return r},SW=(XB.exports,La),TW=z,EW=j,CW=W,AW=tW,RW=Pb,_W=Zy,OW=zg,FW=Y,DW=Cn,MW=nS,LW=Hr,zW=Ug,PW=sW,BW=qt,WW=kt,UW=qa,VW=Ie,GW=He,jW=yi,HW=Ce,qW=Tc,KW=Fr.f,XW=NW,YW=Wo.forEach,JW=Fm,ZW=zi,QW=cn,$W=P,eU=Oc,tU=cr.get,nU=cr.set,rU=cr.enforce,aU=QW.f,iU=$W.f,oU=Math.round,sU=TW.RangeError,uU=_W.ArrayBuffer,cU=uU.prototype,lU=_W.DataView,hU=RW.NATIVE_ARRAY_BUFFER_VIEWS,pU=RW.TYPED_ARRAY_TAG,fU=RW.TypedArray,dU=RW.TypedArrayPrototype,vU=RW.aTypedArrayConstructor,mU=RW.isTypedArray,gU="BYTES_PER_ELEMENT",yU="Wrong length",bU=function(e,t){vU(e);for(var n=0,r=t.length,a=new e(r);r>n;)a[n]=t[n++];return a},xU=function(e,t){ZW(e,t,{configurable:!0,get:function(){return tU(this)[t]}})},kU=function(e){var t;return HW(cU,e)||"ArrayBuffer"==(t=UW(e))||"SharedArrayBuffer"==t},wU=function(e,t){return mU(e)&&!GW(t)&&t in e&&MW(+t)&&t>=0},IU=function(e,t){return t=BW(t),wU(e,t)?FW(2,e[t]):iU(e,t)},NU=function(e,t,n){return t=BW(t),!(wU(e,t)&&VW(n)&&WW(n,"value"))||WW(n,"get")||WW(n,"set")||n.configurable||WW(n,"writable")&&!n.writable||WW(n,"enumerable")&&!n.enumerable?aU(e,t,n):(e[t]=n.value,e)};CW?(hU||($W.f=IU,QW.f=NU,xU(dU,"buffer"),xU(dU,"byteOffset"),xU(dU,"byteLength"),xU(dU,"length")),SW({target:"Object",stat:!0,forced:!hU},{getOwnPropertyDescriptor:IU,defineProperty:NU}),XB.exports=function(e,t,n){var r=e.match(/\d+/)[0]/8,a=e+(n?"Clamped":"")+"Array",i="get"+e,o="set"+e,s=TW[a],u=s,c=u&&u.prototype,l={},h=function(e,t){aU(e,t,{get:function(){return function(e,t){var n=tU(e);return n.view[i](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,a){var i=tU(e);n&&(a=(a=oU(a))<0?0:a>255?255:255&a),i.view[o](t*r+i.byteOffset,a,!0)}(this,t,e)},enumerable:!0})};hU?AW&&(u=t((function(e,t,n,a){return OW(e,c),eU(VW(t)?kU(t)?void 0!==a?new s(t,PW(n,r),a):void 0!==n?new s(t,PW(n,r)):new s(t):mU(t)?bU(u,t):EW(XW,u,t):new s(zW(t)),e,u)})),qW&&qW(u,fU),YW(KW(s),(function(e){e in u||DW(u,e,s[e])})),u.prototype=c):(u=t((function(e,t,n,a){OW(e,c);var i,o,s,l=0,p=0;if(VW(t)){if(!kU(t))return mU(t)?bU(u,t):EW(XW,u,t);i=t,p=PW(n,r);var f=t.byteLength;if(void 0===a){if(f%r)throw sU(yU);if((o=f-p)<0)throw sU(yU)}else if((o=LW(a)*r)+p>f)throw sU(yU);s=o/r}else s=zW(t),i=new uU(o=s*r);for(nU(e,{buffer:i,byteOffset:p,byteLength:o,length:s,view:new lU(i)});l<s;)h(e,l++)})),qW&&qW(u,fU),c=u.prototype=jW(dU)),c.constructor!==u&&DW(c,"constructor",u),rU(c).TypedArrayConstructor=u,pU&&DW(c,pU,a);var p=u!=s;l[a]=u,SW({global:!0,constructor:!0,forced:p,sham:!hU},l),gU in u||DW(u,gU,r),gU in c||DW(c,gU,r),JW(a)}):XB.exports=function(){};var SU=XB.exports;SU("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),SU("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}})),SU("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}})),SU("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),SU("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),SU("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}})),SU("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0),SU("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),SU("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var TU=Kr,EU=Pr,CU=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("at",(function(e){var t=CU(this),n=TU(t),r=EU(e),a=r>=0?r:n+r;return a<0||a>=n?void 0:t[a]}));var AU=Pb,RU=ee(Ep),_U=AU.aTypedArray;(0,AU.exportTypedArrayMethod)("copyWithin",(function(e,t){return RU(_U(this),e,t,arguments.length>2?arguments[2]:void 0)}));var OU=Wo.every,FU=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("every",(function(e){return OU(FU(this),e,arguments.length>1?arguments[1]:void 0)}));var DU=Mp,MU=pW,LU=qa,zU=j,PU=B,BU=Pb.aTypedArray,WU=Pb.exportTypedArrayMethod,UU=ee("".slice),VU=PU((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e}));WU("fill",(function(e){var t=arguments.length;BU(this);var n="Big"===UU(LU(this),0,3)?MU(e):+e;return zU(DU,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),VU);var GU=Kb,jU=Pb.aTypedArrayConstructor,HU=Pb.getTypedArrayConstructor,qU=function(e){return jU(GU(e,HU(e)))},KU=eg,XU=qU,YU=function(e,t){return KU(XU(e),t)},JU=Wo.filter,ZU=YU,QU=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("filter",(function(e){var t=JU(QU(this),e,arguments.length>1?arguments[1]:void 0);return ZU(this,t)}));var $U=Wo.find,eV=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("find",(function(e){return $U(eV(this),e,arguments.length>1?arguments[1]:void 0)}));var tV=Wo.findIndex,nV=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("findIndex",(function(e){return tV(nV(this),e,arguments.length>1?arguments[1]:void 0)}));var rV=$p.findLast,aV=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("findLast",(function(e){return rV(aV(this),e,arguments.length>1?arguments[1]:void 0)}));var iV=$p.findLastIndex,oV=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("findLastIndex",(function(e){return iV(oV(this),e,arguments.length>1?arguments[1]:void 0)}));var sV=Wo.forEach,uV=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("forEach",(function(e){sV(uV(this),e,arguments.length>1?arguments[1]:void 0)})),(0,Pb.exportTypedArrayStaticMethod)("from",NW,tW);var cV=Qr.includes,lV=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("includes",(function(e){return cV(lV(this),e,arguments.length>1?arguments[1]:void 0)}));var hV=Qr.indexOf,pV=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("indexOf",(function(e){return hV(pV(this),e,arguments.length>1?arguments[1]:void 0)}));var fV=z,dV=B,vV=ee,mV=Pb,gV=Kd,yV=Mt("iterator"),bV=fV.Uint8Array,xV=vV(gV.values),kV=vV(gV.keys),wV=vV(gV.entries),IV=mV.aTypedArray,NV=mV.exportTypedArrayMethod,SV=bV&&bV.prototype,TV=!dV((function(){SV[yV].call([1])})),EV=!!SV&&SV.values&&SV[yV]===SV.values&&"values"===SV.values.name,CV=function(){return xV(IV(this))};NV("entries",(function(){return wV(IV(this))}),TV),NV("keys",(function(){return kV(IV(this))}),TV),NV("values",CV,TV||!EV,{name:"values"}),NV(yV,CV,TV||!EV,{name:"values"});var AV=Pb.aTypedArray,RV=Pb.exportTypedArrayMethod,_V=ee([].join);RV("join",(function(e){return _V(AV(this),e)}));var OV=fu,FV=cv,DV=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return OV(FV,DV(this),t>1?[e,arguments[1]]:[e])}));var MV=Wo.map,LV=qU,zV=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("map",(function(e){return MV(zV(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(LV(e))(t)}))}));var PV=Pb.aTypedArrayConstructor;(0,Pb.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(PV(this))(t);t>e;)n[e]=arguments[e++];return n}),tW);var BV=Av.left,WV=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return BV(WV(this),e,t,t>1?arguments[1]:void 0)}));var UV=Av.right,VV=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return UV(VV(this),e,t,t>1?arguments[1]:void 0)}));var GV=Pb.aTypedArray,jV=Pb.exportTypedArrayMethod,HV=Math.floor;jV("reverse",(function(){for(var e,t=this,n=GV(t).length,r=HV(n/2),a=0;a<r;)e=t[a],t[a++]=t[--n],t[n]=e;return t}));var qV=z,KV=j,XV=Pb,YV=Kr,JV=sW,ZV=yt,QV=B,$V=qV.RangeError,eG=qV.Int8Array,tG=eG&&eG.prototype,nG=tG&&tG.set,rG=XV.aTypedArray,aG=XV.exportTypedArrayMethod,iG=!QV((function(){var e=new Uint8ClampedArray(2);return KV(nG,e,{length:1,0:3},1),3!==e[1]})),oG=iG&&XV.NATIVE_ARRAY_BUFFER_VIEWS&&QV((function(){var e=new eG(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));aG("set",(function(e){rG(this);var t=JV(arguments.length>1?arguments[1]:void 0,1),n=ZV(e);if(iG)return KV(nG,this,n,t);var r=this.length,a=YV(n),i=0;if(a+t>r)throw $V("Wrong length");for(;i<a;)this[t+i]=n[i++]}),!iG||oG);var sG=qU,uG=du,cG=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("slice",(function(e,t){for(var n=uG(cG(this),e,t),r=sG(this),a=0,i=n.length,o=new r(i);i>a;)o[a]=n[a++];return o}),B((function(){new Int8Array(1).slice()})));var lG=Wo.some,hG=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("some",(function(e){return lG(hG(this),e,arguments.length>1?arguments[1]:void 0)}));var pG=ro,fG=B,dG=Ze,vG=nm,mG=am,gG=im,yG=Le,bG=sm,xG=Pb.aTypedArray,kG=Pb.exportTypedArrayMethod,wG=z.Uint16Array,IG=wG&&pG(wG.prototype.sort),NG=!(!IG||fG((function(){IG(new wG(2),null)}))&&fG((function(){IG(new wG(2),{})}))),SG=!!IG&&!fG((function(){if(yG)return yG<74;if(mG)return mG<67;if(gG)return!0;if(bG)return bG<602;var e,t,n=new wG(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(IG(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));kG("sort",(function(e){return void 0!==e&&dG(e),SG?IG(this,e):vG(xG(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!SG||NG);var TG=Hr,EG=Vr,CG=qU,AG=Pb.aTypedArray;(0,Pb.exportTypedArrayMethod)("subarray",(function(e,t){var n=AG(this),r=n.length,a=EG(e,r);return new(CG(n))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,TG((void 0===t?r:EG(t,r))-a))}));var RG=fu,_G=Pb,OG=B,FG=du,DG=z.Int8Array,MG=_G.aTypedArray,LG=_G.exportTypedArrayMethod,zG=[].toLocaleString,PG=!!DG&&OG((function(){zG.call(new DG(1))}));LG("toLocaleString",(function(){return RG(zG,PG?FG(MG(this)):MG(this),FG(arguments))}),OG((function(){return[1,2].toLocaleString()!=new DG([1,2]).toLocaleString()}))||!OG((function(){DG.prototype.toLocaleString.call([1,2])})));var BG=Xm,WG=Pb.aTypedArray,UG=Pb.getTypedArrayConstructor;(0,Pb.exportTypedArrayMethod)("toReversed",(function(){return BG(WG(this),UG(this))}));var VG=Ze,GG=eg,jG=Pb.aTypedArray,HG=Pb.getTypedArrayConstructor,qG=Pb.exportTypedArrayMethod,KG=ee(Pb.TypedArrayPrototype.sort);qG("toSorted",(function(e){void 0!==e&&VG(e);var t=jG(this),n=GG(HG(t),t);return KG(n,e)}));var XG=Pb.exportTypedArrayMethod,YG=B,JG=ee,ZG=z.Uint8Array,QG=ZG&&ZG.prototype||{},$G=[].toString,ej=JG([].join);YG((function(){$G.call({})}))&&($G=function(){return ej(this)});var tj=QG.toString!=$G;XG("toString",$G,tj);var nj=Cg,rj=cW,aj=Pr,ij=pW,oj=Pb.aTypedArray,sj=Pb.getTypedArrayConstructor,uj=Pb.exportTypedArrayMethod,cj=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}();uj("with",{with:function(e,t){var n=oj(this),r=aj(e),a=rj(n)?ij(t):+t;return nj(n,sj(n),r,a)}}.with,!cj);var lj=La,hj=ee,pj=Ya,fj=String.fromCharCode,dj=hj("".charAt),vj=hj(/./.exec),mj=hj("".slice),gj=/^[\da-f]{2}$/i,yj=/^[\da-f]{4}$/i;lj({global:!0},{unescape:function(e){for(var t,n,r=pj(e),a="",i=r.length,o=0;o<i;){if("%"===(t=dj(r,o++)))if("u"===dj(r,o)){if(n=mj(r,o+1,o+5),vj(yj,n)){a+=fj(parseInt(n,16)),o+=5;continue}}else if(n=mj(r,o,o+2),vj(gj,n)){a+=fj(parseInt(n,16)),o+=2;continue}a+=t}return a}});var bj=ee,xj=Dg,kj=Sw.getWeakData,wj=zg,Ij=dn,Nj=le,Sj=Ie,Tj=yh,Ej=kt,Cj=cr.set,Aj=cr.getterFor,Rj=Wo.find,_j=Wo.findIndex,Oj=bj([].splice),Fj=0,Dj=function(e){return e.frozen||(e.frozen=new Mj)},Mj=function(){this.entries=[]},Lj=function(e,t){return Rj(e.entries,(function(e){return e[0]===t}))};Mj.prototype={get:function(e){var t=Lj(this,e);if(t)return t[1]},has:function(e){return!!Lj(this,e)},set:function(e,t){var n=Lj(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=_j(this.entries,(function(t){return t[0]===e}));return~t&&Oj(this.entries,t,1),!!~t}};var zj,Pj={getConstructor:function(e,t,n,r){var a=e((function(e,a){wj(e,i),Cj(e,{type:t,id:Fj++,frozen:void 0}),Nj(a)||Tj(a,e[r],{that:e,AS_ENTRIES:n})})),i=a.prototype,o=Aj(t),s=function(e,t,n){var r=o(e),a=kj(Ij(t),!0);return!0===a?Dj(r).set(t,n):a[r.id]=n,e};return xj(i,{delete:function(e){var t=o(this);if(!Sj(e))return!1;var n=kj(e);return!0===n?Dj(t).delete(e):n&&Ej(n,t.id)&&delete n[t.id]},has:function(e){var t=o(this);if(!Sj(e))return!1;var n=kj(e);return!0===n?Dj(t).has(e):n&&Ej(n,t.id)}}),xj(i,n?{get:function(e){var t=o(this);if(Sj(e)){var n=kj(e);return!0===n?Dj(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),a}},Bj=cw,Wj=z,Uj=ee,Vj=Dg,Gj=Sw,jj=Uw,Hj=Pj,qj=Ie,Kj=cr.enforce,Xj=B,Yj=Hn,Jj=Object,Zj=Array.isArray,Qj=Jj.isExtensible,$j=Jj.isFrozen,eH=Jj.isSealed,tH=Jj.freeze,nH=Jj.seal,rH={},aH={},iH=!Wj.ActiveXObject&&"ActiveXObject"in Wj,oH=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},sH=jj("WeakMap",oH,Hj),uH=sH.prototype,cH=Uj(uH.set);if(Yj)if(iH){zj=Hj.getConstructor(oH,"WeakMap",!0),Gj.enable();var lH=Uj(uH.delete),hH=Uj(uH.has),pH=Uj(uH.get);Vj(uH,{delete:function(e){if(qj(e)&&!Qj(e)){var t=Kj(this);return t.frozen||(t.frozen=new zj),lH(this,e)||t.frozen.delete(e)}return lH(this,e)},has:function(e){if(qj(e)&&!Qj(e)){var t=Kj(this);return t.frozen||(t.frozen=new zj),hH(this,e)||t.frozen.has(e)}return hH(this,e)},get:function(e){if(qj(e)&&!Qj(e)){var t=Kj(this);return t.frozen||(t.frozen=new zj),hH(this,e)?pH(this,e):t.frozen.get(e)}return pH(this,e)},set:function(e,t){if(qj(e)&&!Qj(e)){var n=Kj(this);n.frozen||(n.frozen=new zj),hH(this,e)?cH(this,e,t):n.frozen.set(e,t)}else cH(this,e,t);return this}})}else Bj&&Xj((function(){var e=tH([]);return cH(new sH,e,1),!$j(e)}))&&Vj(uH,{set:function(e,t){var n;return Zj(e)&&($j(e)?n=rH:eH(e)&&(n=aH)),cH(this,e,t),n==rH&&tH(e),n==aH&&nH(e),this}});Uw("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Pj);for(var fH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",dH={},vH=0;vH<66;vH++)dH[fH.charAt(vH)]=vH;var mH={itoc:fH,ctoi:dH},gH=La,yH=z,bH=Ee,xH=ee,kH=j,wH=B,IH=Ya,NH=kt,SH=TC,TH=mH.ctoi,EH=/[^\d+/a-z]/i,CH=/[\t\n\f\r ]+/g,AH=/[=]{1,2}$/,RH=bH("atob"),_H=String.fromCharCode,OH=xH("".charAt),FH=xH("".replace),DH=xH(EH.exec),MH=wH((function(){return""!==RH(" ")})),LH=!wH((function(){RH("a")})),zH=!MH&&!LH&&!wH((function(){RH()})),PH=!MH&&!LH&&1!==RH.length;gH({global:!0,bind:!0,enumerable:!0,forced:MH||LH||zH||PH},{atob:function(e){if(SH(arguments.length,1),zH||PH)return kH(RH,yH,e);var t,n,r=FH(IH(e),CH,""),a="",i=0,o=0;if(r.length%4==0&&(r=FH(r,AH,"")),r.length%4==1||DH(EH,r))throw new(bH("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;t=OH(r,i++);)NH(TH,t)&&(n=o%4?64*n+TH[t]:TH[t],o++%4&&(a+=_H(255&n>>(-2*o&6))));return a}});var BH=La,WH=z,UH=Ee,VH=ee,GH=j,jH=B,HH=Ya,qH=TC,KH=mH.itoc,XH=UH("btoa"),YH=VH("".charAt),JH=VH("".charCodeAt),ZH=!!XH&&!jH((function(){XH()})),QH=!!XH&&jH((function(){return"bnVsbA=="!==XH(null)})),$H=!!XH&&1!==XH.length;BH({global:!0,bind:!0,enumerable:!0,forced:ZH||QH||$H},{btoa:function(e){if(qH(arguments.length,1),ZH||QH||$H)return GH(XH,WH,HH(e));for(var t,n,r=HH(e),a="",i=0,o=KH;YH(r,i)||(o="=",i%1);){if((n=JH(r,i+=3/4))>255)throw new(UH("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");a+=YH(o,63&(t=t<<8|n)>>8-i%1*8)}return a}});var eq={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},tq=Jt("span").classList,nq=tq&&tq.constructor&&tq.constructor.prototype,rq=nq===Object.prototype?void 0:nq,aq=z,iq=eq,oq=rq,sq=kf,uq=Cn,cq=function(e){if(e&&e.forEach!==sq)try{uq(e,"forEach",sq)}catch(t){e.forEach=sq}};for(var lq in iq)iq[lq]&&cq(aq[lq]&&aq[lq].prototype);cq(oq);var hq=z,pq=eq,fq=rq,dq=Kd,vq=Cn,mq=Mt,gq=mq("iterator"),yq=mq("toStringTag"),bq=dq.values,xq=function(e,t){if(e){if(e[gq]!==bq)try{vq(e,gq,bq)}catch(t){e[gq]=bq}if(e[yq]||vq(e,yq,t),pq[t])for(var n in dq)if(e[n]!==dq[n])try{vq(e,n,dq[n])}catch(t){e[n]=dq[n]}}};for(var kq in pq)xq(hq[kq]&&hq[kq].prototype,kq);xq(fq,"DOMTokenList");var wq=Rv,Iq=function(e){try{if(wq)return Function('return require("'+e+'")')()}catch(e){}},Nq={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},Sq=La,Tq=Iq,Eq=Ee,Cq=B,Aq=yi,Rq=Y,_q=cn.f,Oq=Or,Fq=zi,Dq=kt,Mq=zg,Lq=dn,zq=Nl,Pq=Dc,Bq=Nq,Wq=Gc,Uq=cr,Vq=W,Gq="DOMException",jq="DATA_CLONE_ERR",Hq=Eq("Error"),qq=Eq(Gq)||function(){try{(new(Eq("MessageChannel")||Tq("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(e){if(e.name==jq&&25==e.code)return e.constructor}}(),Kq=qq&&qq.prototype,Xq=Hq.prototype,Yq=Uq.set,Jq=Uq.getterFor(Gq),Zq="stack"in Hq(Gq),Qq=function(e){return Dq(Bq,e)&&Bq[e].m?Bq[e].c:0},$q=function(){Mq(this,eK);var e=arguments.length,t=Pq(e<1?void 0:arguments[0]),n=Pq(e<2?void 0:arguments[1],"Error"),r=Qq(n);if(Yq(this,{type:Gq,name:n,message:t,code:r}),Vq||(this.name=n,this.message=t,this.code=r),Zq){var a=Hq(t);a.name=Gq,_q(this,"stack",Rq(1,Wq(a.stack,1)))}},eK=$q.prototype=Aq(Xq),tK=function(e){return{enumerable:!0,configurable:!0,get:e}},nK=function(e){return tK((function(){return Jq(this)[e]}))};Vq&&(Fq(eK,"code",nK("code")),Fq(eK,"message",nK("message")),Fq(eK,"name",nK("name"))),_q(eK,"constructor",Rq(1,$q));var rK=Cq((function(){return!(new qq instanceof Hq)})),aK=rK||Cq((function(){return Xq.toString!==zq||"2: 1"!==String(new qq(1,2))})),iK=rK||Cq((function(){return 25!==new qq(1,"DataCloneError").code}));rK||25!==qq.DATA_CLONE_ERR||Kq.DATA_CLONE_ERR;Sq({global:!0,constructor:!0,forced:rK},{DOMException:rK?$q:qq});var oK=Eq(Gq),sK=oK.prototype;for(var uK in aK&&qq===oK&&Oq(sK,"toString",zq),iK&&Vq&&qq===oK&&Fq(sK,"code",tK((function(){return Qq(Lq(this).name)}))),Bq)if(Dq(Bq,uK)){var cK=Bq[uK],lK=cK.s,hK=Rq(6,cK.c);Dq(oK,lK)||_q(oK,lK,hK),Dq(sK,lK)||_q(sK,lK,hK)}var pK=La,fK=z,dK=Ee,vK=Y,mK=cn.f,gK=kt,yK=zg,bK=Oc,xK=Dc,kK=Nq,wK=Gc,IK=W,NK="DOMException",SK=dK("Error"),TK=dK(NK),EK=function(){yK(this,CK);var e=arguments.length,t=xK(e<1?void 0:arguments[0]),n=xK(e<2?void 0:arguments[1],"Error"),r=new TK(t,n),a=SK(t);return a.name=NK,mK(r,"stack",vK(1,wK(a.stack,1))),bK(r,this,EK),r},CK=EK.prototype=TK.prototype,AK="stack"in SK(NK),RK="stack"in new TK(1,2),_K=TK&&IK&&Object.getOwnPropertyDescriptor(fK,NK),OK=!(!_K||_K.writable&&_K.configurable),FK=AK&&!OK&&!RK;pK({global:!0,constructor:!0,forced:FK},{DOMException:FK?EK:TK});var DK=dK(NK),MK=DK.prototype;if(MK.constructor!==DK)for(var LK in mK(MK,"constructor",vK(1,DK)),kK)if(gK(kK,LK)){var zK=kK[LK],PK=zK.s;gK(DK,PK)||mK(DK,PK,vK(6,zK.c))}var BK="DOMException";eo(Ee(BK),BK);var WK=eA.clear;La({global:!0,bind:!0,enumerable:!0,forced:z.clearImmediate!==WK},{clearImmediate:WK});var UK="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,VK=z,GK=fu,jK=xe,HK=UK,qK=Ae,KK=du,XK=TC,YK=VK.Function,JK=/MSIE .\./.test(qK)||HK&&function(){var e=VK.Bun.version.split(".");return e.length<3||0==e[0]&&(e[1]<3||3==e[1]&&0==e[2])}(),ZK=function(e,t){var n=t?2:1;return JK?function(r,a){var i=XK(arguments.length,1)>n,o=jK(r)?r:YK(r),s=i?KK(arguments,n):[],u=i?function(){GK(o,this,s)}:o;return t?e(u,a):e(u)}:e},QK=La,$K=z,eX=eA.set,tX=ZK,nX=$K.setImmediate?tX(eX,!1):eX;QK({global:!0,bind:!0,enumerable:!0,forced:$K.setImmediate!==nX},{setImmediate:nX});var rX=La,aX=RA,iX=Ze,oX=TC,sX=Rv,uX=z.process;rX({global:!0,enumerable:!0,dontCallGetSet:!0},{queueMicrotask:function(e){oX(arguments.length,1),iX(e);var t=sX&&uX.domain;aX(t?t.bind(e):e)}});var cX=La,lX=z,hX=zi,pX=W,fX=TypeError,dX=Object.defineProperty,vX=lX.self!==lX;try{if(pX){var mX=Object.getOwnPropertyDescriptor(lX,"self");!vX&&mX&&mX.get&&mX.enumerable||hX(lX,"self",{get:function(){return lX},set:function(e){if(this!==lX)throw fX("Illegal invocation");dX(lX,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else cX({global:!0,simple:!0,forced:vX},{self:lX})}catch(e){}var gX,yX=ee,bX=Map.prototype,xX={Map:Map,set:yX(bX.set),get:yX(bX.get),has:yX(bX.has),remove:yX(bX.delete),proto:bX},kX=ee,wX=Set.prototype,IX={Set:Set,add:kX(wX.add),has:kX(wX.has),remove:kX(wX.delete),proto:wX,$has:wX.has,$keys:wX.keys},NX=B,SX=Le,TX=MA,EX=DA,CX=Rv,AX=z.structuredClone,RX=!!AX&&!NX((function(){if(EX&&SX>92||CX&&SX>94||TX&&SX>97)return!1;var e=new ArrayBuffer(8),t=AX(e,{transfer:[e]});return 0!=e.byteLength||8!=t.byteLength})),_X=La,OX=z,FX=Ee,DX=ee,MX=B,LX=Tt,zX=xe,PX=No,BX=le,WX=Ie,UX=He,VX=yh,GX=dn,jX=qa,HX=kt,qX=Ii,KX=Cn,XX=Kr,YX=TC,JX=nF,ZX=xX,QX=IX,$X=Hc,eY=RX,tY=OX.Object,nY=OX.Array,rY=OX.Date,aY=OX.Error,iY=OX.EvalError,oY=OX.RangeError,sY=OX.ReferenceError,uY=OX.SyntaxError,cY=OX.TypeError,lY=OX.URIError,hY=OX.PerformanceMark,pY=OX.WebAssembly,fY=pY&&pY.CompileError||aY,dY=pY&&pY.LinkError||aY,vY=pY&&pY.RuntimeError||aY,mY=FX("DOMException"),gY=ZX.Map,yY=ZX.has,bY=ZX.get,xY=ZX.set,kY=QX.Set,wY=QX.add,IY=FX("Object","keys"),NY=DX([].push),SY=DX((!0).valueOf),TY=DX(1..valueOf),EY=DX("".valueOf),CY=DX(rY.prototype.getTime),AY=LX("structuredClone"),RY="DataCloneError",_Y="Transferring",OY=function(e){return!MX((function(){var t=new OX.Set([7]),n=e(t),r=e(tY(7));return n==t||!n.has(7)||"object"!=s(r)||7!=r}))&&e},FY=function(e,t){return!MX((function(){var n=new t,r=e({a:n,b:n});return!(r&&r.a===r.b&&r.a instanceof t&&r.a.stack===n.stack)}))},DY=OX.structuredClone,MY=!FY(DY,aY)||!FY(DY,mY)||(gX=DY,!!MX((function(){var e=gX(new OX.AggregateError([1],AY,{cause:3}));return"AggregateError"!=e.name||1!=e.errors[0]||e.message!=AY||3!=e.cause}))),LY=!DY&&OY((function(e){return new hY(AY,{detail:e}).detail})),zY=OY(DY)||LY,PY=function(e){throw new mY("Uncloneable type: "+e,RY)},BY=function(e,t){throw new mY((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",RY)},WY=function e(t,n){if(UX(t)&&PY("Symbol"),!WX(t))return t;if(n){if(yY(n,t))return bY(n,t)}else n=new gY;var r,a,i,o,s,u,c,l,h,p,f,d=jX(t),v=!1;switch(d){case"Array":i=nY(XX(t)),v=!0;break;case"Object":i={},v=!0;break;case"Map":i=new gY,v=!0;break;case"Set":i=new kY,v=!0;break;case"RegExp":i=new RegExp(t.source,JX(t));break;case"Error":switch(a=t.name){case"AggregateError":i=FX("AggregateError")([]);break;case"EvalError":i=iY();break;case"RangeError":i=oY();break;case"ReferenceError":i=sY();break;case"SyntaxError":i=uY();break;case"TypeError":i=cY();break;case"URIError":i=lY();break;case"CompileError":i=fY();break;case"LinkError":i=dY();break;case"RuntimeError":i=vY();break;default:i=aY()}v=!0;break;case"DOMException":i=new mY(t.message,t.name),v=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":r=OX[d],WX(r)||BY(d),i=new r(e(t.buffer,n),t.byteOffset,"DataView"===d?t.byteLength:t.length);break;case"DOMQuad":try{i=new DOMQuad(e(t.p1,n),e(t.p2,n),e(t.p3,n),e(t.p4,n))}catch(e){zY?i=zY(t):BY(d)}break;case"FileList":if(o=function(){var e;try{e=new OX.DataTransfer}catch(t){try{e=new OX.ClipboardEvent("").clipboardData}catch(e){}}return e&&e.items&&e.files?e:null}()){for(s=0,u=XX(t);s<u;s++)o.items.add(e(t[s],n));i=o.files}else zY?i=zY(t):BY(d);break;case"ImageData":try{i=new ImageData(e(t.data,n),t.width,t.height,{colorSpace:t.colorSpace})}catch(e){zY?i=zY(t):BY(d)}break;default:if(zY)i=zY(t);else switch(d){case"BigInt":i=tY(t.valueOf());break;case"Boolean":i=tY(SY(t));break;case"Number":i=tY(TY(t));break;case"String":i=tY(EY(t));break;case"Date":i=new rY(CY(t));break;case"ArrayBuffer":(r=OX.DataView)||"function"==typeof t.slice||BY(d);try{if("function"!=typeof t.slice||t.resizable){u=t.byteLength,f="maxByteLength"in t?{maxByteLength:t.maxByteLength}:void 0,i=new ArrayBuffer(u,f),h=new r(t),p=new r(i);for(s=0;s<u;s++)p.setUint8(s,h.getUint8(s))}else i=t.slice(0)}catch(e){throw new mY("ArrayBuffer is detached",RY)}break;case"SharedArrayBuffer":i=t;break;case"Blob":try{i=t.slice(0,t.size,t.type)}catch(e){BY(d)}break;case"DOMPoint":case"DOMPointReadOnly":r=OX[d];try{i=r.fromPoint?r.fromPoint(t):new r(t.x,t.y,t.z,t.w)}catch(e){BY(d)}break;case"DOMRect":case"DOMRectReadOnly":r=OX[d];try{i=r.fromRect?r.fromRect(t):new r(t.x,t.y,t.width,t.height)}catch(e){BY(d)}break;case"DOMMatrix":case"DOMMatrixReadOnly":r=OX[d];try{i=r.fromMatrix?r.fromMatrix(t):new r(t)}catch(e){BY(d)}break;case"AudioData":case"VideoFrame":zX(t.clone)||BY(d);try{i=t.clone()}catch(e){PY(d)}break;case"File":try{i=new File([t],t.name,t)}catch(e){BY(d)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":BY(d);default:PY(d)}}if(xY(n,t,i),v)switch(d){case"Array":case"Object":for(c=IY(t),s=0,u=XX(c);s<u;s++)l=c[s],qX(i,l,e(t[l],n));break;case"Map":t.forEach((function(t,r){xY(i,e(r,n),e(t,n))}));break;case"Set":t.forEach((function(t){wY(i,e(t,n))}));break;case"Error":KX(i,"message",e(t.message,n)),HX(t,"cause")&&KX(i,"cause",e(t.cause,n)),"AggregateError"==a&&(i.errors=e(t.errors,n));case"DOMException":$X&&KX(i,"stack",e(t.stack,n))}return i},UY=function(e,t){if(!WX(e))throw cY("Transfer option cannot be converted to a sequence");var n=[];VX(e,(function(e){NY(n,GX(e))}));var r,a,i,o,s,u,c=0,l=XX(n);if(eY)for(o=DY(n,{transfer:n});c<l;)xY(t,n[c],o[c++]);else for(;c<l;){if(r=n[c++],yY(t,r))throw new mY("Duplicate transferable",RY);switch(a=jX(r)){case"ImageBitmap":i=OX.OffscreenCanvas,PX(i)||BY(a,_Y);try{(u=new i(r.width,r.height)).getContext("bitmaprenderer").transferFromImageBitmap(r),s=u.transferToImageBitmap()}catch(e){}break;case"AudioData":case"VideoFrame":zX(r.clone)&&zX(r.close)||BY(a,_Y);try{s=r.clone(),r.close()}catch(e){}break;case"ArrayBuffer":zX(r.transfer)||BY(a,_Y),s=r.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":BY(a,_Y)}if(void 0===s)throw new mY("This object cannot be transferred: "+a,RY);xY(t,r,s)}};_X({global:!0,enumerable:!0,sham:!eY,forced:MY},{structuredClone:function(e){var t,n=YX(arguments.length,1)>1&&!BX(arguments[1])?GX(arguments[1]):void 0,r=n?n.transfer:void 0;return void 0!==r&&(t=new gY,UY(r,t)),WY(e,t)}});var VY=La,GY=z,jY=ZK(GY.setInterval,!0);VY({global:!0,bind:!0,forced:GY.setInterval!==jY},{setInterval:jY});var HY=La,qY=z,KY=ZK(qY.setTimeout,!0);HY({global:!0,bind:!0,forced:qY.setTimeout!==KY},{setTimeout:KY});var XY=B,YY=W,JY=Mt("iterator"),ZY=!XY((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.size&&!YY||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[JY]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),QY=ee,$Y=2147483647,eJ=/[^\0-\u007E]/,tJ=/[.\u3002\uFF0E\uFF61]/g,nJ="Overflow: input needs wider integers to process",rJ=RangeError,aJ=QY(tJ.exec),iJ=Math.floor,oJ=String.fromCharCode,sJ=QY("".charCodeAt),uJ=QY([].join),cJ=QY([].push),lJ=QY("".replace),hJ=QY("".split),pJ=QY("".toLowerCase),fJ=function(e){return e+22+75*(e<26)},dJ=function(e,t,n){var r=0;for(e=n?iJ(e/700):e>>1,e+=iJ(e/t);e>455;)e=iJ(e/35),r+=36;return iJ(r+36*e/(e+38))},vJ=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=sJ(e,n++);if(a>=55296&&a<=56319&&n<r){var i=sJ(e,n++);56320==(64512&i)?cJ(t,((1023&a)<<10)+(1023&i)+65536):(cJ(t,a),n--)}else cJ(t,a)}return t}(e);var n,r,a=e.length,i=128,o=0,s=72;for(n=0;n<e.length;n++)(r=e[n])<128&&cJ(t,oJ(r));var u=t.length,c=u;for(u&&cJ(t,"-");c<a;){var l=$Y;for(n=0;n<e.length;n++)(r=e[n])>=i&&r<l&&(l=r);var h=c+1;if(l-i>iJ(($Y-o)/h))throw rJ(nJ);for(o+=(l-i)*h,i=l,n=0;n<e.length;n++){if((r=e[n])<i&&++o>$Y)throw rJ(nJ);if(r==i){for(var p=o,f=36;;){var d=f<=s?1:f>=s+26?26:f-s;if(p<d)break;var v=p-d,m=36-d;cJ(t,oJ(fJ(d+v%m))),p=iJ(v/m),f+=36}cJ(t,oJ(fJ(p))),s=dJ(o,h,c==u),o=0,c++}}o++,i++}return uJ(t,"")},mJ=function(e){var t,n,r=[],a=hJ(lJ(pJ(e),tJ,"."),".");for(t=0;t<a.length;t++)n=a[t],cJ(r,aJ(eJ,n)?"xn--"+vJ(n):n);return uJ(r,".")},gJ=La,yJ=z,bJ=j,xJ=ee,kJ=W,wJ=ZY,IJ=Or,NJ=zi,SJ=Dg,TJ=eo,EJ=dd,CJ=cr,AJ=zg,RJ=xe,_J=kt,OJ=so,FJ=qa,DJ=dn,MJ=Ie,LJ=Ya,zJ=yi,PJ=Y,BJ=eh,WJ=Kl,UJ=TC,VJ=nm,GJ=Mt("iterator"),jJ="URLSearchParams",HJ="URLSearchParamsIterator",qJ=CJ.set,KJ=CJ.getterFor(jJ),XJ=CJ.getterFor(HJ),YJ=Object.getOwnPropertyDescriptor,JJ=function(e){if(!kJ)return yJ[e];var t=YJ(yJ,e);return t&&t.value},ZJ=JJ("fetch"),QJ=JJ("Request"),$J=JJ("Headers"),eZ=QJ&&QJ.prototype,tZ=$J&&$J.prototype,nZ=yJ.RegExp,rZ=yJ.TypeError,aZ=yJ.decodeURIComponent,iZ=yJ.encodeURIComponent,oZ=xJ("".charAt),sZ=xJ([].join),uZ=xJ([].push),cZ=xJ("".replace),lZ=xJ([].shift),hZ=xJ([].splice),pZ=xJ("".split),fZ=xJ("".slice),dZ=/\+/g,vZ=Array(4),mZ=function(e){return vZ[e-1]||(vZ[e-1]=nZ("((?:%[\\da-f]{2}){"+e+"})","gi"))},gZ=function(e){try{return aZ(e)}catch(t){return e}},yZ=function(e){var t=cZ(e,dZ," "),n=4;try{return aZ(t)}catch(e){for(;n;)t=cZ(t,mZ(n--),gZ);return t}},bZ=/[!'()~]|%20/g,xZ={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},kZ=function(e){return xZ[e]},wZ=function(e){return cZ(iZ(e),bZ,kZ)},IZ=EJ((function(e,t){qJ(this,{type:HJ,iterator:BJ(KJ(e).entries),kind:t})}),"Iterator",(function(){var e=XJ(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),NZ=function(e){this.entries=[],this.url=null,void 0!==e&&(MJ(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===oZ(e,0)?fZ(e,1):e:LJ(e)))};NZ.prototype={type:jJ,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,a,i,o,s,u=WJ(e);if(u)for(n=(t=BJ(e,u)).next;!(r=bJ(n,t)).done;){if(i=(a=BJ(DJ(r.value))).next,(o=bJ(i,a)).done||(s=bJ(i,a)).done||!bJ(i,a).done)throw rZ("Expected sequence with length 2");uZ(this.entries,{key:LJ(o.value),value:LJ(s.value)})}else for(var c in e)_J(e,c)&&uZ(this.entries,{key:c,value:LJ(e[c])})},parseQuery:function(e){if(e)for(var t,n,r=pZ(e,"&"),a=0;a<r.length;)(t=r[a++]).length&&(n=pZ(t,"="),uZ(this.entries,{key:yZ(lZ(n)),value:yZ(sZ(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],uZ(n,wZ(e.key)+"="+wZ(e.value));return sZ(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var SZ=function(){AJ(this,TZ);var e=arguments.length>0?arguments[0]:void 0,t=qJ(this,new NZ(e));kJ||(this.length=t.entries.length)},TZ=SZ.prototype;if(SJ(TZ,{append:function(e,t){UJ(arguments.length,2);var n=KJ(this);uZ(n.entries,{key:LJ(e),value:LJ(t)}),kJ||this.length++,n.updateURL()},delete:function(e){UJ(arguments.length,1);for(var t=KJ(this),n=t.entries,r=LJ(e),a=0;a<n.length;)n[a].key===r?hZ(n,a,1):a++;kJ||(this.length=n.length),t.updateURL()},get:function(e){UJ(arguments.length,1);for(var t=KJ(this).entries,n=LJ(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){UJ(arguments.length,1);for(var t=KJ(this).entries,n=LJ(e),r=[],a=0;a<t.length;a++)t[a].key===n&&uZ(r,t[a].value);return r},has:function(e){UJ(arguments.length,1);for(var t=KJ(this).entries,n=LJ(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){UJ(arguments.length,1);for(var n,r=KJ(this),a=r.entries,i=!1,o=LJ(e),s=LJ(t),u=0;u<a.length;u++)(n=a[u]).key===o&&(i?hZ(a,u--,1):(i=!0,n.value=s));i||uZ(a,{key:o,value:s}),kJ||(this.length=a.length),r.updateURL()},sort:function(){var e=KJ(this);VJ(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=KJ(this).entries,r=OJ(e,arguments.length>1?arguments[1]:void 0),a=0;a<n.length;)r((t=n[a++]).value,t.key,this)},keys:function(){return new IZ(this,"keys")},values:function(){return new IZ(this,"values")},entries:function(){return new IZ(this,"entries")}},{enumerable:!0}),IJ(TZ,GJ,TZ.entries,{name:"entries"}),IJ(TZ,"toString",(function(){return KJ(this).serialize()}),{enumerable:!0}),kJ&&NJ(TZ,"size",{get:function(){return KJ(this).entries.length},configurable:!0,enumerable:!0}),TJ(SZ,jJ),gJ({global:!0,constructor:!0,forced:!wJ},{URLSearchParams:SZ}),!wJ&&RJ($J)){var EZ=xJ(tZ.has),CZ=xJ(tZ.set),AZ=function(e){if(MJ(e)){var t,n=e.body;if(FJ(n)===jJ)return t=e.headers?new $J(e.headers):new $J,EZ(t,"content-type")||CZ(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),zJ(e,{body:PJ(0,LJ(n)),headers:PJ(0,t)})}return e};if(RJ(ZJ)&&gJ({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return ZJ(e,arguments.length>1?AZ(arguments[1]):{})}}),RJ(QJ)){var RZ=function(e){return AJ(this,eZ),new QJ(e,arguments.length>1?AZ(arguments[1]):{})};eZ.constructor=RZ,RZ.prototype=eZ,gJ({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:RZ})}}var _Z,OZ={URLSearchParams:SZ,getState:KJ},FZ=La,DZ=W,MZ=ZY,LZ=z,zZ=so,PZ=ee,BZ=Or,WZ=zi,UZ=zg,VZ=kt,GZ=ST,jZ=Lf,HZ=Ai,qZ=xM.codeAt,KZ=mJ,XZ=Ya,YZ=eo,JZ=TC,ZZ=OZ,QZ=cr,$Z=QZ.set,eQ=QZ.getterFor("URL"),tQ=ZZ.URLSearchParams,nQ=ZZ.getState,rQ=LZ.URL,aQ=LZ.TypeError,iQ=LZ.parseInt,oQ=Math.floor,sQ=Math.pow,uQ=PZ("".charAt),cQ=PZ(/./.exec),lQ=PZ([].join),hQ=PZ(1..toString),pQ=PZ([].pop),fQ=PZ([].push),dQ=PZ("".replace),vQ=PZ([].shift),mQ=PZ("".split),gQ=PZ("".slice),yQ=PZ("".toLowerCase),bQ=PZ([].unshift),xQ="Invalid scheme",kQ="Invalid host",wQ="Invalid port",IQ=/[a-z]/i,NQ=/[\d+-.a-z]/i,SQ=/\d/,TQ=/^0x/i,EQ=/^[0-7]+$/,CQ=/^\d+$/,AQ=/^[\da-f]+$/i,RQ=/[\0\t\n\r #%/:<>?@[\\\]^|]/,_Q=/[\0\t\n\r #/:<>?@[\\\]^|]/,OQ=/^[\u0000-\u0020]+/,FQ=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,DQ=/[\t\n\r]/g,MQ=function(e){var t,n,r,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)bQ(t,e%256),e=oQ(e/256);return lQ(t,".")}if("object"==s(e)){for(t="",r=function(e){for(var t=null,n=1,r=null,a=0,i=0;i<8;i++)0!==e[i]?(a>n&&(t=r,n=a),r=null,a=0):(null===r&&(r=i),++a);return a>n&&(t=r,n=a),t}(e),n=0;n<8;n++)a&&0===e[n]||(a&&(a=!1),r===n?(t+=n?":":"::",a=!0):(t+=hQ(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},LQ={},zQ=GZ({},LQ,{" ":1,'"':1,"<":1,">":1,"`":1}),PQ=GZ({},zQ,{"#":1,"?":1,"{":1,"}":1}),BQ=GZ({},PQ,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),WQ=function(e,t){var n=qZ(e,0);return n>32&&n<127&&!VZ(t,e)?e:encodeURIComponent(e)},UQ={ftp:21,file:null,http:80,https:443,ws:80,wss:443},VQ=function(e,t){var n;return 2==e.length&&cQ(IQ,uQ(e,0))&&(":"==(n=uQ(e,1))||!t&&"|"==n)},GQ=function(e){var t;return e.length>1&&VQ(gQ(e,0,2))&&(2==e.length||"/"===(t=uQ(e,2))||"\\"===t||"?"===t||"#"===t)},jQ=function(e){return"."===e||"%2e"===yQ(e)},HQ={},qQ={},KQ={},XQ={},YQ={},JQ={},ZQ={},QQ={},$Q={},e$={},t$={},n$={},r$={},a$={},i$={},o$={},s$={},u$={},c$={},l$={},h$={},p$=function e(t,n,r){var a,i,o,s=XZ(t);if(n){if(i=this.parse(s))throw aQ(i);this.searchParams=null}else{if(void 0!==r&&(a=new e(r,!0)),i=this.parse(s,null,a))throw aQ(i);(o=nQ(new tQ)).bindURL(this),this.searchParams=o}};p$.prototype={type:"URL",parse:function(e,t,n){var r,a,i,o,s,u=this,c=t||HQ,l=0,h="",p=!1,f=!1,d=!1;for(e=XZ(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=dQ(e,OQ,""),e=dQ(e,FQ,"$1")),e=dQ(e,DQ,""),r=jZ(e);l<=r.length;){switch(a=r[l],c){case HQ:if(!a||!cQ(IQ,a)){if(t)return xQ;c=KQ;continue}h+=yQ(a),c=qQ;break;case qQ:if(a&&(cQ(NQ,a)||"+"==a||"-"==a||"."==a))h+=yQ(a);else{if(":"!=a){if(t)return xQ;h="",c=KQ,l=0;continue}if(t&&(u.isSpecial()!=VZ(UQ,h)||"file"==h&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=h,t)return void(u.isSpecial()&&UQ[u.scheme]==u.port&&(u.port=null));h="","file"==u.scheme?c=a$:u.isSpecial()&&n&&n.scheme==u.scheme?c=XQ:u.isSpecial()?c=QQ:"/"==r[l+1]?(c=YQ,l++):(u.cannotBeABaseURL=!0,fQ(u.path,""),c=c$)}break;case KQ:if(!n||n.cannotBeABaseURL&&"#"!=a)return xQ;if(n.cannotBeABaseURL&&"#"==a){u.scheme=n.scheme,u.path=HZ(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,c=h$;break}c="file"==n.scheme?a$:JQ;continue;case XQ:if("/"!=a||"/"!=r[l+1]){c=JQ;continue}c=$Q,l++;break;case YQ:if("/"==a){c=e$;break}c=u$;continue;case JQ:if(u.scheme=n.scheme,a==_Z)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=HZ(n.path),u.query=n.query;else if("/"==a||"\\"==a&&u.isSpecial())c=ZQ;else if("?"==a)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=HZ(n.path),u.query="",c=l$;else{if("#"!=a){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=HZ(n.path),u.path.length--,c=u$;continue}u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=HZ(n.path),u.query=n.query,u.fragment="",c=h$}break;case ZQ:if(!u.isSpecial()||"/"!=a&&"\\"!=a){if("/"!=a){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,c=u$;continue}c=e$}else c=$Q;break;case QQ:if(c=$Q,"/"!=a||"/"!=uQ(h,l+1))continue;l++;break;case $Q:if("/"!=a&&"\\"!=a){c=e$;continue}break;case e$:if("@"==a){p&&(h="%40"+h),p=!0,i=jZ(h);for(var v=0;v<i.length;v++){var m=i[v];if(":"!=m||d){var g=WQ(m,BQ);d?u.password+=g:u.username+=g}else d=!0}h=""}else if(a==_Z||"/"==a||"?"==a||"#"==a||"\\"==a&&u.isSpecial()){if(p&&""==h)return"Invalid authority";l-=jZ(h).length+1,h="",c=t$}else h+=a;break;case t$:case n$:if(t&&"file"==u.scheme){c=o$;continue}if(":"!=a||f){if(a==_Z||"/"==a||"?"==a||"#"==a||"\\"==a&&u.isSpecial()){if(u.isSpecial()&&""==h)return kQ;if(t&&""==h&&(u.includesCredentials()||null!==u.port))return;if(o=u.parseHost(h))return o;if(h="",c=s$,t)return;continue}"["==a?f=!0:"]"==a&&(f=!1),h+=a}else{if(""==h)return kQ;if(o=u.parseHost(h))return o;if(h="",c=r$,t==n$)return}break;case r$:if(!cQ(SQ,a)){if(a==_Z||"/"==a||"?"==a||"#"==a||"\\"==a&&u.isSpecial()||t){if(""!=h){var y=iQ(h,10);if(y>65535)return wQ;u.port=u.isSpecial()&&y===UQ[u.scheme]?null:y,h=""}if(t)return;c=s$;continue}return wQ}h+=a;break;case a$:if(u.scheme="file","/"==a||"\\"==a)c=i$;else{if(!n||"file"!=n.scheme){c=u$;continue}if(a==_Z)u.host=n.host,u.path=HZ(n.path),u.query=n.query;else if("?"==a)u.host=n.host,u.path=HZ(n.path),u.query="",c=l$;else{if("#"!=a){GQ(lQ(HZ(r,l),""))||(u.host=n.host,u.path=HZ(n.path),u.shortenPath()),c=u$;continue}u.host=n.host,u.path=HZ(n.path),u.query=n.query,u.fragment="",c=h$}}break;case i$:if("/"==a||"\\"==a){c=o$;break}n&&"file"==n.scheme&&!GQ(lQ(HZ(r,l),""))&&(VQ(n.path[0],!0)?fQ(u.path,n.path[0]):u.host=n.host),c=u$;continue;case o$:if(a==_Z||"/"==a||"\\"==a||"?"==a||"#"==a){if(!t&&VQ(h))c=u$;else if(""==h){if(u.host="",t)return;c=s$}else{if(o=u.parseHost(h))return o;if("localhost"==u.host&&(u.host=""),t)return;h="",c=s$}continue}h+=a;break;case s$:if(u.isSpecial()){if(c=u$,"/"!=a&&"\\"!=a)continue}else if(t||"?"!=a)if(t||"#"!=a){if(a!=_Z&&(c=u$,"/"!=a))continue}else u.fragment="",c=h$;else u.query="",c=l$;break;case u$:if(a==_Z||"/"==a||"\\"==a&&u.isSpecial()||!t&&("?"==a||"#"==a)){if(".."===(s=yQ(s=h))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(u.shortenPath(),"/"==a||"\\"==a&&u.isSpecial()||fQ(u.path,"")):jQ(h)?"/"==a||"\\"==a&&u.isSpecial()||fQ(u.path,""):("file"==u.scheme&&!u.path.length&&VQ(h)&&(u.host&&(u.host=""),h=uQ(h,0)+":"),fQ(u.path,h)),h="","file"==u.scheme&&(a==_Z||"?"==a||"#"==a))for(;u.path.length>1&&""===u.path[0];)vQ(u.path);"?"==a?(u.query="",c=l$):"#"==a&&(u.fragment="",c=h$)}else h+=WQ(a,PQ);break;case c$:"?"==a?(u.query="",c=l$):"#"==a?(u.fragment="",c=h$):a!=_Z&&(u.path[0]+=WQ(a,LQ));break;case l$:t||"#"!=a?a!=_Z&&("'"==a&&u.isSpecial()?u.query+="%27":u.query+="#"==a?"%23":WQ(a,LQ)):(u.fragment="",c=h$);break;case h$:a!=_Z&&(u.fragment+=WQ(a,zQ))}l++}},parseHost:function(e){var t,n,r;if("["==uQ(e,0)){if("]"!=uQ(e,e.length-1))return kQ;if(t=function(e){var t,n,r,a,i,o,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,p=function(){return uQ(e,h)};if(":"==p()){if(":"!=uQ(e,1))return;h+=2,l=++c}for(;p();){if(8==c)return;if(":"!=p()){for(t=n=0;n<4&&cQ(AQ,p());)t=16*t+iQ(p(),16),h++,n++;if("."==p()){if(0==n)return;if(h-=n,c>6)return;for(r=0;p();){if(a=null,r>0){if(!("."==p()&&r<4))return;h++}if(!cQ(SQ,p()))return;for(;cQ(SQ,p());){if(i=iQ(p(),10),null===a)a=i;else{if(0==a)return;a=10*a+i}if(a>255)return;h++}u[c]=256*u[c]+a,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==p()){if(h++,!p())return}else if(p())return;u[c++]=t}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(o=c-l,c=7;0!=c&&o>0;)s=u[c],u[c--]=u[l+o-1],u[l+--o]=s;else if(8!=c)return;return u}(gQ(e,1,-1)),!t)return kQ;this.host=t}else if(this.isSpecial()){if(e=KZ(e),cQ(RQ,e))return kQ;if(t=function(e){var t,n,r,a,i,o,s,u=mQ(e,".");if(u.length&&""==u[u.length-1]&&u.length--,(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(a=u[r]))return e;if(i=10,a.length>1&&"0"==uQ(a,0)&&(i=cQ(TQ,a)?16:8,a=gQ(a,8==i?1:2)),""===a)o=0;else{if(!cQ(10==i?CQ:8==i?EQ:AQ,a))return e;o=iQ(a,i)}fQ(n,o)}for(r=0;r<t;r++)if(o=n[r],r==t-1){if(o>=sQ(256,5-t))return null}else if(o>255)return null;for(s=pQ(n),r=0;r<n.length;r++)s+=n[r]*sQ(256,3-r);return s}(e),null===t)return kQ;this.host=t}else{if(cQ(_Q,e))return kQ;for(t="",n=jZ(e),r=0;r<n.length;r++)t+=WQ(n[r],LQ);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return VZ(UQ,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&VQ(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,a=e.host,i=e.port,o=e.path,s=e.query,u=e.fragment,c=t+":";return null!==a?(c+="//",e.includesCredentials()&&(c+=n+(r?":"+r:"")+"@"),c+=MQ(a),null!==i&&(c+=":"+i)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?o[0]:o.length?"/"+lQ(o,"/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},setHref:function(e){var t=this.parse(e);if(t)throw aQ(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new f$(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+MQ(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(XZ(e)+":",HQ)},getUsername:function(){return this.username},setUsername:function(e){var t=jZ(XZ(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=WQ(t[n],BQ)}},getPassword:function(){return this.password},setPassword:function(e){var t=jZ(XZ(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=WQ(t[n],BQ)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?MQ(e):MQ(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,t$)},getHostname:function(){var e=this.host;return null===e?"":MQ(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,n$)},getPort:function(){var e=this.port;return null===e?"":XZ(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=XZ(e))?this.port=null:this.parse(e,r$))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+lQ(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,s$))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=XZ(e))?this.query=null:("?"==uQ(e,0)&&(e=gQ(e,1)),this.query="",this.parse(e,l$)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=XZ(e))?("#"==uQ(e,0)&&(e=gQ(e,1)),this.fragment="",this.parse(e,h$)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var f$=function(e){var t=UZ(this,d$),n=JZ(arguments.length,1)>1?arguments[1]:void 0,r=$Z(t,new p$(e,!1,n));DZ||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},d$=f$.prototype,v$=function(e,t){return{get:function(){return eQ(this)[e]()},set:t&&function(e){return eQ(this)[t](e)},configurable:!0,enumerable:!0}};if(DZ&&(WZ(d$,"href",v$("serialize","setHref")),WZ(d$,"origin",v$("getOrigin")),WZ(d$,"protocol",v$("getProtocol","setProtocol")),WZ(d$,"username",v$("getUsername","setUsername")),WZ(d$,"password",v$("getPassword","setPassword")),WZ(d$,"host",v$("getHost","setHost")),WZ(d$,"hostname",v$("getHostname","setHostname")),WZ(d$,"port",v$("getPort","setPort")),WZ(d$,"pathname",v$("getPathname","setPathname")),WZ(d$,"search",v$("getSearch","setSearch")),WZ(d$,"searchParams",v$("getSearchParams")),WZ(d$,"hash",v$("getHash","setHash"))),BZ(d$,"toJSON",(function(){return eQ(this).serialize()}),{enumerable:!0}),BZ(d$,"toString",(function(){return eQ(this).serialize()}),{enumerable:!0}),rQ){var m$=rQ.createObjectURL,g$=rQ.revokeObjectURL;m$&&BZ(f$,"createObjectURL",zZ(m$,rQ)),g$&&BZ(f$,"revokeObjectURL",zZ(g$,rQ))}YZ(f$,"URL"),FZ({global:!0,constructor:!0,forced:!MZ,sham:!DZ},{URL:f$});var y$=j;La({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return y$(URL.prototype.toString,this)}});var b$=W,x$=ee,k$=zi,w$=URLSearchParams.prototype,I$=x$(w$.forEach);b$&&!("size"in w$)&&k$(w$,"size",{get:function(){var e=0;return I$(this,(function(){e++})),e},configurable:!0,enumerable:!0});var N$={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),o=new A(r||[]);return i._invoke=function(e,t,n){var r=p;return function(a,i){if(r===d)throw new Error("Generator is already running");if(r===v){if("throw"===a)throw i;return _()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=T(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=h(e,t,n);if("normal"===u.type){if(r=n.done?v:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=v,n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p="suspendedStart",f="suspendedYield",d="executing",v="completed",m={};function g(){}function y(){}function b(){}var x={};x[i]=function(){return this};var k=Object.getPrototypeOf,w=k&&k(k(R([])));w&&w!==n&&r.call(w,i)&&(x=w);var I=b.prototype=g.prototype=Object.create(x);function N(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,i,o,u){var c=h(e[a],e,i);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"===s(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,u)}))}u(c.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=h(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function R(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:_}}function _(){return{value:t,done:!0}}return y.prototype=I.constructor=b,b.constructor=y,y.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},e.awrap=function(e){return{__await:e}},N(S.prototype),S.prototype[o]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new S(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},N(I),c(I,u,"Generator"),I[i]=function(){return this},I.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}(N$);var S$=function(){function e(t,n){l(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return p(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),T$=function(){function e(){l(this,e)}return p(e,[{key:"refCount",value:function(e){return E$("refCount")}},{key:"incRef",value:function(e){return E$("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return E$("time")}},{key:"read",value:function(e){return E$("read")}},{key:"readSync",value:function(e){return E$("readSync")}},{key:"readToGPU",value:function(e,t){return E$("readToGPU")}},{key:"numDataIds",value:function(){return E$("numDataIds")}},{key:"disposeData",value:function(e,t){return E$("disposeData")}},{key:"write",value:function(e,t,n){return E$("write")}},{key:"move",value:function(e,t,n,r,a){return E$("move")}},{key:"createTensorFromGPUData",value:function(e,t,n){return E$("createTensorFromGPUData")}},{key:"memory",value:function(){return E$("memory")}},{key:"floatPrecision",value:function(){return E$("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return E$("dispose")}}]),e}();function E$(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function C$(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,_$(e,--t,n)}function A$(e,t,n){return Math.max(e,Math.min(t,n))}function R$(e){return e%2==0?e:e+1}function _$(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function O$(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function F$(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function D$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";F$(P$(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function M$(e){F$(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function L$(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function z$(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}function P$(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function B$(e){return e%1==0}function W$(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function U$(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function V$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,i){var o=0;!function s(){if(e())a();else{o++;var u=t(o);null!=n&&o>=n?i():null!=r?r(s,u):setTimeout(s,u)}}()}))}function G$(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function j$(e,t){var n=t.length;return F$((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),F$(e.every((function(e){return B$(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function H$(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:j$(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function q$(e,t){return K$(e,t)}function K$(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function X$(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function Y$(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function J$(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function Z$(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function Q$(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function $$(e){return"string"==typeof e||e instanceof String}function e0(e){return"boolean"==typeof e}function t0(e){return"number"==typeof e}function n0(e){return Array.isArray(e)?n0(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":t0(e)?"float32":$$(e)?"string":e0(e)?"bool":"float32"}function r0(e){return!!(e&&e.constructor&&e.call&&e.apply)}function a0(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function i0(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function o0(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=o0(e+l*c,u,n,r);return a}function s0(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return o0(0,e,t,n)}function u0(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}function c0(e,t){for(var n=l0(e,t),r=0;r<n.length;r++)n[r]=1;return n}function l0(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function h0(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return s0(e,new Float32Array(n));if("int32"===t)return s0(e,new Int32Array(n));if("bool"===t)return s0(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function p0(e){e.forEach((function(t){F$(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function f0(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function d0(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function v0(e){return e&&e.then&&"function"==typeof e.then}var m0,g0="tfjsflags",y0=function(){function e(t){l(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=b0,this.populateURLFlags()}var t;return p(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(k0().getBool("IS_TEST")||k0().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];k0().getBool("IS_TEST")||k0().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:(t=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(v0(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getString",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(g0 in t)t.tfjsflags.split(",").forEach((function(t){var n=S(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){var n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,a)}))}}}]),e}();function b0(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return x0(t,r[0],r[1]),r.join("=")})),t}function x0(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function k0(){return e.ENV}function w0(){if(null==m0){var e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}m0=e}return m0}function I0(e,t){var n,r=(null==(n=w0())._tfGlobals&&(n._tfGlobals=new Map),n._tfGlobals);if(r.has(e))return r.get(e);var a=t();return r.set(e,a),r.get(e)}e.ENV=null;var N0="Abs",S0="Acos",T0="Acosh",E0="Add",C0="AddN",A0="All",R0="Any",_0="ArgMax",O0="ArgMin",F0="Asin",D0="Asinh",M0="Atan",L0="Atanh",z0="Atan2",P0="AvgPool",B0="AvgPoolGrad",W0="AvgPool3D",U0="AvgPool3DGrad",V0="BatchMatMul",G0="BatchToSpaceND",j0="Bincount",H0="BitwiseAnd",q0="BroadcastTo",K0="BroadcastArgs",X0="Cast",Y0="Ceil",J0="ClipByValue",Z0="Complex",Q0="ComplexAbs",$0="Concat",e1="Conv2D",t1="Conv2DBackpropFilter",n1="Conv2DBackpropInput",r1="Conv3D",a1="Conv3DBackpropFilterV2",i1="Conv3DBackpropInputV2",o1="Cos",s1="Cosh",u1="Cumprod",c1="Cumsum",l1="CropAndResize",h1="DenseBincount",p1="DepthToSpace",f1="DepthwiseConv2dNative",d1="DepthwiseConv2dNativeBackpropFilter",v1="DepthwiseConv2dNativeBackpropInput",m1="Diag",g1="Dilation2D",y1="Dilation2DBackpropInput",b1="Dilation2DBackpropFilter",x1="Draw",k1="RealDiv",w1="Einsum",I1="Elu",N1="EluGrad",S1="Erf",T1="Equal",E1="Exp",C1="ExpandDims",A1="Expm1",R1="FFT",_1="Fill",O1="FlipLeftRight",F1="Floor",D1="FloorDiv",M1="FusedBatchNorm",L1="GatherV2",z1="GatherNd",P1="Greater",B1="GreaterEqual",W1="Identity",U1="IFFT",V1="Imag",G1="IsFinite",j1="IsInf",H1="IsNan",q1="LeakyRelu",K1="Less",X1="LessEqual",Y1="LinSpace",J1="Log",Z1="Log1p",Q1="LogicalAnd",$1="LogicalNot",e2="LogicalOr",t2="LogSoftmax",n2="LRN",r2="LRNGrad",a2="Max",i2="Maximum",o2="MaxPool",s2="MaxPoolGrad",u2="MaxPool3D",c2="MaxPool3DGrad",l2="MaxPoolWithArgmax",h2="Mean",p2="Min",f2="Minimum",d2="MirrorPad",v2="Mod",m2="Multinomial",g2="Multiply",y2="Neg",b2="NotEqual",x2="NonMaxSuppressionV3",k2="NonMaxSuppressionV4",w2="NonMaxSuppressionV5",I2="OnesLike",N2="OneHot",S2="Pack",T2="PadV2",E2="Pow",C2="Prelu",A2="Prod",R2="RaggedGather",_2="RaggedRange",O2="RaggedTensorToTensor",F2="Range",D2="Real",M2="Reciprocal",L2="Relu",z2="Reshape",P2="ResizeNearestNeighbor",B2="ResizeNearestNeighborGrad",W2="ResizeBilinear",U2="ResizeBilinearGrad",V2="Relu6",G2="Reverse",j2="Round",H2="Rsqrt",q2="ScatterNd",K2="TensorScatterUpdate",X2="SearchSorted",Y2="Select",J2="Selu",Z2="Slice",Q2="Sin",$2="Sinh",e3="Sign",t3="Sigmoid",n3="Softplus",r3="Sqrt",a3="Sum",i3="SpaceToBatchND",o3="SplitV",s3="Softmax",u3="SparseFillEmptyRows",c3="SparseReshape",l3="SparseSegmentMean",h3="SparseSegmentSum",p3="SparseToDense",f3="SquaredDifference",d3="Square",v3="StaticRegexReplace",m3="StridedSlice",g3="StringNGrams",y3="StringSplit",b3="StringToHashBucketFast",x3="Sub",k3="Tan",w3="Tanh",I3="Tile",N3="TopK",S3="Transform",T3="Transpose",E3="Unique",C3="Unpack",A3="UnsortedSegmentSum",R3="ZerosLike",_3="Step",O3="FromPixels",F3="RotateWithOffset",D3="_FusedMatMul",M3="FusedConv2D",L3="FusedDepthwiseConv2D";function z3(){var e;k0().getBool("IS_TEST")||k0().getBool("PROD")||(e=console).warn.apply(e,arguments)}var P3=I0("kernelRegistry",(function(){return new Map})),B3=I0("gradRegistry",(function(){return new Map}));function W3(e,t){var n=H3(e,t);return P3.get(n)}function U3(e){return B3.get(e)}function V3(e){for(var t=P3.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=S(i,2),s=o[0],u=o[1];S(s.split("_"),1)[0]===e&&n.push(u)}return n}function G3(e){var t=e.kernelName,n=e.backendName,r=H3(t,n);P3.has(r)&&z3("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),P3.set(r,e)}function j3(e){var t=e.kernelName;B3.has(t)&&k0().getBool("DEBUG")&&z3("Overriding the gradient for '".concat(t,"'")),B3.set(t,e)}function H3(e,t){return"".concat(t,"_").concat(e)}function q3(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var K3=Y3,X3=null;try{X3=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Y3(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function J3(e){return!0===(e&&e.__isLong__)}Y3.prototype.__isLong__,Object.defineProperty(Y3.prototype,"__isLong__",{value:!0}),Y3.isLong=J3;var Z3={},Q3={};function $3(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=Q3[e])?r:(n=t4(e,(0|e)<0?-1:0,!0),a&&(Q3[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=Z3[e])?r:(n=t4(e,e<0?-1:0,!1),a&&(Z3[e]=n),n)}function e4(e,t){if(isNaN(e))return t?l4:c4;if(t){if(e<0)return l4;if(e>=o4)return v4}else{if(e<=-s4)return m4;if(e+1>=s4)return d4}return e<0?e4(-e,t).neg():t4(e%i4|0,e/i4|0,t)}function t4(e,t,n){return new Y3(e,t,n)}Y3.fromInt=$3,Y3.fromNumber=e4,Y3.fromBits=t4;var n4=Math.pow;function r4(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return c4;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return r4(e.substring(1),t,n).neg();for(var a=e4(n4(n,8)),i=c4,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+s),n);if(s<8){var c=e4(n4(n,s));i=i.mul(c).add(e4(u))}else i=(i=i.mul(a)).add(e4(u))}return i.unsigned=t,i}function a4(e,t){return"number"==typeof e?e4(e,t):"string"==typeof e?r4(e,t):t4(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}Y3.fromString=r4,Y3.fromValue=a4;var i4=4294967296,o4=i4*i4,s4=o4/2,u4=$3(1<<24),c4=$3(0);Y3.ZERO=c4;var l4=$3(0,!0);Y3.UZERO=l4;var h4=$3(1);Y3.ONE=h4;var p4=$3(1,!0);Y3.UONE=p4;var f4=$3(-1);Y3.NEG_ONE=f4;var d4=t4(-1,2147483647,!1);Y3.MAX_VALUE=d4;var v4=t4(-1,-1,!0);Y3.MAX_UNSIGNED_VALUE=v4;var m4=t4(0,-2147483648,!1);Y3.MIN_VALUE=m4;var g4=Y3.prototype;g4.toInt=function(){return this.unsigned?this.low>>>0:this.low},g4.toNumber=function(){return this.unsigned?(this.high>>>0)*i4+(this.low>>>0):this.high*i4+(this.low>>>0)},g4.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(m4)){var t=e4(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=e4(n4(e,6),this.unsigned),i=this,o="";;){var s=i.div(a),u=(i.sub(s.mul(a)).toInt()>>>0).toString(e);if((i=s).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},g4.getHighBits=function(){return this.high},g4.getHighBitsUnsigned=function(){return this.high>>>0},g4.getLowBits=function(){return this.low},g4.getLowBitsUnsigned=function(){return this.low>>>0},g4.getNumBitsAbs=function(){if(this.isNegative())return this.eq(m4)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},g4.isZero=function(){return 0===this.high&&0===this.low},g4.eqz=g4.isZero,g4.isNegative=function(){return!this.unsigned&&this.high<0},g4.isPositive=function(){return this.unsigned||this.high>=0},g4.isOdd=function(){return 1==(1&this.low)},g4.isEven=function(){return 0==(1&this.low)},g4.equals=function(e){return J3(e)||(e=a4(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},g4.eq=g4.equals,g4.notEquals=function(e){return!this.eq(e)},g4.neq=g4.notEquals,g4.ne=g4.notEquals,g4.lessThan=function(e){return this.comp(e)<0},g4.lt=g4.lessThan,g4.lessThanOrEqual=function(e){return this.comp(e)<=0},g4.lte=g4.lessThanOrEqual,g4.le=g4.lessThanOrEqual,g4.greaterThan=function(e){return this.comp(e)>0},g4.gt=g4.greaterThan,g4.greaterThanOrEqual=function(e){return this.comp(e)>=0},g4.gte=g4.greaterThanOrEqual,g4.ge=g4.greaterThanOrEqual,g4.compare=function(e){if(J3(e)||(e=a4(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},g4.comp=g4.compare,g4.negate=function(){return!this.unsigned&&this.eq(m4)?m4:this.not().add(h4)},g4.neg=g4.negate,g4.add=function(e){J3(e)||(e=a4(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,a=65535&this.low,i=e.high>>>16,o=65535&e.high,s=e.low>>>16,u=0,c=0,l=0,h=0;return l+=(h+=a+(65535&e.low))>>>16,c+=(l+=r+s)>>>16,u+=(c+=n+o)>>>16,u+=t+i,t4((l&=65535)<<16|(h&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},g4.subtract=function(e){return J3(e)||(e=a4(e)),this.add(e.neg())},g4.sub=g4.subtract,g4.multiply=function(e){if(this.isZero())return c4;if(J3(e)||(e=a4(e)),X3)return t4(X3.mul(this.low,this.high,e.low,e.high),X3.get_high(),this.unsigned);if(e.isZero())return c4;if(this.eq(m4))return e.isOdd()?m4:c4;if(e.eq(m4))return this.isOdd()?m4:c4;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(u4)&&e.lt(u4))return e4(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,a=65535&this.low,i=e.high>>>16,o=65535&e.high,s=e.low>>>16,u=65535&e.low,c=0,l=0,h=0,p=0;return h+=(p+=a*u)>>>16,l+=(h+=r*u)>>>16,h&=65535,l+=(h+=a*s)>>>16,c+=(l+=n*u)>>>16,l&=65535,c+=(l+=r*s)>>>16,l&=65535,c+=(l+=a*o)>>>16,c+=t*u+n*s+r*o+a*i,t4((h&=65535)<<16|(p&=65535),(c&=65535)<<16|(l&=65535),this.unsigned)},g4.mul=g4.multiply,g4.divide=function(e){if(J3(e)||(e=a4(e)),e.isZero())throw Error("division by zero");var t,n,r;if(X3)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?t4((this.unsigned?X3.div_u:X3.div_s)(this.low,this.high,e.low,e.high),X3.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?l4:c4;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return l4;if(e.gt(this.shru(1)))return p4;r=l4}else{if(this.eq(m4))return e.eq(h4)||e.eq(f4)?m4:e.eq(m4)?h4:(t=this.shr(1).div(e).shl(1)).eq(c4)?e.isNegative()?h4:f4:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq(m4))return this.unsigned?l4:c4;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=c4}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(t)/Math.LN2),i=a<=48?1:n4(2,a-48),o=e4(t),s=o.mul(e);s.isNegative()||s.gt(n);)s=(o=e4(t-=i,this.unsigned)).mul(e);o.isZero()&&(o=h4),r=r.add(o),n=n.sub(s)}return r},g4.div=g4.divide,g4.modulo=function(e){return J3(e)||(e=a4(e)),X3?t4((this.unsigned?X3.rem_u:X3.rem_s)(this.low,this.high,e.low,e.high),X3.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},g4.mod=g4.modulo,g4.rem=g4.modulo,g4.not=function(){return t4(~this.low,~this.high,this.unsigned)},g4.and=function(e){return J3(e)||(e=a4(e)),t4(this.low&e.low,this.high&e.high,this.unsigned)},g4.or=function(e){return J3(e)||(e=a4(e)),t4(this.low|e.low,this.high|e.high,this.unsigned)},g4.xor=function(e){return J3(e)||(e=a4(e)),t4(this.low^e.low,this.high^e.high,this.unsigned)},g4.shiftLeft=function(e){return J3(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t4(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t4(0,this.low<<e-32,this.unsigned)},g4.shl=g4.shiftLeft,g4.shiftRight=function(e){return J3(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t4(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t4(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},g4.shr=g4.shiftRight,g4.shiftRightUnsigned=function(e){if(J3(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?t4(this.low>>>e|t<<32-e,t>>>e,this.unsigned):t4(32===e?t:t>>>e-32,0,this.unsigned)},g4.shru=g4.shiftRightUnsigned,g4.shr_u=g4.shiftRightUnsigned,g4.toSigned=function(){return this.unsigned?t4(this.low,this.high,!1):this},g4.toUnsigned=function(){return this.unsigned?this:t4(this.low,this.high,!0)},g4.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},g4.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},g4.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},Y3.fromBytes=function(e,t,n){return n?Y3.fromBytesLE(e,t):Y3.fromBytesBE(e,t)},Y3.fromBytesLE=function(e,t){return new Y3(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Y3.fromBytesBE=function(e,t){return new Y3(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var y4=r(K3),b4=y4||t({__proto__:null,default:y4},[K3]);function x4(e){return b4.fromString(e,!0,16)}var k4=x4("c3a5c85c97cb3127"),w4=x4("b492b66fbe98f273"),I4=x4("9ae16a3b2f90404f");function N4(e){return e.xor(e.shru(47))}function S4(e,t,n){var r=e.slice(t,t+n);return b4.fromBytes(Array.from(r),!0,!0)}function T4(e,t){return S4(e,t,8)}function E4(e,t){return S4(e,t,4)}function C4(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function A4(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x4("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function R4(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=C4(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(C4(a,44)),[a.add(r),i.add(o)]}(T4(e,t),T4(e,t+8),T4(e,t+16),T4(e,t+24),n,r)}function _4(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=I4.add(2*t),r=T4(e,0).add(I4),a=T4(e,t-8),i=C4(a,37).mul(n).add(r),o=C4(r,25).add(a).mul(n);return A4(i,o,n)}if(t>=4){var s=I4.add(2*t),u=E4(e,0);return A4(u.shl(3).add(t),E4(e,t-4),s)}if(t>0){var c=e[0],l=e[t>>1],h=e[t-1],p=c+(l<<8),f=t+(h<<2);return N4(I4.mul(p).xor(k4.mul(f))).mul(I4)}return I4}function O4(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=I4.add(2*t),r=T4(e,0).mul(w4),a=T4(e,8),i=T4(e,t-8).mul(n),o=T4(e,t-16).mul(I4);return A4(C4(r.add(a),43).add(C4(i,30)).add(o),r.add(C4(a.add(I4),18)).add(i),n)}function F4(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=I4.add(2*t),r=T4(e,0).mul(I4),a=T4(e,8),i=T4(e,t-8).mul(n),o=T4(e,t-16).mul(I4),s=C4(r.add(a),43).add(C4(i,30)).add(o),u=A4(s,r.add(C4(a.add(I4),18)).add(i),n),c=T4(e,16).mul(n),l=T4(e,24),h=s.add(T4(e,t-32)).mul(n),p=u.add(T4(e,t-24)).mul(n);return A4(C4(c.add(l),43).add(C4(h,30)).add(p),c.add(C4(l.add(r),18)).add(h),n)}function D4(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=b4.fromNumber(81,!0);if(t<=32)return t<=16?_4(e,t):O4(e,t);if(t<=64)return F4(e,t);var r=n,a=n.mul(w4).add(113),i=N4(a.mul(I4).add(113)).mul(I4),o=[b4.UZERO,b4.UZERO],s=[b4.UZERO,b4.UZERO];r=r.mul(I4).add(T4(e,0));var u=0,c=64*(t-1>>6),l=c+(t-1&63)-63;do{r=C4(r.add(a).add(o[0]).add(T4(e,u+8)),37).mul(w4),a=C4(a.add(o[1]).add(T4(e,u+48)),42).mul(w4),r=r.xor(s[1]),a=a.add(o[0]).add(T4(e,u+40)),i=C4(i.add(s[0]),33).mul(w4),o=R4(e,u,o[1].mul(w4),r.add(s[0])),s=R4(e,u+32,i.add(s[1]),a.add(T4(e,u+16)));var h=[r,i];i=h[0],r=h[1],u+=64}while(u!==c);var p=w4.add(i.and(255).shl(1));u=l,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=C4(r.add(a).add(o[0]).add(T4(e,u+8)),37).mul(p),a=C4(a.add(o[1]).add(T4(e,u+48)),42).mul(p),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(T4(e,u+40))),i=C4(i.add(s[0]),33).mul(p),o=R4(e,u,o[1].mul(p),r.add(s[0])),s=R4(e,u+32,i.add(s[1]),a.add(T4(e,u+16)));var f=[r,i];return i=f[0],r=f[1],A4(A4(o[0],s[0],p).add(N4(a).mul(k4)).add(i),A4(o[1],s[1],p).add(r),p)}function M4(e,t){return"string"===t?B4(e):L4([e],t)}function L4(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=V4(e)),k0().getBool("DEBUG")&&X$(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function z4(){return k0().platform.now()}function P4(e,t){return k0().platform.fetch(e,t)}function B4(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",k0().platform.encode(e,t)}function W4(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",k0().platform.decode(e,t)}function U4(e){return null!=k0().platform.isTypedArray?k0().platform.isTypedArray(e):q3(e)}function V4(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"==typeof e||"number"==typeof e||"string"==typeof e||v0(e)||null==e||U4(e)&&n)t.push(e);else if(Array.isArray(e)||U4(e))for(var r=0;r<e.length;++r)V4(e[r],t,n);else{for(var a=-1,i=0,o=Object.keys(e);i<o.length;i++){var s=o[i];/^([1-9]+[0-9]*|0)$/.test(s)&&(a=Math.max(a,Number(s)))}for(var u=0;u<=a;u++)V4(e[u],t,n)}return t}var G4={__proto__:null,arraysEqual:P$,arraysEqualWithNull:z$,assert:F$,assertNonNegativeIntegerDimensions:p0,assertNonNull:M$,assertShapesMatch:D$,bytesFromStringArray:Q$,bytesPerElement:Z$,checkConversionForErrors:X$,clamp:A$,computeStrides:i0,convertBackendValuesAndArrayBuffer:u0,createScalarValue:M4,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return C$(t),t},decodeString:W4,distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n},encodeString:B4,fetch:P4,fingerPrint64:D4,flatten:V4,getArrayFromDType:K$,getTypedArrayFromDType:q$,hasEncodingLoss:J$,hexToLong:x4,indexToLoc:d0,inferDtype:n0,inferFromImplicitShape:G$,isBoolean:e0,isFunction:r0,isInt:B$,isNumber:t0,isPromise:v0,isScalarShape:function(e){return 0===e.length},isString:$$,isTypedArray:U4,isValidDtype:Y$,locToIndex:f0,makeOnesTypedArray:c0,makeZerosNestedTypedArray:h0,makeZerosTypedArray:l0,nearestDivisor:a0,nearestLargerEven:R$,now:z4,parseAxisParam:j$,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},repeatedTry:V$,rightPad:U$,shuffle:C$,shuffleCombo:function(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,_$(e,--n,r),_$(t,n,r)},sizeFromShape:L$,sizeToSquarishShape:W$,squeezeShape:H$,sum:O$,swap:_$,tanh:function(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)},toNestedArray:s0,toTypedArray:L4},j4=function(){function e(t,n){l(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new H4)}return p(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=z4();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=O(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(e){u.e(e)}finally{u.f()}a=Promise.resolve({kernelMs:z4()-o})}if(k0().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(){var t=r[l];t.data().then((function(n){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(n,t.dtype,e)}))},l=0;l<r.length;l++)c();return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var H4=function(){function e(){l(this,e)}return p(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"==typeof r?U$("".concat(r,"ms"),9):r.error,s=U$(e,25),u=t.rank,c=t.size,l=U$(t.shape.toString(),14),h="";for(var p in a){var f=a[p];if(null!=f){var d=f.shape||t.shape,v=d.length;h+="".concat(p,": ").concat(v,"D ").concat(v>0?d:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(h,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function q4(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],h=!1,p=0;p<t.length;p++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),h=!0,a[s.id]=!0;break}if(h)break}}var f={};f[n.id]=!0;for(var d={},v=e.length-1;v>=0;v--)for(var m=e[v],g=m.inputs,y=0;y<m.outputs.length;y++)if(f[m.outputs[y].id]){for(var b in g)f[g[b].id]=!0,d[m.id]=!0;break}for(var x=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&d[w.id]){var I={};for(var N in w.inputs){var S=w.inputs[N];r[S.id]&&(I[N]=S)}var T=Object.assign({},w);T.inputs=I,T.outputs=w.outputs,x.push(T)}}return x}function K4(e,t,n,r){for(var a=function(){var a=t[i],o=[];if(a.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(a.kernelName,"."));var s=a.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var i=n((function(){return s[t]()}));if("float32"!==i.dtype)throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(i.dtype,"'"));var o=a.inputs[t];if(!P$(i.shape,o.shape))throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(i.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=i;else{var u=e[o.id];e[o.id]=r(u,i),u.dispose()}};for(var c in a.inputs)u(c)},i=t.length-1;i>=0;i--)a()}function X4(e,t,n,r){var a=i0(t),i=function(e,t,n,r){var a=L$(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?Q4(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,h=0;h<i;h++)o[h]=Math.max(o[h],Y4(u[l+h],0,n).length);return o}(e,t,n,a),o=t.length,s=Z4(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function Y4(e,t,n){return U$(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):$$(e)?"'".concat(e,"'"):"bool"===n?J4(e):parseFloat(e.toFixed(7)).toString(),t)}function J4(e){return 0===e?"false":"true"}function Z4(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=Q4(e);return[Y4(c[0],0,n)]}return"bool"===n?[J4(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var l=3*o,h=Array.from(e.slice(0,l)),p=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(h=Q4(h),p=Q4(p)),["["+h.map((function(e,t){return Y4(e,a[t],n)})).join(", ")+", ..., "+p.map((function(e,t){return Y4(e,a[s-3+t],n)})).join(", ")+"]"]}var f="complex64"===n?Q4(e):Array.from(e);return["["+f.map((function(e,t){return Y4(e,a[t],n)})).join(", ")+"]"]}var d=t.slice(1),v=r.slice(1),m=r[0]*o,g=[];if(s>20){for(var y=0;y<3;y++){var b=y*m,x=b+m;g.push.apply(g,T(Z4(e.slice(b,x),d,n,v,a,!1)))}g.push("...");for(var k=s-3;k<s;k++){var w=k*m,I=w+m;g.push.apply(g,T(Z4(e.slice(w,I),d,n,v,a,k===s-1)))}}else for(var N=0;N<s;N++){var S=N*m,E=S+m;g.push.apply(g,T(Z4(e.slice(S,E),d,n,v,a,N===s-1)))}var C=2===u?",":"";g[0]="["+(s>0?g[0]+C:"");for(var A=1;A<g.length-1;A++)g[A]=" "+g[A]+C;for(var R=",\n",_=2;_<u;_++)R+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(i?"":R),g}function Q4(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var $4=function(){function e(t,n,r){var a=this;if(l(this,e),this.dtype=n,this.shape=t.slice(),this.size=L$(t),null!=r){var i=r.length;F$(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||K$(n,this.size),this.strides=i0(t)}return p(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),F$(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return e5().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),e5=null,t5=null;var n5=function(){function e(t,n,r,a){l(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=L$(t),this.strides=i0(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}var t,n,r,a;return p(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:(a=c(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",t5.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"bufferSync",value:function(){return t5.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:(r=c(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",s0(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"arraySync",value:function(){return s0(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:(n=c(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=e5().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return W4(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])}))),function(){return n.apply(this,arguments)})},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),e5().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=e5().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return W4(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:(t=c(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,e5().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dispose",value:function(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),e5().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t5.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),t5.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return X4(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),t5.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),e5().makeVariable(this,e,t,n)}}]),e}();function r5(){return I0("Tensor",(function(){return n5}))}Object.defineProperty(n5,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),r5();var a5,i5,o5,s5,u5,c5=function(e){d(n,e);var t=w(n);function n(e,r,a,i){var o;return l(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return p(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!P$(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));e5().disposeTensor(this),this.dataId=e.dataId,e5().incRef(this,null)}},{key:"dispose",value:function(){e5().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(n5);Object.defineProperty(c5,Symbol.hasInstance,{value:function(e){return e instanceof n5&&null!=e.assign&&e.assign instanceof Function}}),e.Rank=void 0,(a5=e.Rank||(e.Rank={})).R0="R0",a5.R1="R1",a5.R2="R2",a5.R3="R3",a5.R4="R4",a5.R5="R5",a5.R6="R6",function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(i5||(i5={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(o5||(o5={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(s5||(s5={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(u5||(u5={}));var l5={float32:s5,int32:i5,bool:o5,complex64:u5};function h5(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return l5[e][t]}function p5(e){return h5(e,"int32")}function f5(e){return null!=e&&"object"===s(e)&&"texture"in e&&e.texture instanceof WebGLTexture}function d5(e){return"undefined"!=typeof GPUBuffer&&null!=e&&"object"===s(e)&&"buffer"in e&&e.buffer instanceof GPUBuffer}function v5(e,t){if(e.dtype===t.dtype)return[e,t];var n=h5(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function m5(e,t){F$(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function g5(e,t){return t.some((function(t){return t.id===e.id}))}function y5(e){var t=[];return b5(e,t,new Set),t}function b5(e,t,n){if(null!=e)if(e instanceof n5)t.push(e);else if(r=e,Array.isArray(r)||"object"===s(r)){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),b5(o,t,n))}}}var x5={__proto__:null,assertTypesMatch:m5,getTensorsInContainer:y5,isTensorInList:g5,makeTypesMatch:v5};function k5(e){return null!=e.kernelName}var w5=function(){function e(){l(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return p(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),I5=function(){function e(t){l(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new w5}var t,n,r,a;return p(e,[{key:"ready",value:(a=c(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(z3("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:(r=c(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new j4(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setupRegisteredKernels",value:function(){var e=this;V3(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;V3(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof T$||"function"!=typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,z3("Initialization of backend ".concat(e," failed")),z3(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(t){return z3("Initialization of backend ".concat(e," failed")),z3(t.stack||t.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=E5.runKernel(W1,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return E5.runKernel(X0,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=W3(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=k5(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(k5(e)){var l=e.kernelName,h=e.inputs,p=e.attrs;null==this.backendName&&this.backend;var f=W3(l,this.backendName);F$(null!=f,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=f.kernelFunc({inputs:h,attrs:p,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(o){var s=a.getTensorsForGradient(l,h,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var d=e.forwardFunc,v=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return d(a.backend,v)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var m,g=e.inputs,y=e.attrs,b=k5(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(m=a.profiler.profileKernel(c,g,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(m),t=m.outputs):t=n()})),o&&this.addTapeNode(c,g,t,b,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n}},{key:"getTensorsForGradient",value:function(e,t,n){var r=U3(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(F$(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&$$(e[0])&&(a=e.map((function(e){return B4(e)})));var i=r.write(a,t,n),o=new n5(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=Q$(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new n5(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new c5(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Z$(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof c5||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Z$(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:(n=c(o().mark((function e(t){var n,r,a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,T(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=O(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return s=i.value,e.next=18,s.kernelTimeMs;case 18:return s.kernelTimeMs=e.sent,e.next=21,s.extraInfo;case 21:s.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])}))),function(e){return n.apply(this,arguments)})},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=U3(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=l0(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=y5(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(F$(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));F$(i instanceof n5,(function(){return"The result y returned by f() must be a tensor."}));var o=q4(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?N5(i.shape):n,K4(e,o,(function(e){return r.tidy(e)}),C5);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=O(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(e){n.e(e)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return F$(r0(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;F$(r.every((function(e){return e instanceof n5})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return F$((i=e.apply(void 0,[].concat(r,[n]))).value instanceof n5,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),F$(r0(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];F$(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),F$(a.every((function(e){return e instanceof n5})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:(t=c(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=z4(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=z4()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new w5,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function N5(e){var t=c0(L$(e),"float32");return E5.makeTensor(t,e,"float32")}function S5(){var t=w0();if(null==t._tfengine){var n=new y0(t);t._tfengine=new I5(n)}return function(t){e.ENV=t}(t._tfengine.ENV),e5=function(){return t._tfengine},t._tfengine}I5.nextTensorId=0,I5.nextVariableId=0;var T5,E5=S5();function C5(e,t){var n={a:e,b:t};return E5.runKernel(E0,n)}function A5(e){if(void 0!==T5)return T5;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function R5(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var _5={__proto__:null,isBrowser:R5,isMobile:A5,mockIsMobile:function(e){T5=e}},O5=k0();function F5(e,t){var n=e;if(U4(e))return"string"===t?[]:[e.length];if(f5(e)){var r=e.channels||"RGBA";return[e.height,e.width*r.length]}if(d5(e))return[e.buffer.size/(null==t?4:Z$(t))];if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)||U4(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&k0().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&D5(e,a,[]),a}function D5(e,t,n){if(n=n||[],Array.isArray(e)||U4(e)){F$(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),F$(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)D5(e[a],r,n.concat(a))}else F$(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function M5(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function L5(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof r5())return M5(r,e.dtype,t,n),e;var a=n0(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),M5(r,a,t,n),null==e||!U4(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=F5(e,a);U4(e)||Array.isArray(e)||(e=[e]);var s=!0,u="string"!==a?L4(e,a):V4(e,[],s);return E5.makeTensor(u,o,a)}function z5(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return L5(e,"".concat(t,"[").concat(a,"]"),n,r)}))}O5.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),O5.registerFlag("IS_BROWSER",(function(){return R5()})),O5.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),O5.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),O5.registerFlag("IS_SAFARI",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)})),O5.registerFlag("PROD",(function(){return!1})),O5.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return O5.getBool("DEBUG")})),O5.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),O5.registerFlag("IS_TEST",(function(){return!1})),O5.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return O5.getBool("DEBUG")})),O5.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),O5.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(function(){return!1})),O5.registerFlag("USE_SETTIMEOUTCUSTOM",(function(){return!1}));var P5="__op";function B5(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=P5;var a=function(){E5.startScope(n);try{var e=r.apply(void 0,arguments);return v0(e)&&console.error("Cannot return a Promise inside of tidy."),E5.endScope(e),e}catch(e){throw E5.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var W5=B5({complex_:function(e,t){var n=L5(e,"real","complex"),r=L5(t,"imag","complex");D$(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return E5.runKernel(Z0,a)}});function U5(e,t,n,r){if(null==r)r=n0(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(d5(e)||f5(e)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return E5.backend.createTensorFromGPUData(e,t||n,r)}if(!U4(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){p0(t);var a=L$(t),i=L$(n);F$(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==L$(t.slice(o));F$(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return U4(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?L4(e,r):V4(e,[],!0),E5.makeTensor(e,t,r)}function V5(e,t,n){return U5(e,t,F5(e,n),n)}var G5={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},j5=function(){function e(t){if(l(this,e),this.shards=[],this.previousShardIndex=0,null!=t&&(t instanceof Array||(t=[t]),0!==(t=t.map((function(e){return U4(e)?e.buffer:e}))).length)){this.bufferUniformSize=t[0].byteLength;for(var n=0,r=0;r<t.length;r++){var a=t[r];r!==t.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);var i=n+a.byteLength;this.shards.push({buffer:a,start:n,end:i}),n=i}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}}return p(e,[{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),(t=Math.min(this.byteLength,t))<=e)return new ArrayBuffer(0);var n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));for(var r=t-e,a=new ArrayBuffer(r),i=new Uint8Array(a),o=0,s=n;s<this.shards.length;s++){var u=this.shards[s],c=e+o,l=c-u.start,h=o,p=Math.min(t,u.end),f=p-u.start,d=new Uint8Array(u.buffer,l,f-l);if(i.set(d,h),o+=d.length,t<u.end)break}return a}},{key:"findShardForByte",value:function(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;var n=function(e,t){var n=0,r=e.length;for(;n<=r;){var a=Math.floor((r-n)/2)+n,i=t(e[a]);if(0===i)return a;i<0?r=a:n=a+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}],[{key:"join",value:function(t){return new e(t).slice()}}]),e}();function H5(e){k0().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function q5(){return E5}function K5(){return E5.memory()}function X5(e,t){return E5.tidy(e,t)}function Y5(e){y5(e).forEach((function(e){return e.dispose()}))}function J5(e){return E5.keep(e)}function Z5(e){return E5.setBackend(e)}function Q5(){return E5.backendName}function $5(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return E5.registerBackend(e,t,n)}function e6(){return E5.backend}function t6(e,t){return n6.apply(this,arguments)}function n6(){return n6=c(o().mark((function e(t,n){var r,a,i,s,u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),s=o().mark((function e(){var s,l,h,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i[u],"float32"===(l=Array.isArray(t)?t[u].tensor:t[s]).dtype||"int32"===l.dtype||"bool"===l.dtype||"string"===l.dtype||"complex64"===l.dtype){e.next=4;break}throw new Error("Unsupported dtype in weight '".concat(s,"': ").concat(l.dtype));case 4:h={name:s,shape:l.shape,dtype:l.dtype},"string"===l.dtype?(p=new Promise(function(){var e=c(o().mark((function e(t){var n,r,a,i,s,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,s=0;s<n.length;s++)u=n[s],c=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(c,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.push(p)):a.push(l.data()),null!=n&&(h.group=n),r.push(h);case 8:case"end":return e.stop()}}),e)})),u=0;case 5:if(!(u<i.length)){e.next=10;break}return e.delegateYield(s(),"t0",7);case 7:++u,e.next=5;break;case 10:return e.next=12,Promise.all(a);case 12:return l=e.sent,e.abrupt("return",{data:p6(l),specs:r});case 14:case"end":return e.stop()}}),e)}))),n6.apply(this,arguments)}function r6(e,t){var n,r=new j5(e),a={},i=0,o=O(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=a6(s,(function(e,t){return r.slice(i+e,i+t)}));a[s.name]=s6(s,r.slice(i,i+u)),i+=u}}catch(e){o.e(e)}finally{o.f()}return a}function a6(e,t){var n,r=L$(e.shape);if("quantization"in e){var a=e.quantization;n=G5[a.dtype]}else{if("string"===e.dtype){for(var i=0,o=0;o<r;o++)i+=4+new Uint32Array(t(i,i+4))[0];return i}n=G5[e.dtype]}return r*n}function i6(e,t){return o6.apply(this,arguments)}function o6(){return o6=c(o().mark((function e(t,n){var r,a,i,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=L$(t.shape),!("quantization"in t)){e.next=6;break}i=t.quantization,a=G5[i.dtype],e.next=25;break;case 6:if("string"!==t.dtype){e.next=24;break}s=0,u=0;case 9:if(!(u<r)){e.next=21;break}return e.t0=s,e.t1=4,e.t2=Uint32Array,e.next=15,n(s,s+4);case 15:e.t3=e.sent,e.t4=new e.t2(e.t3)[0],s=e.t0+=e.t1+e.t4;case 18:u++,e.next=9;break;case 21:return e.abrupt("return",s);case 24:a=G5[t.dtype];case 25:return e.abrupt("return",r*a);case 26:case"end":return e.stop()}}),e)}))),o6.apply(this,arguments)}function s6(e,t){var n,r,a,i,o=e.name,s=e.dtype,u=e.shape,c=L$(u),l=0;if("quantization"in e){var h=e.quantization;if("uint8"===h.dtype||"uint16"===h.dtype){if(!("min"in h)||!("scale"in h))throw new Error("Weight ".concat(e.name," with quantization ").concat(h.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==h.dtype)throw new Error("Weight ".concat(e.name," has unknown ")+"quantization dtype ".concat(h.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==s)throw new Error("Weight ".concat(e.name," is quantized with ").concat(h.dtype," ")+"which only supports weights of type float32 not ".concat(s,"."))}var p=G5[h.dtype],f="uint8"===h.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===s)if("uint8"===h.dtype||"uint16"===h.dtype){n=new Float32Array(f.length);for(var d=0;d<f.length;d++){var v=f[d];n[d]=v*h.scale+h.min}}else{if("float16"!==h.dtype)throw new Error("Unsupported quantization type ".concat(h.dtype," ")+"for weight type float32.");var m=(r=function(){var e=function(e){for(var t=e<<13,n=0;0==(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),a=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),i=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}(),function(e){for(var t=new ArrayBuffer(4*e.length),n=new Uint32Array(t),o=0;o<e.length;o++){var s=e[o],u=r[i[s>>10]+(1023&s)]+a[s>>10];n[o]=u}return new Float32Array(t)});n=m(f)}else{if("int32"!==s)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s));if("uint8"!==h.dtype&&"uint16"!==h.dtype)throw new Error("Unsupported quantization type ".concat(h.dtype," ")+"for weight type int32.");n=new Int32Array(f.length);for(var g=0;g<f.length;g++){var y=f[g];n[g]=Math.round(y*h.scale+h.min)}}l+=c*p}else if("string"===s){var b=L$(e.shape);n=[];for(var x=0;x<b;x++){var k=new Uint32Array(t.slice(l,l+4))[0];l+=4;var w=new Uint8Array(t.slice(l,l+k));n.push(w),l+=k}}else{var I=G5[s];if("float32"===s)n=new Float32Array(t);else if("int32"===s)n=new Int32Array(t);else{if("bool"!==s){if("complex64"===s){n=new Float32Array(t);for(var N=new Float32Array(n.length/2),S=new Float32Array(n.length/2),T=0;T<N.length;T++)N[T]=n[2*T],S[T]=n[2*T+1];var E=V5(N,u,"float32"),C=V5(S,u,"float32"),A=W5(E,C);return E.dispose(),C.dispose(),A}throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s))}n=new Uint8Array(t)}l+=c*I}return V5(n,u,s)}function u6(e,t,n){return c6.apply(this,arguments)}function c6(){return c6=c(o().mark((function e(t,n,r){var a,i,s,u,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Uint8Array(n);case 1:if(!(a.byteLength<r)){e.next=16;break}return e.next=4,t.read();case 4:if(i=e.sent,s=i.done,u=i.value,!s||null!=u){e.next=10;break}throw c=r-a.byteLength,new Error("Reader is done but ".concat(c," bytes are still expected"));case 10:(l=new Uint8Array(a.length+u.byteLength)).set(a,0),l.set(new Uint8Array(u),a.length),a=l,e.next=1;break;case 16:return e.abrupt("return",a.buffer);case 17:case"end":return e.stop()}}),e)}))),c6.apply(this,arguments)}function l6(e,t){return h6.apply(this,arguments)}function h6(){return h6=c(o().mark((function e(t,n){var r,a,i,s,u,l,h,p,f,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},a=t.getReader(),i=new ArrayBuffer(0),s=O(n),e.prev=4,s.s();case 6:if((u=s.n()).done){e.next=21;break}return l=u.value,e.next=10,i6(l,function(){var e=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u6(a,i,n);case 2:return i=e.sent,e.abrupt("return",i.slice(t,n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 10:return h=e.sent,e.next=13,u6(a,i,h);case 13:i=e.sent,p=i.slice(0,h),i=i.slice(h),f=s6(l,p),r[l.name]=f,"webgpu"===Q5()&&"uploadToGPU"in(d=e6())&&L$(f.shape)>=k0().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&d.uploadToGPU(f.dataId);case 19:e.next=6;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(4),s.e(e.t0);case 26:return e.prev=26,s.f(),e.finish(26);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[4,23,26,29]])}))),h6.apply(this,arguments)}function p6(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var f6="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function d6(e){return f6?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function v6(e){if(f6)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function m6(e){if(f6){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function g6(e){return j5.join(e)}function y6(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function b6(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function x6(e,t,n){var r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}function k6(e,t){return w6.apply(this,arguments)}function w6(){return w6=c(o().mark((function e(t,n){var r,a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.weightsManifest){e.next=7;break}return e.next=3,n(t.weightsManifest);case 3:i=e.sent,s=S(i,2),r=s[0],a=s[1];case 7:return e.abrupt("return",x6(t,r,a));case 8:case"end":return e.stop()}}),e)}))),w6.apply(this,arguments)}function I6(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:d6(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:d6(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new j5(e.weightData).byteLength}}function N6(e){var t,n=[],r=O(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push.apply(n,T(a.weights))}}catch(e){r.e(e)}finally{r.f()}return n}var S6=function(){function e(){l(this,e),this.saveRouters=[],this.loadRouters=[]}return p(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),T6=function(e){return S6.getSaveHandlers(e)},E6=function(e,t){return S6.getLoadHandlers(e,t)},C6="tensorflowjs",A6="models_store",R6="model_info_store";function _6(){if(!k0().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function O6(e){var t=e.result;t.createObjectStore(A6,{keyPath:"modelPath"}),t.createObjectStore(R6,{keyPath:"modelPath"})}var F6=function(){function e(t){if(l(this,e),this.indexedDB=_6(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}var t,n;return p(e,[{key:"save",value:(n=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(C6,1);a.onupgradeneeded=function(){return O6(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(A6,"readonly"),s=o.objectStore(A6).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{t.weightData=j5.join(t.weightData);var u,c,l=I6(t),h=i.transaction(R6,"readwrite"),p=h.objectStore(R6);try{u=p.put({modelPath:n.modelPath,modelArtifactsInfo:l})}catch(e){return r(e)}u.onsuccess=function(){var a,o=(c=i.transaction(A6,"readwrite")).objectStore(A6);try{a=o.put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l})}catch(e){return r(e)}a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(p=h.objectStore(R6)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},u.onerror=function(e){return i.close(),r(u.error)},h.oncomplete=function(){null==c?i.close():c.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();F6.URL_SCHEME="indexeddb://";var D6=function(e){return k0().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(F6.URL_SCHEME)?(t=e.slice(F6.URL_SCHEME.length),new F6(t)):null;var t};function M6(e){return e.startsWith(F6.URL_SCHEME)?e.slice(F6.URL_SCHEME.length):e}S6.registerSaveRouter(D6),S6.registerLoadRouter(D6);var L6=function(){function e(){l(this,e),this.indexedDB=_6()}return p(e,[{key:"listModels",value:function(){var e=c(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(C6,1);r.onupgradeneeded=function(){return O6(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(R6,"readonly"),i=a.objectStore(R6).getAll();i.onsuccess=function(){var t,n={},r=O(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(e){r.e(e)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=c(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M6(t),e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(C6,1);a.onupgradeneeded=function(){return O6(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(R6,"readwrite"),s=o.objectStore(R6),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(A6,"readwrite")).objectStore(A6).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),z6="/",P6="tensorflowjs_models",B6="info",W6="model_topology",U6="weight_specs",V6="weight_data",G6="model_metadata";function j6(e){return{info:[P6,e,B6].join(z6),topology:[P6,e,W6].join(z6),weightSpecs:[P6,e,U6].join(z6),weightData:[P6,e,V6].join(z6),modelMetadata:[P6,e,G6].join(z6)}}function H6(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function q6(e){var t=e.split(z6);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(z6)}function K6(e){return e.startsWith(X6.URL_SCHEME)?e.slice(X6.URL_SCHEME.length):e}var X6=function(){function e(t){if(l(this,e),!k0().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=j6(this.modelPath)}var t,n;return p(e,[{key:"save",value:(n=c(o().mark((function e(t){var n,r,a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=I6(t),i=j5.join(t.weightData),e.prev=8,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,v6(i)),s={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,initializerSignature:null!=t.initializerSignature?t.initializerSignature:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),e.abrupt("return",{modelArtifactsInfo:a});case 18:throw e.prev=18,e.t0=e.catch(8),H6(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 22:case"end":return e.stop()}}),e,this,[[8,18]])}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=c(o().mark((function e(){var t,n,r,a,i,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(s=JSON.parse(i),n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,null!=s.signature&&(n.signature=s.signature),null!=s.userDefinedMetadata&&(n.userDefinedMetadata=s.userDefinedMetadata),null!=s.modelInitializer&&(n.modelInitializer=s.modelInitializer),null!=s.initializerSignature&&(n.initializerSignature=s.initializerSignature),null!=s.trainingConfig&&(n.trainingConfig=s.trainingConfig)),null!=(u=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=m6(u),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();X6.URL_SCHEME="localstorage://";var Y6=function(e){return k0().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(X6.URL_SCHEME)?(t=e.slice(X6.URL_SCHEME.length),new X6(t)):null;var t};S6.registerSaveRouter(Y6),S6.registerLoadRouter(Y6);var J6=function(){function e(){l(this,e),F$(k0().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),F$("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return p(e,[{key:"listModels",value:function(){var e=c(o().mark((function e(){var t,n,r,a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=P6+z6,r=z6+B6,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(s=q6(i),t[s]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=c(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=K6(t),n=j6(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),H6(n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Z6="://",Q6=function(){function e(){l(this,e),this.managers={}}return p(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){F$(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Z6)&&(t=t.slice(0,t.indexOf(Z6))),F$(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();F$(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(t){var n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(e.getInstance().managers)}}]),e}();function $6(e){if(-1===e.indexOf(Z6))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(Q6.getSchemes().join(",")));return{scheme:e.split(Z6)[0],path:e.split(Z6)[1]}}function e8(e,t){return t8.apply(this,arguments)}function t8(){return t8=c(o().mark((function e(t,n){var r,a,i,s,u,c,l,h,p,f,d=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]&&d[2],F$(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),F$((a=S6.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),F$(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],F$((s=S6.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),F$(s.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),u=s[0],c=$6(t).scheme,l=$6(t).path,h=c===$6(t).scheme,e.next=15,i.load();case 15:if(p=e.sent,!r||!h){e.next=19;break}return e.next=19,Q6.getManager(c).removeModel(l);case 19:return e.next=21,u.save(p);case 21:if(f=e.sent,!r||h){e.next=25;break}return e.next=25,Q6.getManager(c).removeModel(l);case 25:return e.abrupt("return",f.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),t8.apply(this,arguments)}function n8(){return n8=c(o().mark((function e(){var t,n,r,a,i,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Q6.getSchemes(),n={},r=O(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,Q6.getManager(i).listModels();case 9:for(u in s=e.sent)n[i+Z6+u]=s[u];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])}))),n8.apply(this,arguments)}function r8(){return(r8=c(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$6(t),r=Q6.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a8(){return(a8=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",e8(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i8(){return(i8=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",e8(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var o8=function(){function e(){l(this,e),this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}return p(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}},{key:"setTimeoutCustom",value:function(e,t){var n=this;"undefined"!=typeof window&&k0().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((function(){window.postMessage({name:n.messageName,index:n.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(function(e){e.source===window&&e.data.name===n.messageName&&(e.stopPropagation(),(0,n.functionRefs[e.data.index])(),n.handledMessageCount++,n.handledMessageCount===n.functionRefs.length&&(n.functionRefs=[],n.handledMessageCount=0))}),!0))):setTimeout(e,t)}},{key:"isTypedArray",value:function(e){return q3(e)}}]),e}();if(k0().get("IS_BROWSER")){k0().setPlatform("browser",new o8);try{Q6.registerManager(X6.URL_SCHEME,new J6)}catch(e){}try{Q6.registerManager(F6.URL_SCHEME,new L6)}catch(e){}}var s8,u8=function(){return require("node-fetch")};var c8=function(){function e(){l(this,e),this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return p(e,[{key:"fetch",value:function(e,t){return null!=k0().global.fetch?k0().global.fetch(e,t):(null==s8&&(s8=u8()),s8(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}},{key:"isTypedArray",value:function(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}]),e}();function l8(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",p0(e),new $4(e,t,n)}k0().get("IS_NODE")&&!k0().get("IS_BROWSER")&&k0().setPlatform("node",new c8);var h8=B5({cast_:function(e,t){var n=L5(e,"x","cast");if(!Y$(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return E5.runKernel(X0,r,a)}});var p8=B5({clone_:function(e){var t={x:L5(e,"x","clone","string_or_numeric")};return E5.runKernel(W1,t)}});function f8(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}S5(),t5={buffer:l8,cast:h8,clone:p8,print:f8};var d8=B5({add_:function(e,t){var n=L5(e,"a","add"),r=L5(t,"b","add"),a=S(v5(n,r),2),i={a:n=a[0],b:r=a[1]};return E5.runKernel(E0,i)}});var v8=B5({floorDiv_:function(e,t){var n=L5(e,"a","floorDiv"),r=L5(t,"b","floorDiv"),a=S(v5(n,r),2),i={a:n=a[0],b:r=a[1]};return E5.runKernel(D1,i)}});var m8=B5({div_:function(e,t){var n=L5(e,"a","div"),r=L5(t,"b","div"),a=S(v5(n,r),2);if(n=a[0],r=a[1],"int32"===n.dtype&&"int32"===r.dtype)return v8(n,r);var i={a:n,b:r};return E5.runKernel(k1,i,{})}});var g8=B5({mul_:function(e,t){var n=L5(e,"a","mul"),r=L5(t,"b","mul"),a=S(v5(n,r),2),i={a:n=a[0],b:r=a[1]};return E5.runKernel(g2,i)}});var y8=B5({abs_:function(e){var t=L5(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return E5.runKernel(Q0,n)}var r={x:t};return E5.runKernel(N0,r)}});var b8=B5({acos_:function(e){var t={x:L5(e,"x","acos")};return E5.runKernel(S0,t)}});var x8=B5({acosh_:function(e){var t={x:L5(e,"x","acosh")};return E5.runKernel(T0,t)}});var k8=B5({addN_:function(e){F$(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),F$(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return L5(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!P$(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return E5.runKernel(C0,r)}});var w8=B5({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=L5(e,"x","all","bool"),a={x:r},i={axis:t,keepDims:n};return E5.runKernel(A0,a,i)}});var I8=B5({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=L5(e,"x","any","bool"),a={x:r},i={axis:t,keepDims:n};return E5.runKernel(R0,a,i)}});var N8=B5({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=L5(e,"x","argMax"),r={x:n},a={axis:t};return E5.runKernel(_0,r,a)}});var S8=B5({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=L5(e,"x","argMin"),r={x:n},a={axis:t};return E5.runKernel(O0,r,a)}});var T8=B5({asin_:function(e){var t={x:L5(e,"x","asin")};return E5.runKernel(F0,t)}});var E8=B5({asinh_:function(e){var t={x:L5(e,"x","asinh")};return E5.runKernel(D0,t)}});var C8=B5({atan_:function(e){var t={x:L5(e,"x","atan")};return E5.runKernel(M0,t)}});var A8=B5({atan2_:function(e,t){var n=L5(e,"a","atan2"),r=L5(t,"b","atan2"),a=S(v5(n,r),2),i={a:n=a[0],b:r=a[1]};return E5.runKernel(z0,i)}});var R8=B5({atanh_:function(e){var t={x:L5(e,"x","atanh")};return E5.runKernel(L0,t)}});function _8(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3],s=[].concat(T(t),[o]),u=q8(a);return D8(e,s,n,i,r,null,null,u)}function O8(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=z8(t),c=S(u,2),l=c[0],h=c[1];if("channelsLast"===s)o=[l,h,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[l,h,e[1],e[1]]}return D8(e,o,n,r,a,i,!1,s)}function F8(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=P8(t),l=S(c,3),h=l[0],p=l[1],f=l[2];if("NDHWC"===u)s="channelsLast",o=[h,p,f,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[h,p,f,e[1],e[1]]}return M8(e,o,n,r,a,!1,s,i)}function D8(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,h=-1;if("channelsLast"===s){var p=S(e,4);u=p[0],c=p[1],l=p[2],h=p[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var f=S(e,4);u=f[0],h=f[1],c=f[2],l=f[3]}var d,v=S(t,4),m=v[0],g=v[1],y=v[3],b=z8(n),x=S(b,2),k=x[0],w=x[1],I=z8(r),N=S(I,2),T=N[0],E=N[1],C=B8(m,T),A=B8(g,E),R=W8(a,c,l,k,w,C,A,i,s),_=R.padInfo,O=R.outHeight,F=R.outWidth,D=o?y*h:y;return"channelsFirst"===s?d=[u,D,O,F]:"channelsLast"===s&&(d=[u,O,F,D]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:h,outHeight:O,outWidth:F,outChannels:D,padInfo:_,strideHeight:k,strideWidth:w,filterHeight:m,filterWidth:g,effectiveFilterHeight:C,effectiveFilterWidth:A,dilationHeight:T,dilationWidth:E,inShape:e,outShape:d,filterShape:t}}function M8(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,h=-1,p=-1;if("channelsLast"===o){var f=S(e,5);u=f[0],c=f[1],l=f[2],h=f[3],p=f[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var d=S(e,5);u=d[0],p=d[1],c=d[2],l=d[3],h=d[4]}var v,m=S(t,5),g=m[0],y=m[1],b=m[2],x=m[4],k=P8(n),w=S(k,3),I=w[0],N=w[1],T=w[2],E=P8(r),C=S(E,3),A=C[0],R=C[1],_=C[2],O=B8(g,A),F=B8(y,R),D=B8(b,_),M=U8(a,c,l,h,I,N,T,O,F,D,s),L=M.padInfo,z=M.outDepth,P=M.outHeight,B=M.outWidth,W=i?x*p:x;return"channelsFirst"===o?v=[u,W,z,P,B]:"channelsLast"===o&&(v=[u,z,P,B,W]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:l,inWidth:h,inChannels:p,outDepth:z,outHeight:P,outWidth:B,outChannels:W,padInfo:L,strideDepth:I,strideHeight:N,strideWidth:T,filterDepth:g,filterHeight:y,filterWidth:b,effectiveFilterDepth:O,effectiveFilterHeight:F,effectiveFilterWidth:D,dilationDepth:A,dilationHeight:R,dilationWidth:_,inShape:e,outShape:v,filterShape:t}}function L8(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=B8(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function z8(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function P8(e){return"number"==typeof e?[e,e,e]:e}function B8(e,t){return t<=1?e:e+(e-1)*(t-1)}function W8(e,t,n,r,a,i,o,u,c){var l,h,p;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=L8(e,t,n));var i=e[0],o=e[1];return[V8((i-t+2*r)/n+1,a),V8((o-t+2*r)/n+1,a)]}([t,n],i,r,e,u);h=f[0],p=f[1]}else if("same"===e){h=Math.ceil(t/r),p=Math.ceil(n/a);var d=Math.max(0,(h-1)*r+i-t),v=Math.max(0,(p-1)*a+o-n),m=Math.floor(d/2),g=d-m,y=Math.floor(v/2);l={top:m,bottom:g,left:y,right:v-y,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((t-i+1)/r),p=Math.ceil((n-o+1)/a);else{if("object"!==s(e))throw Error("Unknown padding parameter: ".concat(e));var b="channelsLast"===c?e[1][0]:e[2][0],x="channelsLast"===c?e[1][1]:e[2][1],k="channelsLast"===c?e[2][0]:e[3][0],w="channelsLast"===c?e[2][1]:e[3][1];l={top:b,bottom:x,left:k,right:w,type:0===b&&0===x&&0===k&&0===w?"VALID":"EXPLICIT"},h=V8((t-i+b+x)/r+1,u),p=V8((n-o+k+w)/a+1,u)}return{padInfo:l,outHeight:h,outWidth:p}}function U8(e,t,n,r,a,i,o,s,u,c,l){var h,p,f,d;if("valid"===e&&(e=0),"number"==typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,a,i){null==a&&(a=L8(e,t[0],r[0]));for(var o=[0,0,0,n],s=0;s<3;s++)e[s]+2*a>=t[s]&&(o[s]=V8((e[s]-t[s]+2*a)/r[s]+1,i));return o}([t,n,r,1],[s,u,c],1,[a,i,o],e,l);p=v[0],f=v[1],d=v[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));var m=((p=Math.ceil(t/a))-1)*a+s-t,g=((f=Math.ceil(n/i))-1)*i+u-n,y=((d=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(m/2),x=m-b,k=Math.floor(g/2),w=g-k,I=Math.floor(y/2);h={top:k,bottom:w,left:I,right:y-I,front:b,back:x,type:"SAME"}}return{padInfo:h,outDepth:p,outHeight:f,outWidth:d}}function V8(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function G8(e){var t=S(z8(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function j8(e,t){return G8(e)||G8(t)}function H8(e){return z8(e).every((function(e){return e>0}))}function q8(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function K8(e,t,n){if(null!=n){if("string"==typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"==typeof t)F$(B$(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==s(t))throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){F$(B$(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var X8=B5({reshape_:function(e,t){var n={x:L5(e,"x","reshape","string_or_numeric")},r={shape:t};return E5.runKernel(z2,n,r)}});var Y8=B5({avgPool_:function(e,t,n,r,a){var i=L5(e,"x","avgPool","float32");F$(j8(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=X8(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F$(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),K8("avgPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=E5.runKernel(P0,u,c);return l=h8(l,i.dtype),s?X8(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var J8=B5({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=L5(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=X8(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),F$(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),F$("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),F$("number"==typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(function(){return"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")})),K8("avgPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},h=E5.runKernel(W0,c,l);return h=h8(h,s.dtype),u?X8(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var Z8=B5({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;F$(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=z5(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return p8(n[0]);var r=n,a={axis:t};return E5.runKernel($0,r,a)}});var Q8=B5({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=L5(e,"a","matMul"),i=L5(t,"b","matMul"),o=v5(a,i),s=S(o,2),u={a:a=s[0],b:i=s[1]},c={transposeA:n,transposeB:r};return E5.runKernel(V0,u,c)}});var $8=B5({sigmoid_:function(e){var t={x:L5(e,"x","sigmoid","float32")};return E5.runKernel(t3,t)}});var e7=B5({slice_:function(e,t,n){var r=L5(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return E5.runKernel(Z2,a,i)}});var t7=B5({tanh_:function(e){var t={x:L5(e,"x","tanh","float32")};return E5.runKernel(w3,t)}});var n7=B5({basicLSTMCell_:function(e,t,n,r,a,i){var o=L5(e,"forgetBias","basicLSTMCell"),s=L5(t,"lstmKernel","basicLSTMCell"),u=L5(n,"lstmBias","basicLSTMCell"),c=L5(r,"data","basicLSTMCell"),l=L5(a,"c","basicLSTMCell"),h=L5(i,"h","basicLSTMCell"),p=Z8([c,h],1),f=Q8(p,s),d=d8(f,u),v=d.shape[0],m=d.shape[1]/4,g=[v,m],y=e7(d,[0,0],g),b=e7(d,[0,m],g),x=e7(d,[0,2*m],g),k=e7(d,[0,3*m],g),w=d8(g8($8(y),t7(b)),g8(l,$8(d8(o,x))));return[w,g8(t7(w),$8(k))]}});var r7=B5({batchToSpaceND_:function(e,t,n){var r=L5(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));F$(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),F$(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),F$(r.shape[0]%a==0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return E5.runKernel(G0,i,o)}});var a7=B5({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=L5(e,"x","batchNorm"),c=L5(t,"mean","batchNorm"),l=L5(n,"variance","batchNorm");null!=a&&(o=L5(a,"scale","batchNorm")),null!=r&&(s=L5(r,"offset","batchNorm")),F$(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),F$(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),F$(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var h=function(e){return 0===e.rank||1===e.rank?X8(e,[1,1,1,e.size]):2===e.rank?X8(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?X8(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),p={x:h,scale:o,offset:s,mean:c,variance:l},f={varianceEpsilon:i},d=E5.runKernel(M1,p,f);return X8(d,u.shape)}});var i7=B5({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=L5(e,"x","batchNorm"),c=L5(t,"mean","batchNorm"),l=L5(n,"variance","batchNorm");return null!=a&&(o=L5(a,"scale","batchNorm")),null!=r&&(s=L5(r,"offset","batchNorm")),F$(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),F$(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),F$(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&F$(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&F$(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),a7(u,c,l,s,o,i)}});var o7=B5({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=L5(e,"x","batchNorm"),c=L5(t,"mean","batchNorm"),l=L5(n,"variance","batchNorm");return null!=a&&(o=L5(a,"scale","batchNorm")),null!=r&&(s=L5(r,"offset","batchNorm")),F$(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),F$(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),F$(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&F$(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&F$(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),a7(u,c,l,s,o,i)}});var s7=B5({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=L5(e,"x","batchNorm"),c=L5(t,"mean","batchNorm"),l=L5(n,"variance","batchNorm");return null!=a&&(o=L5(a,"scale","batchNorm")),null!=r&&(s=L5(r,"offset","batchNorm")),F$(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),F$(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),F$(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&F$(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&F$(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),a7(u,c,l,s,o,i)}});var u7=B5({bincount_:function(e,t,n){var r=L5(e,"x","bincount"),a=L5(t,"weights","bincount");F$("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),F$(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),F$(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return E5.runKernel(j0,i,o)}});var c7=B5({bitwiseAnd_:function(e,t){var n=L5(e,"x","bitwiseAnd"),r=L5(t,"y","bitwiseAnd");if(!P$(n.shape,r.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(r.shape));if("int32"!==n.dtype||"int32"!==r.dtype)throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(r.dtype));var a={a:n,b:r};return E5.runKernel(H0,a)}});var l7=B5({broadcastArgs_:function(e,t){var n=L5(e,"s0","broadcastArgs","int32"),r=L5(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return E5.runKernel(K0,a)}});var h7=B5({broadcastTo_:function(e,t){var n=L5(e,"broadcastTo","x"),r=n.shape;if(p0(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=X8(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return p8(n);var c={x:n},l={reps:o};return E5.runKernel(I3,c,l)}});var p7=B5({ceil_:function(e){var t={x:L5(e,"x","ceil","float32")};return E5.runKernel(Y0,t)}});function f7(e,t,n){p0(e);var r={shape:e,value:t,dtype:n=n||n0(t)};return E5.runKernel(_1,{},r)}var d7=B5({clipByValue_:function(e,t,n){var r=L5(e,"x","clipByValue");if(F$(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")})),t===n)return f7(r.shape,t,r.dtype);var a={x:r},i={clipValueMin:t,clipValueMax:n};return E5.runKernel(J0,a,i)}});var v7=B5({concat1d_:function(e){return Z8(e,0)}});var m7=B5({concat2d_:function(e,t){return Z8(e,t)}});var g7=B5({concat3d_:function(e,t){return Z8(e,t)}});var y7=B5({concat4d_:function(e,t){return Z8(e,t)}});var b7=B5({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=L5(e,"x","conv2d","float32"),u=L5(t,"filter","conv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=X8(s,[1,s.shape[0],s.shape[1],s.shape[2]])),F$(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),F$(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),K8("conv2d",r,o);var h="NHWC"===a?c.shape[3]:c.shape[1];F$(h===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(h,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),F$(j8(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),F$(H8(i),(function(){return"Error in conv2D: Dilated rates should be larger than 0."})),F$(H8(n),(function(){return"Error in conv2D: Strides should be larger than 0."}));var p={x:c,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},d=E5.runKernel(e1,p,f);return l?X8(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var x7=B5({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=L5(e,"x","conv1d"),u=L5(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=X8(s,[1,s.shape[0],s.shape[1]])),F$(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),F$(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),K8("conv1d",r,o),F$(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),F$(j8(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),F$(H8(i),(function(){return"Error in conv1D: Dilated rates should be larger than 0."})),F$(H8(n),(function(){return"Error in conv1D: Stride should be larger than 0."})),F$("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var h=X8(u,[1,u.shape[0],u.shape[1],u.shape[2]]),p=X8(c,[c.shape[0],1,c.shape[1],c.shape[2]]),f=[1,n],d=[1,i],v="NHWC",m=b7(p,h,f,r,v,d,o);return X8(m,l?[m.shape[2],m.shape[3]]:[m.shape[0],m.shape[2],m.shape[3]])}});var k7=B5({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;F$(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=X8(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),F$(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),F$(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),F$(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var l="NHWC"===i?s[3]:s[1],h="NHWC"===i?u.shape[3]:u.shape[1];F$(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),F$(h===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),K8("conv2dDerInput",a,o);var p={dy:u,filter:n},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},d=E5.runKernel(n1,p,f);return c?X8(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var w7=B5({conv2dTranspose_:function(e,t,n,r,a,i){var o=L5(e,"x","conv2dTranspose"),s=L5(t,"filter","conv2dTranspose");return k7(n,o,s,r,a,"NHWC",i)}});var I7=B5({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=L5(e,"x","conv3d"),s=L5(t,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=X8(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),F$(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),F$(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),F$(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),F$(j8(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),F$("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")})),F$(H8(i),(function(){return"Error in conv3D: Dilated rates should be larger than 0."})),F$(H8(n),(function(){return"Error in conv3D: Strides should be larger than 0."}));var l={x:u,filter:s},h={strides:n,pad:r,dataFormat:a,dilations:i},p=E5.runKernel(r1,l,h);return c?X8(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});var N7=B5({conv3DBackpropInput_:function(e,t,n,r,a){F$(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=X8(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=o.shape[4];F$(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),F$(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),F$(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),F$(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),F$(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var l={dy:o,filter:n},h={pad:a,strides:r,inputShape:i},p=E5.runKernel(i1,l,h);return s?X8(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});var S7=B5({conv3dTranspose_:function(e,t,n,r,a){var i=L5(e,"x","conv3dTranspose"),o=L5(t,"filter","conv3dTranspose");return N7(n,i,o,r,a)}});var T7=B5({cos_:function(e){var t={x:L5(e,"x","cos","float32")};return E5.runKernel(o1,t)}});var E7=B5({cosh_:function(e){var t={x:L5(e,"x","cosh","float32")};return E5.runKernel(s1,t)}});var C7=B5({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=L5(e,"x","cumprod"),i={x:a},o={axis:t,exclusive:n,reverse:r};return E5.runKernel(u1,i,o)}});var A7=B5({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=L5(e,"x","cumsum"),i={x:a},o={axis:t,exclusive:n,reverse:r};return E5.runKernel(c1,i,o)}});var R7=B5({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=L5(e,"x","denseBincount"),i=L5(t,"weights","denseBincount");F$("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),F$(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),F$(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),F$(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return E5.runKernel(h1,o,s)}});var _7=B5({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=L5(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];F$(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),F$(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),F$(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),F$(o%(t*t)==0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return E5.runKernel(p1,s,u)}});var O7=B5({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=L5(e,"x","depthwiseConv2d","float32"),u=L5(t,"filter","depthwiseConv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=X8(s,[1,s.shape[0],s.shape[1],s.shape[2]])),F$(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),F$(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")}));var h="NHWC"===a?c.shape[3]:c.shape[1];F$(h===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(h,") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),K8("depthwiseConv2d",r,o);var p={x:c,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},d=E5.runKernel(f1,p,f);return l?X8(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var F7=B5({diag_:function(e){var t={x:L5(e,"x","diag")};return E5.runKernel(m1,t)}});var D7=B5({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=L5(e,"x","dilation2d"),s=L5(t,"filter","dilation2d");F$(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),F$(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),F$("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var u=o,c=!1;3===o.rank&&(u=X8(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),F$(u.shape[3]===s.shape[2],(function(){return"Error in dilation2d:  input and filter must have the same depth: ".concat(u.shape[3]," vs ").concat(s.shape[2])}));var l={x:u,filter:s},h={strides:n,pad:r,dilations:a},p=E5.runKernel(g1,l,h);return c?X8(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});function M7(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function L7(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function z7(e,t){for(var n=Math.max(e.length,t.length),r=new Array(n),a=0;a<n;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)r[n-a-1]=o;else if(1===o)r[n-a-1]=i;else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}r[n-a-1]=i}}return r}var P7={__proto__:null,assertAndGetBroadcastShape:z7,getBroadcastDims:M7,getReductionAxes:L7};var B7=B5({equal_:function(e,t){var n=L5(e,"a","equal","string_or_numeric"),r=L5(t,"b","equal","string_or_numeric"),a=S(v5(n,r),2);n=a[0],r=a[1],z7(n.shape,r.shape);var i={a:n,b:r};return E5.runKernel(T1,i)}});var W7=B5({where_:function(e,t,n){var r=L5(t,"a","where"),a=L5(n,"b","where"),i=L5(e,"condition","where","bool"),o=z7(z7(i.shape,r.shape),a.shape),s={condition:h7(i,o),t:h7(r,o),e:h7(a,o)};return E5.runKernel(Y2,s)}});var U7=B5({zerosLike_:function(e){var t={x:L5(e,"x","zerosLike")};return E5.runKernel(R3,t)}});var V7=B5({divNoNan_:function(e,t){var n=L5(e,"a","div"),r=L5(t,"b","div"),a=S(v5(n,r),2);n=a[0],r=a[1];var i=m8(n,r),o=U7(i),s=B7(r,o);return W7(s,o,i)}});var G7=B5({dot_:function(e,t){var n=L5(e,"t1","dot"),r=L5(t,"t2","dot");F$(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(F$(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=X8(n,[1,-1]),s=X8(r,[-1,1]),u=Q8(o,s);return X8(u,[])}if(1===n.rank&&2===r.rank){var c=X8(n,[1,-1]),l=X8(r,[r.shape[0],r.shape[1]]),h=Q8(c,l);return X8(h,[h.size])}if(2===n.rank&&1===r.rank){var p=X8(r,[-1,1]),f=Q8(n,p);return X8(f,[f.size])}var d=X8(r,[r.shape[0],r.shape[1]]);return Q8(n,d)}});var j7=B5({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return L5(e,"tensors".concat(t),"einsum")})),i={equation:e};return E5.runKernel(w1,a,i)}});var H7=B5({elu_:function(e){var t={x:L5(e,"x","elu","float32")};return E5.runKernel(I1,t)}});var q7=B5({ensureShape_:function(e,t){var n=L5(e,"x","ensureShape","string_or_numeric");if(!z$(n.shape,t))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(t));return e}});var K7=B5({erf_:function(e){var t=L5(e,"x","erf");F$("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=h8(t,"float32"));var n={x:t};return E5.runKernel(S1,n)}});function X7(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Y7(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function J7(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function Z7(e,t){return Y7(e,t.map((function(e){return 1})),t)}function Q7(e,t,n){F$(X7(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function $7(e,t){if(X7(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function e9(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function t9(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var n9=B5({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=L5(e,"x","max"),a={x:r},i={reductionIndices:t,keepDims:n};return E5.runKernel(a2,a,i)}});var r9=B5({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=L5(e,"x","min"),a={x:r},i={axis:t,keepDims:n};return E5.runKernel(p2,a,i)}});var a9=B5({pow_:function(e,t){var n=L5(e,"base","pow"),r=L5(t,"exp","pow"),a=S(v5(n,r),2),i={a:n=a[0],b:r=a[1]};return E5.runKernel(E2,i)}});function i9(e,t){if((U4(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&U4(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return U5(e,[],[],t)}var o9=B5({sqrt_:function(e){var t={x:L5(e,"x","sqrt","float32")};return E5.runKernel(r3,t)}});var s9=B5({square_:function(e){var t=L5(e,"x","square");return E5.runKernel("Square",{x:t},{})}});var u9=B5({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=L5(e,"x","sum");"bool"===r.dtype&&(r=h8(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return E5.runKernel(a3,a,i)}});function c9(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return y8(e);if(1!==e.rank&&null===n)return c9(X8(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return u9(y8(e),n);if(t===1/0)return n9(y8(e),n);if(t===-1/0)return r9(y8(e),n);if("euclidean"===t||2===t)return o9(u9(a9(y8(e),i9(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return n9(u9(y8(e),n[0]),n[1]-1);if(t===1/0)return n9(u9(y8(e),n[1]),n[0]);if(t===-1/0)return r9(u9(y8(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return o9(u9(s9(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var l9=B5({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=c9(e=L5(e,"x","norm"),t,n),i=a.shape;if(r){var o=j$(n,e.shape);i=Z7(a.shape,o)}return X8(a,i)}});var h9=B5({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l9(e,"euclidean",t,n)}});var p9=B5({exp_:function(e){var t={x:L5(e,"x","exp")};return E5.runKernel(E1,t)}});var f9=B5({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=L5(e,"x","expandDims","string_or_numeric");F$(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return E5.runKernel(C1,r,a)}});var d9=B5({expm1_:function(e){var t={x:L5(e,"x","expm1")};return E5.runKernel(A1,t)}});var v9=B5({tile_:function(e,t){var n=L5(e,"x","tile","string_or_numeric");F$(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return E5.runKernel(I3,r,a)}});var m9=B5({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=l8([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=X8(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return v9(f9(s,0),[n[0],1,1]);if(2===n.length)return v9(f9(f9(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return v9(f9(f9(f9(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});var g9=B5({floor_:function(e){var t={x:L5(e,"x","floor","float32")};return E5.runKernel(F1,t)}});var y9=B5({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=L5(e,"x","gather"),i=L5(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return E5.runKernel(L1,o,s)}});var b9=B5({greater_:function(e,t){var n=L5(e,"a","greater","string_or_numeric"),r=L5(t,"b","greater","string_or_numeric"),a=S(v5(n,r),2);n=a[0],r=a[1],z7(n.shape,r.shape);var i={a:n,b:r};return E5.runKernel(P1,i)}});var x9=B5({greaterEqual_:function(e,t){var n=L5(e,"a","greaterEqual","string_or_numeric"),r=L5(t,"b","greaterEqual","string_or_numeric"),a=S(v5(n,r),2);n=a[0],r=a[1],z7(n.shape,r.shape);var i={a:n,b:r};return E5.runKernel(B1,i)}});var k9=B5({imag_:function(e){var t={input:L5(e,"input","imag")};return E5.runKernel(V1,t)}});var w9=B5({isFinite_:function(e){var t={x:L5(e,"x","isFinite")};return E5.runKernel(G1,t)}});var I9=B5({isInf_:function(e){var t={x:L5(e,"x","isInf")};return E5.runKernel(j1,t)}});var N9=B5({isNaN_:function(e){var t={x:L5(e,"x","isNaN")};return E5.runKernel(H1,t)}});var S9=B5({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=L5(e,"x","leakyRelu"),r={x:n},a={alpha:t};return E5.runKernel(q1,r,a)}});var T9=B5({less_:function(e,t){var n=L5(e,"a","less","string_or_numeric"),r=L5(t,"b","less","string_or_numeric"),a=S(v5(n,r),2);n=a[0],r=a[1],z7(n.shape,r.shape);var i={a:n,b:r};return E5.runKernel(K1,i)}});var E9=B5({lessEqual_:function(e,t){var n=L5(e,"a","lessEqual","string_or_numeric"),r=L5(t,"b","lessEqual","string_or_numeric"),a=S(v5(n,r),2);n=a[0],r=a[1],z7(n.shape,r.shape);var i={a:n,b:r};return E5.runKernel(X1,i)}});function C9(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return E5.runKernel(Y1,{},r)}var A9=B5({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=L5(e,"x","localResponseNormalization");F$(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),F$(B$(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=X8(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},c={depthRadius:t,bias:n,alpha:r,beta:a},l=E5.runKernel(n2,u,c);return s?X8(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var R9=B5({log_:function(e){var t={x:L5(e,"x","log","float32")};return E5.runKernel(J1,t)}});var _9=B5({log1p_:function(e){var t={x:L5(e,"x","log1p")};return E5.runKernel(Z1,t)}});function O9(e,t){F$(r0(e),(function(){return"The f passed in variableGrads(f) must be a function"})),F$(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof c5})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],E5.registeredVariables)t.push(E5.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),F$(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."}));var o=E5.gradients(e,t,null,!0),s=o.value,u=o.grads;F$(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),F$(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var c={};return t.forEach((function(e,t){null!=u[t]&&(c[e.name]=u[t])})),null!=a&&a.forEach((function(e){return c[e.name]=null})),{value:s,grads:c}}function F9(e){return E5.customGrad(e)}function D9(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var M9=B5({neg_:function(e){var t={x:L5(e,"x","neg")};return E5.runKernel(y2,t)}});var L9=B5({softplus_:function(e){var t={x:L5(e,"x","softplus")};return E5.runKernel(n3,t)}});var z9=B5({logSigmoid_:function(e){var t=L5(e,"x","logSigmoid"),n=F9((function(e){return{value:M9(L9(M9(e))),gradFunc:function(t){return g8(t,$8(M9(e)))}}}));return n(t)}});var P9=B5({sub_:function(e,t){var n=L5(e,"a","sub"),r=L5(t,"b","sub"),a=S(v5(n,r),2),i={a:n=a[0],b:r=a[1]};return E5.runKernel(x3,i)}});var B9=B5({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=L5(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=F9((function(e,n){var r=n9(e,t,!0),a=P9(e,r),i=P9(h8(a,"float32"),R9(u9(p9(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=S(n,1)[0],a=p9(r);return P9(e,g8(u9(e,t,!0),a))}}}));return r(n)}});var W9=B5({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=L5(e,"x","logSumExp"),a=j$(t,r.shape),i=n9(r,a,!0),o=P9(r,i),s=p9(o),u=u9(s,a),c=R9(u),l=d8(X8(i,c.shape),c);if(n){var h=Z7(l.shape,a);return X8(l,h)}return l}});var U9=B5({logicalAnd_:function(e,t){var n=L5(e,"a","logicalAnd","bool"),r=L5(t,"b","logicalAnd","bool");z7(n.shape,r.shape);var a={a:n,b:r};return E5.runKernel(Q1,a)}});var V9=B5({logicalNot_:function(e){var t={x:L5(e,"x","logicalNot","bool")};return E5.runKernel($1,t)}});var G9=B5({logicalOr_:function(e,t){var n=L5(e,"a","logicalOr","bool"),r=L5(t,"b","logicalOr","bool");z7(n.shape,r.shape);var a={a:n,b:r};return E5.runKernel(e2,a)}});var j9=B5({logicalXor_:function(e,t){var n=L5(e,"a","logicalXor","bool"),r=L5(t,"b","logicalXor","bool");return z7(n.shape,r.shape),U9(G9(e,t),V9(U9(e,t)))}}),H9=2147483648;var q9=B5({searchSorted_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=L5(e,"sortedSequence","searchSorted"),a=L5(t,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=X8(r,[-1,i]),u=X8(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(L$(u.shape)>=H9)throw new Error("values tensor size must less than ".concat(H9));if(s.shape[1]>=H9)throw new Error("trailing dim_size must less than ".concat(H9," for int32 output type, was ").concat(s.shape[1]));var c={sortedSequence:s,values:u},l={side:n};return E5.runKernel(X2,c,l)}});function K9(e,t){return q9(e,t,"left")}var X9=B5({maxPool_:function(e,t,n,r,a){var i=L5(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=X8(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F$(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),F$(j8(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),K8("maxPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=E5.runKernel(o2,u,c);return s?X8(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var Y9=B5({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=L5(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=X8(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),F$(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),F$("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),K8("maxPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},h=E5.runKernel(u2,c,l);return u?X8(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var J9=B5({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=L5(e,"x","maxPoolWithArgmax"),o={x:i},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},u=E5.runKernel(l2,o,s);return{result:u[0],indexes:u[1]}}});var Z9=B5({maximum_:function(e,t){var n=L5(e,"a","maximum"),r=L5(t,"b","maximum"),a=S(v5(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=h8(n,"int32"),r=h8(r,"int32")),z7(n.shape,r.shape);var i={a:n,b:r};return E5.runKernel(i2,i)}});var Q9=B5({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=L5(e,"x","mean"),a={x:r},i={axis:t,keepDims:n};return E5.runKernel(h2,a,i)}});function $9(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(p0(e),"complex64"===t){var n=$9(e,"float32"),r=$9(e,"float32");return W5(n,r)}var a=l0(L$(e),t);return E5.makeTensor(a,e,t)}function eee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(p0(e),"complex64"===t){var n=eee(e,"float32"),r=$9(e,"float32");return W5(n,r)}var a=c0(L$(e),t);return E5.makeTensor(a,e,t)}function tee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var i=L5(e,"x","meshgrid",e instanceof n5?e.dtype:"float32");if(void 0===t)return[i];var o=L5(t,"y","meshgrid",t instanceof n5?t.dtype:"float32"),s=L$(i.shape),u=L$(o.shape);return"xy"===a?(i=X8(i,[1,-1]),o=X8(o,[-1,1]),[Q8(eee([u,1],i.dtype),i),Q8(o,eee([1,s],o.dtype))]):(i=X8(i,[-1,1]),o=X8(o,[1,-1]),[Q8(i,eee([1,u],i.dtype)),Q8(eee([s,1],o.dtype),o)])}var nee=B5({minimum_:function(e,t){var n=L5(e,"a","minimum"),r=L5(t,"b","minimum"),a=S(v5(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=h8(n,"int32"),r=h8(r,"int32")),z7(n.shape,r.shape);var i={a:n,b:r};return E5.runKernel(f2,i)}});var ree=B5({mirrorPad_:function(e,t,n){F$("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=L5(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");F$(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){F$(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),F$(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return E5.runKernel(d2,u,s)}});var aee=B5({mod_:function(e,t){var n=L5(e,"a","mod"),r=L5(t,"b","mod"),a=S(v5(n,r),2),i={a:n=a[0],b:r=a[1]};return E5.runKernel(v2,i)}});var iee=B5({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=j$(t,(e=L5(e,"x","moments")).shape),a=Q9(e,r,n),i=a.shape;n||(i=Z7(a.shape,r));var o=s9(P9(h8(e,"float32"),X8(a,i))),s=Q9(o,r,n);return{mean:a,variance:s}}});var oee=B5({multiRNNCell_:function(e,t,n,r){for(var a=L5(t,"data","multiRNNCell"),i=z5(n,"c","multiRNNCell"),o=z5(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],o[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var h=[],p=[],f=0;f<u.length;f+=2)h.push(u[f]),p.push(u[f+1]);return[h,p]}});var see=B5({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=L5(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s=1===o?X8(a,[1,-1]):a,u={logits:s},c={numSamples:t,seed:n,normalized:r},l=E5.runKernel(m2,u,c);return 1===o?X8(l,[l.size]):l}});var uee=B5({notEqual_:function(e,t){var n=L5(e,"a","notEqual","string_or_numeric"),r=L5(t,"b","notEqual","string_or_numeric"),a=S(v5(n,r),2);n=a[0],r=a[1],z7(n.shape,r.shape);var i={a:n,b:r};return E5.runKernel(b2,i)}});var cee=B5({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var i=L5(e,"indices","oneHot","int32"),o={indices:i},s={dtype:a,depth:t,onValue:n,offValue:r};return E5.runKernel(N2,o,s)}});var lee=B5({onesLike_:function(e){var t={x:L5(e,"x","onesLike")};return E5.runKernel(I2,t)}});var hee=B5({outerProduct_:function(e,t){var n=L5(e,"v1","outerProduct"),r=L5(t,"v2","outerProduct");F$(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=X8(n,[-1,1]),i=X8(r,[1,-1]);return Q8(a,i)}});var pee=B5({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=L5(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return E5.runKernel(T2,i,a)}});var fee=B5({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return F$(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),pee(e,[t],n)}});var dee=B5({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return F$(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),pee(e,t,n)}});var vee=B5({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return F$(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),pee(e,t,n)}});var mee=B5({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return F$(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),pee(e,t,n)}});var gee=B5({spaceToBatchND_:function(e,t,n){var r=L5(e,"x","spaceToBatchND");F$(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),F$(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),F$(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return E5.runKernel(i3,a,i)}});var yee=B5({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=L5(e,"x","maxPool"),u=s,c=!1;3===s.rank&&(c=!0,u=X8(s,[1,s.shape[0],s.shape[1],s.shape[2]])),F$(j8(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var l,h=O8(u.shape,t,i,a,r),p=[h.dilationHeight,h.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([h.filterHeight,h.filterWidth],p):[[0,0],[0,0]];var f=1===p[0]&&1===p[1],d=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[u,c]}([h.inHeight,h.inWidth],p,l),v=S(d,2),m=v[0],g=v[1],y=f?r:"valid",b=f?u:gee(u,p,m),x=("avg"===n?function(){return Y8(b,t,i,y,o)}:function(){return X9(b,t,i,y,o)})(),k=f?x:r7(x,p,g);return c?X8(k,[k.shape[1],k.shape[2],k.shape[3]]):k}});var bee=B5({prelu_:function(e,t){var n={x:L5(e,"x","prelu"),alpha:L5(t,"alpha","prelu")};return E5.runKernel(C2,n)}});var xee=B5({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=L5(e,"x","prod");"bool"===r.dtype&&(r=h8(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return E5.runKernel(A2,a,i)}});var kee=B5({raggedGather_:function(e,t,n,r){var a={paramsNestedSplits:e.map((function(e,t){return L5(e,"tensors".concat(t),"raggedGather","int32")})),paramsDenseValues:L5(t,"paramsDenseValues","raggedGather"),indices:L5(n,"indices","raggedGather","int32")},i={outputRaggedRank:r},o=E5.runKernel(R2,a,i);return{outputNestedSplits:o.slice(0,o.length-1),outputDenseValues:o[o.length-1]}}});var wee=B5({raggedRange_:function(e,t,n){var r=L5(e,"starts","raggedRange"),a={starts:r,limits:L5(t,"limits","raggedRange",r.dtype),deltas:L5(n,"deltas","raggedRange",r.dtype)},i=E5.runKernel(_2,a);return{rtNestedSplits:i[0],rtDenseValues:i[1]}}});var Iee=B5({raggedTensorToTensor_:function(e,t,n,r,a){var i=L5(e,"shape","raggedTensorToTensor","int32"),o=L5(t,"values","raggedTensorToTensor"),s={shape:i,values:o,defaultValue:L5(n,"defaultValue","raggedTensorToTensor",o.dtype),rowPartitionTensors:r.map((function(e,t){return L5(e,"tensors".concat(t),"raggedTensorToTensor","int32")}))},u={rowPartitionTypes:a};return E5.runKernel(O2,s,u)}});var Nee=B5({rand_:function(e,t,n){p0(e);var r=L$(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return E5.makeTensor(a,e,n)}}),See={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,i&&("object"==s(i)&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.alea=i}(0,e,!1)}(See);var Tee=See.exports,Eee={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==s(i)&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xor128=i}(0,e,!1)}(Eee);var Cee=Eee.exports,Aee={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==s(i)&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xorwow=i}(0,e,!1)}(Aee);var Ree=Aee.exports,_ee={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.x&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xorshift7=i}(0,e,!1)}(_ee);var Oee=_ee.exports,Fee={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.X&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xor4096=i}(0,e,!1)}(Fee);var Dee=Fee.exports,Mee={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==s(i)&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.tychei=i}(0,e,!1)}(Mee);var Lee=Mee.exports,zee={exports:{}};!function(e){!function(t,n,r){var a,i=256,o=r.pow(i,6),u=r.pow(2,52),c=2*u,l=255;function h(e,s,l){var h=[],g=v(d((s=1==s?{entropy:!0}:s||{}).entropy?[e,m(n)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(i):(e=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(e)),m(e)}catch(e){var r=t.navigator,o=r&&r.plugins;return[+new Date,t,o,t.screen,m(n)]}}():e,3),h),y=new p(h),b=function(){for(var e=y.g(6),t=o,n=0;e<u;)e=(e+n)*i,t*=i,n=y.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,v(m(y.S),n),(s.pass||l||function(e,t,n,a){return a&&(a.S&&f(a,y),e.state=function(){return f(y,{})}),n?(r.random=e,t):e})(b,g,"global"in s?s.global:this==r,s.state)}function p(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<i;)s[a]=a++;for(a=0;a<i;a++)s[a]=s[o=l&o+e[a%n]+(t=s[a])],s[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,s=r.S;e--;)t=s[a=l&a+1],n=n*i+s[l&(s[a]=s[o=l&o+t])+(s[o]=t)];return r.i=a,r.j=o,n})(i)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function d(e,t){var n,r=[],a=s(e);if(t&&"object"==a)for(n in e)try{r.push(d(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function v(e,t){for(var n,r=e+"",a=0;a<r.length;)t[l&a]=l&(n^=19*t[l&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(v(r.random(),n),e.exports){e.exports=h;try{a=require("crypto")}catch(e){}}else r.seedrandom=h}("undefined"!=typeof self?self:n,[],Math)}(zee);var Pee=zee.exports,Bee=Tee,Wee=Cee,Uee=Ree,Vee=Oee,Gee=Dee,jee=Lee,Hee=Pee;Hee.alea=Bee,Hee.xor128=Wee,Hee.xorwow=Uee,Hee.xorshift7=Vee,Hee.xor4096=Gee,Hee.tychei=jee;var qee=Hee;function Kee(){return 32===E5.backend.floatPrecision()?.001:.1}function Xee(e,t,n){var r=!0;if((U4(e)||U4(t))&&(r=!1),U4(e)&&U4(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: ".concat(a,". ")+"Expected: ".concat(i))}if(Array.isArray(e)&&Array.isArray(t)){var o=F5(e),s=F5(t);if(!P$(o,s))throw new Error("Arrays have different shapes. "+"Actual: [".concat(o,"]. Expected: [").concat(s,"]"))}var u=U4(e)?e:V4(e),c=U4(t)?t:V4(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: ".concat(u.length," vs ")+"expected: ".concat(c.length,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."));for(var l=0;l<c.length;++l){var h=u[l],p=c[l];if(!n(h,p))throw new Error("Arrays differ: actual[".concat(l,"] = ").concat(h,", expected[").concat(l,"] = ").concat(p,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."))}"undefined"!=typeof expect&&expect().nothing()}function Yee(e,t,n){if(null==n&&(n=Kee()),!Jee(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t));"undefined"!=typeof expect&&expect().nothing()}function Jee(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function Zee(){return(Zee=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.play();case 2:if(!("requestVideoFrameCallback"in t)){e.next=5;break}return e.next=5,new Promise((function(e){t.requestVideoFrameCallback(e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qee={__proto__:null,TEST_EPSILON_FLOAT16:.1,createVideoElement:function(e){var t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise((function(e){t.addEventListener("loadeddata",(function(n){return e(t)})),t.load()}))},encodeStrings:function e(t){for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?e(r):t[n]=B4(r)}return t},expectArrayBuffersEqual:function(e,t){var n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length "+"".concat(r.length,", but it was ").concat(n.length));for(var a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ")+"".concat(r[a]," but got ").concat(n[a]," instead"))},expectArraysClose:function(e,t,n){return null==n&&(n=Kee()),Xee(e,t,(function(e,t){return Jee(e,t,n)}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return $$(e)||$$(e[0])||$$(t)||$$(t[0])?Xee(e,n,(function(e,t){return e==t})):Xee(e,t,(function(e,t){return Jee(e,t,0)}))},expectNumbersClose:Yee,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()})),"undefined"!=typeof expect&&expect().nothing()},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))},play:function(e){return Zee.apply(this,arguments)},testEpsilon:Kee},$ee=function(){function e(t,n,r,a,i){l(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=qee.alea(o.toString())}return p(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),ete=function(){function e(t,n,r,a){l(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=qee.alea(i.toString()),this.randn=new $ee(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return p(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),tte=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(l(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"==typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=qee.alea(i)}return p(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var nte=B5({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(p0(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new ete(t,n,r,a),o=l8(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var rte=B5({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(p0(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new $ee(t,n,r,!1,a),o=l8(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var ate=B5({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return rte(e,0,1,t,n)}});var ite=B5({randomUniform_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;p0(e);for(var i=l8(e,r),o=new tte(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var ote=B5({randomUniformInt_:function(e,t,n,r){return ite(e,t,n,"int32",r)}});function ste(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return E5.runKernel(F2,{},a)}var ute=B5({real_:function(e){var t={input:L5(e,"input","real")};return E5.runKernel(D2,t)}});var cte=B5({reciprocal_:function(e){var t={x:L5(e,"x","reciprocal")};return E5.runKernel(M2,t)}});var lte=B5({relu_:function(e){var t={x:L5(e,"x","relu")};return E5.runKernel(L2,t)}});var hte=B5({relu6_:function(e){var t={x:L5(e,"x","relu6")};return E5.runKernel(V2,t)}});var pte=B5({reverse_:function(e,t){var n={x:L5(e,"x","reverse")},r={dims:t};return E5.runKernel(G2,n,r)}});var fte=B5({reverse1d_:function(e){var t=L5(e,"x","reverse");return F$(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),pte(t,0)}});var dte=B5({reverse2d_:function(e,t){var n=L5(e,"x","reverse");return F$(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),pte(n,t)}});var vte=B5({reverse3d_:function(e,t){var n=L5(e,"x","reverse");return F$(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),pte(n,t)}});var mte=B5({reverse4d_:function(e,t){var n=L5(e,"x","reverse");return F$(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),pte(n,t)}});var gte=B5({round_:function(e){var t={x:L5(e,"x","round")};return E5.runKernel(j2,t)}});var yte=B5({rsqrt_:function(e){var t={x:L5(e,"x","rsqrt","float32")};return E5.runKernel(H2,t)}});var bte=B5({selu_:function(e){var t={x:L5(e,"x","selu")};return E5.runKernel(J2,t)}});var xte=B5({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=L5(e,"x","separableConv2d"),u=L5(t,"depthwiseFilter","separableConv2d"),c=L5(n,"pointwiseFilter","separableConv2d"),l=s,h=!1;if(3===s.rank&&(h=!0,l=X8(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");F$(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),F$(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),F$(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),F$(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")})),F$(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")}));var p=u.shape[2],f=u.shape[3];F$(c.shape[2]===p*f,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(p*f,", ")+"but got ".concat(c.shape[2],".")}));var d=O7(l,u,r,a,o,i),v=1,m=b7(d,c,v,"valid",o);return h?X8(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function kte(){return kte=c(o().mark((function e(t,n){var r,a,i,s,u,c,l,h,p,f,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=L5(t,"x","setdiff1d"),a=L5(n,"y","setdiff1d"),F$(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),F$(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),F$(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return i=e.sent,e.next=10,a.data();case 10:for(s=e.sent,u=new Set(s),c=0,l=0;l<i.length;l++)u.has(i[l])||c++;for(h=new $4([c],r.dtype),p=new $4([c],"int32"),f=0,d=0;f<i.length;f++)u.has(i[f])||(h.values[d]=i[f],p.values[d]=f,d++);return e.abrupt("return",[h.toTensor(),p.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),kte.apply(this,arguments)}var wte=function(e,t){return kte.apply(this,arguments)};var Ite=B5({sign_:function(e){var t={x:L5(e,"x","sign")};return E5.runKernel(e3,t)}});var Nte=B5({sin_:function(e){var t={x:L5(e,"x","sin","float32")};return E5.runKernel(Q2,t)}});var Ste=B5({sinh_:function(e){var t={x:L5(e,"x","sinh")};return E5.runKernel($2,t)}});var Tte=B5({slice1d_:function(e,t,n){var r=L5(e,"x","slice1d");return F$(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),e7(r,[t],[n])}});var Ete=B5({slice2d_:function(e,t,n){var r=L5(e,"x","slice2d");return F$(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),e7(r,t,n)}});var Cte=B5({slice3d_:function(e,t,n){var r=L5(e,"x","slice3d");return F$(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),e7(r,t,n)}});var Ate=B5({slice4d_:function(e,t,n){var r=L5(e,"x","slice4d");return F$(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),e7(r,t,n)}});var Rte=B5({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=L5(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return E5.runKernel(s3,r,a)}});var _te=B5({fft_:function(e){F$("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return E5.runKernel(R1,t)}});var Ote=B5({ifft_:function(e){F$("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return E5.runKernel(U1,t)}});var Fte=B5({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=X8(e,[r,n]);t=Ote(a)}else{var i=[r,2*(n-1)],o=X8(ute(e),[r,n]),s=X8(k9(e),[r,n]),u=pte(e7(o,[0,1],[r,n-2]),1),c=g8(pte(e7(s,[0,1],[r,n-2]),1),i9(-1)),l=Z8([o,u],1),h=Z8([s,c],1),p=X8(W5(l,h),[i[0],i[1]]);t=Ote(p)}if(t=ute(t),3===e.rank&&0!==e.shape[0]){var f=t,d=e.shape[0];t=X8(t,[d,t.shape[0]/d,t.shape[1]]),f.dispose()}return t}});var Dte=B5({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=L5(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return E5.runKernel(o3,a,i)}});var Mte=B5({rfft_:function(e,t){F$("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=e7(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=Z8([e,$9(s)],e.shape.length-1),r=t}else n=e;var u=U7(n),c=X8(W5(n,u),[a,r]),l=_te(c),h=Math.floor(r/2)+1,p=ute(l),f=k9(l),d=Dte(p,[h,r-h],p.shape.length-1),v=Dte(f,[h,r-h],f.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=h,X8(W5(d[0],v[0]),m)}});var Lte=B5({squaredDifference_:function(e,t){var n=L5(e,"a","squaredDifference"),r=L5(t,"b","squaredDifference"),a=S(v5(n,r),2);n=a[0],r=a[1],z7(n.shape,r.shape);var i={a:n,b:r};return E5.runKernel(f3,i,{})}});var zte=B5({squeeze_:function(e,t){var n=L5(e,"x","squeeze","string_or_numeric");return X8(n,H$(n.shape,t).newShape)}});var Pte=B5({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=z5(e,"tensors","stack","string_or_numeric");F$(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&F$(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return E5.runKernel(S2,r,a)}});var Bte=B5({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=L5(e,"x","step"),r={x:n},a={alpha:t};return E5.runKernel(_3,r,a)}});var Wte=B5({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=L5(e,"x","stridedSlice","string_or_numeric"),l={x:c},h={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return E5.runKernel(m3,l,h)}});var Ute=B5({tan_:function(e){var t={x:L5(e,"x","tan","float32")};return E5.runKernel(k3,t)}});function Vte(e,t){M$(e);var n=F5(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return U5(e,null,n,t)}function Gte(e,t,n){if(M$(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=F5(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return U5(e,t,r,n)}function jte(e,t,n){if(M$(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=F5(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return U5(e,t,r,n)}function Hte(e,t,n){if(M$(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=F5(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return U5(e,t,r,n)}function qte(e,t,n){if(M$(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=F5(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return U5(e,t,r,n)}function Kte(e,t,n){if(M$(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=F5(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return U5(e,t=t||r,r,n)}function Xte(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function Yte(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}Xte(n,t,e)}function Jte(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:L$(t.shape)/u,sliceSize:o,strides:[].concat(T(i0(n.slice(0,a))),[1]),outputSize:L$(n)}}var Zte={__proto__:null,calculateShapes:Jte,validateInput:Yte,validateUpdateShape:Xte};var Qte=B5({tensorScatterUpdate_:function(e,t,n){var r=L5(e,"tensor","tensorScatterupdate"),a=L5(t,"indices","tensorScatterupdate","int32"),i=L5(n,"updates","tensorScatterupdate");if(Yte(i,a,r.shape),r.dtype!==i.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(i.dtype,"."));var o={tensor:r,indices:a,updates:i};return E5.runKernel(K2,o,{})}});var $te=B5({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=L5(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=E5.runKernel(N3,i,o),u=S(s,2),c=u[0],l=u[1];return{values:c,indices:l}}});var ene=B5({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(p0(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new $ee(t,n,r,!0,a),o=l8(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var tne=B5({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=L5(e,"x","unique","string_or_numeric");F$(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=E5.runKernel(E3,r,a),o=S(i,2),s=o[0],u=o[1];return{values:s,indices:u}}});var nne=B5({unsortedSegmentSum_:function(e,t,n){var r=L5(e,"x","unsortedSegmentSum"),a=L5(t,"segmentIds","unsortedSegmentSum","int32");F$(B$(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return E5.runKernel(A3,i,o)}});var rne=B5({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=L5(e,"x","unstack","string_or_numeric");F$(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return E5.runKernel(C3,r,a)}});function ane(e,t){return q9(e,t,"right")}function ine(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return E5.makeVariable(e,t,n,r)}function one(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=l8(e,"int32"),i=l8([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}function sne(){return(sne=c(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L5(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=one(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var une=function(e){return sne.apply(this,arguments)};function cne(){return cne=c(o().mark((function e(t,n,r){var a,i,s,u,c,l,h,p,f,d,v,m,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=L5(t,"tensor","boolMask"),i=L5(n,"mask","boolMask","bool"),s=null==r?0:r,u=i.rank,c=a.shape,F$(u>0,(function(){return"mask cannot be scalar"})),D$(c.slice(s,s+u),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,h=s;h<s+u;h++)l*=c[h];return p=c.slice(0,s).concat([l],c.slice(s+u)),f=X8(a,p),d=X8(i,[-1]),e.next=14,une(d);case 14:return v=e.sent,m=zte(v,[1]),g=y9(f,m,s),t!==a&&a.dispose(),n!==i&&i.dispose(),m.dispose(),f.dispose(),d.dispose(),v.dispose(),e.abrupt("return",g);case 24:case"end":return e.stop()}}),e)}))),cne.apply(this,arguments)}var lne=function(e,t,n){return cne.apply(this,arguments)};var hne=B5({transpose_:function(e,t,n){var r=L5(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),F$(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){F$(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return"complex64"===r.dtype?X5((function(){var e=ute(r),t=k9(r);return e=E5.runKernel(T3,{x:e},i),t=E5.runKernel(T3,{x:t},i),n&&(t=M9(t)),W5(e,t)})):E5.runKernel(T3,a,i)}});var pne=B5({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=L5(e,"v","movingAverage"),o=L5(t,"x","movingAverage"),s=L5(n,"decay","movingAverage");m5(i,o),F$(P$(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=i9(1),c=P9(u,s),l=g8(P9(o,i),c);if(a){F$(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var h=L5(r,"step","movingAverage");l=m8(l,P9(u,a9(s,h)))}return d8(i,l)}});var fne=B5({scatterND_:function(e,t,n){p0(n);var r=L5(e,"indices","scatterND","int32"),a=L5(t,"updates","scatterND");Yte(a,r,n);var i={indices:r,updates:a},o={shape:n};return E5.runKernel(q2,i,o)}});function dne(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var vne=B5({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;p0(n);var a=L5(e,"sparseIndices","sparseToDense","int32"),i=L5(t,"sparseValues","sparseToDense","string_or_numeric"),o=L5(r,"defaultValue","sparseToDense",i.dtype);dne(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return E5.runKernel(p3,s,u)}});var mne=B5({gatherND_:function(e,t){var n=L5(t,"indices","gatherND","int32"),r={params:L5(e,"x","gatherND","string_or_numeric"),indices:n};return E5.runKernel(z1,r)}});var gne=B5({dropout_:function(e,t,n,r){var a=L5(e,"x","dropout");if(F$("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),F$(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof n5?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(P$(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=m8(g9(d8(ite(i,0,1,"float32",r),o)),o);return g8(a,s)}});function yne(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function bne(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Vte(a,"float32")}function xne(){return xne=c(o().mark((function e(t,n){var r,a,i,s,u,c,l,h,p,f,d,v,m,g,y,b=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:1,a=L5(t,"predictions","inTopK"),i=L5(n,"targets","inTopK"),F$(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),F$(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),D$(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),s=a.shape[a.shape.length-1],F$(r>0&&r<=s,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(s,"), but got ").concat(r)})),e.next=10,a.data();case 10:return u=e.sent,e.next=13,i.data();case 13:c=e.sent,l=u.length/s,h=s,p=q$("bool",l),f=0;case 17:if(!(f<l)){e.next=35;break}for(d=f*h,v=u.subarray(d,d+h),m=[],g=0;g<v.length;g++)m.push({value:v[g],index:g});m.sort((function(e,t){return t.value-e.value})),p[f]=0,y=0;case 25:if(!(y<r)){e.next=32;break}if(m[y].index!==c[f]){e.next=29;break}return p[f]=1,e.abrupt("break",32);case 29:y++,e.next=25;break;case 32:f++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",V5(p,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),xne.apply(this,arguments)}var kne=function(e,t){return xne.apply(this,arguments)};var wne=B5({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=X8(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=X8(t,[1,t.shape[0],t.shape[1],t.shape[2]])),F$(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),F$(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),F$(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];F$(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")})),F$(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must ")+"match output depth for filter (".concat(n[3],").")})),K8("conv2dDerFilter",a,o);var h={x:s,dy:u},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return E5.runKernel(t1,h,p)}});function Ine(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return g8(e,Bte(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Nne(e,t){var n=t,r=L7(e.shape,t.shape);return r.length>0&&(n=u9(n,r)),X8(n,e.shape)}function Sne(e,t,n,r){if("linear"===t)return e;if("relu"===t)return lte(e);if("elu"===t)return H7(e);if("relu6"===t)return hte(e);if("prelu"===t)return bee(e,n);if("leakyrelu"===t)return S9(e,r);if("sigmoid"===t)return $8(e);throw new Error("Unknown fused activation ".concat(t,"."))}var Tne=function(e,t){return!(e>0)||"linear"===t};var Ene=B5({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,h=e.activation,p=void 0===h?"linear":h,f=e.preluActivationWeights,d=e.leakyreluAlpha;if(p=p||"linear",!1===Tne(E5.state.gradientDepth,p)){F$("NHWC"===o,(function(){return"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var v=b7(t,n,r,a,o,u,c);return null!=l&&(v=d8(v,l)),Sne(v,p,f,d)}var m=L5(t,"x","conv2d","float32"),g=L5(n,"filter","conv2d","float32"),y=m,b=!1;3===m.rank&&(b=!0,y=X8(m,[1,m.shape[0],m.shape[1],m.shape[2]])),F$(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),F$(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(g.rank,".")})),K8("fused conv2d",a,c);var x="NHWC"===o?y.shape[3]:y.shape[1];F$(g.shape[2]===x,(function(){return"Error in conv2d: depth of input (".concat(x,") must match ")+"input depth for filter ".concat(g.shape[2],".")})),F$(j8(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")}));var k,w,I=D8(y.shape,g.shape,r,u,a,c);if(null!=l){var N=S(v5(k=L5(l,"bias","fused conv2d"),m),1);k=N[0],"NHWC"===o?z7(I.outShape,k.shape):(F$(k.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(k.shape.length,".")})),F$(0===k.shape.length||k.shape[0]===I.outChannels||1===k.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(k.shape,") is not ")+"compatible with the number of output channels "+"(".concat(I.outChannels,")")})))}if(null!=f){var T=f.shape;if(F$(T.length<=1||3===T.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(T.length,".")})),1===T.length)F$(1===T[0]||T[0]===I.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(T,") is not compatible with the number of output ")+"channels (".concat(I.outChannels,").")}));else if(3===T.length)try{z7(T,I.outShape)}catch(e){var E="Error in fused conv2d: PReLU activation weights (".concat(T,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(I.outShape,").");throw Error(E)}w=L5(f,"prelu weights","fused conv2d")}var C=function(e,t){F$("NHWC"===o,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var n=S(t,4),i=n[0],s=n[1],c=n[2],l=n[3],h=Ine(e,c,p);F$(G8(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var f=[k7(s.shape,h,i,r,a),wne(s,h,i.shape,r,a)];if(null!=l){var d=Nne(l,h);f.push(d)}return f},A={x:y,filter:g,bias:k,preluActivationWeights:w},R={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:p,leakyreluAlpha:d};if(null==l){var _=F9((function(e,t,n){var r=E5.runKernel(M3,A,R);return n([t,e,r]),b&&(r=X8(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:C}}));return _(y,g)}var O=F9((function(e,t,n,r){var a=E5.runKernel(M3,A,R);return r([t,e,a,n]),b&&(a=X8(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:C}}));return O(y,g,k)}});var Cne=B5({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=X8(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=X8(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return E5.runKernel(d1,c,l)}});var Ane=B5({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=X8(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},h=E5.runKernel(v1,c,l);return u?X8(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var Rne=B5({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,h=e.activation,p=void 0===h?"linear":h,f=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===Tne(E5.state.gradientDepth,p)){var v=O7(t,n,r,a,o,u,c);return null!=l&&(v=d8(v,l)),Sne(v,p,f,d)}var m=L5(t,"x","depthwiseConv2d","float32"),g=L5(n,"filter","depthwiseConv2d","float32"),y=m,b=!1;3===m.rank&&(b=!0,y=X8(m,[1,m.shape[0],m.shape[1],m.shape[2]])),F$(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),F$(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(g.rank,".")})),F$(y.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(g.shape[2],".")})),null==u&&(u=[1,1]),F$(j8(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),K8("fused depthwiseConv2d",a,c);var x,k,w=D8(y.shape,g.shape,r,u,a,c,!0);if(null!=l){var I=S(v5(x=L5(l,"bias","fused conv2d"),m),1);x=I[0],z7(w.outShape,x.shape)}null!=f&&(k=L5(f,"prelu weights","fused depthwiseConv2d"));var N=function(e,t){F$(G8(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=S(t,4),i=n[0],o=n[1],s=n[2],l=n[3],h=Ine(e,s,p),f=Ane(o.shape,h,i,r,a,u,c),d=Cne(o,h,i.shape,r,a,u,c);return null!=l?[f,d,Nne(x,h)]:[f,d]},T={x:y,filter:g,bias:x,preluActivationWeights:k},E={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:p,leakyreluAlpha:d};if(null==l){var C=F9((function(e,t,n){var r=E5.runKernel(L3,T,E);return n([t,e,r]),b&&(r=X8(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:N}}));return C(y,g)}var A=F9((function(e,t,n,r){var a=E5.runKernel(L3,T,E);return r([t,e,a,n]),b&&(a=X8(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:N}}));return A(y,g,x)}});var _ne=B5({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,c=void 0===u?"linear":u,l=e.preluActivationWeights,h=e.leakyreluAlpha,p=void 0===h?.2:h;if(!1===Tne(E5.state.gradientDepth,c)){var f=Q8(t,n,a,o);return null!=s&&(f=d8(f,s)),Sne(f,c,l,p)}var d=L5(t,"a","fused matMul"),v=L5(n,"b","fused matMul"),m=S(v5(d,v),2);d=m[0],v=m[1];var g=a?d.shape[d.rank-2]:d.shape[d.rank-1],y=o?v.shape[v.rank-1]:v.shape[v.rank-2],b=a?d.shape[d.rank-1]:d.shape[d.rank-2],x=o?v.shape[v.rank-2]:v.shape[v.rank-1],k=d.shape.slice(0,-2),w=v.shape.slice(0,-2),I=L$(k),N=L$(w);F$(g===y,(function(){return"Error in fused matMul: inner shapes (".concat(g,") and (")+"".concat(y,") of Tensors with shapes ").concat(d.shape," and ")+"".concat(v.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var T,E,C=z7(d.shape.slice(0,-2),v.shape.slice(0,-2)).concat([b,x]),A=X8(d,a?[I,g,b]:[I,b,g]),R=X8(v,o?[N,x,y]:[N,y,x]);null!=s&&(T=S(v5(T=L5(s,"bias","fused matMul"),d),1)[0],z7(C,T.shape)),null!=l&&(E=L5(l,"prelu weights","fused matMul"));var _=function(e,t){var n,r,i=S(t,4),u=i[0],l=i[1],h=i[2],p=i[3],f=Ine(X8(e,h.shape),h,c);return a||o?!a&&o?(n=Q8(f,l,!1,!1),r=Q8(f,u,!0,!1)):a&&!o?(n=Q8(l,f,!1,!0),r=Q8(u,f,!1,!1)):(n=Q8(l,f,!0,!0),r=Q8(f,u,!0,!0)):(n=Q8(f,l,!1,!0),r=Q8(u,f,!0,!1)),null!=s?[n,r,Nne(p,f)]:[n,r]},O={a:A,b:R,bias:T,preluActivationWeights:E},F={transposeA:a,transposeB:o,activation:c,leakyreluAlpha:p};if(null==s){var D=F9((function(e,t,n){var r=E5.runKernel(D3,O,F);return n([e,t,r]),{value:X8(r,C),gradFunc:_}}));return D(A,R)}var M=F9((function(e,t,n,r){var a=E5.runKernel(D3,O,F);return r([e,t,a,n]),{value:X8(a,C),gradFunc:_}}));return M(A,R,T)}}),One={__proto__:null,conv2d:Ene,depthwiseConv2d:Rne,matMul:_ne};var Fne=B5({hammingWindow_:function(e){return bne(e,.54,.46)}});var Dne=B5({hannWindow_:function(e){return bne(e,.5,.5)}});var Mne=B5({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(e7(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Z8([e7(e,i,t-s),f7([s],a)]);o.push(u),i+=n}return 0===o.length?Gte([],[0,t]):X8(Z8(o),[o.length,t])}});var Lne=B5({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dne;null==r&&(r=yne(t));var i=Mne(e,t,n),o=g8(i,a(t));return Mte(o,r)}});var zne=B5({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=L5(e,"image","cropAndResize"),s=L5(t,"boxes","cropAndResize","float32"),u=L5(n,"boxInd","cropAndResize","int32"),c=s.shape[0];F$(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),F$(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),F$(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),F$(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),F$(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),F$("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:u},h={method:a,extrapolationValue:i,cropSize:r},p=E5.runKernel(l1,l,h);return p}});var Pne=B5({flipLeftRight_:function(e){var t=L5(e,"image","flipLeftRight","float32");F$(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return E5.runKernel(O1,n,{})}});var Bne=B5({grayscaleToRGB_:function(e){var t=L5(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];F$(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),F$(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,v9(t,a)}});var Wne=B5({rgbToGrayscale_:function(e){var t=L5(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];F$(t.rank>=2,(function(){return"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),F$(3===r,(function(){return"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(r,".")}));var a,i=t.dtype,o=h8(t,"float32"),s=Vte([.2989,.587,.114]);switch(t.rank){case 2:a=j7("ij,j->i",o,s);break;case 3:a=j7("ijk,k->ij",o,s);break;case 4:a=j7("ijkl,l->ijk",o,s);break;case 5:a=j7("ijklm,m->ijkl",o,s);break;case 6:a=j7("ijklmn,n->ijklm",o,s);break;default:throw new Error("Not a valid tensor rank.")}return a=f9(a,-1),h8(a,i)}});var Une=B5({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=L5(e,"image","rotateWithOffset","float32");F$(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},s=E5.runKernel(F3,i,o);return s}});function Vne(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),F$(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),F$(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),F$(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),F$(1===t.rank,(function(){return"scores must be a 1D tensor"})),F$(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),F$(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Gne=B5({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=L5(e,"boxes","nonMaxSuppression","float32"),o=L5(t,"scores","nonMaxSuppression","float32"),s=Vne(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return E5.runKernel(x2,{boxes:i,scores:o},u)}});function jne(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||Hne)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Hne(e,t){return e>t?1:e<t?-1:0}function qne(e,t,n,r,a){return Yne(e,t,n,r,a,0)}function Kne(e,t,n,r,a,i){return Yne(e,t,n,r,a,0,!1,i,!0)}function Xne(e,t,n,r,a,i){return Yne(e,t,n,r,a,i,!0)}function Yne(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(Qne);for(var h=i>0?-.5/i:0,p=[],f=[];p.length<n&&c.length>0;){var d=c.pop(),v=d.score,m=d.boxIndex,g=d.suppressBeginIndex;if(v<a)break;for(var y=!1,b=p.length-1;b>=g;--b){var x=Jne(e,m,p[b]);if(x>=r){y=!0;break}if(d.score=d.score*Zne(r,h,x),d.score<=a)break}d.suppressBeginIndex=p.length,y||(d.score===v?(p.push(m),f.push(d.score)):d.score>a&&jne(c,d,Qne))}var k=p.length,w=n-k;s&&w>0&&(p.push.apply(p,T(new Array(w).fill(0))),f.push.apply(f,T(new Array(w).fill(0))));var I={selectedIndices:p};return o&&(I.selectedScores=f),u&&(I.validOutputs=k),I}function Jne(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),h=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),f=(s-i)*(u-o),d=(h-c)*(p-l);if(f<=0||d<=0)return 0;var v=Math.max(i,c),m=Math.max(o,l),g=Math.min(s,h),y=Math.min(u,p),b=Math.max(g-v,0)*Math.max(y-m,0);return b/(f+d-b)}function Zne(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Qne(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function $ne(){return $ne=c(o().mark((function e(t,n,r){var a,i,s,u,c,l,h,p,f,d,v=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,i=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,s=L5(t,"boxes","nonMaxSuppressionAsync"),u=L5(n,"scores","nonMaxSuppressionAsync"),c=Vne(s,u,r,a,i),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,e.next=10,Promise.all([s.data(),u.data()]);case 10:return l=e.sent,h=l[0],p=l[1],f=qne(h,p,r,a,i),d=f.selectedIndices,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",Vte(d,"int32"));case 17:case"end":return e.stop()}}),e)}))),$ne.apply(this,arguments)}var ere=function(e,t,n){return $ne.apply(this,arguments)};var tre=B5({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=L5(e,"boxes","nonMaxSuppression"),s=L5(t,"scores","nonMaxSuppression"),u=Vne(o,s,n,r,a,i),c={boxes:o,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},h=E5.runKernel(w2,c,l);return{selectedIndices:h[0],selectedScores:h[1]}}});function nre(){return nre=c(o().mark((function e(t,n,r){var a,i,s,u,c,l,h,p,f,d,v,m,g=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>3&&void 0!==g[3]?g[3]:.5,i=g.length>4&&void 0!==g[4]?g[4]:Number.NEGATIVE_INFINITY,s=g.length>5&&void 0!==g[5]?g[5]:0,u=L5(t,"boxes","nonMaxSuppressionAsync"),c=L5(n,"scores","nonMaxSuppressionAsync"),l=Vne(u,c,r,a,i,s),r=l.maxOutputSize,a=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma,e.next=12,Promise.all([u.data(),c.data()]);case 12:return h=e.sent,p=h[0],f=h[1],d=Xne(p,f,r,a,i,s),v=d.selectedIndices,m=d.selectedScores,u!==t&&u.dispose(),c!==n&&c.dispose(),e.abrupt("return",{selectedIndices:Vte(v,"int32"),selectedScores:Vte(m)});case 19:case"end":return e.stop()}}),e)}))),nre.apply(this,arguments)}var rre=function(e,t,n){return nre.apply(this,arguments)};var are=B5({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=L5(e,"boxes","nonMaxSuppression"),s=L5(t,"scores","nonMaxSuppression"),u=Vne(o,s,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,h=u.scoreThreshold,p={boxes:o,scores:s},f={maxOutputSize:c,iouThreshold:l,scoreThreshold:h,padToMaxOutputSize:i},d=E5.runKernel(k2,p,f);return{selectedIndices:d[0],validOutputs:d[1]}}});function ire(){return ire=c(o().mark((function e(t,n,r){var a,i,s,u,c,l,h,p,f,d,v,m,g,y,b,x,k=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k.length>3&&void 0!==k[3]?k[3]:.5,i=k.length>4&&void 0!==k[4]?k[4]:Number.NEGATIVE_INFINITY,s=k.length>5&&void 0!==k[5]&&k[5],u=L5(t,"boxes","nonMaxSuppressionAsync"),c=L5(n,"scores","nonMaxSuppressionAsync"),l=Vne(u,c,r,a,i,null),h=l.maxOutputSize,p=l.iouThreshold,f=l.scoreThreshold,e.next=11,Promise.all([u.data(),c.data()]);case 11:return d=e.sent,v=S(d,2),m=v[0],g=v[1],y=Kne(m,g,h,p,f,s),b=y.selectedIndices,x=y.validOutputs,u!==t&&u.dispose(),c!==n&&c.dispose(),e.abrupt("return",{selectedIndices:Vte(b,"int32"),validOutputs:i9(x,"int32")});case 19:case"end":return e.stop()}}),e)}))),ire.apply(this,arguments)}var ore=function(e,t,n){return ire.apply(this,arguments)};var sre=B5({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=L5(e,"images","resizeBilinear");F$(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),F$(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),F$(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=X8(a,[1,a.shape[0],a.shape[1],a.shape[2]])),S(t,0);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=E5.runKernel(W2,s,u);return o?X8(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var ure=B5({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=L5(e,"images","resizeNearestNeighbor");F$(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),F$(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),F$("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),F$(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=X8(a,[1,a.shape[0],a.shape[1],a.shape[2]])),S(t,0);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=E5.runKernel(P2,s,u);return o?X8(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});function cre(e,t){for(var n,r,a,i,o,s,u=Vte([-1]),c=Vte([0]),l=Vte([0]),h=0;h<e.size-1;h++){n=e7(e,0,h+1),r=e7(e,h+1),o=m8(u9(n),t),s=m8(u9(r),t);var p=u9(g8(n,ste(0,n.size)));a=m8(p,u9(n));var f=f7(r.shape,n.size),d=d8(ste(0,r.size),f),v=g8(r,d);i=m8(u9(v),u9(r));var m=P9(a,i),g=P9(a,i),y=g8(o,s);l=g8(g8(y,m),g);var b=b9(l,c);c=W7(b,l,c),u=W7(b,Vte([h]),u)}return u}var lre=B5({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=L5(e,"image","threshold"),c=.2989,l=.587,h=.114,p=u.shape[0]*u.shape[1],f=g8(Vte([s]),255);if(F$(3===u.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(u.rank,".")})),F$(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(u.shape[2],".")})),F$("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(u.dtype,".")})),F$("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===u.shape[2]){var d=Dte(u,[1,1,1],-1),v=S(d,3);t=v[0],n=v[1],r=v[2];var m=g8(t,c),g=g8(n,l),y=g8(r,h);a=d8(d8(m,g),y)}else a=e;if("otsu"===i){var b=u7(h8(gte(a),"int32"),V5([]),256);f=cre(b,p)}var x=o?E9(a,f):b9(a,f),k=h8(g8(x,255),"int32");return k}});var hre=B5({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=L5(e,"image","transform","float32"),s=L5(t,"transforms","transform","float32");F$(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),F$(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),F$(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return E5.runKernel(S3,u,c)}});var pre=B5({bandPart_:function(e,t,n){var r=L5(e,"a","bandPart");F$(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a,i,o=r.shape,s=S(r.shape.slice(-2),2),u=s[0],c=s[1];"number"==typeof t?(F$(t%1==0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),F$(t<=u,(function(){return"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(u,").")})),a=L5(t<0?u:t,"numLower","bandPart")):(F$("int32"===t.dtype,(function(){return"bandPart(): numLower's dtype must be an int32."})),a=W7(T9(t,0),u,nee(t,u))),"number"==typeof n?(F$(n%1==0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")})),F$(n<=c,(function(){return"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(c,").")})),i=L5(n<0?c:n,"numUpper","bandPart")):(F$("int32"===n.dtype,(function(){return"bandPart(): numUpper's dtype must be an int32."})),i=W7(T9(n,0),c,nee(n,c)));var l=X8(ste(0,u,1,"int32"),[-1,1]),h=ste(0,c,1,"int32"),p=P9(l,h),f=U9(E9(p,a),x9(p,M9(i))),d=$9([u,c],r.dtype);return X8(Pte(rne(X8(r,[-1,u,c])).map((function(e){return W7(f,e,d)}))),o)}});var fre=B5({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,F$(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){F$(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}else t=!0,e=Dte(e,e.shape[0],0).map((function(e){return zte(e,[0])}));F$(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var i=[],o=e,s=function(e){i.push(E5.tidy((function(){var t=o[e];if(e>0)for(var n=0;n<e;++n){var r=g8(u9(g8(i[n],t)),i[n]);t=P9(t,r)}return m8(t,l9(t,"euclidean"))})))},u=0;u<e.length;++u)s(u);return t?Pte(i,0):i}});function dre(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return E5.tidy((function(){F$(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=m9(n),i=p8(e),o=Gte([[1]],[1,1]),s=p8(o),u=n>=r?r:n,c=function(e){var t=i,u=s,c=a,l=S(E5.tidy((function(){var t=e7(i,[e,e],[n-e,1]),u=l9(t),c=e7(i,[e,e],[1,1]),l=W7(b9(c,0),Gte([[-1]]),Gte([[1]])),h=P9(c,g8(l,u)),p=m8(t,h);s=1===p.shape[0]?p8(o):Z8([o,e7(p,[1,0],[p.shape[0]-1,p.shape[1]])],0);var f=M9(m8(Q8(l,h),u)),d=e7(i,[e,0],[n-e,r]),v=g8(f,s),m=hne(s);if(0===e)i=P9(d,Q8(v,Q8(m,d)));else{var g=P9(d,Q8(v,Q8(m,d)));i=Z8([e7(i,[0,0],[e,r]),g],0)}var y=hne(v),b=e7(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=P9(b,Q8(Q8(b,s),y));else{var x=P9(b,Q8(Q8(b,s),y));a=Z8([e7(a,[0,0],[n,e]),x],1)}return[s,i,a]})),3);s=l[0],i=l[1],a=l[2],Y5([t,u,c])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=e7(a,[0,0],[n,r]),i=e7(i,[0,0],[r,r])),[a,i]}))}var vre,mre=B5({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(F$(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return dre(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=rne(X8(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=S(dre(e,t),2),r=n[0],o=n[1];a.push(r),i.push(o)}));var o=X8(Pte(a,0),e.shape),s=X8(Pte(i,0),e.shape);return[o,s]}});e.Reduction=void 0,(vre=e.Reduction||(e.Reduction={}))[vre.NONE=0]="NONE",vre[vre.MEAN=1]="MEAN",vre[vre.SUM=2]="SUM",vre[vre.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS";var gre=B5({computeWeightedLoss_:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Reduction.SUM_BY_NONZERO_WEIGHTS,a=L5(t,"losses","computeWeightedLoss"),i=null;null!=n&&(i=L5(n,"weights","computeWeightedLoss"));var o=null==i?a:g8(a,i);if(r===e.Reduction.NONE)return o;if(r===e.Reduction.SUM)return u9(o);if(r===e.Reduction.MEAN){if(null==i)return Q9(o);var s=a.size/i.size,u=m8(u9(o),u9(i));return s>1?m8(u,i9(s)):u}if(r===e.Reduction.SUM_BY_NONZERO_WEIGHTS){if(null==i)return m8(u9(o),i9(a.size));var c=g8(i,eee(a.shape)),l=h8(u9(uee(c,i9(0))),"float32");return m8(u9(o),l)}throw Error("Unknown reduction: ".concat(r))}});var yre=B5({absoluteDifference_:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.Reduction.SUM_BY_NONZERO_WEIGHTS,i=L5(t,"labels","absoluteDifference"),o=L5(n,"predictions","absoluteDifference"),s=null;null!=r&&(s=L5(r,"weights","absoluteDifference")),D$(i.shape,o.shape,"Error in absoluteDifference: ");var u=y8(P9(i,o));return gre(u,s,a)}});var bre=B5({cosineDistance_:function(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.Reduction.SUM_BY_NONZERO_WEIGHTS,o=L5(t,"labels","cosineDistance"),s=L5(n,"predictions","cosineDistance"),u=null;null!=a&&(u=L5(a,"weights","cosineDistance")),D$(o.shape,s.shape,"Error in cosineDistance: ");var c=i9(1),l=P9(c,u9(g8(o,s),r,!0));return gre(l,u,i)}});var xre=B5({hingeLoss_:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.Reduction.SUM_BY_NONZERO_WEIGHTS,i=L5(t,"labels","hingeLoss"),o=L5(n,"predictions","hingeLoss"),s=null;null!=r&&(s=L5(r,"weights","hingeLoss")),D$(i.shape,o.shape,"Error in hingeLoss: ");var u=i9(1);i=P9(g8(i9(2),i),u);var c=lte(P9(u,g8(i,o)));return gre(c,s,a)}});var kre=B5({huberLoss_:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.Reduction.SUM_BY_NONZERO_WEIGHTS,o=L5(t,"labels","huberLoss"),s=L5(n,"predictions","huberLoss"),u=null;null!=r&&(u=L5(r,"weights","huberLoss")),D$(o.shape,s.shape,"Error in huberLoss: ");var c=i9(a),l=y8(P9(s,o)),h=nee(l,c),p=P9(l,h),f=d8(g8(i9(.5),s9(h)),g8(c,p));return gre(f,u,i)}});var wre=B5({logLoss_:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.Reduction.SUM_BY_NONZERO_WEIGHTS,o=L5(t,"labels","logLoss"),s=L5(n,"predictions","logLoss"),u=null;null!=r&&(u=L5(r,"weights","logLoss")),D$(o.shape,s.shape,"Error in logLoss: ");var c=i9(1),l=i9(a),h=M9(g8(o,R9(d8(s,l)))),p=g8(P9(c,o),R9(d8(P9(c,s),l))),f=P9(h,p);return gre(f,u,i)}});var Ire=B5({meanSquaredError_:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.Reduction.SUM_BY_NONZERO_WEIGHTS,i=L5(t,"labels","meanSquaredError"),o=L5(n,"predictions","meanSquaredError"),s=null;null!=r&&(s=L5(r,"weights","meanSquaredError")),D$(i.shape,o.shape,"Error in meanSquaredError: ");var u=Lte(i,o);return gre(u,s,a)}});function Nre(e,t){var n=L5(e,"labels","sigmoidCrossEntropyWithLogits"),r=L5(t,"logits","sigmoidCrossEntropyWithLogits");D$(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=lte(r),i=g8(r,n),o=_9(p9(M9(y8(r))));return d8(P9(a,i),o)}var Sre=B5({sigmoidCrossEntropy_:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.Reduction.SUM_BY_NONZERO_WEIGHTS,o=L5(t,"multiClassLabels","sigmoidCrossEntropy"),s=L5(n,"logits","sigmoidCrossEntropy"),u=null;if(null!=r&&(u=L5(r,"weights","sigmoidCrossEntropy")),D$(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),a>0){var c=i9(a),l=i9(1),h=i9(.5);o=d8(g8(o,P9(l,c)),g8(h,c))}var p=Nre(o,s);return gre(p,u,i)}});function Tre(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=F9((function(e,t,r){var a=W9(t,[n],!0),i=P9(h8(t,"float32"),a);r([e,i]);var o=M9(g8(i,e));return{value:u9(o,[n]),gradFunc:function(e,t){var r=S(t,2),a=r[0],i=r[1],o=Z7(e.shape,[n]);return[g8(X8(e,o),P9(h8(a,"float32"),p9(i))),g8(X8(e,o),P9(p9(i),h8(a,"float32")))]}}}));return r(e,t)}var Ere=B5({softmaxCrossEntropy_:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.Reduction.SUM_BY_NONZERO_WEIGHTS,o=L5(t,"onehotLabels","softmaxCrossEntropy"),s=L5(n,"logits","softmaxCrossEntropy"),u=null;if(null!=r&&(u=L5(r,"weights","softmaxCrossEntropy")),D$(o.shape,s.shape,"Error in softmaxCrossEntropy: "),a>0){var c=i9(a),l=i9(1),h=i9(o.shape[1]);o=d8(g8(o,P9(l,c)),m8(c,h))}var p=Tre(o,s);return gre(p,u,i)}});var Cre=B5({sparseFillEmptyRows_:function(e,t,n,r){var a=L5(e,"indices","sparseFillEmptyRows","int32"),i=L5(t,"values","sparseFillEmptyRows"),o=L5(n,"denseShape","sparseFillEmptyRows","int32"),s=L5(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},c=E5.runKernel(u3,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var Are=B5({sparseReshape_:function(e,t,n){var r=L5(e,"inputIndices","sparseReshape","int32"),a=L5(t,"inputShape","sparseReshape","int32"),i=L5(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=E5.runKernel(c3,o);return{outputIndices:s[0],outputShape:s[1]}}});var Rre=B5({sparseSegmentMean_:function(e,t,n){var r=L5(e,"data","sparseSegmentMean"),a=L5(t,"indices","sparseSegmentMean","int32"),i=L5(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return E5.runKernel(l3,o)}});var _re=B5({sparseSegmentSum_:function(e,t,n){var r=L5(e,"data","sparseSegmentSum"),a=L5(t,"indices","sparseSegmentSum","int32"),i=L5(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return E5.runKernel(h3,o)}});var Ore=B5({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=L5(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=L5(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},h={data:u,dataSplits:c},p=E5.runKernel(g3,h,l);return{nGrams:p[0],nGramsSplits:p[1]}}});var Fre=B5({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=L5(e,"input","stringSplit","string"),a=L5(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=E5.runKernel(y3,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});var Dre=B5({stringToHashBucketFast_:function(e,t){var n=L5(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return E5.runKernel(b3,a,r)}});var Mre=B5({staticRegexReplace_:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=L5(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return E5.runKernel(v3,{x:a},i)}}),Lre={fft:_te,ifft:Ote,rfft:Mte,irfft:Fte},zre={hammingWindow:Fne,hannWindow:Dne,frame:Mne,stft:Lne},Pre={flipLeftRight:Pne,grayscaleToRGB:Bne,resizeNearestNeighbor:ure,resizeBilinear:sre,rgbToGrayscale:Wne,rotateWithOffset:Une,cropAndResize:zne,nonMaxSuppression:Gne,nonMaxSuppressionAsync:ere,nonMaxSuppressionWithScore:tre,nonMaxSuppressionWithScoreAsync:rre,nonMaxSuppressionPadded:are,nonMaxSuppressionPaddedAsync:ore,threshold:lre,transform:hre},Bre={bandPart:pre,gramSchmidt:fre,qr:mre},Wre={absoluteDifference:yre,computeWeightedLoss:gre,cosineDistance:bre,hingeLoss:xre,huberLoss:kre,logLoss:wre,meanSquaredError:Ire,sigmoidCrossEntropy:Sre,softmaxCrossEntropy:Ere},Ure={sparseFillEmptyRows:Cre,sparseReshape:Are,sparseSegmentMean:Rre,sparseSegmentSum:_re},Vre={stringNGrams:Ore,stringSplit:Fre,stringToHashBucketFast:Dre,staticRegexReplace:Mre},Gre=new Map,jre=new Map,Hre=function(){function e(){l(this,e)}return p(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),qre=function(){function e(){l(this,e),this.classNameMap={}}return p(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function Kre(e,t,n){F$(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),F$("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+s(e.className)})),F$(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),void 0===t&&(t="Custom"),void 0===n&&(n=e.className);var r=t+">"+n;return qre.register(e),Gre.set(r,e),jre.set(e,r),e}var Xre={__proto__:null,Serializable:Hre,SerializationMap:qre,getRegisteredName:function(e){return jre.has(e)?jre.get(e):e.className},registerClass:Kre},Yre=function(e){d(s,e);var t,n,r,a,i=w(s);function s(){return l(this,s),i.apply(this,arguments)}return p(s,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return Y5(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return O9(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&Y5(this.iterations_)}},{key:"saveIterations",value:(a=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:i9(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getWeights",value:(r=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"setWeights",value:(n=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"extractIterations",value:(t=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),s}(Hre);Object.defineProperty(Yre,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Jre=function(e){d(a,e);var t,n,r=w(a);function a(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return l(this,a),(n=r.call(this)).learningRate=e,n.rho=t,n.epsilon=i,n.accumulatedGrads=[],n.accumulatedUpdates=[],null==i&&(n.epsilon=E5.backend.epsilon()),n}return p(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=E5.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:X5((function(){return U7(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:X5((function(){return U7(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;X5((function(){var e=d8(g8(o,t.rho),g8(s9(i),1-t.rho)),n=g8(m8(o9(d8(s,t.epsilon)),o9(d8(o,t.epsilon))),i),r=d8(g8(s,t.rho),g8(s9(n),1-t.rho));o.assign(e),s.assign(r);var u=d8(g8(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(Y5(this.accumulatedGrads.map((function(e){return e.variable}))),Y5(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:(n=c(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(T(this.accumulatedGrads),T(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=c(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adadelta"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),a}(Yre),Zre=function(e){d(a,e);var t,n,r=w(a);function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return l(this,a),(t=r.call(this)).learningRate=e,t.initialAccumulatorValue=n,t.accumulatedGrads=[],t}return p(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=E5.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:X5((function(){return f7(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;X5((function(){var e=d8(o,s9(i));o.assign(e);var n=d8(g8(m8(i,o9(d8(e,E5.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&Y5(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:(n=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"className",get:function(){return"Adagrad"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),a}(Yre),Qre=function(e){d(a,e);var t,n,r=w(a);function a(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return l(this,a),(i=r.call(this)).learningRate=e,i.beta1=t,i.beta2=n,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],X5((function(){i.accBeta1=i9(t).variable(),i.accBeta2=i9(n).variable()})),null==o&&(i.epsilon=E5.backend.epsilon()),i}return p(a,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);X5((function(){var r=P9(1,t.accBeta1),a=P9(1,t.accBeta2);n.forEach((function(n,i){var o=E5.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:X5((function(){return U7(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:X5((function(){return U7(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=d8(g8(u,t.beta1),g8(s,1-t.beta1)),h=d8(g8(c,t.beta2),g8(s9(s),1-t.beta2)),p=m8(l,r),f=m8(h,a);u.assign(l),c.assign(h);var d=d8(g8(m8(p,d8(o9(f),t.epsilon)),-t.learningRate),o);o.assign(d)}})),t.accBeta1.assign(g8(t.accBeta1,t.beta1)),t.accBeta2.assign(g8(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Y5(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Y5(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:(n=c(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(T(this.accumulatedFirstMoment),T(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=c(o().mark((function e(t){var n,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,X5((function(){r.accBeta1.assign(a9(r.beta1,r.iterations_+1)),r.accBeta2.assign(a9(r.beta2,r.iterations_+1))})),n=t.length/2,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adam"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),a}(Yre),$re=function(e){d(a,e);var t,n,r=w(a);function a(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return l(this,a),(i=r.call(this)).learningRate=e,i.beta1=t,i.beta2=n,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],X5((function(){i.iteration=i9(0).variable(),i.accBeta1=i9(t).variable()})),null==o&&(i.epsilon=E5.backend.epsilon()),i}return p(a,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);X5((function(){var r=P9(1,t.accBeta1),a=m8(-t.learningRate,d8(g8(t.iteration,t.decay),1));n.forEach((function(n,i){var o=E5.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:U7(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:U7(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=d8(g8(u,t.beta1),g8(s,1-t.beta1)),h=g8(c,t.beta2),p=y8(s),f=Z9(h,p);u.assign(l),c.assign(f);var d=d8(g8(m8(a,r),m8(l,d8(f,t.epsilon))),o);o.assign(d)}})),t.iteration.assign(d8(t.iteration,1)),t.accBeta1.assign(g8(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Y5(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Y5(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:(n=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"className",get:function(){return"Adamax"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),a}(Yre),eae=function(e){d(a,e);var t,n,r=w(a);function a(e){var t;return l(this,a),(t=r.call(this)).learningRate=e,t.setLearningRate(e),t}return p(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=E5.registeredVariables[n];X5((function(){var e=d8(g8(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=J5(i9(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:(n=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"className",get:function(){return"SGD"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),a}(Yre),tae=function(e){d(a,e);var t,n,r=w(a);function a(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l(this,a),(n=r.call(this,e)).learningRate=e,n.momentum=t,n.useNesterov=i,n.accumulations=[],n.m=i9(n.momentum),n}return p(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=E5.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:X5((function(){return U7(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&X5((function(){var e,n=d8(g8(t.m,i),o);e=t.useNesterov?d8(g8(t.c,d8(o,g8(n,t.m))),a):d8(g8(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&Y5(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:(n=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"className",get:function(){return"Momentum"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),a}(eae),nae=function(e){d(a,e);var t,n,r=w(a);function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(l(this,a),(t=r.call(this)).learningRate=e,t.decay=n,t.momentum=i,t.epsilon=o,t.accumulatedMeanSquares=[],t.accumulatedMoments=[],t.accumulatedMeanGrads=[],t.centered=s,null==o&&(t.epsilon=E5.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return t}return p(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=E5.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:X5((function(){return U7(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:X5((function(){return U7(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:X5((function(){return U7(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;X5((function(){var e=d8(g8(s,t.decay),g8(s9(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=d8(g8(n,t.decay),g8(o,1-t.decay)),c=m8(g8(o,t.learningRate),o9(P9(e,d8(s9(i),t.epsilon)))),l=d8(g8(u,t.momentum),c);s.assign(e),n.assign(i),u.assign(l);var h=P9(a,l);a.assign(h)}else{var p=d8(g8(s,t.decay),g8(s9(o),1-t.decay)),f=d8(g8(u,t.momentum),m8(g8(o,t.learningRate),o9(d8(p,t.epsilon))));s.assign(p),u.assign(f);var d=P9(a,f);a.assign(d)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&Y5(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Y5(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Y5(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:(n=c(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(T(this.accumulatedMeanSquares),T(this.accumulatedMoments)),this.centered&&t.push.apply(t,T(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=c(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"className",get:function(){return"RMSProp"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),a}(Yre),rae=[Jre,Zre,Qre,$re,tae,nae,eae];function aae(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var iae=function(){function e(t){if(l(this,e),!k0().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}var t;return p(e,[{key:"save",value:(t=c(o().mark((function e(t){var n,r,a,i,s,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=j5.join(t.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=8;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 8:return a=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],i=b6(t,a),s=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(u=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,u.href=s,e.next=16,aae((function(){return u.dispatchEvent(new MouseEvent("click"))}));case 16:if(null==t.weightData){e.next=22;break}return(c=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,c.href=r,e.next=22,aae((function(){return c.dispatchEvent(new MouseEvent("click"))}));case 22:return e.abrupt("return",{modelArtifactsInfo:I6(t)});case 23:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();iae.URL_SCHEME="downloads://";var oae=function(){function e(t){if(l(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}var t;return p(e,[{key:"load",value:(t=c(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=k6(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=O(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,T(o.weights)),a.push.apply(a,T(o.paths))}}catch(e){i.e(e)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,e]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return y6(e.name)})),i={},o=O(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=y6(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(e){o.e(e)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function sae(e,t,n,r){!function(e){F$(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){F$(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),F$(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),F$(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function uae(e,t){return cae.apply(this,arguments)}function cae(){return(cae=c(o().mark((function e(t,n){var r,a,i,s,u,c,l,h,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?k0().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,s=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,sae(a,n.onProgress,i,s);case 13:e.t0=e.sent;case 14:if(u=e.t0,c=u.map((function(e){return e.arrayBuffer()})),l=.5,h=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(c);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,sae(c,n.onProgress,l,h);case 26:e.t1=e.sent;case 27:return p=e.t1,e.abrupt("return",p);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lae(e,t){var n,r,a,i=null==t.fetchFunc?k0().platform.fetch:t.fetchFunc,s=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:(a=c(o().mark((function n(a){var u,c,l,h,p;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(s<e.length)){n.next=20;break}if(r){n.next=6;break}return n.next=4,i(e[s],t.requestInit,{isBinary:!0});case 4:c=n.sent.body,r=c.getReader();case 6:return n.next=8,r.read();case 8:if(l=n.sent,h=l.done,p=l.value,!h){n.next=16;break}return s++,r=void 0,null===(u=t.onProgress)||void 0===u||u.call(t,s/e.length),n.abrupt("continue",0);case 16:return a.enqueue(p),n.abrupt("return");case 20:a.close();case 21:case"end":return n.stop()}}),n)}))),function(e){return a.apply(this,arguments)})})}function hae(e){return pae.apply(this,arguments)}function pae(){return pae=c(o().mark((function e(t){var n,r,a,i,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"",r=s.length>2?s[2]:void 0,a=s.length>3?s[3]:void 0,i=fae((function(e){return uae(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),pae.apply(this,arguments)}function fae(e){return function(){var t=c(o().mark((function t(n){var r,a,i,s,u,c,l,h,p,f,d,v,m=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,i=n.map((function(){return!1})),s={},u=null!=a?a.map((function(){return!1})):[],c=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,o=G5[r]*L$(e.shape),l=function(){i[t]=!0,null==s[t]&&(s[t]=[]),s[t].push({manifestEntry:e,groupOffset:n,sizeBytes:o})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),u[n]=!0)})):l(),c.push(e.name),n+=o}))})),u.every((function(e){return e}))){t.next=10;break}throw l=a.filter((function(e,t){return!u[t]})),new Error("Could not find weights in manifest with names: "+"".concat(l.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(c.join(", "),"."));case 10:return h=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),p=[],h.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;p.push(t)}))})),t.next=15,e(p);case 15:return f=t.sent,d={},v=0,h.forEach((function(e){var t=n[e].paths.length,r=new j5(f.slice(v,v+t));s[e].forEach((function(e){var t=r6(r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]})),v+=t})),t.abrupt("return",d);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}S6.registerSaveRouter((function(e){return k0().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(iae.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new iae(e)}(e.slice(iae.URL_SCHEME.length)):null}));var dae=function(){function e(t,n){if(l(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(F$("function"==typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=k0().platform.fetch,F$(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&F$(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}var t,n,r,a,i;return p(e,[{key:"save",value:(i=c(o().mark((function e(t){var n,r,a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=b6(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&(i=j5.join(t.weightData),n.body.append("model.weights.bin",new Blob([i],{type:"application/octet-stream"}),"model.weights.bin")),e.next=10,this.fetch(this.path,n);case 10:if(!(s=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:I6(t),responses:[s]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(s.status,"."));case 16:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"loadModelJSON",value:(a=c(o().mark((function e(){var t,n,r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(){return a.apply(this,arguments)})},{key:"load",value:(r=c(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadOptions.streamWeights){e.next=2;break}return e.abrupt("return",this.loadStream());case 2:return e.next=4,this.loadModelJSON();case 4:return t=e.sent,e.abrupt("return",k6(t,(function(e){return n.loadWeights(e)})));case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadStream",value:(n=c(o().mark((function e(){var t,n,r,a,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadModelJSON();case 2:return t=e.sent,e.next=5,this.getWeightUrls(t.weightsManifest);case 5:return n=e.sent,r=N6(t.weightsManifest),a=function(){return lae(n,i.loadOptions)},e.abrupt("return",Object.assign(Object.assign({},t),{weightSpecs:r,getWeightStream:a}));case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getWeightUrls",value:(t=c(o().mark((function e(t){var n,r,a,i,s,u,c,l,h,p,f,d,v,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=vae(n),a=S(r,2),i=a[0],s=a[1],u=this.weightPathPrefix||i,c=[],l=[],h=O(t);try{for(h.s();!(p=h.n()).done;){f=p.value,d=O(f.paths);try{for(d.s();!(v=d.n()).done;)m=v.value,null!=this.weightUrlConverter?l.push(this.weightUrlConverter(m)):c.push(u+m+s)}catch(e){d.e(e)}finally{d.f()}}}catch(e){h.e(e)}finally{h.f()}if(!this.weightUrlConverter){e.next=16;break}return e.t0=c.push,e.t1=c,e.t2=T,e.next=13,Promise.all(l);case 13:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 16:return e.abrupt("return",c);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"loadWeights",value:function(){var e=c(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getWeightUrls(t);case 2:return n=e.sent,r=N6(t),e.next=6,uae(n,this.loadOptions);case 6:return a=e.sent,e.abrupt("return",[r,a]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function vae(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function mae(e){return null!=e.match(dae.URL_SCHEME_REGEX)}dae.URL_SCHEME_REGEX=/^https?:\/\//;var gae=function(e,t){if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return mae(e)})):mae(e))?yae(e,t):null};function yae(e,t){return new dae(e,t)}function bae(e,t){return yae(e,t)}S6.registerSaveRouter(gae),S6.registerLoadRouter(gae);var xae=function(){function e(t){l(this,e),this.modelArtifacts=t}return p(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),kae=function(){function e(t){l(this,e),this.saveHandler=t}return p(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),wae=p((function e(t){l(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function Iae(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new xae(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new xae({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new xae({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}var Nae={__proto__:null,CompositeArrayBuffer:j5,browserFiles:function(e){return new oae(e)},browserHTTPRequest:bae,concatenateArrayBuffers:g6,copyModel:function(e,t){return a8.apply(this,arguments)},decodeWeights:r6,decodeWeightsStream:l6,encodeWeights:t6,fromMemory:function(e,t,n,r){var a=arguments;return new wae(Iae.apply(void 0,T(a)))},fromMemorySync:Iae,getLoadHandlers:E6,getModelArtifactsForJSON:k6,getModelArtifactsForJSONSync:x6,getModelArtifactsInfoForJSON:I6,getSaveHandlers:T6,getWeightSpecs:N6,http:yae,isHTTPScheme:mae,listModels:function(){return n8.apply(this,arguments)},loadWeights:hae,moveModel:function(e,t){return i8.apply(this,arguments)},registerLoadRouter:function(e){return S6.registerLoadRouter(e)},registerSaveRouter:function(e){return S6.registerSaveRouter(e)},removeModel:function(e){return r8.apply(this,arguments)},weightsLoaderFactory:fae,withSaveHandler:function(e){return new kae(e)},withSaveHandlerSync:function(e){return new kae(e)}};var Sae,Tae={__proto__:null,confusionMatrix:B5({confusionMatrix_:function(e,t,n){var r=L5(e,"labels","confusionMatrix"),a=L5(t,"predictions","confusionMatrix");F$(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),F$(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),F$(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),F$(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),F$(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var i=cee(h8(r,"int32"),n),o=cee(h8(a,"int32"),n),s=hne(i),u=Q8(s,o);return h8(u,"int32")}})},Eae=!1;function Cae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}var u=W3(O3,E5.backendName);if(null!=u){var c={pixels:e},l={numChannels:t};return E5.runKernel(O3,c,l)}var h,p,f=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],d=S(f,2),v=d[0],m=d[1];if(o)h=e.getContext("2d").getImageData(0,0,v,m).data;else if(r||n)h=e.data;else if(i||a||s){if(null==Sae)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Sae=new OffscreenCanvas(1,1).getContext("2d")}else Sae=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Sae.canvas.width=v,Sae.canvas.height=m,Sae.drawImage(e,0,0,v,m),h=Sae.getImageData(0,0,v,m).data}if(4===t)p=new Int32Array(h);else{var g=v*m;p=new Int32Array(g*t);for(var y=0;y<g;y++)for(var b=0;b<t;++b)p[y*t+b]=h[4*y+b]}var x=[m,v,t];return jte(p,x,"int32")}function Aae(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}function Rae(){return Rae=c(o().mark((function e(t){var n,r,a,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:3,r=null,!k0().getBool("WRAP_TO_IMAGEBITMAP")||!Aae(t)){e.next=15;break}return e.prev=3,e.next=6,createImageBitmap(t,{premultiplyAlpha:"none"});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=null;case 12:r=null!=a&&a.width===t.width&&a.height===t.height?a:t,e.next=16;break;case 15:r=t;case 16:return e.abrupt("return",Cae(r,n));case 17:case"end":return e.stop()}}),e,null,[[3,9]])}))),Rae.apply(this,arguments)}function _ae(e){if(2!==e.rank&&3!==e.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(e.rank,"."));var t=2===e.rank?1:e.shape[2];if(t>4||2===t)throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(t));if("float32"!==e.dtype&&"int32"!==e.dtype)throw new Error("Unsupported type for toPixels: ".concat(e.dtype,".")+" Please use float32 or int32 tensors.")}function Oae(){return Oae=c(o().mark((function e(t,n){var r,a,i,s,u,c,l,h,p,f,d,v,m,g,y,b,x;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=L5(t,"img","toPixels"),t instanceof n5||(r=h8(a=r,"int32"),a.dispose()),_ae(r),i=r.shape.slice(0,2),s=S(i,2),u=s[0],c=s[1],l=2===r.rank?1:r.shape[2],e.next=7,r.data();case 7:h=e.sent,p="float32"===r.dtype?255:1,f=new Uint8ClampedArray(c*u*4),d=0;case 11:if(!(d<u*c)){e.next=36;break}v=[0,0,0,255],m=0;case 14:if(!(m<l)){e.next=28;break}if(g=h[d*l+m],"float32"!==r.dtype){e.next=21;break}if(!(g<0||g>1)){e.next=19;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(g,"."));case 19:e.next=24;break;case 21:if("int32"!==r.dtype){e.next=24;break}if(!(g<0||g>255)){e.next=24;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(g,"."));case 24:1===l?(v[0]=g*p,v[1]=g*p,v[2]=g*p):v[m]=g*p;case 25:m++,e.next=14;break;case 28:f[(y=4*d)+0]=Math.round(v[0]),f[y+1]=Math.round(v[1]),f[y+2]=Math.round(v[2]),f[y+3]=Math.round(v[3]);case 33:++d,e.next=11;break;case 36:return null!=n&&(Eae||null!=W3(x1,E5.backendName)&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),Eae=!0),n.width=c,n.height=u,b=n.getContext("2d"),x=new ImageData(f,c,u),b.putImageData(x,0,0)),r!==t&&r.dispose(),e.abrupt("return",f);case 39:case"end":return e.stop()}}),e)}))),Oae.apply(this,arguments)}var Fae=B5({fromPixels_:Cae}),Dae={__proto__:null,draw:function(e,t,n){var r=L5(e,"img","draw");if(!(e instanceof n5)){var a=r;r=h8(a,"int32"),a.dispose()}_ae(r),function(e){var t=(null==e?void 0:e.alpha)||1;if(t>1||t<0)throw new Error("Alpha value ".concat(t," is suppoed to be in range [0 - 1]."))}(null==n?void 0:n.imageOptions);var i={image:r},o={canvas:t,options:n};E5.runKernel(x1,i,o)},fromPixels:Fae,fromPixelsAsync:function(e){return Rae.apply(this,arguments)},toPixels:function(e,t){return Oae.apply(this,arguments)}};function Mae(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===L$(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,h=i;h<n;++h)l*=u[h],c.push(u[h]);var p=[].concat(T(i0(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,p]}var Lae={__proto__:null,prepareAndValidate:Mae};function zae(e,t,n){var r=e.shape.length;F$(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),F$(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){F$(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function Pae(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Bae(e,t,n,r){for(var a=T(e),i=a.length;i<r.length;i++)a.push(1);for(var o=0;o<n;o++)0===o?a[t]=1:(a.splice(t,0,1),a.pop());return a}function Wae(e,t,n){return n<=e?n:n-(t-1)}function Uae(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function Vae(e,t,n,r,a){for(var i=T(a),o=Uae(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{var u=Wae(t,n,s),c=r[u];e&1<<u&&(c=0),i[s]=c}return i}function Gae(e,t,n,r,a){for(var i=T(a),o=Uae(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{var u=Wae(t,n,s),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),i[s]=c}for(var l=0;l<i.length;l++){var h=a[l];i[l]<0&&(i[l]+=h),i[l]=A$(0,i[l],a[l])}return i}function jae(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Hae(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=A$(0,o,u-1)}function qae(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=s>0?A$(0,o,u):A$(-1,o,u-1)}function Kae(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Xae(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Yae(e,t,n){var r,a,i=e.shape.length;return(r="number"==typeof t?[t].concat(T(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){F$(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"==typeof n?[n].concat(T(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(F$(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function Jae(e,t,n,r,a,i,o,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!=(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,h={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},p=0;p<h.dims;p++)l&&0!=(1<<p&s)&&h.numAddAxisAfterEllipsis++,1<<p&o&&(l=!0);l||(h.ellipsisMask|=1<<h.dims,h.dims++);var f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(h,f);for(var d=!0,v=!0,m=!0,g=[],y=[],b=0;b<e.length;++b){if(0===f.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(f.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var w=[f.beginMask&1<<b,f.endMask&1<<b],I=[f.strides[b]>0?0:-1,f.strides[b]>0?k:k-1];if(x&&f.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===f.strides[b];var N=!!(f.beginMask&1<<b&&f.endMask&1<<b);if(f.beginValid&&f.endValid){if(x){var S=f.begin[b]<0?k+f.begin[b]:f.begin[b];if(f.begin[b]=S,f.end[b]=f.begin[b]+1,S<0||S>=k)throw Error("slice index ".concat(f.begin[b]," of dimension ").concat(b," out of bounds."))}else f.begin[b]=Zae(f.begin[b],0,f.strides[b],k,w,I),f.end[b]=Zae(f.end[b],1,f.strides[b],k,w,I);var T=1===f.strides[b]&&0===f.begin[b]&&f.end[b]===k;d=d&&T,v=v&&(0===b&&1===f.strides[b]||T)}else d=d&&1===f.strides[b]&&N,v=v&&(0===b&&1===f.strides[b]||N);var E=void 0,C=!1;if(f.beginValid&&f.endValid?(E=f.end[b]-f.begin[b],C=!0):x?(E=1,C=!0):N&&k>=0&&(E=f.strides[b]<0?-k:k,C=!0),C){var A=void 0;A=0===E||E<0!=f.strides[b]<0?0:Math.trunc(E/f.strides[b])+(E%f.strides[b]!=0?1:0),g.push(A)}else g.push(-1)}else g.push(x?1:-1)}for(var R=0;R<f.finalShapeGatherIndices.length;++R){var _=f.finalShapeGatherIndices[R];_>=0?y.push(g[_]):-2===_&&y.push(1)}var O=y.filter((function(e,t){return-2!==f.finalShapeGatherIndices[t]}));return{finalShapeSparse:O,finalShape:y,isIdentity:d,sliceDim0:v,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function Zae(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var Qae,$ae={__proto__:null,assertParamsValid:zae,computeFlatOffset:Xae,computeOutShape:Pae,getNormalizedAxes:function(e,t,n,r,a,i,o,s,u){var c=e.length,l=new Array(c),h=new Array(c),p=new Array(c);if(t.length&&n>0){var f=t[0],d=n+1;l=Vae(o,f,d,r,e),h=Gae(s,f,d,a,e),p=Bae(i,f,d,e)}else for(var v=0;v<c;v++)l[v]=Hae(o,r,i,e,v,u),h[v]=qae(s,a,i,e,v,u),p[v]=jae(i,v,u);return{begin:l,end:h,strides:p}},isSliceContinous:Kae,maskToAxes:function(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t},parseSliceParams:Yae,sliceInfo:Jae,startForAxis:Hae,startIndicesWithElidedDims:Vae,stopForAxis:qae,stopIndicesWithElidedDims:Gae,stridesForAxis:jae,stridesWithElidedDims:Bae},eie="4.22.0",tie=function(){function e(){l(this,e)}return p(e,null,[{key:"sgd",value:function(e){return new eae(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new tae(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new nae(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Qre(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Jre(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new $re(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new Zre(e,t)}}]),e}(),nie=tie,rie="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:function(e){return e()};function aie(){return new Promise((function(e){return rie((function(){return e()}))}))}function iie(e,t){var n=e[0].length;e.forEach((function(e,t){F$(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),F$(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)F$(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function oie(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function sie(e,t,n){var r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(var a=1;a<n.length;++a){var i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(s))}else r[o]=i}return r}function uie(e){var t,n={FIRST_DIM_SIZE:Qae.FIRST_DIM_SIZE,VALUE_ROWIDS:Qae.VALUE_ROWIDS,ROW_LENGTHS:Qae.ROW_LENGTHS,ROW_SPLITS:Qae.ROW_SPLITS,ROW_LIMITS:Qae.ROW_LIMITS,ROW_STARTS:Qae.ROW_STARTS},r=[],a=O(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(!(i in n))break;r.push(n[i])}}catch(e){a.e(e)}finally{a.f()}return r}function cie(e){return 0===e.length?0:e[0]===Qae.FIRST_DIM_SIZE?e.length-1:e.length}function lie(e,t){if(null!=e&&null!=t){var n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(var a=0;a<Math.min(n,r-1);++a){var i=e[a],o=t[a+1];if(i>=0&&o>=0&&1!==i&&i!==o)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(i," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(o))}}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(Qae||(Qae={}));function hie(e){return e<=30?e:a0(e,Math.floor(Math.sqrt(e)))}function pie(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function fie(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function die(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2==1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function vie(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function mie(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function gie(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var yie=1.7580993408473768,bie=1.0507009873554805,xie=.3275911,kie=.254829592,wie=-.284496736,Iie=1.421413741,Nie=-1.453152027,Sie=1.061405429;function Tie(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Eie(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Cie(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Aie(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Rie(e,t){return{real:e[2*t],imag:e[2*t+1]}}function _ie(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Oie(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function Fie(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var Die="->",Mie=/->/g;function Lie(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(Mie,"").length)/Die.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(Die,'").'));var r=S(e.split(Die),2),a=r[0],i=r[1];F$(-1===a.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var o=a.split(","),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var u=[],c=function(){var e=i[l];if(!o.some((function(t){return-1!==t.indexOf(e)})))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===u.indexOf(e)&&u.push(e)},l=0;l<i.length;++l)c();for(var h=0;h<a.length;++h){var p=a[h];-1===u.indexOf(p)&&","!==p&&u.push(p)}for(var f=new Array(o.length),d=0;d<s;++d){if(new Set(o[d].split("")).size!==o[d].length)throw new Error("Found duplicate axes in input component ".concat(o[d],". ")+"Support for duplicate axes in input is not implemented yet.");f[d]=[];for(var v=0;v<o[d].length;++v)f[d].push(u.indexOf(o[d][v]))}for(var m=u.length,g=[],y=i.length;y<m;++y)g.push(y);return{allDims:u,summedDims:g,idDims:f}}function zie(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function Pie(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:F$(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function Bie(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,c=O(Uie(t,r[s]));try{for(c.s();!(u=c.n()).done;){var l=u.value;-1===o.indexOf(l)&&(a[s].push(l),o.push(l))}}catch(e){c.e(e)}finally{c.f()}}return{path:r,steps:a}}function Wie(e){return e.every((function(e,t){return e===t}))}function Uie(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function Vie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"==typeof t)F$(e.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);F$(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}F$(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function Gie(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function jie(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function Hie(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function qie(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function Kie(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function Xie(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Yie(e,t){var n=L$(e),r=L$(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function Jie(e,t){var n=L$(e),r=L$(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function Zie(){return"segment ids must be >= 0"}function Qie(){return"segment ids are not increasing"}function $ie(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function eoe(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function toe(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=a0(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=a0(e,n+1);return n}function noe(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function roe(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,h=1,p=0;p<r;++p)u.push(e.shape[p]),c*=e.shape[p];for(var f=r;f<n;f++)u.push(e.shape[f]),l*=e.shape[f];for(var d=r;d<a;d++)u.push(t.shape[d]);for(var v=n+1;v<i;v++)u.push(e.shape[v]),h*=e.shape[v];return{batchSize:c,sliceSize:h,outerSize:l,dimSize:s,outputShape:u}}function aoe(e){try{return e.map((function(e){return W4(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(e))}}function ioe(e){return e.map((function(e){return B4(e)}))}var ooe={__proto__:null,ERF_A1:kie,ERF_A2:wie,ERF_A3:Iie,ERF_A4:Nie,ERF_A5:Sie,ERF_P:xie,PARALLELIZE_THRESHOLD:30,get RowPartitionType(){return Qae},SELU_SCALE:bie,SELU_SCALEALPHA:yie,applyActivation:Sne,assertAndGetBroadcastShape:z7,assertAxesAreInnerMostDims:Q7,assertParamsConsistent:iie,assignToTypedArray:_ie,axesAreInnerMostDims:X7,calculateShapes:Jte,checkEinsumDimSizes:Pie,checkPadOnDimRoundingMode:K8,combineLocations:Y7,combineRaggedTensorToTensorShapes:sie,complexWithEvenIndex:Cie,complexWithOddIndex:Aie,computeConv2DInfo:D8,computeConv3DInfo:M8,computeDefaultPad:L8,computeDilation2DInfo:_8,computeOptimalWindowSize:hie,computeOutAndReduceShapes:J7,computeOutShape:oie,computePool2DInfo:O8,computePool3DInfo:F8,convertConv2DDataFormat:q8,decodeEinsumEquation:Lie,eitherStridesOrDilationsAreOne:j8,expandShapeToKeepDim:Z7,exponent:Fie,exponents:Oie,fromStringArrayToUint8:ioe,fromUint8ToStringArray:aoe,getAxesPermutation:$7,getBroadcastDims:M7,getComplexWithIndex:Rie,getEinsumComputePath:Bie,getEinsumPermutation:zie,getFusedBiasGradient:Nne,getFusedDyActivation:Ine,getImageCenter:pie,getInnerMostAxes:t9,getPermuted:die,getRaggedRank:cie,getReductionAxes:L7,getReshaped:fie,getReshapedPermuted:vie,getRowPartitionTypesHelper:uie,getSliceBeginCoords:mie,getSliceSize:gie,getSparseFillEmptyRowsIndicesDenseShapeMismatch:Gie,getSparseFillEmptyRowsNegativeIndexErrorMessage:jie,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:Hie,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:Xie,getSparseReshapeInputOutputMismatchErrorMessage:Jie,getSparseReshapeInputOutputMultipleErrorMessage:Yie,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:qie,getSparseReshapeNegativeOutputDimErrorMessage:Kie,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:eoe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Zie,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:Qie,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:$ie,getUndoAxesPermutation:e9,isIdentityPermutation:Wie,log:function(){var e;k0().getBool("IS_TEST")||k0().getBool("PROD")||(e=console).log.apply(e,arguments)},mergeRealAndImagArrays:Tie,prepareAndValidate:Mae,prepareSplitSize:Vie,segment_util:{__proto__:null,collectGatherOpShapeInfo:roe,computeOutShape:noe,segOpComputeOptimalWindowSize:toe},shouldFuse:Tne,slice_util:$ae,splitRealAndImagArrays:Eie,stridesOrDilationsArePositive:H8,tupleValuesAreOne:G8,upcastType:h5,validateDefaultValueShape:lie,validateInput:Yte,validateUpdateShape:Xte,warn:z3},soe={__proto__:null,nonMaxSuppressionV3Impl:qne,nonMaxSuppressionV4Impl:Kne,nonMaxSuppressionV5Impl:Xne,whereImpl:one};!function(){var e,t=O(rae);try{for(t.s();!(e=t.n()).done;){Kre(e.value)}}catch(e){t.e(e)}finally{t.f()}}();var uoe={kernelName:N0,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return g8(e,Bte(h8(n,"float32"),-1))}}}},coe={kernelName:S0,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){var t=s9(h8(n,"float32")),r=o9(P9(i9(1),t));return M9(m8(e,r))}}}},loe={kernelName:T0,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){var t=o9(P9(s9(h8(n,"float32")),1));return m8(e,t)}}}},hoe={kernelName:E0,inputsToSave:["a","b"],gradFunc:function(e,t){var n=S(t,2),r=n[0],a=n[1],i=z7(r.shape,a.shape);return{a:function(){var t=e,n=L7(r.shape,i);return n.length>0&&(t=u9(t,n)),X8(t,r.shape)},b:function(){var t=e,n=L7(a.shape,i);return n.length>0&&(t=u9(t,n)),X8(t,a.shape)}}}},poe={kernelName:C0,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},foe={kernelName:_0,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return U7(n)}}}},doe={kernelName:O0,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return U7(n)}}}},voe={kernelName:F0,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return m8(e,o9(P9(i9(1),s9(h8(n,"float32")))))}}}},moe={kernelName:D0,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){var t=o9(d8(i9(1),s9(h8(n,"float32"))));return m8(e,t)}}}},goe={kernelName:z0,inputsToSave:["a","b"],gradFunc:function(e,t){var n=S(t,2),r=n[0],a=n[1],i=z7(r.shape,a.shape);return{a:function(){var t=d8(s9(r),s9(a)),n=g8(e,m8(a,t)),o=L7(r.shape,i);return o.length>0&&(n=u9(n,o)),X8(n,r.shape)},b:function(){var t=d8(s9(r),s9(a)),n=M9(g8(e,m8(r,t))),o=L7(a.shape,i);return o.length>0&&(n=u9(n,o)),X8(n,a.shape)}}}},yoe={kernelName:M0,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return m8(e,d8(s9(h8(n,"float32")),1))}}}},boe={kernelName:L0,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return m8(e,P9(i9(1),s9(h8(n,"float32"))))}}}};var xoe=B5({avgPool3dGrad_:function(e,t,n,r,a,i){var o=L5(e,"dy","avgPool3dGrad"),s=L5(t,"input","avgPool3dGrad"),u=o,c=s,l=!1;4===s.rank&&(l=!0,u=X8(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=X8(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F$(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),F$(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")})),K8("avgPool3dGrad",a,i);var h={dy:u,input:c},p={filterSize:n,strides:r,pad:a,dimRoundingMode:i},f=E5.runKernel(U0,h,p);return l?X8(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}}),koe={kernelName:W0,inputsToSave:["x"],gradFunc:function(e,t,n){var r=S(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return xoe(e,r,a,i,o,s)}}}};var woe=B5({avgPoolGrad_:function(e,t,n,r,a){var i=L5(e,"dy","avgPoolGrad"),o=L5(t,"input","avgPoolGrad");F$(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,u=i,c=!1;3===o.rank&&(c=!0,s=X8(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=X8(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F$(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),F$(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var l={dy:u,input:s},h={filterSize:n,strides:r,pad:a},p=E5.runKernel(B0,l,h);return c?X8(p,[p.shape[1],p.shape[2],p.shape[3]]):p}}),Ioe={kernelName:P0,inputsToSave:["x"],gradFunc:function(e,t,n){var r=S(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return woe(e,r,a,i,o)}}}},Noe={kernelName:V0,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=S(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return Q8(e,i,!1,!1)},b:function(){return Q8(e,a,!0,!1)}}:o&&!s?{a:function(){return Q8(i,e,!1,!0)},b:function(){return Q8(a,e,!1,!1)}}:{a:function(){return Q8(i,e,!0,!0)},b:function(){return Q8(e,a,!0,!0)}}:{a:function(){return Q8(e,i,!1,!0)},b:function(){return Q8(a,e,!0,!1)}}}},Soe={kernelName:G0,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return gee(e,r,a)}}}},Toe={kernelName:q0,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var u=[],c=0;c<o.length;c++)o[c]>1&&u.push(c);return{x:function(){return u9(e,u,!0)}}}},Eoe={kernelName:X0,gradFunc:function(e){return{x:function(){return e.clone()}}}},Coe={kernelName:Y0,gradFunc:function(e){return{x:function(){return U7(e)}}}},Aoe={kernelName:J0,inputsToSave:["x"],gradFunc:function(e,t,n){var r=S(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return W7(U9(x9(r,a),E9(r,i)),e,U7(e))}}}},Roe={kernelName:Q0,inputsToSave:["x"],gradFunc:uoe.gradFunc},_oe={kernelName:$0,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=j$(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return Dte(e,i,a).map((function(e){return function(){return e}}))}},Ooe={kernelName:e1,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=S(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,u=n.pad,c=n.dataFormat;return F$(G8(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return k7(a.shape,e,i,s,u,c)},filter:function(){return wne(a,e,i.shape,s,u,c)}}}},Foe={kernelName:n1,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=S(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,u=n.dataFormat,c=n.dimRoundingMode;return{dy:function(){return b7(e,i,o,s,u,1,c)},filter:function(){return wne(e,a,i.shape,o,s,u,c)}}}};var Doe=B5({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=X8(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=X8(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),F$(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),F$(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),F$(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),F$(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),F$(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return E5.runKernel(a1,s,u)}}),Moe={kernelName:r1,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;F$(G8(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=S(t,2),s=o[0],u=o[1];return{x:function(){return N7(s.shape,e,u,a,i)},filter:function(){return Doe(s,e,u.shape,a,i)}}}},Loe={kernelName:o1,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return g8(M9(Nte(h8(n,"float32"))),e)}}}},zoe={kernelName:s1,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return g8(Ste(h8(n,"float32")),e)}}}},Poe={kernelName:c1,inputsToSave:["x"],gradFunc:function(e,t,n){var r=S(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=$7([a],r.rank),n=A7(e,a,i,!o);return null!=t&&(n=hne(n,t)),n}}}},Boe={kernelName:f1,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;F$(G8(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var u=S(t,2),c=u[0],l=u[1];return F$(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(c.rank,".")})),F$(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(l.rank,".")})),F$(c.shape[3]===l.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(c.shape[3],") must match the inChannels dimension ")+"in filter ".concat(l.shape[2],".")})),F$(j8(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),K8("depthwiseConv2d",i,o),{x:function(){return Ane(c.shape,e,l,a,i,s,o)},filter:function(){return Cne(c,e,l.shape,a,i,s,o)}}}},Woe={kernelName:g1,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=S(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return E5.runKernel(y1,o,n)},filter:function(){return E5.runKernel(b1,s,n)}}}},Uoe={kernelName:I1,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:S(t,1)[0]};return{x:function(){return E5.runKernel(N1,n)}}}},Voe={kernelName:S1,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0],r=g8(p9(M9(s9(n))),2/Math.sqrt(Math.PI));return{x:function(){return g8(e,r)}}}},Goe={kernelName:E1,outputsToSave:[!0],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return g8(e,n)}}}},joe={kernelName:C1,inputsToSave:["input"],gradFunc:function(e,t){var n=S(t,1)[0];return{input:function(){return X8(e,n.shape)}}}},Hoe={kernelName:A1,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return g8(e,p9(n))}}}},qoe={kernelName:F1,gradFunc:function(e){return{x:function(){return U7(e)}}}},Koe={kernelName:D1,inputsToSave:["a","b"],gradFunc:function(e,t){var n=S(t,2),r=n[0],a=n[1],i=z7(r.shape,a.shape);return{a:function(){var t=m8(e,h8(a,"float32")),n=L7(r.shape,i);return n.length>0?X8(u9(t,n),r.shape):t},b:function(){var t=g8(e,h8(r,"float32")),n=L7(a.shape,i);n.length>0&&(t=X8(u9(t,n),a.shape));var o=s9(a);return M9(m8(t,h8(o,"float32")))}}}},Xoe={kernelName:M1,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=S(t,4),i=a[0],o=a[1],s=a[2],u=a[3],c=null==u?i9(1):u,l=L7(o.shape,i.shape),h=[];if(1===o.rank){for(var p=0;p<i.shape.length-1;++p)h.push(i.shape[p]);h.push(1)}var f=P9(i,o),d=g8(e,c),v=yte(d8(s,i9(r))),m=g8(g8(g8(v,v),v),i9(-.5));return{x:function(){return 1===o.rank?X8(g8(g8(e,v9(X8(v,[1,1,1,o.shape[0]]),h)),c),i.shape):X8(g8(g8(e,v),c),i.shape)},mean:function(){var e=g8(g8(v,i9(-1)),d);return 1===o.rank&&(e=u9(e,l)),X8(e,o.shape)},variance:function(){var e=g8(g8(m,f),d);return 1===o.rank&&(e=u9(e,l)),X8(e,o.shape)},scale:function(){var t=g8(f,v),n=g8(e,t);return 1===o.rank&&(n=u9(n,l)),X8(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=u9(t,l)),X8(t,o.shape)}}}},Yoe={kernelName:L1,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=S(t,2),a=r[0],i=r[1],o=n.axis,s=n.batchDims,u=j$(o,a.shape)[0],c=function(e,t,n){return function(){var r=e.shape,a=t.size,i=r.slice(0,u),s=i.length,c=r.slice(o,r.length).slice(1),l=c.length,h=Joe(0,s),p=Joe(s+1,s+1+l),f=Zoe([i,[a],c]),d=X8(n,f),v=X8(t,[a]),m=Zoe([[s],h,p]),g=hne(d,m),y=nne(g,v,e.shape[u]),b=e9(m);return y=hne(y,b)}};if(1===s){var l=a.shape[0],h=a.split(l,0);return{x:function(){var t=Pte(h.map((function(t,n){return c(t,i.slice(n,1),e.slice(n,1))()})));return t.reshape(a.shape)},indices:function(){return i}}}return{x:c(a,i,e),indices:function(){return i}}}};function Joe(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Zoe(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Qoe={kernelName:B1,inputsToSave:["a","b"],gradFunc:function(e,t){var n=S(t,2),r=n[0],a=n[1];return{a:function(){return U7(r)},b:function(){return U7(a)}}}},$oe={kernelName:W1,gradFunc:function(e){return{x:function(){return h8(e,"float32")}}}},ese={kernelName:G1,gradFunc:function(e){return{x:function(){return U7(e)}}}},tse={kernelName:j1,gradFunc:function(e){return{x:function(){return U7(e)}}}},nse={kernelName:H1,gradFunc:function(e){return{x:function(){return U7(e)}}}},rse={kernelName:q1,inputsToSave:["x"],gradFunc:function(e,t,n){var r=S(t,1)[0],a=n.alpha,i=b9(r,0);return{x:function(){return W7(i,e,g8(e,a))}}}},ase={kernelName:Z1,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return m8(e,d8(n,1))}}}},ise={kernelName:J1,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return m8(e,h8(n,"float32"))}}}},ose={kernelName:t2,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=S(t,1)[0],a=n.axis;return{logits:function(){var t=p9(r);return P9(e,g8(u9(e,a,!0),t))}}}};var sse=B5({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:o};return E5.runKernel(r2,s,u)}}),use={kernelName:n2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=S(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,u=n.alpha,c=n.beta;return{x:function(){return sse(a,i,e,o,s,u,c)}}}};function cse(e,t,n,r){return t.rank<n.rank&&(t=X8(t,Z7(t.shape,r))),e.rank<n.rank&&(e=X8(e,Z7(e.shape,r))),{x:function(){return g8(e,h8(B7(n,t),e.dtype))}}}var lse={kernelName:a2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=cse(e,t[1],a,j$(r,a.shape));return{x:function(){return i.x()}}}},hse={kernelName:i2,inputsToSave:["a","b"],gradFunc:function(e,t){var n=S(t,2),r=n[0],a=n[1];return{a:function(){return g8(e,h8(x9(r,a),"float32"))},b:function(){return g8(e,h8(T9(r,a),"float32"))}}}};var pse=B5({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=L5(e,"dy","maxPool3dGrad"),u=L5(t,"input","maxPool3dGrad"),c=L5(n,"output","maxPool3dGrad"),l=s,h=u,p=c,f=!1;4===u.rank&&(f=!0,l=X8(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),h=X8(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),p=X8(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),F$(5===l.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),F$(5===h.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(h.rank,".")})),F$(5===p.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(p.rank,".")})),K8("maxPool3dGrad",i,o);var d={dy:l,input:h,output:p},v={filterSize:r,strides:a,pad:i,dimRoundingMode:o},m=E5.runKernel(c2,d,v);return f?X8(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),fse={kernelName:u2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=S(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode;return{x:function(){return pse(e,a,i,o,s,u,c)}}}};var dse=B5({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=L5(e,"dy","maxPoolGrad"),u=L5(t,"input","maxPoolGrad"),c=L5(n,"output","maxPoolGrad");F$(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),F$(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),F$(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),K8("maxPoolGrad",i,o);var l={dy:s,input:u,output:c},h={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return E5.runKernel(s2,l,h)}}),vse={kernelName:o2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=S(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad;return{x:function(){return dse(e,a,i,o,s,u)}}}},mse={kernelName:d2,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return e7(e,a,r.shape)}}}},gse={kernelName:T2,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return e7(e,a,r.shape)}}}},yse={kernelName:E2,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=S(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,u=z7(o.shape,s.shape);return{a:function(){var t=h8(s,"float32"),n=g8(e,g8(t,a9(o,P9(t,i9(1))))),r=L7(o.shape,u);return r.length>0&&(n=u9(n,r)),X8(n,o.shape)},b:function(){var t=b9(o,0),n=W7(t,R9(o),U7(o)),r=g8(e,g8(i,n)),a=L7(s.shape,u);return a.length>0&&(r=u9(r,a)),X8(r,s.shape)}}}};function bse(e,t,n){var r=e.shape.length,a=r-n.length,i=$7(n,r),o=e;null!=i&&(o=hne(e,i));var s=o.shape.slice(),u=s.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(u);var c=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=X8(t,r),i=C7(e,n,!0,!1),o=C7(e,n,!0,!0),s=g8(i,o);return g8(a,s)}(o.reshape(s),t,a);if(c=c.reshape(o.shape),null!=i){var l=e9(i);c=hne(c,l)}return c}var xse={kernelName:J2,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){var t=b9(n,i9(0)),r=i9(yie),a=i9(bie),i=g8(e,a),o=g8(g8(e,r),p9(h8(n,"float32")));return W7(t,i,o)}}}},kse={kernelName:i3,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return r7(e,r,a)}}}},wse={kernelName:o3,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return Z8(e,r)}}}},Ise={kernelName:I3,inputsToSave:["x"],gradFunc:function(e,t,n){var r=S(t,1)[0],a=n.reps;return{x:function(){var t=U7(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=d8(t,e7(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=d8(t,e7(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var c=0;c<a[2];++c)t=d8(t,e7(e,[s*r.shape[0],u*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var h=0;h<a[1];++h)for(var p=0;p<a[2];++p)for(var f=0;f<a[3];++f)t=d8(t,e7(e,[l*r.shape[0],h*r.shape[1],p*r.shape[2],f*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}};for(var Nse=0,Sse=[uoe,coe,loe,hoe,poe,foe,doe,voe,moe,goe,yoe,boe,koe,Ioe,Noe,Soe,Toe,Eoe,Coe,Aoe,Roe,_oe,Foe,Ooe,Moe,Loe,zoe,Poe,Boe,Woe,{kernelName:k1,inputsToSave:["a","b"],gradFunc:function(e,t){var n=S(t,2),r=n[0],a=n[1],i=z7(r.shape,a.shape);return{a:function(){var t=m8(e,h8(a,"float32")),n=L7(r.shape,i);return n.length>0?X8(u9(t,n),r.shape):t},b:function(){var t=g8(e,h8(r,"float32")),n=L7(a.shape,i);n.length>0&&(t=X8(u9(t,n),a.shape));var o=s9(a);return M9(m8(t,h8(o,"float32")))}}}},Uoe,Voe,Goe,joe,Hoe,Koe,qoe,Xoe,Yoe,Qoe,$oe,ese,tse,nse,rse,ase,ise,ose,use,lse,lse,hse,fse,vse,{kernelName:h2,inputsToSave:["x"],gradFunc:function(e,t,n){var r=S(t,1)[0],a=j$(n.axis,r.shape),i=L$(J7(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=X8(e,t);return m8(g8(n,eee(r.shape,"float32")),i)}}}},{kernelName:p2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=S(t,2),i=a[0],o=cse(e,a[1],i,j$(r,i.shape));return{x:function(){return o.x()}}}},{kernelName:f2,inputsToSave:["a","b"],gradFunc:function(e,t){var n=S(t,2),r=n[0],a=n[1];return{a:function(){return g8(e,h8(E9(r,a),"float32"))},b:function(){return g8(e,h8(b9(r,a),"float32"))}}}},mse,{kernelName:v2,inputsToSave:["a","b"],gradFunc:function(e,t){var n=S(t,2),r=n[0],a=n[1],i=z7(r.shape,a.shape);return{a:function(){var t=L7(r.shape,i);return t.length>0?X8(u9(e,t),r.shape):e},b:function(){var t=g8(e,M9(g9(m8(r,a)))),n=L7(a.shape,i);return n.length>0?X8(u9(t,n),a.shape):t}}}},{kernelName:g2,inputsToSave:["a","b"],gradFunc:function(e,t){var n=S(t,2),r=n[0],a=n[1],i=z7(r.shape,a.shape);return{a:function(){var t=g8(e,h8(a,"float32")),n=L7(r.shape,i);return n.length>0?X8(u9(t,n),r.shape):t},b:function(){var t=g8(e,h8(r,"float32")),n=L7(a.shape,i);return n.length>0?X8(u9(t,n),a.shape):t}}}},{kernelName:y2,gradFunc:function(e){return{x:function(){return M9(e)}}}},{kernelName:N2,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return $9(n.shape,"float32")}}}},{kernelName:I2,gradFunc:function(e){return{x:function(){return U7(e)}}}},{kernelName:S2,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return rne(e,r).map((function(e){return function(){return e}}))}},gse,gse,yse,{kernelName:C2,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=S(t,2),r=n[0],a=n[1],i=b9(r,0);return{x:function(){return W7(i,e,g8(e,a))},alpha:function(){var t=W7(i,U7(e),g8(e,r)),n=L7(a.shape,e.shape);return n.length>0&&(t=u9(t,n)),X8(t,a.shape)}}}},{kernelName:A2,inputsToSave:["x"],gradFunc:function(e,t,n){var r=S(t,1)[0],a=n.axis,i=[];return i=null==a?r.shape.map((function(e,t){return t})):"number"==typeof a?[a]:a,{x:function(){return bse(r,e,i)}}}},{kernelName:M2,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return m8(e,M9(s9(n)))}}}},{kernelName:V2,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0],r=g8(E9(n,6),Bte(n));return{x:function(){return g8(e,h8(r,"float32"))}}}},{kernelName:L2,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return g8(e,h8(Bte(n),"float32"))}}}},{kernelName:z2,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return X8(e,n.shape)}}}},{kernelName:W2,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:S(t,1)[0]};return{images:function(){return E5.runKernel(U2,r,n)}}}},{kernelName:P2,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:S(t,1)[0]};return{images:function(){return E5.runKernel(B2,r,n)}}}},{kernelName:G2,gradFunc:function(e,t,n){var r=j$(n.dims,e.shape);return{x:function(){return pte(e,r)}}}},{kernelName:j2,gradFunc:function(e){return{x:function(){return U7(e)}}}},{kernelName:H2,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return M9(m8(e,g8(a9(n,1.5),2)))}}}},{kernelName:Y2,inputsToSave:["condition"],gradFunc:function(e,t){var n=S(t,1)[0];return{condition:function(){return h8(U7(n),"float32")},t:function(){return g8(e,h8(n,e.dtype))},e:function(){return g8(e,h8(V9(n),e.dtype))}}}},xse,{kernelName:t3,outputsToSave:[!0],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return g8(e,g8(n,P9(i9(1),n)))}}}},{kernelName:e3,gradFunc:function(e){return{x:function(){return U7(e)}}}},{kernelName:Q2,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return g8(T7(h8(n,"float32")),e)}}}},{kernelName:$2,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return g8(E7(h8(n,"float32")),e)}}}},{kernelName:Z2,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=S(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=S(Yae(r,a,i),2),u=s[0],c=s[1],l=[],h=0;h<e.rank;h++)l.push([u[h],o[h]-u[h]-c[h]]);return{x:function(){return pee(e,l)}}}},{kernelName:s3,outputsToSave:[!0],gradFunc:function(e,t,n){var r=S(t,1)[0],a=n.dim,i=g8(e,r);return{logits:function(){return P9(i,g8(u9(i,[a],true),r))}}}},{kernelName:n3,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return g8(e,$8(n))}}}},kse,kse,wse,wse,{kernelName:r3,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return m8(e,g8(o9(h8(n,"float32")),2))}}}},{kernelName:f3,inputsToSave:["a","b"],gradFunc:function(e,t){var n=S(t,2),r=n[0],a=n[1],i=i9(2);return{a:function(){return g8(e,g8(i,P9(r,a)))},b:function(){return g8(e,g8(i,P9(a,r)))}}}},{kernelName:d3,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return g8(e,g8(h8(n,"float32"),2))}}}},{kernelName:_3,gradFunc:function(e){return{x:function(){return U7(e)}}}},{kernelName:x3,inputsToSave:["a","b"],gradFunc:function(e,t){var n=S(t,2),r=n[0],a=n[1],i=z7(r.shape,a.shape);return{a:function(){var t=e,n=L7(r.shape,i);return n.length>0&&(t=u9(t,n)),X8(t,r.shape)},b:function(){var t=e,n=L7(a.shape,i);return n.length>0&&(t=u9(t,n)),X8(M9(t),a.shape)}}}},{kernelName:a3,inputsToSave:["x"],gradFunc:function(e,t,n){var r=S(t,1)[0],a=r.shape.slice();j$(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=X8(e,a),o=g8(i,eee(r.shape,"float32"));return{x:function(){return o}}}},{kernelName:k3,inputsToSave:["x"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return m8(e,s9(T7(n)))}}}},{kernelName:w3,outputsToSave:[!0],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return g8(P9(i9(1),s9(n)),e)}}}},Ise,{kernelName:T3,gradFunc:function(e,t,n){var r=e9(n.perm);return{x:function(){return hne(e,r)}}}},{kernelName:C3,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return Pte(e,r)}}}},{kernelName:A3,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=S(t,1)[0];return{x:function(){return function(e,t){for(var n=Z9(t,U7(t)),r=y9(e,n),a=x9(t,i9(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=f9(a,o+1);a=U9(a,eee(r.shape,"bool"));var s=U7(r);return W7(a,r,s)}(e,n)}}}},{kernelName:R3,gradFunc:function(e){return{x:function(){return U7(e)}}}}];Nse<Sse.length;Nse++){j3(Sse[Nse])}r5().prototype.abs=function(){return this.throwIfDisposed(),y8(this)},r5().prototype.acos=function(){return this.throwIfDisposed(),b8(this)},r5().prototype.acosh=function(){return this.throwIfDisposed(),x8(this)},r5().prototype.add=function(e){return this.throwIfDisposed(),d8(this,e)},r5().prototype.all=function(e,t){return this.throwIfDisposed(),w8(this,e,t)},r5().prototype.any=function(e,t){return this.throwIfDisposed(),I8(this,e,t)},r5().prototype.argMax=function(e){return this.throwIfDisposed(),N8(this,e)},r5().prototype.argMin=function(e){return this.throwIfDisposed(),S8(this,e)},r5().prototype.asScalar=function(){return this.throwIfDisposed(),F$(1===this.size,(function(){return"The array must have only 1 element."})),X8(this,[])},r5().prototype.asType=function(e){return this.throwIfDisposed(),h8(this,e)},r5().prototype.as1D=function(){return this.throwIfDisposed(),X8(this,[this.size])},r5().prototype.as2D=function(e,t){return this.throwIfDisposed(),X8(this,[e,t])},r5().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),X8(this,[e,t,n])},r5().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),X8(this,[e,t,n,r])},r5().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),X8(this,[e,t,n,r,a])},r5().prototype.asin=function(){return this.throwIfDisposed(),T8(this)},r5().prototype.asinh=function(){return this.throwIfDisposed(),E8(this)},r5().prototype.atan=function(){return this.throwIfDisposed(),C8(this)},r5().prototype.atan2=function(e){return this.throwIfDisposed(),A8(this,e)},r5().prototype.atanh=function(){return this.throwIfDisposed(),R8(this)},r5().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Y8(this,e,t,n,r)},r5().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),r7(this,e,t)},r5().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),a7(this,e,t,n,r,a)},r5().prototype.broadcastTo=function(e){return this.throwIfDisposed(),h7(this,e)},r5().prototype.cast=function(e){return this.throwIfDisposed(),h8(this,e)},r5().prototype.ceil=function(){return this.throwIfDisposed(),p7(this)},r5().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),d7(this,e,t)},r5().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof n5&&(e=[e]),Z8([this].concat(T(e)),t)},r5().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),x7(this,e,t,n,r,a,i)},r5().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),w7(this,e,t,n,r,a)},r5().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),b7(this,e,t,n,r,a,i)},r5().prototype.cos=function(){return this.throwIfDisposed(),T7(this)},r5().prototype.cosh=function(){return this.throwIfDisposed(),E7(this)},r5().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),C7(this,e,t,n)},r5().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),A7(this,e,t,n)},r5().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),_7(this,e,t)},r5().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),O7(this,e,t,n,r,a,i)},r5().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),D7(this,e,t,n,r,a)},r5().prototype.divNoNan=function(e){return this.throwIfDisposed(),V7(this,e)},r5().prototype.div=function(e){return this.throwIfDisposed(),m8(this,e)},r5().prototype.dot=function(e){return this.throwIfDisposed(),G7(this,e)},r5().prototype.elu=function(){return this.throwIfDisposed(),H7(this)},r5().prototype.equal=function(e){return this.throwIfDisposed(),B7(this,e)},r5().prototype.erf=function(){return this.throwIfDisposed(),K7(this)},r5().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),h9(this,e,t)},r5().prototype.exp=function(){return this.throwIfDisposed(),p9(this)},r5().prototype.expandDims=function(e){return this.throwIfDisposed(),f9(this,e)},r5().prototype.expm1=function(){return this.throwIfDisposed(),d9(this)},r5().prototype.fft=function(){return this.throwIfDisposed(),_te(this)},r5().prototype.flatten=function(){return this.throwIfDisposed(),X8(this,[this.size])},r5().prototype.floor=function(){return this.throwIfDisposed(),g9(this)},r5().prototype.floorDiv=function(e){return this.throwIfDisposed(),v8(this,e)},r5().prototype.gather=function(e,t,n){return this.throwIfDisposed(),y9(this,e,t,n)},r5().prototype.greaterEqual=function(e){return this.throwIfDisposed(),x9(this,e)},r5().prototype.greater=function(e){return this.throwIfDisposed(),b9(this,e)},r5().prototype.ifft=function(){return this.throwIfDisposed(),Ote(this)},r5().prototype.irfft=function(){return this.throwIfDisposed(),Fte(this)},r5().prototype.isFinite=function(){return this.throwIfDisposed(),w9(this)},r5().prototype.isInf=function(){return this.throwIfDisposed(),I9(this)},r5().prototype.isNaN=function(){return this.throwIfDisposed(),N9(this)},r5().prototype.leakyRelu=function(e){return this.throwIfDisposed(),S9(this,e)},r5().prototype.lessEqual=function(e){return this.throwIfDisposed(),E9(this,e)},r5().prototype.less=function(e){return this.throwIfDisposed(),T9(this,e)},r5().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),A9(this,e,t,n,r)},r5().prototype.logSigmoid=function(){return this.throwIfDisposed(),z9(this)},r5().prototype.logSoftmax=function(e){return this.throwIfDisposed(),B9(this,e)},r5().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),W9(this,e,t)},r5().prototype.log=function(){return this.throwIfDisposed(),R9(this)},r5().prototype.log1p=function(){return this.throwIfDisposed(),_9(this)},r5().prototype.logicalAnd=function(e){return this.throwIfDisposed(),U9(this,e)},r5().prototype.logicalNot=function(){return this.throwIfDisposed(),V9(this)},r5().prototype.logicalOr=function(e){return this.throwIfDisposed(),G9(this,e)},r5().prototype.logicalXor=function(e){return this.throwIfDisposed(),j9(this,e)},r5().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Q8(this,e,t,n)},r5().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),X9(this,e,t,n,r)},r5().prototype.max=function(e,t){return this.throwIfDisposed(),n9(this,e,t)},r5().prototype.maximum=function(e){return this.throwIfDisposed(),Z9(this,e)},r5().prototype.mean=function(e,t){return this.throwIfDisposed(),Q9(this,e,t)},r5().prototype.min=function(e,t){return this.throwIfDisposed(),r9(this,e,t)},r5().prototype.minimum=function(e){return this.throwIfDisposed(),nee(this,e)},r5().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),ree(this,e,t)},r5().prototype.mod=function(e){return this.throwIfDisposed(),aee(this,e)},r5().prototype.mul=function(e){return this.throwIfDisposed(),g8(this,e)},r5().prototype.neg=function(){return this.throwIfDisposed(),M9(this)},r5().prototype.norm=function(e,t,n){return this.throwIfDisposed(),l9(this,e,t,n)},r5().prototype.notEqual=function(e){return this.throwIfDisposed(),uee(this,e)},r5().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),cee(this,e,t,n)},r5().prototype.onesLike=function(){return this.throwIfDisposed(),lee(this)},r5().prototype.pad=function(e,t){return this.throwIfDisposed(),pee(this,e,t)},r5().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),yee(this,e,t,n,r,a,i)},r5().prototype.pow=function(e){return this.throwIfDisposed(),a9(this,e)},r5().prototype.prelu=function(e){return this.throwIfDisposed(),bee(this,e)},r5().prototype.prod=function(e,t){return this.throwIfDisposed(),xee(this,e,t)},r5().prototype.reciprocal=function(){return this.throwIfDisposed(),cte(this)},r5().prototype.relu=function(){return this.throwIfDisposed(),lte(this)},r5().prototype.relu6=function(){return this.throwIfDisposed(),hte(this)},r5().prototype.reshapeAs=function(e){return this.throwIfDisposed(),X8(this,e.shape)},r5().prototype.reshape=function(e){return this.throwIfDisposed(),X8(this,e)},r5().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),sre(this,e,t,n)},r5().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),ure(this,e,t,n)},r5().prototype.reverse=function(e){return this.throwIfDisposed(),pte(this,e)},r5().prototype.rfft=function(){return this.throwIfDisposed(),Mte(this)},r5().prototype.round=function(){return this.throwIfDisposed(),gte(this)},r5().prototype.rsqrt=function(){return this.throwIfDisposed(),yte(this)},r5().prototype.selu=function(){return this.throwIfDisposed(),bte(this)},r5().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),xte(this,e,t,n,r,a,i)},r5().prototype.sigmoid=function(){return this.throwIfDisposed(),$8(this)},r5().prototype.sign=function(){return this.throwIfDisposed(),Ite(this)},r5().prototype.sin=function(){return this.throwIfDisposed(),Nte(this)},r5().prototype.sinh=function(){return this.throwIfDisposed(),Ste(this)},r5().prototype.slice=function(e,t){return this.throwIfDisposed(),e7(this,e,t)},r5().prototype.softmax=function(e){return this.throwIfDisposed(),Rte(this,e)},r5().prototype.softplus=function(){return this.throwIfDisposed(),L9(this)},r5().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),gee(this,e,t)},r5().prototype.split=function(e,t){return this.throwIfDisposed(),Dte(this,e,t)},r5().prototype.sqrt=function(){return this.throwIfDisposed(),o9(this)},r5().prototype.square=function(){return this.throwIfDisposed(),s9(this)},r5().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Lte(this,e)},r5().prototype.squeeze=function(e){return this.throwIfDisposed(),zte(this,e)},r5().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof n5?[this,e]:[this].concat(T(e));return Pte(n,t)},r5().prototype.step=function(e){return this.throwIfDisposed(),Bte(this,e)},r5().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),Wte(this,e,t,n,r,a,i,o,s)},r5().prototype.sub=function(e){return this.throwIfDisposed(),P9(this,e)},r5().prototype.sum=function(e,t){return this.throwIfDisposed(),u9(this,e,t)},r5().prototype.tan=function(){return this.throwIfDisposed(),Ute(this)},r5().prototype.tanh=function(){return this.throwIfDisposed(),t7(this)},r5().prototype.tile=function(e){return this.throwIfDisposed(),v9(this,e)},r5().prototype.toBool=function(){return this.throwIfDisposed(),h8(this,"bool")},r5().prototype.toFloat=function(){return this.throwIfDisposed(),h8(this,"float32")},r5().prototype.toInt=function(){return this.throwIfDisposed(),h8(this,"int32")},r5().prototype.topk=function(e,t){return this.throwIfDisposed(),$te(this,e,t)},r5().prototype.transpose=function(e){return this.throwIfDisposed(),hne(this,e)},r5().prototype.unique=function(e){return this.throwIfDisposed(),tne(this,e)},r5().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),nne(this,e,t)},r5().prototype.unstack=function(e){return this.throwIfDisposed(),rne(this,e)},r5().prototype.where=function(e,t){return this.throwIfDisposed(),W7(e,this,t)},r5().prototype.zerosLike=function(){return this.throwIfDisposed(),U7(this)};var Tse=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),r=t.call(this,e),Object.setPrototypeOf(x(r),n.prototype),r}return p(n)}(b(Error)),Ese=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),r=t.call(this,e),Object.setPrototypeOf(x(r),n.prototype),r}return p(n)}(b(Error)),Cse=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),r=t.call(this,e),Object.setPrototypeOf(x(r),n.prototype),r}return p(n)}(b(Error)),Ase=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),r=t.call(this,e),Object.setPrototypeOf(x(r),n.prototype),r}return p(n)}(b(Error)),Rse=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),r=t.call(this,e),Object.setPrototypeOf(x(r),n.prototype),r}return p(n)}(b(Error)),_se=(Error,function(){function e(t){l(this,e),this.maxEntries=t||100,this.cache=new Map}return p(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}());function Ose(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function Fse(e,t){if(!e)throw new Rse(t)}function Dse(e,t){var n,r=0,a=O(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(e){a.e(e)}finally{a.f()}return r}function Mse(e){return 1===e.length?e[0]:e}function Lse(e){return Array.isArray(e)?e:[e]}function zse(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function Pse(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var Bse={};function Wse(e){if(null==e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function Use(e){if(null!=e&&"object"===s(e))if(Array.isArray(e))e.forEach((function(e){return Use(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===s(a)&&(Array.isArray(a)||"ndarray"!==a.type||"number"!=typeof a.value?Use(a):e[r]=a.value)}}function Vse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"==typeof e){var i,o=e;if(o in n)i=n[o];else if(o in Bse)i=Bse[o];else if(null==(i=t[o]))throw new Cse("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var s=e;if(null==s.className||null==s.config)throw new Cse("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var u,c,l=s.className;if(l in n){var h=S(n[l],2);u=h[0],c=h[1]}else if(l in Bse){var p=S(Bse.className,2);u=p[0],c=p[1]}else if(l in t){var f=S(t[l],2);u=f[0],c=f[1]}if(null==u)throw new Cse("Unknown ".concat(r,": ").concat(l,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=c){for(var d={},v=0,m=Object.keys(Bse);v<m.length;v++){var g=m[v];d[g]=Bse[g]}for(var y=0,b=Object.keys(n);y<b.length;y++){var x=b[y];d[x]=n[x]}var k=s.config;k.customObjects=d;for(var w=Object.assign({},Bse),I=0,N=Object.keys(n);I<N.length;I++){var T=N[I];Bse[T]=n[T]}Use(s.config);var E=c(u,s.config,n,a);return Bse=Object.assign({},w),E}for(var C=Object.assign({},Bse),A=0,R=Object.keys(n);A<R.length;A++){var _=R[A];Bse[_]=n[_]}var O=new u(s.config);return Bse=Object.assign({},C),O}function Gse(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function jse(e){if(null==e)return e;var t,n=[],r=O(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(e){r.e(e)}finally{r.f()}return n}function Hse(e){if(null==e)throw new Cse("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function qse(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new Cse("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function Kse(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return Fse(n>=0),Fse(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return s(e)===t}))}function Xse(e,t){Array.isArray(e)?(F$(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return Xse(e,"element ".concat(n+1," of ").concat(t))}))):F$(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(Yse(e),".")}))}function Yse(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return Yse(e)})).join(",")+"]":"string"==typeof e?'"'.concat(e,'"'):"".concat(e)}function Jse(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var Zse=0;function Qse(){return Zse++}var $se={};function eue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in $se||($se[e]=0),$se[e]+=1,e+$se[e].toString()}var tue=["channelsFirst","channelsLast"],nue=["nearest","bilinear"],rue=["valid","same","causal"],aue=["max","avg"],iue=["sum","mul","concat","ave"],oue=new Map;function sue(e){qse(tue,"DataFormat",e)}function uue(e){qse(rue,"PaddingMode",e)}function cue(e){qse(aue,"PoolMode",e)}var lue=[];function hue(e,t){lue.push(e);try{var n=t();return lue.pop(),n}catch(e){throw lue.pop(),e}}function pue(e){if(!mue(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===lue.length?"":lue.join("/")+"/")+e}function fue(e){if(!mue(e))throw new Error("Not a valid tensor name: '"+e+"'");oue.has(e)||oue.set(e,0);var t=oue.get(e);if(oue.set(e,oue.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return oue.set(n,1),n}return e}var due,vue=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function mue(e){return!!e.match(vue)}function gue(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function yue(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function bue(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function xue(e,t){if(t<e)throw new Cse("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function kue(){return null==due&&(due=e6().epsilon()),due}function wue(e,t){return h8(e,t)}function Iue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),X8(e,n)}function Nue(e){var t=[gue(e.shape)];return X8(e,t)}function Sue(e,t,n){return X5((function(){switch(e.rank){case 1:return Tte(e,t,n);case 2:return Ete(e,[t,0],[n,e.shape[1]]);case 3:return Cte(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Ate(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return e7(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return e7(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Cse("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Tue(e,t,n){return X5((function(){switch(e.rank){case 1:return Tte(e,t,n);case 2:return Ete(e,[0,t],[e.shape[0],n]);case 3:return Cte(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Ate(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Cse("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Eue(e,t,n,r){return X5((function(){switch(e.rank){case 1:return Tte(e,t,n);case 2:switch(r){case 1:return Sue(e,t,n);case 2:return Tue(e,t,n);default:throw new Cse("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return Sue(e,t,n);case 2:return Cte(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Tue(e,t,n);default:throw new Cse("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return Sue(e,t,n);case 2:return Ate(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Ate(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Tue(e,t,n);default:throw new Cse("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new Cse("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Cue(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),Z8(e,n)}function Aue(e,t){switch(e.rank){case 1:return v7([e,t]);case 2:return m7([e,t],0);case 3:return g7([e,t],0);case 4:return y7([e,t],0);default:throw new Cse("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function Rue(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Cse("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return v9(e,t)}function _ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return rte(e,t,n,r,a)}function Oue(e,t,n,r){if(e.rank<2||t.rank<2)throw new Ase("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new Ase("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return _ne({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Mue(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),i=a.pop();e=X8(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),c=[].concat(T(o),[s]),l=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=X8(hne(t,l),[u,-1]);var h=[].concat(T(a),T(c));return X8(_ne({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Mue(e.rank,r,"channelsLast"):null,activation:n}),h)}function Fue(e,t,n){return X5((function(){return t=Array.isArray(t)?Vte(t,"int32"):h8(t,"int32"),y9(e,t,n)}))}function Due(e){return g8(e,e)}function Mue(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new Cse("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?X8(t,[1,r[0],1,1,1]):X8(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?X8(t,[1,1,1,1,r[0]]):X8(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?X8(t,[1,r[0],1,1]):X8(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?X8(t,[1,1,1,r[0]]):X8(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?X8(t,[1,r[0],1]):X8(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?X8(t,[1,1,r[0]]):X8(t,[1].concat(r))}else if(e<3)return t;throw new Cse("Unsupported input rank by biasAdd: ".concat(t.rank))}function Lue(e,t,n){return X5((function(){return null==n&&(n="channelsLast"),sue(n),d8(e,Mue(e.rank,t,n))}))}function zue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new Ase("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return H7(e)}function Pue(e,t,n,r){return X5((function(){return gne(e,t,n,r)}))}function Bue(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var Wue=["fanIn","fanOut","fanAvg"],Uue=["normal","uniform","truncatedNormal"];var Vue=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(Hre),Gue=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e,t){return $9(e,t)}}]),n}(Vue);Gue.className="Zeros",Kre(Gue);var jue=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e,t){return eee(e,t)}}]),n}(Vue);jue.className="Ones",Kre(jue);var Hue=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),r=t.call(this),"object"!==s(e))throw new Cse("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new Cse("config must have value set but got ".concat(e));return r.value=e.value,r}return p(n,[{key:"apply",value:function(e,t){var n=this;return X5((function(){return g8(i9(n.value),eee(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(Vue);Hue.className="Constant",Kre(Hue);var que=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return p(n,[{key:"apply",value:function(e,t){return ite(e,this.minval,this.maxval,t,this.seed)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(Vue);que.className="RandomUniform",Kre(que);var Kue=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return p(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Ase("randomNormal does not support dType ".concat(t,"."));return _ue(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(Vue);Kue.className="RandomNormal",Kre(Kue);var Xue=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return p(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Ase("truncatedNormal does not support dType ".concat(t,"."));return ene(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(Vue);Xue.className="TruncatedNormal",Kre(Xue);var Yue=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return p(n,[{key:"apply",value:function(e,t){var n=this;return X5((function(){if(2!==e.length||e[0]!==e[1])throw new Cse("Identity matrix initializer can only be used for 2D square matrices.");return g8(n.gain,m9(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(Vue);Yue.className="Identity",Kre(Yue);var Jue=function(e){d(n,e);var t=w(n);function n(e){var r,a;if(l(this,n),r=t.call(this),e.scale<0)throw new Cse("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,qse(Wue,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){qse(Uue,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return p(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(sue(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=gue(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=gue(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=gue(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Ase("".concat(this.getClassName()," does not support dType ").concat(t,"."));return ene(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return ite(e,-s,s,t,this.seed)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(Vue);Jue.className="VarianceScaling",Kre(Jue);var Zue=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return p(n,[{key:"getClassName",value:function(){return Jue.className}}]),n}(Jue);Zue.className="GlorotUniform",Kre(Zue);var Que=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return p(n,[{key:"getClassName",value:function(){return Jue.className}}]),n}(Jue);Que.className="GlorotNormal",Kre(Que);var $ue=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return p(n,[{key:"getClassName",value:function(){return Jue.className}}]),n}(Jue);$ue.className="HeNormal",Kre($ue);var ece=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return p(n,[{key:"getClassName",value:function(){return Jue.className}}]),n}(Jue);ece.className="HeUniform",Kre(ece);var tce=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return p(n,[{key:"getClassName",value:function(){return Jue.className}}]),n}(Jue);tce.className="LeCunNormal",Kre(tce);var nce=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return p(n,[{key:"getClassName",value:function(){return Jue.className}}]),n}(Jue);nce.className="LeCunUniform",Kre(nce);var rce=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.ELEMENTS_WARN_SLOW=2e3,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,r}return p(n,[{key:"apply",value:function(e,t){var n=this;return X5((function(){if(e.length<2)throw new Ase("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));var r=L$(e.slice(0,-1)),a=e[e.length-1],i=r*a;i>n.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(n.ELEMENTS_WARN_SLOW," (").concat(i,") elements: ")+"Slowness may result.");var o=_ue([Math.max(a,r),Math.min(a,r)],0,1,t,n.seed),s=Bre.qr(o,!1),u=s[0],c=s[1].flatten().stridedSlice([0],[Math.min(a,r)*Math.min(a,r)],[Math.min(a,r)+1]);return u=g8(u,c.sign()),r<a&&(u=u.transpose()),g8(i9(n.gain),u.reshape(e))}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(Vue);rce.className="Orthogonal",Kre(rce);var ace={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function ice(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vse(e,qre.getMap().classNameMap,t,"initializer")}function oce(e){return Wse(e)}function sce(e){if("string"==typeof e){var t=e in ace?ace[e]:e;if("GlorotNormal"===t)return new Que;if("GlorotUniform"===t)return new Zue;if("HeNormal"===t)return new $ue;if("HeUniform"===t)return new ece;if("LeCunNormal"===t)return new tce;if("LeCunUniform"===t)return new nce;var n={};return n.className=t,n.config={},ice(n)}return e instanceof Vue?e:ice(e)}function uce(e){return Array.isArray(e)&&Array.isArray(e[0])}function cce(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function lce(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new Cse("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function hce(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new Cse("Expected exactly 1 Shape; got ".concat(e.length))}return e}function pce(e){var t,n=0,r=O(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(e){r.e(e)}finally{r.f()}return n}var fce="Variable",dce=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fce,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;l(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=Qse(),r=null==r?fce:r,this.originalName=pue(r),this.name=fue(this.originalName),this.trainable_=a,this.constraint=i,this.val=ine(t,this.trainable_,this.name,this.dtype)}return p(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function vce(e){return e.map((function(e){return e.read()}))}function mce(e){e.forEach((function(e){e[0].write(e[1])}))}var gce=p((function e(t){l(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),yce=p((function e(t,n,r,a,i,o,s){l(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=Qse(),null!=o&&(this.originalName=pue(o),this.name=fue(this.originalName)),this.rank=n.length})),bce=0,xce=function(){function e(t,n){l(this,e),this.callArgs=n,this.id=bce++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=O(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(e){a.e(e)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return p(e,[{key:"getConfig",value:function(){var e,t=[],n=O(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(e){n.e(e)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),kce=0,wce=function(e){d(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=kce++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=zse(i)+"_"+eue(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return p(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new Ese("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new Cse("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return Mse(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return Mse(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new Tse("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Tse("Layer ".concat(this.name)+" is not connected, no input to return.");return Mse(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new Tse("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Tse("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return Mse(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){var t=Lse(e);if(null!=this.inputSpec&&0!==this.inputSpec.length){var n=Lse(this.inputSpec);if(t.length!==n.length)throw new Cse("Layer ".concat(this.name," expects ").concat(n.length," inputs, ")+"but it received ".concat(t.length," input tensors. ")+"Input received: ".concat(e));for(var r=0;r<t.length;r++){var a=t[r],i=n[r];if(null!=i){var o=a.rank;if(null!=i.ndim&&o!==i.ndim)throw new Cse("Input ".concat(r," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(i.ndim,", found ndim=").concat(o));if(null!=i.maxNDim&&o>i.maxNDim)throw new Cse("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(i.maxNDim,", found ndim=").concat(o));if(null!=i.minNDim&&o<i.minNDim)throw new Cse("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(i.minNDim,", found ndim=").concat(o,"."));if(null!=i.dtype&&a.dtype!==i.dtype)throw new Cse("Input ".concat(r," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(i.dtype,", found dtype=").concat(a.dtype,"."));if(i.axes){var s=a.shape;for(var u in i.axes){var c=Number(u),l=i.axes[u],h=c>=0?s[c]:s[s.length+c];if(null!=l&&-1===[l,null].indexOf(h))throw new Cse("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(c," of input shape to ")+"have value ".concat(l," but got shape ").concat(s,"."))}}if(null!=i.shape)for(var p=0;p<i.shape.length;++p){var f=i.shape[p],d=a.shape[p];if(null!=f&&null!=d&&f!==d)throw new Cse("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(i.shape,", ")+"found shape=".concat(a.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r=Lse(e),a=function(e){var t,n=!0,r=O(Lse(e));try{for(r.s();!(t=r.n()).done;){if(!(t.value instanceof yce)){n=!1;break}}}catch(e){r.e(e)}finally{r.f()}return n}(e),i=function(e){var t,n=!0,r=O(Lse(e));try{for(r.s();!(t=r.n()).done;){if(t.value instanceof yce){n=!1;break}}}catch(e){r.e(e)}finally{r.f()}return n}(e);if(a===i)throw new Cse("Arguments to apply() must be all SymbolicTensors or all Tensors");return hue(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var a,o=[],s=O(Lse(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;o.push(u.shape)}}catch(e){s.e(e)}finally{s.f()}n.build(Mse(o)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&i&&(n._refCount=1)}if(n.assertInputCompatibility(e),i){var c=n.call(e,t);n.supportsMasking&&n.setMaskMetadata(e,c);var l,h=[],p=O(Lse(c));try{for(p.s();!(l=p.n()).done;){var f=l.value;-1!==r.indexOf(f)&&(f=f.clone()),h.push(f)}}catch(e){p.e(e)}finally{p.f()}if(c=Mse(h),null!=n.activityRegularizer)throw new Ase("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}var d,v=function(e){e=Lse(e);var t,n=[],r=O(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(e){r.e(e)}finally{r.f()}return Mse(n)}(e),m=n.computeOutputShape(v),g="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?v[0]:v),d=null!=m&&m.length>0&&Array.isArray(m[0])?m.map((function(r,a){return new yce(g,r,n,Lse(e),t,n.name,a)})):new yce(g,m,n,Lse(e),t,n.name),n.addInboundNode(e,d,null,null,v,m,t),n._refCount++,null!=n.activityRegularizer)throw new Ase("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return d}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Tse("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=O(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(e){n.e(e)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new Tse("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new Ese("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return pce(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return vce(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;X5((function(){var n=t.weights;if(n.length!==e.length)throw new Cse('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=vce(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!P$(o.shape,u.shape))throw new Cse("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([s,u])}mce(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new Cse("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():sce("zeros"));var u=r.apply(t,n),c=new dce(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(c.read())})),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=Lse(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,T(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"setMaskMetadata",value:function(e,t,n){if(this.supportsMasking){var r=this.computeMask(e,n),a=Lse(t),i=Lse(r);if(a.length!==i.length)throw new Error("".concat(this.name," outputs ").concat(a.length," tensors ")+"but ".concat(a.length," masks for those tensors"));for(var o=0;o<a.length;o++)a[o].kerasMask=i[o]}}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=Lse(e);t=Lse(t),n=Lse(n),r=Lse(r),a=cce(a),i=cce(i);var u,c=[],l=[],h=[],p=O(s);try{for(p.s();!(u=p.n()).done;){var f=u.value;c.push(f.sourceLayer),l.push(f.nodeIndex),h.push(f.tensorIndex)}}catch(e){p.e(e)}finally{p.f()}new xce({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:h,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(Hre);function Ice(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=O(Ice(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]));try{for(s.s();!(o=s.n()).done;){var u=o.value;-1===a.indexOf(u)&&a.push(u)}}catch(e){s.e(e)}finally{s.f()}}return a}var Nce=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:eue("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Cse("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new Cse("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Cse("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new yce(r.dtype,r.batchInputShape,x(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new xce({outboundLayer:x(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return p(n,[{key:"apply",value:function(e,t){throw new Cse("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(wce);function Sce(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new Cse("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new Nce({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}Nce.className="InputLayer",Kre(Nce);var Tce=function(){function e(t){if(l(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=O(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(e){a.e(e)}finally{a.f()}}}return p(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new Cse("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return h8(t,e.dtype)}catch(n){throw new Cse("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof yce){if(null==this.id2Value[e.id])throw new Cse("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new Cse("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof yce){if(null==this.id2Value[e.id])throw new Cse("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new Cse("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&Y5(this.id2Mask)}}]),e}(),Ece=new _se,Cce=new _se;function Ace(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],u=s.map((function(e){return e.name})),c=[],l=t.names(),h=O(u);try{for(h.s();!(a=h.n()).done;){var p=a.value;-1!==l.indexOf(p)?c.push(t.getValue(p)):c.push(null)}}catch(e){h.e(e)}finally{h.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var f,d=u.join(",")+"|"+t.names().sort().join(","),v=Ece.get(d);if(null==v){var m=function(e,t){F$(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=_ce(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=O(e);try{for(s.s();!(i=s.n()).done;){var u,c=_ce(i.value,t),l=c.sorted,h=c.recipientMap,p=O(l);try{for(p.s();!(u=p.n()).done;){var f=u.value;o.has(f.name)||(n.push(f),o.add(f.name))}}catch(e){p.e(e)}finally{p.f()}var d=function(e){null==r[e]&&(r[e]=new Set),h[e].forEach((function(t){return r[e].add(t)}))};for(var v in h)d(v)}}catch(e){s.e(e)}finally{s.f()}}return{sorted:n,recipientCounts:Rce(r)}}(s,t);v=m.sorted,f=m.recipientCounts,Ece.put(d,v),Cce.put(d,f)}f={},i||Object.assign(f,Cce.get(d));for(var g=new Tce(t),y=0;y<v.length;++y){if(null!=r){var b=K5().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=v[y],k=x.sourceLayer;if(!(k instanceof Nce)){var w,I=[],N=[],S=[],T=!1,E=O(x.inputs);try{for(E.s();!(w=E.n()).done;){var C=w.value,A=g.getValue(C),R=g.getMask(C);I.push(A),N.push(R),null!=R&&(T=!0),i||(f[C.name]--,0!==f[C.name]||t.hasKey(C)||-1!==u.indexOf(C.name)||A.isDisposed||!0===C.sourceLayer.stateful||S.push(A))}}catch(e){E.e(e)}finally{E.f()}T&&((n=n||{}).mask=N[0]);var _=Lse(k.apply(I,n)),F=null;k.supportsMasking&&(F=k.computeMask(I,N));for(var D=Oce(x),M=Array.isArray(D)?D:[D],L=0;L<M.length;++L){g.hasKey(M[L])||g.add(M[L],_[L],Array.isArray(F)?F[0]:F);var z=u.indexOf(M[L].name);-1!==z&&(c[z]=_[L])}i||Y5(S)}}return g.disposeMasks(),o?c:c[0]}function Rce(e){var t={};for(var n in e)t[n]=e[n].size;return t}function _ce(e,t){var n,r=new Set,a=[],i={},o=O(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(e){o.e(e)}finally{o.f()}var u=[],c=[];for(u.push(e);u.length>0;){var l=u[u.length-1];if(r.has(l.name))u.pop();else{var h=c[c.length-1]===u.length-1;if(0===l.inputs.length||h)u.pop(),a.push(l),r.add(l.name),h&&c.pop();else{c.push(u.length-1);var p,f=O(l.inputs);try{for(f.s();!(p=f.n()).done;){var d=p.value;null==i[d.name]&&(i[d.name]=new Set),i[d.name].add(l.name),r.has(d.name)||u.push(d)}}catch(e){f.e(e)}finally{f.f()}}}}return{sorted:a,recipientMap:i}}function Oce(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=O(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(e){i.e(e)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function Fce(e,t){return X5((function(){return o9(u9(g8(e,e),t,!0))}))}k0().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=Ece&&Ece.setMaxEntries(e),null!=Cce&&Cce.setMaxEntries(e)}));var Dce=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"getConfig",value:function(){return{}}}]),n}(Hre),Mce=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return p(n,[{key:"apply",value:function(e){var t=this;return X5((function(){var n=Fce(e,t.axis),r=d7(n,0,t.maxValue);return g8(e,m8(r,d8(kue(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(Dce);Mce.className="MaxNorm",Kre(Mce);var Lce=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return p(n,[{key:"apply",value:function(e){var t=this;return X5((function(){return m8(e,d8(kue(),Fce(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(Dce);Lce.className="UnitNorm",Kre(Lce);var zce=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return lte(e)}}]),n}(Dce);zce.className="NonNeg",Kre(zce);var Pce=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return p(n,[{key:"apply",value:function(e){var t=this;return X5((function(){var n=Fce(e,t.axis),r=d8(g8(t.rate,d7(n,t.minValue,t.maxValue)),g8(1-t.rate,n));return g8(e,m8(r,d8(kue(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(Dce);Pce.className="MinMaxNorm",Kre(Pce);var Bce={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Wce(e){return Wse(e)}function Uce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vse(e,qre.getMap().classNameMap,t,"constraint")}function Vce(e){return null==e?null:"string"==typeof e?Uce({className:e in Bce?Bce[e]:e,config:{}}):e instanceof Dce?e:Uce(e)}var Gce={__proto__:null,maxNorm:function(e){return new Mce(e)},minMaxNorm:function(e){return new Pce(e)},nonNeg:function(){return new zce},unitNorm:function(e){return new Lce(e)}};var jce,Hce={__proto__:null,constant:function(e){return new Hue(e)},glorotNormal:function(e){return new Que(e)},glorotUniform:function(e){return new Zue(e)},heNormal:function(e){return new $ue(e)},heUniform:function(e){return new ece(e)},identity:function(e){return new Yue(e)},leCunNormal:function(e){return new tce(e)},leCunUniform:function(e){return new nce(e)},ones:function(){return new jue},orthogonal:function(e){return new rce(e)},randomNormal:function(e){return new Kue(e)},randomUniform:function(e){return new que(e)},truncatedNormal:function(e){return new Xue(e)},varianceScaling:function(e){return new Jue(e)},zeros:function(){return new Gue}};function qce(e){return Kce.apply(this,arguments)}function Kce(){return Kce=c(o().mark((function e(t){var n,r,a,i,s,u,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!=typeof(s=t[i])&&(u=s,n.push(u.data()),r.push(i),a.push(u));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(c=e.sent,l=0;l<c.length;++l)t[r[l]]=c[l][0];Y5(a);case 12:case"end":return e.stop()}}),e)}))),Kce.apply(this,arguments)}function Xce(e){if(null!=e)for(var t in e){var n=e[t];"number"!=typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(jce||(jce={}));var Yce=function(){function e(){l(this,e),this.validationData=null}var t,n,r,a,i,s;return p(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:(s=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return s.apply(this,arguments)})},{key:"onEpochEnd",value:(i=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"onBatchBegin",value:(a=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"onBatchEnd",value:(r=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"onTrainBegin",value:(n=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"onTrainEnd",value:(t=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"setModel",value:function(e){}}]),e}(),Jce=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;l(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}var t,n,r,a,i,s;return p(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=O(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=O(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"onEpochBegin",value:(s=c(o().mark((function e(t,n){var r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=O(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return s.apply(this,arguments)})},{key:"onEpochEnd",value:(i=c(o().mark((function e(t,n){var r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=O(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return i.apply(this,arguments)})},{key:"onBatchBegin",value:(a=c(o().mark((function e(t,n){var r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=O(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return a.apply(this,arguments)})},{key:"onBatchEnd",value:(r=c(o().mark((function e(t,n){var r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=O(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return r.apply(this,arguments)})},{key:"onTrainBegin",value:(n=c(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=O(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e){return n.apply(this,arguments)})},{key:"onTrainEnd",value:(t=c(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=O(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e){return t.apply(this,arguments)})}]),e}(),Zce=function(e){d(i,e);var t,n,r,a=w(i);function i(){return l(this,i),a.call(this)}return p(i,[{key:"onEpochBegin",value:(r=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"onBatchEnd",value:(n=c(o().mark((function e(t,n){var r,a,i,s=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=o().mark((function e(t){var a,i,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"number"==typeof(a=n[t])?(s.totals.hasOwnProperty(t)||(s.totals[t]=0),s.totals[t]=s.totals[t]+a*r):(t in s.totals?i=s.totals[t]:s.totals[t]=0,u=X5((function(){return d8(s.totals[t],g8(a,r))})),s.totals[t]=u,null!=i&&i.dispose());case 2:case"end":return e.stop()}}),e)})),e.t0=o().keys(n);case 5:if((e.t1=e.t0()).done){e.next=10;break}return i=e.t1.value,e.delegateYield(a(i),"t2",8);case 8:e.next=5;break;case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"onEpochEnd",value:(t=c(o().mark((function e(t,n){var r,a,i,s=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=20;break}r=O(this.params.metrics),e.prev=2,i=o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.value,null!=s.totals[t]){e.next=3;break}return e.abrupt("return","continue");case 3:"number"==typeof s.totals[t]?n[t]=s.totals[t]/s.seen:X5((function(){var e=g8(m8(1,s.seen),s.totals[t]);n[t]=e,s.totals[t].dispose(),J5(n[t])}));case 4:case"end":return e.stop()}}),e)})),r.s();case 5:if((a=r.n()).done){e.next=12;break}return e.delegateYield(i(),"t0",7);case 7:if("continue"!==e.t0){e.next=10;break}return e.abrupt("continue",10);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),r.e(e.t1);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])}))),function(e,n){return t.apply(this,arguments)})}]),i}(Yce),Qce=function(e){d(i,e);var t,n,r,a=w(i);function i(){return l(this,i),a.apply(this,arguments)}return p(i,[{key:"onTrainBegin",value:(r=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"onEpochEnd",value:(n=c(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"syncData",value:(t=c(o().mark((function e(){var t,n,r,a,i,s,u,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],s=0;s<i.length;++s)"number"!=typeof i[s]&&(u=i[s],t.push(u.data()),n.push(a),r.push(s));return e.next=6,Promise.all(t);case 6:for(c=e.sent,l=0;l<c.length;++l)this.history[n[l]][r[l]].dispose(),this.history[n[l]][r[l]]=c[l][0];case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(Yce),$ce=function(e){d(f,e);var t,n,r,a,i,s,u,h=w(f);function f(e,t){var n;if(l(this,f),(n=h.call(this)).currentEpoch=0,n.nowFunc=e.nowFunc,n.nextFrameFunc=e.nextFrameFunc||aie,n.yieldEvery=t||"auto","auto"===n.yieldEvery&&(n.yieldEvery=125),"never"===n.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return t0(n.yieldEvery)&&(n.maybeWait=function(e,t,n){var r,a=null!=n?n():z4();return function(){var i=null!=n?n():z4();return i-a<t?r:(a=i,r=e.apply(void 0,arguments))}}(n.maybeWait.bind(x(n)),n.yieldEvery,n.nowFunc)),n.trainBegin=e.onTrainBegin,n.trainEnd=e.onTrainEnd,n.epochBegin=e.onEpochBegin,n.epochEnd=e.onEpochEnd,n.batchBegin=e.onBatchBegin,n.batchEnd=e.onBatchEnd,n.yield=e.onYield,n}return p(f,[{key:"maybeWait",value:(u=c(o().mark((function e(t,n,r){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,qce(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return u.apply(this,arguments)})},{key:"onEpochBegin",value:(s=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,qce(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"onEpochEnd",value:(i=c(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,qce(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"onBatchBegin",value:(a=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,qce(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"onBatchEnd",value:(r=c(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,qce(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):t0(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"onTrainBegin",value:(n=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,qce(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"onTrainEnd",value:(t=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,qce(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),f}(Yce);function ele(e,t){return null==e&&(e={}),e instanceof Yce?[e]:Array.isArray(e)&&e[0]instanceof Yce?e:Lse(e).map((function(e){return new $ce(e,t)}))}var tle=function(){function e(){l(this,e)}return p(e,null,[{key:"registerCallbackConstructor",value:function(t,n){F$(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new Cse("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,T(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function nle(e,t,n,r,a,i,o,s,u){var c=new Qce,l=[new Zce].concat(T(tle.createCallbacks(t)));null!=e&&l.push.apply(l,T(e)),l.push(c);var h=new Jce(l);return h.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:h,history:c}}function rle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Vse(e,qre.getMap().classNameMap,t,"layer",n)}function ale(e,t){return X5((function(){"float32"!==e.dtype&&(e=h8(e,"float32"));var n=u9(Due(e),t,!0),r=f7(n.shape,kue()),a=o9(Z9(n,r));return m8(e,a)}))}function ile(e,t){return X5((function(){return Q9(Due(P9(t,e)),-1)}))}function ole(e,t){return X5((function(){return Q9(y8(P9(t,e)),-1)}))}function sle(e,t){return X5((function(){var n=P9(e,t),r=d7(y8(e),kue(),Number.MAX_VALUE),a=y8(m8(n,r));return g8(100,Q9(a,-1))}))}function ule(e,t){return X5((function(){var n=d7(t,kue(),Number.MAX_VALUE),r=R9(d8(1,n)),a=d7(e,kue(),Number.MAX_VALUE),i=R9(d8(1,a));return Q9(Due(P9(r,i)),-1)}))}function cle(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return X5((function(){if(n)t=Rte(t);else{var r=u9(t,t.shape.length-1,!0);t=m8(t,r)}return t=d7(t,kue(),1-kue()),M9(u9(g8(h8(e,"float32"),R9(t)),t.shape.length-1))}))}function lle(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return X5((function(){var r=h8(g9(Nue(e)),"int32"),a=(t=d7(t,kue(),1-kue())).shape;return cle(X8(cee(r,a[a.length-1]),a),t,n)}))}function hle(e,t){return X5((function(){var n;return n=d7(t,kue(),1-kue()),n=R9(m8(n,P9(1,n))),Q9(function(e,t){if(!P$(e.shape,t.shape))throw new Cse("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return X5((function(){var n=lte(t),r=M9(y8(t));return d8(P9(n,g8(t,e)),_9(p9(r)))}))}(e,n),-1)}))}function ple(e,t){return X5((function(){var n=d7(e,kue(),1),r=d7(t,kue(),1);return u9(g8(e,R9(m8(n,r))),-1)}))}function fle(e,t){return X5((function(){var n=ale(e,-1),r=ale(t,-1),a=g8(n,r);return M9(u9(a,-1))}))}tle.constructors={};var dle={meanSquaredError:ile,meanAbsoluteError:ole,meanAbsolutePercentageError:sle,meanSquaredLogarithmicError:ule,squaredHinge:function(e,t){return X5((function(){var n=Z9(0,P9(1,g8(e,t)));return Q9(Due(n),-1)}))},hinge:function(e,t){return X5((function(){var n=Z9(0,P9(1,g8(e,t)));return Q9(n,-1)}))},categoricalHinge:function(e,t){return X5((function(){var n=u9(g8(e,t),-1),r=n9(g8(P9(1,e),t),-1);return Z9(0,d8(1,P9(r,n)))}))},logcosh:function(e,t){return X5((function(){var n=Math.log(2),r=P9(t,e),a=P9(d8(r,L9(g8(-2,r))),n);return Q9(a,-1)}))},categoricalCrossentropy:cle,sparseCategoricalCrossentropy:lle,binaryCrossentropy:hle,kullbackLeiblerDivergence:ple,poisson:function(e,t){return X5((function(){var n=R9(d8(kue(),t));return Q9(P9(t,g8(e,n)),-1)}))},cosineProximity:fle};function vle(e){if("string"==typeof e){if(e in dle)return dle[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new Cse(t)}return e}function mle(e,t){return X5((function(){var n=g8(.5,lee(t)),r=wue(b9(t,n),e.dtype);return Q9(B7(e,r),-1)}))}function gle(e,t){return X5((function(){return wue(B7(N8(e,-1),N8(t,-1)),"float32")}))}function yle(e,t){return X5((function(){return h8(u9(U9(B7(e,1),B7(t,1))),"float32")}))}function ble(e,t){return X5((function(){var n=yle(e,t),r=function(e,t){return X5((function(){return h8(u9(U9(B7(e,0),B7(t,1))),"float32")}))}(e,t),a=d8(n,r);return h8(W7(b9(a,0),m8(n,a),0),"float32")}))}function xle(e,t){return X5((function(){var n=yle(e,t),r=function(e,t){return X5((function(){return h8(u9(U9(B7(e,1),B7(t,0))),"float32")}))}(e,t),a=d8(n,r);return h8(W7(b9(a,0),m8(n,a),0),"float32")}))}function kle(e,t){return hle(e,t)}function wle(e,t){return e.rank===t.rank&&(e=zte(e,[e.rank-1])),(t=N8(t,-1)).dtype!==e.dtype&&(t=h8(t,e.dtype)),h8(B7(e,t),"float32")}var Ile=cle,Nle=lle,Sle={binaryAccuracy:mle,categoricalAccuracy:gle,precision:ble,categoricalCrossentropy:Ile,sparseCategoricalCrossentropy:Nle,mse:ile,MSE:ile,mae:ole,MAE:ole,mape:sle,MAPE:sle,cosine:fle};function Tle(e){if(Fse(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"==typeof e)return e;for(var t,n=0,r=Object.keys(dle);n<r.length;n++){var a=r[n];if(dle[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(Sle);i<o.length;i++){var s=o[i];if(Sle[s]===e){t=s;break}}return void 0!==t?t:e.name}var Ele=1048576;function Cle(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==s(e)||Object.getPrototypeOf(e)!==Object.prototype||!Ale(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>Ele&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(Ele,"."))}}function Ale(e){if(null===e)return!0;if("object"===s(e)){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!=typeof r)return!1;if(!Ale(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=O(e);try{for(i.s();!(a=i.n()).done;){if(!Ale(a.value))return!1}}catch(e){i.e(e)}finally{i.f()}return!0}return!1}var o=s(e);return"string"===o||"number"===o||"boolean"===o}function Rle(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=Ole(e),o=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,T(e.nodesByDepth[s]))}a("_".repeat(t)),Fle(o,n,a),a("=".repeat(t));for(var c=e.layers,l=0;l<c.length;++l)i?Dle(c[l],n,a):Mle(c[l],n,r,a),a((l===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var h=_le(e),p=pce(e.nonTrainableWeights);a("Total params: ".concat(h+p)),a("Trainable params: ".concat(h)),a("Non-trainable params: ".concat(p)),a("_".repeat(t))}function _le(e){return null!=e.collectedTrainableWeights?pce(e.collectedTrainableWeights):pce(e.trainableWeights)}function Ole(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,T(s))}if(t){var u,c=O(e.layers);try{for(c.s();!(u=c.n()).done;){var l,h=u.value,p=!1,f=O(h.inboundNodes);try{for(f.s();!(l=f.n()).done;){var d=l.value;if(-1!==r.indexOf(d)){if(p){t=!1;break}p=!0}}}catch(e){f.e(e)}finally{f.f()}if(!t)break}}catch(e){c.e(e)}finally{c.f()}}return t}function Fle(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function Dle(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(e){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}var i=e.name,o=e.getClassName();Fle(["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()],t,n)}function Mle(e,t,n,r){var a,i;try{i=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(e){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(e){a="multiple"}var o,s=[],u=O(e.inboundNodes);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(var l=0;l<c.inboundLayers.length;++l){var h=c.inboundLayers[l].name,p=c.nodeIndices[l],f=c.tensorIndices[l];s.push("".concat(h,"[").concat(p,"][").concat(f,"]"))}}}catch(e){u.e(e)}finally{u.f()}var d=e.name,v=e.getClassName(),m=0===s.length?"":s[0];Fle(["".concat(d," (").concat(v,")"),i,a,e.countParams().toString(),m],t,r);for(var g=1;g<s.length;++g)Fle(["","","","",s[g]],t,r)}function Lle(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function zle(e,t){if(null===e)return null;if("string"==typeof e)return Pse(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];Lle(t,a,i)?n.push(i):n.push(zle(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c];if("name"===c&&"string"==typeof l)o[c]=l;else{var h=Pse(c);o[h]=zle(l,h)}}return o}function Ple(e,t){if(null==e)return null;if("string"==typeof e)return zse(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];Lle(t,a,i)?n.push(i):n.push(Ple(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c],h=zse(c);o[h]="name"!==c&&"className"!==c||"string"!=typeof l?Ple(l,c):l}return o}var Ble="4.22.0",Wle=function(e){var t=Object.keys(e);if(0===t.length)return!1;var n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))},Ule=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=eue(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],jse(r.inputs).length!==r.inputs.length)throw new Cse("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));jse(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=O(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.sourceLayer,c=s.nodeIndex,h=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(c),r.outputLayersTensorIndices.push(h)}}catch(e){o.e(e)}finally{o.f()}var p,f=O(r.inputs);try{for(f.s();!(p=f.n()).done;){var d=p.value,v=d.sourceLayer,m=d.nodeIndex,g=d.tensorIndex;Fse(0===m,"input layer has >1 nodes"),Fse(0===g,"input layer has >1 tensors"),r.inputLayers.push(v),r.inputLayersNodeIndices.push(m),r.inputLayersTensorIndices.push(g)}}catch(e){f.e(e)}finally{f.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var y=0;y<r.inputLayers.length;y++){var b=r.inputLayers[y];if(!(b instanceof Nce))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(y," (0-based) originates ")+"from layer type ".concat(b.getClassName(),"."));r.inputNames.push(b.name),r.feedInputShapes.push(b.batchInputShape),r.feedInputNames.push(b.name)}var k,w=O(r.outputLayers);try{for(w.s();!(k=w.n()).done;){var I=k.value;r.outputNames.push(I.name)}}catch(e){w.e(e)}finally{w.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var N,S={},T={},E={},C={},A={},R=[],_=function e(t,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var c=o.inboundNodes[s];if(-1!==i.indexOf(c))throw new Ese("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(o,s)),o.id in A||(A[o.id]=Object.keys(A).length),-1===i.indexOf(c)&&i.push(c);for(var l=c.inboundLayers.length,h=0;h<l;h++){e(c.inputTensors[h],a,i,c.inboundLayers[h],c.nodeIndices[h],c.tensorIndices[h])}for(a.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);R.push(c)}},F=[],D=[],M=O(r.outputs);try{for(M.s();!(N=M.n()).done;){_(N.value,F,D)}}catch(e){M.e(e)}finally{M.f()}var L,z=O(R.slice().reverse());try{for(z.s();!(L=z.n()).done;){var P=L.value;T[P.id]=P,P.id in S||(S[P.id]=0);var B=S[P.id],W=null==E[P.outboundLayer.id]?0:E[P.outboundLayer.id];B=Math.max(B,W),E[P.outboundLayer.id]=B,C[P.outboundLayer.id]=P.outboundLayer,S[P.id]=B;for(var U=0;U<P.inboundLayers.length;U++){var V=P.inboundLayers[U],G=P.nodeIndices[U],j=V.inboundNodes[G],H=null==S[j.id]?0:S[j.id];S[j.id]=Math.max(B+1,H),T[j.id]=j}}}catch(e){z.e(e)}finally{z.f()}var q={};for(var K in S){var X=S[K];X in q||(q[X]=[]),q[X].push(T[K])}var Y={};for(var J in E){var Z=E[J];Z in Y||(Y[Z]=[]),Y[Z].push(C[J])}var Q=Object.keys(Y).map((function(e){return parseInt(e,10)})).sort(Gse);r.layers=[];var $,ee=O(Q);try{for(ee.s();!($=ee.n()).done;){var te=Y[$.value];te.sort((function(e,t){var n=A[e.id],r=A[t.id];return n<r?-1:n>r?1:0}));var ne,re=O(te);try{for(re.s();!(ne=re.n()).done;){var ae=ne.value;ae instanceof n&&r.internalContainerRefs.push(ae),r.layers.push(ae)}}catch(e){re.e(e)}finally{re.f()}}}catch(e){ee.e(e)}finally{ee.f()}r.layersByDepth=Y,Q=Object.keys(q).map((function(e){return parseInt(e,10)})).sort(Gse);var ie,oe=r.inputs.slice(),se=[],ue=O(Q);try{for(ue.s();!(ie=ue.n()).done;){var ce,le=O(q[ie.value]);try{for(le.s();!(ce=le.n()).done;){var he=ce.value,pe=he.outboundLayer;if(null!=pe){var fe,de=O(he.inputTensors);try{for(de.s();!(fe=de.n()).done;){var ve=fe.value;if(-1===oe.indexOf(ve))throw new Ese("Graph disconnected: cannot obtain value for tensor ".concat(ve)+' at layer "'.concat(pe.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(se))}}catch(e){de.e(e)}finally{de.f()}var me,ge=O(he.outputTensors);try{for(ge.s();!(me=ge.n()).done;){var ye=me.value;oe.push(ye)}}catch(e){ge.e(e)}finally{ge.f()}se.push(pe.name)}}}catch(e){le.e(e)}finally{le.f()}}}catch(e){ue.e(e)}finally{ue.f()}r.nodesByDepth=q;var be,xe=r.layers.map((function(e){return e.name})),ke=O(xe);try{var we=function(){var e=be.value,t=xe.filter((function(t){return t===e})).length;if(1!==t)throw new Ese('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(xe))};for(ke.s();!(be=ke.n()).done;)we()}catch(e){ke.e(e)}finally{ke.f()}return r.outboundNodes=[],r.inboundNodes=[],new xce({outboundLayer:x(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return p(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){var t,n=O(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(e){n.e(e)}finally{n.f()}var a,i=O(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(e){i.e(e)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new Cse("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=O(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=O(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,T(r.nonTrainableWeights))}}catch(e){n.e(e)}finally{n.f()}if(!this.trainable){var a,i=[],o=O(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,T(s.trainableWeights))}}catch(e){o.e(e)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={},r=0,a=Wle(e);a&&this.parseWeights(e);var i,o=O(this.layers);try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=O(u.weights.entries());try{for(c.s();!(s=c.n()).done;){var l=S(s.value,2),h=l[0],p=l[1],f=a?"".concat(p.name.split("/").slice(0,-1).join("/")+"/").concat(h):p.originalName;if(null!=n[f])throw new Cse("Duplicate weight name: ".concat(f));n[f]=p,r++}}catch(e){c.e(e)}finally{c.f()}}}catch(e){o.e(e)}finally{o.f()}var d=[];for(var v in e){var m=v;if(null==n[v]){var g=v.split("/"),y=g.slice(0,-2).concat([g[g.length-1]]);m=y.join("/")}if(null!=n[m])d.push([n[m],e[v]]);else if(t)throw new Cse("Provided weight data has no target variable: ".concat(v));delete n[m]}if(t){var b=[];for(var x in n)b.push(x);if(b.length>0)throw new Cse("".concat(b.length," of ").concat(r," weights are not set: ")+"".concat(b))}mce(d)}},{key:"parseWeights",value:function(e){var t=function(){var t=n.split("/"),r=["vars","layer_checkpoint_dependencies"],a=t.map((function(e){return e.startsWith("_")?e.slice(1):e})).filter((function(e){return!r.includes(e)})).join("/");a!==n&&(e[a]=e[n],delete e[n])};for(var n in Object.keys(e))t()}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(Ble),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Ple(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return X5((function(){e=Lse(e);for(var r=new Tce,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return Ace(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return X5((function(){var r;return e=Lse(e),r=null==t?Ose(null,e.length):Lse(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=cce(e);if(t.length!==this.inputLayers.length)throw new Cse("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Gse);if(o.length>1){var s,u=O(o);try{for(u.s();!(s=u.n()).done;){var c,l=s.value,h=O(this.nodesByDepth[l]);try{for(h.s();!(c=h.n()).done;){var p=c.value,f=p.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(f.id)){for(var d=[],v=0;v<p.inboundLayers.length;v++){var m=p.inboundLayers[v],g=p.nodeIndices[v],y=p.tensorIndices[v],b=n["".concat(m.name,"_").concat(g,"_").concat(y)];d.push(b)}for(var x=cce(f.computeOutputShape(Mse(d))),k=f.inboundNodes.indexOf(p),w=0;w<x.length;w++){n["".concat(f.name,"_").concat(k,"_").concat(w)]=x[w]}}}}catch(e){h.e(e)}finally{h.f()}}}catch(e){u.e(e)}finally{u.f()}}for(var I=[],N=[],S=0;S<this.outputLayers.length;S++){var T=this.outputLayers[S],E=this.outputLayersNodeIndices[S],C=this.outputLayersTensorIndices[S],A="".concat(T.name,"_").concat(E,"_").concat(C);N.push(A)}for(var R=0;R<N.length;R++){var _=N[R];Fse(_ in n),I.push(n[_])}return Mse(I)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=Ose(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var s,u=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Gse),c=O(u);try{for(c.s();!(s=c.n()).done;){var l,h=s.value,p=O(this.nodesByDepth[h]);try{for(p.s();!(l=p.n()).done;){var f,d=l.value,v=d.outboundLayer,m=d.inputTensors,g=d.outputTensors,y=new Array,b=O(m);try{for(b.s();!(f=b.n()).done;){var x=f.value;x.id in n&&y.push(n[x.id])}}catch(e){b.e(e)}finally{b.f()}if(y.length===m.length){var k={},w=void 0,I=void 0,N=void 0,T=void 0;if(null!=d.callArgs&&(k=d.callArgs),1===y.length){var E=S(y[0],2),C=E[0],A=E[1];null==k.mask&&(k.mask=A),N=Lse(v.call(C,k)),T=Lse(v.computeMask(C,A)),w=[C],I=[A]}else w=y.map((function(e){return e[0]})),I=y.map((function(e){return e[1]})),null==k.mask&&(k.mask=I),N=Lse(v.call(w,k)),T=Lse(v.computeMask(w,I));if(v.activityRegularizer)throw new Ase("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var R=0;R<g.length;++R){var _=g[R],F=N[R],D=T[R];n[_.id]=[F,D]}}}}catch(e){p.e(e)}finally{p.f()}}}catch(e){c.e(e)}finally{c.f()}var M,L=[],z=[],P=[],B=O(this.outputs);try{for(B.s();!(M=B.n()).done;){var W=M.value;Fse(W.id in n,"Could not compute output ".concat(W.name," : ").concat(W.id));var U=S(n[W.id],2),V=U[0],G=U[1];P.push(V.shape),L.push(V),z.push(G)}}catch(e){B.e(e)}finally{B.f()}return[L,z,P]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=O(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(e){i.e(e)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new Cse("Provide either a layer name or layer index");if("number"==typeof e)return this.findLayer(e);var n,r=O(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(e){r.e(e)}finally{r.f()}throw new Cse("No such layer: ".concat(e))}},{key:"findLayer",value:function(e){if(this.layers.length<=e)throw new Cse("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}},{key:"calculateLosses",value:function(){var e=this;return X5((function(){var t,r=[],a=O(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,T(i.calculateLosses()))}}catch(e){a.e(e)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=O(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),c=[],l=0;l<o.inboundNodes.length;l++){var h=o.inboundNodes[l],p=n.nodeKey(o,l),f={};if(this.containerNodes.has(p)){if(h.callArgs)try{JSON.stringify(h.callArgs),f=h.callArgs}catch(e){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(h.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),f={}}if(h.inboundLayers.length>0){for(var d=[],v=0;v<h.inboundLayers.length;v++){var m=h.inboundLayers[v],g=h.nodeIndices[v],y=h.tensorIndices[v],b=r[n.nodeKey(m,g)];null==b&&(b=0),d.push([m.name,b,y,f])}c.push(d)}}}var x={};x.name=o.name,x.className=s,x.config=u,x.inboundNodes=c,a.push(x)}}catch(e){i.e(e)}finally{i.f()}t.layers=a;for(var k=[],w=0;w<this.inputLayers.length;w++){var I=this.inputLayers[w],N=this.inputLayersNodeIndices[w],S=n.nodeKey(I,N);if(this.containerNodes.has(S)){var T=r[S];null==T&&(T=0);var E=this.inputLayersTensorIndices[w];k.push([I.name,T,E])}}t.inputLayers=k;for(var C=[],A=0;A<this.outputLayers.length;A++){var R=this.outputLayers[A],_=this.outputLayersNodeIndices[A],F=n.nodeKey(R,_);if(this.containerNodes.has(F)){var D=r[F];null==D&&(D=0);var M=this.outputLayersTensorIndices[A];C.push([R.name,D,M])}}return t.outputLayers=C,t}},{key:"stateful",get:function(){if(this._stateful)throw new Cse("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=O(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;X5((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=O(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u[0],l=u[1],h=u[2];if(n=null==u[3]?{}:u[3],!(c in r))return void i(e,t);var p=r[c];if(p.inboundNodes.length<=l)return void i(e,t);var f=p.inboundNodes[l];o.push(f.outputTensors[h])}}catch(e){s.e(e)}finally{s.f()}o.length>0&&e.apply(Mse(o),n)}function s(e){var a=e.name,o=rle(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new Cse("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,c=t.name,l=t.layers,h=O(l);try{for(h.s();!(u=h.n()).done;){var p=u.value;s(p)}}catch(e){h.e(e)}finally{h.f()}for(;!Hse(a);){var f,d=O(l);try{for(d.s();!(f=d.n()).done;){var v=f.value,m=r[v.name];if(m.name in a){var g=a[m.name];delete a[m.name];var y,b=O(g);try{for(b.s();!(y=b.n()).done;){var x=y.value;o(m,x)}}catch(e){b.e(e)}finally{b.f()}}}}catch(e){d.e(e)}finally{d.f()}}var k,w=[],I=[],N=t.inputLayers,S=O(N);try{for(S.s();!(k=S.n()).done;){var T=k.value,E=T[0],C=T[1],A=T[2];Fse(E in r);var R=r[E],_=R.inboundNodes[C].outputTensors;w.push(_[A])}}catch(e){S.e(e)}finally{S.f()}var F,D=t.outputLayers,M=O(D);try{for(M.s();!(F=M.n()).done;){var L=F.value,z=L[0],P=L[1],B=L[2];Fse(z in r);var W=r[z],U=W.inboundNodes[P].outputTensors;I.push(U[B])}}catch(e){M.e(e)}finally{M.f()}return new e({inputs:w,outputs:I,name:c})}}]),n}(wce);function Vle(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===s(e)&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===s(e)&&Object.keys(e).length>0&&"object"===s(e[Object.keys(e)[0]])){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function Gle(e,t){return Vle(e,t,"classWeight")}function jle(e,t,n,r){return Hle.apply(this,arguments)}function Hle(){return(Hle=c(o().mark((function e(t,n,r,a){var i,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return i=X5((function(){if(1===t.shape.length)return p8(t);if(2===t.shape.length){if(t.shape[1]>1){return N8(t,1)}if(1===t.shape[1])return X8(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,s=e.t0.from.call(e.t0,e.t1),Y5(i),u=[],s.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");u.push(r[e])})),e.abrupt("return",Vte(u,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qle(e,t){return g8(e,t)}function Kle(e,t){var n,r,a=t;n=a.xs,r=a.ys,F$(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=Xle("input",e.inputNames,n),o=Xle("output",e.outputNames,r),s=i[0].shape[0];F$(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),F$(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){F$(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},c=0;c<i.length;c++)u(c);for(var l=function(t){F$(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},h=0;h<o.length;h++)l(h);return{xs:i,ys:o}}function Xle(e,t,n){if(n instanceof n5)return[n];if(Array.isArray(n))return F$(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=O(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new Cse("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(e){i.e(e)}finally{i.f()}return a}function Yle(e){if(3===e.length)throw new Ase("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function Jle(e,t,n){return Zle.apply(this,arguments)}function Zle(){return Zle=c(o().mark((function e(t,n,r){var a,i,s,u,c,l,h,p,f,d,v,m,g,y,b,x,k,w,I,N,S,T,E,C,A,R,_,O,F,D,M,L,z;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,F$(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),F$(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),F$(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),F$(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),F$(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=r.validationData)&&($le(r.validationData)?F$(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(c=Yle(r.validationData),s=c.xs,u=c.ys)),l=t.makeTrainFunction(),h=t.getDedupedMetricsNames(),p=i?h.slice().concat(h.map((function(e){return"val_"+e}))):h.slice(),f=ele(r.callbacks,r.yieldEvery),d=null==r.verbose?1:r.verbose,v=nle(f,d,r.epochs,null,null,Qle(n,r),null,i,p),m=v.callbackList,g=v.history,m.setModel(t),t.history=g,e.next=22,m.onTrainBegin();case 22:return t.stopTraining_=!1,y=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:b=e.sent;case 27:if(!(y<r.epochs)){e.next=98;break}return x={},e.next=31,m.onEpochBegin(y);case 31:if(k=0,w=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:b=e.sent;case 37:if(a&&!(k<r.batchesPerEpoch)){e.next=91;break}return e.next=40,b.next();case 40:if(I=e.sent,!a||!I.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(k," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==I.value){e.next=73;break}return N=Kle(t,I.value),S=N.xs,T=N.ys,(E={}).batch=w,E.size=S[0].shape[0],e.next=51,m.onBatchBegin(w,E);case 51:if(C=[],null==r.classWeight){e.next=64;break}A=Gle(r.classWeight,t.outputNames),R=0;case 55:if(!(R<A.length)){e.next=64;break}return e.t0=C,e.next=59,jle(T[R],null,A[R]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++R,e.next=55;break;case 64:for(_=S.concat(T).concat(C),O=l(_),Y5(_),F=0;F<h.length;++F)D=h[F],M=O[F],E[D]=M,J5(M);return e.next=70,m.onBatchEnd(w,E);case 70:Xce(E),w++,k++;case 73:if(!(a?k>=r.batchesPerEpoch:I.done)){e.next=87;break}if(!i){e.next=86;break}if(L=void 0,!$le(r.validationData)){e.next=84;break}return e.t2=Lse,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,L=(0,e.t2)(e.t3),e.next=85;break;case 84:L=Lse(t.evaluate(s,u,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(z=0;z<t.metricsNames.length;++z)x["val_".concat(t.metricsNames[z])]=L[z];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,m.onEpochEnd(y,x);case 93:if(y++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,m.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),Zle.apply(this,arguments)}function Qle(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function $le(e){return"function"==typeof e.iterator}function ehe(e){return"function"==typeof e.next}function the(e,t,n){return nhe.apply(this,arguments)}function nhe(){return nhe=c(o().mark((function e(t,n,r){var a,i,s,u,c,l,h,p,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,s=[],!(r.verbose>0)){e.next=6;break}throw new Ase("Verbose mode is not implemented yet.");case 6:if(F$(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!ehe(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:u=e.t0,c=0,l=0,h=o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.next();case 2:if(n=e.sent,s=X5((function(){if(n.value){var e=Kle(t,n.value),r=e.xs,a=e.ys,o=r.concat(a),u=X5((function(){return i(o)}));if(Y5(o),0===l)for(var h=0;h<u.length;++h)s.push(i9(0));for(var p=o[0].shape[0],f=function(e){var t=u[e],n=s[e];s[e]=X5((function(){return d8(s[e],g8(p,t))})),l>0&&Y5(n)},d=0;d<u.length;++d)f(d);Y5(u),c+=p,++l}return s})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(l<r.batches)){e.next=25;break}return e.delegateYield(h(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(p=0;p<s.length;++p)f=s[p],s[p]=m8(s[p],c),Y5(f);return e.abrupt("return",Mse(s));case 27:case"end":return e.stop()}}),e)}))),nhe.apply(this,arguments)}function rhe(e){F$(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function ahe(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return Sue(e,t,n-t)})):Sue(e,t,n-t)}function ihe(e,t){return X5((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return ihe(e,t)})):Fue(e,"int32"===t.dtype?t:h8(t,"int32"))}))}function ohe(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function she(e){var t=[];e instanceof n5&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(Iue(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function uhe(e,t){if(null!=e){var n=[];if(t instanceof n5)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof n5)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function che(e){return Array.isArray(e)}function lhe(e){return!function(e){return e instanceof n5}(e)&&!che(e)}function hhe(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(che(e)&&e.length>0)o=!0;else if(lhe(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new Cse("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(lhe(e)){r=[];var u,c=O(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(null==e[l])throw new Cse('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch(e){c.e(e)}finally{c.f()}}else if(che(e)){if(e.length!==t.length)throw new Cse("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new Cse("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=she(r),null!=n)for(var h=0;h<t.length;++h)if(null!=n[h]){var p=r[h];if(p.shape.length!==n[h].length)throw new Cse("Error when checking ".concat(i,": expected ").concat(t[h]," ")+"to have ".concat(n[h].length," dimension(s). but got array with ")+"shape ".concat(p.shape));for(var f=0;f<n[h].length;++f)if(0!==f||a){var d=p.shape[f],v=n[h][f];if(null!=v&&v>=0&&d!==v)throw new Cse("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[h].slice(1,n[h].length),"] ")+"(i.e.,tensor shape [*,".concat(n[h].slice(1,n[h].length),"])")+" but the ".concat(i," received an input with ").concat(p.shape[0])+" examples, each with shape [".concat(p.shape.slice(1,p.shape.length),"]")+" (tensor shape [".concat(p.shape,"])"))}}return r}function phe(e,t,n){var r=jse(e.map((function(e){return e.shape[0]})));r.sort();var a=jse(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new Cse("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new Cse("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!P$(r,a))throw new Cse("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}function fhe(e,t,n){for(var r=[ile,hle,cle],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===cle&&1===i.shape[i.shape.length-1])throw new Cse("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),c=s.slice(1),l=0;l<u.length;++l){var h=u[l],p=c[l];if(null!=p&&h!==p)throw new Cse("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function dhe(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new Cse("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new Cse("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new Cse("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var c=s.shape[u],l=n[o][u];if(null!=l&&l!==c)throw new Cse("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var vhe=function(e){d(m,e);var t,n,r,a,i,u,h,f=w(m);function m(e){var t;return l(this,m),(t=f.call(this,e)).isTraining=!1,t}return p(m,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new Cse("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Rle(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return nie.adagrad(.01)},Adadelta:function(){return nie.adadelta(1,.95,kue())},Adam:function(){return nie.adam(.001,.9,.999,kue())},Adamax:function(){return nie.adamax(.002,.9,.999,kue(),0)},RMSProp:function(){return nie.rmsprop(.001,.9,0,kue())},SGD:function(){return nie.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new Cse("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Yre))throw new Cse("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Cse("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return vle(e)}))}else{var a=vle(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new Cse('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,u=O(this.outputNames);try{for(u.s();!(o=u.n()).done;){var c=o.value;null==e.loss[c]&&console.warn('Output "'.concat(c,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(c," during training")),n.push(vle(e.loss[c]))}}catch(e){u.e(e)}finally{u.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var l=0;l<this.outputs.length;++l){var h=this.internalOutputShapes[l],p=this.outputNames[l];this.feedOutputNames.push(p),this.feedOutputShapes.push(h),this.feedLossFns.push(this.lossFunctions[l])}var f=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],hue("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===f.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var d=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==s(e))throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=O(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,u=n.hasOwnProperty(o)?n[o]:[];Array.isArray(u)||(u=[u]),a.push(u)}}catch(e){i.e(e)}finally{i.f()}return a}(e.metrics,this.outputNames);hue("metric",(function(){for(var e=function(e){if(-1!==f.indexOf(e))return"continue";!function(n){var r,a,i,o,s=O(n);try{var u=function(){var n,s=o.value;if("string"==typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){var u,c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===hle?-1!==["accuracy","acc"].indexOf(s)?a=mle:-1!==["crossentropy","ce"].indexOf(s)&&(a=kle):t.lossFunctions[e]===lle?-1!==["accuracy","acc"].indexOf(s)?a=wle:-1!==["crossentropy","ce"].indexOf(s)&&(a=Nle):-1!==["accuracy","acc"].indexOf(s)?a=gle:-1!==["crossentropy","ce"].indexOf(s)&&(a=Ile),-1!==["accuracy","acc"].indexOf(s)?u="acc":-1!==["crossentropy","ce"].indexOf(s)&&(u="ce"),i=a,r=""+u}else{var l=function(e){if("string"==typeof e&&e in Sle)return Sle[e];if("string"!=typeof e&&null!=e)return e;throw new Cse("Unknown metric ".concat(e))}(s);i=l,r=""+Tle(s)}hue(r,(function(){n=i})),function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])}(e,r,n)};for(s.s();!(o=s.n()).done;)u()}catch(e){s.e(e)}finally{s.f()}}(d[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;rhe(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var s=this.testFunction,u=this.testLoop(s,o,r,n.verbose,n.steps);return Mse(u)}finally{uhe(i[0],e),uhe(i[1],t)}}},{key:"evaluateDataset",value:(h=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",the(this,t,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new Cse("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new Cse("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new Cse("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new Tce;if(e instanceof n5&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Cse("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,u=O(this.inputs);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=e[c.name];if(null==l)throw new Cse("No value is provided for the model's input ".concat(c.name));i.add(c,l)}}catch(e){u.e(e)}finally{u.f()}}var h=Ace(a,i);return n?h:h[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=Ose(null,e.length),r=e.length,a=O(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var c=s.indexOf(e[u]);if(-1!==c&&(n[u]=o[c],r--),0===r)break}if(0===r)break}}catch(e){a.e(e)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new Cse("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return X5((function(){var a=t.checkNumSamples(e);if(r)throw new Ase("Verbose predictLoop() is not implemented yet.");for(var i=ohe(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){X5((function(){var r=i[n][0],a=i[n][1],o=ahe(e,r,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:t.inputs[u],value:o[u]});else s.push({key:t.inputs[0],value:o});var c=new Tce(s);return Ace(t.outputs,c)})).forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return Mse(o.map((function(e){return Z8(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=she(e);dhe(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return rhe(r),this.predictLoop(n,r)}finally{uhe(n,e)}}},{key:"predictOnBatch",value:function(e){dhe(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new Ese("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a],o=this.feedLossFns[a];o===lle?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(phe(e=hhe(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=hhe(t,this.feedOutputNames,r,!1,"target")),fhe(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!=0)throw new Cse("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:(u=c(o().mark((function e(t,n,r,a){var i,s,u,c,l,h,p,f,d,v=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(v.length>4&&void 0!==v[4])||v[4],s=v.length>5?v[5]:void 0,u=this.standardizeUserDataXY(t,n,i,s),c=S(u,2),l=c[0],h=c[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(p=null,null==a){e.next=19;break}f=Gle(a,this.outputNames),p=[],d=0;case 10:if(!(d<f.length)){e.next=19;break}return e.t0=p,e.next=14,jle(h[d],null,f[d]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++d,e.next=10;break;case 19:return e.abrupt("return",[l,h,p]);case 20:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return u.apply(this,arguments)})},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return X5((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new Ase("Verbose mode is not implemented yet.");if(null!=i)throw new Ase("steps mode in testLoop() is not implemented yet");for(var u=ohe(o,n),c=Vte(xue(0,o)),l=0;l<u.length;++l){var h=u[l][0],p=u[l][1],f=Sue(c,h,p-h),d=ihe(t,f),v=e(d);if(0===l)for(var m=0;m<v.length;++m)s.push(i9(0));for(var g=0;g<v.length;++g){var y=v[g];s[g]=d8(s[g],g8(p-h,y))}}for(var b=0;b<s.length;++b)s[b]=m8(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(Dse(e,r)>1){var i=Dse(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,c=new Tce(t),l=Ace(e.outputs,c,{training:!0}),h=0;h<e.lossFunctions.length;++h){var p=(0,e.lossFunctions[h])(a[h],l[h]);null!=i[h]&&(p=qle(p,i[h]));var f=Q9(p);n.push(f),u=0===h?p:d8(u,p)}for(var d=0;d<e.metricsTensors.length;++d){var v=void 0;if(e.outputs.length>1&&d<e.outputs.length)v=n[d];else{var m=e.metricsTensors[d][0],g=e.metricsTensors[d][1];v=Q9(m(a[g],l[g]))}J5(v),o.push(v)}return u=Q9(u),e.calculateLosses().forEach((function(e){u=d8(u,e)})),u}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return X5((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new Tce(o),c=Ace(e.outputs,u),l=0;l<e.lossFunctions.length;++l){var h=e.lossFunctions[l],p=Q9(h(i[l],c[l]));n=0===l?p:d8(n,p),r.push(n)}for(var f=0;f<e.metricsTensors.length;++f){var d=e.metricsTensors[f][0],v=e.metricsTensors[f][1],m=Q9(d(i[v],c[v]));r.push(m)}return r}))}}},{key:"fit",value:(i=c(o().mark((function e(t,n){var r,a,i,s,u,c,l,h,p,f,d,v,m,g,y,b,x,k,w,I,N,S,T,E,C,A,R=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R.length>2&&void 0!==R[2]?R[2]:{},!this.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return this.isTraining=!0,e.prev=4,rhe(d=null==r.batchSize?32:r.batchSize),v=!1,e.next=10,this.standardizeUserData(t,n,r.sampleWeight,r.classWeight,v,d);case 10:if(m=e.sent,a=m[0],i=m[1],f=m[2],g=!1,!(null!=r.validationData&&r.validationData.length>0)){e.next=36;break}if(g=!0,2!==r.validationData.length){e.next=22;break}c=r.validationData[0],l=r.validationData[1],e.next=27;break;case 22:if(3!==r.validationData.length){e.next=26;break}throw new Ase("validationData including sample weights is not supported yet.");case 26:throw new Cse("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(r.validationData," is invalid."));case 27:return b=!0,e.next=30,this.standardizeUserData(c,l,null,null,b,d);case 30:x=e.sent,h=x[0],p=x[1],y=h.concat(p),e.next=37;break;case 36:null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1?(g=!0,k=Math.floor(a[0].shape[0]*(1-r.validationSplit)),w=a[0].shape[0],h=ahe(a,k,w),s=a,a=ahe(a,0,k),p=ahe(i,k,w),u=i,i=ahe(i,0,k),y=h.concat(p)):null!=r.validationSteps&&(g=!0);case 37:return I=a.concat(i).concat(f),this.checkTrainableWeightsConsistency(),N=this.makeTrainFunction(),S=this.getDedupedMetricsNames(),g?(this.makeTestFunction(),T=this.testFunction,E=S.slice().concat(S.map((function(e){return"val_"+e})))):(T=null,y=[],E=S.slice()),C=ele(r.callbacks,r.yieldEvery),e.next=45,this.fitLoop(N,I,S,d,r.epochs,r.verbose,C,T,y,r.shuffle,E,r.initialEpoch,null,null);case 45:return A=e.sent,e.abrupt("return",A);case 47:return e.prev=47,this.isTraining=!1,uhe(a,t),uhe(i,n),uhe(s,t),uhe(u,n),uhe(h,c),uhe(p,l),null!=f&&Y5(f),e.finish(47);case 57:case"end":return e.stop()}}),e,this,[[4,,47,57]])}))),function(e,t){return i.apply(this,arguments)})},{key:"fitLoop",value:(a=c(o().mark((function e(t,n,r,a,i,s,u,c,l,h,p,f,d,v){var m,g,y,b,x,k,w,I,N=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a&&(a=32),null==i&&(i=1),null==h&&(h=!0),null==f&&(f=0),m=!1,null!=c&&null!=l&&(m=!0),null==v){e.next=10;break}if(m=!0,null!=d){e.next=10;break}throw new Cse("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(g=this.checkNumSamples(n,a,d,"steps_per_epoch"))&&(y=xue(0,g)),null==s&&(s=1),b=nle(u,s,i,f,g,d,a,m,p),x=b.callbackList,k=b.history,x.setModel(this),this.history=k,e.next=18,x.onTrainBegin();case 18:this.stopTraining_=!1,w=o().mark((function e(){var i,s,u,p,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(I);case 2:if(i={},null==d){e.next=7;break}throw new Ase("stepsPerEpoch mode is not implemented yet.");case 7:if("batch"!==h){e.next=11;break}throw new Ase("batch shuffling is not implemneted yet");case 11:h&&C$(y);case 12:s=Vte(y),u=ohe(g,a),p=o().mark((function e(h){var p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p={},e.next=3,x.onBatchBegin(h,p);case 3:return X5((function(){var e=u[h][0],o=u[h][1],f=Sue(s,e,o-e);p.batch=h,p.size=o-e;for(var d=ihe(n,f),v=t(d),g=0;g<r.length;++g){var y=r[g],b=v[g];p[y]=b,J5(b)}if(h===u.length-1&&m)for(var x=N.testLoop(c,l,a),k=0;k<r.length;++k){var w=r[k],I=x[k];J5(I),i["val_"+w]=I}})),e.next=6,x.onBatchEnd(h,p);case 6:if(Xce(p),!N.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),f=0;case 16:if(!(f<u.length)){e.next=24;break}return e.delegateYield(p(f),"t0",18);case 18:if("break"!==e.t0){e.next=21;break}return e.abrupt("break",24);case 21:++f,e.next=16;break;case 24:s.dispose();case 25:return e.next=27,x.onEpochEnd(I,i);case 27:if(!N.stopTraining_){e.next=29;break}return e.abrupt("return","break");case 29:case"end":return e.stop()}}),e)})),I=f;case 21:if(!(I<i)){e.next=29;break}return e.delegateYield(w(),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++I,e.next=21;break;case 29:return e.next=31,x.onTrainEnd();case 31:return e.next=33,this.history.syncData();case 33:return e.abrupt("return",this.history);case 34:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,i,o,s,u,c,l,h,p,f,d){return a.apply(this,arguments)})},{key:"fitDataset",value:(r=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jle(this,t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"trainOnBatch",value:(n=c(o().mark((function e(t,n){var r,a,i,s,u,c,l,h,p,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],s=this.makeTrainFunction(),u=s(a.concat(i)),c=[],l=O(u),e.prev=9,l.s();case 11:if((h=l.n()).done){e.next=19;break}return p=h.value,e.next=15,p.data();case 15:f=e.sent,c.push(f[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:return Y5(u),uhe(r[0],t),uhe(r[1],n),e.abrupt("return",Mse(c));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])}))),function(e,t){return n.apply(this,arguments)})},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=N(v(m.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=K5().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-K5().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"==typeof this.loss)e=zse(this.loss);else if(Array.isArray(this.loss)){var t,n=O(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!=typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(e){n.e(e)}finally{n.f()}e=this.loss.map((function(e){return zse(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!=typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=zse(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[zse(Tle(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return zse(Tle(e))}));var e={};for(var t in this.metrics)e[t]=zse(Tle(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=rle(zle(e.optimizer_config));if("string"==typeof e.loss)t=Pse(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return Pse(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=Pse(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return Pse(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=Pse(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:(t=c(o().mark((function e(t,n){var r,a,i,s,u,c,l,h,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=9;break}if(0!==(r=T6(t)).length){e.next=6;break}throw new Cse("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Cse("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Cse("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,t6(this.getNamedWeights(n));case 13:if(a=e.sent,i=this.toJSON(null,!1),s={modelTopology:i,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(Ble),convertedBy:null},null==n||!n.includeOptimizer||null==this.optimizer){e.next=34;break}return s.trainingConfig=this.getTrainingConfig(),c="optimizer",e.t0=Nae,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=c,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:l=e.sent,h=l.data,p=l.specs,(u=a.specs).push.apply(u,T(p)),a.data=g6([a.data,h]);case 34:return null!=this.userDefinedMetadata&&(Cle(this.userDefinedMetadata,this.name,!0),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=a.data,s.weightSpecs=a.specs,e.abrupt("return",t.save(s));case 38:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"setUserDefinedMetadata",value:function(e){Cle(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),m}(Ule);vhe.className="Model",Kre(vhe);var mhe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n)}(vhe);function ghe(){return ghe=c(o().mark((function e(t,n){var r,a,i,s,u,c,l,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("modelTopology"in t||(t={modelTopology:t}),null!=(r=t.modelTopology).model_config&&(r=r.model_config),a=zle(r),i=rle(a,n),null==t.weightsManifest){e.next=15;break}return e.next=9,hae(t.weightsManifest,t.pathPrefix,i.weights.map((function(e){return e.originalName})));case 9:s=e.sent,u={},c=O(i.weights);try{for(c.s();!(l=c.n()).done;)h=l.value,u[h.originalName]=s[h.originalName]}catch(e){c.e(e)}finally{c.f()}i.loadWeights(u),Y5(s);case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)}))),ghe.apply(this,arguments)}function yhe(){return(yhe=c(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!=typeof t){e.next=10;break}if(0!==(r=E6(t,n)).length){e.next=7;break}r.push(bae(t,n)),e.next=9;break;case 7:if(!(r.length>1)){e.next=9;break}throw new Cse("Found more than one (".concat(r.length,") load handlers for ")+"URL '".concat(t,"'"));case 9:t=r[0];case 10:return e.abrupt("return",bhe(t,void 0,n));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bhe(e,t,n){return xhe.apply(this,arguments)}function xhe(){return xhe=c(o().mark((function e(t,n,r){var a,i,s,u,c,l,h,p,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=3;break}throw new Cse("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,t.load();case 5:if(a=e.sent,null!=(i=a.modelTopology).model_config&&(i=i.model_config),s=null==r.strict||r.strict,u=null!=a.weightData&&null!=a.weightSpecs&&s,c=rle(zle(i),n,u),null!=(l=a.trainingConfig)&&c.loadTrainingConfig(l),null!=a.userDefinedMetadata&&c.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=24;break}if(null!=a.weightSpecs){e.next=17;break}throw new Cse("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 17:if(h=khe(a.weightData,a.weightSpecs),p=h.modelWeights,f=h.optimizerWeights,c.loadWeights(p,s),!(null!=c.optimizer&&f.length>0)){e.next=22;break}return e.next=22,c.optimizer.setWeights(f);case 22:Y5(p),Y5(f.map((function(e){return e.tensor})));case 24:return e.abrupt("return",c);case 25:case"end":return e.stop()}}),e)}))),xhe.apply(this,arguments)}function khe(e,t){var n=r6(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}mhe.className="Functional",Kre(mhe);var whe=function(e){d(a,e);var t,n,r=w(a);function a(e){var t;if(l(this,a),e=e||{},(t=r.call(this,{inputs:[],outputs:[]})).trainable=!0,t.built=!1,t.name=null!=e.name?e.name:eue("sequential_"),null!=e.layers){var n,i=O(e.layers);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.add(o)}}catch(e){i.e(e)}finally{i.f()}}return t}return p(a,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new Cse("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,n=e instanceof a||e instanceof vhe;if(n){if(1!==(t=e).outputs.length)throw new Cse("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new Cse("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new Cse("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var r=Sce({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(r)}if(n)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new Cse("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new Cse("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Ice(this.outputs[0])}this.inboundNodes=[],new xce({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Ose(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(hce(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new vhe({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),N(v(a.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),N(v(a.prototype),"summary",this).call(this,e,t,n)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new Ese("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Ese("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:(n=c(o().mark((function e(t,n){var r,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new Ese("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"fitDataset",value:function(){var e=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Ese("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:(t=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"stopTraining",get:function(){if(null==this.model)throw new Cse("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new Cse("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=O(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(e){n.e(e)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new Cse("Legacy serialization format not supported yet.");n=t}else F$(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),n=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof a))throw new Ase("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,u=O(n);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=void 0,h=rle(c,l,r);r&&h.setFastWeightInitDuringBuild(!0),o.add(h)}}catch(e){u.e(e)}finally{u.f()}return o}}]),a}(vhe);function Ihe(e){return Sce(e)}whe.className="Sequential",Kre(whe);var Nhe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"getConfig",value:function(){return{}}}]),n}(Hre),She=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return zue(e,t)}}]),n}(Nhe);She.className="elu",Kre(She);var The=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return bte(e)}}]),n}(Nhe);The.className="selu",Kre(The);var Ehe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return lte(e)}}]),n}(Nhe);Ehe.className="relu",Kre(Ehe);var Che=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return X5((function(){return nee(6,lte(e))}))}}]),n}(Nhe);Che.className="relu6",Kre(Che);var Ahe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return e}}]),n}(Nhe);Ahe.className="linear",Kre(Ahe);var Rhe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return $8(e)}}]),n}(Nhe);Rhe.className="sigmoid",Kre(Rhe);var _he=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return function(e){return X5((function(){var t=d8(.5,g8(.2,e));return d7(t,0,1)}))}(e)}}]),n}(Nhe);_he.className="hardSigmoid",Kre(_he);var Ohe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return L9(e)}}]),n}(Nhe);Ohe.className="softplus",Kre(Ohe);var Fhe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return function(e){return X5((function(){return m8(e,d8(y8(e),1))}))}(e)}}]),n}(Nhe);Fhe.className="softsign",Kre(Fhe);var Dhe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return t7(e)}}]),n}(Nhe);Dhe.className="tanh",Kre(Dhe);var Mhe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Rte(e,t)}}]),n}(Nhe);Mhe.className="softmax",Kre(Mhe);var Lhe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return B9(e,t)}}]),n}(Nhe);Lhe.className="logSoftmax",Kre(Lhe);var zhe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return X5((function(){return X5((function(){var t=Math.sqrt(2),n=g8(.5,d8(1,K7(m8(e,t))));return g8(e,n)}))}))}}]),n}(Nhe);zhe.className="gelu",Kre(zhe);var Phe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return X5((function(){return g8(.5,g8(e,d8(1,t7(g8(o9(m8(2,Math.PI)),d8(e,g8(.044715,a9(e,3))))))))}))}}]),n}(Nhe);Phe.className="gelu_new",Kre(Phe);var Bhe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return X5((function(){return g8(e,t7(L9(e)))}))}}]),n}(Nhe);Bhe.className="mish",Kre(Bhe);var Whe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return X5((function(){return g8($8(g8(e,t)),e)}))}}]),n}(Nhe);function Uhe(e){return e.getClassName()}function Vhe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vse(e,qre.getMap().classNameMap,t,"activation")}function Ghe(e){if(null==e){var t={className:"linear",config:{}};return Vhe(t)}if("string"==typeof e){var n={};return n.className=e,n.config={},Vhe(n)}return e instanceof Nhe?e:Vhe(e)}function jhe(e){if(null!=e&&"object"!==s(e))throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}Whe.className="swish",Kre(Whe);var Hhe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n)}(Hre),qhe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),r=t.call(this),jhe(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return p(n,[{key:"apply",value:function(e){var t=this;return X5((function(){var n=$9([1]);return t.hasL1&&(n=d8(n,u9(g8(t.l1,y8(e))))),t.hasL2&&(n=d8(n,u9(g8(t.l2,Due(e))))),X8(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(Hhe);qhe.className="L1L2",Kre(qhe);var Khe={l1l2:"L1L2"};function Xhe(e){return Wse(e)}function Yhe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vse(e,qre.getMap().classNameMap,t,"regularizer")}function Jhe(e){return null==e?null:"string"==typeof e?Yhe({className:e in Khe?Khe[e]:e,config:{}}):e instanceof Hhe?e:Yhe(e)}var Zhe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return p(n,[{key:"call",value:function(e,t){e=lce(e);var n=lte(e);return null!=this.maxValue&&(n=d7(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);Zhe.className="ReLU",Kre(Zhe);var Qhe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return p(n,[{key:"call",value:function(e,t){var n=lce(e);return S9(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);Qhe.className="LeakyReLU",Kre(Qhe);var $he=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=sce(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=Jhe(e.alphaRegularizer),r.alphaConstraint=Vce(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new Cse("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return p(n,[{key:"build",value:function(e){var t=(e=hce(e)).slice(1);if(null!=this.sharedAxes){var n,r=O(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(e){r.e(e)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new gce({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=lce(e),bee(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:oce(this.alphaInitializer),alphaRegularizer:Xhe(this.alphaRegularizer),alphaConstraint:Wce(this.alphaConstraint),sharedAxes:this.sharedAxes},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);$he.className="PReLU",Kre($he);var epe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new Ase("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return p(n,[{key:"call",value:function(e,t){var n=lce(e);return H7(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);epe.className="ELU",Kre(epe);var tpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return p(n,[{key:"call",value:function(e,t){var n=lce(e);return g8(n,h8(b9(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);tpe.className="ThresholdedReLU",Kre(tpe);var npe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new Mhe).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return p(n,[{key:"call",value:function(e,t){var n=this;return X5((function(){var r=lce(e),a=t.mask;if(null!=a){var i=g8(P9(eee(r.shape),h8(a,r.dtype)),i9(-1e9));r=d8(r,i)}return n.axis instanceof Array?n.axis.length>1?p9(P9(r,W9(r,n.axis,!0))):n.softmax(r,n.axis[0]):n.softmax(r,n.axis)}))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);function rpe(e,t,n){if("number"==typeof e)return Ose(e,t);if(e.length!==t)throw new Cse("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((i=a)!==parseInt(i.toString(),10))throw new Cse("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var i}function ape(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function ipe(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+bue([n-t,0]);else{if("same"!==r)throw new Cse("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function ope(e,t){return X5((function(){return sue(t),"channelsFirst"===t?hne(e,[0,2,3,1]):e}))}function spe(e,t){return X5((function(){return sue(t),"channelsFirst"===t?hne(e,[0,2,3,4,1]):e}))}function upe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return X5((function(){if(null==i&&(i="channelsLast"),sue(i),3!==e.shape.length)throw new Cse("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new Cse("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new Cse("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(n.shape.length," instead"));if("channelsFirst"===i&&(e=hne(e,[0,2,1])),"causal"===a)throw new Ase("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=x7(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=Lue(s,n)),s}))}function cpe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return X5((function(){if(null==i&&(i="channelsLast"),sue(i),3!==e.rank&&4!==e.rank)throw new Cse("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new Cse("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=ope(e,i);if("causal"===a)throw new Ase("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=Ene({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=hne(u,[0,3,1,2])),u}))}function lpe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return X5((function(){if(null==i&&(i="channelsLast"),sue(i),4!==e.rank&&5!==e.rank)throw new Cse("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new Cse("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=spe(e,i);if("causal"===a)throw new Ase("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=I7(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=Lue(s,n)),"channelsFirst"===i&&(s=hne(s,[0,4,1,2,3])),s}))}npe.className="Softmax",Kre(npe);var hpe=function(e){d(n,e);var t=w(n);function n(e,r){var a;if(l(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,Xse(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new Ase("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=rpe(r.kernelSize,e,"kernelSize"),a.strides=rpe(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,uue(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,sue(a.dataFormat),a.activation=Ghe(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=sce(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=Vce(r.biasConstraint),a.biasRegularizer=Jhe(r.biasRegularizer),a.activityRegularizer=Jhe(r.activityRegularizer),a.dilationRate=rpe(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new Cse("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new Cse("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new Cse("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return p(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Uhe(this.activation),useBias:this.useBias,biasInitializer:oce(this.biasInitializer),biasRegularizer:Xhe(this.biasRegularizer),activityRegularizer:Xhe(this.activityRegularizer),biasConstraint:Wce(this.biasConstraint)},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(Fse("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!Kse(e.kernelSize,"number",1,3))throw new Cse("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(wce),ppe=function(e){d(n,e);var t=w(n);function n(e,r){var a;return l(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,Xse(a.filters,"filters"),a.kernelInitializer=sce(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=Vce(r.kernelConstraint),a.kernelRegularizer=Jhe(r.kernelRegularizer),a}return p(n,[{key:"build",value:function(e){e=hce(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Cse("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:f({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return X5((function(){var t;e=lce(e);var r=null==n.bias?null:n.bias.read(),a=Jse(n.activation.getClassName());if(null!=a&&2===n.rank)t=cpe(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=upe(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=cpe(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new Ase("convolutions greater than 3D are not implemented yet.");t=lpe(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=hce(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=ape(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:oce(this.kernelInitializer),kernelRegularizer:Xhe(this.kernelRegularizer),kernelConstraint:Wce(this.kernelConstraint)},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new Cse("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(hpe),fpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return p(n,[{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&!Kse(e.kernelSize,"number",1,2))throw new Cse("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ppe);fpe.className="Conv2D",Kre(fpe);var dpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return p(n,[{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new Cse("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ppe);dpe.className="Conv3D",Kre(dpe);var vpe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),(r=t.call(this,e)).inputSpec=[new gce({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new Cse("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return p(n,[{key:"build",value:function(e){if(4!==(e=hce(e)).length)throw new Cse("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Cse("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new gce({ndim:4,axes:f({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return X5((function(){var t=lce(e);if(4!==t.shape.length)throw new Cse("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],c=n.kernelSize[0],l=n.kernelSize[1],h=n.strides[0],p=n.strides[1],f=[o,ipe(s,h,c,n.padding),ipe(u,p,l,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=hne(t,[0,2,3,1]));var d=w7(t,n.kernel.read(),f,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(d=hne(d,[0,3,1,2])),null!=n.bias&&(d=Lue(d,n.bias.read(),n.dataFormat)),null!=n.activation&&(d=n.activation.apply(d)),d}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=hce(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=ipe(a[n],s,i,this.padding),a[r]=ipe(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(fpe);vpe.className="Conv2DTranspose",Kre(vpe);var mpe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),(r=t.call(this,e)).inputSpec=[new gce({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new Cse("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return p(n,[{key:"build",value:function(e){if(5!==(e=hce(e)).length)throw new Cse("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Cse("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new gce({ndim:5,axes:f({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return X5((function(){var t=lce(e);if(5!==t.shape.length)throw new Cse("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var u=o[i],c=o[r],l=o[a],h=n.kernelSize[0],p=n.kernelSize[1],f=n.kernelSize[2],d=n.strides[0],v=n.strides[1],m=n.strides[2],g=[s,ipe(u,d,h,n.padding),ipe(c,v,p,n.padding),ipe(l,m,f,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=hne(t,[0,2,3,4,1]));var y=S7(t,n.kernel.read(),g,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=hne(y,[0,4,1,2,3])),null!==n.bias&&(y=Lue(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=hce(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],l=this.strides[1],h=this.strides[2];return i[t]=this.filters,i[n]=ipe(i[n],c,o,this.padding),i[r]=ipe(i[r],l,s,this.padding),i[a]=ipe(i[a],h,u,this.padding),i}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(dpe);mpe.className="Conv3DTranspose",Kre(mpe);var gpe=function(e){d(n,e);var t=w(n);function n(e,r){var a;if(l(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new Cse("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new Cse("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new Cse("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=sce(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=Jhe(r.depthwiseRegularizer),a.depthwiseConstraint=Vce(r.depthwiseConstraint),a.pointwiseInitializer=sce(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=Jhe(r.pointwiseRegularizer),a.pointwiseConstraint=Vce(r.pointwiseConstraint),a}return p(n,[{key:"build",value:function(e){if((e=hce(e)).length<this.rank+2)throw new Cse("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new Cse("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new gce({ndim:this.rank+2,axes:f({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return X5((function(){var t;if(e=lce(e),1===n.rank)throw new Ase("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=hne(e,[0,2,3,1])),t=xte(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=Lue(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=hne(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=oce(this.depthwiseInitializer),e.pointwiseInitializer=oce(this.pointwiseInitializer),e.depthwiseRegularizer=Xhe(this.depthwiseRegularizer),e.pointwiseRegularizer=Xhe(this.pointwiseRegularizer),e.depthwiseConstraint=Wce(this.depthwiseConstraint),e.pointwiseConstraint=Wce(this.pointwiseConstraint),e}}]),n}(ppe);gpe.className="SeparableConv";var ype=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,2,e)}return p(n)}(gpe);ype.className="SeparableConv2D",Kre(ype);var bpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return p(n,[{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&!Kse(e.kernelSize,"number",1,1))throw new Cse("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ppe);bpe.className="Conv1D",Kre(bpe);var xpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),r=t.call(this,e),"number"==typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return p(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return X5((function(){if(e=lce(e),"channelsLast"===n.dataFormat){var t=Eue(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return Eue(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=Eue(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return Eue(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);xpe.className="Cropping2D",Kre(xpe);var kpe=function(e){d(n,e);var t=w(n);function n(e){var r,a;return l(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,sue(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,qse(nue,"InterpolationFormat",a),r}return p(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return X5((function(){var t=lce(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=hne(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?Pre.resizeNearestNeighbor(t,[a,i]):Pre.resizeBilinear(t,[a,i]);return hne(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?Pre.resizeNearestNeighbor(t,[s,u]):Pre.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);kpe.className="UpSampling2D",Kre(kpe);var wpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=sce(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=Vce(e.depthwiseConstraint),r.depthwiseRegularizer=Jhe(e.depthwiseRegularizer),r}return p(n,[{key:"build",value:function(e){if((e=hce(e)).length<4)throw new Cse("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new Cse("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return X5((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return X5((function(){null==a&&(a="channelsLast"),sue(a);var o=ope(e,a);if(4!==e.rank)throw new Cse("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new Cse("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=O7(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=hne(o,[0,3,1,2])),o}))}(e=lce(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=Lue(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=hce(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=ape(t,this.kernelSize[0],this.padding,this.strides[0]),i=ape(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=oce(this.depthwiseInitializer),e.depthwiseRegularizer=Xhe(this.depthwiseRegularizer),e.depthwiseConstraint=Wce(this.depthwiseRegularizer),e}}]),n}(hpe);function Ipe(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new Cse("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function Npe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return X5((function(){var u=t.shape.length;if(u<3)throw new Cse("Input should be at least 3D, but is ".concat(u,"D."));var c=[1,0].concat(xue(2,u));if(t=hne(t,c),null!=i)throw new Ase("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=h8(h8(a,"bool"),"float32")).rank===u-1&&(a=f9(a,-1)),a=hne(a,c)),r&&(t=pte(t,0),null!=a&&(a=pte(a,0)));var l,h,p=[],f=n,d=t.shape[0],v=rne(t);null!=a&&(h=rne(a));for(var m,g=function(t){var n=v[t],r=X5((function(){return e(n,f)}));if(null==a)l=r[0],f=r[1];else{var i=X5((function(){var e=h[t],n=P9(lee(e),e);return{output:d8(g8(r[0],e),g8(f[0],n)),newStates:f.map((function(t,a){return d8(g8(r[1][a],e),g8(t,n))}))}}));l=i.output,f=i.newStates}s&&p.push(l)},y=0;y<d;++y)g(y);if(s){m=Pte(p,1)}return[l,m,f]}))}wpe.className="DepthwiseConv2D",Kre(wpe);var Spe=function(e){d(n,e);var t=w(n);function n(e){var r,a;if(l(this,n),r=t.call(this,e),null==e.cell)throw new Cse("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new Fpe({cells:e.cell}):e.cell).stateSize)throw new Cse("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new gce({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return p(n,[{key:"getStates",value:function(){return null==this.states_?xue(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){uce(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=O(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(e){o.e(e)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return X5((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new Ase("Constants support is not implemented in RNN yet.");uce(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new gce({shape:[t,null].concat(T(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!P$(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new Cse("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new gce({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];X5((function(){if(!t.stateful)throw new Tse("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new Cse("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return $9([r,e])})):t.states_=[$9([r,t.cell.stateSize])];else if(null==e)Y5(t.states_),null!=t.keptStates&&(Y5(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return $9([r,e])})):t.states_[0]=$9([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new Cse("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):Y5(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!P$(i.shape,s))throw new Cse("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return J5(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=Ipe(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,c=O(r);try{for(c.s();!(u=c.n()).done;){var l=u.value;this.stateSpec.push(new gce({shape:l.shape}))}}catch(e){c.e(e)}finally{c.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof yce){var h=[e].concat(o),p=this.inputSpec.concat(s),f=this.inputSpec;this.inputSpec=p;var d=N(v(n.prototype),"apply",this).call(this,h,t);return this.inputSpec=f,d}return N(v(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return X5((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=lce(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new Cse("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=Npe((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),c=u[0],l=u[1],h=u[2];n.stateful&&n.resetStates(h,a);var p=n.returnSequences?l:c;return n.returnState?[p].concat(h):p}))}},{key:"getInitialState",value:function(e){var t=this;return X5((function(){var n=$9(e.shape);return n=Iue(n=u9(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?Rue(n,[1,e]):n})):t.cell.stateSize>1?[Rue(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){N(v(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=rle(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(wce);Spe.className="RNN",Kre(Spe);var Tpe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n)}(wce),Epe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,Xse(r.units,"units"),r.activation=Ghe(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=sce(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=sce(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=sce(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Jhe(e.kernelRegularizer),r.recurrentRegularizer=Jhe(e.recurrentRegularizer),r.biasRegularizer=Jhe(e.biasRegularizer),r.kernelConstraint=Vce(e.kernelConstraint),r.recurrentConstraint=Vce(e.recurrentConstraint),r.biasConstraint=Vce(e.biasConstraint),r.dropout=yue([1,bue([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=yue([1,bue([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return p(n,[{key:"build",value:function(e){e=hce(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return X5((function(){if(2!==e.length)throw new Cse("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Dpe({ones:function(){return lee(e)},rate:n.dropout,training:i,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Dpe({ones:function(){return lee(r)},rate:n.recurrentDropout,training:i,dropoutFunc:n.dropoutFunc}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=Oue(null!=o?g8(e,o):e,n.kernel.read()),null!=n.bias&&(a=Lue(a,n.bias.read())),null!=s&&(r=g8(r,s));var u=d8(a,Oue(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Uhe(this.activation),useBias:this.useBias,kernelInitializer:oce(this.kernelInitializer),recurrentInitializer:oce(this.recurrentInitializer),biasInitializer:oce(this.biasInitializer),kernelRegularizer:Xhe(this.kernelRegularizer),recurrentRegularizer:Xhe(this.recurrentRegularizer),biasRegularizer:Xhe(this.biasRegularizer),activityRegularizer:Xhe(this.activityRegularizer),kernelConstraint:Wce(this.kernelConstraint),recurrentConstraint:Wce(this.recurrentConstraint),biasConstraint:Wce(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}]),n}(Tpe);Epe.className="SimpleRNNCell",Kre(Epe);var Cpe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),e.cell=new Epe(e),t.call(this,e)}return p(n,[{key:"call",value:function(e,t){var r=this;return X5((function(){null!=r.cell.dropoutMask&&(Y5(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Y5(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return N(v(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Spe);Cpe.className="SimpleRNN",Kre(Cpe);var Ape=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Cse("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,Xse(r.units,"units"),r.activation=Ghe(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=Ghe(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=sce(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=sce(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=sce(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Jhe(e.kernelRegularizer),r.recurrentRegularizer=Jhe(e.recurrentRegularizer),r.biasRegularizer=Jhe(e.biasRegularizer),r.kernelConstraint=Vce(e.kernelConstraint),r.recurrentConstraint=Vce(e.recurrentConstraint),r.biasConstraint=Vce(e.biasConstraint),r.dropout=yue([1,bue([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=yue([1,bue([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return p(n,[{key:"build",value:function(e){var t=(e=hce(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return X5((function(){if(2!==e.length)throw new Cse("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Dpe({ones:function(){return lee(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Dpe({ones:function(){return lee(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,s,u=n.dropoutMask,c=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=g8(e,u[0]));var l=Oue(e,n.kernel.read());n.useBias&&(l=Lue(l,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=g8(a,c[0]));var h=n.recurrentKernel.read(),p=S(Dte(h,[2*n.units,n.units],h.rank-1),2),f=p[0],d=p[1],v=Oue(a,f),m=S(Dte(l,3,l.rank-1),3),g=m[0],y=m[1],b=m[2],x=S(Dte(v,2,v.rank-1),2),k=x[0],w=x[1];i=n.recurrentActivation.apply(d8(g,k)),o=n.recurrentActivation.apply(d8(y,w));var I=Oue(g8(o,a),d);s=n.activation.apply(d8(b,I));var N=d8(g8(i,a),g8(d8(1,M9(i)),s));return[N,N]}))}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Uhe(this.activation),recurrentActivation:Uhe(this.recurrentActivation),useBias:this.useBias,kernelInitializer:oce(this.kernelInitializer),recurrentInitializer:oce(this.recurrentInitializer),biasInitializer:oce(this.biasInitializer),kernelRegularizer:Xhe(this.kernelRegularizer),recurrentRegularizer:Xhe(this.recurrentRegularizer),biasRegularizer:Xhe(this.biasRegularizer),activityRegularizer:Xhe(this.activityRegularizer),kernelConstraint:Wce(this.kernelConstraint),recurrentConstraint:Wce(this.recurrentConstraint),biasConstraint:Wce(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}]),n}(Tpe);Ape.className="GRUCell",Kre(Ape);var Rpe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Ape(e),t.call(this,e)}return p(n,[{key:"call",value:function(e,t){var r=this;return X5((function(){null!=r.cell.dropoutMask&&(Y5(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Y5(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return N(v(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Spe);Rpe.className="GRU",Kre(Rpe);var _pe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,Xse(r.units,"units"),r.activation=Ghe(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=Ghe(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=sce(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=sce(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=sce(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=Jhe(e.kernelRegularizer),r.recurrentRegularizer=Jhe(e.recurrentRegularizer),r.biasRegularizer=Jhe(e.biasRegularizer),r.kernelConstraint=Vce(e.kernelConstraint),r.recurrentConstraint=Vce(e.recurrentConstraint),r.biasConstraint=Vce(e.biasConstraint),r.dropout=yue([1,bue([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=yue([1,bue([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return p(n,[{key:"build",value:function(e){var t,n,r=(e=hce(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new jue).apply([i]),o=a.apply([2*i]);return Aue(Aue(n,r),o)}}]),n}(Vue),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return X5((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new Cse("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Dpe({ones:function(){return lee(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Dpe({ones:function(){return lee(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,s,u,c,l=n.dropoutMask,h=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=g8(e,l[0]));var p=Oue(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=g8(a,h[0])),p=d8(p,Oue(a,n.recurrentKernel.read())),n.useBias&&(p=Lue(p,n.bias.read()));var f=S(Dte(p,4,p.rank-1),4),d=f[0],v=f[1],m=f[2],g=f[3];o=n.recurrentActivation.apply(d),s=n.recurrentActivation.apply(v),u=d8(g8(s,i),g8(o,n.activation.apply(m))),c=n.recurrentActivation.apply(g);var y=g8(c,n.activation.apply(u));return[y,y,u]}))}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Uhe(this.activation),recurrentActivation:Uhe(this.recurrentActivation),useBias:this.useBias,kernelInitializer:oce(this.kernelInitializer),recurrentInitializer:oce(this.recurrentInitializer),biasInitializer:oce(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Xhe(this.kernelRegularizer),recurrentRegularizer:Xhe(this.recurrentRegularizer),biasRegularizer:Xhe(this.biasRegularizer),activityRegularizer:Xhe(this.activityRegularizer),kernelConstraint:Wce(this.kernelConstraint),recurrentConstraint:Wce(this.recurrentConstraint),biasConstraint:Wce(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}]),n}(Tpe);_pe.className="LSTMCell",Kre(_pe);var Ope=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new _pe(e),t.call(this,e)}return p(n,[{key:"call",value:function(e,t){var r=this;return X5((function(){null!=r.cell.dropoutMask&&(Y5(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Y5(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return N(v(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Spe);Ope.className="LSTM",Kre(Ope);var Fpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).cells=e.cells,r}return p(n,[{key:"stateSize",get:function(){var e,t=[],n=O(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,T(r.stateSize)):t.push(r.stateSize)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return X5((function(){var r,a=e.slice(1),i=[],o=O(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(e){o.e(e)}finally{o.f()}i.reverse();for(var u,c=[],l=0;l<n.cells.length;++l){var h=n.cells[l];a=i[l],u=0===l?[e[0]].concat(a):[u[0]].concat(a),u=h.call(u,t),c.push(u.slice(1))}a=[];var p,f=O(c.slice().reverse());try{for(f.s();!(p=f.n()).done;){var d,v=p.value;(d=a).push.apply(d,T(v))}}catch(e){f.e(e)}finally{f.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;uce(e)&&(e=e[0]),this.cells.forEach((function(n,r){hue("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign(Object.assign({},e),t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=O(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,T(r.trainableWeights))}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=O(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,T(r.nonTrainableWeights))}}catch(e){n.e(e)}finally{n.f()}if(!this.trainable){var a,i=[],o=O(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,T(s.trainableWeights))}}catch(e){o.e(e)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=O(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,T(r.weights))}}catch(e){n.e(e)}finally{n.f()}return vce(t)}},{key:"setWeights",value:function(e){var t,n=[],r=O(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(e){r.e(e)}finally{r.f()}mce(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=O(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(rle(o,r))}}catch(e){i.e(e)}finally{i.f()}return new e({cells:a})}}]),n}(Tpe);function Dpe(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):Pue(t(),n)},c=function(){return Bue(u,t,a)};return!o||o<=1?J5(c().clone()):Array(o).fill(void 0).map(c).map((function(e){return J5(e.clone())}))}Fpe.className="StackedRNNCells",Kre(Fpe);var Mpe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Lpe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),e.unroll)throw new Ase("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Ase("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new gce({ndim:5})],r}return p(n,[{key:"call",value:function(e,t){var r=this;return X5((function(){if(null!=r.cell.dropoutMask&&(Y5(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Y5(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new Cse("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return N(v(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat(T(t.slice(2)))),this.returnState&&(t=[t].concat(T(Array(2).fill([e[0]].concat(T(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return X5((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=$9([a[0]].concat(T(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(i):[i]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];X5((function(){if(!t.stateful)throw new Tse("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat(T(a.slice(2)));if(null==r[0])throw new Cse("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return $9(i)})):t.states_=[$9(i)];else if(null==e)Y5(t.states_),null!=t.keptStates&&(Y5(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return $9(i)})):t.states_[0]=$9(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new Cse("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):Y5(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],u=i;if(!P$(s.shape,u))throw new Cse("State ".concat(o," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return J5(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,c=e[u?3:2],l=e[u?4:3],h=ape(c,a[0],i,o[0],s[0]),p=ape(l,a[1],i,o[1],s[1]);return[].concat(T(e.slice(0,2)),T(u?[r,h,p]:[h,p,r]))}}]),n}(Spe);Lpe.className="ConvRNN2D";var zpe=function(e){d(n,e);var t=w(n);function n(e){var r;l(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,u=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Object.assign(Object.assign({},e),{units:a}))).filters=a,Xse(r.filters,"filters"),r.kernelSize=rpe(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return Xse(e,"kernelSize")})),r.strides=rpe(o||1,2,"strides"),r.strides.forEach((function(e){return Xse(e,"strides")})),r.padding=s||"valid",uue(r.padding),r.dataFormat=u||"channelsLast",sue(r.dataFormat),r.dilationRate=rpe(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return Xse(e,"dilationRate")})),r}return p(n,[{key:"build",value:function(e){var t;e=hce(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new Cse("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;o=new(t=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e,t){return Cue([s.apply([u]),eee([u]),s.apply([2*u])])}}]),n}(Vue),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return X5((function(){if(3!==e.length)throw new Cse("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Dpe({ones:function(){return lee(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,u=function(e,t,n){return t&&t[n]?g8(t[n],e):e},c=u(a,s,0),l=u(a,s,1),h=u(a,s,2),p=u(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Dpe({ones:function(){return lee(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var f=n.recurrentDropoutMask,d=u(i,f,0),v=u(i,f,1),m=u(i,f,2),g=u(i,f,3),y=S(Dte(n.kernel.read(),4,3),4),b=y[0],x=y[1],k=y[2],w=y[3],I=S(n.useBias?Dte(n.bias.read(),4):[null,null,null,null],4),N=I[0],T=I[1],E=I[2],C=I[3];c=n.inputConv(c,b,N,n.padding),l=n.inputConv(l,x,T,n.padding),h=n.inputConv(h,k,E,n.padding),p=n.inputConv(p,w,C,n.padding);var A=S(Dte(n.recurrentKernel.read(),4,3),4),R=A[0],_=A[1],O=A[2],F=A[3];d=n.recurrentConv(d,R),v=n.recurrentConv(v,_),m=n.recurrentConv(m,O),g=n.recurrentConv(g,F);var D=n.recurrentActivation.apply(d8(c,d)),M=n.recurrentActivation.apply(d8(l,v)),L=d8(g8(M,o),g8(D,n.activation.apply(d8(h,m)))),z=g8(n.recurrentActivation.apply(d8(p,g)),n.activation.apply(L));return[z,z,L]}))}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this),t=(e.units,Mpe(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},t),r)}},{key:"inputConv",value:function(e,t,n,r){var a=b7(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Lue(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return b7(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(_pe);zpe.className="ConvLSTM2DCell",Kre(zpe);var Ppe=function(e){d(n,e);var t=w(n);function n(e){l(this,n);var r=new zpe(e);return t.call(this,Object.assign(Object.assign({},e),{cell:r}))}return p(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Lpe);Ppe.className="ConvLSTM2D",Kre(Ppe);var Bpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return p(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return X5((function(){n.invokeCallHook(e,t);var r=lce(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return Bue((function(){return Pue(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return N(v(n.prototype),"dispose",this).call(this)}}]),n}(wce);Bpe.className="Dropout",Kre(Bpe);var Wpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return p(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(Bpe);Wpe.className="SpatialDropout1D",Kre(Wpe);var Upe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,Xse(r.units,"units"),r.activation=Ghe(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=sce(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=sce(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=Vce(e.kernelConstraint),r.biasConstraint=Vce(e.biasConstraint),r.kernelRegularizer=Jhe(e.kernelRegularizer),r.biasRegularizer=Jhe(e.biasRegularizer),r.activityRegularizer=Jhe(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return p(n,[{key:"build",value:function(e){var t=(e=hce(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:f({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=hce(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return X5((function(){n.invokeCallHook(e,t);var r,a=lce(e),i=Jse(n.activation.getClassName());return null!=i?r=Oue(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=Oue(a,n.kernel.read()),null!=n.bias&&(r=Lue(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:Uhe(this.activation),useBias:this.useBias,kernelInitializer:oce(this.kernelInitializer),biasInitializer:oce(this.biasInitializer),kernelRegularizer:Xhe(this.kernelRegularizer),biasRegularizer:Xhe(this.biasRegularizer),activityRegularizer:Xhe(this.activityRegularizer),kernelConstraint:Wce(this.kernelConstraint),biasConstraint:Wce(this.biasConstraint)},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);Upe.className="Dense",Kre(Upe);var Vpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return p(n,[{key:"computeOutputShape",value:function(e){var t,n=O((e=hce(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new Cse('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(e){n.e(e)}finally{n.f()}return[e[0],gue(e,1)]}},{key:"call",value:function(e,t){var n=this;return X5((function(){n.invokeCallHook(e,t);var r=lce(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=hne(r,a)}return function(e){if(e.rank<=1)throw new Cse("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],gue(e.shape,1)];return X8(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);Vpe.className="Flatten",Kre(Vpe);var Gpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=Ghe(e.activation),r}return p(n,[{key:"call",value:function(e,t){var n=this;return X5((function(){n.invokeCallHook(e,t);var r=lce(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:Uhe(this.activation)},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);Gpe.className="Activation",Kre(Gpe);var jpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return p(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return X5((function(){return e=lce(e),t=e,r=n.n,X5((function(){if(2!==t.shape.length)throw new Cse("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return Rue(Iue(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);jpe.className="RepeatVector",Kre(jpe);var Hpe=function(e){d(n,e);var t=w(n);function n(e){var r;l(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return p(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new Cse("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=gue(e);if(null!==i){if(0===a||u%a!=0)throw new Cse(n);r[i]=u/a}else if(u!==a)throw new Cse(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return X5((function(){n.invokeCallHook(e,t);var r=lce(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return X8(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);Hpe.className="Reshape",Kre(Hpe);var qpe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=xue(1,e.dims.length+1);if(!P$(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new gce({ndim:r.dims.length+1})],r}return p(n,[{key:"computeOutputShape",value:function(e){var t=(e=hce(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return hne(lce(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);qpe.className="Permute",Kre(qpe);var Kpe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return p(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=lce(e);return I8(uee(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return X5((function(){n.invokeCallHook(e,t);var r=lce(e),a=I8(uee(r,n.maskValue),-1,!0);return g8(r,h8(a,r.dtype))}))}}]),n}(wce);Kpe.className="Masking",Kre(Kpe);var Xpe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(Lse(e.inputLength))}return r.inputDim=e.inputDim,Xse(r.inputDim,"inputDim"),r.outputDim=e.outputDim,Xse(r.outputDim,"outputDim"),r.embeddingsInitializer=sce(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=Jhe(e.embeddingsRegularizer),r.activityRegularizer=Jhe(e.activityRegularizer),r.embeddingsConstraint=Vce(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return p(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return X5((function(){return n.maskZero?(e=lce(e),uee(e,U7(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=hce(e),null==this.inputLength)return[].concat(T(e),[this.outputDim]);var t=Lse(this.inputLength);if(t.length!==e.length-1)throw new Cse('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new Cse('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat(T(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return X5((function(){n.invokeCallHook(e,t);var r=lce(e);"int32"!==r.dtype&&(r=wue(r,"int32"));var a=Fue(n.embeddings.read(),X8(r,[r.size]));return X8(a,hce(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:oce(this.embeddingsInitializer),embeddingsRegularizer:Xhe(this.embeddingsRegularizer),activityRegularizer:Xhe(this.activityRegularizer),embeddingsConstraint:Wce(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);Xpe.className="Embedding",Kre(Xpe);var Ype=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return p(n,[{key:"mergeFunction",value:function(e){throw new Ase}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new Cse("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[hce(e)]),e.length<2)throw new Cse("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=O(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(e){r.e(e)}finally{r.f()}if((n=jse(n)).length>1)throw new Cse("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===jse(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return X5((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=bue(r),o=O(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,c=0;c<i-u;++c)s=Iue(s,1);t.push(s)}}catch(e){o.e(e)}finally{o.f()}return n.mergeFunction(t)}var l,h=!1,p=O(e);try{for(p.s();!(l=p.n()).done;){var f=l.value,d=f.rank;if(null==d){var v=f.shape,m=v[0],g=v.slice(1).concat([m]),y=X8(f,[m].concat(gue(v.slice(1))));y=hne(y,[1,0]),y=X8(y,g),t.push(y),h=!0}else if(d>1){var b=xue(1,d).concat([0]);t.push(hne(f,b)),h=!0}else t.push(f)}}catch(e){p.e(e)}finally{p.f()}var x=n.mergeFunction(t),k=x.rank;if(h)if(null==k){var w=x.shape,I=w[w.length-1],N=[I].concat(w.slice(0,w.length-1));x=X8(hne(X8(x,[-1,I]),[1,0]),N)}else if(k>1){var S=[k-1].concat(xue(0,k-1));x=hne(x,S)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=O(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(e){o.e(e)}finally{o.f()}return t=1===(i=jse(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return X5((function(){if(null==t)return null;if(!Array.isArray(t))throw new Cse("`mask` should be an Array");if(!Array.isArray(e))throw new Cse("`inputs` should be an Array");if(t.length!==e.length)throw new Cse("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:f9(e,0)})))[0],r=1;r<t.length-1;++r)n=U9(n,t[r]);return n}))}}]),n}(wce),Jpe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e)}return p(n,[{key:"mergeFunction",value:function(e){return X5((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=d8(t,e[n]);return t}))}}]),n}(Ype);Jpe.className="Add",Kre(Jpe);var Zpe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e)}return p(n,[{key:"mergeFunction",value:function(e){return X5((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=g8(t,e[n]);return t}))}}]),n}(Ype);Zpe.className="Multiply",Kre(Zpe);var Qpe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e)}return p(n,[{key:"mergeFunction",value:function(e){return X5((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=d8(t,e[n]);return g8(1/e.length,t)}))}}]),n}(Ype);Qpe.className="Average",Kre(Qpe);var $pe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e)}return p(n,[{key:"mergeFunction",value:function(e){return X5((function(){for(var t=e[0],n=1;n<e.length;++n)t=Z9(t,e[n]);return t}))}}]),n}(Ype);$pe.className="Maximum",Kre($pe);var efe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e)}return p(n,[{key:"mergeFunction",value:function(e){return X5((function(){for(var t=e[0],n=1;n<e.length;++n)t=nee(t,e[n]);return t}))}}]),n}(Ype);efe.className="Minimum",Kre(efe);var tfe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return p(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new Cse("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=O(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(e){r.e(e)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,u=!1,c=O(a);try{for(c.s();!(s=c.n()).done;){if(P$(s.value,o)){u=!0;break}}}catch(e){c.e(e)}finally{c.f()}u||a.push(o)}if(a.length>1)throw new Cse("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return X5((function(){return Cue(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Cse("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=O(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new Cse("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Cse("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Cse("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return X5((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(h8(lee(e[i]),"bool")):t[i].rank<e[i].rank?a.push(f9(t[i],-1)):a.push(t[i]);var o=Z8(a,n.axis);return w8(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ype);function nfe(e,t){for(;e<0;)e+=t;return e}tfe.className="Concatenate",Kre(tfe);var rfe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return p(n,[{key:"build",value:function(e){F$(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new Ase("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new Cse("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new Cse("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return nfe(t,e[n].shape.length)})):[nfe(this.axes,n.shape.length),nfe(this.axes,r.shape.length)],this.normalize&&(n=ale(n,t[0]),r=ale(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new Ase("batchDot is not implemented for tensors of 4D or higher rank yet");if(F$(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),F$(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new Ase("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return X5((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=X8(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var c=[],l=0;l<n;++l)c.push(1);e=X8(e,e.shape.concat(c))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?u9(g8(e,t),i[0]):u9(g8(hne(e,[1,0]),t),i[1]);else{var h=i[0]!==e.shape.length-1,p=i[1]===t.shape.length-1;o=Q8(e,t,h,p)}if(n>0){for(var f,d=[],v=f=r>a?r+a-3:r-1;v<f+n;++v)d.push(v);o=zte(o,d)}return 1===o.shape.length&&(o=f9(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[nfe(this.axes,e.length),nfe(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){F$(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new Ase("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ype);rfe.className="Dot",Kre(rfe);var afe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return p(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return X5((function(){n.invokeCallHook(e,t);var r=lce(e);return Bue((function(){return d8(_ue(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(wce);afe.className="GaussianNoise",Kre(afe);var ife=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return p(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return X5((function(){n.invokeCallHook(e,t);var r=lce(e);if(n.rate>0&&n.rate<1){return Bue((function(){var e=Math.sqrt(n.rate/(1-n.rate));return g8(r,_ue(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(wce);ife.className="GaussianDropout",Kre(ife);var ofe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return p(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||lce(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=N(v(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return X5((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return Bue((function(){var t=lce(e),a=-1.7580993408473766,i=x9(ite(r),n.rate);i=wue(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,u=d8(g8(t,i),g8(d8(i,-1),a));return d8(g8(u,o),s)}),(function(){return lce(e)}),t.training||!1)}return e}))}}]),n}(wce);function sfe(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=i7(e,t,n,r,a,o);else if(3===e.rank)i=o7(e,t,n,r,a,o);else{if(4!==e.rank)throw new Ase("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=s7(e,t,n,r,a,o)}return i}function ufe(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return X5((function(){var i=iee(e,r),o=i.mean,s=i.variance;return[sfe(e,o,s,n,t,a),o,s]}))}function cfe(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return X5((function(){var i,o=iee(e,r),s=o.mean,u=o.variance,c=[],l=O(xue(0,e.rank));try{for(l.s();!(i=l.n()).done;){var h=i.value;-1!==r.indexOf(h)?c.push(1):c.push(e.shape[h])}}catch(e){l.e(e)}finally{l.f()}var p=X8(s,c),f=X8(u,c),d=null==t?null:X8(t,c),v=null==n?null:X8(n,c);return[sfe(e,p,f,v,d,a),s,u]}))}ofe.className="AlphaDropout",Kre(ofe);var lfe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=sce(e.betaInitializer||"zeros"),r.gammaInitializer=sce(e.gammaInitializer||"ones"),r.movingMeanInitializer=sce(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=sce(e.movingVarianceInitializer||"ones"),r.betaConstraint=Vce(e.betaConstraint),r.gammaConstraint=Vce(e.gammaConstraint),r.betaRegularizer=Jhe(e.betaRegularizer),r.gammaRegularizer=Jhe(e.gammaRegularizer),r}return p(n,[{key:"build",value:function(e){e=hce(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new Cse("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new gce({ndim:e.length,axes:f({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return X5((function(){var r=null!=t.training&&t.training,a=lce(e),i=a.shape,o=i.length,s=xue(0,o),u=n.axis>=0?n.axis:n.axis+o;s.splice(u,1);var c=Ose(1,o);c[u]=i[u];var l=s.slice();l.sort();var h=!P$(l,xue(0,o).slice(0,o-1));if(!r)return function(){if(h){var e=X8(n.movingMean.read(),c),t=X8(n.movingVariance.read(),c),r=n.center?X8(n.beta.read(),c):null,i=n.scale?X8(n.gamma.read(),c):null;return sfe(a,e,t,r,i,n.epsilon)}return sfe(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var p=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return P$(r.slice().sort(),xue(0,e.rank-1))?ufe(e,t,n,r,a):cfe(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),s,n.epsilon),f=S(p,3),d=f[0],v=f[1],m=f[2],g=function(e,t,n){X5((function(){var r=1-n,a=e.read(),i=g8(P9(a,t),r);e.write(P9(a,i))}))};return g(n.movingMean,v,n.momentum),g(n.movingVariance,m,n.momentum),d}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:oce(this.betaInitializer),gammaInitializer:oce(this.gammaInitializer),movingMeanInitializer:oce(this.movingMeanInitializer),movingVarianceInitializer:oce(this.movingVarianceInitializer),betaRegularizer:Xhe(this.betaRegularizer),gammaRegularizer:Xhe(this.gammaRegularizer),betaConstraint:Wce(this.betaConstraint),gammaConstraint:Wce(this.gammaConstraint)},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);lfe.className="BatchNormalization",Kre(lfe);var hfe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"==typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=O(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(e){i.e(e)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=sce(e.betaInitializer||"zeros"),r.gammaInitializer=sce(e.gammaInitializer||"ones"),r.betaRegularizer=Jhe(e.betaRegularizer),r.gammaRegularizer=Jhe(e.gammaRegularizer),r.supportsMasking=!0,r}return p(n,[{key:"build",value:function(e){var t=(e=hce(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=O(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(e){a.e(e)}finally{a.f()}if(this.axis.length!==jse(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=lce(e),a=r.shape,i=a.length;return X5((function(){var e,t=iee(r,n.axis,!0),o=t.mean,s=t.variance,u=Ose(1,i),c=O(n.axis);try{for(c.s();!(e=c.n()).done;){var l=e.value;u[l]=a[l]}}catch(e){c.e(e)}finally{c.f()}for(var h=function(e){return null!=e&&e.shape.length!==i?X8(e,u):e},p=n.scale?h(n.gamma.read()):null,f=n.center?h(n.beta.read()):null,d=[],v=[],m=0;m<i;++m)-1!==n.axis.indexOf(m)?(d.push(a[m]),v.push(1)):(d.push(1),v.push(a[m]));return o=v9(o,d),s=v9(s,d),null!=p&&(p=v9(p,v)),null!=f&&(f=v9(f,v)),sfe(r,o,s,f,p,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:oce(this.betaInitializer),gammaInitializer:oce(this.gammaInitializer),betaRegularizer:Xhe(this.betaRegularizer),gammaRegularizer:Xhe(this.gammaRegularizer)},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);hfe.className="LayerNormalization",Kre(hfe);var pfe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Cse("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"==typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Cse("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new Cse("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new gce({ndim:4})],r}return p(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=hce(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return X5((function(){return t=lce(e),r=n.padding,a=n.dataFormat,X5((function(){if(4!==t.rank)throw new Cse("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new Cse("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new Cse("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],pee(t,e)}));var t,r,a}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);function ffe(e,t,n,r,a,i){return X5((function(){var o;sue(a),cue(i),uue(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=ope(e,a);var s="same"===r?"same":"valid";return o="max"===i?X9(e,t,n,s):Y8(e,t,n,s),"channelsFirst"===a&&(o=hne(o,[0,3,1,2])),o}))}function dfe(e,t,n,r,a,i){return X5((function(){var o;sue(a),cue(i),uue(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=spe(e,a);var s="same"===r?"same":"valid";return o="max"===i?Y9(e,t,n,s):J8(e,t,n,s),"channelsFirst"===a&&(o=hne(o,[0,4,1,2,3])),o}))}pfe.className="ZeroPadding2D",Kre(pfe);var vfe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"==typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new Cse("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(Xse(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"==typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new Cse("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return Xse(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,uue(r.padding),r.inputSpec=[new gce({ndim:3})],r}return p(n,[{key:"computeOutputShape",value:function(e){var t=ape((e=hce(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return X5((function(){n.invokeCallHook(e,t),e=Iue(lce(e),2);var r=n.poolingFunction(lce(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return zte(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce),mfe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e)}return p(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return sue(a),uue(r),ffe(e,t,n,r,a,"max")}}]),n}(vfe);mfe.className="MaxPooling1D",Kre(mfe);var gfe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e)}return p(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return sue(a),uue(r),ffe(e,t,n,r,a,"avg")}}]),n}(vfe);gfe.className="AveragePooling1D",Kre(gfe);var yfe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Cse("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return Xse(r.poolSize,"poolSize"),Xse(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,sue(r.dataFormat),uue(r.padding),r.inputSpec=[new gce({ndim:4})],r}return p(n,[{key:"computeOutputShape",value:function(e){e=hce(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=ape(t,this.poolSize[0],this.padding,this.strides[0]),n=ape(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return X5((function(){return n.invokeCallHook(e,t),n.poolingFunction(lce(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce),bfe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e)}return p(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return sue(a),uue(r),ffe(e,t,n,r,a,"max")}}]),n}(yfe);bfe.className="MaxPooling2D",Kre(bfe);var xfe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e)}return p(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return sue(a),uue(r),ffe(e,t,n,r,a,"avg")}}]),n}(yfe);xfe.className="AveragePooling2D",Kre(xfe);var kfe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new Cse("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return Xse(r.poolSize,"poolSize"),Xse(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,sue(r.dataFormat),uue(r.padding),r.inputSpec=[new gce({ndim:5})],r}return p(n,[{key:"computeOutputShape",value:function(e){e=hce(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=ape(t,this.poolSize[0],this.padding,this.strides[0]),n=ape(n,this.poolSize[1],this.padding,this.strides[1]),r=ape(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return X5((function(){return n.invokeCallHook(e,t),n.poolingFunction(lce(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce),wfe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e)}return p(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return sue(a),uue(r),dfe(e,t,n,r,a,"max")}}]),n}(kfe);wfe.className="MaxPooling3D",Kre(wfe);var Ife=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e)}return p(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return sue(a),uue(r),dfe(e,t,n,r,a,"avg")}}]),n}(kfe);Ife.className="AveragePooling3D",Kre(Ife);var Nfe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).inputSpec=[new gce({ndim:3})],r}return p(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new Ase}}]),n}(wce),Sfe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e||{})}return p(n,[{key:"call",value:function(e,t){return X5((function(){var t=lce(e);return Q9(t,1)}))}}]),n}(Nfe);Sfe.className="GlobalAveragePooling1D",Kre(Sfe);var Tfe=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,e||{})}return p(n,[{key:"call",value:function(e,t){return X5((function(){var t=lce(e);return n9(t,1)}))}}]),n}(Nfe);Tfe.className="GlobalMaxPooling1D",Kre(Tfe);var Efe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,sue(r.dataFormat),r.inputSpec=[new gce({ndim:4})],r}return p(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new Ase}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce),Cfe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"call",value:function(e,t){var n=this;return X5((function(){var t=lce(e);return"channelsLast"===n.dataFormat?Q9(t,[1,2]):Q9(t,[2,3])}))}}]),n}(Efe);Cfe.className="GlobalAveragePooling2D",Kre(Cfe);var Afe=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"call",value:function(e,t){var n=this;return X5((function(){var t=lce(e);return"channelsLast"===n.dataFormat?n9(t,[1,2]):n9(t,[2,3])}))}}]),n}(Efe);Afe.className="GlobalMaxPooling2D",Kre(Afe);var Rfe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).layer=e.layer,r}return p(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){N(v(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=rle(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(wce),_fe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return p(n,[{key:"build",value:function(e){if((e=hce(e)).length<3)throw new Cse("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),N(v(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=hce(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return X5((function(){return Npe((function(e,r){return[lce(n.layer.call(e,t)),[]]}),e=lce(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(Rfe);_fe.className="TimeDistributed",Kre(_fe);var Ofe=function(e){d(n,e);var t=w(n);function n(e){var r;l(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=rle(i),a.goBackwards=!0!==a.goBackwards;var o,s={};if(s.className=e.layer.getClassName(),s.config=a,r.backwardLayer=rle(s),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=r.mergeMode,qse(iue,"BidirectionalMergeMode",o),e.weights)throw new Ase("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return p(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):Mse(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=Ipe(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return N(v(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new Cse("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,T(r));var c=r.map((function(e){return new gce({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),s.push.apply(s,T(c))}if(null!=a)throw new Ase("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof yce,h=0,p=o;h<p.length;h++){if(p[h]instanceof yce!==l)throw new Cse("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var f=[e].concat(o),d=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=d;var g=N(v(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=m,g}return N(v(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return X5((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),c=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:c}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=pte(a,1)),"concat"===n.mergeMode?o=Cue([r,a]):"sum"===n.mergeMode?o=d8(r,a):"ave"===n.mergeMode?o=g8(.5,d8(r,a)):"mul"===n.mergeMode?o=g8(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;hue(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),hue(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){N(v(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=rle(t.layer);if(delete t.layer,null!=t.numConstants)throw new Ase("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(Rfe);Ofe.className="Bidirectional",Kre(Ofe);var Ffe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).scale=e.scale,e.offset?r.offset=e.offset:r.offset=0,r}return p(n,[{key:"getConfig",value:function(){var e={scale:this.scale,offset:this.offset},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return X5((function(){return"float32"!==(e=lce(e)).dtype&&(e=wue(e,"float32")),d8(g8(e,n.scale),n.offset)}))}}]),n}(wce);Ffe.className="Rescaling",Kre(Ffe);var Dfe=Pre.resizeBilinear,Mfe=Pre.cropAndResize,Lfe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,r}return p(n,[{key:"centerCrop",value:function(e,t,n,r,a,i,o,s){return X5((function(){var u,c=!1,l=[t/i,n/o,(r+t)/i,(a+n)/o],h=[];3===e.rank?(c=!0,u=Pte([e])):u=e;for(var p=0;p<u.shape[0];p++)h.push(l);var f=V5(h,[h.length,4]),d=ste(0,h.length,1,"int32"),v=Mfe(u,f,d,[r,a],"nearest");return wue(c?lce(rne(v)):v,s)}))}},{key:"upsize",value:function(e,t,n,r){return X5((function(){return wue(Dfe(e,[t,n]),r)}))}},{key:"call",value:function(e,t){var n=this;return X5((function(){var t=lce(e),r=t.dtype,a=t.shape,i=a[a.length-3],o=a[a.length-2],s=0;i!==n.height&&(s=Math.floor((i-n.height)/2));var u=0;return o!==n.width&&0===(u=Math.floor((o-n.width)/2))&&(u=1),s>=0&&u>=0?n.centerCrop(t,s,u,n.height,n.width,i,o,r):n.upsize(e,n.height,n.width,r)}))}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){var t=(e=hce(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}]),n}(wce);Lfe.className="CenterCrop",Kre(Lfe);var zfe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).numTokens=e.numTokens,e.outputMode?r.outputMode=e.outputMode:r.outputMode="multiHot",r}return p(n,[{key:"getConfig",value:function(){var e={numTokens:this.numTokens,outputMode:this.outputMode},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){return null==(e=hce(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}},{key:"call",value:function(e,t){var n=this;return X5((function(){var r;if("int32"!==(e=lce(e)).dtype&&(e=wue(e,"int32")),void 0!==t.countWeights){if("count"!==n.outputMode)throw new Cse("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));r=lce(t.countWeights)}var a=n9(e),i=r9(e),o=b9(n.numTokens,a).bufferSync().get(0),s=x9(i,0).bufferSync().get(0);if(!o||!s)throw new Cse("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(n.numTokens));return function(e,t,n,r){var a=lce(e);if("int32"!==a.dtype&&(a=wue(a,"int32")),"int"===t)return a;var i=a.shape;if(0===a.rank&&(a=f9(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=f9(a,-1)),a.rank>2)throw new Cse("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(i)+" which would result in output rank ".concat(a.rank,"."));var o,s=["multiHot","oneHot"].includes(t);if(o=R7(a,void 0!==r&&"count"===t?r:[],n,s),"tfIdf"!==t)return o;if(r)return g8(o,r);throw new Cse("When outputMode is 'tfIdf', weights must be provided.")}(e,n.outputMode,n.numTokens,r)}))}}]),n}(wce);zfe.className="CategoryEncoding",Kre(zfe);var Pfe=new Set(["bilinear","nearest"]),Bfe=function(e){d(n,e);var t=w(n);function n(e){var r;if(l(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,e.interpolation){if(!Pfe.has(e.interpolation))throw new Cse("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));r.interpolation=e.interpolation}else r.interpolation="bilinear";return r.cropToAspectRatio=Boolean(e.cropToAspectRatio),r}return p(n,[{key:"computeOutputShape",value:function(e){var t=(e=hce(e))[2];return[this.height,this.width,t]}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return X5((function(){var t=[n.height,n.width];if("bilinear"===n.interpolation)return Pre.resizeBilinear(e,t,!n.cropToAspectRatio);if("nearest"===n.interpolation)return Pre.resizeNearestNeighbor(e,t,!n.cropToAspectRatio);throw new Error("Interpolation is ".concat(n.interpolation," but only ").concat(T(Pfe)," are supported"))}))}}]),n}(wce);Bfe.className="Resizing",Kre(Bfe);var Wfe=function(){function e(t){l(this,e),this.seed=t}return p(e,[{key:"next",value:function(){if(void 0!==this.seed)return this.seed++}}]),e}();Wfe.className="RandomSeed";var Ufe=function(e){d(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).randomGenerator=new Wfe(e.seed),r}return p(n,[{key:"getConfig",value:function(){var e={seed:this.randomGenerator.seed},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wce);Ufe.className="BaseRandomLayer";var Vfe=new Set(["bilinear","nearest"]),Gfe=function(e){d(n,e);var t=w(n);function n(e){var r;l(this,n),r=t.call(this,e);var a=e.factor,i=e.interpolation,o=void 0===i?"bilinear":i;if(r.factor=a,Array.isArray(r.factor)&&2===r.factor.length)r.widthLower=r.factor[0],r.widthUpper=r.factor[1];else{if(Array.isArray(r.factor)||!(r.factor>0))throw new Cse("Invalid factor: ".concat(r.factor,". Must be positive number or tuple of 2 numbers"));r.widthLower=-r.factor,r.widthUpper=r.factor}if(r.widthLower<-1||r.widthUpper<-1)throw new Cse("factor must have values larger than -1. Got: ".concat(r.factor));if(r.widthUpper<r.widthLower)throw new Cse("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(r.widthUpper,".\n        Got lower bound: ").concat(r.widthLower,"\n      "));if(o){if(!Vfe.has(o))throw new Cse("Invalid interpolation parameter: ".concat(o," is not implemented"));r.interpolation=o}return r}return p(n,[{key:"getConfig",value:function(){var e={factor:this.factor,interpolation:this.interpolation},t=N(v(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){var t=(e=hce(e))[2];return[this.imgHeight,-1,t]}},{key:"call",value:function(e,t){var n=this;return X5((function(){var t=lce(e);n.imgHeight=t.shape[t.shape.length-3];var r=t.shape[t.shape.length-2];n.widthFactor=ite([1],1+n.widthLower,1+n.widthUpper,"float32",n.randomGenerator.next());var a=n.widthFactor.dataSync()[0]*r;a=Math.round(a);var i=[n.imgHeight,a];switch(n.interpolation){case"bilinear":return Pre.resizeBilinear(e,i);case"nearest":return Pre.resizeNearestNeighbor(e,i);default:throw new Error("Interpolation is ".concat(n.interpolation,"\n          but only ").concat(T(Vfe)," are supported"))}}))}}]),n}(Ufe);function jfe(e){return new gfe(e)}function Hfe(e){return new xfe(e)}function qfe(e){return new Ife(e)}function Kfe(e){return new Tfe(e)}function Xfe(e){return new Afe(e)}function Yfe(e){return new mfe(e)}function Jfe(e){return new bfe(e)}Gfe.className="RandomWidth",Kre(Gfe);var Zfe={__proto__:null,Layer:wce,RNN:Spe,RNNCell:Tpe,activation:function(e){return new Gpe(e)},add:function(e){return new Jpe(e)},alphaDropout:function(e){return new ofe(e)},average:function(e){return new Qpe(e)},averagePooling1d:jfe,averagePooling2d:Hfe,averagePooling3d:qfe,avgPool1d:function(e){return jfe(e)},avgPool2d:function(e){return Hfe(e)},avgPool3d:function(e){return qfe(e)},avgPooling1d:function(e){return jfe(e)},avgPooling2d:function(e){return Hfe(e)},avgPooling3d:function(e){return qfe(e)},batchNormalization:function(e){return new lfe(e)},bidirectional:function(e){return new Ofe(e)},categoryEncoding:function(e){return new zfe(e)},centerCrop:function(e){return new Lfe(e)},concatenate:function(e){return new tfe(e)},conv1d:function(e){return new bpe(e)},conv2d:function(e){return new fpe(e)},conv2dTranspose:function(e){return new vpe(e)},conv3d:function(e){return new dpe(e)},conv3dTranspose:function(e){return new mpe(e)},convLstm2d:function(e){return new Ppe(e)},convLstm2dCell:function(e){return new zpe(e)},cropping2D:function(e){return new xpe(e)},dense:function(e){return new Upe(e)},depthwiseConv2d:function(e){return new wpe(e)},dot:function(e){return new rfe(e)},dropout:function(e){return new Bpe(e)},elu:function(e){return new epe(e)},embedding:function(e){return new Xpe(e)},flatten:function(e){return new Vpe(e)},gaussianDropout:function(e){return new ife(e)},gaussianNoise:function(e){return new afe(e)},globalAveragePooling1d:function(e){return new Sfe(e)},globalAveragePooling2d:function(e){return new Cfe(e)},globalMaxPool1d:Kfe,globalMaxPool2d:Xfe,globalMaxPooling1d:Kfe,globalMaxPooling2d:Xfe,gru:function(e){return new Rpe(e)},gruCell:function(e){return new Ape(e)},input:Ihe,inputLayer:function(e){return new Nce(e)},layerNormalization:function(e){return new hfe(e)},leakyReLU:function(e){return new Qhe(e)},lstm:function(e){return new Ope(e)},lstmCell:function(e){return new _pe(e)},masking:function(e){return new Kpe(e)},maxPool1d:Yfe,maxPool2d:Jfe,maxPooling1d:Yfe,maxPooling2d:Jfe,maxPooling3d:function(e){return new wfe(e)},maximum:function(e){return new $pe(e)},minimum:function(e){return new efe(e)},multiply:function(e){return new Zpe(e)},permute:function(e){return new qpe(e)},prelu:function(e){return new $he(e)},randomWidth:function(e){return new Gfe(e)},reLU:function(e){return new Zhe(e)},repeatVector:function(e){return new jpe(e)},rescaling:function(e){return new Ffe(e)},reshape:function(e){return new Hpe(e)},resizing:function(e){return new Bfe(e)},rnn:function(e){return new Spe(e)},separableConv2d:function(e){return new ype(e)},simpleRNN:function(e){return new Cpe(e)},simpleRNNCell:function(e){return new Epe(e)},softmax:function(e){return new npe(e)},spatialDropout1d:function(e){return new Wpe(e)},stackedRNNCells:function(e){return new Fpe(e)},thresholdedReLU:function(e){return new tpe(e)},timeDistributed:function(e){return new _fe(e)},upSampling2d:function(e){return new kpe(e)},zeroPadding2d:function(e){return new pfe(e)}};var Qfe={__proto__:null,MAPE:function(e,t){return sle(e,t)},MSE:function(e,t){return ile(e,t)},binaryAccuracy:function(e,t){return mle(e,t)},binaryCrossentropy:function(e,t){return kle(e,t)},categoricalAccuracy:function(e,t){return gle(e,t)},categoricalCrossentropy:function(e,t){return Ile(e,t)},cosineProximity:function(e,t){return fle(e,t)},mape:function(e,t){return sle(e,t)},meanAbsoluteError:function(e,t){return ole(e,t)},meanAbsolutePercentageError:function(e,t){return sle(e,t)},meanSquaredError:function(e,t){return ile(e,t)},mse:function(e,t){return ile(e,t)},precision:function(e,t){return ble(e,t)},r2Score:function(e,t){return function(e,t){return X5((function(){var n=e.sub(t).square().sum(),r=e.sub(e.mean()).square().sum();return i9(1).sub(n.div(r))}))}(e,t)},recall:function(e,t){return xle(e,t)},sparseCategoricalAccuracy:function(e,t){return wle(e,t)}},$fe={__proto__:null,modelFromJSON:function(e,t){return ghe.apply(this,arguments)}};var ede={__proto__:null,l1:function(e){return jhe(t=e),new qhe({l1:null!=t?t.l1:null,l2:0});var t},l1l2:function(e){return new qhe(e)},l2:function(e){return jhe(t=e),new qhe({l2:null!=t?t.l2:null,l1:0});var t}},tde=function(e){d(n,e);var t=w(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).model=null,e}return p(n,[{key:"setModel",value:function(e){if(!(e instanceof vhe))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}]),n}(Yce);function nde(e,t){return e<t}function rde(e,t){return e>t}var ade=function(e){d(i,e);var t,n,r,a=w(i);function i(e){var t;if(l(this,i),t=a.call(this),null==e&&(e={}),e.restoreBestWeights)throw new Ase("restoreBestWeights = True is not implemented in EarlyStopping yet.");return t.monitor=e.monitor||"val_loss",t.minDelta=Math.abs(e.minDelta||0),t.patience=e.patience||0,t.verbose=e.verbose||0,t.mode=e.mode||"auto",t.baseline=e.baseline,-1===["auto","min","max"].indexOf(t.mode)&&(console.warn("EarlyStopping mode '".concat(t.mode,"' is invalid. ")+"Falling back to mode 'auto'."),t.mode="auto"),"min"===t.mode?t.monitorFunc=nde:"max"===t.mode||-1!==t.monitor.indexOf("acc")?t.monitorFunc=rde:t.monitorFunc=nde,t.monitorFunc===nde&&(t.minDelta*=-1),t}return p(i,[{key:"onTrainBegin",value:(r=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===nde?1/0:-1/0;case 3:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"onEpochEnd",value:(n=c(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qce(n);case 2:if(null!=(r=this.getMonitorValue(n))){e.next=5;break}return e.abrupt("return");case 5:this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"onTrainEnd",value:(t=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stoppedEpoch>0&&this.verbose&&console.log("Epoch ".concat(this.stoppedEpoch,": early stopping."));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getMonitorValue",value:function(e){null==e&&(e={});var t=e[this.monitor];return null==t&&console.warn("Metric for EarlyStopping ".concat(this.monitor," is not available. ")+"Available metrics are: ".concat(Object.keys(e))),t}}]),i}(tde);var ide,ode,sde={earlyStopping:function(e){return new ade(e)}};k0().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(ide||(ide={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(ode||(ode={}));var ude={};function cde(e){return ude[e]}function lde(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd,u=o<0?t.inputNames.length+o:o;if("tensor"===i.type)return hde(t.inputNames[u],n,r,a);if("tensors"===i.type){var c=t.inputs.slice(o,s),l=t.inputNames.slice(o,s).filter((function(e,t){var n;return"NoOp"!==(null===(n=c[t])||void 0===n?void 0:n.op)}));return l.map((function(e){return hde(e,n,r,a)}))}var h=hde(t.inputNames[u],n,r,a),p=h.dataSync();return"number"===i.type?p[0]:s0(h.shape,p)}var f=t.attrParams[e];return f&&f.value}function hde(e,t,n,r){var a=S(vde(e,n),2),i=a[0],o=a[1];if(null!=r){var s=r.getHashTableHandleByName(i);if(null!=s)return s}var u=n.currentContextIds.find((function(e){return!!t[dde(i,e)]}));return void 0!==u?t[dde(i,u)][o]:void 0}function pde(e,t,n){return t[dde(e,n.currentContextId)]}function fde(e,t){var n=S(vde(e,t),3),r=n[0],a=n[1],i=n[2];return[dde(r,t&&t.currentContextId),a,i]}function dde(e,t){return t?"".concat(e,"-").concat(t):e}function vde(e,t){if(""===e)return["",0,void 0];var n=null!=t&&null!=t.parseNodeNameCache;if(n){var r=t.parseNodeNameCache.get(e);if(null!=r)return r}var a,i=e.split(":");if(1===i.length)a=[e,0,void 0];else{var o=i[0],s=3===i.length?i[1]:void 0;a=[o,Number(i[i.length-1]),s]}return n&&t.parseNodeNameCache.set(e,a),a}function mde(e,t,n){var r=lde("pad",e,t,n);if("explicit"===r){r=lde("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function gde(e){return e.kept?e:p8(e)}var yde={__proto__:null,json:[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},bde={__proto__:null,json:[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},xde={__proto__:null,json:[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}]},kde={__proto__:null,json:[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},wde={__proto__:null,json:[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},Ide={__proto__:null,json:[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},Nde={__proto__:null,json:[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]},Sde={__proto__:null,json:[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},Tde={__proto__:null,json:[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}]},Ede={__proto__:null,json:[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}]},Cde={__proto__:null,json:[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}]},Ade={__proto__:null,json:[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}]},Rde={__proto__:null,json:[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}]},_de={__proto__:null,json:[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},Ode={__proto__:null,json:[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}]},Fde={__proto__:null,json:[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}]},Dde={__proto__:null,json:[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},Mde={__proto__:null,json:[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}]},Lde={__proto__:null,json:[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}]},zde=function(){function e(){var t;l(this,e);var n=[yde,bde,xde,kde,wde,Ide,Nde,Sde,Tde,Ede,Cde,Ade,Rde,_de,Ode,Fde,Dde,Mde,Lde],r=(t=[]).concat.apply(t,T(n.map((function(e){return e.json}))));this.opMappers=r.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return p(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):null!=n.input&&0!==n.input.length||o.push(e[n.name]),e}),{}),u=[],c=[],l={},h={};null!=n&&(l=this.mapSignatureEntries(n.inputs),h=this.mapSignatureEntries(n.outputs));var p=Object.keys(s);p.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=S(fde(e),3),a=r[0],i=r[2],o=s[a];if(null!=o.outputs){var u=o.outputs.indexOf(i);if(-1!==u){var c="".concat(a,":").concat(u);t.inputNames[n]=c}}t.inputs.push(o),o.children.push(t)}))})),0===Object.keys(h).length?p.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(h).forEach((function(e){var t=S(fde(e),1)[0],n=s[t];null!=n&&(n.signatureKey=h[e],c.push(n))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=S(fde(e),1)[0],n=s[t];n&&(n.signatureKey=l[e],u.push(n))})):u=a;var f={};null!=e.library&&null!=e.library.function&&(f=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var d={nodes:s,inputs:u,outputs:c,weights:i,placeholders:a,signature:n,functions:f};return o.length>0&&(d.initNodes=o),d}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=cde(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.slice(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=Bde(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Bde(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=Yde(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Yde(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=Ude(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=Ude(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=Xde(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Xde(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=Wde(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Wde(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=Zde(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Zde(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=Kde(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Kde(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=Jde(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Jde(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=jde(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=jde(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=Hde(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Hde(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=Gde(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Gde(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=S(fde(e.name),1)[0],n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Vde(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,i.push(n),a[t]=n})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=S(fde(e),3),i=r[0],o=r[2],s=a[i];if(null!=s.outputs){var u=s.outputs.indexOf(o);if(-1!==u){var c="".concat(i,":").concat(u);t.inputNames[n]=c}}t.inputs.push(s),s.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=S(fde(s[e.name]),2),n=t[0],r=t[1],i=a[n];null!=i&&(i.defaultOutput=r,o.push(i))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function Pde(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=k0().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function Bde(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?Pde(a.s,r):n}function Wde(e,t,n){var r=e[t];return r?r.b:n}function Ude(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function Vde(e){switch("string"==typeof e&&(e=ide[e]),e){case ide.DT_FLOAT:case ide.DT_HALF:return"float32";case ide.DT_INT32:case ide.DT_INT64:case ide.DT_INT8:case ide.DT_UINT8:return"int32";case ide.DT_BOOL:return"bool";case ide.DT_DOUBLE:return"float32";case ide.DT_STRING:return"string";case ide.DT_COMPLEX64:case ide.DT_COMPLEX128:return"complex64";default:return null}}function Gde(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function jde(e,t,n){var r=e[t];return r&&r.type?Vde(r.type):n}function Hde(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return Vde(e)})):n}function qde(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"==typeof e.size?e.size:parseInt(e.size,10)})):[]}function Kde(e,t,n){var r=e[t];return r&&r.shape?qde(r.shape):n}function Xde(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"==typeof e?e:parseInt(e,10)})):n}function Yde(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return Pde(e,r)})):n}function Jde(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return qde(e)})):n}function Zde(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var Qde=function(){function e(t,n,r){var a=this;l(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return p(e,[{key:"getInput",value:function(e){return hde(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return hde(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Ude(this.node.rawAttrs,e,t);if(null!=n.s)return Bde(this.node.rawAttrs,e,t);if(null!=n.b)return Wde(this.node.rawAttrs,e,t);if(null!=n.shape)return Kde(this.node.rawAttrs,e,t);if(null!=n.type)return jde(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Xde(this.node.rawAttrs,e,t);if(null!=n.list.s)return Yde(this.node.rawAttrs,e,t);if(null!=n.list.shape)return Jde(this.node.rawAttrs,e,t);if(null!=n.list.b)return Zde(this.node.rawAttrs,e,t);if(null!=n.list.type)return Hde(this.node.rawAttrs,e,t)}return t}}]),e}(),$de={__proto__:null,OP_SCOPE_SUFFIX:P5,abs:y8,acos:b8,acosh:x8,add:d8,addN:k8,all:w8,any:I8,argMax:N8,argMin:S8,asin:T8,asinh:E8,atan:C8,atan2:A8,atanh:R8,avgPool:Y8,avgPool3d:J8,basicLSTMCell:n7,batchNorm:a7,batchNorm2d:i7,batchNorm3d:o7,batchNorm4d:s7,batchToSpaceND:r7,bincount:u7,bitwiseAnd:c7,booleanMaskAsync:lne,broadcastArgs:l7,broadcastTo:h7,buffer:l8,cast:h8,ceil:p7,clipByValue:d7,clone:p8,complex:W5,concat:Z8,concat1d:v7,concat2d:m7,concat3d:g7,concat4d:y7,conv1d:x7,conv2d:b7,conv2dTranspose:w7,conv3d:I7,conv3dTranspose:S7,cos:T7,cosh:E7,cosineWindow:bne,cumprod:C7,cumsum:A7,denseBincount:R7,depthToSpace:_7,depthwiseConv2d:O7,diag:F7,dilation2d:D7,div:m8,divNoNan:V7,dot:G7,dropout:gne,einsum:j7,elu:H7,enclosingPowerOfTwo:yne,ensureShape:q7,equal:B7,erf:K7,euclideanNorm:h9,exp:p9,expandDims:f9,expm1:d9,eye:m9,fft:_te,fill:f7,floor:g9,floorDiv:v8,fused:One,gather:y9,gatherND:mne,greater:b9,greaterEqual:x9,ifft:Ote,imag:k9,image:Pre,inTopKAsync:kne,irfft:Fte,isFinite:w9,isInf:I9,isNaN:N9,leakyRelu:S9,less:T9,lessEqual:E9,linalg:Bre,linspace:C9,localResponseNormalization:A9,log:R9,log1p:_9,logSigmoid:z9,logSoftmax:B9,logSumExp:W9,logicalAnd:U9,logicalNot:V9,logicalOr:G9,logicalXor:j9,losses:Wre,lowerBound:K9,matMul:Q8,max:n9,maxPool:X9,maxPool3d:Y9,maxPoolWithArgmax:J9,maximum:Z9,mean:Q9,meshgrid:tee,min:r9,minimum:nee,mirrorPad:ree,mod:aee,moments:iee,movingAverage:pne,mul:g8,multiRNNCell:oee,multinomial:see,neg:M9,norm:l9,notEqual:uee,oneHot:cee,ones:eee,onesLike:lee,op:B5,outerProduct:hee,pad:pee,pad1d:fee,pad2d:dee,pad3d:vee,pad4d:mee,pool:yee,pow:a9,prelu:bee,print:f8,prod:xee,raggedGather:kee,raggedRange:wee,raggedTensorToTensor:Iee,rand:Nee,randomGamma:nte,randomNormal:rte,randomStandardNormal:ate,randomUniform:ite,randomUniformInt:ote,range:ste,real:ute,reciprocal:cte,relu:lte,relu6:hte,reshape:X8,reverse:pte,reverse1d:fte,reverse2d:dte,reverse3d:vte,reverse4d:mte,rfft:Mte,round:gte,rsqrt:yte,scalar:i9,scatterND:fne,searchSorted:q9,selu:bte,separableConv2d:xte,setdiff1dAsync:wte,sigmoid:$8,sign:Ite,signal:zre,sin:Nte,sinh:Ste,slice:e7,slice1d:Tte,slice2d:Ete,slice3d:Cte,slice4d:Ate,softmax:Rte,softplus:L9,spaceToBatchND:gee,sparse:Ure,sparseToDense:vne,spectral:Lre,split:Dte,sqrt:o9,square:s9,squaredDifference:Lte,squeeze:zte,stack:Pte,step:Bte,stridedSlice:Wte,string:Vre,sub:P9,sum:u9,tan:Ute,tanh:t7,tensor:V5,tensor1d:Vte,tensor2d:Gte,tensor3d:jte,tensor4d:Hte,tensor5d:qte,tensor6d:Kte,tensorScatterUpdate:Qte,tile:v9,topk:$te,transpose:hne,truncatedNormal:ene,unique:tne,unsortedSegmentSum:nne,unstack:rne,upperBound:ane,variable:ine,where:W7,whereAsync:une,zeros:$9,zerosLike:U7},eve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(lde("a",e,t,n),lde("b",e,t,n))];case"AddN":return[r.addN(lde("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(lde("a",e,t,n),lde("b",e,t,n))];case"Mul":return[r.mul(lde("a",e,t,n),lde("b",e,t,n))];case"RealDiv":case"Div":return[r.div(lde("a",e,t,n),lde("b",e,t,n))];case"DivNoNan":return[r.divNoNan(lde("a",e,t,n),lde("b",e,t,n))];case"FloorDiv":return[r.floorDiv(lde("a",e,t,n),lde("b",e,t,n))];case"Sub":return[r.sub(lde("a",e,t,n),lde("b",e,t,n))];case"Minimum":return[r.minimum(lde("a",e,t,n),lde("b",e,t,n))];case"Maximum":return[r.maximum(lde("a",e,t,n),lde("b",e,t,n))];case"Pow":return[r.pow(lde("a",e,t,n),lde("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(lde("a",e,t,n),lde("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},tve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(lde("x",e,t,n))];case"Acos":return[r.acos(lde("x",e,t,n))];case"Acosh":return[r.acosh(lde("x",e,t,n))];case"Asin":return[r.asin(lde("x",e,t,n))];case"Asinh":return[r.asinh(lde("x",e,t,n))];case"Atan":return[r.atan(lde("x",e,t,n))];case"Atan2":return[r.atan2(lde("x",e,t,n),lde("y",e,t,n))];case"Atanh":return[r.atanh(lde("x",e,t,n))];case"Ceil":return[r.ceil(lde("x",e,t,n))];case"Complex":return[r.complex(lde("real",e,t,n),lde("imag",e,t,n))];case"Cos":return[r.cos(lde("x",e,t,n))];case"Cosh":return[r.cosh(lde("x",e,t,n))];case"Elu":return[r.elu(lde("x",e,t,n))];case"Erf":return[r.erf(lde("x",e,t,n))];case"Exp":return[r.exp(lde("x",e,t,n))];case"Expm1":return[r.expm1(lde("x",e,t,n))];case"Floor":return[r.floor(lde("x",e,t,n))];case"Log":return[r.log(lde("x",e,t,n))];case"Log1p":return[r.log1p(lde("x",e,t,n))];case"Imag":return[r.imag(lde("x",e,t,n))];case"Neg":return[r.neg(lde("x",e,t,n))];case"Reciprocal":return[r.reciprocal(lde("x",e,t,n))];case"Real":return[r.real(lde("x",e,t,n))];case"Relu":return[r.relu(lde("x",e,t,n))];case"Round":return[r.round(lde("x",e,t,n))];case"Selu":return[r.selu(lde("x",e,t,n))];case"Sigmoid":return[r.sigmoid(lde("x",e,t,n))];case"Sin":return[r.sin(lde("x",e,t,n))];case"Sign":return[r.sign(lde("x",e,t,n))];case"Sinh":return[r.sinh(lde("x",e,t,n))];case"Softplus":return[r.softplus(lde("x",e,t,n))];case"Sqrt":return[r.sqrt(lde("x",e,t,n))];case"Square":return[r.square(lde("x",e,t,n))];case"Tanh":return[r.tanh(lde("x",e,t,n))];case"Tan":return[r.tan(lde("x",e,t,n))];case"ClipByValue":return[r.clipByValue(lde("x",e,t,n),lde("clipValueMin",e,t,n),lde("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(lde("x",e,t,n))];case"Rsqrt":return[r.rsqrt(hde(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(lde("x",e,t,n),lde("alpha",e,t,n))];case"Prelu":return[r.prelu(lde("x",e,t,n),lde("alpha",e,t,n))];case"IsNan":return[r.isNaN(hde(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(hde(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(hde(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function nve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!=typeof e&&"number"!=typeof t){F$(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];F$(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function rve(e){return"number"!=typeof e&&!e.some((function(e){return e<0}))}function ave(e,t,n){var r=ive(e,n),a=!rve(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=ive(e.shape,r)})),!rve(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function ive(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var ove=function(){function e(t,n,r,a,i,o,s){l(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=i9(0),J5(this.idTensor)}return p(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),nve(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,J5(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return V5([],[0].concat(this.elementShape));var r=this.readMany(e);return nve(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Pte(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return V5([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return nve(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),Z8(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,T(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,rne(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];X5((function(){t=X8(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],i];o[s]=X8(e7(t,u,c),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),sve=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;l(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));nve(n,e.shape,"TensorList shape mismatch: "),J5(e)})),this.idTensor=i9(0),this.maxNumElements=a,J5(this.idTensor)}return p(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e(T(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));nve(e,this.elementShape,"TensorList shape mismatch: ");var a=ave(this.elementShape,this.tensors,e);return X5((function(){var e=n.tensors.map((function(e){return X8(e,a)}));return Pte(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=ave(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,nve(r.shape,e,"TensorList shape mismatch: "),X8(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(nve(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");J5(e),this.tensors.push(e)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));nve(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=ave(this.elementShape,this.tensors,t);return X8(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));nve(this.elementShape,t.shape,"TensorList shape mismatch: "),J5(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));nve(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=ave(this.elementShape,this.tensors,n);return 0===e.length?V5([],[0].concat(a)):X5((function(){var t=e.map((function(e){return X8(r.tensors[e],a)}));return Pte(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));nve(this.elementShape,t,"TensorList shape mismatch: ");var r=ave(this.elementShape,this.tensors,t);return 0===this.size()?V5([],[0].concat(r)):X5((function(){var e=n.tensors.map((function(e){return X8(e,r)}));return Z8(e,0)}))}}]),e}();function uve(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));nve(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=rne(e);return new sve(a,t,r)}function cve(e,t,n,r){return new sve([],e,t,r)}function lve(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,T(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new sve([],n,e.dtype,r),o=rne(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function hve(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=ive(e.shape.slice(1),n),o=0===r?0:e.size/r,s=X5((function(){var n=[];e=X8(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],o];n[s]=X8(e7(e,u,c),i)}return e.dispose(),n})),u=new sve([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var pve=function(){var e=c(o().mark((function e(t,n,r){var a,i,s,u,c,l,h,p,f,d,v,m,g,y,b,x,k,w,I,N,S,T,E,C,A,R,_,O,F,D,M,L,z,P,B,W,U,V,G,j,H,q,K,X,Y,J,Z,Q,$,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,he,pe,fe,de,ve,me,ge,ye,be,xe,ke,we,Ie,Ne,Se,Te,Ee,Ce,Ae,Re,_e,Oe,Fe,De,Me,Le,ze,Pe,Be,We,Ue,Ve,Ge,je,He,qe,Ke,Xe,Ye,Je,Ze,Qe,$e,et,tt,nt,rt,at,it,ot;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?33:"Switch"===e.t0?35:"Merge"===e.t0?46:"Enter"===e.t0?51:"Exit"===e.t0?55:"NextIteration"===e.t0?58:"TensorArrayV3"===e.t0?61:"TensorArrayWriteV3"===e.t0?71:"TensorArrayReadV3"===e.t0?77:"TensorArrayGatherV3"===e.t0?81:"TensorArrayScatterV3"===e.t0?86:"TensorArrayConcatV3"===e.t0?92:"TensorArraySplitV3"===e.t0?96:"TensorArraySizeV3"===e.t0?102:"TensorArrayCloseV3"===e.t0?105:"TensorListSetItem"===e.t0?109:"TensorListGetItem"===e.t0?115:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?121:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?128:"TensorListGather"===e.t0?136:"TensorListStack"===e.t0?142:"TensorListFromTensor"===e.t0?148:"TensorListConcat"===e.t0||"TensorListConcatV2"===e.t0?154:"TensorListPushBack"===e.t0?159:"TensorListPopBack"===e.t0?164:"TensorListSplit"===e.t0?169:"TensorListLength"===e.t0?175:"TensorListResize"===e.t0?178:184;break;case 3:return a=lde("thenBranch",t,n,r),i=lde("elseBranch",t,n,r),s=lde("cond",t,n,r),u=lde("args",t,n,r),e.next=9,s.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(u,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(u,r.tensorArrayMap,r.tensorListMap));case 15:return c=lde("body",t,n,r),l=lde("cond",t,n,r),h=lde("args",t,n,r),e.next=20,r.functionMap[l].executeFunctionAsync(h,r.tensorArrayMap,r.tensorListMap);case 20:return p=e.sent,f=h.map((function(e){return e.id})),e.next=24,p[0].data();case 24:d=e.sent,p.forEach((function(e){e.kept||-1!==f.indexOf(e.id)||e.dispose()})),v=h,m=o().mark((function e(){var t,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v,e.next=3,r.functionMap[c].executeFunctionAsync(v,r.tensorArrayMap,r.tensorListMap);case 3:return v=e.sent,n=v.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==f.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[l].executeFunctionAsync(v,r.tensorArrayMap,r.tensorListMap);case 8:return a=e.sent,e.next=11,a[0].data();case 11:d=e.sent,a.forEach((function(e){e.kept||-1!==f.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 28:if(!d[0]){e.next=32;break}return e.delegateYield(m(),"t1",30);case 30:e.next=28;break;case 32:return e.abrupt("return",v);case 33:return g=lde("pred",t,n,r),e.abrupt("return",[gde(g)]);case 35:return y=lde("pred",t,n,r),(b=lde("data",t,n,r)).kept||(b=gde(b)),e.next=40,y.data();case 40:if(!e.sent[0]){e.next=44;break}e.t2=[void 0,b],e.next=45;break;case 44:e.t2=[b,void 0];case 45:return e.abrupt("return",e.t2);case 46:if(x=t.inputNames.find((function(e){return void 0!==hde(e,n,r)})),!x){e.next=50;break}return k=hde(x,n,r),e.abrupt("return",[gde(k)]);case 50:return e.abrupt("return",void 0);case 51:return w=lde("frameName",t,n,r),I=lde("tensor",t,n,r),r.enterFrame(w),e.abrupt("return",[gde(I)]);case 55:return N=lde("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[gde(N)]);case 58:return S=lde("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[gde(S)]);case 61:return T=lde("size",t,n,r),E=lde("dtype",t,n,r),C=lde("elementShape",t,n,r),A=lde("dynamicSize",t,n,r),R=lde("clearAfterRead",t,n,r),_=lde("identicalElementShapes",t,n,r),O=lde("name",t,n,r),F=new ove(O,E,T,C,_,A,R),r.addTensorArray(F),e.abrupt("return",[F.idTensor,i9(1)]);case 71:return D=lde("tensorArrayId",t,n,r),M=lde("index",t,n,r),L=lde("tensor",t,n,r),(z=r.getTensorArray(D.id)).write(M,L),e.abrupt("return",[z.idTensor]);case 77:return P=lde("tensorArrayId",t,n,r),B=lde("index",t,n,r),W=r.getTensorArray(P.id),e.abrupt("return",[W.read(B)]);case 81:return U=lde("tensorArrayId",t,n,r),V=lde("indices",t,n,r),G=lde("dtype",t,n,r),j=r.getTensorArray(U.id),e.abrupt("return",[j.gather(V,G)]);case 86:return H=lde("tensorArrayId",t,n,r),q=lde("indices",t,n,r),K=lde("tensor",t,n,r),(X=r.getTensorArray(H.id)).scatter(q,K),e.abrupt("return",[X.idTensor]);case 92:return Y=lde("tensorArrayId",t,n,r),J=r.getTensorArray(Y.id),Z=lde("dtype",t,n,r),e.abrupt("return",[J.concat(Z)]);case 96:return Q=lde("tensorArrayId",t,n,r),$=lde("tensor",t,n,r),ee=lde("lengths",t,n,r),(te=r.getTensorArray(Q.id)).split(ee,$),e.abrupt("return",[te.idTensor]);case 102:return ne=lde("tensorArrayId",t,n,r),re=r.getTensorArray(ne.id),e.abrupt("return",[i9(re.size(),"int32")]);case 105:return ae=lde("tensorArrayId",t,n,r),(ie=r.getTensorArray(ae.id)).clearAndClose(),e.abrupt("return",[ie.idTensor]);case 109:return oe=lde("tensorListId",t,n,r),se=lde("index",t,n,r),ue=lde("tensor",t,n,r),(ce=r.getTensorList(oe.id)).setItem(se,ue),e.abrupt("return",[ce.idTensor]);case 115:return le=lde("tensorListId",t,n,r),he=lde("index",t,n,r),pe=lde("elementShape",t,n,r),fe=lde("elementDType",t,n,r),de=r.getTensorList(le.id),e.abrupt("return",[de.getItem(he,pe,fe)]);case 121:return ve=lde("indices",t,n,r),me=lde("tensor",t,n,r),ge=lde("elementShape",t,n,r),ye=lde("numElements",t,n,r),be=lve(me,ve,ge,ye),r.addTensorList(be),e.abrupt("return",[be.idTensor]);case 128:return xe=lde("elementShape",t,n,r),ke=lde("elementDType",t,n,r),we="TensorListReserve"===t.op?"numElements":"maxNumElements",Ie=lde(we,t,n,r),Ne="TensorListReserve"===t.op?-1:Ie,Se=cve(xe,ke,0,Ne),r.addTensorList(Se),e.abrupt("return",[Se.idTensor]);case 136:return Te=lde("tensorListId",t,n,r),Ee=lde("indices",t,n,r),Ce=lde("elementShape",t,n,r),Ae=lde("elementDType",t,n,r),Re=r.getTensorList(Te.id),e.abrupt("return",[Re.gather(Ee,Ae,Ce)]);case 142:return _e=lde("tensorListId",t,n,r),Oe=lde("elementShape",t,n,r),Fe=lde("elementDType",t,n,r),De=lde("numElements",t,n,r),Me=r.getTensorList(_e.id),e.abrupt("return",[Me.stack(Oe,Fe,De)]);case 148:return Le=lde("tensor",t,n,r),ze=lde("elementShape",t,n,r),Pe=lde("elementDType",t,n,r),Be=uve(Le,ze,Pe),r.addTensorList(Be),e.abrupt("return",[Be.idTensor]);case 154:return We=lde("tensorListId",t,n,r),Ue=r.getTensorList(We.id),Ve=lde("dtype",t,n,r),Ge=lde("elementShape",t,n,r),e.abrupt("return",[Ue.concat(Ve,Ge)]);case 159:return je=lde("tensorListId",t,n,r),He=lde("tensor",t,n,r),(qe=r.getTensorList(je.id)).pushBack(He),e.abrupt("return",[qe.idTensor]);case 164:return Ke=lde("tensorListId",t,n,r),Xe=lde("elementShape",t,n,r),Ye=lde("elementDType",t,n,r),Je=r.getTensorList(Ke.id),e.abrupt("return",[Je.popBack(Xe,Ye)]);case 169:return Ze=lde("tensor",t,n,r),Qe=lde("elementShape",t,n,r),$e=lde("lengths",t,n,r),et=hve(Ze,$e,Qe),r.addTensorList(et),e.abrupt("return",[et.idTensor]);case 175:return tt=lde("tensorListId",t,n,r),nt=r.getTensorList(tt.id),e.abrupt("return",[i9(nt.size(),"int32")]);case 178:return rt=lde("tensorListId",t,n,r),at=lde("size",t,n,r),it=r.getTensorList(rt.id),ot=it.resize(at),r.addTensorList(ot),e.abrupt("return",[ot.idTensor]);case 184:throw TypeError("Node type ".concat(t.op," is not implemented"));case 185:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function fve(e,t,n){var r=S(lde("fusedOps",e,t,n),2),a=r[0],i=r[1],o="biasadd"===a,s=!o,u="prelu"===i,c="fusedbatchnorm"===a,l=lde("numArgs",e,t,n);if(o){if(u&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&o&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var h=lde("strides",e,t,n),p=mde(e,t,n),f=lde("dataFormat",e,t,n).toUpperCase(),d=lde("dilations",e,t,n),v=S(lde("args",e,t,n),2),m=v[0],g=v[1];return s&&(g=m,m=void 0),{stride:h,pad:p,dataFormat:f,dilations:d,biasArg:m,preluArg:g,activationFunc:i,leakyreluAlpha:lde("leakyreluAlpha",e,t,n)}}var dve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"Conv1D":var a=lde("stride",e,t,n),i=lde("pad",e,t,n),o=lde("dataFormat",e,t,n).toUpperCase(),s=lde("dilation",e,t,n);return[r.conv1d(lde("x",e,t,n),lde("filter",e,t,n),a,i,o,s)];case"Conv2D":var u=lde("strides",e,t,n),c=mde(e,t,n),l=lde("dataFormat",e,t,n).toUpperCase(),h=lde("dilations",e,t,n);return[r.conv2d(lde("x",e,t,n),lde("filter",e,t,n),[u[1],u[2]],c,l,[h[1],h[2]])];case"_FusedConv2D":var p=fve(e,t,n),f=p.stride,d=p.pad,v=p.dataFormat,m=p.dilations,g=p.biasArg,y=p.preluArg,b=p.activationFunc,x=p.leakyreluAlpha;return[r.fused.conv2d({x:lde("x",e,t,n),filter:lde("filter",e,t,n),strides:[f[1],f[2]],pad:d,dataFormat:v,dilations:[m[1],m[2]],bias:g,activation:b,preluActivationWeights:y,leakyreluAlpha:x})];case"FusedDepthwiseConv2dNative":var k=fve(e,t,n),w=k.stride,I=k.pad,N=k.dataFormat,S=k.dilations,T=k.biasArg,E=k.preluArg,C=k.activationFunc,A=k.leakyreluAlpha;return[r.fused.depthwiseConv2d({x:lde("x",e,t,n),filter:lde("filter",e,t,n),strides:[w[1],w[2]],pad:I,dataFormat:N,dilations:[S[1],S[2]],bias:T,activation:C,preluActivationWeights:E,leakyreluAlpha:A})];case"Conv2DBackpropInput":case"Conv2dTranspose":var R=lde("outputShape",e,t,n),_=lde("strides",e,t,n),O=mde(e,t,n);return[r.conv2dTranspose(lde("x",e,t,n),lde("filter",e,t,n),R,[_[1],_[2]],O)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var F=lde("strides",e,t,n),D=mde(e,t,n),M=lde("dilations",e,t,n),L=lde("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(lde("input",e,t,n),lde("filter",e,t,n),[F[1],F[2]],D,L,[M[1],M[2]])];case"Conv3D":var z=lde("strides",e,t,n),P=lde("pad",e,t,n),B=lde("dataFormat",e,t,n).toUpperCase(),W=lde("dilations",e,t,n);return[r.conv3d(lde("x",e,t,n),lde("filter",e,t,n),[z[1],z[2],z[3]],P,B,[W[1],W[2],W[3]])];case"AvgPool":var U=lde("strides",e,t,n),V=lde("pad",e,t,n),G=lde("kernelSize",e,t,n);return[r.avgPool(lde("x",e,t,n),[G[1],G[2]],[U[1],U[2]],V)];case"MaxPool":var j=lde("strides",e,t,n),H=lde("pad",e,t,n),q=lde("kernelSize",e,t,n);return[r.maxPool(lde("x",e,t,n),[q[1],q[2]],[j[1],j[2]],H)];case"MaxPoolWithArgmax":var K=lde("strides",e,t,n),X=lde("pad",e,t,n),Y=lde("kernelSize",e,t,n),J=lde("includeBatchInIndex",e,t,n),Z=r.maxPoolWithArgmax(lde("x",e,t,n),[Y[1],Y[2]],[K[1],K[2]],X,J),Q=Z.result,$=Z.indexes;return[Q,$];case"AvgPool3D":var ee=lde("strides",e,t,n),te=lde("pad",e,t,n),ne=lde("kernelSize",e,t,n);return[r.avgPool3d(lde("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"MaxPool3D":var re=lde("strides",e,t,n),ae=lde("pad",e,t,n),ie=lde("kernelSize",e,t,n);return[r.maxPool3d(lde("x",e,t,n),[ie[1],ie[2],ie[3]],[re[1],re[2],re[3]],ae)];case"Dilation2D":var oe=lde("strides",e,t,n),se=lde("pad",e,t,n),ue=lde("dilations",e,t,n),ce=oe[1],le=oe[2],he=ue[1],pe=ue[2];return[r.dilation2d(lde("x",e,t,n),lde("filter",e,t,n),[ce,le],se,[he,pe],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},vve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"Fill":var a=lde("shape",e,t,n),i=lde("dtype",e,t,n),o=lde("value",e,t,n);return[r.fill(a,o,i)];case"LinSpace":var s=lde("start",e,t,n),u=lde("stop",e,t,n),c=lde("num",e,t,n);return[r.linspace(s,u,c)];case"Multinomial":var l=lde("logits",e,t,n),h=lde("numSamples",e,t,n),p=lde("seed",e,t,n);return[r.multinomial(l,h,p)];case"OneHot":var f=lde("indices",e,t,n),d=lde("depth",e,t,n),v=lde("onValue",e,t,n),m=lde("offValue",e,t,n),g=lde("dtype",e,t,n);return[r.oneHot(f,d,v,m,g)];case"Ones":return[r.ones(lde("shape",e,t,n),lde("dtype",e,t,n))];case"OnesLike":return[r.onesLike(lde("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(lde("shape",e,t,n),lde("dtype",e,t,n),lde("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(lde("shape",e,t,n),lde("minval",e,t,n),lde("maxval",e,t,n),lde("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(lde("shape",e,t,n),lde("minval",e,t,n),lde("maxval",e,t,n),lde("seed",e,t,n))];case"Range":var y=lde("start",e,t,n),b=lde("stop",e,t,n),x=lde("step",e,t,n);return[r.range(y,b,x,lde("dtype",e,t,n))];case"TruncatedNormal":var k=lde("shape",e,t,n),w=lde("mean",e,t,n),I=lde("stdDev",e,t,n),N=lde("seed",e,t,n);return[r.truncatedNormal(k,w,I,lde("dtype",e,t,n),N)];case"Zeros":return[r.zeros(lde("shape",e,t,n),lde("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(lde("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function mve(e,t,n){return{boxes:lde("boxes",e,t,n),scores:lde("scores",e,t,n),maxOutputSize:lde("maxOutputSize",e,t,n),iouThreshold:lde("iouThreshold",e,t,n),scoreThreshold:lde("scoreThreshold",e,t,n),softNmsSigma:lde("softNmsSigma",e,t,n)}}var gve=function(){var e=c(o().mark((function e(t,n,r,a){var i,s,u,c,l,h,p,f,d,v,m,g,y,b,x,k,w,I,N,S,T,E,C,A,R,_=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=_.length>4&&void 0!==_[4]?_[4]:$de,e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?4:"NonMaxSuppressionV4"===e.t0?9:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?15:"Where"===e.t0?20:"ListDiff"===e.t0?27:28;break;case 4:return s=mve(t,n,r),u=s.boxes,c=s.scores,l=s.maxOutputSize,h=s.iouThreshold,p=s.scoreThreshold,f=s.softNmsSigma,e.next=7,i.image.nonMaxSuppressionWithScoreAsync(u,c,l,h,p,f);case 7:return d=e.sent,e.abrupt("return",[d.selectedIndices,d.selectedScores]);case 9:return v=mve(t,n,r),m=v.boxes,g=v.scores,y=v.maxOutputSize,b=v.iouThreshold,x=v.scoreThreshold,k=lde("padToMaxOutputSize",t,n,r),e.next=13,i.image.nonMaxSuppressionPaddedAsync(m,g,y,b,x,k);case 13:return w=e.sent,e.abrupt("return",[w.selectedIndices,w.validOutputs]);case 15:return I=mve(t,n,r),N=I.boxes,S=I.scores,T=I.maxOutputSize,E=I.iouThreshold,C=I.scoreThreshold,e.next=18,i.image.nonMaxSuppressionAsync(N,S,T,E,C);case 18:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 20:return A=i.cast(lde("condition",t,n,r),"bool"),e.next=23,i.whereAsync(A);case 23:return e.t2=e.sent,R=[e.t2],A.dispose(),e.abrupt("return",R);case 27:return e.abrupt("return",i.setdiff1dAsync(lde("x",t,n,r),lde("y",t,n,r)));case 28:throw TypeError("Node type ".concat(t.op," is not implemented"));case 29:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),yve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"LowerBound":var a=lde("sortedSequence",e,t,n),i=lde("values",e,t,n);return[r.lowerBound(a,i)];case"TopKV2":var o=lde("x",e,t,n),s=lde("k",e,t,n),u=lde("sorted",e,t,n),c=r.topk(o,s,u);return[c.values,c.indices];case"UpperBound":var l=lde("sortedSequence",e,t,n),h=lde("values",e,t,n);return[r.upperBound(l,h)];case"Unique":var p=lde("x",e,t,n),f=r.unique(p);return[f.values,f.indices];case"UniqueV2":var d=lde("x",e,t,n),v=lde("axis",e,t,n),m=r.unique(d,v);return[m.values,m.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},bve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var a=lde("default",e,t,n);return[hde(e.name,t,n)||a];case"Placeholder":return[hde(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":var i=lde("x",e,t,n);return[gde(i)];case"IdentityN":return lde("x",e,t,n).map((function(e){return gde(e)}));case"Snapshot":var o=lde("x",e,t,n);return[gde(o)];case"Shape":return[r.tensor1d(lde("x",e,t,n).shape,"int32")];case"ShapeN":return lde("x",e,t,n).map((function(e){return r.tensor1d(e.shape)}));case"Size":return[r.scalar(lde("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(lde("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":var s=lde("x",e,t,n),u=lde("data",e,t,n),c=lde("message",e,t,n),l=lde("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(var h=0;h<u.length;h++)console.log(Array.prototype.slice.call(u[h].dataSync()).slice(0,l));return[s];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},xve=function(){function e(t,n){l(this,e),this.keyDType=t,this.valueDType=n,this.handle=i9(0),this.tensorMap=new Map,J5(this.handle)}var t,n;return p(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return i9(this.size(),"int32")}},{key:"import",value:(n=c(o().mark((function e(t,n){var r,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",X5((function(){var e=rne(n),t=r.length,i=e.length;F$(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var s=r[o],u=e[o];J5(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"find",value:(t=c(o().mark((function e(t,n){var r,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",X5((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return Pte(e)})));case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),kve=function(){var e=c(o().mark((function e(t,n,r,a){var i,s,u,c,l,h,p,f,d,v,m,g,y,b;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"InitializeTable"===e.t0||"InitializeTableV2"===e.t0||"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?13:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?21:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?29:32;break;case 3:if(null==(i=a.getHashTableHandleByName(t.name))){e.next=8;break}return e.abrupt("return",[i]);case 8:return s=lde("keyDType",t,n,r),u=lde("valueDType",t,n,r),c=new xve(s,u),a.addHashTable(t.name,c),e.abrupt("return",[c.handle]);case 13:return l=lde("tableHandle",t,n,r,a),h=lde("keys",t,n,r),p=lde("values",t,n,r),f=a.getHashTableById(l.id),e.next=19,f.import(h,p);case 19:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 21:return d=lde("tableHandle",t,n,r,a),v=lde("keys",t,n,r),m=lde("defaultValue",t,n,r),g=a.getHashTableById(d.id),e.next=27,g.find(v,m);case 27:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 29:return y=lde("tableHandle",t,n,r,a),b=a.getHashTableById(y.id),e.abrupt("return",[b.tensorSize()]);case 32:throw TypeError("Node type ".concat(t.op," is not implemented"));case 33:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),wve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"ResizeBilinear":var a=lde("images",e,t,n),i=lde("size",e,t,n),o=lde("alignCorners",e,t,n),s=lde("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)];case"ResizeNearestNeighbor":var u=lde("images",e,t,n),c=lde("size",e,t,n),l=lde("alignCorners",e,t,n),h=lde("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(u,[c[0],c[1]],l,h)];case"CropAndResize":var p=lde("image",e,t,n),f=lde("boxes",e,t,n),d=lde("boxInd",e,t,n),v=lde("cropSize",e,t,n),m=lde("method",e,t,n),g=lde("extrapolationValue",e,t,n);return[r.image.cropAndResize(p,f,d,v,m,g)];case"ImageProjectiveTransformV3":var y=lde("images",e,t,n),b=lde("transforms",e,t,n),x=lde("outputShape",e,t,n),k=lde("fillValue",e,t,n),w=lde("interpolation",e,t,n),I=lde("fillMode",e,t,n);return[r.image.transform(y,b,w.toLowerCase(),I.toLowerCase(),k,x)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ive=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"Equal":return[r.equal(lde("a",e,t,n),lde("b",e,t,n))];case"NotEqual":return[r.notEqual(lde("a",e,t,n),lde("b",e,t,n))];case"Greater":return[r.greater(lde("a",e,t,n),lde("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(lde("a",e,t,n),lde("b",e,t,n))];case"Less":return[r.less(lde("a",e,t,n),lde("b",e,t,n))];case"LessEqual":return[r.lessEqual(lde("a",e,t,n),lde("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(lde("a",e,t,n),lde("b",e,t,n))];case"LogicalNot":return[r.logicalNot(lde("a",e,t,n))];case"LogicalOr":return[r.logicalOr(lde("a",e,t,n),lde("b",e,t,n))];case"Select":case"SelectV2":return[r.where(lde("condition",e,t,n),lde("a",e,t,n),lde("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(lde("a",e,t,n),lde("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Nve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(lde("a",e,t,n),lde("b",e,t,n),lde("transposeA",e,t,n),lde("transposeB",e,t,n))];case"Einsum":return[r.einsum.apply(r,[lde("equation",e,t,n)].concat(T(lde("tensors",e,t,n))))];case"Transpose":return[r.transpose(lde("x",e,t,n),lde("perm",e,t,n))];case"_FusedMatMul":var a=lde("fusedOps",e,t,n),i=S(a,2),o=i[0],s=i[1],u="biasadd"===o,c="prelu"===s,l=lde("numArgs",e,t,n),h=lde("leakyreluAlpha",e,t,n);if(u){if(c&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var p=lde("args",e,t,n),f=S(p,2),d=f[0],v=f[1];return[r.fused.matMul({a:lde("a",e,t,n),b:lde("b",e,t,n),transposeA:lde("transposeA",e,t,n),transposeB:lde("transposeB",e,t,n),bias:d,activation:s,preluActivationWeights:v,leakyreluAlpha:h})];case"MatrixBandPart":return[r.linalg.bandPart(lde("a",e,t,n),lde("numLower",e,t,n),lde("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Sve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(lde("x",e,t,n),lde("axis",e,t,n),lde("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(lde("x",e,t,n),lde("mean",e,t,n),lde("variance",e,t,n),lde("offset",e,t,n),lde("scale",e,t,n),lde("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(lde("x",e,t,n),lde("radius",e,t,n),lde("bias",e,t,n),lde("alpha",e,t,n),lde("beta",e,t,n))];case"Softmax":return[r.softmax(lde("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(lde("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Tve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"RaggedGather":var a=r.raggedGather(lde("paramsNestedSplits",e,t,n),lde("paramsDenseValues",e,t,n),lde("indices",e,t,n),lde("outputRaggedRank",e,t,n)),i=a.outputNestedSplits,o=a.outputDenseValues;return i.concat(o);case"RaggedRange":var s=r.raggedRange(lde("starts",e,t,n),lde("limits",e,t,n),lde("splits",e,t,n)),u=s.rtNestedSplits,c=s.rtDenseValues;return[u,c];case"RaggedTensorToTensor":return[r.raggedTensorToTensor(lde("shape",e,t,n),lde("values",e,t,n),lde("defaultValue",e,t,n),lde("rowPartitionTensors",e,t,n),lde("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Eve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"Max":var a=lde("axis",e,t,n),i=lde("keepDims",e,t,n);return[r.max(lde("x",e,t,n),a,i)];case"Mean":var o=lde("axis",e,t,n),s=lde("keepDims",e,t,n);return[r.mean(lde("x",e,t,n),o,s)];case"Min":var u=lde("axis",e,t,n),c=lde("keepDims",e,t,n);return[r.min(lde("x",e,t,n),u,c)];case"Sum":var l=lde("axis",e,t,n),h=lde("keepDims",e,t,n);return[r.sum(lde("x",e,t,n),l,h)];case"All":var p=lde("axis",e,t,n),f=lde("keepDims",e,t,n);return[r.all(lde("x",e,t,n),p,f)];case"Any":var d=lde("axis",e,t,n),v=lde("keepDims",e,t,n);return[r.any(lde("x",e,t,n),d,v)];case"ArgMax":var m=lde("axis",e,t,n);return[r.argMax(lde("x",e,t,n),m)];case"ArgMin":var g=lde("axis",e,t,n);return[r.argMin(lde("x",e,t,n),g)];case"Prod":var y=lde("axis",e,t,n),b=lde("keepDims",e,t,n);return[r.prod(lde("x",e,t,n),y,b)];case"Cumprod":var x=lde("axis",e,t,n),k=lde("exclusive",e,t,n),w=lde("reverse",e,t,n);return[r.cumprod(lde("x",e,t,n),x,k,w)];case"Cumsum":var I=lde("axis",e,t,n),N=lde("exclusive",e,t,n),S=lde("reverse",e,t,n);return[r.cumsum(lde("x",e,t,n),I,N,S)];case"Bincount":var T=lde("x",e,t,n),E=lde("weights",e,t,n),C=lde("size",e,t,n);return[r.bincount(T,E,C)];case"DenseBincount":var A=lde("x",e,t,n),R=lde("weights",e,t,n),_=lde("size",e,t,n),O=lde("binaryOutput",e,t,n);return[r.denseBincount(A,R,_,O)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Cve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"ConcatV2":case"Concat":var a=lde("n",e,t,n),i=lde("axis",e,t,n),o=lde("tensors",e,t,n);return o=o.slice(0,a),[r.concat(o,i)];case"Gather":var s=lde("x",e,t,n),u=lde("indices",e,t,n);return[r.gather(s,r.cast(u,"int32"),0)];case"GatherV2":var c=lde("axis",e,t,n),l=lde("batchDims",e,t,n),h=lde("x",e,t,n),p=lde("indices",e,t,n);return[r.gather(h,r.cast(p,"int32"),c,l)];case"Reverse":for(var f=lde("dims",e,t,n),d=[],v=0;v<f.length;v++)f[v]&&d.push(v);var m=lde("x",e,t,n);return[r.reverse(m,d)];case"ReverseV2":var g=lde("axis",e,t,n),y=lde("x",e,t,n);return[r.reverse(y,g)];case"Slice":var b=lde("begin",e,t,n),x=lde("size",e,t,n);return[r.slice(lde("x",e,t,n),b,x)];case"StridedSlice":var k=lde("begin",e,t,n),w=lde("end",e,t,n),I=lde("strides",e,t,n),N=lde("beginMask",e,t,n),S=lde("endMask",e,t,n),T=lde("ellipsisMask",e,t,n),E=lde("newAxisMask",e,t,n),C=lde("shrinkAxisMask",e,t,n),A=lde("x",e,t,n);return[r.stridedSlice(A,k,w,I,N,S,T,E,C)];case"Pack":return X5((function(){var a=lde("axis",e,t,n),i=lde("tensors",e,t,n),o=i[0].shape,s=r.squeeze(i[0]).shape,u=i.map((function(e){var t=P$(e.shape,o);if(!t&&!P$(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,o)}));return[r.stack(u,a)]}));case"Unpack":var R=lde("axis",e,t,n),_=lde("tensor",e,t,n);return r.unstack(_,R);case"Tile":var O=lde("reps",e,t,n);return[r.tile(lde("x",e,t,n),O)];case"Split":case"SplitV":var F=lde("axis",e,t,n),D=lde("numOrSizeSplits",e,t,n),M=lde("x",e,t,n);return r.split(M,D,F);case"ScatterNd":var L=lde("indices",e,t,n),z=lde("values",e,t,n),P=lde("shape",e,t,n);return[r.scatterND(L,z,P)];case"GatherNd":var B=lde("x",e,t,n),W=lde("indices",e,t,n);return[r.gatherND(B,W)];case"SparseToDense":var U=lde("sparseIndices",e,t,n),V=lde("outputShape",e,t,n),G=lde("sparseValues",e,t,n),j=lde("defaultValue",e,t,n);return[r.sparseToDense(U,G,V,G.dtype===j.dtype?j:r.cast(j,G.dtype))];case"TensorScatterUpdate":var H=lde("indices",e,t,n),q=lde("values",e,t,n),K=lde("tensor",e,t,n);return[r.tensorScatterUpdate(K,H,q)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ave=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"SparseFillEmptyRows":var a=r.sparse.sparseFillEmptyRows(lde("indices",e,t,n),lde("values",e,t,n),lde("denseShape",e,t,n),lde("defaultValue",e,t,n)),i=a.outputIndices,o=a.outputValues,s=a.emptyRowIndicator,u=a.reverseIndexMap;return[i,o,s,u];case"SparseReshape":var c=r.sparse.sparseReshape(lde("inputIndices",e,t,n),lde("inputShape",e,t,n),lde("newShape",e,t,n)),l=c.outputIndices,h=c.outputShape;return[l,h];case"SparseSegmentMean":var p=r.sparse.sparseSegmentMean(lde("data",e,t,n),lde("indices",e,t,n),lde("segmentIds",e,t,n));return[p];case"SparseSegmentSum":var f=r.sparse.sparseSegmentSum(lde("data",e,t,n),lde("indices",e,t,n),lde("segmentIds",e,t,n));return[f];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Rve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"FFT":return[r.fft(lde("x",e,t,n))];case"IFFT":return[r.ifft(lde("x",e,t,n))];case"RFFT":return[r.rfft(lde("x",e,t,n))];case"IRFFT":return[r.irfft(lde("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},_ve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(lde("input",e,t,n),lde("pattern",e,t,n),lde("rewrite",e,t,n),lde("replaceGlobal",e,t,n))];case"StringNGrams":var a=r.string.stringNGrams(lde("data",e,t,n),lde("dataSplits",e,t,n),lde("separator",e,t,n),lde("nGramWidths",e,t,n),lde("leftPad",e,t,n),lde("rightPad",e,t,n),lde("padWidth",e,t,n),lde("preserveShortSequences",e,t,n)),i=a.nGrams,o=a.nGramsSplits;return[i,o];case"StringSplit":var s=r.string.stringSplit(lde("input",e,t,n),lde("delimiter",e,t,n),lde("skipEmpty",e,t,n)),u=s.indices,c=s.values,l=s.shape;return[u,c,l];case"StringToHashBucketFast":var h=r.string.stringToHashBucketFast(lde("input",e,t,n),lde("numBuckets",e,t,n));return[h];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ove=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$de;switch(e.op){case"Cast":return[r.cast(lde("x",e,t,n),lde("dtype",e,t,n))];case"ExpandDims":var a=lde("axis",e,t,n);return[r.expandDims(lde("x",e,t,n),a)];case"Squeeze":var i=lde("axis",e,t,n);return[r.squeeze(lde("x",e,t,n),i)];case"Reshape":return[r.reshape(lde("x",e,t,n),lde("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(lde("x",e,t,n),lde("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(lde("x",e,t,n),lde("padding",e,t,n),lde("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(lde("x",e,t,n),lde("padding",e,t,n),lde("constantValue",e,t,n))];case"SpaceToBatchND":var o=lde("blockShape",e,t,n),s=lde("paddings",e,t,n);return[r.spaceToBatchND(lde("x",e,t,n),o,s)];case"BatchToSpaceND":var u=lde("blockShape",e,t,n),c=lde("crops",e,t,n);return[r.batchToSpaceND(lde("x",e,t,n),u,c)];case"DepthToSpace":var l=lde("blockSize",e,t,n),h=lde("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(lde("x",e,t,n),l,h)];case"BroadcastTo":return[r.broadcastTo(lde("x",e,t,n),lde("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(lde("s0",e,t,n),lde("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function Fve(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:X5,i=function(e,t,n){switch(e.category){case"arithmetic":return a((function(){return eve(e,t,n)}));case"basic_math":return a((function(){return tve(e,t,n)}));case"control":return pve(e,t,n);case"convolution":return a((function(){return dve(e,t,n)}));case"creation":return a((function(){return vve(e,t,n)}));case"dynamic":return gve(e,t,n);case"evaluation":return a((function(){return yve(e,t,n)}));case"image":return a((function(){return wve(e,t,n)}));case"graph":return a((function(){return bve(e,t,n)}));case"logical":return a((function(){return Ive(e,t,n)}));case"matrices":return a((function(){return Nve(e,t,n)}));case"normalization":return a((function(){return Sve(e,t,n)}));case"ragged":return a((function(){return Tve(e,t,n)}));case"reduction":return a((function(){return Eve(e,t,n)}));case"slice_join":return a((function(){return Cve(e,t,n)}));case"sparse":return a((function(){return Ave(e,t,n)}));case"spectral":return a((function(){return Rve(e,t,n)}));case"string":return a((function(){return _ve(e,t,n)}));case"transformation":return a((function(){return Ove(e,t,n)}));case"hash_table":return kve(e,t,n,r);case"custom":var i=cde(e.op);if(i&&i.customExecutor)return i.customExecutor(new Qde(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return v0(i)?i.then((function(e){return[].concat(e)})):[].concat(i)}var Dve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0;l(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return p(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function Mve(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=new Set(Object.keys(e).map((function(e){return vde(e)[0]})));r=r||[];for(var l=new Set(r.map((function(e){return vde(e.name)[0]}))),h=T(t);h.length>0;){var p=h.pop();(Uve(p)||Vve(p)||Gve(p))&&null==o&&(s=(o=p).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(p.name),null==n[p.name]&&(c.has(p.name)||l.has(p.name)||(0!==p.inputs.length?p.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),h.push(e))})):i.push(p.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}function Lve(e,t){var n=t.usedNodes,r=t.inputs,a=Object.keys(r).map((function(e){return vde(e)[0]})).map((function(t){return e.nodes[t]})),i=e.initNodes||[],o=function(e){return n.has("string"==typeof e?e:e.name)};function s(e){return T(new Map(e.map((function(e){return[e.name,e]}))).values())}var u,c=s([].concat(T(a),T(e.weights),T(i))).filter(o),l=s([].concat(T(c),T(Object.values(e.nodes)))).filter(o),h=new Map(l.map((function(e){return[e.name,e]}))),p={},f=O(l);try{for(f.s();!(u=f.n()).done;){var d=u.value;p[d.name]=p[d.name]||0;var v,m=O(d.children);try{for(m.s();!(v=m.n()).done;){var g=v.value;o(g)||(p[g.name]=Number.POSITIVE_INFINITY),p[g.name]=(p[g.name]||0)+1}}catch(e){m.e(e)}finally{m.f()}}}catch(e){f.e(e)}finally{f.f()}for(var y=Object.entries(p).filter((function(e){return 0===S(e,2)[1]})).map((function(e){return S(e,1)[0]})),b=T(y);y.length>0;){var x,k=y.pop(),w=O(h.get(k).children.filter(o));try{for(w.s();!(x=w.n()).done;){var I=x.value;0==--p[I.name]&&(b.push(I.name),y.push(I.name))}}catch(e){w.e(e)}finally{w.f()}}var N=function(e,t){var n=new Map(e.map((function(e){return[e.name,e]}))),r=t.map((function(e){return e.name})),a=new Set(r);for(;r.length>0;){var i,o=r.pop(),s=O(n.get(o).children);try{for(s.s();!(i=s.n()).done;){var u=i.value;n.has(u.name)&&!a.has(u.name)&&(a.add(u.name),r.push(u.name))}}catch(e){s.e(e)}finally{s.f()}}var c=e.filter((function(e){return a.has(e.name)}));return c}(b.map((function(e){return h.get(e)})),c);return function(e,t){var n,r=new Map(e.map((function(e,t){return[e.name,t]}))),a=new Set(t.map((function(e){return e.name}))),i=function(e){return a.has("string"==typeof e?e:e.name)},o=new Set(e.map((function(e){return e.name}))),s=function(e){return o.has("string"==typeof e?e:e.name)},u=O(e);try{for(u.s();!(n=u.n()).done;){var c,l=n.value,h=O(l.children.filter(s));try{for(h.s();!(c=h.n()).done;){var p=c.value;if(!r.has(p.name))throw new zve("Child ".concat(p.name," of node ").concat(l.name," is unreachable."));if(r.get(l.name)>r.get(p.name))throw new zve("Node ".concat(l.name," is scheduled to run after its child ").concat(p.name,"."))}}catch(e){h.e(e)}finally{h.f()}if(!i(l)){var f,d=O(l.inputs);try{for(d.s();!(f=d.n()).done;){var v=f.value;if(!r.has(v.name))throw new zve("Input ".concat(v.name," of node ").concat(l.name," is unreachable."));if(r.get(v.name)>r.get(l.name))throw new zve("Node ".concat(l.name," is scheduled to run before its input ").concat(v.name,"."))}}catch(e){d.e(e)}finally{d.f()}}}}catch(e){u.e(e)}finally{u.f()}}(N,c),N}var zve=function(e){d(n,e);var t=w(n);function n(e){return l(this,n),t.call(this,"NodesExecutionOrderError: ".concat(e))}return p(n)}(b(Error));var Pve=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Bve=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Wve=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Uve(e){return Pve.has(e.op)}function Vve(e){return Bve.has(e.op)}function Gve(e){return Wve.has(e.op)}var jve=function(){function e(t,n){var r=this;l(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}var t,n,r,a;return p(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,T(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}},{key:"compile",value:function(e,t){var n=Mve(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}var u=Lve(this.graph,n),c=function(e){for(var t=new Map(e.map((function(e,t){return[e.name,t]}))),n=Number.MAX_SAFE_INTEGER,r=e.map((function(e,t){return Uve(e)?n:t})),a=function(e){var n=r[t.get(e.name)];return null==n?-1:n},i=e.map((function(e,t){return e.children.map(a).reduce((function(e,t){return Math.max(e,t)}),r[t])})),o=new Map,s=0;s<e.length;++s){var u=i[s];if(u!==n){var c=e[s],l=e[u];o.has(l.name)||o.set(l.name,[]),o.get(l.name).push(c)}}return o}(u);return{orderedNodes:u,nodeLiveUntilMap:c}}},{key:"cloneAndKeepTensor",value:function(e){if(null==e)return null;var t=e.clone();return J5(t),t}},{key:"cloneTensorList",value:function(e){var t=this;if(!e)return null;var n=e.map((function(e){return t.cloneAndKeepTensor(e)}));return n}},{key:"cloneTensorMap",value:function(e){var t=this;return Object.fromEntries(Object.entries(e).map((function(e){var n=S(e,2),r=n[0],a=n[1];return[r,t.cloneTensorList(a)]})))}},{key:"execute",value:function(e,t){var n=this;this.disposeIntermediateTensors(),e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[vde(e)[0]]})),i=t.map((function(e){return vde(e)[0]})),o=new Set(i),s=i.map((function(e){return n.graph.nodes[e]}));0===s.length&&(s=this._outputs);var u=this.getCompilationKey(a,s),c=this.compiledMap.get(u);null==c&&(c=this.compile(e,s),this.compiledMap.set(u,c));try{this.keepIntermediateTensors=k0().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}var l={},h={};return X5((function(){var r=new Dve(n.weightMap,l,h,n.functionExecutorMap,n.parseNodeNameCache),a=Object.assign({},n.weightMap);n.keepIntermediateTensors&&(n.clonedTensorsMap=n.cloneTensorMap(n.weightMap)),Object.keys(e).forEach((function(t){var i=S(vde(t,r),2),o=i[0],s=[];s[i[1]]=e[t],a[o]=s,n.keepIntermediateTensors&&(n.clonedTensorsMap[o]=n.cloneTensorList(s))}));var i,s=n.getFrozenTensorIds(a),u=c,p=u.orderedNodes,f=u.nodeLiveUntilMap,d=O(p);try{for(d.s();!(i=d.n()).done;){var v=i.value;if(!a[v.name]){var m=Fve(v,a,r,n._resourceManager);if(v0(m))throw new Error("The execution of the op '".concat(v.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[v.name]=m,n.keepIntermediateTensors&&(n.clonedTensorsMap[v.name]=n.cloneTensorList(m)),n.checkTensorForDisposalWithNodeLiveUntilInfo(v,a,r,s,o,f.get(v.name))}}}catch(e){d.e(e)}finally{d.f()}return null==n.parent&&r.dispose(s),t.map((function(e){return hde(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){if(!Uve(t)&&!i.has(e)){var s,u=O(n[e]);try{for(u.s();!(s=u.n()).done;){var c=s.value;null!=c&&(o[c.id]=(o[c.id]||0)+t.children.length)}}catch(e){u.e(e)}finally{u.f()}var l,h=O(t.inputs);try{for(h.s();!(l=h.n()).done;){var p=l.value;if(!Uve(p)){var f=pde(p.name,n,r);if(null!=f){var d,v=O(f);try{for(v.s();!(d=v.n()).done;){var m=d.value;if(m&&!m.kept&&!a.has(m.id)){var g=o[m.id];1===g?(m.dispose(),delete o[m.id]):null!=g&&o[m.id]--}}}catch(e){v.e(e)}finally{v.f()}}}}}catch(e){h.e(e)}finally{h.f()}}}},{key:"checkTensorForDisposalWithNodeLiveUntilInfo",value:function(e,t,n,r,a,i){function o(e){return Uve(e)||a.has(e.name)}if(!Uve(e)&&null!=i){var s,u=O(i);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(!o(c)){var l,h=O(pde(c.name,t,n));try{for(h.s();!(l=h.n()).done;){var p=l.value;!p||p.kept||r.has(p.id)||p.dispose()}}catch(e){h.e(e)}finally{h.f()}}}}catch(e){u.e(e)}finally{u.f()}}}},{key:"executeAsync",value:(a=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"disposeIntermediateTensors",value:function(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((function(e){var t,n=O(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r&&!r.isDisposed&&r.dispose()}}catch(e){n.e(e)}finally{n.f()}})),this.clonedTensorsMap=null)}},{key:"getIntermediateTensors",value:function(){return this.clonedTensorsMap}},{key:"_executeAsync",value:(r=c(o().mark((function e(t,n){var r,a,i,s,u,c,l,h,p,f=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=f.length>2&&void 0!==f[2]&&f[2],a=f.length>3&&void 0!==f[3]?f[3]:{},i=f.length>4&&void 0!==f[4]?f[4]:{},this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=k0().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}return s=new Dve(this.weightMap,a,i,this.functionExecutorMap,this.parseNodeNameCache),this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),e.next=10,this.executeWithControlFlow(t,s,n,r);case 10:return u=e.sent,c=n.map((function(e){return hde(e,u,s)})),l=c.map((function(e){return e.id})),h=Object.keys(t).map((function(e){return t[e].id})),p=new Set([].concat(T(l),T(h),T(this.weightIds))),Object.values(u).forEach((function(e){e.forEach((function(e){!e||e.isDisposed||p.has(e.id)||e.dispose()}))})),null==this.parent&&s.dispose(p),e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"executeFunctionAsync",value:(n=c(o().mark((function e(t,n,r){var a,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"executeWithControlFlow",value:(t=c(o().mark((function e(t,n,r,a){var i,s,u,c,l,h,p,f,d,v,m,g,y,b,x,k,w,I,N=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),s=i.map((function(e){return N.graph.nodes[vde(e)[0]]})),u=r.map((function(e){return vde(e)[0]})),c=new Set(u),0===(l=u.map((function(e){return N.graph.nodes[e]}))).length&&(l=this._outputs),h=Mve(t,l,this.weightMap,this._initNodes),p=h.usedNodes,f=h.missingInputs,d=h.dynamicNode,v=h.syncInputs,m=[].concat(T(s),T(this.graph.weights),T(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),g=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=S(vde(e),2),r=n[0],a=[];a[n[1]]=t[e],g[r]=a})),y={},b=this.getFrozenTensorIds(g),x={};case 13:if(!(m.length>0)){e.next=19;break}return k=this.processStack(s,m,n,g,x,b,c,y,p),e.next=17,Promise.all(k);case 17:e.next=13;break;case 19:if(null!=d||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),w=l.filter((function(e){return!Uve(e)&&!hde(e.name,g,n)})).map((function(e){return e.name})),!(w.length>0)){e.next=25;break}throw I="",null!=d&&(I="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(v,"]")),new Error("Cannot compute the outputs [".concat(w,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(f,"]. ").concat(I));case 25:return e.abrupt("return",g);case 26:case"end":return e.stop()}}),e,this)}))),function(e,n,r,a){return t.apply(this,arguments)})},{key:"processStack",value:function(e,t,n,r,a,i,o,s,u){for(var c=this,l=[],h=function(){var e=t.pop();n.currentContext=e.contexts;var h="";if("Enter"===e.node.op&&lde("isConstant",e.node,r,n)){var p=S(fde(e.node.name,n),1);h=p[0]}if(null==r[e.node.name]){var f=Fve(e.node,r,n,c._resourceManager);if(!h){var d=S(fde(e.node.name,n),1);h=d[0]}var v=n.currentContext;v0(f)?l.push(f.then((function(l){return r[h]=l,c.keepIntermediateTensors&&(c.clonedTensorsMap[h]=c.cloneTensorList(l)),n.currentContext=v,c.checkTensorForDisposal(h,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u),l}))):(r[h]=f,c.keepIntermediateTensors&&(c.clonedTensorsMap[h]=c.cloneTensorList(f)),c.checkTensorForDisposal(h,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u))}else c.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)h();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=S(fde(e.name,n),1)[0];!a[o]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!hde(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!hde(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=S(vde(n),1)[0],i=t.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){var o=i.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((function(e,t){return-1===o[t]||o[t]===e}));F$(s,(function(){return"The shape of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be [".concat(o,"], but was ")+"[".concat(r.shape,"]")}))}i.attrParams.dtype&&i.attrParams.dtype.value&&F$(r.dtype===i.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(i.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t,n,r={};for(var a in e){var i=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[a];null!=i?r[i.name]=e[a]:r[a]=e[a]}return r}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=S(vde(e),1)[0];return null==t.graph.nodes[n]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){var n,r,a=null===(r=null===(n=t._signature)||void 0===n?void 0:n.outputs)||void 0===r?void 0:r[e];return null!=a?a.name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=S(vde(e),1)[0];if(!t.graph.nodes[n])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),Hve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return p(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),qve=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nae;l(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new Hve}var t,n,r,a,i;return p(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"modelStructuredOutputKeys",get:function(){return this.structuredOutputKeys}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{var t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var t=this.handler.load();return v0(t)?t.then((function(t){return null==t.getWeightStream?e.loadSync(t):e.loadStreaming(t)})):this.loadSync(t)}},{key:"loadSync",value:function(e){var t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}},{key:"loadStreaming",value:(i=c(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.getWeightStream){e.next=2;break}throw new Error("Model artifacts missing streamWeights function");case 2:return e.next=4,l6(t.getWeightStream(),t.weightSpecs);case 4:return n=e.sent,e.abrupt("return",this.loadWithWeightMap(t,n));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"loadWithWeightMap",value:function(e,t){this.artifacts=e;var n=this.artifacts.modelTopology,r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){var a=this.artifacts.userDefinedMetadata;null!=a.signature&&(r=a.signature),null!=a.structuredOutputKeys&&(this.structuredOutputKeys=a.structuredOutputKeys)}if(this.signature=r,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer),this.executor=new jve(zde.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var i=zde.Instance.transformGraph(e.modelInitializer);this.initializer=new jve(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}},{key:"save",value:(a=c(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=9;break}if(0!==(r=this.io.getSaveHandlers(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"addStructuredOutputNames",value:function(e){var t=this;if(this.structuredOutputKeys){var n={};return(e instanceof n5?[e]:e).forEach((function(e,r){return n[t.structuredOutputKeys[r]]=e})),n}return e}},{key:"predict",value:function(e,t){var n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}},{key:"predictAsync",value:(r=c(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.executeAsync(t,this.outputNodes);case 2:return r=e.sent,e.abrupt("return",this.addStructuredOutputNames(r));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"normalizeInputs",value:function(e){var t,n=this;if(!(e instanceof n5||Array.isArray(e))){var r=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=r)for(var a in r){var i=r[a];null!=i.resourceId&&(e[a]=this.resourceIdToCapturedInput[i.resourceId])}return e}e=Array.isArray(e)?e:[e];var o=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+o!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-o," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));var s=0;return this.inputNodes.reduce((function(t,r){var a,i,o,u=null===(o=null===(i=null===(a=n.signature)||void 0===a?void 0:a.inputs)||void 0===i?void 0:i[r])||void 0===o?void 0:o.resourceId;return t[r]=null!=u?n.resourceIdToCapturedInput[u]:e[s++],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"executeInitializerGraph",value:function(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}},{key:"executeInitializerGraphAsync",value:(n=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.initializer){e.next=2;break}return e.abrupt("return",[]);case 2:if(null!=this.initializerSignature){e.next=6;break}return e.abrupt("return",this.initializer.executeAsync({},[]));case 6:return e.abrupt("return",this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs)));case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setResourceIdToCapturedInput",value:function(e){if(this.resourceIdToCapturedInput={},this.initializerSignature)for(var t=this.initializerSignature.outputs,n=Object.keys(t),r=0;r<n.length;r++){var a=t[n[r]];this.resourceIdToCapturedInput[a.resourceId]=e[r]}}},{key:"execute",value:function(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:(t=c(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.resourceIdToCapturedInput){e.next=6;break}return e.t0=this,e.next=4,this.executeInitializerGraphAsync();case 4:e.t1=e.sent,e.t0.setResourceIdToCapturedInput.call(e.t0,e.t1);case 6:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=10,this.executor.executeAsync(t,n);case 10:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 12:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Y5(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}]),e}();function Kve(){return Kve=c(o().mark((function e(t){var n,r,a,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},r=i.length>2&&void 0!==i[2]?i[2]:Nae,null!=t){e.next=4;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 4:return null==n&&(n={}),n.fromTFHub&&"string"==typeof t&&(t=Xve(t)),a=new qve(t,n,r),e.next=9,a.load();case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Kve.apply(this,arguments)}function Xve(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat("model.json").concat("?tfjs-format=file")}var Yve="4.22.0";function Jve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(nme(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=e[o],u=Jve(s,t,n,r);i[o]=u}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function Zve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$ve;return Qve(e,t)}function Qve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(nme(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=Qve(e.map((function(e){return e[r]})),t,n);i[r]=a};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function $ve(e){return null===e?null:nme(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function eme(e,t){return tme.apply(this,arguments)}function tme(){return tme=c(o().mark((function e(t,n){var r,a,i,s,u,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map,Jve(t,n,r),a=0,i=Array.from(r.keys());case 3:if(!(a<i.length)){e.next=14;break}if(s=i[a],!v0(u=r.get(s))){e.next=11;break}return e.next=9,u;case 9:c=e.sent,r.set(s,c);case 11:a++,e.next=3;break;case 14:return l=Jve(t,n,r),e.abrupt("return",l);case 16:case"end":return e.stop()}}),e)}))),tme.apply(this,arguments)}function nme(e){var t=!1;k0().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof require("string_decoder").StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===s(e)&&!(e instanceof n5)&&!(e instanceof Promise)&&!t)}function rme(e){return null==e||(null===(t=e)||"object"!==s(t)&&"function"!=typeof t)||Array.isArray(e)||"object"===s(e)&&e instanceof n5||U4(e);var t}function ame(e){return function(e,t){return Jve(e,t)}(e,ime)}function ime(e){return e instanceof n5?{value:e.clone(),recurse:!1}:nme(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var ome=function(){function e(t){if(l(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return p(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=O(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),sme=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.call(this,n.INITIAL_CAPACITY)}return p(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){N(v(n.prototype),"isFull",this).call(this)&&this.expand(),N(v(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){N(v(n.prototype),"isFull",this).call(this)&&this.expand(),N(v(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(ome);function ume(e){return new dme(e)}function cme(e){return new vme(e)}function lme(e,t){return new Tme(e,t)}function hme(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pme.FAIL;return new Eme(e,t)}sme.INITIAL_CAPACITY=32;var pme,fme=function(){function e(){l(this,e)}var t,n,r,a,i;return p(e,[{key:"toArray",value:function(){var e=c(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:(i=c(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"resolveFully",value:(a=c(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"resolveWhile",value:(r=c(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"handleErrors",value:function(e){return new wme(this,e)}},{key:"filter",value:function(e){return new xme(this,e)}},{key:"map",value:function(e){return new kme(this,e)}},{key:"mapAsync",value:function(e){return new Ime(this,e)}},{key:"serialMapAsync",value:function(e){return new Ime(this,e).serial()}},{key:"flatmap",value:function(e){return new Sme(this,e)}},{key:"forEachAsync",value:(n=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"serialForEach",value:(t=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new bme(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$ve,r=this.rowMajorBatch(e,t);return r.map((function(e){return Zve(e,n)}))}},{key:"concatenate",value:function(e,t){return new Tme(ume([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new yme(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new gme(this,e)}},{key:"prefetch",value:function(e){return new Cme(this,e)}},{key:"shuffle",value:function(e,t){return new Ame(this,e,t)}},{key:"serial",value:function(){return new mme(this)}}]),e}(),dme=function(e){d(r,e);var t,n=w(r);function r(e){var t;return l(this,r),(t=n.call(this)).items=e,t.trav=0,t}return p(r,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:(t=c(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:ame(t),done:!1});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(fme),vme=function(e){d(r,e);var t,n=w(r);function r(e){var t;return l(this,r),(t=n.call(this)).nextFn=e,t}return p(r,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:(t=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])}))),function(){return t.apply(this,arguments)})}]),r}(fme),mme=function(e){d(a,e);var t,n,r=w(a);function a(e){var t;return l(this,a),(t=r.call(this)).upstream=e,t.lastRead=Promise.resolve({value:null,done:!1}),t}return p(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:(n=c(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(fme),gme=function(e){d(a,e);var t,n,r=w(a);function a(e,t){var n;return l(this,a),(n=r.call(this)).upstream=e,n.maxCount=t,n.count=0,n.lastRead=Promise.resolve({value:null,done:!1}),n}return p(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:(n=c(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=c(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:Y5(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(fme),yme=function(e){d(r,e);var t,n=w(r);function r(e,t){var a;return l(this,r),(a=n.call(this)).upstream=e,a.maxCount=t,a.count=0,a}return p(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:(t=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(fme),bme=function(e){d(a,e);var t,n,r=w(a);function a(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return l(this,a),(n=r.call(this)).upstream=e,n.batchSize=t,n.enableSmallLastBatch=i,n.lastRead=Promise.resolve({value:null,done:!1}),n}return p(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:(n=c(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=c(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(fme),xme=function(e){d(a,e);var t,n,r=w(a);function a(e,t){var n;return l(this,a),(n=r.call(this)).upstream=e,n.predicate=t,n.lastRead=Promise.resolve({value:null,done:!1}),n}return p(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:(n=c(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=c(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:Y5(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(fme),kme=function(e){d(r,e);var t,n=w(r);function r(e,t){var a;return l(this,r),(a=n.call(this)).upstream=e,a.transform=t,a}return p(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:(t=c(o().mark((function e(){var t,n,r,a,i,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=y5(t.value),r=this.transform(t.value),a=y5(r),i=O(n);try{for(i.s();!(s=i.n()).done;)g5(u=s.value,a)||u.dispose()}catch(e){i.e(e)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(fme),wme=function(e){d(a,e);var t,n,r=w(a);function a(e,t){var n;return l(this,a),(n=r.call(this)).upstream=e,n.handler=t,n.count=0,n.lastRead=Promise.resolve({value:null,done:!1}),n}return p(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:(n=c(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return t.apply(this,arguments)})}]),a}(fme),Ime=function(e){d(r,e);var t,n=w(r);function r(e,t){var a;return l(this,r),(a=n.call(this)).upstream=e,a.transform=t,a}return p(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:(t=c(o().mark((function e(){var t,n,r,a,i,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=y5(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=y5(r),i=O(n);try{for(i.s();!(s=i.n()).done;)g5(u=s.value,a)||u.dispose()}catch(e){i.e(e)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(fme),Nme=function(e){d(a,e);var t,n,r=w(a);function a(){var e;return l(this,a),(e=r.call(this)).outputQueue=new sme,e.lastRead=Promise.resolve({value:null,done:!1}),e}return p(a,[{key:"next",value:(n=c(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(fme),Sme=function(e){d(r,e);var t,n=w(r);function r(e,t){var a;return l(this,r),(a=n.call(this)).upstream=e,a.transform=t,a}return p(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:(t=c(o().mark((function e(){var t,n,r,a,i,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=y5(t.value),r=this.transform(t.value),a=y5(r),this.outputQueue.pushAll(r),i=O(n);try{for(i.s();!(s=i.n()).done;)g5(u=s.value,a)||u.dispose()}catch(e){i.e(e)}finally{i.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Nme),Tme=function(e){d(a,e);var t,n,r=w(a);function a(e,t){var n;return l(this,a),(n=r.call(this)).baseErrorHandler=t,n.lastRead=null,n.iterator=null,n.moreIterators=e,n}return p(a,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:(n=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"readFromChain",value:(t=c(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),a}(fme);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(pme||(pme={}));var Eme=function(e){d(a,e);var t,n,r=w(a);function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pme.FAIL;return l(this,a),(t=r.call(this)).iterators=e,t.mismatchMode=n,t.count=0,t.currentPromise=null,t}return p(a,[{key:"summary",value:function(){return"{".concat("TODO: fill in upstream of zip summaries","} -> Zip")}},{key:"nextState",value:(n=c(o().mark((function e(t){var n,r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e instanceof fme?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}},e.next=3,t;case 3:return n=0,r=0,e.next=7,eme(this.iterators,a);case 7:if(i=e.sent,n!==r){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:if(!(r>0)){e.next=16;break}e.t0=this.mismatchMode,e.next=e.t0===pme.FAIL?14:e.t0===pme.SHORTEST?15:(e.t0,pme.LONGEST,16);break;case 14:throw new Error("Zipped streams should have the same length. "+"Mismatched at element ".concat(this.count,"."));case 15:return e.abrupt("return",{value:null,done:!0});case 16:return this.count++,e.abrupt("return",{value:i,done:!1});case 18:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"next",value:(t=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentPromise=this.nextState(this.currentPromise),e.abrupt("return",this.currentPromise);case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(fme),Cme=function(e){d(n,e);var t=w(n);function n(e,r){var a;return l(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new ome(r),a}return p(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(fme),Ame=function(e){d(a,e);var t,n,r=w(a);function a(e,t,n){var i;return l(this,a),(i=r.call(this,e,t)).upstream=e,i.windowSize=t,i.upstreamExhausted=!1,i.random=qee.alea(n||z4().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return p(a,[{key:"next",value:(n=c(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:(t=c(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(Cme),Rme=function(){function e(){l(this,e),this.size=null}var t,n;return p(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return F$(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),_me(c(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,Ome));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,_me(c(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,_me(c(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return X5((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:(n=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"map",value:function(e){var t=this;return _me(c(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return X5((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return _me(c(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return _me(c(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,_me(c(o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=cme(c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",lme(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,_me(c(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=qee.alea(t||z4().toString());return _me(c(o().mark((function t(){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,_me(c(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:(t=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function _me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){d(i,n);var r,a=w(i);function i(){var e;return l(this,i),(e=a.apply(this,arguments)).size=t,e}return p(i,[{key:"iterator",value:(r=c(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})}]),i}(Rme))}function Ome(e){return null===e?null:rme(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof n5?Pte(e):V5(e)}(e),recurse:!1}:{value:null,recurse:!0}}Rme.MAX_BUFFER_SIZE=1e4;var Fme=function(e){d(r,e);var t,n=w(r);function r(e){var t;return l(this,r),(t=n.call(this)).input=e,t}return p(r,[{key:"iterator",value:(t=c(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.input.iterator();case 2:return t=e.sent,n=t.decodeUTF8(),r=n.split("\n").map((function(e){return e.endsWith("\r")&&(e=e.slice(0,-1)),e})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Rme),Dme='"',Mme=Symbol("out"),Lme=Symbol("field"),zme=Symbol("quote"),Pme=Symbol("quoteafterquote"),Bme=Symbol("quoteinquote"),Wme=function(e){d(s,e);var t,n,r,a,i=w(s);function s(e,t){var n;return l(this,s),(n=i.call(this)).input=e,n.hasHeader=!0,n.fullColumnNames=null,n.columnNamesValidated=!1,n.columnConfigs=null,n.configuredColumnsOnly=!1,n.delimiter=",",n.delimWhitespace=!1,n.base=new Fme(e),t||(t={}),n.hasHeader=!1!==t.hasHeader,n.fullColumnNames=t.columnNames,n.columnConfigs=t.columnConfigs,n.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(F$(null==t.delimiter,(function(){return"Delimiter should not be provided when delimWhitespace is true."})),n.delimWhitespace=!0,n.delimiter=" "):n.delimiter=t.delimiter?t.delimiter:",",n}return p(s,[{key:"columnNames",value:(a=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.columnNamesValidated){e.next=3;break}return e.next=3,this.setColumnNames();case 3:return e.abrupt("return",this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"setColumnNames",value:(r=c(o().mark((function e(){var t,n,r,a,i,s,u=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.maybeReadHeaderLine();case 2:if(t=e.sent,this.fullColumnNames||t){e.next=7;break}throw new Error("Column names must be provided if there is no header line.");case 7:this.fullColumnNames&&t&&F$(t.length===this.fullColumnNames.length,(function(){return"The length of provided columnNames ("+u.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."}));case 8:if(this.fullColumnNames||(this.fullColumnNames=t),n=this.fullColumnNames.reduce((function(e,t){return e[t]=e[t]+1||1,e}),{}),F$(0===(r=Object.keys(n).filter((function(e){return n[e]>1}))).length,(function(){return"Duplicate column names found: "+r.toString()})),!this.columnConfigs){e.next=22;break}a=0,i=Object.keys(this.columnConfigs);case 14:if(!(a<i.length)){e.next=22;break}if(s=i[a],-1!==this.fullColumnNames.indexOf(s)){e.next=19;break}throw new Error('The key "'+s+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");case 19:a++,e.next=14;break;case 22:this.columnNamesValidated=!0;case 23:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"maybeReadHeaderLine",value:(n=c(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasHeader){e.next=14;break}return e.next=3,this.base.iterator();case 3:return t=e.sent,e.next=6,t.next();case 6:if(!(n=e.sent).done){e.next=9;break}throw new Error("No data was found for CSV parsing.");case 9:return r=n.value,a=this.parseRow(r,!1),e.abrupt("return",a);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"iterator",value:(t=c(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.columnNamesValidated){e.next=3;break}return e.next=3,this.setColumnNames();case 3:return e.next=5,this.base.iterator();case 5:return t=e.sent,this.hasHeader&&(t=t.skip(1)),e.abrupt("return",t.map((function(e){return n.makeDataElement(e)})));case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"makeDataElement",value:function(e){for(var t=this.parseRow(e),n={},r={},a=0;a<this.fullColumnNames.length;a++){var i=this.fullColumnNames[a],o=this.columnConfigs?this.columnConfigs[i]:null;if(!this.configuredColumnsOnly||o){var s=t[a],u=null;if(""===s)if(o&&void 0!==o.default)u=o.default;else{if(o&&(o.required||o.isLabel))throw new Error("Required column ".concat(i," is empty in this line: ").concat(e));u=void 0}else{var c=Number(s);if(isNaN(c))u=o&&"bool"===o.dtype?this.getBoolean(s):s;else if(o&&o.dtype)switch(o.dtype){case"float32":default:u=c;break;case"int32":u=Math.floor(c);break;case"bool":u=this.getBoolean(s)}else u=c}o&&o.isLabel?r[i]=u:n[i]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}},{key:"getBoolean",value:function(e){return"1"===e||"true"===e.toLowerCase()?1:0}},{key:"parseRow",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=0,a=e.length,i=Mme,o=0;o<a;o++)switch(i){case Mme:switch(e.charAt(o)){case Dme:r=o+1,i=zme;break;case this.delimiter:if(r=o+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),i=Mme;break;default:i=Lme,r=o}break;case Lme:if(e.charAt(o)===this.delimiter)n.push(e.substring(r,o)),i=Mme,r=o+1;break;case zme:if(e.charAt(o)===Dme)i=Pme;break;case Pme:switch(e.charAt(o)){case this.delimiter:n.push(e.substring(r,o-1)),i=Mme,r=o+1;break;case Dme:i=zme;break;default:i=Bme}break;case Bme:if(e.charAt(o)===Dme)i=zme}if(i===Pme?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have ".concat(this.fullColumnNames.length," elements in a row, but got ").concat(n));return n}}]),s}(Rme),Ume=function(e){d(u,e);var t,n,r,a,i,s=w(u);function u(e){var t;l(this,u),(t=s.call(this)).microphoneConfig=e,t.isClosed=!1,t.fftSize=e.fftSize||1024;var n=Math.log2(t.fftSize);if(t.fftSize<0||n<4||n>14||!Number.isInteger(n))throw new Error("Invalid fftSize: it must be a power of 2 between "+"2 to 4 and 2 to 14, but got ".concat(t.fftSize));if(t.numFrames=e.numFramesPerSpectrogram||43,t.sampleRateHz=e.sampleRateHz,t.columnTruncateLength=e.columnTruncateLength||t.fftSize,t.audioTrackConstraints=e.audioTrackConstraints,t.smoothingTimeConstant=e.smoothingTimeConstant||0,t.includeSpectrogram=!1!==e.includeSpectrogram,t.includeWaveform=!0===e.includeWaveform,!t.includeSpectrogram&&!t.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return t}return p(u,[{key:"summary",value:function(){return"microphone"}},{key:"start",value:(i=c(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1});case 3:this.stream=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error thrown while initializing video stream: ".concat(e.t0.message));case 9:if(this.stream){e.next=11;break}throw new Error("Could not obtain audio from microphone.");case 11:if(t=window.AudioContext||window.webkitAudioContext,this.audioContext=new t,this.sampleRateHz){e.next=17;break}this.sampleRateHz=this.audioContext.sampleRate,e.next=19;break;case 17:if(this.audioContext.sampleRate===this.sampleRateHz){e.next=19;break}throw new Error("Mismatch in sampling rate: "+"Expected: ".concat(this.sampleRateHz,"; ")+"Actual: ".concat(this.audioContext.sampleRate));case 19:return n=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,n.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),e.abrupt("return");case 27:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return i.apply(this,arguments)})},{key:"next",value:(a=c(o().mark((function e(){var t,n,r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.next=4,this.getAudioData();case 4:return r=e.sent,this.includeSpectrogram&&(a=this.flattenQueue(r.freqDataQueue),t=this.getTensorFromAudioDataArray(a,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(i=this.flattenQueue(r.timeDataQueue),n=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])),e.abrupt("return",{value:{spectrogram:t,waveform:n},done:!1});case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"capture",value:(r=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getAudioData",value:(n=c(o().mark((function e(){var t,n,r,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],r=0,e.abrupt("return",new Promise((function(e){var i=setInterval((function(){a.includeSpectrogram&&(a.analyser.getFloatFrequencyData(a.freqData),a.freqData[0]===-1/0&&e({freqDataQueue:t,timeDataQueue:n}),t.push(a.freqData.slice(0,a.columnTruncateLength))),a.includeWaveform&&(a.analyser.getFloatTimeDomainData(a.timeData),n.push(a.timeData.slice())),++r===a.numFrames&&(clearInterval(i),e({freqDataQueue:t,timeDataQueue:n}))}),a.fftSize/a.sampleRateHz*1e3)})));case 4:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"stop",value:function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}},{key:"toArray",value:function(){throw new Error("Can not convert infinite audio stream to array.")}},{key:"getSampleRate",value:function(){return this.sampleRateHz}},{key:"flattenQueue",value:function(e){var t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((function(e,r){return n.set(e,r*t)})),n}},{key:"getTensorFromAudioDataArray",value:function(e,t){var n=new Float32Array(L$(t));return n.set(e,n.length-e.length),V5(n,t)}}],[{key:"create",value:(t=c(o().mark((function e(){var t,n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},k0().get("IS_BROWSER")){e.next=3;break}throw new Error("microphone API is only supported in browser environment.");case 3:return n=new u(t),e.next=6,n.start();case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),u}(fme),Vme=function(e){d(s,e);var t,n,r,a,i=w(s);function s(e,t){var n;if(l(this,s),(n=i.call(this)).webcamVideoElement=e,n.webcamConfig=t,n.isClosed=!0,n.resize=!1,n.needToResize())if(n.resize=!0,n.cropSize=[n.webcamConfig.resizeHeight,n.webcamConfig.resizeWidth],n.cropBoxInd=Vte([0],"int32"),n.webcamConfig.centerCrop){var r=1*n.webcamConfig.resizeWidth/n.webcamVideoElement.width,a=1*n.webcamConfig.resizeHeight/n.webcamVideoElement.height,o=(1-r)/2,u=(1-a)/2,c=o+r,h=a+u;n.cropBox=Gte([u,o,h,c],[1,4])}else n.cropBox=Gte([0,0,1,1],[1,4]);return n}return p(s,[{key:"summary",value:function(){return"webcam"}},{key:"start",value:(a=c(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.webcamConfig.facingMode&&F$("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(function(){return"Invalid webcam facing mode: ".concat(t.webcamConfig.facingMode,". ")+"Please provide 'user' or 'environment'"})),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}});case 4:this.stream=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.message="Error thrown while initializing video stream: ".concat(e.t0.message),e.t0;case 11:if(this.stream){e.next=13;break}throw new Error("Could not obtain video from webcam.");case 13:try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,e.abrupt("return",new Promise((function(e){t.webcamVideoElement.onloadedmetadata=function(){e()}})));case 17:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return a.apply(this,arguments)})},{key:"next",value:(r=c(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:e.prev=2,t=Fae(this.webcamVideoElement),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new Error("Error thrown converting video to pixels: ".concat(JSON.stringify(e.t0)));case 9:if(!this.resize){e.next=22;break}return e.prev=10,e.abrupt("return",{value:this.cropAndResizeFrame(t),done:!1});case 14:throw e.prev=14,e.t1=e.catch(10),new Error("Error thrown cropping the video: ".concat(e.t1.message));case 17:return e.prev=17,t.dispose(),e.finish(17);case 20:e.next=23;break;case 22:return e.abrupt("return",{value:t,done:!1});case 23:case"end":return e.stop()}}),e,this,[[2,6],[10,14,17,20]])}))),function(){return r.apply(this,arguments)})},{key:"needToResize",value:function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}},{key:"cropAndResizeFrame",value:function(e){var t=this;return X5((function(){var n,r=f9(h8(e,"float32"),0),a=(n=Pre.cropAndResize(r,t.cropBox,t.cropBoxInd,t.cropSize,"bilinear")).shape;return X8(n,a.slice(1))}))}},{key:"capture",value:(n=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"stop",value:function(){this.stream.getTracks().forEach((function(e){return e.stop()}));try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}},{key:"toArray",value:function(){throw new Error("Can not convert infinite video stream to array.")}}],[{key:"create",value:(t=c(o().mark((function e(t){var n,r,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},k0().get("IS_BROWSER")){e.next=3;break}throw new Error("tf.data.webcam is only supported in browser environment.");case 3:if(t){e.next=9;break}if(t=document.createElement("video"),n.resizeWidth&&n.resizeHeight){e.next=7;break}throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");case 7:t.width=n.resizeWidth,t.height=n.resizeHeight;case 9:return r=new s(t,n),e.next=12,r.start();case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),s}(fme),Gme=p((function e(){l(this,e)})),jme=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"split",value:function(e){return new Hme(this,e)}}]),n}(fme),Hme=function(e){d(r,e);var t,n=w(r);function r(e,t){var a;return l(this,r),(a=n.call(this)).upstream=e,a.impl=new qme(e,t),a}return p(r,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:(t=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(jme),qme=function(e){d(r,e);var t,n=w(r);function r(e,t){var a;return l(this,r),(a=n.call(this)).upstream=e,a.separator=t,a.carryover="",a}return p(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}},{key:"pump",value:(t=c(o().mark((function e(){var t,n,r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=9;break}if(""!==this.carryover){e.next=6;break}return e.abrupt("return",!1);case 6:return this.outputQueue.push(this.carryover),this.carryover="",e.abrupt("return",!0);case 9:(n=t.value.split(this.separator))[0]=this.carryover+n[0],r=O(n.slice(0,-1));try{for(r.s();!(a=r.n()).done;)i=a.value,this.outputQueue.push(i)}catch(e){r.e(e)}finally{r.f()}return this.carryover=n[n.length-1],e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Nme),Kme=function(e){d(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"decodeUTF8",value:function(){return new Xme(this)}}]),n}(fme),Xme=function(e){d(r,e);var t,n=w(r);function r(e){var t;return l(this,r),(t=n.call(this)).upstream=e,t.impl=new Yme(e),t}return p(r,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:(t=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(jme),Yme=function(e){d(r,e);var t,n=w(r);function r(e){var t;if(l(this,r),(t=n.call(this)).upstream=e,k0().get("IS_BROWSER"))t.decoder=new TextDecoder("utf-8");else{var a=require("string_decoder").StringDecoder;t.decoder=new a("utf8")}return t}return p(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Utf8")}},{key:"pump",value:(t=c(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=7;break}return e.abrupt("return",!1);case 7:n=t.value;case 8:return r=k0().get("IS_BROWSER")?this.decoder.decode(n,{stream:!0}):this.decoder.write(Buffer.from(n.buffer)),this.outputQueue.push(r),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Nme),Jme=function(e){d(r,e);var t,n=w(r);function r(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(this,r),(t=n.call(this)).file=e,t.options=a,F$(e instanceof Uint8Array||!!k0().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),(function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."})),t.offset=a.offset||0,t.chunkSize=a.chunkSize||1048576,t}return p(r,[{key:"summary",value:function(){return"FileChunks ".concat(this.file)}},{key:"next",value:(t=c(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=new Promise((function(e,t){var r=n.offset+n.chunkSize;if(n.file instanceof Uint8Array)e(new Uint8Array(n.file.slice(n.offset,r)));else{var a=new FileReader;a.onload=function(n){var r=a.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(r)},a.onabort=function(e){return t(new Error("Aborted"))},a.onerror=function(e){return t(new Error(e.type))};var i=n.file.slice(n.offset,r);a.readAsArrayBuffer(i)}n.offset=r})),e.next=5,t;case 5:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Kme);function Zme(e){return Qme.apply(this,arguments)}function Qme(){return Qme=c(o().mark((function e(t){var n,r,a,i,s,u,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},r=c.length>2?c[2]:void 0,"string"==typeof t?a=t:(a=t.url,i=$me(t)),e.next=5,(r||P4)(a,i);case 5:if(!(s=e.sent).ok){e.next=15;break}return e.t0=Uint8Array,e.next=10,s.arrayBuffer();case 10:return e.t1=e.sent,u=new e.t0(e.t1),e.abrupt("return",new Jme(u,n));case 15:throw new Error(s.statusText);case 16:case"end":return e.stop()}}),e)}))),Qme.apply(this,arguments)}var $me=function(e){return{method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}};function ege(e){return"string"==typeof e&&"file://"===e.slice(0,7)}var tge=function(e){d(r,e);var t,n=w(r);function r(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(this,r),(t=n.call(this)).input=e,t.options=a,t}return p(r,[{key:"iterator",value:(t=c(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ege(this.input)&&k0().get("IS_NODE")&&(t=require("fs"),this.input=t.readFileSync(this.input.slice(7))),e.abrupt("return",new Jme(this.input,this.options));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Gme),nge=function(e){d(r,e);var t,n=w(r);function r(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(this,r),(t=n.call(this)).url=e,t.fileOptions=a,t}return p(r,[{key:"iterator",value:(t=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ege(this.url)){e.next=4;break}return e.abrupt("return",new tge(this.url,this.fileOptions).iterator());case 4:return e.abrupt("return",Zme(this.url,this.fileOptions));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(Gme);function rge(){return(rge=c(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vme.create(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function age(){return(age=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ume.create(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ige="4.22.0",oge={__proto__:null,CSVDataset:Wme,Dataset:Rme,FileDataSource:tge,TextLineDataset:Fme,URLDataSource:nge,array:function(e){return _me(c(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ume(e));case 1:case"end":return t.stop()}}),t)}))),e.length)},csv:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Wme(new nge(e),t)},func:function(e){var t=cme(e);return _me(c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))))},generator:function(e){return _me(c(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,t.abrupt("return",cme((function(){return n.next()})));case 4:case"end":return t.stop()}}),t)}))))},microphone:function(e){return age.apply(this,arguments)},version_data:ige,webcam:function(e,t){return rge.apply(this,arguments)},zip:function(e){if(!nme(e))throw new Error("The argument to zip() must be an object or array.");var t;if(Array.isArray(e))for(var n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(var r in e)t=null==t?e[r].size:Math.min(t,e[r].size);return _me(c(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,eme(e,(function(e){if(e instanceof Rme)return{value:e.iterator(),recurse:!1};if(nme(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}));case 2:return n=t.sent,t.abrupt("return",hme(n,pme.SHORTEST));case 4:case"end":return t.stop()}}),t)}))),t)}};function sge(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&F$("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var uge=one,cge=function(e){d(a,e);var t,n,r=w(a);function a(){var e;return l(this,a),(e=r.call(this)).blockSize=48,e.firstUse=!0,e.data=new S$(x(e),q5()),e}return p(a,[{key:"nextDataId",value:function(){return a.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,k0().get("IS_NODE")&&z3("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&$$(n[0])){var a=n.map((function(e){return B4(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:(n=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?Tie(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):u0(this.data.get(e).values,n)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return W4(e)}));return l8(e.shape,e.dtype,n)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return l8(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return q5().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:(t=c(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=z4(),t(),r=z4()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){sge([e],"where");var t=this.readSync(e.dataId);return uge(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return N(v(a.prototype),"epsilon",this).call(this)}}]),a}(T$);function lge(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}cge.nextDataId=0;var hge={kernelName:N0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;sge(t,"abs");var r=new Float32Array(L$(t.shape));return r=lge(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}};function pge(e){return function(t,n,r,a,i){var o=z7(t,n),s=o.length,u=i0(o),c=q$(i,L$(o)),l=t.length,h=n.length,p=i0(t),f=i0(n),d=M7(t,o),v=M7(n,o);if(d.length+v.length===0)for(var m=0;m<c.length;++m)c[m]=e(r[m%r.length],a[m%a.length]);else for(var g=function(){var t=d0(y,s,u),n=t.slice(-l);d.forEach((function(e){return n[e]=0}));var i=f0(n,l,p),o=t.slice(-h);v.forEach((function(e){return o[e]=0}));var m=f0(o,h,f);c[y]=e(r[i],a[m])},y=0;y<c.length;++y)g();return[c,o]}}function fge(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var dge={kernelName:Z0,backendName:"cpu",kernelFunc:fge};function vge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=vge(e,t,"float32"),a=vge(e,t,"float32");return fge({inputs:{real:r,imag:a},backend:e})}var i=l0(L$(t),n);return e.makeTensorInfo(t,n,i)}function mge(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var gge={kernelName:W1,backendName:"cpu",kernelFunc:mge};function yge(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var bge={kernelName:D2,backendName:"cpu",kernelFunc:yge};function xge(e,t,n,r){if("int32"===r)return[t,"int32",Int32Array.from(e)];if("bool"===r){var a=L4([0],n),i=S(pge((function(e,t){return e!==t?1:0}))(t,[],e,a,"bool"),2),o=i[0];return[i[1],"bool",o]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function kge(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return mge({inputs:{x:a},backend:n});var o=vge(n,a.shape,a.dtype),s=kge({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=fge({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=yge({inputs:{input:a},backend:n}),l=kge({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),l}if(!J$(a.dtype,i)){var h=mge({inputs:{x:a},backend:n});return{dataId:h.dataId,shape:h.shape,dtype:i}}var p=S(xge(n.data.get(a.dataId).values,a.shape,a.dtype,i),3),f=p[0],d=p[1],v=p[2];return n.makeTensorInfo(f,d,v)}var wge={kernelName:X0,backendName:"cpu",kernelFunc:kge};function Ige(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;sge([o,s],e);var c=u.data.get(o.dataId).values,l=u.data.get(s.dataId).values,h="string"===o.dtype?aoe(c):c,p="string"===o.dtype?aoe(l):l,f=r||o.dtype,d=S(t(o.shape,s.shape,h,p,f),2),v=d[0],m=d[1];return u.makeTensorInfo(m,f,v)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var c=kge({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),h=l.complexTensorInfos.real,p=l.complexTensorInfos.imag,f=u.data.get(h.dataId).values,d=u.data.get(p.dataId).values,v=kge({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),m=u.data.get(v.dataId),g=m.complexTensorInfos.real,y=m.complexTensorInfos.imag,b=u.data.get(g.dataId).values,x=u.data.get(y.dataId).values,k=S(n(o.shape,s.shape,f,d,b,x),3),w=k[0],I=k[1],N=k[2],T=u.makeTensorInfo(N,"float32",w),E=u.makeTensorInfo(N,"float32",I),C=fge({inputs:{real:T,imag:E},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(T),u.disposeIntermediateTensorInfo(E),C}var A=u.data.get(o.dataId).values,R=u.data.get(s.dataId).values,_=r||o.dtype,O=S(t(o.shape,s.shape,A,R,_),2),F=O[0],D=O[1];return u.makeTensorInfo(D,_,F)}}function Nge(e){return function(t,n,r,a,i,o){var s=z7(t,n),u=L$(s),c=s.length,l=i0(s),h=q$("float32",u),p=q$("float32",u),f=M7(t,s),d=M7(n,s),v=Tie(r,a),m=Tie(i,o),g=t.length,y=i0(t),b=n.length,x=i0(n);if(f.length+d.length===0)for(var k=0;k<h.length;k++){var w=k%v.length,I=k%m.length,N=e(v[2*w],v[2*w+1],m[2*I],m[2*I+1]);h[k]=N.real,p[k]=N.imag}else for(var S=function(){var t=d0(T,c,l),n=t.slice(-g);f.forEach((function(e){return n[e]=0}));var r=f0(n,g,y),a=t.slice(-b);d.forEach((function(e){return a[e]=0}));var i=f0(a,b,x),o=e(v[2*r],v[2*r+1],m[2*i],m[2*i+1]);h[T]=o.real,p[T]=o.imag},T=0;T<h.length;T++)S();return[h,p,s]}}var Sge=pge((function(e,t){return e+t})),Tge=Nge((function(e,t,n,r){return{real:e+n,imag:t+r}})),Ege=Ige(E0,Sge,Tge),Cge={kernelName:E0,backendName:"cpu",kernelFunc:Ege};function Age(e,t,n,r,a){for(var i=L$(r),o=l0(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o}function Rge(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=l8([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,s,c):t.size>0?o.set(o.get(s,c)+t.get(s,u),s,c):o.set(o.get(s,c)+1,s,c))}return o}var _ge=pge((function(e,t){return e&t})),Oge=Ige(H0,_ge),Fge={kernelName:H0,backendName:"cpu",kernelFunc:Oge};function Dge(e){return function(t,n,r){for(var a=K$(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function Mge(e,t,n){return Lge(e,Dge(t),n)}function Lge(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;sge(s,e);var u,c=o,l=c.data.get(s.dataId).values;if("string"===s.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=aoe(l)}else u=l;var h=n||s.dtype,p=t(u,h,i);return c.makeTensorInfo(s.shape,h,p)}}var zge=Dge((function(e){return Math.ceil(e)})),Pge=Lge(Y0,zge),Bge={kernelName:Y0,backendName:"cpu",kernelFunc:Pge};function Wge(e,t,n,r){var a=K$(n,L$(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=L$(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?aoe(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,c=0;c<e.shape[1];++c)a[u+c]=r[i++];o+=e.shape[1]}))}return a}var Uge=pge((function(e,t){return e===t?1:0})),Vge=Ige(T1,Uge,null,"bool"),Gge={kernelName:T1,backendName:"cpu",kernelFunc:Vge},jge=Dge((function(e){return Math.exp(e)})),Hge=Lge(E1,jge,"float32"),qge={kernelName:E1,backendName:"cpu",kernelFunc:Hge},Kge=Dge((function(e){return Math.expm1(e)})),Xge=Lge(A1,Kge),Yge={kernelName:A1,backendName:"cpu",kernelFunc:Xge},Jge=Dge((function(e){return Math.floor(e)})),Zge=Lge(F1,Jge),Qge={kernelName:F1,backendName:"cpu",kernelFunc:Zge},$ge=pge((function(e,t){return Math.floor(e/t)})),eye=Ige(D1,$ge,null,"int32"),tye={kernelName:D1,backendName:"cpu",kernelFunc:eye};function nye(e,t,n,r,a,i,o,s,u){for(var c=l8([r,i],n),l=0;l<r;l++){for(var h=[],p=0,f=0;f<a;f++){var d=e[l*a+f];p+=d*o[f],h.push(d)}if(p<0||p>=u/i)throw new Error("Invalid indices: ".concat(h," does not index into ").concat(s));for(var v=0;v<i;v++)c.values[l*i+v]=t.get.apply(t,T(t.indexToLoc(p*i+v)))}return c}function rye(e,t,n){for(var r=l8(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var aye=pge((function(e,t){return e>t?1:0})),iye=Ige(P1,aye,null,"bool"),oye={kernelName:P1,backendName:"cpu",kernelFunc:iye},sye=pge((function(e,t){return e>=t?1:0})),uye=Ige(B1,sye,null,"bool"),cye={kernelName:B1,backendName:"cpu",kernelFunc:uye},lye=pge((function(e,t){return e<t?1:0})),hye=Ige(K1,lye,null,"bool"),pye={kernelName:K1,backendName:"cpu",kernelFunc:hye},fye=pge((function(e,t){return e<=t?1:0})),dye=Ige(X1,fye,null,"bool"),vye={kernelName:X1,backendName:"cpu",kernelFunc:dye};function mye(e,t,n){var r=(t-e)/(n-1),a=l0(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var gye=Dge((function(e){return Math.log(e)})),yye=Lge(J1,gye),bye={kernelName:J1,backendName:"cpu",kernelFunc:yye};function xye(e,t,n,r){for(var a=q$(r,L$(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var c=e[o+u];(Number.isNaN(c)||c>s)&&(s=c)}a[i]=s}return a}var kye=pge((function(e,t){return Math.max(e,t)})),wye=Ige(i2,kye),Iye={kernelName:i2,backendName:"cpu",kernelFunc:wye},Nye=pge((function(e,t){return Math.min(e,t)})),Sye=Ige(f2,Nye),Tye={kernelName:f2,backendName:"cpu",kernelFunc:Sye},Eye=pge((function(e,t){return e*t})),Cye=Nge((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),Aye=Ige(g2,Eye,Cye),Rye={kernelName:g2,backendName:"cpu",kernelFunc:Aye};function _ye(e,t,n){var r=M4(-1,n);return Eye([],t,r,e,n)}var Oye={kernelName:y2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;sge(r,"neg");var a=S(_ye(n.data.get(r.dataId).values,r.shape,r.dtype),2),i=a[0],o=a[1];return n.makeTensorInfo(o,r.dtype,i)}},Fye=pge((function(e,t){return e!==t?1:0})),Dye=Ige(b2,Fye,null,"bool"),Mye={kernelName:b2,backendName:"cpu",kernelFunc:Dye};function Lye(e,t,n,r,a){for(var i=t.length,o=L$(t),s=i0(t),u=i0(a),c=q$(n,L$(a)),l=0;l<o;++l){for(var h=d0(l,i,s),p=new Array(h.length),f=0;f<p.length;f++)p[f]=h[r[f]];c[f0(p,i,u)]=e[l]}return c}function zye(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;sge(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var c=Lye(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var Pye={kernelName:T3,backendName:"cpu",kernelFunc:zye};function Bye(e,t,n,r){for(var a=S(J7(e,r),2),i=a[0],o=a[1],s=h5(t,"int32"),u=l0(L$(i),s),c=L$(o),l=0;l<u.length;++l){for(var h=l*c,p=1,f=0;f<c;++f)p*=n[h+f];u[l]=p}return{outVals:u,outShape:i,outDtype:s}}var Wye={kernelName:A2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;sge(a,"prod");var s=a.shape.length,u=j$(i,a.shape),c=$7(u,s),l=u,h=a,p=[];null!=c&&(h=zye({inputs:{x:a},backend:n,attrs:{perm:c}}),p.push(h),l=t9(l.length,s));var f=n.data.get(h.dataId).values,d=Bye(h.shape,h.dtype,f,l),v=d.outVals,m=d.outShape,g=d.outDtype,y=m;return o&&(y=Z7(m,u)),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,g,v)}};function Uye(e,t,n,r){var a=[],i=0,o=t.length-1+n.length,s=new Array(o).fill(null).map((function(){return[0]}));!function(e,t){for(var n=0;n<e.length;++n){var r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);for(var u=1,c=0;c<t.length-1;++c){u*=t[c];for(var l=t[c+1],h=1;h<u+1;++h)s[c].push(h*l)}for(var p=0;p<e.length;++p){for(var f=e[p],d=e[p]+1,v=0;v<n.length;++v){var m=n[v],g=v+t.length-1;if(g>=0)for(var y=s[g],b=y[y.length-1]-m[f],x=f;x<d;++x)s[g].push(m[x+1]+b);f=m[f],d=m[d]}d!==f&&(a.push([f,d]),i+=d-f)}return{outSplits:s,valueSlices:a,numValues:i}}function Vye(e,t){for(var n=e.slice(0,t);n.length<t;)n.push(1);for(var r=t;r<e.length;r++)n[t-1]*=e[r];return n}function Gye(e,t,n,r,a){var i=t.slice();i[0]=a;var o=K$(n,L$(i)),s=e.length;return function(e,t,n,r,a,i){var o,s=Vye(t,2)[1],u=Vye(i,2)[1],c=0,l=O(n);try{for(l.s();!(o=l.n()).done;)for(var h=o.value,p=h[0];p<h[1];++p){for(var f=0;f<r;++f)a[c*u+f]=e[p*s+f];++c}}catch(e){l.e(e)}finally{l.f()}}(e,t,r,0===s?0:s/t[0],o,i),[o,i]}function jye(e,t,n,r,a,i,o,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((function(e,r){if(e<0||e>=n){var a=d0(r,t.length,i0(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(i,o,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");var u=Uye(i,o,e,r[0]),c=u.outSplits,l=u.valueSlices,h=u.numValues,p=function(e){for(var t=[],n=function(){var n=K$("int32",e[r].length);t.push(n),e[r].forEach((function(e,t){return n[t]=e}))},r=0;r<e.length;++r)n();return t}(c),f=Gye(n,r,a,l,h);return[p,f[0],f[1]]}var Hye=2147483647;function qye(e,t,n,r,a,i,o){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");var s=0===t.length,u=0===a.length,c=0===o.length,l=[];s||l.push(t[0]),u||l.push(a[0]),c||l.push(o[0]);for(var h=1;h<l.length;++h)if(l[h]!==l[h-1])throw new Error("starts, limits, and deltas must have the same shape");var p=0===l.length?1:l[0],f=K$("int32",p+1);f[0]=0;for(var d=0;d<p;++d){var v=s?e[0]:e[d],m=u?r[0]:r[d],g=c?i[0]:i[d];if(0===g)throw new Error("Requires delta != 0");var y=void 0;if(g>0&&m<v||g<0&&m>v)y=0;else if((y=Math.ceil(Math.abs((m-v)/g)))>Hye)throw new Error("Requires ((limit - start) / delta) <= ".concat(Hye));f[d+1]=f[d]+y}for(var b=K$(n,f[p]),x=0,k=0;k<p;++k)for(var w=f[k+1]-f[k],I=s?e[0]:e[k],N=c?i[0]:i[k],S=0;S<w;++S)b[x++]=I,I+=N;return[f,b]}var Kye=Qae,Xye=function(){function e(t,n,r,a,i,o,s,u,c,h){l(this,e),this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=uie(h),this.raggedRank=cie(this.rowPartitionTypes)}return p(e,[{key:"getRowPartitionTypeByDimension",value:function(e){return this.rowPartitionTypes[0]===Kye.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}},{key:"getRowPartitionTensor",value:function(e){return this.rowPartitionTypes[0]===Kye.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}},{key:"getMaxWidth",value:function(t){var n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case Kye.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case Kye.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(Kye[this.getRowPartitionTypeByDimension(t-1)]))}}},{key:"tensorShapeFromTensor",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Jye(e,n)}},{key:"calculateOutputSize",value:function(e){var t=this.valuesShape;lie(this.defaultValueShape,t);var n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=sie(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(var a=1;a<=this.raggedRank;++a)r[a]<0&&(r[a]=this.getMaxWidth(a));return r}},{key:"calculateFirstParentOutputIndex",value:function(e,t,n){for(var r=Math.min(e,n),a=[],i=0,o=0;o<r;++o,i+=t)a.push(i);for(var s=r;s<e;++s)a.push(-1);return F$(a.length===e,(function(){return"Final length of result must be equal to firstDimension."})),a}},{key:"calculateOutputIndexRowSplit",value:function(e,t,n,r){for(var a=e.length,i=[],o=0;o<a-1;++o){var s=e[o+1]-e[o],u=Math.min(r,s),c=t[o];-1===c&&(u=0);for(var l=0;l<u;++l)i.push(c),c+=n;for(var h=0;h<s-u;++h)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}},{key:"calculateOutputIndexValueRowID",value:function(e,t,n,r){var a=e.length,i=[];if(0===a)return[];var o=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));var u=t[s];i.push(u);for(var c=1;c<a;++c){var l=e[c];if(l===s)u>=0&&(++o<r?u+=n:u=-1);else{if(o=0,s=l,l>=t.length)throw new Error("Got nextValueRowId=".concat(l," which is not less than ").concat(t.length));u=t[l]}i.push(u)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}},{key:"calculateOutputIndex",value:function(e,t,n,r){var a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Kye.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case Kye.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(Kye[i]))}}},{key:"getFirstDimensionSize",value:function(){var e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");var t=this.rowPartitionTypes[0];switch(t){case Kye.FIRST_DIM_SIZE:return e[0];case Kye.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Kye.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(Kye[t]))}}},{key:"compute",value:function(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(var r=n.length-2;r>=0;--r)n[r]=n[r+1]*t[r+1];var a=Jye(t,!1),i=K$(this.valuesDType,L$(a));if(n[0]*t[0]>0){for(var o=this.calculateFirstParentOutputIndex(e,n[0],t[0]),s=1;s<=this.raggedRank;++s){o=this.calculateOutputIndex(s-1,o,n[s],t[s])}this.setOutput(this.raggedRank,o,i,a)}return[a,i]}},{key:"setOutput",value:function(e,t,n,r){if(0!==n.length){var a=this.values,i=n,o=r.slice(),s=L$(o=o.slice(e+1)),u=t.length,c=this.defaultValue;if(c.length!==s&&1!==c.length){var l=this.defaultValueShape;X5((function(){var e=X8(c,l),t=h7(e,o);c=t.dataSync()}))}for(var h=0,p=0,f=0,d=0;d<=u;++d){var v=d<u?t[d]:-1;if(v!==f){if(p<f){var m=a.subarray(h*s);Yye(i.subarray(p*s),m,(f-p)*s)}if(d>=u){var g=n.length;v=Math.floor(g/s)}if(v>f)if(1===this.defaultValue.length)i.subarray(f*s,v*s).fill(this.defaultValue[0]),f=v;else for(;v>f;){Yye(i.slice(f*s),c,s),++f}v<0?(h=d+1,p=f):(h=d,f=(p=f)+1)}else++f}}}}],[{key:"getMaxWidthRowSplit",value:function(e){var t=e.length;if(0===t||1===t)return 0;for(var n=0,r=0;r<t-1;++r){var a=e[r+1]-e[r];a>n&&(n=a)}return n}},{key:"getMaxWidthValueRowID",value:function(e){var t=e.length;if(0===t)return 0;for(var n=0,r=e[0],a=0,i=1;i<t;++i){var o=e[i];o!==r&&(r=o,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}}]),e}();function Yye(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function Jye(e,t){var n,r=[],a=O(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i<0){if(!t)throw new Error("Dimension ".concat(i," must be >= 0"));if(i<-1)throw new Error("Dimension ".concat(i," must be >= -1"));i=-1}r.push(i)}}catch(e){a.e(e)}finally{a.f()}return r}function Zye(e,t,n,r,a,i,o,s,u,c){return new Xye(e,t,n,r,a,i,o,s,u,c).compute()}function Qye(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return l0(0,r);var a=l0(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}var $ye=Dge((function(e){return 1/Math.sqrt(e)})),ebe=Lge(H2,$ye),tbe={kernelName:H2,backendName:"cpu",kernelFunc:ebe};function nbe(e,t,n,r,a,i,o,s,u,c){var l=[r/a,a],h=e.values,p=t.values;if(0===r)return l8(n,t.dtype);var f=u instanceof $4?u:l8(l,t.dtype);"string"==typeof u||"number"==typeof u?f.values.fill(u):"boolean"==typeof u&&f.values.fill(+u);for(var d=0;d<i;d++){for(var v=[],m=0,g=0;g<o;g++){var y=h[d*o+g];v.push(y),m+=y*s[g]}if(m<0||m>=r/a)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(n));for(var b=0;b<a;b++)c?f.values[m*a+b]+=p[d*a+b]:f.values[m*a+b]=0===t.rank?p[0]:p[d*a+b]}return f}var rbe=Dge((function(e){return 1/(1+Math.exp(-e))})),abe=Mge(t3,(function(e){return 1/(1+Math.exp(-e))})),ibe={kernelName:t3,backendName:"cpu",kernelFunc:abe};function obe(e,t,n,r,a){var i=Kae(r,t,n),o=L$(n),s=i0(r);if(i){var u=Xae(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var c=l8(r,a,"string"===a?aoe(e):e),l=l8(n,a),h=0;h<l.size;++h){var p=l.indexToLoc(h),f=p.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,T(f))].concat(T(p)))}return"string"===a?ioe(l.values):l.values}function sbe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;sge(a,"slice");var s=S(Yae(a,i,o),2),u=s[0],c=s[1];zae(a,u,c);var l=obe(n.data.get(a.dataId).values,u,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,l)}var ube={kernelName:Z2,backendName:"cpu",kernelFunc:sbe};function cbe(e,t,n,r,a,i,o){var s=t[0],u=i[0],c=new Array(u),l=new Array(s),h=t[1];if(0===u){if(0!==s)throw new Error(Gie(s));return[K$(n,0),[0,h],K$(a,0),c,l]}for(var p=!0,f=0,d=new Array(u).fill(0),v=0;v<s;++v){var m=e[v*h];if(m<0)throw new Error(jie(v,m));if(m>=u)throw new Error(Hie(v,m,u));++d[m],p=p&&m>=f,f=m}for(var g=!0,y=0;y<u;++y){var b=0===d[y];c[y]=b,g=g&&!b,d[y]=Math.max(d[y],1),y>0&&(d[y]+=d[y-1])}if(g&&p){for(var x=e,k=r,w=0;w<s;++w)l[w]=w;return[x,[s,h],k,c,l]}for(var I=d[u-1],N=K$(n,I*h),S=K$(a,I),T=new Array(u).fill(0),E=0;E<s;++E){var C=e[E*h],A=T[C],R=(0===C?0:d[C-1])+A;T[C]++;for(var _=0;_<h;++_)N[R*h+_]=e[E*h+_];S[R]=r[E],l[E]=R}for(var O=0;O<u;++O){if(0===T[O]){var F=0===O?0:d[O-1];N[F*h+0]=O;for(var D=1;D<h;++D)N[F*h+D]=0;S[F]=o}}return[N,[I,h],S,c,l]}function lbe(e,t,n,r,a){for(var i=L$(r),o=t[0],s=a.length,u=[],c=1,l=-1,h=0;h<s;++h){var p=a[h];if(-1===p){if(-1!==l)throw new Error(qie(l,h));l=h,u.push(1)}else{if(p<0)throw new Error(Kie(h,p));c*=p,u.push(p)}}if(-1!==l){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var f=Math.trunc(i/c);if(c*f!==i)throw new Error(Yie(r,u));u[l]=f}if(L$(u)!==i)throw new Error(Jie(r,u));var d=r.length,v=[];if(d>0){v[d-1]=1;for(var m=d-2;m>=0;--m)v[m]=v[m+1]*r[m+1]}var g=[];if(s>0){g[s-1]=1;for(var y=s-2;y>=0;--y)g[y]=g[y+1]*u[y+1]}for(var b=K$(n,o*s),x=0;x<o;++x){for(var k=0,w=0;w<d;++w)k+=e[x*d+w]*v[w];for(var I=0;I<s;++I)b[x*s+I]=Math.trunc(k/g[I]),k%=g[I]}return[b,[o,s],u]}function hbe(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0,h=l;if(h<0)throw new Error("segment ids must be >= 0");var p=t.slice();p[0]=h;var f=p.reduce((function(e,t){return e*t}),1),d=K$(n,f);if(0===s)return h>0&&d.fill(o),[d,p];if(h<=0)throw new Error("segment ids must be >= 0");for(var v=0,m=1,g=0,y=a[v];;){var b=0;if(m<s){if(y===(b=a[m])){++m;continue}if(y>=b)throw new Error("segment ids are not increasing")}if(y<0||y>=h)throw new Error($ie(y,h));y>g&&d.fill(o,g*c,y*c);for(var x=v;x<m;++x){var k=r[x];if(k<0||k>=u[0])throw new Error(eoe(x,r[x],u[0]));for(var w=0;w<c;w++)d[y*c+w]+=e[k*c+w]}if(i)for(var I=0;I<c;I++)d[y*c+I]/=m-v;if(v=m,g=y+1,y=b,++m>s)break}return g<h&&d.fill(o,g*c,h*c),[d,p]}var pbe=Dge((function(e){return Math.sqrt(e)})),fbe=Mge(r3,(function(e){return Math.sqrt(e)})),dbe={kernelName:r3,backendName:"cpu",kernelFunc:fbe},vbe=pge((function(e,t){var n=e-t;return n*n})),mbe=Ige(f3,vbe),gbe={kernelName:f3,backendName:"cpu",kernelFunc:mbe},ybe=Dge((function(e,t){var n=t.pattern,r=t.replaceGlobal,a=t.rewrite;return e.replace(new RegExp(n,r?"g":""),a)})),bbe=Lge(v3,ybe),xbe={kernelName:v3,backendName:"cpu",kernelFunc:bbe};function kbe(e,t,n,r){for(var a=l8(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(T(o)))}return a}var wbe=function(){function e(t,n,r,a,i,o){l(this,e),this.separator=B4(t),this.nGramWidths=n,this.leftPad=B4(r),this.rightPad=B4(a),this.padWidth=i,this.preserveShort=o}return p(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(){var s=o.getPadWidth(i),c=Math.max(0,s-u),l=Math.max(0,s-(a-(u+1))),h=i-(c+l),p=t+(c>0?0:u-s),f=0;f+=c*o.leftPad.length;for(var d=0;d<h;++d)f+=e[p+d].length;f+=l*o.rightPad.length,f+=(c+l+h-1)*o.separator.length,n[r+u]=new Uint8Array(f);for(var v=n[r+u],m=0,g=function(e){return e.forEach((function(e){return v[m++]=e}))},y=0;y<c;++y)g(o.leftPad),g(o.separator);for(var b=0;b<h-1;++b)g(e[p+b]),g(o.separator);if(h>0){g(e[p+h-1]);for(var x=0;x<l;++x)g(o.separator),g(o.rightPad)}else{for(var k=0;k<l-1;++k)g(o.rightPad),g(o.separator);g(o.rightPad)}},u=0;u<a;++u)s()}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,c=K$("int32",a);if(0===r||0===a){for(var l=new Array(r),h=0;h<=u;++h)c[h]=0;return[l,c]}c[0]=0;for(var p=function(){var e=t[f]-t[f-1],r=0;n.nGramWidths.forEach((function(t){r+=n.getNumNGrams(e,t)})),n.preserveShort&&e>0&&0===r&&(r=1),c[f]=c[f-1]+r},f=1;f<=u;++f)p();for(var d=new Array(c[u]),v=function(r){var a=t[r],i=c[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,d,i,u,o),i+=u})),n.preserveShort&&i===c[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,d,i,1,s)}},m=0;m<u;++m)v(m);return[d,c]}}]),e}();function Ibe(e,t,n,r,a,i,o,s){return new wbe(n,r,a,i,o,s).compute(e,t)}function Nbe(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);n&&0===c.length||r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function Sbe(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var c=a.length;Nbe(e[u],t,n,a);var l=a.length-c;s[u]=l,i+=l,o=Math.max(o,l)}for(var h=K$("int32",2*i),p=new Array(i),f=[r,o],d=0,v=0;v<r;++v)for(var m=0;m<s[v];++m)h[2*d]=v,h[2*d+1]=m,p[d]=a[d],++d;return[h,p,f]}function Tbe(e,t){for(var n=K$("int32",e.length),r=0;r<e.length;++r)n[r]=D4(e[r]).modulo(t).getLowBitsUnsigned();return n}var Ebe=pge((function(e,t){return e-t})),Cbe=Nge((function(e,t,n,r){return{real:e-n,imag:t-r}})),Abe=Ige(x3,Ebe,Cbe),Rbe={kernelName:x3,backendName:"cpu",kernelFunc:Abe};function _be(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=l8(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var c=e.locToIndex(s);a.values[i]=e.values[c]}return a}var Obe=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function Fbe(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),c=Math.max(n,Math.floor(t-i*s/a+u)),l=Math.min(r,Math.floor(t+(a-i)*s/a+u));Fbe(e,t,c,l)}var h=e[t],p=n,f=r;for(_$(e,n,t),Obe(e[r],h)>0&&_$(e,n,r);p<f;){for(_$(e,p,f),p++,f--;Obe(e[p],h)<0;)p+=1;for(;Obe(e[f],h)>0;)f-=1}0===Obe(e[n],h)?_$(e,n,f):_$(e,f+=1,r),f<=t&&(n=f+1),t<=f&&(r=f-1)}}function Dbe(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=q$(n,o*r),c=q$("int32",o*r),l=function(){var t=h*s,n=e.subarray(t,t+s),i=new Array(n.length);n.forEach((function(e,t){return i[t]={value:e,index:t}})),r<i.length&&(Fbe(i,r),i=i.slice(0,r)),a&&i.sort(Obe);for(var o=h*r,l=u.subarray(o,o+r),p=c.subarray(o,o+r),f=0;f<r;f++)l[f]=i[f].value,p[f]=i[f].index},h=0;h<o;h++)l();var p=t.slice();return p[p.length-1]=r,[l8(p,n,u),l8(p,"int32",c)]}function Mbe(e,t,n,r){for(var a=j$(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u=new Map,c=new Int32Array(n[a]),l=new $4(i,r,e),h=[],p=1===i[0]&&1===i[2],f=0;f<n[a];f++){var d=void 0;if(p)d=e[f].toString();else{for(var v=[],m=0;m<i[0];m++)for(var g=0;g<i[2];g++)v.push(l.get(m,f,g));d=v.join(",")}var y=u.get(d);if(null!=y)c[f]=y;else{var b=u.size;u.set(d,b),c[f]=b,h.push(f)}}var x=i.slice();x[1]=u.size;var k=new $4(x,r);h.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)k.set(l.get(n,e,r),n,t,r)}));var w=n.slice();return w[a]=x[1],{outputValues:k.values,outputShape:w,indices:c}}var Lbe={__proto__:null,addImpl:Sge,bincountImpl:Age,bincountReduceImpl:Rge,bitwiseAndImpl:_ge,castImpl:xge,ceilImpl:zge,concatImpl:Wge,equalImpl:Uge,expImpl:jge,expm1Impl:Kge,floorDivImpl:$ge,floorImpl:Jge,gatherNdImpl:nye,gatherV2Impl:rye,greaterEqualImpl:sye,greaterImpl:aye,lessEqualImpl:fye,lessImpl:lye,linSpaceImpl:mye,logImpl:gye,maxImpl:xye,maximumImpl:kye,minimumImpl:Nye,multiplyImpl:Eye,negImpl:_ye,notEqualImpl:Fye,prodImpl:Bye,raggedGatherImpl:jye,raggedRangeImpl:qye,raggedTensorToTensorImpl:Zye,rangeImpl:Qye,rsqrtImpl:$ye,scatterImpl:nbe,sigmoidImpl:rbe,simpleAbsImpl:lge,sliceImpl:obe,sparseFillEmptyRowsImpl:cbe,sparseReshapeImpl:lbe,sparseSegmentReductionImpl:hbe,sqrtImpl:pbe,squaredDifferenceImpl:vbe,staticRegexReplaceImpl:ybe,stridedSliceImpl:kbe,stringNGramsImpl:Ibe,stringSplitImpl:Sbe,stringToHashBucketFastImpl:Tbe,subImpl:Ebe,tileImpl:_be,topKImpl:Dbe,transposeImpl:Lye,uniqueImpl:Mbe},zbe="4.22.0";$5("cpu",(function(){return new cge}),1);var Pbe=Mge(I1,(function(e){return e>=0?e:Math.exp(e)-1})),Bbe={kernelName:I1,backendName:"cpu",kernelFunc:Pbe};function Wbe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;sge([a],"leakyRelu");for(var o=L$(a.shape),s=n.data.get(a.dataId).values,u=q$("float32",o),c=0;c<s.length;c++)u[c]=s[c]<0?i*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var Ube={kernelName:q1,backendName:"cpu",kernelFunc:Wbe},Vbe=pge((function(e,t){return e<0?t*e:e}));function Gbe(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;sge([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=S(Vbe(r.shape,a.shape,i,o,"float32"),2),u=s[0],c=s[1];return n.makeTensorInfo(c,"float32",u)}var jbe={kernelName:C2,backendName:"cpu",kernelFunc:Gbe},Hbe=Mge(L2,(function(e){return Math.max(0,e)})),qbe={kernelName:L2,backendName:"cpu",kernelFunc:Hbe},Kbe=Mge(V2,(function(e){return Math.min(Math.max(0,e),6)})),Xbe={kernelName:V2,backendName:"cpu",kernelFunc:Kbe};function Ybe(e,t,n,r,a){if("linear"===n)return mge({inputs:{x:t},backend:e});if("relu"===n)return Hbe({inputs:{x:t},backend:e});if("elu"===n)return Pbe({inputs:{x:t},backend:e});if("relu6"===n)return Kbe({inputs:{x:t},backend:e});if("prelu"===n)return Gbe({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return Wbe({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return abe({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function Jbe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=L$(a.shape),s=G$(i,o),u=L$(s);F$(o===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,h=c.complexTensorInfos.imag;l.shape=s,h.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var Zbe={kernelName:z2,backendName:"cpu",kernelFunc:Jbe};function Qbe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;sge([a,i],"matMul");var u=a.shape.length,c=i.shape.length,l=o?a.shape[u-2]:a.shape[u-1],h=s?i.shape[c-1]:i.shape[c-2],p=o?a.shape[u-1]:a.shape[u-2],f=s?i.shape[c-2]:i.shape[c-1],d=a.shape.slice(0,-2),v=i.shape.slice(0,-2),m=L$(d),g=L$(v),y=z7(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,f]);F$(l===h,(function(){return"Error in matMul: inner shapes (".concat(l,") and (")+"".concat(h,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));for(var b=s?[g,f,h]:[g,h,f],x=Jbe({inputs:{x:a},backend:n,attrs:{shape:o?[m,l,p]:[m,p,l]}}),k=Jbe({inputs:{x:i},backend:n,attrs:{shape:b}}),w=o?x.shape[1]:x.shape[2],I=o?x.shape[2]:x.shape[1],N=s?k.shape[1]:k.shape[2],T=Math.max(m,g),E=n.data.get(x.dataId).values,C=n.data.get(k.dataId).values,A=i0(x.shape),R=i0(k.shape),_=S(o?[A[0],1,A[1]]:[A[0],A[1],1],3),O=_[0],F=_[1],D=_[2],M=S(s?[1,R[1],R[0]]:[R[1],1,R[0]],3),L=M[0],z=M[1],P=M[2],B=I*N,W=l8([T,I,N],x.dtype),U=W.values,V=n.blockSize,G=0;G<T;G++)for(var j=G%m,H=G%g,q=0;q<I;q+=V)for(var K=Math.min(q+V,I),X=0;X<N;X+=V)for(var Y=Math.min(X+V,N),J=0;J<w;J+=V)for(var Z=Math.min(J+V,w),Q=q;Q<K;Q++)for(var $=X;$<Y;$++){for(var ee=0,te=J;te<Z;te++){ee+=E[j*O+Q*F+te*D]*C[te*L+$*z+H*P]}U[G*B+(Q*N+$)]+=ee}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(y,W.dtype,W.values)}var $be={kernelName:V0,backendName:"cpu",kernelFunc:Qbe};var exe={kernelName:D3,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,h=o.transposeA,p=o.transposeB,f=o.activation,d=o.leakyreluAlpha,v=[];t=Qbe({inputs:{a:s,b:u},attrs:{transposeA:h,transposeB:p},backend:i}),c&&(n=Ege({inputs:{a:t,b:c},backend:i}),v.push(t),t=n),f&&(r=Ybe(i,t,f,l,d),v.push(t),t=r);for(var m=0,g=v;m<g.length;m++){var y=g[m];i.disposeIntermediateTensorInfo(y)}return t}},txe=Mge(S0,(function(e){return Math.acos(e)})),nxe={kernelName:S0,backendName:"cpu",kernelFunc:txe},rxe=Mge(T0,(function(e){return Math.acosh(e)})),axe={kernelName:T0,backendName:"cpu",kernelFunc:rxe};var ixe={kernelName:C0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;sge(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=l8(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<o.length;c++)o[c]+=u[c];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};var oxe={kernelName:A0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;sge(a,"all");var s=j$(i,a.shape),u=s,c=$7(u,a.shape.length),l=a;null!=c&&(l=zye({inputs:{x:a},backend:n,attrs:{perm:c}}),u=t9(u.length,a.shape.length)),Q7("all",u,l.shape.length);for(var h=S(J7(l.shape,u),2),p=h[0],f=L$(h[1]),d=l0(L$(p),l.dtype),v=n.data.get(l.dataId).values,m=0;m<d.length;++m){for(var g=m*f,y=v[g],b=0;b<f;++b){var x=v[g+b];y=y&&x}d[m]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(p,l.dtype,d);if(o){var w=Jbe({inputs:{x:k},backend:n,attrs:{shape:Z7(p,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}};var sxe={kernelName:R0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;sge(a,"any");var s=j$(i,a.shape),u=s,c=$7(u,a.shape.length),l=a;null!=c&&(l=zye({inputs:{x:a},backend:n,attrs:{perm:c}}),u=t9(u.length,a.shape.length)),Q7("any",u,l.shape.length);for(var h=S(J7(l.shape,u),2),p=h[0],f=L$(h[1]),d=l0(L$(p),l.dtype),v=n.data.get(l.dataId).values,m=0;m<d.length;++m){for(var g=m*f,y=v[g],b=0;b<f;++b){var x=v[g+b];y=y||x}d[m]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(p,l.dtype,d);if(o){var w=Jbe({inputs:{x:k},backend:n,attrs:{shape:Z7(p,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}};var uxe={kernelName:_0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;sge(a,"argMax");var o=j$(i,a.shape),s=$7(o,a.shape.length),u=a,c=[];null!=s&&(u=zye({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=t9(o.length,u.shape.length)),Q7("argMax",o=[o[0]],u.shape.length);for(var l=S(J7(u.shape,o),2),h=l[0],p=l[1],f=l0(L$(h),"int32"),d=L$(p),v=n.data.get(u.dataId).values,m=0;m<f.length;++m){for(var g=m*d,y=v[g],b=0,x=0;x<d;++x){var k=v[g+x];k>y&&(y=k,b=x)}f[m]=b}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h,"int32",f)}};var cxe={kernelName:O0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;sge(a,"argMin");var o=j$(i,a.shape),s=$7(o,a.shape.length),u=a,c=[];null!=s&&(u=zye({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=t9(o.length,u.shape.length)),Q7("argMin",o=[o[0]],u.shape.length);for(var l=S(J7(u.shape,o),2),h=l[0],p=l[1],f=l0(L$(h),"int32"),d=L$(p),v=n.data.get(u.dataId).values,m=0;m<f.length;++m){for(var g=m*d,y=v[g],b=0,x=0;x<d;++x){var k=v[g+x];k<y&&(y=k,b=x)}f[m]=b}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h,"int32",f)}},lxe=Mge(F0,(function(e){return Math.asin(e)})),hxe={kernelName:F0,backendName:"cpu",kernelFunc:lxe},pxe=Mge(D0,(function(e){return Math.asinh(e)})),fxe={kernelName:D0,backendName:"cpu",kernelFunc:pxe},dxe=Mge(M0,(function(e){return Math.atan(e)})),vxe={kernelName:M0,backendName:"cpu",kernelFunc:dxe},mxe=pge((function(e,t){return Math.atan2(e,t)})),gxe=Ige(z0,mxe),yxe={kernelName:z0,backendName:"cpu",kernelFunc:gxe},bxe=Mge(L0,(function(e){return Math.atanh(e)})),xxe={kernelName:L0,backendName:"cpu",kernelFunc:bxe};function kxe(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,h=a.effectiveFilterWidth,p=a.padInfo.top,f=a.padInfo.left,d="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=l8(a.outShape,n),m=v.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var k=x*g,w=x*r[0],I=0;I<a.inChannels;++I)for(var N=0;N<a.outHeight;++N)for(var S=N*o-p,T=Math.max(0,S),E=Math.min(a.inHeight,l+S),C=k+N*y,A=0;A<a.outWidth;++A){for(var R=A*s-f,_=Math.max(0,R),O=Math.min(a.inWidth,h+R),F=d,D=0,M=0,L=T;L<E;L+=u){for(var z=w+L*r[1],P=_;P<O;P+=c){var B=e[z+P*r[2]+I];"max"===i&&B>F?F=B:"avg"===i&&(D+=B,M++)}if(isNaN(F))break}m[C+A*b+I]="avg"===i?D/M:F}return v}function wxe(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=l8(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,h=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=r.padInfo.top,d=r.padInfo.left,v=l8(t,n,e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-f,x=b;x<0;)x+=c;for(var k=Math.min(r.inHeight,h+b),w=0;w<r.outWidth;++w){for(var I=w*u-d,N=I;N<0;)N+=l;for(var S=Math.min(r.inWidth,p+I),T=Number.NEGATIVE_INFINITY,E=-1,C=x;C<k;C+=c)for(var A=C-b,R=N;R<S;R+=l){var _=R-I,O=v.get(m,C,R,g);O>T&&(T=O,E=a?i?((m*r.inHeight+C)*r.inWidth+R)*r.inChannels+g:(C*r.inWidth+R)*r.inChannels+g:A*p+_)}o.set(E,m,y,w,g)}}return o}function Ixe(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,h=a.dilationWidth,p=a.effectiveFilterDepth,f=a.effectiveFilterHeight,d=a.effectiveFilterWidth,v=a.padInfo.front,m=a.padInfo.top,g=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=l8(a.outShape,n),x=b.values,k=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],I=a.outShape[3]*a.outShape[4],N=a.outShape[4],S=0;S<a.batchSize;++S)for(var T=S*k,E=S*r[0],C=0;C<a.inChannels;++C)for(var A=0;A<a.outDepth;++A){for(var R=A*o-v,_=R;_<0;)_+=c;for(var O=Math.min(a.inDepth,p+R),F=T+A*w,D=0;D<a.outHeight;++D){for(var M=D*s-m,L=M;L<0;)L+=l;for(var z=Math.min(a.inHeight,f+M),P=F+D*I,B=0;B<a.outWidth;++B){for(var W=B*u-g,U=W;U<0;)U+=h;for(var V=Math.min(a.inWidth,d+W),G=P+B*N,j=y,H=0,q=0,K=_;K<O;K+=c){for(var X=E+K*r[1],Y=L;Y<z;Y+=l){for(var J=X+Y*r[2],Z=U;Z<V;Z+=h){var Q=e[J+Z*r[3]+C];if("max"===i&&Q>j?j=Q:"avg"===i&&(H+=Q,q++),isNaN(j))break}if(isNaN(j))break}if(isNaN(j))break}x[G+C]="avg"===i?H/Math.max(q,1):j}}}return b}var Nxe={kernelName:P0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;sge(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;F$(j8(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=O8(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&P$(l.inShape,l.outShape))c=mge({inputs:{x:a},backend:n});else{var h=n.data.get(a.dataId).values,p=i0(a.shape),f=kxe(h,a.shape,a.dtype,p,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,f.values)}return c}};var Sxe={kernelName:W0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;sge(a,"avgPool3d");var l=F8(a.shape,i,o,1,s,u,c),h=Ixe(n.data.get(a.dataId).values,a.shape,a.dtype,i0(a.shape),l,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}};var Txe={kernelName:U0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;sge([a,i],"avgPool3DGrad");for(var l=F8(i.shape,o,s,1,u,c),h=l.strideDepth,p=l.strideHeight,f=l.strideWidth,d=l.filterDepth,v=l.filterHeight,m=l.filterWidth,g=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,k=l.effectiveFilterHeight,w=l.effectiveFilterWidth,I=x-1-l.padInfo.front,N=w-1-l.padInfo.left,S=k-1-l.padInfo.top,T=l8(i.shape,"float32"),E=1/(d*v*m),C=n.bufferSync(a),A=0;A<l.batchSize;++A)for(var R=0;R<l.inChannels;++R)for(var _=0;_<l.inDepth;++_)for(var O=0;O<l.inHeight;++O)for(var F=0;F<l.inWidth;++F){for(var D=_-I,M=O-S,L=F-N,z=0,P=0;P<x;P+=g){var B=(D+P)/h;if(!(B<0||B>=l.outDepth||Math.floor(B)!==B))for(var W=0;W<k;W+=y){var U=(M+W)/p;if(!(U<0||U>=l.outHeight||Math.floor(U)!==U))for(var V=0;V<w;V+=b){var G=(L+V)/f;if(!(G<0||G>=l.outWidth||Math.floor(G)!==G))z+=C.get(A,B,U,G,R)}}}T.set(z*E,A,_,O,F,R)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}};var Exe={kernelName:B0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;sge([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=O8(o.shape,s,u,1,c),h=l.strideHeight,p=l.strideWidth,f=l.filterHeight,d=l.filterWidth,v=l.dilationHeight,m=l.dilationWidth,g=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=g-1-l.padInfo.top,k=l8(o.shape,"float32"),w=1/(f*d),I=n.data.get(a.dataId).values,N=l8(a.shape,"float32",I),S=0;S<l.batchSize;++S)for(var T=0;T<l.inChannels;++T)for(var E=0;E<l.inHeight;++E)for(var C=0;C<l.inWidth;++C){for(var A=E-x,R=C-b,_=0,O=0;O<g;O+=v){var F=(A+O)/h;if(!(F<0||F>=l.outHeight||Math.floor(F)!==F))for(var D=0;D<y;D+=m){var M=(R+D)/p;if(!(M<0||M>=l.outWidth||Math.floor(M)!==M))_+=N.get(S,F,M,T)}}k.set(_*w,S,E,C,T)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var Cxe={kernelName:M1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;F$(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),F$(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),F$(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),sge([a,s,u,i,o],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,h=n.data.get(s.dataId).values,p=n.data.get(u.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),d=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(l.length),m=d.length,g=f.length,y=p.length,b=h.length,x=0,k=0,w=0,I=0,N=0;N<l.length;++N)v[N]=d[x++]+(l[N]-h[k++])*f[w++]/Math.sqrt(p[I++]+c),x>=m&&(x=0),k>=b&&(k=0),w>=g&&(w=0),I>=y&&(I=0);return n.makeTensorInfo(a.shape,a.dtype,v)}};var Axe={kernelName:G0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;sge([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=fie(a.shape,i,s),c=die(u.length,i.length),l=vie(a.shape,i,s),h=mie(o,i.length),p=gie(l,o,i.length),f=Jbe({inputs:{x:a},backend:n,attrs:{shape:u}}),d=zye({inputs:{x:f},backend:n,attrs:{perm:c}}),v=Jbe({inputs:{x:d},backend:n,attrs:{shape:l}}),m=sbe({inputs:{x:v},backend:n,attrs:{begin:h,size:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(v),m}};var Rxe={kernelName:j0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=Age(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var _xe={kernelName:K0,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=z7(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Oxe=Mge(J0,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),Fxe={kernelName:J0,backendName:"cpu",kernelFunc:Oxe},Dxe={kernelName:Q0,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(L$(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=0;c<s.length;c++){var l=s[c],h=u[c];r[c]=Math.hypot(l,h)}return n.makeOutput(r,t.shape,"float32")}};function Mxe(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var Lxe={kernelName:V1,backendName:"cpu",kernelFunc:Mxe};function zxe(e){var t=e.inputs,n=e.backend,r=j$(e.attrs.axis,t[0].shape)[0];iie(t.map((function(e){return e.shape})),r);var a=oie(t.map((function(e){return e.shape})),r);if(0===L$(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return L$(e.shape)>0}));if(1===i.length)return mge({inputs:{x:i[0]},backend:n});if("complex64"===i[0].dtype){var o=i.map((function(e){return yge({inputs:{input:e},backend:n})})),s=i.map((function(e){return Mxe({inputs:{input:e},backend:n})})),u=zxe({inputs:o,backend:n,attrs:{axis:r}}),c=zxe({inputs:s,backend:n,attrs:{axis:r}}),l=fge({inputs:{real:u,imag:c},backend:n});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),l}var h=i.map((function(e){var t=L$(e.shape.slice(r));return Jbe({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),p=h.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=oie(h.map((function(e){return e.shape})),1);var f=1===h[0].shape[0],d=Wge(p,a,t[0].dtype,f),v=oie(i.map((function(e){return e.shape})),r),m=n.makeTensorInfo(v,t[0].dtype,d);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}var Pxe={kernelName:$0,backendName:"cpu",kernelFunc:zxe};function Bxe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;sge([a,i],"conv2d");for(var h=q8(u),p=D8(a.shape,i.shape,o,c,s,l,!1,h),f=p.filterHeight,d=p.filterWidth,v=p.dilationHeight,m=p.dilationWidth,g=p.padInfo.left,y=p.padInfo.top,b="channelsLast"===p.dataFormat,x=new $4(p.outShape,a.dtype),k=i0(a.shape),w=i0(i.shape),I=k[0],N=b?k[1]:k[2],S=b?k[2]:1,T=b?1:k[1],E=x.strides[0],C=b?x.strides[1]:x.strides[2],A=b?x.strides[2]:1,R=b?1:x.strides[1],_=n.data.get(a.dataId).values,O=n.data.get(i.dataId).values,F=x.values,D=0;D<p.batchSize;++D)for(var M=D*I,L=D*E,z=0;z<p.outHeight;++z)for(var P=L+z*C,B=z*p.strideHeight-y,W=0;W<f;++W){var U=B+W*v;if(!(U<0||U>=p.inHeight))for(var V=W*w[0],G=M+U*N,j=0;j<p.outWidth;++j)for(var H=P+j*A,q=j*p.strideWidth-g,K=0;K<d;++K){var X=q+K*m;if(!(X<0||X>=p.inWidth))for(var Y=G+X*S,J=V+K*w[1],Z=0;Z<p.inChannels;++Z){for(var Q=_[Y+Z*T],$=0;$<p.outChannels;++$)F[H+$*R]+=Q*O[J+$];J+=p.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,F)}var Wxe={kernelName:e1,backendName:"cpu",kernelFunc:Bxe};var Uxe={kernelName:t1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;sge([a,i],"conv2dBackpropFilter");for(var h=q8(u),p=D8(a.shape,l,o,1,s,c,!1,h),f=p.strideHeight,d=p.strideWidth,v=p.filterHeight,m=p.filterWidth,g="channelsLast"===p.dataFormat,y=new $4(p.filterShape,"float32"),b=p.padInfo.left,x=p.padInfo.top,k=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,I=new $4(a.shape,a.dtype,k),N=new $4(i.shape,i.dtype,w),S=0;S<v;++S)for(var T=Math.max(0,Math.ceil((x-S)/f)),E=Math.min(p.outHeight,(p.inHeight+x-S)/f),C=0;C<m;++C)for(var A=Math.max(0,Math.ceil((b-C)/d)),R=Math.min(p.outWidth,(p.inWidth+b-C)/d),_=0;_<p.inChannels;++_)for(var O=0;O<p.outChannels;++O){for(var F=0,D=0;D<p.batchSize;++D)for(var M=T;M<E;++M)for(var L=S+M*f-x,z=A;z<R;++z){var P=C+z*d-b;F+=g?I.get(D,L,P,_)*N.get(D,M,z,O):I.get(D,_,L,P)*N.get(D,O,M,z)}y.set(F,S,C,_,O)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var Vxe={kernelName:n1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode;sge([a,i],"conv2dBackpropInput");var h=i0(i.shape),p=i0(a.shape),f=q8(c),d=D8(o,i.shape,s,1,u,l,!1,f),v=new $4(d.inShape,"float32"),m=v.values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,b=S(h,3),x=b[0],k=b[1],w=b[2],I=d.batchSize,N=d.filterHeight,T=d.filterWidth,E=d.inChannels,C=d.inHeight,A=d.inWidth,R=d.outChannels,_=d.outHeight,O=d.outWidth,F=d.strideHeight,D=d.strideWidth;f=d.dataFormat;for(var M=N-1-d.padInfo.top,L=T-1-d.padInfo.left,z="channelsLast"===f,P=v.strides[0],B=z?v.strides[1]:v.strides[2],W=z?v.strides[2]:1,U=z?1:v.strides[1],V=p[0],G=z?p[1]:p[2],j=z?p[2]:1,H=z?1:p[1],q=0;q<I;++q)for(var K=0;K<E;++K)for(var X=0;X<C;++X)for(var Y=X-M,J=Math.max(0,Math.ceil(Y/F)),Z=Math.min(_,(N+Y)/F),Q=0;Q<A;++Q){for(var $=Q-L,ee=Math.max(0,Math.ceil($/D)),te=Math.min(O,(T+$)/D),ne=0,re=J;re<Z;++re)for(var ae=re*F-Y,ie=ee;ie<te;++ie)for(var oe=V*q+G*re+j*ie,se=x*(N-1-ae)+k*(T-1-(ie*D-$))+w*K,ue=0;ue<R;++ue){ne+=g[oe+H*ue]*y[se+ue]}m[P*q+B*X+W*Q+U*K]=ne}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var Gxe={kernelName:r1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;sge([a,i],"conv3d");for(var c=M8(a.shape,i.shape,o,u,s),l=c.filterDepth,h=c.filterHeight,p=c.filterWidth,f=c.dilationDepth,d=c.dilationHeight,v=c.dilationWidth,m=c.padInfo,g=m.front,y=m.left,b=m.top,x=new $4(c.outShape,a.dtype),k=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,I=x.values,N=i0(a.shape),S=i0(i.shape),T=0;T<c.batchSize;++T)for(var E=T*N[0],C=T*x.strides[0],A=0;A<c.outDepth;++A)for(var R=C+A*x.strides[1],_=A*c.strideDepth-g,O=0;O<l;++O){var F=_+O*f;if(!(F<0||F>=c.inDepth))for(var D=O*S[0],M=E+F*N[1],L=0;L<c.outHeight;++L)for(var z=R+L*x.strides[2],P=L*c.strideHeight-b,B=0;B<h;++B){var W=P+B*d;if(!(W<0||W>=c.inHeight))for(var U=D+B*S[1],V=M+W*N[2],G=0;G<c.outWidth;++G)for(var j=z+G*c.outChannels,H=G*c.strideWidth-y,q=0;q<p;++q){var K=H+q*v;if(!(K<0||K>=c.inWidth))for(var X=U+q*S[2],Y=V+K*c.inChannels,J=X,Z=0;Z<c.inChannels;++Z){for(var Q=k[Y+Z],$=0;$<c.outChannels;++$)I[j+$]+=Q*w[J+$];J+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var jxe={kernelName:a1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape;sge([a,i],"conv3dBackpropFilterV2");for(var c=i0(a.shape),l=i0(i.shape),h=M8(a.shape,u,o,1,s),p=h.strideDepth,f=h.strideHeight,d=h.strideWidth,v=h.filterDepth,m=h.filterHeight,g=h.filterWidth,y=new $4(h.filterShape,"float32"),b=y.values,x=S(y.strides,4),k=x[0],w=x[1],I=x[2],N=x[3],T=n.data.get(i.dataId).values,E=S(l,4),C=E[0],A=E[1],R=E[2],_=E[3],O=n.data.get(a.dataId).values,F=S(c,4),D=F[0],M=F[1],L=F[2],z=F[3],P=h.padInfo.front,B=h.padInfo.left,W=h.padInfo.top,U=0;U<v;++U)for(var V=Math.max(0,Math.ceil((P-U)/p)),G=Math.min(h.outDepth,(h.inDepth+P-U)/p),j=U*k,H=0;H<m;++H)for(var q=Math.max(0,Math.ceil((W-H)/f)),K=Math.min(h.outHeight,(h.inHeight+W-H)/f),X=H*w+j,Y=0;Y<g;++Y)for(var J=Math.max(0,Math.ceil((B-Y)/d)),Z=Math.min(h.outWidth,(h.inWidth+B-Y)/d),Q=Y*I+X,$=0;$<h.inChannels;++$)for(var ee=$*N+Q,te=0;te<h.outChannels;++te){for(var ne=0,re=0;re<h.batchSize;++re)for(var ae=re*D,ie=re*C,oe=V;oe<G;++oe)for(var se=(U+oe*p-P)*M+ae,ue=oe*A+ie,ce=q;ce<K;++ce)for(var le=(H+ce*f-W)*L+se,he=ce*R+ue,pe=J;pe<Z;++pe){var fe=pe*_+he;ne+=O[(Y+pe*d-B)*z+le+$]*T[fe+te]}b[ee+te]=ne}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var Hxe={kernelName:i1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape;sge([a],"conv3dBackpropInputV2");for(var c=i0(a.shape),l=i0(i.shape),h=M8(u,i.shape,s,1,o),p=new $4(h.inShape,"float32"),f=p.values,d=S(p.strides,4),v=d[0],m=d[1],g=d[2],y=d[3],b=n.data.get(a.dataId).values,x=S(c,4),k=x[0],w=x[1],I=x[2],N=x[3],T=n.data.get(i.dataId).values,E=S(l,4),C=E[0],A=E[1],R=E[2],_=E[3],O=h.batchSize,F=h.filterDepth,D=h.filterHeight,M=h.filterWidth,L=h.inChannels,z=h.inDepth,P=h.inHeight,B=h.inWidth,W=h.outChannels,U=h.outDepth,V=h.outHeight,G=h.outWidth,j=h.strideDepth,H=h.strideHeight,q=h.strideWidth,K=F-1-h.padInfo.front,X=D-1-h.padInfo.top,Y=M-1-h.padInfo.left,J=0;J<O;++J)for(var Z=0;Z<L;++Z)for(var Q=0;Q<z;++Q)for(var $=Q-K,ee=Math.max(0,Math.ceil($/j)),te=Math.min(U,(F+$)/j),ne=0;ne<P;++ne)for(var re=ne-X,ae=Math.max(0,Math.ceil(re/H)),ie=Math.min(V,(D+re)/H),oe=0;oe<B;++oe){for(var se=oe-Y,ue=Math.max(0,Math.ceil(se/q)),ce=Math.min(G,(M+se)/q),le=0,he=ee;he<te;++he)for(var pe=he*j-$,fe=ae;fe<ie;++fe)for(var de=fe*H-re,ve=ue;ve<ce;++ve)for(var me=k*J+w*he+I*fe+N*ve,ge=C*(F-1-pe)+A*(D-1-de)+R*(M-1-(ve*q-se))+_*Z,ye=0;ye<W;++ye){le+=b[me+ye]*T[ge+ye]}f[v*J+m*Q+g*ne+y*oe+Z]=le}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},qxe=Mge(o1,(function(e){return Math.cos(e)})),Kxe={kernelName:o1,backendName:"cpu",kernelFunc:qxe},Xxe=Mge(s1,(function(e){return Math.cosh(e)})),Yxe={kernelName:s1,backendName:"cpu",kernelFunc:Xxe};var Jxe={kernelName:l1,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=S(a.shape,4),h=l[0],p=l[1],f=l[2],d=l[3],v=i.shape[0],m=S(s,2),g=m[0],y=m[1],b=l8([v,g,y,d],"float32"),x=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,w=n.data.get(a.dataId).values,I=i0(a.shape),N=i0(b.shape),T=0;T<v;T++){var E=4*T,C=x[E],A=x[E+1],R=x[E+2],_=x[E+3],O=k[T];if(!(O>=h))for(var F=g>1?(R-C)*(p-1)/(g-1):0,D=y>1?(_-A)*(f-1)/(y-1):0,M=0;M<g;M++){var L=g>1?C*(p-1)+M*F:.5*(C+R)*(p-1);if(L<0||L>p-1)for(var z=0;z<y;z++)for(var P=0;P<d;P++){var B=P+z*N[2]+M*N[1]+T*N[0];b.values[B]=c}else if("bilinear"===u)for(var W=Math.floor(L),U=Math.ceil(L),V=L-W,G=0;G<y;G++){var j=y>1?A*(f-1)+G*D:.5*(A+_)*(f-1);if(j<0||j>f-1)for(var H=0;H<d;H++){var q=H+G*N[2]+M*N[1]+T*N[0];b.values[q]=c}else for(var K=Math.floor(j),X=Math.ceil(j),Y=j-K,J=0;J<d;J++){var Z=J+K*I[2]+W*I[1]+O*I[0],Q=w[Z],$=w[Z=J+X*I[2]+W*I[1]+O*I[0]],ee=w[Z=J+K*I[2]+U*I[1]+O*I[0]],te=Q+($-Q)*Y,ne=ee+(w[Z=J+X*I[2]+U*I[1]+O*I[0]]-ee)*Y;Z=J+G*N[2]+M*N[1]+T*N[0],b.values[Z]=te+(ne-te)*V}}else for(var re=0;re<y;++re){var ae=y>1?A*(f-1)+re*D:.5*(A+_)*(f-1);if(ae<0||ae>f-1)for(var ie=0;ie<d;ie++){var oe=ie+re*N[2]+M*N[1]+T*N[0];b.values[oe]=c}else for(var se=Math.round(ae),ue=Math.round(L),ce=0;ce<d;ce++){var le=ce+se*I[2]+ue*I[1]+O*I[0],he=ce+re*N[2]+M*N[1]+T*N[0];b.values[he]=w[le]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var Zxe={kernelName:u1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;sge(a,"cumprod");var u=$7([i],a.shape.length),c=a;null!=u&&(c=zye({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=t9(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var h=h5(c.dtype,"int32"),p=c0(L$(c.shape),h),f=n.data.get(c.dataId).values,d=c.shape[c.shape.length-1],v=s?function(e,t){return e+d-t-1}:function(e,t){return e+t},m=0;m<f.length;m+=d)for(var g=0;g<d;g++){var y=v(m,g);if(0===g)p[y]=o?1:f[y];else{var b=v(m,g-1);p[y]=o?f[b]*p[b]:f[y]*p[b]}}var x=n.makeTensorInfo(c.shape,h,p);if(null!=u){var k=zye({inputs:{x:x},backend:n,attrs:{perm:e9(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),k}return x}};var Qxe={kernelName:c1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;sge(a,"cumsum");var u=$7([i],a.shape.length),c=a;null!=u&&(c=zye({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=t9(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var h=h5(c.dtype,"int32"),p=l0(L$(c.shape),h),f=n.data.get(c.dataId).values,d=c.shape[c.shape.length-1],v=s?function(e,t){return e+d-t-1}:function(e,t){return e+t},m=0;m<f.length;m+=d)for(var g=0;g<d;g++){var y=v(m,g);if(0===g)p[y]=o?0:f[y];else{var b=v(m,g-1);p[y]=o?f[b]+p[b]:f[y]+p[b]}}var x=n.makeTensorInfo(c.shape,h,p);if(null!=u){var k=zye({inputs:{x:x},backend:n,attrs:{perm:e9(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),k}return x}};var $xe={kernelName:h1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=Age(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var c=Rge(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var eke={kernelName:p1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;F$("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],h=u*i,p=c*i,f=l/(i*i),d=n.data.get(a.dataId).values,v=new Float32Array(s*h*p*f),m=0,g=0;g<s;++g)for(var y=0;y<h;++y)for(var b=Math.floor(y/i),x=y%i,k=0;k<p;++k)for(var w=Math.floor(k/i),I=(x*i+k%i)*f,N=0;N<f;++N){var S=N+I+l*(w+c*(b+u*g));v[m++]=d[S]}return n.makeTensorInfo([s,h,p,f],a.dtype,v)}};function tke(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;sge([a,i],"depthwiseConv2DNative");var l=i0(a.shape),h=i0(i.shape),p=u;null==p&&(p=[1,1]),F$(j8(o,p),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(p,"'")}));for(var f=D8(a.shape,i.shape,o,p,s,c,!0),d=f.filterHeight,v=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,y=f.padInfo,b=y.left,x=y.top,k=f.outChannels/f.inChannels,w=new $4(f.outShape,a.dtype),I=n.data.get(a.dataId).values,N=n.data.get(i.dataId).values,S=w.values,T=0;T<f.batchSize;++T)for(var E=T*l[0],C=T*w.strides[0],A=0;A<f.outHeight;++A)for(var R=C+A*w.strides[1],_=A*f.strideHeight-x,O=0;O<d;++O){var F=_+O*m;if(!(F<0||F>=f.inHeight))for(var D=O*h[0],M=E+F*l[1],L=0;L<f.outWidth;++L)for(var z=R+L*w.strides[2],P=L*f.strideWidth-b,B=0;B<v;++B){var W=P+B*g;if(!(W<0||W>=f.inWidth))for(var U=D+B*h[1],V=M+W*f.inChannels,G=z,j=U,H=0;H<f.inChannels;++H){for(var q=I[V+H],K=0;K<k;++K)S[G+K]+=q*N[j+K];G+=k,j+=k}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var nke={kernelName:f1,backendName:"cpu",kernelFunc:tke};var rke={kernelName:d1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;sge([a,i],"depthwiseConv2dNativeBackpropFilter");for(var h=D8(a.shape,l,o,s,u,c,!0),p=h.strideHeight,f=h.strideWidth,d=h.filterHeight,v=h.filterWidth,m=new $4(h.filterShape,"float32"),g=h.padInfo.left,y=h.padInfo.top,b=h.outChannels/h.inChannels,x=n.data.get(a.dataId).values,k=new $4(a.shape,a.dtype,x),w=n.data.get(i.dataId).values,I=new $4(i.shape,i.dtype,w),N=0;N<d;++N)for(var S=Math.max(0,Math.ceil((y-N)/p)),T=Math.min(h.outHeight,(h.inHeight+y-N)/p),E=0;E<v;++E)for(var C=Math.max(0,Math.ceil((g-E)/f)),A=Math.min(h.outWidth,(h.inWidth+g-E)/f),R=0;R<h.outChannels;++R){for(var _=Math.trunc(R/b),O=R%b,F=0,D=0;D<h.batchSize;++D)for(var M=S;M<T;++M)for(var L=N+M*p-y,z=C;z<A;++z){var P=E+z*f-g;F+=k.get(D,L,P,_)*I.get(D,M,z,R)}m.set(F,N,E,_,O)}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var ake={kernelName:v1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape;sge([a,i],"depthwiseConv2DNativeBackpropInput");for(var h=i0(a.shape),p=i0(i.shape),f=D8(l,i.shape,o,s,u,c,!0),d=new $4(f.inShape,"float32"),v=d.values,m=S(d.strides,3),g=m[0],y=m[1],b=m[2],x=n.data.get(a.dataId).values,k=S(h,3),w=k[0],I=k[1],N=k[2],T=n.data.get(i.dataId).values,E=S(p,3),C=E[0],A=E[1],R=E[2],_=f.batchSize,O=f.filterHeight,F=f.filterWidth,D=f.inChannels,M=f.inHeight,L=f.inWidth,z=f.outChannels,P=f.outHeight,B=f.outWidth,W=f.strideHeight,U=f.strideWidth,V=O-1-f.padInfo.top,G=F-1-f.padInfo.left,j=z/D,H=0;H<_;++H)for(var q=0;q<D;++q)for(var K=0;K<M;++K)for(var X=K-V,Y=Math.max(0,Math.ceil(X/W)),J=Math.min(P,(O+X)/W),Z=0;Z<L;++Z){for(var Q=Z-G,$=Math.max(0,Math.ceil(Q/U)),ee=Math.min(B,(F+Q)/U),te=0,ne=Y;ne<J;++ne)for(var re=ne*W-X,ae=$;ae<ee;++ae)for(var ie=w*H+I*ne+N*ae,oe=C*(O-1-re)+A*(F-1-(ae*U-Q))+R*q,se=0;se<j;++se){te+=x[ie+(q*j+se)]*T[oe+se]}v[g*H+y*K+b*Z+q]=te}return n.makeTensorInfo(d.shape,d.dtype,d.values)}};var ike={kernelName:m1,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=L$(r.shape),i=n.data.get(r.dataId).values,o=l8([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var c=[].concat(T(r.shape),T(r.shape));return n.makeTensorInfo(c,o.dtype,o.values)}},oke={kernelName:g1,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,h=a.shape.length,p=c.data.get(i.dataId).values,f=i.shape.length,d=_8(a.shape,i.shape,o,s,"NHWC",u),v=d.batchSize,m=d.inHeight,g=d.inWidth,y=d.inChannels,b=d.outHeight,x=d.outWidth,k=d.padInfo,w=d.strideHeight,I=d.strideWidth,N=d.filterHeight,S=d.filterWidth,T=d.dilationHeight,E=d.dilationWidth,C=d.outShape,A=L$(C),R=C.length,_=K$(a.dtype,A),O=0;O<v;++O)for(var F=0;F<b;++F)for(var D=F*w-k.top,M=0;M<x;++M)for(var L=M*I-k.left,z=0;z<y;++z){for(var P=Number.MIN_SAFE_INTEGER,B=0;B<N;++B){var W=D+B*T;if(W>=0&&W<m)for(var U=0;U<S;++U){var V=L+U*E;if(V>=0&&V<g){var G=f0([O,W,V,z],h,i0(a.shape)),j=f0([B,U,z],f,i0(i.shape)),H=l[G]+p[j];H>P&&(P=H)}}}_[f0([O,F,M,z],R,i0(C))]=P}return{dataId:c.write(L4(_,a.dtype),C,a.dtype),shape:C,dtype:a.dtype}}},ske={kernelName:b1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,h=s0(a.shape,l.data.get(a.dataId).values),p=s0(i.shape,l.data.get(i.dataId).values),f=_8(a.shape,i.shape,s,u,"NHWC",c),d=f.batchSize,v=f.inHeight,m=f.inWidth,g=f.inChannels,y=f.outHeight,b=f.outWidth,x=f.padInfo,k=f.strideHeight,w=f.strideWidth,I=f.filterHeight,N=f.filterWidth,S=f.dilationHeight,T=f.dilationWidth,E=f.outShape;F$(o.rank===E.length,(function(){return"Error in ".concat(b1,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(o.rank)}));for(var C=s0(E,l.data.get(o.dataId).values),A=h0(i.shape,i.dtype),R=0;R<d;++R)for(var _=0;_<y;++_)for(var O=_*k-x.top,F=0;F<b;++F)for(var D=F*w-x.left,M=0;M<g;++M){for(var L=Number.MIN_SAFE_INTEGER,z=0,P=0,B=0;B<I;++B){var W=O+B*S;if(W>=0&&W<v)for(var U=0;U<N;++U){var V=D+U*T;if(V>=0&&V<m){var G=h[R][W][V][M]+p[B][U][M];G>L&&(L=G,z=B,P=U)}}}A[z][P][M]+=C[R][_][F][M]}return{dataId:l.write(L4(A,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},uke={kernelName:y1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,h=s0(a.shape,l.data.get(a.dataId).values),p=s0(i.shape,l.data.get(i.dataId).values),f=_8(a.shape,i.shape,s,u,"NHWC",c),d=f.batchSize,v=f.inHeight,m=f.inWidth,g=f.inChannels,y=f.outHeight,b=f.outWidth,x=f.padInfo,k=f.strideHeight,w=f.strideWidth,I=f.filterHeight,N=f.filterWidth,S=f.dilationHeight,T=f.dilationWidth,E=f.outShape;F$(o.rank===E.length,(function(){return"Error in ".concat(y1,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(o.rank)}));for(var C=s0(E,l.data.get(o.dataId).values),A=h0(a.shape,a.dtype),R=0;R<d;++R)for(var _=0;_<y;++_)for(var O=_*k-x.top,F=0;F<b;++F)for(var D=F*w-x.left,M=0;M<g;++M){for(var L=Number.MIN_SAFE_INTEGER,z=O<0?0:O,P=D<0?0:D,B=0;B<I;++B){var W=O+B*S;if(W>=0&&W<v)for(var U=0;U<N;++U){var V=D+U*T;if(V>=0&&V<m){var G=h[R][W][V][M]+p[B][U][M];G>L&&(L=G,z=W,P=V)}}}A[R][z][P][M]+=C[R][_][F][M]}return{dataId:l.write(L4(A,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};var cke={kernelName:x1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=r.canvas,o=r.options||{},s=o.contextOptions,u=o.imageOptions,c=(null==u?void 0:u.alpha)||1,l=(null==s?void 0:s.contextType)||"2d";if("2d"!==l)throw new Error("Context type ".concat(s.contextType," is not supported by the CPU backend."));var h=i.getContext(l,(null==s?void 0:s.contextAttributes)||{});if(null==h)throw new Error("Could not get the context with ".concat(l," type."));for(var p=S(a.shape.slice(0,2),2),f=p[0],d=p[1],v=2===a.shape.length?1:a.shape[2],m=n.data.get(a.dataId).values,g="float32"===a.dtype?255:1,y=new Uint8ClampedArray(d*f*4),b=0;b<f*d;++b){for(var x=[0,0,0,255*c],k=0;k<v;k++){var w=m[b*v+k];if("float32"===a.dtype){if(w<0||w>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(w,"."))}else if("int32"===a.dtype&&(w<0||w>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(w,"."));1===v?(x[0]=w*g,x[1]=w*g,x[2]=w*g):x[k]=w*g}var I=4*b;y[I+0]=Math.round(x[0]),y[I+1]=Math.round(x[1]),y[I+2]=Math.round(x[2]),y[I+3]=Math.round(x[3])}i.width=d,i.height=f;var N=new ImageData(y,d,f);return h.putImageData(N,0,0),a}};function lke(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;sge(i,"sum");var u=(t="bool"===i.dtype?kge({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):mge({inputs:{x:i},backend:r})).shape.length,c=j$(o,t.shape),l=$7(c,u),h=c,p=t;null!=l&&(p=zye({inputs:{x:t},backend:r,attrs:{perm:l}}),h=t9(h.length,u)),Q7("sum",h,p.shape.length);for(var f=S(J7(p.shape,h),2),d=f[0],v=f[1],m=vge(r,d,h5(p.dtype,"int32")),g=L$(v),y=r.data.get(m.dataId).values,b=r.data.get(p.dataId).values,x=0;x<y.length;++x){for(var k=x*g,w=0,I=0;I<g;++I)w+=b[k+I];y[x]=w}if(s){var N=m;m=Jbe({inputs:{x:m},backend:r,attrs:{shape:Z7(m.shape,c)}}),r.disposeIntermediateTensorInfo(N)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(p),m}var hke={kernelName:a3,backendName:"cpu",kernelFunc:lke};var pke={kernelName:w1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=Lie(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;Pie(i.length,s,r);for(var u=Bie(o,s),c=u.path,l=u.steps,h=l.length,p=null,f=i.length,d=[],v=0;v<h;++v){var m,g=O(l[v]);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=zie(f,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;Wie(x)?w=r[y]:(w=zye({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),d.push(w));for(var I=w.shape.slice(),N=0;N<k.length;++N)I.splice(k[N],0,1);P$(w.shape,I)||(w=Jbe({inputs:{x:w},backend:n,attrs:{shape:I}}),d.push(w)),null===p?p=w:(p=Aye({inputs:{a:w,b:p},backend:n}),d.push(p))}}catch(e){g.e(e)}finally{g.f()}v<h-1&&(c[v]>=0&&(p=lke({inputs:{x:p},backend:n,attrs:{axis:c[v]-(i.length-f),keepDims:!1}}),d.push(p)),f--)}for(var S=0,T=d;S<T.length;S++){var E=T[S];E!==p&&n.disposeIntermediateTensorInfo(E)}return p}};var fke={kernelName:N1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;sge([r,a],"eluGrad");for(var i=new Float32Array(L$(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var c=o[u];i[u]=c>=0?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",i)}},dke=Mge(S1,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))})),vke={kernelName:S1,backendName:"cpu",kernelFunc:dke};function mke(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(F$(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),Jbe({inputs:{x:a},backend:n,attrs:{shape:s}})}var gke={kernelName:C1,backendName:"cpu",kernelFunc:mke},yke=pge((function(e,t){return e/t})),bke=Ige(k1,yke),xke={kernelName:k1,backendName:"cpu",kernelFunc:bke};function kke(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,c=[a,i],l=L$(c),h=q$("float32",l),p=q$("float32",l),f=0;f<a;f++){for(var d=sbe({inputs:{x:s},backend:n,attrs:{begin:[f,0],size:[1,i]}}),v=sbe({inputs:{x:u},backend:n,attrs:{begin:[f,0],size:[1,i]}}),m=fge({inputs:{real:d,imag:v},backend:n}),g=wke(m,t,n),y=Tie(g.real,g.imag),b=0;b<i;b++){var x=Rie(y,b);h[f*i+b]=x.real,p[f*i+b]=x.imag}n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m)}var k=n.makeTensorInfo(c,"float32",h),w=n.makeTensorInfo(c,"float32",p),I=fge({inputs:{real:k,imag:w},backend:n});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),I}function wke(e,t,n){var r=L$(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0==((g=r)&g-1)){var s=Ike(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var c=n.makeTensorInfo(u,"float32",s.real),l=n.makeTensorInfo(u,"float32",s.imag),h=n.makeTensorInfo([],"float32",M4(r,"float32")),p=mge({inputs:{x:h},backend:n}),f=xke.kernelFunc({inputs:{a:c,b:h},backend:n}),d=xke.kernelFunc({inputs:{a:l,b:p},backend:n}),v=n.data.get(f.dataId).values,m=n.data.get(d.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),{real:v,imag:m}}return s}var g,y=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=Fie(a*s,t,n),c=Rie(e,s);i+=c.real*u.real-c.imag*u.imag,o+=c.real*u.imag+c.imag*u.real}n&&(i/=t,o/=t),_ie(r,i,o,a)}return r}(Tie(i,o),r,t);return Eie(y)}function Ike(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=Tie(e,t),o=n/2,s=Cie(i),u=s.real,c=s.imag,l=[u.length],h=a.makeTensorInfo(l,"float32",u),p=a.makeTensorInfo(l,"float32",c),f=fge({inputs:{real:h,imag:p},backend:a}),d=Aie(i),v=d.real,m=d.imag,g=[v.length],y=a.makeTensorInfo(g,"float32",v),b=a.makeTensorInfo(g,"float32",m),x=fge({inputs:{real:y,imag:b},backend:a}),k=Ike(u,c,o,r,a),w=k.real,I=k.imag,N=[w.length],S=a.makeTensorInfo(N,"float32",w),T=a.makeTensorInfo(N,"float32",I),E=fge({inputs:{real:S,imag:T},backend:a}),C=Ike(v,m,o,r,a),A=C.real,R=C.imag,_=[A.length],O=a.makeTensorInfo(_,"float32",A),F=a.makeTensorInfo(_,"float32",R),D=fge({inputs:{real:O,imag:F},backend:a}),M=Oie(n,r),L=[M.real.length],z=a.makeTensorInfo(L,"float32",M.real),P=a.makeTensorInfo(L,"float32",M.imag),B=fge({inputs:{real:z,imag:P},backend:a}),W=Aye({inputs:{a:B,b:D},backend:a}),U=Ege({inputs:{a:E,b:W},backend:a}),V=Abe({inputs:{a:E,b:W},backend:a}),G=yge({inputs:{input:U},backend:a}),j=yge({inputs:{input:V},backend:a}),H=Mxe({inputs:{input:U},backend:a}),q=Mxe({inputs:{input:V},backend:a}),K=zxe({inputs:[G,j],backend:a,attrs:{axis:0}}),X=zxe({inputs:[H,q],backend:a,attrs:{axis:0}}),Y=a.data.get(K.dataId).values,J=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(X),{real:Y,imag:J}}var Nke={kernelName:R1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=L$(r.shape),i=r.shape[r.shape.length-1],o=Jbe({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=kke(o,!1,n),u=Jbe({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};function Ske(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||n0(a),o=K$(i,L$(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var Tke={kernelName:_1,backendName:"cpu",kernelFunc:Ske};var Eke={kernelName:O1,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=q$(r.dtype,L$(r.shape)),o=S(r.shape,4),s=o[0],u=o[1],c=o[2],l=o[3],h=a.data.get(r.dataId).values,p=0;p<s;p++)for(var f=p*c*u*l,d=0;d<u;d++)for(var v=d*(c*l),m=0;m<c;m++)for(var g=m*l,y=0;y<l;y++){var b=Math.round(c-m-1),x=f+v+g+y,k=h[x];if(b>=0&&b<c)k=h[f+v+b*l+y];i[x]=k}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};var Cke={kernelName:M3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,h=r.dilations,p=r.dimRoundingMode,f=r.activation,d=r.leakyreluAlpha,v=Bxe({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:h,dimRoundingMode:p}});if(o){var m=v;if("NCHW"===l&&1===o.shape.length&&1!==o.shape[0]){var g=Jbe({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=Ege({inputs:{a:v,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else v=Ege({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(m)}if(f){var y=v;if("NCHW"===l&&"prelu"===f&&1===s.shape.length&&1!==s.shape[0]){var b=Jbe({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});v=Ybe(n,v,f,b,d),n.disposeIntermediateTensorInfo(b)}else v=Ybe(n,v,f,s,d);n.disposeIntermediateTensorInfo(y)}return v}};var Ake={kernelName:L3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,h=r.dilations,p=r.dimRoundingMode,f=r.activation,d=r.leakyreluAlpha,v=tke({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:h,dimRoundingMode:p}});if(o){var m=v;v=Ege({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(f){var g=v;v=Ybe(n,v,f,s,d),n.disposeIntermediateTensorInfo(g)}return v}};var Rke={kernelName:z1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=L$(r.shape),o=a.shape,s=o[o.length-1],u=S(Mae(r,a),4),c=u[0],l=u[1],h=u[2],p=u[3];if(0===l)return n.makeTensorInfo(c,r.dtype,[]);var f=nye(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,l,s,h,p,r.shape,i);return n.makeTensorInfo(c,r.dtype,f.values)}};var _ke={kernelName:L1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;sge([a,i],"gatherV2");for(var u=j$(o,a.shape)[0],c=n.data.get(i.dataId).values,l=a.shape[u],h=function(){var e=c[p];F$(e<=l-1&&e>=0,(function(){return"GatherV2: the index value ".concat(e," is not in [0, ").concat(l-1,"]")}))},p=0;p<c.length;++p)h();var f=s;null==s&&(f=0);var d=L$(i.shape),v=roe(a,i,u,f),m=Jbe({inputs:{x:a},backend:n,attrs:{shape:[v.batchSize,v.outerSize,v.dimSize,v.sliceSize]}}),g=Jbe({inputs:{x:i},backend:n,attrs:{shape:[v.batchSize,d/v.batchSize]}}),y=[v.batchSize,v.outerSize,d/v.batchSize,v.sliceSize],b=n.bufferSync(g),x=rye(n.bufferSync(m),b,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(v.outputShape,x.dtype,x.values)}};var Oke={kernelName:U1,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=L$(r.shape),i=r.shape[r.shape.length-1],o=Jbe({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=kke(o,!0,n),u=Jbe({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},Fke=Mge(G1,(function(e){return Number.isFinite(e)?1:0}),"bool"),Dke={kernelName:G1,backendName:"cpu",kernelFunc:Fke},Mke=Mge(j1,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),Lke={kernelName:j1,backendName:"cpu",kernelFunc:Mke},zke=Mge(H1,(function(e){return Number.isNaN(e)?1:0}),"bool"),Pke={kernelName:H1,backendName:"cpu",kernelFunc:zke};var Bke={kernelName:Y1,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=mye(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},Wke=Mge(Z1,(function(e){return Math.log1p(e)})),Uke={kernelName:Z1,backendName:"cpu",kernelFunc:Wke},Vke=pge((function(e,t){return e&&t})),Gke=Ige(Q1,Vke,null,"bool"),jke={kernelName:Q1,backendName:"cpu",kernelFunc:Gke},Hke=Mge($1,(function(e){return e?0:1}),"bool"),qke={kernelName:$1,backendName:"cpu",kernelFunc:Hke},Kke=pge((function(e,t){return e||t})),Xke=Ige(e2,Kke,null,"bool"),Yke={kernelName:e2,backendName:"cpu",kernelFunc:Xke};var Jke={kernelName:n2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;sge(a,"LRN");var c=a.shape[3],l=c-1,h=n.data.get(a.dataId).values,p=L$(a.shape),f=new Float32Array(p);function d(e){for(var t=e%c,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,l),a=0;n<=r;n++){var o=h[n];a+=o*o}return a}for(var v=0;v<p;v++){var m=d(v),g=h[v]*Math.pow(o+s*m,-u);f[v]=g}return n.makeTensorInfo(a.shape,a.dtype,f)}};var Zke={kernelName:r2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;sge(o,"LRNGrad");for(var h=L$(o.shape),p=o.shape[3],f=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,m=new Float32Array(h),g=h,y=0;y<g;y++){for(var b=y%p,x=y-b+Math.max(0,b-s),k=y-b+Math.min(p,b+s+1),w=0,I=x;I<k;I++)w+=Math.pow(d[I],2);w=c*w+u;for(var N=x;N<k;N++){var S=-2*c*l*d[N]*v[y]/w;y===N&&(S+=Math.pow(w,-l)),S*=f[y],m[N]+=S}}return n.makeTensorInfo(o.shape,a.dtype,m)}};function Qke(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,u=a.shape,c=u.length,l=j$(i,u),h=l,p=$7(h,c),f=s.data.get(a.dataId).values;if(null!=p){for(var d=new Array(c),v=0;v<d.length;v++)d[v]=u[p[v]];f=Lye(f,u,a.dtype,p,d),h=t9(h.length,c),u=d}sge(a,"max"),Q7("max",h,c);var m=S(J7(u,h),2),g=m[0],y=xye(f,L$(m[1]),g,a.dtype),b=s.write(y,g,a.dtype),x=g;o&&(x=Z7(g,l));return{dataId:b,shape:x,dtype:a.dtype}}var $ke={kernelName:a2,backendName:"cpu",kernelFunc:Qke};var ewe={kernelName:o2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;sge(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;F$(j8(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=O8(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&P$(l.inShape,l.outShape))c=mge({inputs:{x:a},backend:n});else{var h=n.data.get(a.dataId).values,p=i0(a.shape),f=kxe(h,a.shape,a.dtype,p,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,f.values)}return c}};var twe={kernelName:u2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;sge(a,"maxPool3d");var l=F8(a.shape,i,o,1,s,u,c),h=Ixe(n.data.get(a.dataId).values,a.shape,a.dtype,i0(a.shape),l,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}};var nwe={kernelName:c2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;sge([a,i],"maxPool3DGrad");for(var l=F8(i.shape,o,s,1,u,c),h=function(e,t){for(var n=l8(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=t.padInfo.front,f=t.padInfo.top,d=t.padInfo.left,v=0;v<t.batchSize;++v)for(var m=0;m<t.inChannels;++m)for(var g=0;g<t.outDepth;++g){for(var y=g*r-p,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,c+y),k=0;k<t.outHeight;++k){for(var w=k*a-f,I=w;I<0;)I+=s;for(var N=Math.min(t.inHeight,l+w),S=0;S<t.outWidth;++S){for(var T=S*i-d,E=T;E<0;)E+=u;for(var C=Math.min(t.inWidth,h+T),A=Number.NEGATIVE_INFINITY,R=-1,_=b;_<x;_+=o)for(var O=_-y,F=I;F<N;F+=s)for(var D=F-w,M=E;M<C;M+=u){var L=M-T,z=e.get(v,_,F,M,m);z>=A&&(A=z,R=O*l*h+D*l+L)}n.set(R,v,g,k,S,m)}}}return n}(n.bufferSync(i),l),p=l.strideDepth,f=l.strideHeight,d=l.strideWidth,v=l.dilationDepth,m=l.dilationHeight,g=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,k=y-1-l.padInfo.front,w=x-1-l.padInfo.left,I=b-1-l.padInfo.top,N=l8(i.shape,"float32"),S=n.bufferSync(a),T=0;T<l.batchSize;++T)for(var E=0;E<l.inChannels;++E)for(var C=0;C<l.inDepth;++C)for(var A=0;A<l.inHeight;++A)for(var R=0;R<l.inWidth;++R){for(var _=C-k,O=A-I,F=R-w,D=0,M=0;M<y;M+=v){var L=(_+M)/p;if(!(L<0||L>=l.outDepth||Math.floor(L)!==L))for(var z=0;z<b;z+=m){var P=(O+z)/f;if(!(P<0||P>=l.outHeight||Math.floor(P)!==P))for(var B=0;B<x;B+=g){var W=(F+B)/d;if(!(W<0||W>=l.outWidth||Math.floor(W)!==W)){var U=y*b*x-1-h.get(T,L,P,W,E)===M*b*x+z*x+B?1:0;if(0!==U)D+=S.get(T,L,P,W,E)*U}}}}N.set(D,T,C,A,R,E)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}};var rwe={kernelName:s2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;sge([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,h=O8(o.shape,s,u,1,c,l),p=n.data.get(o.dataId).values,f=l8(h.outShape,o.dtype,wxe(p,o.shape,o.dtype,h).values),d=h.strideHeight,v=h.strideWidth,m=h.dilationHeight,g=h.dilationWidth,y=h.effectiveFilterHeight,b=h.effectiveFilterWidth,x=b-1-h.padInfo.left,k=y-1-h.padInfo.top,w=l8(o.shape,"float32"),I=n.data.get(a.dataId).values,N=l8(a.shape,"float32",I),S=0;S<h.batchSize;++S)for(var T=0;T<h.inChannels;++T)for(var E=0;E<h.inHeight;++E)for(var C=0;C<h.inWidth;++C){for(var A=E-k,R=C-x,_=0,O=0;O<y;O+=m){var F=(A+O)/d;if(!(F<0||F>=h.outHeight||Math.floor(F)!==F))for(var D=0;D<b;D+=g){var M=(R+D)/v;if(!(M<0||M>=h.outWidth||Math.floor(M)!==M)){var L=y*b-1-f.get(S,F,M,T)===O*b+D?1:0;if(0!==L)_+=N.get(S,F,M,T)*L}}}w.set(_,S,E,C,T)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var awe={kernelName:l2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;sge(a,"MaxPoolWithArgmax");var l=c.data.get(a.dataId).values,h=O8(a.shape,i,o,[1,1],s),p=function(e,t,n,r,a){var i=kxe(e,0,n,i0(t),a,"max"),o=wxe(e,t,n,a,!0,r);return[i.values,o.values]}(l,a.shape,a.dtype,u,h),f=S(p,2),d=f[0],v=f[1],m=c.write(d,h.outShape,a.dtype),g=c.write(v,h.outShape,a.dtype);return[{dataId:m,shape:h.outShape,dtype:a.dtype},{dataId:g,shape:h.outShape,dtype:"int32"}]}};var iwe={kernelName:h2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=j$(i,a.shape),u=L$(J7(a.shape,s)[1]),c=[],l=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(l);var h=kge({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(h);var p=bke({inputs:{a:h,b:l},backend:n});c.push(p);var f=lke({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}};var owe={kernelName:p2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;sge(a,"min");var s=j$(i,a.shape),u=s,c=$7(u,a.shape.length),l=a;null!=c&&(l=zye({inputs:{x:a},backend:n,attrs:{perm:c}}),u=t9(u.length,a.shape.length)),Q7("min",u,l.shape.length);for(var h=S(J7(l.shape,u),2),p=h[0],f=L$(h[1]),d=l0(L$(p),l.dtype),v=n.data.get(l.dataId).values,m=0;m<d.length;++m){for(var g=m*f,y=v[g],b=0;b<f;++b){var x=v[g+b];(Number.isNaN(x)||x<y)&&(y=x)}d[m]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(p,l.dtype,d);if(o){var w=Jbe({inputs:{x:k},backend:n,attrs:{shape:Z7(p,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}};var swe={kernelName:d2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;sge(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=i.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===o?0:1,h=n.data.get(a.dataId).values,p=a.shape.length,f=i0(a.shape),d=L$(s),v=s.length,m=i0(s),g=q$(a.dtype,d),y=0;y<d;y++){for(var b=d0(y,v,m),x=0;x<v;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);b=b.map((function(e,t){return e-u[t]}));var k=f0(b,p,f);g[y]=h[k]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},uwe=pge((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),cwe=Ige(v2,uwe),lwe={kernelName:v2,backendName:"cpu",kernelFunc:cwe};function hwe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));var u=j$([s],a.shape),c=Qke({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=Z7(c.shape,u),h=Jbe({inputs:{x:c},backend:n,attrs:{shape:l}}),p=Abe({inputs:{a:a,b:h},backend:n}),f=Hge({inputs:{x:p},backend:n}),d=lke({inputs:{x:f},backend:n,attrs:{axis:u,keepDims:!1}}),v=Jbe({inputs:{x:d},backend:n,attrs:{shape:l}}),m=bke({inputs:{a:f,b:v},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(v),m}var pwe={kernelName:s3,backendName:"cpu",kernelFunc:hwe};var fwe={kernelName:m2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;sge(a,"multinomial");for(var u=s?a:hwe({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],h=n.data.get(u.dataId).values,p=[c,i],f=l0(L$(p),"int32"),d=0;d<c;++d){var v=d*l,m=new Float32Array(l-1);m[0]=h[v];for(var g=1;g<m.length;++g)m[g]=m[g-1]+h[v+g];for(var y=qee.alea(o.toString()),b=d*i,x=0;x<i;++x){var k=y();f[b+x]=m.length;for(var w=0;w<m.length;w++)if(k<m[w]){f[b+x]=w;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(p,"int32",f)}},dwe=qne;var vwe={kernelName:x2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;sge(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,h=dwe(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},mwe=Kne;var gwe={kernelName:k2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;sge(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,p=mwe(l,h,o,s,u,c),f=p.selectedIndices,d=p.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},ywe=Xne;var bwe={kernelName:w2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;sge(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,p=ywe(l,h,o,s,u,c),f=p.selectedIndices,d=p.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([d.length],"float32",new Float32Array(d))]}};var xwe={kernelName:N2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue;sge(a,"oneHot");var c=L$(a.shape),l=new Float32Array(c*o);l.fill(u);for(var h=n.data.get(a.dataId).values,p=0;p<c;++p)h[p]>=0&&h[p]<o&&(l[p*o+h[p]]=s);return n.makeTensorInfo([].concat(T(a.shape),[o]),i,l)}};function kwe(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=yge({inputs:{input:r},backend:n}),i=kwe({inputs:{x:a},backend:n}),o=Mxe({inputs:{input:r},backend:n}),s=kwe({inputs:{x:o},backend:n}),u=fge({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return Ske({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var wwe={kernelName:R3,backendName:"cpu",kernelFunc:kwe};var Iwe={kernelName:I2,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=yge({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=Mxe({inputs:{input:a},backend:r}),u=kwe({inputs:{x:s},backend:r}),c=fge({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return Ske({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function Nwe(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return mke({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){D$(a,e.shape,"All tensors passed to stack must have matching shapes"),F$(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=zxe({inputs:t.map((function(e){var t=mke({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var Swe={kernelName:S2,backendName:"cpu",kernelFunc:Nwe};var Twe={kernelName:T2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;sge(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=L$(a.shape),h=a.shape.length,p=i0(a.shape),f=L$(s),d=s.length,v=i0(s),m=q$(a.dtype,f);0!==o&&m.fill(o);for(var g=0;g<l;g++){m[f0(d0(g,h,p).map((function(e,t){return e+u[t]})),d,v)]=c[g]}return{dataId:n.write(m,s,a.dtype),shape:s,dtype:a.dtype}}},Ewe=pge((function(e,t){return Math.pow(e,t)})),Cwe=Ige(E2,Ewe),Awe={kernelName:E2,backendName:"cpu",kernelFunc:Cwe};var Rwe={kernelName:R2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,s=(r.outputRaggedRank,a.map((function(e){return n.data.get(e.dataId).values}))),u=a.map((function(e){return e.shape})),c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,h=S(jye(s,u,c,i.shape,i.dtype,l,o.shape),3),p=h[0],f=h[1],d=h[2],v=p.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),m=n.makeTensorInfo(d,i.dtype,f);return v.concat([m])}};var _we={kernelName:_2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=S(qye(o,r.shape,r.dtype,s,a.shape,u,i.shape),2),l=c[0],h=c[1];return[n.makeTensorInfo([l.length],"int32",l),n.makeTensorInfo([h.length],r.dtype,h)]}};var Owe={kernelName:O2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,p=s.map((function(e){return n.data.get(e.dataId).values})),f=s.map((function(e){return e.shape})),d=S(Zye(c,a.shape,l,i.shape,i.dtype,h,o.shape,p,f,u),2),v=d[0],m=d[1];return n.makeTensorInfo(v,i.dtype,m)}};var Fwe={kernelName:F2,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=Qye(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},Dwe=Mge(M2,(function(e){return 1/e})),Mwe={kernelName:M2,backendName:"cpu",kernelFunc:Dwe};var Lwe={kernelName:W2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;sge(a,"resizeBilinear");for(var u=i0(a.shape),c=S(s,2),l=c[0],h=c[1],p=S(a.shape,4),f=p[0],d=p[1],v=p[2],m=p[3],g=n.data.get(a.dataId).values,y=new Float32Array(L$([f,l,h,m])),b=[i&&l>1?d-1:d,i&&h>1?v-1:v],x=[i&&l>1?l-1:l,i&&h>1?h-1:h],k=0,w=b[0]/x[0],I=b[1]/x[1],N=0;N<f;N++)for(var T=0;T<l;T++){var E=void 0;E=o?w*(T+.5)-.5:w*T;for(var C=Math.max(0,Math.floor(E)),A=E-C,R=Math.min(d-1,Math.ceil(E)),_=N*u[0]+C*u[1],O=N*u[0]+R*u[1],F=0;F<h;F++){var D=void 0;D=o?I*(F+.5)-.5:I*F;for(var M=Math.max(0,Math.floor(D)),L=D-M,z=Math.min(v-1,Math.ceil(D)),P=_+M*u[2],B=O+M*u[2],W=_+z*u[2],U=O+z*u[2],V=0;V<m;V++){var G=g[P+V],j=g[B+V],H=G+(g[W+V]-G)*L,q=H+(j+(g[U+V]-j)*L-H)*A;y[k++]=q}}}return n.makeTensorInfo([f,l,h,m],"float32",y)}};var zwe={kernelName:U2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;sge([i,a],"resizeBilinearGrad");for(var s=i0(a.shape),u=S(a.shape,4),c=u[0],l=u[1],h=u[2],p=u[3],f=S(i.shape,3),d=f[1],v=f[2],m=new Float32Array(c*l*h*p),g=[o&&d>1?l-1:l,o&&v>1?h-1:h],y=[o&&d>1?d-1:d,o&&v>1?v-1:v],b=g[0]/y[0],x=g[1]/y[1],k=n.data.get(i.dataId).values,w=0,I=0;I<c;I++)for(var N=I*s[0],T=0;T<d;T++)for(var E=T*b,C=Math.floor(E),A=Math.min(Math.ceil(E),l-1),R=N+C*s[1],_=N+A*s[1],O=E-C,F=1-O,D=0;D<v;D++)for(var M=D*x,L=Math.floor(M),z=Math.min(Math.ceil(M),h-1),P=M-L,B=1-P,W=R+L*s[2],U=R+z*s[2],V=_+L*s[2],G=_+z*s[2],j=F*B,H=F*P,q=O*B,K=O*P,X=0;X<p;X++){var Y=k[w++];m[W+X]+=Y*j,m[U+X]+=Y*H,m[V+X]+=Y*q,m[G+X]+=Y*K}return n.makeTensorInfo([c,h,l,p],"float32",m)}};var Pwe={kernelName:P2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;sge(a,"resizeNearestNeighbor");for(var u=i0(a.shape),c=S(s,2),l=c[0],h=c[1],p=S(a.shape,4),f=p[0],d=p[1],v=p[2],m=p[3],g=n.data.get(a.dataId).values,y=new Float32Array(f*l*h*m),b=[i&&l>1?d-1:d,i&&h>1?v-1:v],x=[i&&l>1?l-1:l,i&&h>1?h-1:h],k=b[0]/x[0],w=b[1]/x[1],I=0,N=0;N<f;N++)for(var T=N*u[0],E=0;E<l;E++){var C=o?k*(E+.5):k*E,A=Math.min(d-1,i?Math.round(C):Math.floor(C));o&&(A=Math.max(0,A));for(var R=T+A*u[1],_=0;_<h;_++){var O=o?w*(_+.5):w*_,F=Math.min(v-1,i?Math.round(O):Math.floor(O));o&&(F=Math.max(0,F));for(var D=R+F*u[2],M=0;M<m;M++){var L=g[D+M];y[I++]=L}}}return n.makeTensorInfo([f,l,h,m],a.dtype,y)}};var Bwe={kernelName:B2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;sge([i,a],"resizeNearestNeighborGrad");for(var s=i0(a.shape),u=i0(i.shape),c=S(a.shape,4),l=c[0],h=c[1],p=c[2],f=c[3],d=S(i.shape,3),v=d[1],m=d[2],g=new Float32Array(l*h*p*f),y=n.data.get(i.dataId).values,b=[o&&v>1?h-1:h,o&&m>1?p-1:p],x=[o&&v>1?v-1:v,o&&m>1?m-1:m],k=b[0]/x[0],w=b[1]/x[1],I=1/k,N=1/w,T=2*Math.ceil(I)+2,E=2*Math.ceil(N)+2,C=0;C<l;C++)for(var A=C*s[0],R=0;R<h;R++)for(var _=A+R*s[1],O=Math.floor(R*I),F=Math.floor(O-T/2),D=0;D<p;D++)for(var M=_+D*s[2],L=Math.floor(D*N),z=Math.floor(L-E/2),P=0;P<f;P++){for(var B=0,W=0;W<T;W++){var U=W+F;if(!(U<0||U>=v)){var V=A+U*u[1],G=U*k;if(R===Math.min(h-1,o?Math.round(G):Math.floor(G)))for(var j=0;j<E;j++){var H=j+z;if(!(H<0||H>=m)){var q=V+H*u[2],K=H*w;D===Math.min(p-1,o?Math.round(K):Math.floor(K))&&(B+=y[q+P])}}}}g[M+P]=B}return n.makeTensorInfo(a.shape,a.dtype,g)}};var Wwe={kernelName:G2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;sge(a,"reverse");var o=a.shape.length,s=j$(i,a.shape);if(0===o)return mge({inputs:{x:a},backend:n});for(var u=new $4(a.shape,a.dtype),c=n.bufferSync(a),l=function(){var e=u.indexToLoc(h),t=e.slice();s.forEach((function(e){return t[e]=a.shape[e]-1-t[e]})),u.set.apply(u,[c.get.apply(c,T(t))].concat(T(e)))},h=0;h<u.size;h++)l();return n.makeTensorInfo(u.shape,u.dtype,u.values)}},Uwe={kernelName:F3,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=q$(a.dtype,L$(a.shape)),l=S(a.shape,4),h=l[0],p=l[1],f=l[2],d=l[3],v=S(pie(s,p,f),2),m=v[0],g=v[1],y=Math.sin(i),b=Math.cos(i),x=u.data.get(a.dataId).values,k=0;k<h;k++)for(var w=k*f*p*d,I=0;I<p;I++)for(var N=I*(f*d),T=0;T<f;T++)for(var E=T*d,C=0;C<d;C++){var A=[h,I,T,C],R=A[2],_=A[1],O=(R-m)*b-(_-g)*y,F=(R-m)*y+(_-g)*b;O=Math.round(O+m),F=Math.round(F+g);var D=o;if("number"!=typeof o&&(D=3===C?255:o[C]),O>=0&&O<f&&F>=0&&F<p)D=x[w+F*(f*d)+O*d+C];c[w+N+E+C]=D}return{dataId:u.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},Vwe=Mge(j2,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1})),Gwe={kernelName:j2,backendName:"cpu",kernelFunc:Vwe};var jwe={kernelName:q2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=Jte(0,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,h=s.strides,p=s.outputSize,f=nbe(n.bufferSync(a),n.bufferSync(i),o,p,l,c,u,h,0,!0);return n.makeTensorInfo(o,f.dtype,f.values)}};function Hwe(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function qwe(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var Kwe={kernelName:X2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=function(e,t,n,r,a,i){for(var o=K$("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),c=s*a,l=0;l<a;++l)o[c+l]="left"===i?Hwe(u,t[l+c]):qwe(u,t[l+c]);return o}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",s)}};var Xwe={kernelName:Y2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;sge([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=h5(a.dtype,i.dtype),h=l0(L$(a.shape),l),p=0,f=0===o||o>1||1===a.shape.length?1:L$(a.shape.slice(1)),d=0;d<s.length;d++)for(var v=0;v<f;v++)1===s[d]?h[p++]=u[d]:h[p++]=c[d];return n.makeTensorInfo(a.shape,l,h)}},Ywe=Mge(J2,(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)})),Jwe={kernelName:J2,backendName:"cpu",kernelFunc:Ywe},Zwe=Mge(e3,(function(e){return e<0?-1:e>0?1:0})),Qwe={kernelName:e3,backendName:"cpu",kernelFunc:Zwe},$we=Mge(Q2,(function(e){return Math.sin(e)})),eIe={kernelName:Q2,backendName:"cpu",kernelFunc:$we},tIe=Mge($2,(function(e){return Math.sinh(e)})),nIe={kernelName:$2,backendName:"cpu",kernelFunc:tIe},rIe=Math.log(1.1920928955078125e-7)+2,aIe=Mge(n3,(function(e){var t=e>-rIe,n=e<rIe,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),iIe={kernelName:n3,backendName:"cpu",kernelFunc:aIe};var oIe={kernelName:i3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;sge([a],"spaceToBatchND");var s=L$(i),u=[[0,0]];u.push.apply(u,T(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=Twe.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),h=fie(l.shape,i,s,!1),p=die(h.length,i.length,!1),f=vie(l.shape,i,s,!1),d=Jbe({inputs:{x:l},backend:n,attrs:{shape:h}}),v=zye({inputs:{x:d},backend:n,attrs:{perm:p}}),m=Jbe({inputs:{x:v},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(v),m}};var sIe={kernelName:u3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],h=S(cbe(s,r.shape,r.dtype,u,a.dtype,c,l),5),p=h[0],f=h[1],d=h[2],v=h[3],m=h[4];return[n.makeTensorInfo(f,r.dtype,p),n.makeTensorInfo([f[0]],a.dtype,d),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};var uIe={kernelName:c3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),c=S(lbe(s,r.shape,r.dtype,o,u),3),l=c[0],h=c[1],p=c[2];return[n.makeTensorInfo(h,r.dtype,l),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var cIe={kernelName:l3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=S(hbe(o,r.shape,r.dtype,s,u,!0),2),l=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,l)}};var lIe={kernelName:h3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=S(hbe(o,r.shape,r.dtype,s,u),2),l=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,l)}};var hIe={kernelName:p3,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.sparseIndices,o=n.sparseValues,s=n.defaultValue,u=a.outputShape,c=Jte(0,i,u),l=c.sliceRank,h=c.numUpdates,p=c.sliceSize,f=c.strides,d=c.outputSize,v=!1,m=r.bufferSync(i);switch(o.dtype){case"bool":t=nbe(m,r.bufferSync(o),u,d,p,h,l,f,Boolean(r.data.get(s.dataId).values[0]),v);break;case"float32":t=nbe(m,r.bufferSync(o),u,d,p,h,l,f,r.data.get(s.dataId).values[0],v);break;case"int32":t=nbe(m,r.bufferSync(o),u,d,p,h,l,f,r.data.get(s.dataId).values[0],v);break;case"string":t=nbe(m,r.bufferSync(o),u,d,p,h,l,f,W4(r.data.get(s.dataId).values[0]),v);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var pIe={kernelName:o3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=j$(r.axis,a.shape)[0],s=Vie(a,i,o),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=T(c);t[o]=e;var r=sbe({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r}))}},fIe={kernelName:d3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;sge(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},dIe=Mge(_3,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),vIe={kernelName:_3,backendName:"cpu",kernelFunc:dIe};var mIe={kernelName:m3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,h=r.newAxisMask,p=r.shrinkAxisMask;sge(a,"stridedSlice");var f,d=Jae(a.shape,i,o,s,u,c,l,h,p),v=d.finalShapeSparse,m=d.finalShape,g=d.isIdentity,y=d.sliceDim0,b=d.isSimpleSlice,x=d.begin,k=d.end,w=d.strides;if(g)f=Jbe({inputs:{x:a},backend:n,attrs:{shape:m}});else if(y||b){F$(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var I=Pae(x,k,w),N=sbe({inputs:{x:a},backend:n,attrs:{begin:x,size:I}});f=Jbe({inputs:{x:N},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(N)}else{var S=kbe(v,n.bufferSync(a),w,x);f=n.makeTensorInfo(m,S.dtype,S.values)}return f}};var gIe={kernelName:g3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,h=t.dataSplits,p=S(Ibe(n.data.get(l.dataId).values,n.data.get(h.dataId).values,a,i,o,s,u,c),2),f=p[0],d=p[1];return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",d)]}};var yIe={kernelName:y3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=S(Sbe(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),3),s=o[0],u=o[1],c=o[2],l=u.length;return[n.makeTensorInfo([l,2],"int32",s),n.makeTensorInfo([l],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(c))]}};var bIe={kernelName:b3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=Tbe(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},xIe=Mge(k3,(function(e){return Math.tan(e)})),kIe={kernelName:k3,backendName:"cpu",kernelFunc:xIe},wIe=Mge(w3,(function(e){return Math.tanh(e)}));var IIe={kernelName:K2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.tensor,a=t.indices,i=t.updates,o=Jte(0,a,r.shape),s=o.sliceRank,u=o.numUpdates,c=o.sliceSize,l=o.strides,h=o.outputSize,p=n.bufferSync(a),f=n.bufferSync(i),d=n.bufferSync(r),v=nbe(p,f,r.shape,h,c,u,s,l,d,!1);return n.makeTensorInfo(r.shape,v.dtype,v.values)}};var NIe={kernelName:I3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;sge(a,"tile");var o=_be(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}};var SIe={kernelName:N3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;sge(a,"topk");var s=S(Dbe(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),2),u=s[0],c=s[1];return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};var TIe={kernelName:S3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,u=n.fillValue,c=n.outputShape,l=S(a.shape,4),h=l[0],p=l[1],f=l[2],d=l[3],v=S(null!=c?c:[p,f],2),m=v[0],g=v[1],y=[h,m,g,d],b=i0(a.shape),x=b[0],k=b[1],w=b[2],I=i0(y),N=I[0],T=I[1],E=I[2],C=q$(a.dtype,L$(y));C.fill(u);for(var A=r.data.get(a.dataId).values,R=r.data.get(i.dataId).values,_=0;_<h;++_){for(var O=1===i.shape[0]?R:R.subarray(8*_,8*_+8),F=0;F<m;++F)for(var D=0;D<g;++D)for(var M=0;M<d;++M){var L=void 0,z=O[6]*D+O[7]*F+1;if(0!==z){var P=(O[0]*D+O[1]*F+O[2])/z,B=(O[3]*D+O[4]*F+O[5])/z,W=EIe(P,f,s),U=EIe(B,p,s);switch(o){case"nearest":L=AIe(A,p,f,x,k,w,_,U,W,M,u);break;case"bilinear":L=RIe(A,p,f,x,k,w,_,U,W,M,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}C[_*N+F*T+D*E+M]=L}}return r.makeTensorInfo(y,a.dtype,C)}return{dataId:r.write(C,y,a.dtype),shape:a.shape,dtype:a.dtype}}};function EIe(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return A$(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return A$(0,n,t-1)}(e,t);case"nearest":return function(e,t){return A$(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function CIe(e,t,n,r,a,i,o,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+c]:l}function AIe(e,t,n,r,a,i,o,s,u,c,l){return CIe(e,t,n,r,a,i,o,Math.round(s),Math.round(u),c,l)}function RIe(e,t,n,r,a,i,o,s,u,c,l){var h=Math.floor(s),p=Math.floor(u),f=h+1,d=p+1;return(f-s)*((d-u)*CIe(e,t,n,r,a,i,o,h,p,c,l)+(u-p)*CIe(e,t,n,r,a,i,o,h,d,c,l))+(s-h)*((d-u)*CIe(e,t,n,r,a,i,o,f,p,c,l)+(u-p)*CIe(e,t,n,r,a,i,o,f,d,c,l))}var _Ie={kernelName:E3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;sge(i,"unique");var o=Mbe(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,c=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};var OIe={kernelName:C3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),c=0,l=0;l<o;l++)l!==i&&(u[c++]=a.shape[l]);var h=new Array(o).fill(0),p=a.shape.slice();p[i]=1;for(var f=new Array(s),d=0;d<f.length;d++){h[i]=d;var v=sbe({inputs:{x:a},backend:n,attrs:{begin:h,size:p}});f[d]=Jbe({inputs:{x:v},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(v)}return f}};for(var FIe={kernelName:A3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;sge(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-i.shape.length,l=i,h=0;h<c;++h){var p=mke({inputs:{input:l},backend:n,attrs:{dim:h+1}});l=p,u.push(p)}for(var f=0;f<o;++f){var d=M4(f,"int32"),v=n.makeTensorInfo([],"int32",d),m=Vge({inputs:{a:v,b:l},backend:n}),g=kge({inputs:{x:m},backend:n,attrs:{dtype:"float32"}}),y=Aye({inputs:{a:g,b:a},backend:n}),b=lke({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(v),u.push(m),u.push(g),u.push(y),u.push(b)}var x=Nwe({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},DIe=0,MIe=[exe,hge,nxe,axe,Cge,ixe,oxe,sxe,uxe,cxe,hxe,fxe,vxe,yxe,xxe,Nxe,Sxe,Txe,Exe,$be,Cxe,Axe,Rxe,Fge,_xe,wge,Bge,Fxe,dge,Dxe,Pxe,Wxe,Uxe,Vxe,Gxe,jxe,Hxe,Kxe,Yxe,Jxe,Zxe,Qxe,$xe,eke,nke,rke,ake,ike,oke,ske,uke,cke,pke,Bbe,fke,Gge,vke,qge,gke,Yge,Nke,Tke,Eke,Qge,tye,Cke,Ake,Rke,_ke,oye,cye,gge,Oke,Lxe,Dke,Lke,Pke,Ube,pye,vye,Bke,bye,Uke,jke,qke,Yke,Jke,Zke,$ke,Iye,ewe,twe,nwe,rwe,awe,iwe,owe,Tye,swe,lwe,fwe,Rye,Oye,vwe,gwe,bwe,Mye,xwe,Iwe,Swe,Twe,Awe,jbe,Wye,Rwe,_we,Owe,Fwe,bge,xke,Mwe,qbe,Xbe,Zbe,Lwe,zwe,Pwe,Bwe,Wwe,Uwe,Gwe,tbe,jwe,Kwe,Xwe,Jwe,ibe,Qwe,eIe,nIe,ube,pwe,iIe,oIe,sIe,uIe,cIe,lIe,hIe,pIe,dbe,fIe,gbe,xbe,vIe,mIe,gIe,yIe,bIe,Rbe,hke,kIe,{kernelName:w3,backendName:"cpu",kernelFunc:wIe},IIe,NIe,SIe,TIe,Pye,_Ie,OIe,FIe,wwe];DIe<MIe.length;DIe++){G3(MIe[DIe])}var LIe,zIe,PIe,BIe={},WIe={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function UIe(e,t){BIe[e]=t}function VIe(e,t){if(!(e in BIe)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if(k0().getBool("IS_SAFARI")||"undefined"==typeof OffscreenCanvas||2!==e){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete BIe[e]}),!1),k0().getBool("SOFTWARE_WEBGL_ENABLED")&&(WIe.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",WIe)||n.getContext("experimental-webgl",WIe);return n.getContext("webgl2",WIe)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;BIe[e]=n}var r=BIe[e];return null==r||r.isContextLost()?(delete BIe[e],VIe(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),BIe[e])}function GIe(e,t){return[t,e]}function jIe(e){var t=L$(e);return W$(Math.ceil(t/4))}function HIe(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function qIe(e,t){var n,r,a,i,o,s,u,c,l,h,p=e;return 2===k0().getNumber("WEBGL_VERSION")?(n=p.R32F,r=p.R16F,a=p.RGBA16F,i=p.RGBA32F,o=p.RED,u=4,c=1,l=p.HALF_FLOAT,h=p.FLOAT,s=p.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=p.RGBA,o=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:h}}function KIe(e,t){var n=t();return k0().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+YIe(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(LIe||(LIe={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(zIe||(zIe={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(PIe||(PIe={}));function XIe(e){return!!(k0().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function YIe(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}function JIe(e,t){return xNe(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function ZIe(e,t){var n=xNe(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(KIe(e,(function(){return e.shaderSource(n,t)})),KIe(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function QIe(e,t){var n=xNe(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(KIe(e,(function(){return e.shaderSource(n,t)})),KIe(e,(function(){return e.compileShader(n)})),k0().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw nNe(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var $Ie,eNe,tNe=/ERROR: [0-9]+:([0-9]+):/g;function nNe(e,t){var n=tNe.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return U$((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var c=o.slice(0,r-1),l=o.slice(r-1,r),h=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(U$(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}function rNe(e){return xNe(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function aNe(e,t){if(KIe(e,(function(){return e.linkProgram(t)})),!k0().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function iNe(e,t){if(KIe(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function oNe(e,t){var n=xNe(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return KIe(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),KIe(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}function sNe(e,t){var n=xNe(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return KIe(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),KIe(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}function uNe(e){return xNe(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function cNe(e,t){var n=k0().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}function lNe(e){return xNe(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function hNe(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(KIe(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),KIe(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),KIe(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function pNe(e,t,n){kNe(e,n),KIe(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),KIe(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}function fNe(e,t,n){return xNe(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function dNe(e,t,n){return e.getUniformLocation(t,n)}function vNe(e,t,n,r){KIe(e,(function(){return pNe(e,t,r)})),KIe(e,(function(){return e.uniform1i(n,r)}))}function mNe(e,t,n){KIe(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),KIe(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function gNe(e,t){KIe(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),KIe(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function yNe(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+bNe(e,t))}function bNe(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}function xNe(e,t,n){var r=KIe(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function kNe(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function wNe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return L$(e.slice(0,e.length-t))}function INe(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function NNe(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[wNe(e)].concat(T(INe(e)))),t}function SNe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=k0().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=k0().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&k0().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?R$(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=H$(e);e=a.newShape}var i=L$(e),o=null;e.length<=1&&i<=n?o=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);var s=null!=o&&Math.max.apply(Math,T(o))>r&&Math.min.apply(Math,T(o))<=(t?2:1)&&Math.min.apply(Math,T(o))>0;if(null==o||s)if(t){var u=wNe(e),c=2,l=2;if(e.length){var h=INe(e),p=S(h,2);c=p[0],l=p[1]}o=W$(i=u*(c/2)*(l/2)).map((function(e){return 2*e}))}else o=W$(i);return o}function TNe(e){return e%2==0}function ENe(e,t){if(P$(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(TNe(n)&&TNe(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&TNe(e[0])&&TNe(t[0])}function CNe(e){if(null==$Ie){var t=VIe(e);$Ie=t.getParameter(t.MAX_TEXTURE_SIZE)}return $Ie}function ANe(e){if(null==eNe){var t=VIe(e);eNe=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,eNe)}function RNe(e){if(0===e)return 0;var t=VIe(e);return _Ne(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:_Ne(t,"EXT_disjoint_timer_query")?1:0}function _Ne(e,t){return null!=e.getExtension(t)}function ONe(e){try{if(null!=VIe(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function FNe(e){if(0===e)return!1;var t=VIe(e);if(1===e){if(!_Ne(t,"OES_texture_float"))return!1}else if(!_Ne(t,"EXT_color_buffer_float"))return!1;return MNe(t)}function DNe(e){if(0===e)return!1;var t=VIe(e);if(1!==e){if(_Ne(t,"EXT_color_buffer_float"))return MNe(t);var n="EXT_color_buffer_half_float";if(_Ne(t,n)){var r=t.getExtension(n);return function(e,t){var n=qIe(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!_Ne(t,"OES_texture_float")&&(!!_Ne(t,"WEBGL_color_buffer_float")&&MNe(t))}function MNe(e){var t=qIe(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function LNe(e){return 2===e&&null!=VIe(e).fenceSync}function zNe(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&F$("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var PNe={__proto__:null,assertNotComplex:zNe,bindCanvasToFramebuffer:function(e){KIe(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),KIe(e,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),KIe(e,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:mNe,bindTextureToProgramUniformSampler:vNe,bindTextureUnit:pNe,bindVertexBufferToProgramAttribute:hNe,callAndCheck:KIe,canBeRepresented:XIe,createFragmentShader:QIe,createFramebuffer:lNe,createProgram:rNe,createStaticIndexBuffer:sNe,createStaticVertexBuffer:oNe,createTexture:uNe,createVertexShader:ZIe,getBatchDim:wNe,getExtensionOrThrow:JIe,getFramebufferErrorMessage:bNe,getMaxTexturesInShader:ANe,getNumChannels:function(){return 2===k0().getNumber("WEBGL_VERSION")?1:4},getProgramUniformLocation:dNe,getProgramUniformLocationOrThrow:fNe,getRowsCols:INe,getShapeAs3D:NNe,getTextureShapeFromLogicalShape:SNe,getWebGLDisjointQueryTimerVersion:RNe,getWebGLErrorMessage:YIe,getWebGLMaxTextureSize:CNe,hasExtension:_Ne,isCapableOfRenderingToFloatTexture:FNe,isDownloadFloatTextureEnabled:DNe,isReshapeFree:ENe,isWebGLFenceEnabled:LNe,isWebGLVersionEnabled:ONe,linkProgram:aNe,logShaderSourceAndInfoLog:nNe,resetMaxTextureSize:function(){$Ie=null},resetMaxTexturesInShader:function(){eNe=null},unbindColorTextureFromFramebuffer:gNe,unbindTextureUnit:function(e,t){kNe(e,t),KIe(e,(function(){return e.activeTexture(e.TEXTURE0+t)})),KIe(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},validateFramebuffer:yNe,validateProgram:iNe,validateTextureSize:cNe},BNe=k0();function WNe(){var e,t,n,r,a,i,o,s,u,c;return 2===k0().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=k0().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function UNe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=i0(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function VNe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=i0(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function GNe(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function jNe(e){var t=i0(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}BNe.registerFlag("HAS_WEBGL",(function(){return BNe.getNumber("WEBGL_VERSION")>0})),BNe.registerFlag("WEBGL_VERSION",(function(){return ONe(2)?2:ONe(1)?1:0})),BNe.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),BNe.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===BNe.get("WEBGL_VERSION")})),BNe.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),BNe.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),BNe.registerFlag("WEBGL_PACK",(function(){return BNe.getBool("HAS_WEBGL")})),BNe.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return BNe.getBool("WEBGL_PACK")})),BNe.registerFlag("WEBGL_PACK_CLIP",(function(){return BNe.getBool("WEBGL_PACK")})),BNe.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return BNe.getBool("WEBGL_PACK")})),BNe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return BNe.getBool("WEBGL_PACK")})),BNe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return BNe.getBool("WEBGL_PACK")})),BNe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return BNe.getBool("WEBGL_PACK")})),BNe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return BNe.getBool("WEBGL_PACK")})),BNe.registerFlag("WEBGL_PACK_REDUCE",(function(){return BNe.getBool("WEBGL_PACK")})),BNe.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return BNe.getBool("WEBGL_PACK")})),BNe.registerFlag("WEBGL_CONV_IM2COL",(function(){return BNe.getBool("WEBGL_PACK")})),BNe.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(function(){return BNe.getBool("WEBGL_PACK")})),BNe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return CNe(BNe.getNumber("WEBGL_VERSION"))})),BNe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return ANe(BNe.getNumber("WEBGL_VERSION"))})),BNe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=BNe.getNumber("WEBGL_VERSION");return 0===e?0:RNe(e)})),BNe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return BNe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!A5()})),BNe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return FNe(BNe.getNumber("WEBGL_VERSION"))})),BNe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!BNe.getBool("WEBGL_FORCE_F16_TEXTURES")&&BNe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),BNe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return DNe(BNe.getNumber("WEBGL_VERSION"))})),BNe.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return LNe(BNe.getNumber("WEBGL_VERSION"))})),BNe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return BNe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),BNe.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if("number"!=typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),BNe.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return A5()?1:-1}),(function(e){if("number"!=typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),BNe.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),BNe.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),BNe.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),BNe.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128})),BNe.registerFlag("WEBGL_EXP_CONV",(function(){return!1})),BNe.registerFlag("SOFTWARE_WEBGL_ENABLED",(function(){return BNe.getBool("IS_TEST")})),BNe.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(function(){return 1/0})),BNe.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(function(){return!1})),BNe.registerFlag("WEBGL2_ISNAN_CUSTOM",(function(){return!1})),BNe.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));var HNe="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",qNe=M7;function KNe(e,t,n){var r=[];if(e.forEach((function(e){var t=L$(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(pSe(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?YNe(e,r):XNe(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?cSe(e,t):lSe(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=WNe(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),h=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(JNe,"\n    ").concat(ZNe,"\n    ").concat(QNe,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(P$(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(P$(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=VNe(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=UNe(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=VNe(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=UNe(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return r=t,a=UNe(["r","c","d","d2","d3"],e),"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(r[0],",\n                             ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(a,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ");case 6:return function(e,t){var n=UNe(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}var r,a}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(h+=$Ne),[h,l,i,o,a,s,n.userCode].join("\n")}function XNe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return tSe(e,t);case 1:return nSe(e,t);case 2:return rSe(e,t);case 3:return aSe(e,t);case 4:return iSe(e,t);case 5:return oSe(e);case 6:return sSe(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function YNe(e,t){var n,r,a;switch(e.shapeInfo.logicalShape.length){case 0:return n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=WNe(),"\n    vec4 ".concat(r,"() {\n      return ").concat(a.texture2D,"(").concat(n,", halfCR);\n    }\n  ");case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=WNe();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=WNe();if(null!=i&&P$(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=fSe(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(YNe(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(dSe(c,s),");\n        }\n      ")}var l=WNe();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var h=o[0],p=o[1],f=Math.ceil(n[2]/2),d=f*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(h,", ").concat(p,", ").concat(d,", ").concat(f,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=WNe();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],h=Math.ceil(i[o-1]/2),p=h*Math.ceil(i[o-2]/2),f="int b, int row, int col",d="b * ".concat(p," + (row / 2) * ").concat(h," + (col / 2)"),v=2;v<o-1;v++)f="int b".concat(v,", ")+f,p*=i[o-v-1],d="b".concat(v," * ").concat(p," + ")+d;return"\n    vec4 ".concat(r,"(").concat(f,") {\n      int index = ").concat(d,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var JNe="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ZNe="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",QNe="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$Ne="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function eSe(e){return"offset".concat(e)}function tSe(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=S(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=eSe(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=S(e.shapeInfo.texShape,2),c=u[0],l=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function nSe(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(uSe(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=eSe(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function rSe(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&P$(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=H$(n),c=u.newShape,l=u.keptDims,h=c;if(h.length<n.length){var p=fSe(e,h);return"\n      ".concat(XNe(p,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(dSe(["row","col"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(uSe(e),"\n      }\n    ");var f=i[0],d=i[1],v=eSe(r);return 1===d?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(f,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===f?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(d,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(f,", ").concat(d,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function aSe(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=H$(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var h=fSe(e,l);return"\n        ".concat(XNe(h,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(dSe(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(uSe(e),"\n      }\n    ");var p=e.shapeInfo.texShape,f=p[0],d=p[1],v=e.shapeInfo.flatOffset;if(d===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(d,".0, ").concat(f,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(d===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(d,".0, ").concat(f,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var m=eSe(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(f,", ").concat(d,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function iSe(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=H$(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var h=fSe(e,c);return"\n      ".concat(XNe(h,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(dSe(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(uSe(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,d=f[0],v=f[1],m="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(m,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===i&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=eSe(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(m,"\n      ").concat(g,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(v,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function oSe(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=H$(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var h=fSe(e,c);return"\n      ".concat(XNe(h),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(dSe(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(uSe(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,d=f[0],v=f[1];if(v===s&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=eSe(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function sSe(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=H$(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=fSe(e,i);return"\n      ".concat(XNe(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(dSe(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var u=t[5],c=t[4]*u,l=t[3]*c,h=t[2]*l,p=t[1]*h;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(p,", ").concat(h,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(uSe(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,v=d[0],m=d[1];if(m===p&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(h,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===u&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=eSe(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(p," + col * ").concat(h," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(u," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function uSe(e){var t=e.name,n=L$(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function cSe(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=qNe(e.shapeInfo.logicalShape,t.logicalShape),c=hSe(s),l=s-o,h=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(h[e+l]," = 0;")})).join("\n");var p="";p=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(h[t+l])})).join(", ");var f="return outputValue;",d=1===L$(e.shapeInfo.logicalShape),v=1===L$(t.logicalShape);if(1!==o||d||v){if(d&&!v)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var m=o-2,g=o-1;u.indexOf(m)>-1&&u.indexOf(g)>-1?f="return vec4(outputValue.x);":u.indexOf(m)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(p,");\n      ").concat(f,"\n    }\n  ")}function lSe(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&P$(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=hSe(u),h=qNe(e.shapeInfo.logicalShape,t.logicalShape),p=u-s,f=["x","y","z","w","u","v"];c=0===s?"":u<2&&h.length>=1?"coords = 0;":h.map((function(e){return"coords.".concat(f[e+p]," = 0;")})).join("\n");var d="";return d=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+p])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(d,");\n    }\n  ")}function hSe(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function pSe(e,t,n){var r=H$(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,c=!e&&o>1&&!P$(t,n)&&a.length<o||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:i}}function fSe(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function dSe(e,t){return t.map((function(t){return e[t]})).join(", ")}function vSe(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=KNe(a,o,t),u=QIe(e.gl,s),c=e.createProgram(u);return k0().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},mSe(e,t,c)))}function mSe(e,t,n){var r,a,i,o,s=[],u=[],c=null;o=e.getUniformLocation(n,"NAN",!1),1===k0().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(n,"INFINITY",!1));var l,h=!1,p=O(t.variableNames);try{for(p.s();!(l=p.n()).done;){var f=l.value,d={name:f,uniform:e.getUniformLocation(n,f,h),offset:e.getUniformLocation(n,"offset".concat(f),h)};t.enableShapeUniforms&&(d.shape=e.getUniformLocation(n,"".concat(f,"Shape"),h),d.texShape=e.getUniformLocation(n,"".concat(f,"TexShape"),h)),s.push(d)}}catch(e){p.e(e)}finally{p.f()}if(t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",h),i=e.getUniformLocation(n,"outShapeStrides",h),a=e.getUniformLocation(n,"outTexShape",h)),t.customUniforms){var v,m=O(t.customUniforms);try{for(m.s();!(v=m.n()).done;){var g=v.value;u.push(e.getUniformLocation(n,g.name,h))}}catch(e){m.e(e)}finally{m.f()}}return{variablesLocations:s,customUniformLocations:u,infLoc:c,nanLoc:o,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function gSe(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!P$(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!P$(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function ySe(e,t,n,r,a){t.program.enableShapeUniforms||(gSe(t.inShapeInfos,n),gSe([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===k0().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(var s=0;s<n.length;++s){var u=n[s],c=t.variablesLocations[s],l=c.uniform,h=c.offset,p=c.shape,f=c.texShape;if(p){var d=pSe(t.program.packedInputs,u.shape,u.texData.texShape).uniformShape;switch(d.length){case 1:e.gl.uniform1iv(p,new Int32Array(d));break;case 2:e.gl.uniform2iv(p,new Int32Array(d));break;case 3:e.gl.uniform3iv(p,new Int32Array(d));break;case 4:e.gl.uniform4iv(p,new Int32Array(d))}}if(f&&e.gl.uniform2i(f,u.texData.texShape[0],u.texData.texShape[1]),null!=l)if(u.isUniform)if(L$(u.shape)<2)e.gl.uniform1f(l,u.uniformValues[0]);else{var v=u.uniformValues;v instanceof Float32Array||(v=new Float32Array(v)),e.gl.uniform1fv(l,v)}else null!=u.texData.slice&&null!=h&&e.gl.uniform1i(h,u.texData.slice.flatOffset),e.setInputMatrixTexture(u.texData.texture.texture,l,s)}var m=t.outShapeLocation;if(m)switch(r.shape.length){case 1:e.gl.uniform1iv(m,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(m,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(m,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(m,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var g=i0(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(g));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(g));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(g))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(var y=0;y<t.program.customUniforms.length;++y){var b=t.program.customUniforms[y],x=t.customUniformLocations[y],k=a[y];if("float"===b.type)e.gl.uniform1fv(x,k);else if("vec2"===b.type)e.gl.uniform2fv(x,k);else if("vec3"===b.type)e.gl.uniform3fv(x,k);else if("vec4"===b.type)e.gl.uniform4fv(x,k);else if("int"===b.type)e.gl.uniform1iv(x,k);else if("ivec2"===b.type)e.gl.uniform2iv(x,k);else if("ivec3"===b.type)e.gl.uniform3iv(x,k);else{if("ivec4"!==b.type)throw Error("uniform type ".concat(b.type," is not supported yet."));e.gl.uniform4iv(x,k)}}e.executeProgram()}function bSe(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=pSe(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,c=o.keptDims,l="",h="",p="";if(1===u.length&&e.packedInputs){var f=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l="".concat(f[0]>1,"_").concat(f[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var d=i0(u);p="".concat(d[0]===i[1],"_").concat(d[d.length-1]===i[1])}}else h="".concat(u[0]>1,"_").concat(u[1]>1);var v=t.shape.length,m=2===u.length&&P$(t.shape,i),g=1===L$(t.shape),y=M7(t.shape,n.shape),b=!e.packedInputs&&v===n.shape.length&&P$(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(v,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(g,"_").concat(y,"_").concat(m,"_").concat(l,"_").concat(h,"_").concat(p,"_").concat(x,"_").concat(a)}else{var k=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(k,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(k0().getNumber("WEBGL_VERSION"))}function xSe(e){return k0().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var kSe=p((function e(t){l(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=LIe.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=WNe();this.outputShape=t,this.enableShapeUniforms=xSe(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?VNe(["r","c","d"],t):UNe(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),wSe=p((function e(t){l(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=LIe.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=WNe();this.outputShape=t,this.enableShapeUniforms=xSe(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?VNe(["r","c","d"],t):UNe(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),ISe=p((function e(t){l(this,e),this.variableNames=["A"],this.outTexUsage=zIe.DOWNLOAD;var n=WNe();this.outputShape=t,this.userCode="\n      ".concat(HNe,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),NSe=p((function e(t){l(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=zIe.DOWNLOAD;var n=WNe();this.outputShape=t,this.userCode="\n      ".concat(HNe,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),SSe={R:0,G:1,B:2,A:3},TSe=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";l(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var a=WNe();this.outputShape=t,this.enableShapeUniforms=xSe(this.outputShape.length);var i="result";n&&(i="floor(result * 255. + 0.5)");for(var o="",s=0;s<r.length;s++){var u=r[s];o+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(SSe[u],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":jNe(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(r.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(r.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(a.texture2D,"(A, uv);\n          ").concat(o,"\n        }\n        ").concat(a.output," = vec4(").concat(i,", 0., 0., 0.);\n      }\n    ")})),ESe=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=WNe();this.outputShape=t,this.enableShapeUniforms=xSe(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":jNe(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function CSe(e){var t=WNe();return ZIe(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function ASe(e){return oNe(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function RSe(e){return sNe(e,new Uint16Array([0,1,2,2,1,3]))}function _Se(e,t,n,r,a,i){cNe(t,n);var o=uNe(e),s=e.TEXTURE_2D;return KIe(e,(function(){return e.bindTexture(s,o)})),KIe(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),KIe(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),KIe(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),KIe(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===k0().getNumber("WEBGL_VERSION")?KIe(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):KIe(e,(function(){return e.texStorage2D(s,1,r,t,n)})),KIe(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function OSe(e){return e.internalFormatFloat}function FSe(e,t,n,r){var a=S(GIe(t,n),2);return _Se(e,a[0],a[1],OSe(r),r.textureFormatFloat,e.FLOAT)}function DSe(e){return e.internalFormatHalfFloat}function MSe(e,t,n,r){var a=S(GIe(t,n),2);return _Se(e,a[0],a[1],DSe(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function LSe(e){return e.downloadTextureFormat}function zSe(e,t,n,r){var a=S(GIe(t,n),2);return _Se(e,a[0],a[1],LSe(r),e.RGBA,e.UNSIGNED_BYTE)}function PSe(e){return e.internalFormatPackedFloat}function BSe(e,t,n,r){var a=S(HIe(t,n),2);return _Se(e,a[0],a[1],PSe(r),e.RGBA,e.FLOAT)}function WSe(e){return e.internalFormatPackedHalfFloat}function USe(e,t,n,r){var a=S(HIe(t,n),2);return _Se(e,a[0],a[1],WSe(r),e.RGBA,r.textureTypeHalfFloat)}function VSe(e,t,n){return KIe(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),hNe(e,t,"clipSpacePos",n,3,20,0)&&hNe(e,t,"uv",n,2,20,12)}function GSe(e,t,n,r,a,i){var o,s,u;KIe(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===k0().getNumber("WEBGL_VERSION")?KIe(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):KIe(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),KIe(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function jSe(e,t,n){KIe(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===k0().getNumber("WEBGL_VERSION")?KIe(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):KIe(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===k0().getNumber("WEBGL_VERSION")?KIe(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):KIe(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),KIe(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function HSe(e,t,n,r){var a=e.createBuffer();KIe(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return KIe(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),KIe(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),KIe(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}function qSe(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function KSe(e,t,n,r){var a=S(GIe(t,n),2),i=a[0],o=a[1],s=new Uint8Array(t*n*4);return KIe(e,(function(){return e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}function XSe(e,t,n,r,a,i,o,s){var u=e,c=new Float32Array(function(e,t){var n=S(HIe(e,t),2);return n[0]*n[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function YSe(e,t,n){var r=new Float32Array(t*n*4);return KIe(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}var JSe={__proto__:null,bindVertexProgramAttributeStreams:VSe,createBufferFromOutputTexture:HSe,createFloat16MatrixTexture:MSe,createFloat16PackedMatrixTexture:USe,createFloat32MatrixTexture:FSe,createIndexBuffer:RSe,createPackedMatrixTexture:BSe,createUnsignedBytesMatrixTexture:zSe,createVertexBuffer:ASe,createVertexShader:CSe,downloadByteEncodedFloatMatrixFromOutputTexture:KSe,downloadFloat32MatrixFromBuffer:qSe,downloadMatrixFromPackedOutputTexture:YSe,downloadPackedMatrixFromBuffer:XSe,getInternalFormatForFloat16MatrixTexture:DSe,getInternalFormatForFloat16PackedMatrixTexture:WSe,getInternalFormatForFloat32MatrixTexture:OSe,getInternalFormatForPackedMatrixTexture:PSe,getInternalFormatForUnsignedBytesMatrixTexture:LSe,uploadDenseMatrixToTexture:GSe,uploadPixelDataToTexture:jSe},ZSe=function(){function e(t){l(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];var n=k0().getNumber("WEBGL_VERSION");if(null!=t?(this.gl=t,UIe(n,t)):this.gl=VIe(n),t=this.gl,2===k0().getNumber("WEBGL_VERSION")){var r=t;this.createVertexArray=function(){return KIe(r,(function(){return r.createVertexArray()}))},this.bindVertexArray=function(e){return KIe(r,(function(){return r.bindVertexArray(e)}))},this.deleteVertexArray=function(e){return KIe(r,(function(){return r.deleteVertexArray(e)}))},this.getVertexArray=function(){return KIe(r,(function(){return r.getParameter(r.VERTEX_ARRAY_BINDING)}))}}else if(null!=t){var a=t.getExtension("OES_vertex_array_object");if(null==a)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=function(){return KIe(t,(function(){return a.createVertexArrayOES()}))},this.bindVertexArray=function(e){return KIe(t,(function(){return a.bindVertexArrayOES(e)}))},this.deleteVertexArray=function(e){return KIe(t,(function(){return a.deleteVertexArrayOES(e)}))},this.getVertexArray=function(){return KIe(t,(function(){return t.getParameter(a.VERTEX_ARRAY_BINDING_OES)}))}}var i="WEBGL_color_buffer_float",o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===k0().getNumber("WEBGL_VERSION")){var s="OES_texture_half_float";if(this.textureFloatExtension=JIe(this.gl,"OES_texture_float"),_Ne(this.gl,s))this.textureHalfFloatExtension=JIe(this.gl,s);else if(k0().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(i),_Ne(this.gl,o))this.colorBufferHalfFloatExtension=JIe(this.gl,o);else if(k0().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(i="EXT_color_buffer_float",_Ne(this.gl,i))this.colorBufferFloatExtension=this.gl.getExtension(i);else{if(!_Ne(this.gl,o))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(o)}this.vertexBuffer=ASe(this.gl),this.indexBuffer=RSe(this.gl),this.framebuffer=lNe(this.gl),this.textureConfig=qIe(this.gl,this.textureHalfFloatExtension)}var t;return p(e,[{key:"debug",get:function(){return k0().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;KIe(t,(function(){return t.finish()})),KIe(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),KIe(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),KIe(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),KIe(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),KIe(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),FSe(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),MSe(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),zSe(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),jSe(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),GSe(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),USe(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),BSe(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(gNe(this.gl,this.framebuffer),this.outputTexture=null),KIe(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return KSe(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return XSe(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return qSe(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=HSe(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(k0().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else k0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,k0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return YSe(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=CSe(n));var r=rNe(n);KIe(n,(function(){return n.attachShader(r,t.vertexShader)})),KIe(n,(function(){return n.attachShader(r,e)})),aNe(n,r);var a=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&iNe(n,a),a}},{key:"buildVao",value:function(e){var t=this;this.setProgram(e),this.bindVertexArray(e.vao);var n=this.gl;KIe(n,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer)})),VSe(n,e,this.vertexBuffer)}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(KIe(this.gl,(function(){return t.gl.deleteProgram(e)})),this.deleteVertexArray(e.vao))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&iNe(this.gl,this.program),KIe(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?fNe(this.gl,e,t):dNe(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),KIe(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),vNe(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=S(HIe(t,n),2),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&iNe(this.gl,this.program),yNe(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;if(this.debug){var t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}KIe(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),KIe(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=JIe(this.gl,2===k0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===k0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==k0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:(t=c(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V$((function(){return n.disposed||n.isQueryAvailable(t,k0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,k0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)){var r=void 0;"setTimeoutCustom"in k0().platform&&(r=k0().platform.setTimeoutCustom.bind(k0().platform)),V$((function(){return n.pollItems(),0===n.itemsToPoll.length}),(function(){return 0}),null,r)}}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),mNe(this.gl,e,this.framebuffer),this.debug&&yNe(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(mNe(this.gl,this.outputTexture,this.framebuffer),this.debug&&yNe(this.gl)):gNe(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;mNe(r,e,this.framebuffer),this.debug&&yNe(r),this.outputTexture=e,KIe(r,(function(){return r.viewport(0,0,t,n)})),KIe(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),KIe(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var QSe=Sge,$Se=Age,eTe=Rge,tTe=_ge,nTe=xge,rTe=zge,aTe=Wge,iTe=Uge,oTe=jge,sTe=Kge,uTe=Jge,cTe=nye,lTe=rye,hTe=aye,pTe=sye,fTe=lye,dTe=fye,vTe=mye,mTe=gye,gTe=xye,yTe=kye,bTe=Nye,xTe=Eye,kTe=_ye,wTe=Fye,ITe=Bye,NTe=jye,STe=qye,TTe=Zye,ETe=Qye,CTe=$ye,ATe=nbe,RTe=rbe,_Te=lge,OTe=obe,FTe=cbe,DTe=lbe,MTe=hbe,LTe=pbe,zTe=ybe,PTe=kbe,BTe=Ibe,WTe=Sbe,UTe=Tbe,VTe=Ebe,GTe=_be,jTe=Dbe,HTe=Lye,qTe=Mbe;function KTe(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function XTe(e,t){return 1===t?[e]:KTe(e,t)}var YTe=function(){function e(t){if(l(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=xSe(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=XTe("rc",this.rank),r=hSe(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return p(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),JTe=p((function e(t,n){l(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=xSe(this.outputShape.length);for(var r,a,i,o="",s=0;s<4;s++){var u="thisRC = rc;";s%2==1&&(u+="thisRC.z += 1;"),s>1&&(u+="thisRC.y += 1;"),o+="\n        ".concat(u,"\n        ").concat(s>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(s,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(s>0?"}":"","\n      ")}this.userCode="\n      ".concat((r=n,a=this.enableShapeUniforms,i=a?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=GNe(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):UNe(["r","c","d"],r),"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(i,"\n      return ivec3(r, c, d);\n    }\n  ")),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":jNe(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));var ZTe=function(){function e(t){l(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}return p(e,[{key:"acquireTexture",value:function(e,t,n){var r=$Te(t,n),a=eEe(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=QTe(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].pop();return this.usedTextures[a].push(s),s}return r===PIe.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===PIe.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===PIe.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===PIe.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===PIe.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=$Te(n,r),i=eEe(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=QTe(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=k0().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],c=u&&u.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function QTe(e,t,n,r,a){var i,o=function(e,t){switch(e){case PIe.PACKED_2X2_FLOAT32:return PSe(t);case PIe.PACKED_2X2_FLOAT16:return WSe(t);case PIe.UNPACKED_FLOAT32:return OSe(t);case PIe.UNPACKED_FLOAT16:return DSe(t);case PIe.PACKED_4X1_UNSIGNED_BYTE:return LSe(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=S(HIe(e[0],e[1]),2);i=s[0]*s[1]}else{var u=S(GIe(e[0],e[1]),2);i=u[0]*u[1]}var c=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*c}function $Te(e,t){if(e===zIe.UPLOAD)return PIe.PACKED_2X2_FLOAT32;if(e===zIe.RENDER||null==e)return function(e){return k0().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?PIe.PACKED_2X2_FLOAT32:PIe.UNPACKED_FLOAT32:e?PIe.PACKED_2X2_FLOAT16:PIe.UNPACKED_FLOAT16}(t);if(e===zIe.DOWNLOAD||e===zIe.PIXELS)return PIe.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function eEe(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var tEe=p((function e(t,n){l(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=xSe(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),nEe="if (isnan(x)) return x;",rEe="return x;",aEe="return abs(x);";var iEe="return (x >= 0.0) ? x : (exp(x) - 1.0);",oEe=nEe+"\n  return (x < 0.0) ? 0.0 : x;\n",sEe=nEe+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",uEe="return x;",cEe="return 1.0 / (1.0 + exp(-1.0 * x));",lEe="return x;",hEe="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",pEe="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",fEe="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",dEe="return 1.0 / (1.0 + exp(-1.0 * x));",vEe=p((function e(t,n){l(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=xSe(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),mEe=p((function e(t){l(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=xSe(this.outputShape.length);var n=t.length,r=XTe("rc",n),a=hSe(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),gEe=one,yEe={};var bEe=k0().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var xEe=function(e){d(s,e);var t,n,r,a,i=w(s);function s(e){var t,n,r;if(l(this,s),(t=i.call(this)).pendingRead=new WeakMap,t.pendingDisposal=new WeakSet,t.dataRefCount=new WeakMap,t.numBytesInGPU=0,t.uploadWaitMs=0,t.downloadWaitMs=0,t.lastGlFlushTime=0,t.warnedAboutMemory=!1,t.pendingDeletes=0,t.disposed=!1,!k0().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof ZSe)n=e;else{var a=VIe(k0().getNumber("WEBGL_VERSION"),e);n=new ZSe(a)}t.binaryCache={},t.gpgpuCreatedLocally=!1}else{var o=VIe(k0().getNumber("WEBGL_VERSION"));n=new ZSe(o),t.binaryCache=((r=k0().getNumber("WEBGL_VERSION"))in yEe||(yEe[r]={}),yEe[r]),t.gpgpuCreatedLocally=!0}return t.gpgpu=n,t.canvas=t.gpgpu.gl.canvas,t.textureManager=new ZTe(t.gpgpu),t.numMBBeforeWarning=null==k0().global.screen?1024:k0().global.screen.height*k0().global.screen.width*window.devicePixelRatio*600/1024/1024,t.texData=new S$(x(t),q5()),t}return p(s,[{key:"nextDataId",value:function(){return s.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"writeTexture",value:function(e,t,n,r,a,i){var o=this.makeTensorInfo(t,n),s=this.texData.get(o.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,a]},s.texShape=[r,a];var u=NNe(t),c=new TSe(u,!1,i),l=this.runWebGLProgram(c,[o],n,[[r,a]]);return l.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(o),l.dataId}},{key:"write",value:function(e,t,n){if((k0().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||k0().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:zIe.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(k0().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:zIe.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new vEe(o,uEe):new tEe(o,uEe);var c=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var h,p,f=null!=this.activeTimers;(f&&(h=z4()),"complex64"===r)?p=Tie(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):p=this.getValuesFromTexture(e);return f&&(this.downloadWaitMs+=z4()-h),this.convertAndCacheOnCPU(e,p)}},{key:"read",value:(a=c(o().mark((function e(t){var n,r,a,i,s,u,c,l,h,p,f,d,v,m,g,y,b,x,k,w,I,N,S;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,s=r.slice,u=r.dtype,c=r.complexTensorInfos,l=r.isPacked,null==s){e.next=11;break}return h=l?new vEe(i,uEe):new tEe(i,uEe),p=this.runWebGLProgram(h,[{dataId:t,shape:i,dtype:u}],u),f=this.read(p.dataId),this.disposeIntermediateTensorInfo(p),e.abrupt("return",f);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!k0().getBool("DEBUG")){e.next=16;break}if(k0().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==k0().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(d=null,"complex64"!==u&&k0().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(t),g=this.texData.get(v.dataId),d=(m=this.gpgpu).createBufferFromTexture.apply(m,[g.texture.texture].concat(T(jIe(i))))),this.pendingRead.set(t,[]),"complex64"===u){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==u){e.next=31;break}return e.next=25,Promise.all([this.read(c.real.dataId),this.read(c.imag.dataId)]);case 25:b=e.sent,x=b[0],k=b[1],y=Tie(x,k),e.next=32;break;case 31:null==d?y=this.getValuesFromTexture(t):(w=L$(i),y=this.gpgpu.downloadFloat32MatrixFromBuffer(d,w));case 32:return null!=v&&this.disposeIntermediateTensorInfo(v),null!=d&&KIe(I=this.gpgpu.gl,(function(){return I.deleteBuffer(d)})),N=this.convertAndCacheOnCPU(t,y),S=this.pendingRead.get(t),this.pendingRead.delete(t),S.forEach((function(e){return e(N)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&q5().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",N);case 40:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=s?new vEe(a,uEe):new tEe(a,uEe);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:o}],o),h=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),h}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var p=this.decode(e,t.customTexShape),f=q5().makeTensorFromTensorInfo(p),d=this.texData.get(p.dataId);return Object.assign({tensorRef:f},d.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return W4(e)}));return l8(e.shape,e.dtype,n)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return l8(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!XIe(n)){if(k0().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=L$(n);if(k0().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),c=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat(T(jIe(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),c}var l=k0().getBool("WEBGL_PACK")&&!0===a,h=l?NNe(n):n,p=l?new NSe(h):new ISe(h),f=this.runWebGLProgram(p,[{shape:h,dtype:r,dataId:e}],"float32"),d=this.texData.get(f.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(f),v}},{key:"timerAvailable",value:function(){return k0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=V4(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),s=V4(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return c(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(k0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,u.kernelMs=O$(n),u.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:s[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:u.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return k0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:z4(),endMs:null}}},{key:"endTimer",value:function(e){return k0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=z4(),e)}},{key:"getQueryTime",value:(r=c(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(k0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bEe;return k0().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&L$(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){z3("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return gEe(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new vEe(e.shape,t),a=this.compileAndRun(r,[e],n);return q5().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=_Te(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(k0().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,aEe,e.dtype);var n=new tEe(e.shape,aEe),r=this.compileAndRun(n,[e]);return q5().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&$$(n[0])){var a=n.map((function(e){return B4(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return q5().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new mEe(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new YTe(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[wNe(e.shape)].concat(T(INe(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[wNe(t)].concat(T(INe(t))),i=new JTe(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;null!=t&&F$(L$(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var o,s=NNe(a);o=r?new wSe(s):new kSe(s);var u=[null!=t?t:jIe(s)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===LIe.DENSE){var c=null!=o?o:jIe(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===L$(s.shape))return u.values=q$(s.dtype,0),s;var l=[],h=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&L$(t.shape)<=k0().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!ENe(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),l.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var p,f={shape:s.shape,texData:u,isUniform:!1},d=bSe(e,h,f),v=this.getAndSaveBinary(d,(function(){return vSe(a.gpgpu,e,h,f)})),m=null!=this.activeTimers;m&&(p=this.startTimer()),k0().get("ENGINE_COMPILE_ONLY")||ySe(this.gpgpu,v,h,f,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)}));var g=k0().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=z4();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!k0().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!k0().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=X5((function(){if(!k0().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=k0().getBool("DEBUG");k0().set("DEBUG",!1);var n=e.abs(i9(1e-8)).dataSync()[0];if(k0().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var u,c=null!=this.activeTimers;c&&(u=z4());var l=t.texShape;if(null==l&&(l=SNe(n,s),t.texShape=l),null!=a){var h,p=NNe(n),f=l[1],d=l[0],v=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!v){var m=S(HIe(l[0],l[1]),2);f=m[0],d=m[1]}h=s?new ESe(p,v):new TSe(p,v);var g=v?[d,f]:l,y=this.makeTensorInfo(g,r),b=this.texData.get(y.dataId);b.usage=v?zIe.PIXELS:zIe.UPLOAD,b.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),f,d,a);var x=[[d,f]],k=this.runWebGLProgram(h,[y],r,x,!0),w=this.texData.get(k.dataId);t.texShape=w.texShape,t.isPacked=w.isPacked,t.usage=w.usage,k0().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(t.texture=w.texture,t.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(y),c&&(this.uploadWaitMs+=z4()-u)}else{var I=this.acquireTexture(l,o,r,s);t.texture=I}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*Z$(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=S(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:(n=c(o().mark((function e(){var t,n,r,a,i,s,u,c,l=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=S(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:s=o().mark((function e(){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=S(c[u],2),r=n[1],a=new Promise((function(e){try{l.checkCompletion_(r),e(!0)}catch(e){throw e}})),t.push(a);case 3:case"end":return e.stop()}}),e)})),u=0,c=Object.entries(this.binaryCache);case 8:if(!(u<c.length)){e.next=13;break}return e.delegateYield(s(),"t0",10);case 10:u++,e.next=8;break;case 13:return e.abrupt("return",Promise.all(t));case 14:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"checkCompletionAsync_",value:(t=c(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,aie();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw nNe(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.values(this.binaryCache);e<t.length;e++){var n=t[e];this.gpgpu.buildVao(n.webGLProgram);var r=mSe(this.gpgpu,n.program,n.webGLProgram),a=r.variablesLocations,i=r.customUniformLocations,o=r.infLoc,s=r.nanLoc,u=r.outShapeLocation,c=r.outShapeStridesLocation,l=r.outTexShapeLocation;n.variablesLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=s,n.outShapeLocation=u,n.outShapeStridesLocation=c,n.outTexShapeLocation=l}}},{key:"createTensorFromGPUData",value:function(e,t,n){e.channels=e.channels||"RGBA";var r=e.texture,a=e.height,i=e.width,o=e.channels,s=q5().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");var u=s.writeTexture(r,t,n,a,i,o);return q5().makeTensorFromDataId(u,t,n,s)}}]),s}(T$);xEe.nextDataId=0;var kEe="4.22.0";function wEe(){k0().set("WEBGL_FORCE_F16_TEXTURES",!0)}R5()&&$5("webgl",(function(){return new xEe}),2);var IEe={forceHalfFloat:wEe},NEe=p((function e(t,n,r){l(this,e),this.variableNames=["A","B"],this.outputShape=z7(n,r),this.enableShapeUniforms=xSe(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),SEe="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",TEe=p((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];l(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=z7(n,r);var i=this.outputShape.length;this.enableShapeUniforms=xSe(i);var o="";if(a)if(0===i||1===L$(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=hSe(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=XTe("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function EEe(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var CEe={kernelName:W1,backendName:"webgl",kernelFunc:EEe};function AEe(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=EEe({inputs:{x:r},backend:n}),u=EEe({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var REe={kernelName:Z0,backendName:"webgl",kernelFunc:AEe},_Ee="return (a < 0.) ? b * a : a;",OEe="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var FEe={kernelName:q1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",M4(i,"float32")),s=k0().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TEe(OEe,a.shape,o.shape):new NEe(_Ee,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},DEe="return (a < 0.) ? b * a : a;",MEe="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var LEe={kernelName:C2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=k0().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TEe(MEe,r.shape,a.shape):new NEe(DEe,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function zEe(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var h=c.texData.get(u.dataId),p=r(h.values,l);return c.makeTensorInfo(u.shape,l,p)}return i=k0().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new vEe(u.shape,n):new tEe(u.shape,t),c.runWebGLProgram(i,[u],l)}}function PEe(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,c=r.a,l=r.b,h=i;if(o&&"complex64"===c.dtype){var p=h.texData.get(c.dataId),f=h.texData.get(l.dataId),d=[[p.complexTensorInfos.real,f.complexTensorInfos.real],[p.complexTensorInfos.imag,f.complexTensorInfos.imag]].map((function(e){var n=S(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new NEe(t,c.shape,l.shape);return h.runWebGLProgram(s,[i,o],h5(r.dtype,a.dtype))})),v=S(d,2),m=v[0],g=v[1],y=AEe({inputs:{real:m,imag:g},backend:h});return h.disposeIntermediateTensorInfo(m),h.disposeIntermediateTensorInfo(g),y}var b,x=u||h5(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||h.shouldExecuteOnCPU([c,l]))&&null!=s){var k=h.texData.get(c.dataId).values,w=h.texData.get(l.dataId).values,I="string"===c.dtype?aoe(k):k,N="string"===c.dtype?aoe(w):w,T=S(s(c.shape,l.shape,I,N,x),2),E=T[0],C=T[1],A=h.makeTensorInfo(C,x);return h.texData.get(A.dataId).values=E,A}return b=k0().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new TEe(n,c.shape,l.shape,a):new NEe(t,c.shape,l.shape),h.runWebGLProgram(b,[c,l],x)}}function BEe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?lEe:rEe;if("relu"===e)return t?pEe:oEe;if("elu"===e)return t?hEe:iEe;if("relu6"===e)return t?fEe:sEe;if("prelu"===e)return t?MEe:DEe;if("leakyrelu"===e)return t?OEe:_Ee;if("sigmoid"===e)return t?dEe:cEe;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var WEe=p((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];l(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=xSe(this.outputShape.length);var h=a?t[1]:t[2],p=Math.ceil(h/2),f=a?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",v=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",y="";s&&(g=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),y="result = activation(result);");var b=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var x="rc.x",k="rc.x";t[0]<n[0]?x="imod(rc.x, ".concat(t[0],")"):n[0]<t[0]&&(k="imod(rc.x, ".concat(n[0],")")),this.userCode="\n      ".concat(g,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(p,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(x,";\n        int batchB = ").concat(k,";\n        for (int i = 0; i < ").concat(p,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(f,");\n          vec4 b = getMatrixB(batchB, ").concat(d,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(v[0]," * ").concat(m[0],");\n          result += (").concat(v[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(b,"\n\n        ").concat(y,"\n\n        setOutput(result);\n      }\n    ")})),UEe="return areal * breal - aimag * bimag;",VEe="return areal * bimag + aimag * breal;",GEe=p((function e(t,n,r){l(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=z7(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),jEe="return a * b;";function HEe(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=h5(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),c=new GEe(UEe,a.shape,i.shape),l=new GEe(VEe,a.shape,i.shape),h=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],p=r.runWebGLProgram(c,h,"float32"),f=r.runWebGLProgram(l,h,"float32"),d=AEe({inputs:{real:p,imag:f},backend:r});return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(f),d}if(r.shouldExecuteOnCPU([a,i])){var v=r.texData.get(a.dataId),m=r.texData.get(i.dataId),g=S(xTe(a.shape,i.shape,v.values,m.values,o),2),y=g[0],b=g[1],x=r.makeTensorInfo(b,o);return r.texData.get(x.dataId).values=y,x}return t=k0().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TEe(jEe,a.shape,i.shape):new NEe(jEe,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var qEe={kernelName:g2,backendName:"webgl",kernelFunc:HEe};function KEe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=L$(a.shape),u=G$(i,s),c=L$(u);F$(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=o.texData.get(a.dataId);return!l.isPacked||ENe(a.shape,u)||null!==l.texture&&ENe(l.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[wNe(e.shape)].concat(T(INe(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[wNe(t)].concat(T(INe(t))),o=new JTe(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var XEe={kernelName:z2,backendName:"webgl",kernelFunc:KEe},YEe=p((function e(t,n){l(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var h=1/n;c="sumValue += dot(values * ".concat(B$(h)?h.toPrecision(2):h,", ones);")}var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),JEe=p((function e(t,n){l(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var h=4*Math.floor(r/4),p=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),d="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var v="";i%r>0&&(v="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(v,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(h,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(h,";\n        if (").concat(1===p,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===p,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===p,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function ZEe(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=hie(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],c=u.inSize,l=u.windowSize,h=u.outSize,p=void 0;p="mean"===n?0===o?new YEe({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:h},c):new YEe({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:h}):new JEe({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:h},n),s=i,i=r.runWebGLProgram(p,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var QEe=p((function e(t,n){l(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=hSe(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var $Ee=p((function e(t,n){l(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=hSe(this.rank),o=KTe("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),h="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),p="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(p,";\n      if(").concat(h,") {\n        result[1] = ").concat(p,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(p,";\n        if(").concat(h,") {\n          result[3] = ").concat(p,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function eCe(e,t,n){var r=k0().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $Ee(e.shape,t):new QEe(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function tCe(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=j$(a,e.shape),s=o,u=$7(s,i),c=null!=u,l=e;c&&(l=eCe(e,u,r),s=t9(s.length,i)),Q7("sum",s,i);var h=S(J7(l.shape,s),2),p=h[0],f=h[1],d=p;n&&(d=Z7(p,o));var v=L$(f),m=KEe({inputs:{x:l},attrs:{shape:[L$(e.shape)/v,v]},backend:r}),g=ZEe(m,p5(e.dtype),"sum",r),y=KEe({inputs:{x:g},attrs:{shape:d},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),c&&r.disposeIntermediateTensorInfo(l),y}(t.x,r.axis,r.keepDims,n)}var nCe={kernelName:a3,backendName:"webgl",kernelFunc:tCe};function rCe(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var h=s.texData.get(i.dataId).values,p=HTe(h,i.shape,i.dtype,o,c);t=s.makeTensorInfo(c,i.dtype),s.texData.get(t.dataId).values=p}else t=eCe(i,o,s);return t}var aCe={kernelName:T3,backendName:"webgl",kernelFunc:rCe};function iCe(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,h=void 0===l?0:l,p=e.activation,f=void 0===p?null:p,d=t.shape.length,v=n.shape.length,m=r?t.shape[d-2]:t.shape[d-1],g=a?n.shape[v-1]:n.shape[v-2],y=r?t.shape[d-1]:t.shape[d-2],b=a?n.shape[v-2]:n.shape[v-1],x=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=L$(x),I=L$(k),N=z7(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);F$(m===g,(function(){return"Error in matMul: inner shapes (".concat(m,") and (")+"".concat(g,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var S,T=r?[w,m,y]:[w,y,m],E=a?[I,b,g]:[I,g,b],C=KEe({inputs:{x:t},backend:i,attrs:{shape:T}}),A=KEe({inputs:{x:n},backend:i,attrs:{shape:E}}),R=[C,A],_=Math.max(w,I),O=r?C.shape[1]:C.shape[2],F=null!=s,D=null!=c,M="leakyrelu"===f,L=null!=f?BEe(f,!0):null;if((1===y||1===b)&&O>1e3&&!1===(F||D||M||null!=L)){var z=C,P=A;r&&(z=rCe({inputs:{x:C},backend:i,attrs:{perm:[0,2,1]}}),R.push(z)),a&&(P=rCe({inputs:{x:A},backend:i,attrs:{perm:[0,2,1]}}),R.push(P));var B=1===b,W=z;1!==b&&(W=KEe({inputs:{x:z},backend:i,attrs:{shape:[_,O,1]}}),R.push(W));var U=1===b?2:1,V=P;B&&(V=KEe({inputs:{x:P},backend:i,attrs:{shape:[_,1,O]}}),R.push(V));var G=HEe({inputs:{a:W,b:V},backend:i});S=tCe({inputs:{x:G},backend:i,attrs:{axis:U,keepDims:!0}}),R.push(G)}else{var j=h5(t.dtype,n.dtype),H=new WEe(T,E,[_,y,b],r,a,F,L,D,M),q=[C,A];if(null!=s&&q.push(s),D&&q.push(c),M){var K=i.makeTensorInfo([],"float32",M4(h,"float32"));q.push(K),R.push(K)}S=i.runWebGLProgram(H,q,j)}var X=KEe({inputs:{x:S},backend:i,attrs:{shape:N}});R.push(S);for(var Y=0,J=R;Y<J.length;Y++){var Z=J[Y];i.disposeIntermediateTensorInfo(Z)}return X}var oCe={kernelName:D3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return iCe({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},sCe="return abs(x);";var uCe={kernelName:N0,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=_Te(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=k0().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new vEe(a.shape,sCe):new tEe(a.shape,sCe),r.runWebGLProgram(t,[a],a.dtype)}},cCe=zEe({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),lCe={kernelName:S0,backendName:"webgl",kernelFunc:cCe},hCe=zEe({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),pCe={kernelName:T0,backendName:"webgl",kernelFunc:hCe},fCe="return a + b;",dCe=PEe({opSnippet:fCe,packedOpSnippet:fCe,supportsComplex:!0,cpuKernelImpl:QSe}),vCe={kernelName:E0,backendName:"webgl",kernelFunc:dCe},mCe=p((function e(t,n){l(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),gCe=p((function e(t,n){l(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var yCe={kernelName:C0,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return EEe({inputs:{x:a[0]},backend:r});if(a.length>k0().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return h5(e,t)})),c=a.map((function(e){return e.shape})),l=k0().getBool("WEBGL_PACK")?new gCe(a[0].shape,c):new mCe(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var bCe={kernelName:A0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=j$(i,a.shape),c=u,l=$7(c,s),h=a;null!=l&&(h=rCe({inputs:{x:a},backend:n,attrs:{perm:l}}),c=t9(c.length,s)),Q7("all",c,s);var p,f=S(J7(h.shape,c),2),d=f[0],v=KEe({inputs:{x:h},backend:n,attrs:{shape:[-1,L$(f[1])]}}),m=ZEe(v,v.dtype,"all",n);return p=KEe(o?{inputs:{x:m},backend:n,attrs:{shape:Z7(d,u)}}:{inputs:{x:m},backend:n,attrs:{shape:d}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(h),p}};var xCe={kernelName:R0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=j$(i,a.shape),c=u,l=$7(c,s),h=a;null!=l&&(h=rCe({inputs:{x:a},backend:n,attrs:{perm:l}}),c=t9(c.length,s)),Q7("any",c,s);var p,f=S(J7(h.shape,c),2),d=f[0],v=KEe({inputs:{x:h},backend:n,attrs:{shape:[-1,L$(f[1])]}}),m=ZEe(v,v.dtype,"any",n);return p=KEe(o?{inputs:{x:m},backend:n,attrs:{shape:Z7(d,u)}}:{inputs:{x:m},backend:n,attrs:{shape:d}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(h),p}},kCe=p((function e(t,n,r){l(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),wCe=p((function e(t,n,r,a){l(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,F$(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,h=c.length,p=hSe(h),f=XTe("coords",h);if(1===o){var d=hSe(u=h+1);s="\n        ".concat(d," sourceLocR = ").concat(d,"(").concat(f.join(),", 0);\n        ++").concat(f[h-1],";\n        ").concat(d," sourceLocG = ").concat(d,"(").concat(f.join(),", 0);\n        ++").concat(f[h-2],";\n        ").concat(d," sourceLocA = ").concat(d,"(").concat(f.join(),", 0);\n        --").concat(f[h-1],";\n        ").concat(d," sourceLocB = ").concat(d,"(").concat(f.join(),", 0);\n        --").concat(f[h-2],";")}else u=h,s="\n        ".concat(p," sourceLocR = coords;\n        ++").concat(f[h-1],";\n        ").concat(p," sourceLocG = coords;\n        ++").concat(f[h-2],";\n        ").concat(p," sourceLocA = coords;\n        --").concat(f[h-1],";\n        ").concat(p," sourceLocB = coords;\n        --").concat(f[h-2],";");var v=["x","y","z","w","u","v"].slice(0,u),m="."+v[u-1],g=v.map((function(e){return"int "+e})),y=XTe("sourceLocR",u-1).concat("inIdx.r"),b=XTe("sourceLocG",u-1).concat("inIdx.g"),x=XTe("sourceLocB",u-1).concat("inIdx.b"),k=XTe("sourceLocA",u-1).concat("inIdx.a"),w="max"===r?"greaterThan":"lessThan",I=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),"),\n                             getBestIndicesAChannel(").concat(k.join(),")));"),N="vec4(\n            getAChannel(".concat(y.join(),"),\n            hasNextCol ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(x.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(k.join(),") : 0.)"),S=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(v.join(),"),\n                                          vec2(").concat(v.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(v.join(),"),\n                               vec2(").concat(v.slice(-2).join(),"));\n      }\n      ").concat(S,"\n      void main() {\n        ").concat(p," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[h-1]," < ").concat(c[h-1]-1,";\n        bool hasNextRow = ").concat(f[h-2]," < ").concat(c[h-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(N,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(I,"\n          vec4 candidate = ").concat(N,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(w,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function ICe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=hie(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new kCe(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var h=ICe(e,t,n,l);return e.disposeIntermediateTensorInfo(l),h}function NCe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=hie(i),s=new wCe(a,o,n,null==r),u=null==r?[t]:[t,r],c=e.runWebGLProgram(s,u,"int32");if(c.shape.length===t.shape.length){var l=NCe(e,t,n,c);return e.disposeIntermediateTensorInfo(c),l}return c}function SCe(e,t,n,r){var a=[n];if(Q7("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!k0().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var u=S(J7(s.shape,a),2),c=u[0],l=L$(u[1]),h=KEe({inputs:{x:s},backend:e,attrs:{shape:[-1,l]}});i.push(h);var p=ICe(e,h,r);i.push(p);var f=KEe({inputs:{x:p},backend:e,attrs:{shape:c}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),f}return NCe(e,t,r)}var TCe={kernelName:_0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=j$(r.axis,a.shape),o=$7(i,a.shape.length),s=a,u=[];null!=o&&(s=rCe({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=t9(i.length,s.shape.length)),Q7("argMax",[i[0]],s.shape.length);var c=SCe(n,s,i[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}};var ECe={kernelName:O0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=j$(r.axis,a.shape),o=$7(i,a.shape.length),s=a,u=[];null!=o&&(s=rCe({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=t9(i.length,s.shape.length)),Q7("argMin",[i[0]],s.shape.length);var c=SCe(n,s,i[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},CCe=zEe({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),ACe={kernelName:F0,backendName:"webgl",kernelFunc:CCe},RCe=zEe({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),_Ce={kernelName:D0,backendName:"webgl",kernelFunc:RCe},OCe=zEe({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),FCe={kernelName:M0,backendName:"webgl",kernelFunc:OCe},DCe=PEe({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),MCe={kernelName:z0,backendName:"webgl",kernelFunc:DCe},LCe=zEe({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),zCe={kernelName:L0,backendName:"webgl",kernelFunc:LCe},PCe=p((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(l(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,h=t.dilationWidth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),b="0.0";if(m||(b="-1.0 / 1e-20"),r){var x=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(v,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(p,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(h,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(x," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?g:y:"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var k="max",w="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(w="avgValue / max(count, 1.0)");var I=4*Math.floor(o/4),N=o%4,S="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(k,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(v,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(I,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(h,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(h,", d),\n              getValue(batch, xR, xC + 2 * ").concat(h,", d),\n              getValue(batch, xR, xC + 3 * ").concat(h,", d)\n            );\n\n            ").concat(S,"\n          }\n\n          int xC = xCCorner + ").concat(I,";\n          if (").concat(1===N,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(S,"\n          } else if (").concat(2===N,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(h,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(S,"\n          } else if (").concat(3===N,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(h,", d),\n              getValue(batch, xR, xC + 2 * ").concat(h,", d),\n              initializationValue\n            );\n\n            ").concat(S,"\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}})),BCe=p((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(l(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,h=t.dilationDepth,p=t.dilationHeight,f=t.dilationWidth,d=t.effectiveFilterDepth,v=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,y=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;var x="avg"===n,k="0.0";if(x||(k="-1.0 / 1e-20"),r){var w=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(y,", ").concat(b,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(h,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(v,";\n                wR += ").concat(p,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(w," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(v," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var I="max",N="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(N="avgValue / max(count, 1.0)");var S=4*Math.floor(o/4),T=o%4,E="\n      if (".concat(x,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(I,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(y,", ").concat(b,");\n      const float initializationValue = ").concat(k,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(k,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(h,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(v,";\n            wR += ").concat(p,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(S,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(E,"\n            }\n\n            int xC = xCCorner + ").concat(S,";\n            if (").concat(1===T,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(2===T,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(3===T,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(E,"\n            }\n          }\n        }\n        setOutput(").concat(N,");\n      }\n    ")}}));var WCe={kernelName:P0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;zNe(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;F$(j8(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=O8(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&P$(c.inShape,c.outShape))return EEe({inputs:{x:a},backend:n});var l=new PCe(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var UCe={kernelName:W0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=F8(a.shape,i,o,[1,1,1],s,u,c),h=new BCe(l,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}},VCe=p((function e(t){l(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,h=u-1-t.padInfo.top,p=c-1-t.padInfo.left,f=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(h,", ").concat(p,");\n      const float avgMultiplier = float(").concat(f,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),GCe=p((function e(t){l(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,h=t.dilationWidth,p=t.effectiveFilterDepth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,v=p-1-t.padInfo.front,m=f-1-t.padInfo.top,g=d-1-t.padInfo.left,y=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(v,", ").concat(m,", ").concat(g,");\n      const float avgMultiplier = float(").concat(y,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(h,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var jCe={kernelName:U0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=F8(i.shape,o,s,[1,1,1],u,c),h=new GCe(l);return n.runWebGLProgram(h,[a],i.dtype)}};var HCe={kernelName:B0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;zNe([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=O8(o.shape,s,u,1,c),h=new VCe(l);return n.runWebGLProgram(h,[a],o.dtype)}};var qCe={kernelName:V0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return iCe({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},KCe=p((function e(t,n,r,a,i,o){l(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],z7(t,n),z7(t,r);var s="0.0";null!=a&&(z7(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(z7(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),XCe=p((function e(t,n,r,a,i,o){l(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],z7(t,n),z7(t,r);var s="vec4(0.0)";null!=a&&(z7(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(z7(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),YCe={kernelName:M1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;F$(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),F$(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),F$(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,i,o],h=null;null!=s&&(h=s.shape,l.push(s));var p=null;null!=u&&(p=u.shape,l.push(u));var f=k0().getBool("WEBGL_PACK_NORMALIZATION")?new XCe(a.shape,i.shape,o.shape,h,p,c):new KCe(a.shape,i.shape,o.shape,h,p,c);return n.runWebGLProgram(f,l,l[0].dtype)}},JCe=p((function e(t){l(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=hSe(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return ZCe.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(ZCe[t]," = start[").concat(t,"] + coords.").concat(ZCe[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),ZCe=["x","y","z","w","u","v"];var QCe=p((function e(t){l(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=hSe(this.rank),r=XTe("coords",this.rank),a=XTe("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function $Ce(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=S(Yae(a,r.begin,r.size),2),o=i[0],s=i[1];if(zae(a,o,s),0===L$(s))return n.makeTensorInfo(s,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var u=n.texData.get(a.dataId),c=OTe(u.values,o,s,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,c)}var l=n.texData.get(a.dataId).isPacked,h=Kae(a.shape,o,s);if(l||!h){var p=k0().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new QCe(s):new JCe(s),f=[o];return n.runWebGLProgram(p,[a],a.dtype,f)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=Xae(t,i0(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,o,s,n)}var eAe={kernelName:Z2,backendName:"webgl",kernelFunc:$Ce},tAe={kernelName:G0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;F$(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=fie(a.shape,i,s),c=die(u.length,i.length),l=vie(a.shape,i,s),h=mie(o,i.length),p=gie(l,o,i.length),f=[],d=KEe({inputs:{x:a},backend:n,attrs:{shape:u}}),v=rCe({inputs:{x:d},backend:n,attrs:{perm:c}}),m=KEe({inputs:{x:v},backend:n,attrs:{shape:l}}),g=$Ce({inputs:{x:m},backend:n,attrs:{begin:h,size:p}});return f.push(d),f.push(v),f.push(m),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var nAe={kernelName:j0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=$Se(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var rAe={kernelName:H0,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=k0().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=k0().getNumber("WEBGL_VERSION");if(r.shouldExecuteOnCPU([a,i])||1===s){var u=r.texData.get(a.dataId).values,c=r.texData.get(i.dataId).values,l=S(tTe(a.shape,i.shape,u,c,a.dtype),2),h=l[0],p=l[1],f=r.makeTensorInfo(p,a.dtype);return r.texData.get(f.dataId).values=h,f}return t=o?new TEe("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",a.shape,i.shape,!1):new NEe("\n  return float(int(a.r) & int(b.r));\n",a.shape,i.shape),r.runWebGLProgram(t,[a,i],a.dtype)}};var aAe={kernelName:K0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=z7(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},iAe=PEe({opSnippet:"return float(a != b);",cpuKernelImpl:wTe,dtype:"bool"}),oAe={kernelName:b2,backendName:"webgl",kernelFunc:iAe};function sAe(e){var t=e.inputs,n=e.backend,r=t.input;return EEe({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var uAe={kernelName:D2,backendName:"webgl",kernelFunc:sAe};var cAe={kernelName:X0,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return EEe({inputs:{x:i},backend:r});var s=$9(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),c=AEe({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===i.dtype){var l=sAe({inputs:{input:i},backend:r}),h=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(l),h}if(!J$(i.dtype,o)){var p=EEe({inputs:{x:i},backend:r});return{dataId:p.dataId,shape:p.shape,dtype:o}}if(r.shouldExecuteOnCPU([i])){var f=r.texData.get(i.dataId).values,d=S(nTe(f,i.shape,i.dtype,o),3),v=d[0],m=d[1],g=d[2];return r.makeTensorInfo(v,m,g)}if("int32"===o)return function(e,t){var n=new tEe(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var y=r.makeTensorInfo([],"bool",q$("bool",1)),b=iAe({inputs:{a:i,b:y},backend:r});return r.disposeIntermediateTensorInfo(y),b}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},lAe="return ceil(x);",hAe=zEe({opSnippet:lAe,packedOpSnippet:lAe,cpuKernelImpl:rTe}),pAe={kernelName:Y0,backendName:"webgl",kernelFunc:hAe},fAe=p((function e(t){l(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),dAe=p((function e(t){l(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var vAe={kernelName:J0,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=k0().getBool("WEBGL_PACK_CLIP")?new dAe(i.shape):new fAe(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},mAe=p((function e(t){l(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function gAe(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var yAe={kernelName:Q0,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new mAe(r.shape),o=[gAe(r,a.complexTensorInfos.real),gAe(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},bAe=p((function e(t){l(this,e),this.outputShape=[],this.outputShape=oie(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),xAe=p((function e(t,n){l(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=oie(t,n);var r=this.outputShape,a=r.length,i=hSe(a),o=XTe("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var h=s[n],p=s.slice(-2),f=s.join(),d="if (".concat(h," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(p.join(),"));\n        }"),v=1;v<u.length;v++){var m=u[v-1];d+="\n        if (".concat(h," < ").concat(u[v],"  && ").concat(h," >= ").concat(u[v-1],") {\n          return getChannel(\n            getT").concat(v,"(").concat(kAe(s,h,m),"),\n            vec2(").concat(kAe(p,h,m),"));\n        }")}var g=u.length,y=u[u.length-1];d+="\n        return getChannel(\n          getT".concat(g,"(").concat(kAe(s,h,y),"),\n          vec2(").concat(kAe(p,h,y),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function kAe(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function wAe(e){var t=e.inputs,n=e.backend,r=t.input;return EEe({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var IAe={kernelName:V1,backendName:"webgl",kernelFunc:wAe};function NAe(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return sAe({inputs:{input:e},backend:n})})),i=e.map((function(e){return wAe({inputs:{input:e},backend:n})})),o=NAe(a,t,n),s=NAe(i,t,n),u=AEe({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=L$(e.shape.slice(t));return KEe({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),h=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),p=oie(l.map((function(e){return e.shape})),1),f=1===l[0].shape[0],d=aTe(h,p,r,f),v=oie(e.map((function(e){return e.shape})),t),m=n.makeTensorInfo(v,r,d);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}var g=e.filter((function(e){return L$(e.shape)>0})),y=k0().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&g[0].shape.length>1;if(1===g.length){var b=y?new tEe(e[0].shape,uEe):new vEe(e[0].shape,uEe);return n.runWebGLProgram(b,e,r)}var x=k0().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(g.length>x){for(var k=[],w=0;w<g.length;w+=x){var I=g.slice(w,w+x);k.push(NAe(I,t,n))}for(var N=NAe(k,t,n),S=0,T=k;S<T.length;S++){var E=T[S];n.disposeIntermediateTensorInfo(E)}return N}if(y){var C=new xAe(g.map((function(e){return e.shape})),t);return n.runWebGLProgram(C,g,r)}var A=function(e,t,n){var r=oie(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return KEe({inputs:{x:e},attrs:{shape:[-1,L$(e.shape.slice(t))]},backend:n})})),outShape:r}}(g,t,n),R=A.tensors2D,_=A.outShape,O=new bAe(R.map((function(e){return e.shape}))),F=n.runWebGLProgram(O,R,r);R.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var D=KEe({inputs:{x:F},attrs:{shape:_},backend:n});return n.disposeIntermediateTensorInfo(F),D}function SAe(e){var t=e.inputs,n=e.backend,r=j$(e.attrs.axis,t[0].shape)[0];iie(t.map((function(e){return e.shape})),r);var a=oie(t.map((function(e){return e.shape})),r);if(0===L$(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return L$(e.shape)>0}));return 1===i.length?EEe({inputs:{x:i[0]},backend:n}):NAe(i,r,n)}var TAe={kernelName:$0,backendName:"webgl",kernelFunc:SAe},EAe=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];l(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,h=t.dilationHeight,p=t.dilationWidth,f=t.filterHeight,d=t.filterWidth,v=4*Math.floor(t.inChannels/4),m=t.inChannels%4,g="channelsLast"===t.dataFormat,y=g?1:2,b=g?2:3,x=g?3:1,k="",w="";r&&(k=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),w="result = activation(result);");var I=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(k,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(x,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(y,"], coords[").concat(b,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(f,"; wR++) {\n          int xR = xRCorner + wR * ").concat(h,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(d,"; wC++) {\n            int xC = xCCorner + wC * ").concat(p,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(v,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(v,") *\n                    getW(wR, wC, ").concat(v,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(v,", xR, xC) *\n                    getW(wR, wC, ").concat(v,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(v,", d2),\n                getW(wR, wC, ").concat(v," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(v,"),\n                  getX(batch, xR, xC, ").concat(v," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(v,", xR, xC),\n                  getX(batch, ").concat(v," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(v,", d2),\n                getW(wR, wC, ").concat(v," + 1, d2),\n                getW(wR, wC, ").concat(v," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(v,"),\n                  getX(batch, xR, xC, ").concat(v," + 1),\n                  getX(batch, xR, xC, ").concat(v," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(v,", xR, xC),\n                  getX(batch, ").concat(v," + 1, xR, xC),\n                  getX(batch, ").concat(v," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(I,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")})),CAe=p((function e(t){l(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,h=t.dilationWidth,p=t.filterDepth,f=t.filterHeight,d=t.filterWidth,v=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(p,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(v,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(v,") *\n                  getW(wF, wR, wC, ").concat(v,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(v,"),\n                  getX(batch, xF, xR, xC, ").concat(v," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(v,", d2),\n                  getW(wF, wR, wC, ").concat(v," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(v,"),\n                  getX(batch, xF, xR, xC, ").concat(v," + 1),\n                  getX(batch, xF, xR, xC, ").concat(v," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(v,", d2),\n                  getW(wF, wR, wC, ").concat(v," + 1, d2),\n                  getW(wF, wR, wC, ").concat(v," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),AAe=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];l(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=xSe(this.outputShape.length);for(var o=t.padInfo.left,s=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,h=t.filterWidth,p=h,f="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;",d=0;d<h;d++)f+="\n           vec4 xTexelC".concat(2*d,";\n           int xTexelC").concat(2*d,"Ready;\n           vec4 xTexelC").concat(2*d+1,";\n           int xTexelC").concat(2*d+1,"Ready;\n           vec4 xC").concat(d,";");f+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(t.inChannels,"; d1 += 2) {\n       ");for(var v=0;v<h;v++)f+="\n           xTexelC".concat(2*v," = vec4(0.0);\n           xTexelC").concat(2*v,"Ready = 0;\n           xTexelC").concat(2*v+1," = vec4(0.0);\n           xTexelC").concat(2*v+1,"Ready = 0;\n           xC").concat(v," = vec4(0.0);");f+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(var m=0;m<(p+1)/2;m++){var g=2*m;if(f+="\n           xC = xCCorner + ".concat(g*u,";\n           "),1===s){if(g<h&&(o%2==1?(f+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n               "),f+=1===u&&g>0?"\n                 xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                   } else {\n                     xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                   }\n                   ")):f+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xC").concat(g," = xTexelC").concat(g,";\n                 "),g+1<h)){var y=o%2==0?R$(u):u;u%2==0&&o%2==1||u%2!=0&&o%2!=1?(f+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                     xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(g+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(g+1,"Ready = 1;\n                   }\n                   "),f+=u>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(g+1," = vec4(previous.zw, xTexelC").concat(g+1,".xy);\n                     } else {\n                      xC").concat(g+1," = vec4(0.0, 0.0, xTexelC").concat(g+1,".xy);\n                     }\n                     "):"\n                     xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                     ")):f+=1===y?"\n                     xC".concat(g+1," = xTexelC").concat(g,";\n                     "):"\n                     xCOffset = xC + ".concat(y,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                       xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(g+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(g+1,"Ready = 1;\n                     }\n\n                     xC").concat(g+1," = xTexelC").concat(g+1,";\n                     ")}}else g<h&&(o%2==1?(f+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n               "),g+1<h&&(f+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                 "))):(f+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(\n                   xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n               "),g+1<h&&(f+="\n                   xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                 "))));g<h&&(f+="\n             wTexel = getW(r, ".concat(g,", d1, d2);\n             dotProd += xC").concat(g,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(t.inChannels,") {\n               dotProd += xC").concat(g,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),g+1<h&&(f+="\n               wTexel = getW(r, ".concat(g+1,", d1, d2);\n               dotProd += xC").concat(g+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(t.inChannels,") {\n                 dotProd += xC").concat(g+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}f+="\n     }\n   ",f+="\n     }\n   ",f+="\n     }\n   ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(r,"\n         }"):i?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(r,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(r,"\n         }"),x="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(b,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(f,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(k,"\n         ").concat(x,"\n         setOutput(result);\n       }\n     ")})),RAe=p((function e(t,n){l(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=xSe(this.outputShape.length);for(var r=n.dataFormat,a=WNe(),i="channelsLast"===r,o=i?1:2,s=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),c="",h=0;h<=1;h++)for(var p=0;p<=1;p++)c+="\n          blockIndex = rc.z + ".concat(p,";\n          pos = rc.y + ").concat(h,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*h+p,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*h+p,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function _Ae(e,t){var n=e.length;return n>=3?[].concat(T(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function OAe(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,h=void 0===l?0:l,p=e.activation,f=void 0===p?null:p,d=n.shape,v=i.texData.get(n.dataId),m=a.inChannels,g=d[0]*d[1]*d[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=c){var k=_Ae(c.shape,b);null!=k&&(c=KEe({inputs:{x:c},backend:i,attrs:{shape:k}}),x.push(c))}if(null!=s){var w=_Ae(s.shape,b);null!=w&&(s=KEe({inputs:{x:s},backend:i,attrs:{shape:w}}),x.push(s))}if(!((1===g||1===y)&&m>1e3)&&v.isPacked&&b&&null!=v.texture&&d[2]%2!=0&&P$(v.shape.slice(-3),d.slice(-3))){var I=d[0]*d[1]*(d[2]+1),N={dataId:n.dataId,shape:[1,I,a.inChannels],dtype:n.dtype},S=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,F$(ENe(v.shape,N.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(N.shape," isn't free")}));var T=KEe({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(T);var E=iCe({a:N,b:T,backend:i,transposeA:!1,transposeB:false,bias:s,activation:f,preluActivationWeights:c,leakyreluAlpha:h}),C=i.texData.get(E.dataId);F$(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=S,C.shape=a.outShape,(t=EEe({inputs:{x:E},backend:i})).shape=a.outShape,x.push(E)}else{var A=a.outHeight*a.outWidth,R=KEe({inputs:{x:n},backend:i,attrs:{shape:b?[a.batchSize,A,a.inChannels]:[a.batchSize,a.inChannels,A]}}),_=KEe({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),O=iCe({a:b?R:_,b:b?_:R,transposeA:!b,transposeB:false,backend:i,bias:s,activation:f,preluActivationWeights:c,leakyreluAlpha:h});t=KEe({inputs:{x:O},backend:i,attrs:{shape:a.outShape}}),x.push(R),x.push(_),x.push(O)}for(var F=0,D=x;F<D.length;F++){var M=D[F];i.disposeIntermediateTensorInfo(M)}return t}function FAe(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,h=e.activation,p=void 0===h?null:h,f=r.filterWidth,d=r.filterHeight,v=r.inChannels,m=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=f*d*v,x=g*m,k=[r.batchSize,b,x],w=[];if(null!=u){var I=_Ae(u.shape,y);null!=I&&(u=KEe({inputs:{x:u},backend:a,attrs:{shape:I}}),w.push(u))}if(null!=o){var N=_Ae(o.shape,y);null!=N&&(o=KEe({inputs:{x:o},backend:a,attrs:{shape:N}}),w.push(o))}var S=KEe({inputs:{x:n},backend:a,attrs:{shape:[1,b,L$(n.shape)/b]}});w.push(S);var T=new RAe(k,r),E=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],C=a.runWebGLProgram(T,[t],"float32",E),A=KEe({inputs:{x:C},backend:a,attrs:{shape:k}});w.push(C),w.push(A);var R=null!=o,_=null!=u,O="leakyrelu"===p,F=p?BEe(p,!0):null,D=new WEe(y?A.shape:S.shape,y?S.shape:A.shape,y?[r.batchSize,x,r.outChannels]:[r.batchSize,r.outChannels,x],!0,!1,R,F,_,O),M=y?[A,S]:[S,A];if(o&&M.push(o),_&&M.push(u),O){var L=a.makeTensorInfo([],"float32",M4(l,"float32"));M.push(L),w.push(L)}var z=a.runWebGLProgram(D,M,"float32"),P=KEe({inputs:{x:z},backend:a,attrs:{shape:r.outShape}});w.push(z);for(var B=0,W=w;B<W.length;B++){var U=W[B];a.disposeIntermediateTensorInfo(U)}return P}var DAe={kernelName:e1,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,h=a.dimRoundingMode,p=q8(c),f=D8(i.shape,o.shape,s,l,u,h,!1,p);if(1!==f.filterHeight||1!==f.filterWidth||1!==f.dilationHeight||1!==f.dilationWidth||1!==f.strideHeight||1!==f.strideWidth||"SAME"!==f.padInfo.type&&"VALID"!==f.padInfo.type)if(f.strideWidth<=2&&"channelsLast"===p&&k0().getBool("WEBGL_EXP_CONV")){var d=new AAe(f),v=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];t=r.runWebGLProgram(d,[i,o],"float32",v)}else if(k0().getBool("WEBGL_CONV_IM2COL"))t=FAe({x:i,filter:o,convInfo:f,backend:r});else{var m=new EAe(f);t=r.runWebGLProgram(m,[i,o],"float32")}else t=OAe({x:i,filter:o,convInfo:f,backend:r});var g=KEe({inputs:{x:t},backend:r,attrs:{shape:f.outShape}});return r.disposeIntermediateTensorInfo(t),g}},MAe=p((function e(t){l(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              ").concat(o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),LAe=p((function e(t){l(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=o?1:2,h=o?2:3,p=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(p,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(h,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),zAe=p((function e(t){l(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),PAe=p((function e(t){l(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,h=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var BAe={kernelName:t1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,h=q8(u),p=D8(a.shape,l,o,1,s,c,!1,h),f=new MAe(p);return n.runWebGLProgram(f,[a,i],"float32")}},WAe=p((function e(t){l(this,e),this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=xSe(this.outputShape.length);var n=t.filterHeight,r=t.filterWidth,a=n-1-t.padInfo.top,i=r-1-t.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(t.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(t.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}));var UAe={kernelName:n1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,h=q8(c),p=D8(o,i.shape,s,1,u,l,!1,h);if(k0().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===h){var f=[[p.strideHeight,p.strideWidth]],d=new WAe(p);return n.runWebGLProgram(d,[a,i],"float32",f)}var v=new LAe(p);return n.runWebGLProgram(v,[a,i],"float32")}};var VAe={kernelName:r1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=M8(a.shape,i.shape,o,u,s),l=new CAe(c);return n.runWebGLProgram(l,[a,i],"float32")}};var GAe={kernelName:a1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,c=M8(a.shape,u,o,1,s),l=new zAe(c);return n.runWebGLProgram(l,[a,i],"float32")}};var jAe,HAe={kernelName:i1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=M8(r.inputShape,i.shape,s,1,o),c=new PAe(u);return n.runWebGLProgram(c,[a,i],"float32")}},qAe=zEe({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(SEe,"\n  return result;\n")}),KAe={kernelName:o1,backendName:"webgl",kernelFunc:qAe},XAe=zEe({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),YAe={kernelName:s1,backendName:"webgl",kernelFunc:XAe},JAe=p((function e(t,n,r,a,i){l(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=S(t,4),s=o[0],u=o[1],c=o[2],h=o[3],p=S(n,1)[0],f=S(r,2),d=f[0],v=f[1];this.outputShape=[p,d,v,h];var m="bilinear"===a?1:0,g="".concat(u-1,".0"),y="".concat(c-1,".0"),b=S(d>1?["".concat((u-1)/(d-1)),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],3),x=b[0],k=b[1],w=b[2],I=S(v>1?["".concat((c-1)/(v-1)),"(x2-x1) * width_ratio","x1*".concat(y," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(y)],3),N=I[0],T=I[1],E=I[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(N,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(k,";\n        float width_scale = ").concat(T,";\n\n        float in_y = ").concat(w,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(E,";\n        if( in_x < 0.0 || in_x > ").concat(y," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),ZAe={kernelName:l1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new JAe(a.shape,i.shape,s,u,c);return n.runWebGLProgram(l,[a,i,o],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(jAe||(jAe={}));var QAe=p((function e(t,n,r,a){l(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o=this.op===jAe.Prod?"1.0":"0.0",s=r?o:"getX(".concat($Ae(i,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],c="",h="";r?(c=a?"end != ".concat(u-1):"end != 0",h=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(u):"end >= pow2",h=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(hSe(i)," coords = getOutputCoords();\n        int end = ").concat(eRe(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(h,";\n          ").concat(eRe(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat($Ae(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function $Ae(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function eRe(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function tRe(e,t,n,r,a,i){var o=t.shape.length,s=$7([r],o),u=t;null!=s&&(u=rCe({inputs:{x:t},backend:n,attrs:{perm:s}}));var c=t9(1,o)[0];if(c!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var l=u.shape[c],h=EEe({inputs:{x:u},backend:n}),p=0;p<=Math.ceil(Math.log2(l))-1;p++){var f=new QAe(e,u.shape,!1,i),d=[[p]],v=h;h=n.runWebGLProgram(f,[h],h.dtype,d),n.disposeIntermediateTensorInfo(v)}if(a){var m=new QAe(e,u.shape,a,i),g=h;h=n.runWebGLProgram(m,[h],h.dtype),n.disposeIntermediateTensorInfo(g)}if(null!=s){var y=rCe({inputs:{x:h},backend:n,attrs:{perm:e9(s)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(u),y}return h}var nRe={kernelName:u1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return tRe(jAe.Prod,a,n,i,o,s)}};var rRe={kernelName:c1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return tRe(jAe.Sum,a,n,i,o,s)}};var aRe={kernelName:h1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=$Se(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var h=n.bufferSync(a),p=n.bufferSync(i),f=eTe(h,p,o,s);return n.makeTensorInfo(f.shape,i.dtype,f.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},iRe=function(){function e(t,n,r){l(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return p(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var oRe={kernelName:p1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),h=new iRe("NHWC"===o?[s,u,c,l]:[s,l,u,c],i,o);return n.runWebGLProgram(h,[a],a.dtype)}},sRe=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];l(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=xSe(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",h="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),h="result = activation(result);");var p=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(p,"\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")})),uRe=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];l(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=xSe(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,h=t.filterHeight,p=t.filterWidth,f=p,d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",v=0;v<p;v++)d+="\n          vec4 xTexelC".concat(2*v,";\n          int xTexelC").concat(2*v,"Ready;\n          vec4 xTexelC").concat(2*v+1,";\n          int xTexelC").concat(2*v+1,"Ready;\n          vec4 xC").concat(v,";");d+="\n    for (int r = 0; r < ".concat(h,"; r++) {\n      ");for(var m=0;m<p;m++)d+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var g=0;g<(f+1)/2;g++){var y=2*g;if(d+="\n          xC = xCCorner + ".concat(y*c,";\n          "),1===u){if(y<p&&(s%2==1?(d+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n              "),d+=1===c&&y>0?"\n                xC".concat(y," = vec4(xTexelC").concat(y-2,".zw, xTexelC").concat(y,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(y," = vec4(previous.zw, xTexelC").concat(y,".xy);\n                  } else {\n                    xC").concat(y," = vec4(0.0, 0.0, xTexelC").concat(y,".xy);\n                  }\n                  ")):d+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                xC").concat(y," = xTexelC").concat(y,";\n                "),y+1<p)){var b=s%2==0?R$(c):c;c%2==0&&s%2==1||c%2!=0&&s%2!=1?(d+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(b,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                    xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(y+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(y+1,"Ready = 1;\n                  }\n                  "),d+=c>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(y+1," = vec4(previous.zw, xTexelC").concat(y+1,".xy);\n                    } else {\n                     xC").concat(y+1," = vec4(0.0, 0.0, xTexelC").concat(y+1,".xy);\n                    }\n                    "):"\n                    xC".concat(y+1," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".xy);\n                    ")):d+=1===b?"\n                    xC".concat(y+1," = xTexelC").concat(y,";\n                    "):"\n                    xCOffset = xC + ".concat(b,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                      xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(y+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(y+1,"Ready = 1;\n                    }\n\n                    xC").concat(y+1," = xTexelC").concat(y+1,";\n                    ")}}else y<p&&(s%2==1?(d+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                  xTexelC").concat(y+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(y+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y+1,"Ready = 1;\n                }\n\n                xC").concat(y," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".zw);\n              "),y+1<p&&(d+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(y+1," = vec4(xTexelC").concat(y+1,".xy, final.xy);\n                "))):(d+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                  xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(y+1,"Ready = 1;\n                }\n\n                xC").concat(y," = vec4(\n                  xTexelC").concat(y,".xy, xTexelC").concat(y+1,".xy);\n              "),y+1<p&&(d+="\n                  xC".concat(y+1," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".zw);\n                "))));y<p&&(d+="\n            wTexel = getW(r, ".concat(y,", d1, q);\n            dotProd += xC").concat(y," * vec4(wTexel.xz, wTexel.xz);\n          "),y+1<p&&(d+="\n              wTexel = getW(r, ".concat(y+1,", d1, q);\n              dotProd += xC").concat(y+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}d+="\n    }\n  ",d+="\n      }\n    ";var x="",k="";r&&(x=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(d,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")}));var cRe={kernelName:f1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),F$(j8(o,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var h,p=D8(a.shape,i.shape,o,l,s,c,!0);h=k0().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels==1?new uRe(p):new sRe(p);var f=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];return n.runWebGLProgram(h,[a,i],"float32",f)}},lRe=p((function e(t){l(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),hRe=p((function e(t){l(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var pRe={kernelName:d1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,h=D8(a.shape,l,o,s,u,c,!0),p=new lRe(h);return n.runWebGLProgram(p,[a,i],"float32")}};var fRe={kernelName:v1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=D8(r.inputShape,i.shape,o,s,u,c,!0),h=new hRe(l);return n.runWebGLProgram(h,[a,i],"float32")}},dRe=p((function e(t){l(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var vRe={kernelName:m1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(T(r.shape),T(r.shape)),i=L$(r.shape),o=KEe({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new dRe(i),u=n.runWebGLProgram(s,[o],o.dtype),c=KEe({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}},mRe=p((function e(t){l(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,h=t.dilationWidth,p=a.top,f=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(f,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(h,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var gRe={kernelName:g1,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=_8(i.shape,o.shape,s,u,"NHWC",c),h=new mRe(l),p=KEe({inputs:{x:t=r.runWebGLProgram(h,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),p}};var yRe={kernelName:w1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=Lie(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;Pie(i.length,s,r);for(var u=Bie(o,s),c=u.path,l=u.steps,h=l.length,p=null,f=i.length,d=[],v=0;v<h;++v){var m,g=O(l[v]);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=zie(f,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;Wie(x)?w=r[y]:(w=rCe({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),d.push(w));for(var I=w.shape.slice(),N=0;N<k.length;++N)I.splice(k[N],0,1);P$(w.shape,I)||(w=KEe({inputs:{x:w},backend:n,attrs:{shape:I}}),d.push(w)),null===p?p=w:(p=HEe({inputs:{a:w,b:p},backend:n}),d.push(p))}}catch(e){g.e(e)}finally{g.f()}v<h-1&&(c[v]>=0&&(p=tCe({inputs:{x:p},backend:n,attrs:{axis:c[v]-(i.length-f),keepDims:!1}}),d.push(p)),f--)}for(var S=0,T=d;S<T.length;S++){var E=T[S];E!==p&&n.disposeIntermediateTensorInfo(E)}return p}},bRe=zEe({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),xRe={kernelName:I1,backendName:"webgl",kernelFunc:bRe},kRe={kernelName:N1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=k0().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TEe("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new NEe("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},wRe=PEe({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:iTe}),IRe={kernelName:T1,backendName:"webgl",kernelFunc:wRe},NRe=zEe({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(xie,";\n  float a1 = ").concat(kie,";\n  float a2 = ").concat(wie,";\n  float a3 = ").concat(Iie,";\n  float a4 = ").concat(Nie,";\n  float a5 = ").concat(Sie,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),SRe={kernelName:S1,backendName:"webgl",kernelFunc:NRe},TRe=zEe({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:oTe,dtype:"float32"}),ERe={kernelName:E1,backendName:"webgl",kernelFunc:TRe};function CRe(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(F$(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),KEe({inputs:{x:i},backend:r,attrs:{shape:s}})}var ARe={kernelName:C1,backendName:"webgl",kernelFunc:CRe},RRe="return exp(x) - 1.0;",_Re=zEe({opSnippet:RRe,packedOpSnippet:RRe,cpuKernelImpl:sTe}),ORe={kernelName:A1,backendName:"webgl",kernelFunc:_Re},FRe=p((function e(t,n,r){l(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function DRe(e,t,n){var r=n.texData.get(e.dataId),a=L$(e.shape),i=e.shape[e.shape.length-1],o=KEe({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new FRe("real",s,t),c=new FRe("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],h=n.runWebGLProgram(u,l,"float32"),p=n.runWebGLProgram(c,l,"float32"),f=AEe({inputs:{real:h,imag:p},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p);var d=KEe({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(f),d}var MRe={kernelName:R1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return DRe(t.input,!1,n)}},LRe=p((function e(t,n){l(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function zRe(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||n0(a))){var o=K$(i,L$(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new LRe(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var PRe,BRe={kernelName:_1,backendName:"webgl",kernelFunc:zRe},WRe=p((function e(t){l(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),URe={kernelName:O1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new WRe(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},VRe="return floor(x);",GRe=zEe({opSnippet:VRe,packedOpSnippet:VRe,cpuKernelImpl:uTe}),jRe={kernelName:F1,backendName:"webgl",kernelFunc:GRe},HRe=PEe({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),qRe={kernelName:D1,backendName:"webgl",kernelFunc:HRe},KRe=p((function e(t){l(this,e),this.variableNames=["A"];var n=WNe(),r=S(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),XRe=p((function e(t){l(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=WNe(),r=S(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),YRe={kernelName:O3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u=S(o?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),c=u[0],l=u[1],h=[l,c],p=[l,c,i];if(s||o){var f=k0().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=PRe&&f===JRe||(JRe=f,PRe=document.createElement("canvas").getContext("2d",{willReadFrequently:JRe})),PRe.canvas.width=c,PRe.canvas.height=l,PRe.drawImage(a,0,0,c,l),a=PRe.canvas}var d=n.makeTensorInfo(h,"int32");n.texData.get(d.dataId).usage=zIe.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);var v=k0().getBool("WEBGL_PACK")?new XRe(p):new KRe(p),m=n.runWebGLProgram(v,[d],"int32");return n.disposeData(d.dataId),m}},JRe=k0().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var ZRe={kernelName:M3,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,h=a.dataFormat,p=a.dilations,f=a.dimRoundingMode,d=a.activation,v=a.leakyreluAlpha,m=q8(h),g=D8(i.shape,o.shape,c,p,l,f,!1,m),y=[],b=null!=s,x=null!=u,k="leakyrelu"===d,w=function(){var e=[i,o],t=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=KEe({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&e.push(t(s,h)),x&&e.push(t(u,h)),k){var n=r.makeTensorInfo([],"float32",M4(v,"float32"));e.push(n),y.push(n)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&k0().getBool("WEBGL_EXP_CONV")){var I=d?BEe(d,!0):null,N=new AAe(g,b,I,x,k),S=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=w();t=r.runWebGLProgram(N,T,"float32",S)}else if(k0().getBool("WEBGL_CONV_IM2COL"))t=FAe({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:d,preluActivationWeights:u,leakyreluAlpha:v});else{var E=d?BEe(d,!1):null,C=new EAe(g,b,E,x,k),A=w();t=r.runWebGLProgram(C,A,"float32")}else t=OAe({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:d,preluActivationWeights:u,leakyreluAlpha:v});var R=KEe({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),R}};var QRe={kernelName:L3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,h=r.dimRoundingMode,p=r.activation,f=r.leakyreluAlpha,d=[],v=l;null==v&&(v=[1,1]),F$(j8(u,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(v,"'")}));var m,g=D8(a.shape,i.shape,u,v,c,h,!0),y=k0().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels==1,b=p?BEe(p,y):null,x=[a,i],k=null!=o,w=null!=s,I="leakyrelu"===p;if(k&&x.push(o),w&&x.push(s),I){var N=n.makeTensorInfo([],"float32",M4(f,"float32"));x.push(N),d.push(N)}m=y?new uRe(g,k,b,w,I):new sRe(g,k,b,w,I);var S=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=n.runWebGLProgram(m,x,"float32",S);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),T}},$Re=p((function e(t,n,r,a){l(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;for(var i=hSe(r.length),o="\n    int index;",s=0;s<this.sliceDim;s++)o+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var e_e={kernelName:z1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=L$(r.shape),u=S(Mae(r,a),4),c=u[0],l=u[1],h=u[2],p=u[3],f=KEe({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),d=KEe({inputs:{x:r},backend:n,attrs:{shape:[L$(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var v=n.readSync(a.dataId),m=n.bufferSync(r),g=cTe(v,m,r.dtype,l,o,h,p,r.shape,s);return n.makeTensorInfo(c,r.dtype,g.values)}var y=new $Re(o,p,[l,h],r.shape),b=n.runWebGLProgram(y,[d,f],d.dtype),x=KEe({inputs:{x:b},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(b),x}},t_e=p((function e(t,n){l(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=hSe(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function n_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=j$(o,a.shape)[0];if(k0().get("DEBUG"))for(var c=n.readSync(i.dataId),l=a.shape[u],h=function(){var e=c[p];F$(e<=l-1&&e>=0,(function(){return"GatherV2: the index value ".concat(e," is not in [0, ").concat(l-1,"]")}))},p=0;p<c.length;++p)h();var f=roe(a,i,u,s),d=L$(i.shape),v=[],m=KEe({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),g=KEe({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,d/f.batchSize]}});v.push(m),v.push(g);var y=[f.batchSize,f.outerSize,d/f.batchSize,f.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var b=n.bufferSync(g),x=n.bufferSync(m),k=lTe(x,b,y);return v.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f.outputShape,k.dtype,k.values)}var w=new t_e(m.shape,y),I=n.runWebGLProgram(w,[m,g],m.dtype);v.push(I);var N=KEe({inputs:{x:I},backend:n,attrs:{shape:f.outputShape}});return v.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),N}var r_e={kernelName:L1,backendName:"webgl",kernelFunc:n_e},a_e=PEe({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:hTe,dtype:"bool"}),i_e={kernelName:P1,backendName:"webgl",kernelFunc:a_e},o_e=PEe({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:pTe}),s_e={kernelName:B1,backendName:"webgl",kernelFunc:o_e};var u_e={kernelName:U1,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return DRe(t.input,!0,n)}},c_e=zEe({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),l_e={kernelName:G1,backendName:"webgl",kernelFunc:c_e},h_e=zEe({opSnippet:"return float(isinf(x));",dtype:"bool"}),p_e={kernelName:j1,backendName:"webgl",kernelFunc:h_e},f_e=zEe({opSnippet:"return float(isnan(x));",dtype:"bool"}),d_e={kernelName:H1,backendName:"webgl",kernelFunc:f_e},v_e=PEe({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:fTe,dtype:"bool"}),m_e={kernelName:K1,backendName:"webgl",kernelFunc:v_e},g_e=PEe({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:dTe,dtype:"bool"}),y_e={kernelName:X1,backendName:"webgl",kernelFunc:g_e};var b_e={kernelName:Y1,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=vTe(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},x_e=zEe({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:mTe}),k_e={kernelName:J1,backendName:"webgl",kernelFunc:x_e},w_e=zEe({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),I_e={kernelName:Z1,backendName:"webgl",kernelFunc:w_e},N_e=PEe({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),S_e={kernelName:Q1,backendName:"webgl",kernelFunc:N_e},T_e=zEe({opSnippet:"return float(!(x >= 1.0));"}),E_e={kernelName:$1,backendName:"webgl",kernelFunc:T_e},C_e=PEe({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),A_e={kernelName:e2,backendName:"webgl",kernelFunc:C_e},R_e=p((function e(t,n,r,a,i){l(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),__e=p((function e(t,n,r,a,i){l(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),O_e={kernelName:n2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,c=k0().getBool("WEBGL_PACK_NORMALIZATION")?new __e(a.shape,i,o,s,u):new R_e(a.shape,i,o,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},F_e=p((function e(t,n,r,a,i){l(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),D_e={kernelName:r2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,h=new F_e(a.shape,s,u,c,l);return n.runWebGLProgram(h,[a,i,o],a.dtype)}};function M_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=j$(i,a.shape),c=u,l=$7(c,s),h=null!=l,p=n.shouldExecuteOnCPU([a]),f=a;if(h){if(p){for(var d=n.texData.get(f.dataId).values,v=new Array(s),m=0;m<v.length;m++)v[m]=a.shape[l[m]];var g=HTe(d,a.shape,a.dtype,l,v);f=n.makeTensorInfo(v,a.dtype),n.texData.get(f.dataId).values=g}else f=eCe(a,l,n);c=t9(c.length,s)}Q7("max",c,s);var y,b=S(J7(f.shape,c),2),x=b[0],k=b[1],w=x;if(o&&(w=Z7(x,u)),p){var I=n.texData.get(f.dataId).values,N=gTe(I,L$(k),w,a.dtype);y=n.makeTensorInfo(w,a.dtype),n.texData.get(y.dataId).values=N}else y=function(e,t,n,r){var a=L$(t),i=KEe({inputs:{x:e},attrs:{shape:[L$(e.shape)/a,a]},backend:r}),o=ZEe(i,e.dtype,"max",r),s=KEe({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(f,k,w,n);return h&&n.disposeIntermediateTensorInfo(f),y}var L_e={kernelName:a2,backendName:"webgl",kernelFunc:M_e},z_e=PEe({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:yTe}),P_e={kernelName:i2,backendName:"webgl",kernelFunc:z_e};var B_e={kernelName:o2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;zNe(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;F$(j8(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=O8(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&P$(c.inShape,c.outShape))return EEe({inputs:{x:a},backend:n});var l=new PCe(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var W_e={kernelName:u2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=F8(a.shape,i,o,[1,1,1],s,c,u),h=new BCe(l,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}},U_e=p((function e(t){l(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),V_e=p((function e(t){l(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=u-1-t.padInfo.front,f=c-1-t.padInfo.top,d=h-1-t.padInfo.left,v=u*c*h-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(f,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(v," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(h," +\n                  wR * ").concat(h," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var G_e={kernelName:c2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=F8(i.shape,o,s,[1,1,1],u,c),h=new BCe(l,"max",!0),p=n.runWebGLProgram(h,[i],i.dtype),f=new V_e(l),d=n.runWebGLProgram(f,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),d}};var j_e={kernelName:s2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;zNe([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,h=O8(o.shape,s,u,1,c,l),p=new PCe(h,"max",!0),f=n.runWebGLProgram(p,[o],o.dtype),d=new U_e(h),v=n.runWebGLProgram(d,[a,f],o.dtype);return n.disposeIntermediateTensorInfo(f),v}};var H_e={kernelName:l2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;F$(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];F$(j8(o,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")}));var h=O8(a.shape,i,o,l,s),p=function(e,t,n,r){var a=new PCe(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new PCe(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,u,h,c),f=S(p,2);return[f[0],f[1]]}};var q_e={kernelName:h2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,u=a.shape.length,c=j$(o,a.shape),l=c,h=$7(l,u),p=null!=h,f=s.shouldExecuteOnCPU([a]),d=[],v=a;if(p){if(f){for(var m=s.texData.get(v.dataId).values,g=new Array(u),y=0;y<g.length;y++)g[y]=a.shape[h[y]];var b=HTe(m,a.shape,a.dtype,h,g);v=s.makeTensorInfo(g,a.dtype),s.texData.get(v.dataId).values=b}else v=eCe(a,h,s);d.push(v),l=t9(l.length,u)}Q7("sum",l,u);var x=S(J7(v.shape,l),2),k=x[0],w=x[1],I=k;i&&(I=Z7(k,c));for(var N=function(e,t,n,r){var a=L$(t),i=KEe({inputs:{x:e},attrs:{shape:[L$(e.shape)/a,a]},backend:r}),o=ZEe(i,"float32","mean",r),s=KEe({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(v,w,I,s),T=0,E=d;T<E.length;T++){var C=E[T];s.disposeIntermediateTensorInfo(C)}return N}};var K_e={kernelName:p2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=j$(i,a.shape),c=u,l=$7(c,s),h=a;null!=l&&(h=rCe({inputs:{x:a},backend:n,attrs:{perm:l}}),c=t9(c.length,a.shape.length)),Q7("min",c,s);var p,f=S(J7(h.shape,c),2),d=f[0],v=KEe({inputs:{x:h},backend:n,attrs:{shape:[-1,L$(f[1])]}}),m=ZEe(v,v.dtype,"min",n);return p=KEe(o?{inputs:{x:m},backend:n,attrs:{shape:Z7(d,u)}}:{inputs:{x:m},backend:n,attrs:{shape:d}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(h),p}},X_e=PEe({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:bTe}),Y_e={kernelName:f2,backendName:"webgl",kernelFunc:X_e},J_e=p((function e(t,n,r){l(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=hSe(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),Z_e=p((function e(t,n,r){l(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=hSe(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=XTe("rc",a),c=XTe("source",a),h="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),p=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f="reflect"===r?0:1,d="";if(1===a){var v="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(f,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(f,";\n        }\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(p,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(h,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(p,");\n        }\n      ")}else{var m="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(f,") +\n                gte * ((end - 1) * 2 - source + ").concat(f,");\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(p,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(h,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(p,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(p,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(h,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(p,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")})),Q_e={kernelName:d2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=k0().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Z_e(a.shape,i,o):new J_e(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},$_e=PEe({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),eOe={kernelName:v2,backendName:"webgl",kernelFunc:$_e},tOe=p((function e(t,n,r){l(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),nOe=PEe({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),rOe={kernelName:k1,backendName:"webgl",kernelFunc:nOe},aOe="return a - b;",iOe=PEe({opSnippet:aOe,packedOpSnippet:aOe,supportsComplex:!0,cpuKernelImpl:VTe}),oOe={kernelName:x3,backendName:"webgl",kernelFunc:iOe};function sOe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=j$([r.dim],a.shape),o=M_e({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=Z7(o.shape,i),u=KEe({inputs:{x:o},backend:n,attrs:{shape:s}}),c=iOe({inputs:{a:a,b:u},backend:n}),l=TRe({inputs:{x:c},backend:n}),h=tCe({inputs:{x:l},backend:n,attrs:{axis:i,keepDims:!1}}),p=KEe({inputs:{x:h},backend:n,attrs:{shape:s}}),f=nOe({inputs:{a:l,b:p},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}var uOe={kernelName:s3,backendName:"webgl",kernelFunc:sOe};var cOe={kernelName:m2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:sOe({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],h=new tOe(c,l,i),p=[[o]],f=n.runWebGLProgram(h,[u],"int32",p);return s||n.disposeIntermediateTensorInfo(u),f}};var lOe={kernelName:y2,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=S(kTe(i.values,a.shape,a.dtype),2),s=o[0],u=o[1];return r.makeTensorInfo(u,a.dtype,s)}return t=k0().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new vEe(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new tEe(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},hOe=qne;var pOe={kernelName:x2,backendName:"webgl",kernelFunc:function(e){z3("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),h=hOe(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},fOe=Kne;var dOe={kernelName:k2,backendName:"webgl",kernelFunc:function(e){z3("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),h=n.readSync(i.dataId),p=fOe(l,h,o,s,u,c),f=p.selectedIndices,d=p.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},vOe=Xne;var mOe={kernelName:w2,backendName:"webgl",kernelFunc:function(e){z3("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),h=n.readSync(i.dataId),p=vOe(l,h,o,s,u,c),f=p.selectedIndices,d=p.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([d.length],"float32",new Float32Array(d))]}},gOe=p((function e(t,n,r,a){l(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),yOe={kernelName:N2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue,c=L$(a.shape),l=new gOe(c,o,s,u),h=KEe({inputs:{x:a},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(l,[h],i);n.disposeIntermediateTensorInfo(h);var f=KEe({inputs:{x:p},backend:n,attrs:{shape:[].concat(T(a.shape),[o])}});return n.disposeIntermediateTensorInfo(p),f}};function bOe(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=sAe({inputs:{input:r},backend:n}),i=bOe({inputs:{x:a},backend:n}),o=wAe({inputs:{input:r},backend:n}),s=bOe({inputs:{x:o},backend:n}),u=AEe({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return zRe({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var xOe={kernelName:R3,backendName:"webgl",kernelFunc:bOe};var kOe={kernelName:I2,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=sAe({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=wAe({inputs:{input:a},backend:r}),u=bOe({inputs:{x:s},backend:r}),c=AEe({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return zRe({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var wOe={kernelName:S2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return CRe({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){D$(a,e.shape,"All tensors passed to stack must have matching shapes"),F$(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=SAe({inputs:t.map((function(e){var t=CRe({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},IOe=p((function e(t,n,r){l(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=hSe(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),NOe=p((function e(t,n,r){l(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=hSe(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=XTe("rc",a),c=XTe("source",a),h="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),p=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(h,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(h,") {")],d=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",v="",m=0,g=1===a?2:4;m<g;m++)v+="\n        ".concat(f[m],"\n        if (").concat(d,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(c.join(),"), ").concat(p,");\n        }\n      ");v+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(v,"\n        setOutput(result);\n      }\n    ")})),SOe=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===L$(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return zRe({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=k0().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new NOe(a.shape,i,o):new IOe(a.shape,i,o),c=[[o]];return n.runWebGLProgram(u,[a],a.dtype,c)},TOe={kernelName:T2,backendName:"webgl",kernelFunc:SOe},EOe=PEe({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),COe={kernelName:E2,backendName:"webgl",kernelFunc:EOe};var AOe={kernelName:A2,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,u=i.shape.length,c=[],l=j$(o,i.shape),h=l,p=$7(h,u),f=i;if(null!=p&&(f=rCe({inputs:{x:i},backend:r,attrs:{perm:p}}),h=t9(h.length,u),c.push(f)),Q7("prod",h,u),r.shouldExecuteOnCPU([f])){var d=r.texData.get(f.dataId).values,v=ITe(f.shape,f.dtype,d,h),m=v.outVals,g=v.outShape,y=v.outDtype;t=r.makeTensorInfo(g,y,m)}else{var b=S(J7(f.shape,h),2),x=b[0],k=L$(b[1]),w=KEe({inputs:{x:f},backend:r,attrs:{shape:[-1,k]}}),I=ZEe(w,p5(i.dtype),"prod",r);t=KEe({inputs:{x:I},backend:r,attrs:{shape:x}}),c.push(w),c.push(I)}if(s){c.push(t);var N=Z7(t.shape,l);t=KEe({inputs:{x:t},backend:r,attrs:{shape:N}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}};var ROe={kernelName:R2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,s=r.outputRaggedRank,u=a.map((function(e){return n.readSync(e.dataId)})),c=a.map((function(e){return e.shape})),l=n.readSync(i.dataId),h=n.readSync(o.dataId),p=S(NTe(u,c,l,i.shape,i.dtype,h,o.shape,s),3),f=p[0],d=p[1],v=p[2],m=f.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),g=n.makeTensorInfo(v,i.dtype,d);return m.concat([g])}};var _Oe={kernelName:_2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=S(STe(o,r.shape,r.dtype,s,a.shape,u,i.shape),2),l=c[0],h=c[1];return[n.makeTensorInfo([l.length],"int32",l),n.makeTensorInfo([h.length],r.dtype,h)]}};var OOe={kernelName:O2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,c=n.readSync(a.dataId),l=n.readSync(i.dataId),h=n.readSync(o.dataId),p=s.map((function(e){return n.readSync(e.dataId)})),f=s.map((function(e){return e.shape})),d=S(TTe(c,a.shape,l,i.shape,i.dtype,h,o.shape,p,f,u),2),v=d[0],m=d[1];return n.makeTensorInfo(v,i.dtype,m)}},FOe=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=ETe(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},DOe={kernelName:F2,backendName:"webgl",kernelFunc:FOe},MOe=zEe({opSnippet:"return 1.0 / x;"}),LOe={kernelName:M2,backendName:"webgl",kernelFunc:MOe},zOe=zEe({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),POe={kernelName:L2,backendName:"webgl",kernelFunc:zOe},BOe=zEe({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),WOe={kernelName:V2,backendName:"webgl",kernelFunc:BOe},UOe=p((function e(t,n,r,a,i){l(this,e),this.variableNames=["A"],this.outputShape=[];var o=S(t,4),s=o[0],u=o[1],c=o[2],h=o[3];this.outputShape=[s,n,r,h];var p,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];p=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/d[0],",\n          ").concat(f[1]/d[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),VOe=p((function e(t,n,r,a,i){l(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=S(t,4),s=o[0],u=o[1],c=o[2],h=o[3];this.outputShape=[s,n,r,h];var p,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];p=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/d[0],",\n          ").concat(f[1]/d[1],",\n          ").concat(f[1]/d[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(h-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var GOe={kernelName:W2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=S(r.size,2),u=s[0],c=s[1],l=k0().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new VOe(a.shape,u,c,i,o):new UOe(a.shape,u,c,i,o);return n.runWebGLProgram(l,[a],"float32")}},jOe=p((function e(t,n,r){l(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=S(n,3),i=a[1],o=a[2],s=S(t,3),u=s[1],c=s[2],h=[r&&u>1?i-1:i,r&&c>1?o-1:o],p=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=h[0]/p[0],d=h[1]/p[1],v=1/f,m=1/d,g=2*Math.ceil(v)+2,y=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var HOe={kernelName:U2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new jOe(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},qOe=p((function e(t,n,r,a,i){l(this,e),this.variableNames=["A"],this.outputShape=[];var o=S(t,4),s=o[0],u=o[1],c=o[2],h=o[3];this.outputShape=[s,n,r,h];var p,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],v=a?"0.5":"0.0";p=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/d[0],",\n          ").concat(f[1]/d[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),KOe=p((function e(t,n,r,a,i){l(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=S(t,4),s=o[0],u=o[1],c=o[2],h=o[3];this.outputShape=[s,n,r,h];var p,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],v=a?"0.5":"0.0";p=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/d[0],",\n          ").concat(f[1]/d[1],",\n          ").concat(f[1]/d[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(h-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var XOe={kernelName:P2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=S(r.size,2),u=s[0],c=s[1],l=k0().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new KOe(a.shape,u,c,i,o):new qOe(a.shape,u,c,i,o);return n.runWebGLProgram(l,[a],a.dtype)}},YOe=p((function e(t,n,r){l(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=S(n,3),i=a[1],o=a[2],s=S(t,3),u=s[1],c=s[2],h=[r&&u>1?i-1:i,r&&c>1?o-1:o],p=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=h[0]/p[0],d=h[1]/p[1],v=1/f,m=1/d,g=2*Math.ceil(v)+2,y=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(h[0],") *\n                (float(dyR) / float(").concat(p[0],"));\n\n            float sourceFracCol =\n                float(").concat(h[1],") *\n                  (float(dyC) / float(").concat(p[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var JOe={kernelName:B2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new YOe(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},ZOe=p((function e(t,n){l(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=hSe(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),QOe=p((function e(t,n){l(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=XTe("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=hSe(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var $Oe={kernelName:G2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=j$(i,a.shape);if(0===o)return EEe({inputs:{x:a},backend:n});var u=k0().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new QOe(a.shape,s):new ZOe(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},eFe=p((function e(t,n){l(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"==typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),tFe={kernelName:F3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=new eFe(a.shape,o),l=S(pie(s,a.shape[1],a.shape[2]),2),h=[[l[0],l[1],Math.sin(i),Math.cos(i)]];return u.runWebGLProgram(c,[a],a.dtype,h)}},nFe=zEe({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),rFe={kernelName:j2,backendName:"webgl",kernelFunc:nFe},aFe=zEe({opSnippet:"return inversesqrt(x);",cpuKernelImpl:CTe}),iFe={kernelName:H2,backendName:"webgl",kernelFunc:aFe},oFe=p((function e(t,n,r,a,i,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];l(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var u=hSe(i.length),c=hSe(o.length),h="";1===r?h="i":2===r&&(h="i, j");var p="getIndices(".concat(h,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var d="getUpdates(".concat(f,")"),v="";s&&(v="coords[0], coords[1]");var m="getDefaultValue(".concat(v,")"),g=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(u," strides = ").concat(u,"(").concat(i,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(p,");\n              flattenedIndex += index * ").concat(g,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(m,", sum, float(found)));\n        }\n      ")})),sFe=p((function e(t,n,r,a,i,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];l(this,e),this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;var u=hSe(i.length),c=hSe(o.length),h="";1===r?h="i":2===r&&(h="i, j");var p="getIndices(".concat(h,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var d="getUpdates(".concat(f,")"),v="";s&&(v="coords[0], coords[1]");var m="getDefaultValue(".concat(v,")"),g=n>1?"strides[j]":"strides",y=n>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(u," strides = ").concat(u,"(").concat(i,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(t,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(n,"; j+=2) {\n              ivec4 index = round(").concat(p,");\n              flattenedIndex += index.xz * ").concat(g,";\n              if (j + 1 < ").concat(n,") {\n                flattenedIndex += index.yw * ").concat(y,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(d,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(m,", sum, found));\n        }\n      ")}));var uFe={kernelName:q2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=Jte(0,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,h=s.strides,p=s.outputSize,f=[p/l,l];if(0===p)return n.makeTensorInfo(o,a.dtype);var d,v=KEe({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=KEe({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0]));d=k0().getBool("WEBGL_PACK")?new sFe(c,u,v.shape.length,m.shape.length,h,f):new oFe(c,u,v.shape.length,m.shape.length,h,f);var y=n.runWebGLProgram(d,[m,v,g],m.dtype),b=KEe({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),b}},cFe=p((function e(t,n,r,a){l(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===k0().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var lFe={kernelName:X2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new cFe(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}},hFe=p((function e(t,n,r){var a,i;if(l(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var h=hSe(r);this.userCode="\n      void main() {\n        ".concat(h," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var pFe={kernelName:Y2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new hFe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],h5(a.dtype,i.dtype))}},fFe=zEe({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(yie,";\n  float scale = ").concat(bie,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),dFe={kernelName:J2,backendName:"webgl",kernelFunc:fFe},vFe=zEe({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:RTe}),mFe={kernelName:t3,backendName:"webgl",kernelFunc:vFe},gFe=zEe({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),yFe={kernelName:e3,backendName:"webgl",kernelFunc:gFe},bFe=zEe({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(SEe,"\n  return result;\n")}),xFe={kernelName:Q2,backendName:"webgl",kernelFunc:bFe},kFe=zEe({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),wFe={kernelName:$2,backendName:"webgl",kernelFunc:kFe},IFe=zEe({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),NFe={kernelName:n3,backendName:"webgl",kernelFunc:IFe},SFe={kernelName:i3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;F$(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,T(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=[],h=SOe({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),p=fie(h.shape,i,s,!1),f=die(p.length,i.length,!1),d=vie(h.shape,i,s,!1),v=KEe({inputs:{x:h},backend:n,attrs:{shape:p}}),m=rCe({inputs:{x:v},backend:n,attrs:{perm:f}}),g=KEe({inputs:{x:m},backend:n,attrs:{shape:d}});return l.push(h),l.push(v),l.push(m),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var TFe={kernelName:u3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],h=S(FTe(s,r.shape,r.dtype,u,a.dtype,c,l),5),p=h[0],f=h[1],d=h[2],v=h[3],m=h[4];return[n.makeTensorInfo(f,r.dtype,p),n.makeTensorInfo([f[0]],a.dtype,d),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};var EFe={kernelName:c3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),c=S(DTe(s,r.shape,r.dtype,o,u),3),l=c[0],h=c[1],p=c[2];return[n.makeTensorInfo(h,r.dtype,l),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var CFe={kernelName:l3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=S(MTe(o,r.shape,r.dtype,s,u,!0),2),l=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,l)}};var AFe={kernelName:h3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=S(MTe(o,r.shape,r.dtype,s,u),2),l=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,l)}};var RFe={kernelName:p3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=Jte(0,a,s),c=u.sliceRank,l=u.numUpdates,h=u.sliceSize,p=u.strides,f=u.outputSize;if("string"===i.dtype){var d=n.bufferSync(a),v=n.bufferSync(i),m=W4(n.readSync(o.dataId)[0]),g=ATe(d,v,s,f,h,l,c,p,m,false);return n.makeTensorInfo(s,g.dtype,g.values)}var y=new oFe(l,c,a.shape.length,i.shape.length,p,[f,1],false),b=n.runWebGLProgram(y,[i,a,o],i.dtype),x=KEe({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}};var _Fe={kernelName:o3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=j$(r.axis,a.shape)[0],s=Vie(a,i,o),u=a.shape.length,c=new Array(u).fill(0),l=a.shape.slice();return s.map((function(e){var t=T(l);t[o]=e;var r=$Ce({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[o]+=e,r}))}},OFe="return sqrt(x);",FFe=zEe({opSnippet:OFe,packedOpSnippet:OFe,cpuKernelImpl:LTe}),DFe={kernelName:r3,backendName:"webgl",kernelFunc:FFe},MFe={kernelName:d3,backendName:"webgl",kernelFunc:zEe({opSnippet:"return x * x;"})},LFe="return (a - b) * (a - b);",zFe=PEe({opSnippet:LFe,packedOpSnippet:LFe}),PFe={kernelName:f3,backendName:"webgl",kernelFunc:zFe};var BFe={kernelName:v3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;if("string"!==a.dtype)throw new Error("Input must be of datatype string");var i=aoe(n.readSync(a.dataId)),o=zTe(i,"string",r);return n.makeTensorInfo(a.shape,"string",o)}};var WFe={kernelName:_3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=nEe+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new tEe(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},UFe=p((function e(t,n,r){l(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=hSe(r.length),o=hSe(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var VFe={kernelName:m3,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,h=a.ellipsisMask,p=a.newAxisMask,f=a.shrinkAxisMask,d=Jae(i.shape,o,s,u,c,l,h,p,f),v=d.finalShapeSparse,m=d.finalShape,g=d.isIdentity,y=d.sliceDim0,b=d.isSimpleSlice,x=d.begin,k=d.end,w=d.strides;if(g)t=KEe({inputs:{x:i},backend:r,attrs:{shape:m}});else if(y||b){F$(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var I=Pae(x,k,w),N=$Ce({inputs:{x:i},backend:r,attrs:{begin:x,size:I}});t=KEe({inputs:{x:N},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(N)}else{if(r.shouldExecuteOnCPU([i])){var S=r.readSync(i.dataId),T=l8(i.shape,i.dtype,S),E=PTe(v,T,w,x);t=r.makeTensorInfo(m,i.dtype,E.values)}else{var C=new UFe(x,w,v);t=r.runWebGLProgram(C,[i],i.dtype)}}var A=KEe({inputs:{x:t},backend:r,attrs:{shape:m}});return r.disposeIntermediateTensorInfo(t),A}};var GFe={kernelName:g3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,h=t.dataSplits,p=n.readSync(l.dataId),f=n.readSync(h.dataId),d=S(BTe(p,f,a,i,o,s,u,c),2),v=d[0],m=d[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(h.shape,"int32",m)]}};var jFe={kernelName:y3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],u=S(WTe(o,s,r),3),c=u[0],l=u[1],h=u[2],p=l.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};var HFe={kernelName:b3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=UTe(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},qFe=zEe({opSnippet:"return tan(x);"}),KFe={kernelName:k3,backendName:"webgl",kernelFunc:qFe},XFe=zEe({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),YFe={kernelName:w3,backendName:"webgl",kernelFunc:XFe};var JFe={kernelName:K2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.tensor,i=t.indices,o=t.updates;!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(r);var s=Jte(0,i,a.shape),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,h=s.strides,p=s.outputSize,f=[p/l,l];if(0===p)return n.makeTensorInfo(a.shape,i.dtype);var d=KEe({inputs:{x:i},backend:n,attrs:{shape:[c,u]}}),v=KEe({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),m=KEe({inputs:{x:a},backend:n,attrs:{shape:f}}),g=new oFe(c,u,d.shape.length,v.shape.length,h,f,!1,!0),y=n.runWebGLProgram(g,[v,d,m],m.dtype),b=KEe({inputs:{x:y},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}},ZFe=p((function e(t,n){l(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=hSe(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function QFe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return W4(e)})):o,u=l8(a.shape,a.dtype,s),c=GTe(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new ZFe(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}var $Fe={kernelName:I3,backendName:"webgl",kernelFunc:QFe},eDe=p((function e(t){l(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),tDe=p((function e(t){l(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function nDe(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function rDe(e){for(var t=1;t<e;)t*=2;return t}var aDe={kernelName:N3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=k0().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=k0().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([a])||l<s||i>u){var h=n.readSync(a.dataId),p=S(jTe(h,c,a.dtype,i,o),2),f=p[0],d=p[1];return[n.makeTensorInfo(f.shape,f.dtype,f.values),n.makeTensorInfo(d.shape,d.dtype,d.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[a,zRe({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var v=n.texData.get(a.dataId),m=null!==v&&v.isPacked,g=m?n.unpackTensor(a):a,y=L$(c)/l,b=KEe({inputs:{x:g},attrs:{shape:[y,l]},backend:n});m&&nDe(n,g);for(var x=rDe(i),k=rDe(l),w=null,I=function(){return null===w?[b,b]:[b,w]},N=function(e,t,r){var a=I(),i=new eDe(r),o=[[l],[null===w?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=w;w=n.runWebGLProgram(i,a,"int32",o),nDe(n,s)},T=1;T<x;T*=2)for(var E=2*T,C=T;C>=1;C/=2)N(E,C,[y,k]);for(var A=k;A>x;A/=2){var R=I(),_=new tDe([y,A/2]),O=[[l],[null===w?1:0],[x]],F=w;w=n.runWebGLProgram(_,R,"int32",O),nDe(n,F);for(var D=x/2,M=2*D,L=D;L>=1;L/=2)N(M,L,w.shape)}var z=w;w=$Ce({inputs:{x:w},backend:n,attrs:{begin:0,size:[y,i]}}),nDe(n,z);var P=n_e({inputs:{x:b,indices:w},backend:n,attrs:{axis:1,batchDims:1}});nDe(n,b);var B=c.slice(0,-1);B.push(i),z=w,w=KEe({inputs:{x:w},attrs:{shape:B},backend:n}),nDe(n,z);var W=P;return P=KEe({inputs:{x:P},attrs:{shape:B},backend:n}),nDe(n,W),[P,w]}},iDe=p((function e(t,n,r,a,i,o){l(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var oDe={kernelName:S3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=S(a.shape,4),h=l[0],p=l[1],f=l[2],d=l[3],v=S(null!=c?c:[p,f],2),m=v[0],g=v[1],y=new iDe(p,f,o,s,u,[h,m,g,d]);return n.runWebGLProgram(y,[a,i],"float32")}};var sDe={kernelName:E3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;zNe(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=qTe(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var uDe={kernelName:C3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,h=0;h<s;h++)h!==i&&(c[l++]=o.shape[h]);var p=[],f=new Array(s).fill(0),d=o.shape.slice();d[i]=1;for(var v=new Array(u),m=0;m<v.length;m++){f[i]=m;var g=$Ce({inputs:{x:o},backend:n,attrs:{begin:f,size:d}}),y=KEe({inputs:{x:g},backend:n,attrs:{shape:c}});v[m]=y,p.push(g)}return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},cDe=p((function e(t,n){l(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,h="\n        sumValue += dot(values, segFilter);\n    ",p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var lDe={kernelName:A3,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],c=0,l=$7([c],s),h=a;null!=l&&(h=rCe({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(h),c=t9(1,s)[0]);var p=noe(h.shape,c,o),f=L$([h.shape[c]]),d=KEe({inputs:{x:h},backend:n,attrs:{shape:[-1,f]}});u.push(d);var v=function e(t,r,a,i,o){var s=t.shape[0],c=t.shape[1],l=toe(c,o),h=new cDe({windowSize:l,inSize:c,batchSize:s,numSegments:o},r),p=n.compileAndRun(h,[t,a],i);if(u.push(p),p.shape[1]===o)return p;var f=FOe({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),d=QFe({inputs:{x:f},backend:n,attrs:{reps:[c/l]}});return u.push(f),u.push(d),e(p,r,d,i,o)}(d,"unsortedSegmentSum",i,p5(a.dtype),o),m=KEe({inputs:{x:v},backend:n,attrs:{shape:p}}),g=m;if(null!=l){u.push(m);var y=e9(l);g=rCe({inputs:{x:g},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},hDe=0,pDe=[oCe,uCe,lCe,pCe,vCe,yCe,bCe,xCe,TCe,ECe,ACe,_Ce,FCe,MCe,zCe,WCe,UCe,jCe,HCe,qCe,YCe,tAe,nAe,rAe,aAe,cAe,pAe,vAe,REe,yAe,TAe,DAe,BAe,UAe,VAe,GAe,HAe,KAe,YAe,ZAe,nRe,rRe,aRe,oRe,cRe,pRe,fRe,vRe,gRe,yRe,xRe,kRe,IRe,SRe,ERe,ARe,ORe,MRe,BRe,URe,jRe,qRe,YRe,ZRe,QRe,e_e,r_e,i_e,s_e,CEe,u_e,IAe,l_e,p_e,d_e,FEe,m_e,y_e,b_e,k_e,I_e,S_e,E_e,A_e,O_e,D_e,L_e,P_e,B_e,W_e,G_e,j_e,H_e,q_e,K_e,Y_e,Q_e,eOe,cOe,qEe,lOe,pOe,dOe,mOe,oAe,yOe,kOe,wOe,TOe,COe,LEe,AOe,ROe,_Oe,OOe,DOe,uAe,rOe,LOe,POe,WOe,XEe,GOe,HOe,XOe,JOe,$Oe,tFe,rFe,iFe,uFe,lFe,pFe,dFe,mFe,yFe,xFe,wFe,eAe,uOe,NFe,SFe,TFe,EFe,CFe,AFe,RFe,_Fe,DFe,MFe,PFe,BFe,WFe,VFe,GFe,jFe,HFe,oOe,nCe,KFe,YFe,JFe,$Fe,aDe,oDe,aCe,sDe,uDe,lDe,xOe];hDe<pDe.length;hDe++){G3(pDe[hDe])}var fDe={"tfjs-core":eie,"tfjs-backend-cpu":zbe,"tfjs-backend-webgl":kEe,"tfjs-data":ige,"tfjs-layers":Ble,"tfjs-converter":Yve,tfjs:"4.22.0"};e.Abs=N0,e.Acos=S0,e.Acosh=T0,e.AdadeltaOptimizer=Jre,e.AdagradOptimizer=Zre,e.AdamOptimizer=Qre,e.AdamaxOptimizer=$re,e.Add=E0,e.AddN=C0,e.All=A0,e.Any=R0,e.ArgMax=_0,e.ArgMin=O0,e.Asin=F0,e.Asinh=D0,e.Atan=M0,e.Atan2=z0,e.Atanh=L0,e.AvgPool=P0,e.AvgPool3D=W0,e.AvgPool3DGrad=U0,e.AvgPoolGrad=B0,e.BatchMatMul=V0,e.BatchToSpaceND=G0,e.Bincount=j0,e.BitwiseAnd=H0,e.BroadcastArgs=K0,e.BroadcastTo=q0,e.Callback=tde,e.CallbackList=Jce,e.Cast=X0,e.Ceil=Y0,e.ClipByValue=J0,e.Complex=Z0,e.ComplexAbs=Q0,e.Concat=$0,e.Conv2D=e1,e.Conv2DBackpropFilter=t1,e.Conv2DBackpropInput=n1,e.Conv3D=r1,e.Conv3DBackpropFilterV2=a1,e.Conv3DBackpropInputV2=i1,e.Cos=o1,e.Cosh=s1,e.CropAndResize=l1,e.Cumprod=u1,e.Cumsum=c1,e.CustomCallback=$ce,e.DataStorage=S$,e.DenseBincount=h1,e.DepthToSpace=p1,e.DepthwiseConv2dNative=f1,e.DepthwiseConv2dNativeBackpropFilter=d1,e.DepthwiseConv2dNativeBackpropInput=v1,e.Diag=m1,e.Dilation2D=g1,e.Dilation2DBackpropFilter=b1,e.Dilation2DBackpropInput=y1,e.Draw=x1,e.EarlyStopping=ade,e.Einsum=w1,e.Elu=I1,e.EluGrad=N1,e.Environment=y0,e.Equal=T1,e.Erf=S1,e.Exp=E1,e.ExpandDims=C1,e.Expm1=A1,e.FFT=R1,e.Fill=_1,e.FlipLeftRight=O1,e.Floor=F1,e.FloorDiv=D1,e.FromPixels=O3,e.FusedBatchNorm=M1,e.FusedConv2D=M3,e.FusedDepthwiseConv2D=L3,e.GPGPUContext=ZSe,e.GatherNd=z1,e.GatherV2=L1,e.GraphModel=qve,e.Greater=P1,e.GreaterEqual=B1,e.History=Qce,e.IFFT=U1,e.Identity=W1,e.Imag=V1,e.InputSpec=gce,e.IsFinite=G1,e.IsInf=j1,e.IsNan=H1,e.KernelBackend=T$,e.LRN=n2,e.LRNGrad=r2,e.LayerVariable=dce,e.LayersModel=vhe,e.LeakyRelu=q1,e.Less=K1,e.LessEqual=X1,e.LinSpace=Y1,e.Log=J1,e.Log1p=Z1,e.LogSoftmax=t2,e.LogicalAnd=Q1,e.LogicalNot=$1,e.LogicalOr=e2,e.LogicalXor="LogicalXor",e.LowerBound="LowerBound",e.MathBackendCPU=cge,e.MathBackendWebGL=xEe,e.MatrixBandPart="MatrixBandPart",e.Max=a2,e.MaxPool=o2,e.MaxPool3D=u2,e.MaxPool3DGrad=c2,e.MaxPoolGrad=s2,e.MaxPoolWithArgmax=l2,e.Maximum=i2,e.Mean=h2,e.Min=p2,e.Minimum=f2,e.MirrorPad=d2,e.Mod=v2,e.MomentumOptimizer=tae,e.Multinomial=m2,e.Multiply=g2,e.Neg=y2,e.NonMaxSuppressionV3=x2,e.NonMaxSuppressionV4=k2,e.NonMaxSuppressionV5=w2,e.NotEqual=b2,e.OP_SCOPE_SUFFIX=P5,e.OneHot=N2,e.OnesLike=I2,e.Optimizer=Yre,e.OptimizerConstructors=tie,e.Pack=S2,e.PadV2=T2,e.Pool="Pool",e.Pow=E2,e.Prelu=C2,e.Prod=A2,e.RMSPropOptimizer=nae,e.RNN=Spe,e.RaggedGather=R2,e.RaggedRange=_2,e.RaggedTensorToTensor=O2,e.Range=F2,e.Real=D2,e.RealDiv=k1,e.Reciprocal=M2,e.Relu=L2,e.Relu6=V2,e.Reshape=z2,e.ResizeBilinear=W2,e.ResizeBilinearGrad=U2,e.ResizeNearestNeighbor=P2,e.ResizeNearestNeighborGrad=B2,e.Reverse=G2,e.RotateWithOffset=F3,e.Round=j2,e.Rsqrt=H2,e.SGDOptimizer=eae,e.ScatterNd=q2,e.SearchSorted=X2,e.Select=Y2,e.Selu=J2,e.Sequential=whe,e.Sigmoid=t3,e.Sign=e3,e.Sin=Q2,e.Sinh=$2,e.Slice=Z2,e.Softmax=s3,e.Softplus=n3,e.SpaceToBatchND=i3,e.SparseFillEmptyRows=u3,e.SparseReshape=c3,e.SparseSegmentMean=l3,e.SparseSegmentSum=h3,e.SparseToDense=p3,e.SplitV=o3,e.Sqrt=r3,e.Square=d3,e.SquaredDifference=f3,e.StaticRegexReplace=v3,e.Step=_3,e.StridedSlice=m3,e.StringNGrams=g3,e.StringSplit=y3,e.StringToHashBucketFast=b3,e.Sub=x3,e.Sum=a3,e.SymbolicTensor=yce,e.Tan=k3,e.Tanh=w3,e.Tensor=n5,e.TensorBuffer=$4,e.TensorScatterUpdate=K2,e.Tile=I3,e.TopK=N3,e.Transform=S3,e.Transpose=T3,e.Unique=E3,e.Unpack=C3,e.UnsortedSegmentSum=A3,e.UpperBound="UpperBound",e.Variable=c5,e.ZerosLike=R3,e._FusedMatMul=D3,e.abs=y8,e.acos=b8,e.acosh=x8,e.add=d8,e.addN=k8,e.all=w8,e.any=I8,e.argMax=N8,e.argMin=S8,e.asin=T8,e.asinh=E8,e.atan=C8,e.atan2=A8,e.atanh=R8,e.avgPool=Y8,e.avgPool3d=J8,e.backend=e6,e.backend_util=ooe,e.basicLSTMCell=n7,e.batchNorm=a7,e.batchNorm2d=i7,e.batchNorm3d=o7,e.batchNorm4d=s7,e.batchToSpaceND=r7,e.bincount=u7,e.bitwiseAnd=c7,e.booleanMaskAsync=lne,e.broadcastArgs=l7,e.broadcastTo=h7,e.broadcast_util=P7,e.browser=Dae,e.buffer=l8,e.callbacks=sde,e.cast=h8,e.ceil=p7,e.clipByValue=d7,e.clone=p8,e.complex=W5,e.concat=Z8,e.concat1d=v7,e.concat2d=m7,e.concat3d=g7,e.concat4d=y7,e.constraints=Gce,e.conv1d=x7,e.conv2d=b7,e.conv2dTranspose=w7,e.conv3d=I7,e.conv3dTranspose=S7,e.copyRegisteredKernels=function(e,t){V3(e).forEach((function(e){G3(Object.assign({},e,{backendName:t}))}))},e.cos=T7,e.cosh=E7,e.cosineWindow=bne,e.cumprod=C7,e.cumsum=A7,e.customGrad=F9,e.data=oge,e.denseBincount=R7,e.deprecationWarn=H5,e.depthToSpace=_7,e.depthwiseConv2d=O7,e.deregisterOp=function(e){delete ude[e]},e.device_util=_5,e.diag=F7,e.dilation2d=D7,e.disableDeprecationWarnings=function(){k0().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")},e.dispose=Y5,e.disposeVariables=function(){E5.disposeVariables()},e.div=m8,e.divNoNan=V7,e.dot=G7,e.dropout=gne,e.einsum=j7,e.elu=H7,e.enableDebugMode=function(){k0().set("DEBUG",!0)},e.enableProdMode=function(){k0().set("PROD",!0)},e.enclosingPowerOfTwo=yne,e.engine=q5,e.ensureShape=q7,e.env=k0,e.equal=B7,e.erf=K7,e.euclideanNorm=h9,e.exp=p9,e.expandDims=f9,e.expm1=d9,e.eye=m9,e.fft=_te,e.fill=f7,e.findBackend=function(e){return E5.findBackend(e)},e.findBackendFactory=function(e){return E5.findBackendFactory(e)},e.floor=g9,e.floorDiv=v8,e.forceHalfFloat=wEe,e.fused=One,e.gather=y9,e.gatherND=mne,e.gather_util=Lae,e.getBackend=Q5,e.getGradient=U3,e.getKernel=W3,e.getKernelsForBackend=V3,e.gpgpu_util=JSe,e.grad=function(e){return F$(r0(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=L5(t,"x","tf.grad","string_or_numeric"),a=null!=n?L5(n,"dy","tf.grad"):null;return E5.tidy((function(){var t=E5.gradients((function(){return e(r)}),[r],a),n=t.value,i=t.grads;return null!=a&&D$(n.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),D9(i),i[0]}))}},e.grads=function(e){return F$(r0(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){F$(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var r=z5(t,"args","tf.grads","string_or_numeric"),a=null!=n?L5(n,"dy","tf.grads"):null;return E5.tidy((function(){var t=E5.gradients((function(){return e.apply(void 0,T(r))}),r,a),n=t.value,i=t.grads;return null!=a&&D$(n.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),D9(i),i}))}},e.greater=b9,e.greaterEqual=x9,e.ifft=Ote,e.imag=k9,e.image=Pre,e.inTopKAsync=kne,e.initializers=Hce,e.input=Ihe,e.io=Nae,e.irfft=Fte,e.isFinite=w9,e.isInf=I9,e.isNaN=N9,e.keep=J5,e.kernel_impls=soe,e.layers=Zfe,e.leakyRelu=S9,e.less=T9,e.lessEqual=E9,e.linalg=Bre,e.linspace=C9,e.loadGraphModel=function(e){return Kve.apply(this,arguments)},e.loadGraphModelSync=function(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");var t;if(e instanceof Array){var n=S(e,2),r=n[0],a=n[1];if(!r)throw new Error("modelJSON must be the first element of the array");if(!(a&&a instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");t=Iae(x6(r,N6(r.weightsManifest),a))}else if("load"in e)t=e;else{if(!("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e))throw new Error("Unknown model format");t=Iae(e)}var i=new qve(t);return i.load(),i},e.loadLayersModel=function(e,t){return yhe.apply(this,arguments)},e.localResponseNormalization=A9,e.log=R9,e.log1p=_9,e.logSigmoid=z9,e.logSoftmax=B9,e.logSumExp=W9,e.logicalAnd=U9,e.logicalNot=V9,e.logicalOr=G9,e.logicalXor=j9,e.losses=Wre,e.lowerBound=K9,e.matMul=Q8,e.math=Tae,e.max=n9,e.maxPool=X9,e.maxPool3d=Y9,e.maxPoolWithArgmax=J9,e.maximum=Z9,e.mean=Q9,e.memory=K5,e.meshgrid=tee,e.metrics=Qfe,e.min=r9,e.minimum=nee,e.mirrorPad=ree,e.mod=aee,e.model=function(e){return new vhe(e)},e.models=$fe,e.moments=iee,e.movingAverage=pne,e.mul=g8,e.multiRNNCell=oee,e.multinomial=see,e.neg=M9,e.nextFrame=aie,e.norm=l9,e.notEqual=uee,e.oneHot=cee,e.ones=eee,e.onesLike=lee,e.op=B5,e.outerProduct=hee,e.pad=pee,e.pad1d=fee,e.pad2d=dee,e.pad3d=vee,e.pad4d=mee,e.pool=yee,e.pow=a9,e.prelu=bee,e.print=f8,e.prod=xee,e.profile=function(e){return E5.profile(e)},e.raggedGather=kee,e.raggedRange=wee,e.raggedTensorToTensor=Iee,e.rand=Nee,e.randomGamma=nte,e.randomNormal=rte,e.randomStandardNormal=ate,e.randomUniform=ite,e.randomUniformInt=ote,e.range=ste,e.ready=function(){return E5.ready()},e.real=ute,e.reciprocal=cte,e.registerBackend=$5,e.registerCallbackConstructor=function(e,t){tle.registerCallbackConstructor(e,t)},e.registerGradient=j3,e.registerKernel=G3,e.registerOp=function(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};ude[e]=n},e.regularizers=ede,e.relu=lte,e.relu6=hte,e.removeBackend=function(e){E5.removeBackend(e)},e.reshape=X8,e.reverse=pte,e.reverse1d=fte,e.reverse2d=dte,e.reverse3d=vte,e.reverse4d=mte,e.rfft=Mte,e.round=gte,e.rsqrt=yte,e.scalar=i9,e.scatterND=fne,e.scatter_util=Zte,e.searchSorted=q9,e.selu=bte,e.separableConv2d=xte,e.sequential=function(e){return new whe(e)},e.serialization=Xre,e.setBackend=Z5,e.setPlatform=function(e,t){k0().setPlatform(e,t)},e.setWebGLContext=UIe,e.setdiff1dAsync=wte,e.shared=Lbe,e.sigmoid=$8,e.sign=Ite,e.signal=zre,e.sin=Nte,e.sinh=Ste,e.slice=e7,e.slice1d=Tte,e.slice2d=Ete,e.slice3d=Cte,e.slice4d=Ate,e.slice_util=$ae,e.softmax=Rte,e.softplus=L9,e.spaceToBatchND=gee,e.sparse=Ure,e.sparseToDense=vne,e.spectral=Lre,e.split=Dte,e.sqrt=o9,e.square=s9,e.squaredDifference=Lte,e.squeeze=zte,e.stack=Pte,e.step=Bte,e.stridedSlice=Wte,e.string=Vre,e.sub=P9,e.sum=u9,e.sumOutType=p5,e.tan=Ute,e.tanh=t7,e.tensor=V5,e.tensor1d=Vte,e.tensor2d=Gte,e.tensor3d=jte,e.tensor4d=Hte,e.tensor5d=qte,e.tensor6d=Kte,e.tensorScatterUpdate=Qte,e.tensor_util=x5,e.test_util=Qee,e.tidy=X5,e.tile=v9,e.time=function(e){return E5.time(e)},e.topk=$te,e.train=nie,e.transpose=hne,e.truncatedNormal=ene,e.unique=tne,e.unregisterGradient=function(e){if(!B3.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));B3.delete(e)},e.unregisterKernel=function(e,t){var n=H3(e,t);if(!P3.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));P3.delete(n)},e.unsortedSegmentSum=nne,e.unstack=rne,e.upcastType=h5,e.upperBound=ane,e.util=G4,e.valueAndGrad=function(e){return F$(r0(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){F$(t instanceof n5,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),F$(null==n||n instanceof n5,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=E5.gradients((function(){return e(t)}),[t],n),a=r.grads,i=r.value;return D9(a),{grad:a[0],value:i}}},e.valueAndGrads=function(e){return F$(r0(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){F$(Array.isArray(t)&&t.every((function(e){return e instanceof n5})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),F$(null==n||n instanceof n5,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var r=E5.gradients((function(){return e.apply(void 0,T(t))}),t,n);return null!=n&&D$(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),D9(r.grads),r}},e.variable=ine,e.variableGrads=O9,e.version=fDe,e.version_converter=Yve,e.version_core=eie,e.version_cpu=zbe,e.version_layers=Ble,e.version_webgl=kEe,e.webgl=IEe,e.webgl_util=PNe,e.where=W7,e.whereAsync=une,e.zeros=$9,e.zerosLike=U7}));
//# sourceMappingURL=tf.min.js.map
</script>
<script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js');
    }
</script>
<script>/**
 * @license
 * Copyright 2024 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@tensorflow/tfjs-core")):"function"==typeof define&&define.amd?define(["exports","@tensorflow/tfjs-core"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).tf=e.tf||{},e.tf)}(this,(function(e,t){"use strict";function n(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,t}var a=n(t),r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{u(a.next(e))}catch(e){i(e)}}function s(e){try{u(a.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((a=a.apply(e,t||[])).next())}))}function o(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o}function c(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var d=t.env();d.registerFlag("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE",(function(){return 15})),d.registerFlag("WEBGPU_CPU_FORWARD",(function(){return!0})),d.registerFlag("WEBGPU_MATMUL_PROGRAM_TYPE",(function(){return-1})),d.registerFlag("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE",(function(){return!0})),d.registerFlag("WEBGPU_USE_LOW_POWER_GPU",(function(){return!1})),d.registerFlag("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e3})),d.registerFlag("WEBGPU_USE_PROFILE_TOOL",(function(){return!1})),d.registerFlag("WEBGPU_IMPORT_EXTERNAL_TEXTURE",(function(){return!0})),d.registerFlag("WEBGPU_USE_NAIVE_CONV2D_DEBUG",(function(){return!1})),d.registerFlag("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL",(function(){return-1})),d.registerFlag("WEBGPU_CONV_SEPARATE_IM2COL_SHADER",(function(){return!1})),d.registerFlag("WEBGPU_PRINT_SHADER",(function(){return""})),d.registerFlag("WEBGPU_ENGINE_COMPILE_ONLY",(function(){return!1}));var l=function(){function e(e){e&&(this.vendor=e.vendor,this.architecture=e.architecture,this.intelGPUGeneration=this.getIntelGPUGeneration())}return e.prototype.getIntelGPUGeneration=function(){if(this.isIntel()){if(this.architecture.startsWith("gen"))return Number(this.architecture.match(/\d+/));if(this.architecture.startsWith("xe"))return 12}return 0},e.prototype.isIntel=function(){return"intel"===this.vendor},e}(),p=function(){function e(e){this.device=e,this.numUsedBuffers=0,this.numFreeBuffers=0,this.freeBuffers=new Map,this.usedBuffers=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}return e.prototype.acquireBuffer=function(e,t,n,a){var r;void 0===n&&(n=!1),void 0===a&&(a=!0);var i=h(e,t);return a?(this.freeBuffers.has(i)||this.freeBuffers.set(i,[]),this.freeBuffers.get(i).length>0?(r=this.freeBuffers.get(i).pop(),this.numFreeBuffers--):(r=this.device.createBuffer({size:e,usage:t,mappedAtCreation:n}),this.numBytesAllocated+=e)):(r=this.device.createBuffer({size:e,usage:t,mappedAtCreation:n}),this.numBytesAllocated+=e),this.usedBuffers.has(i)||this.usedBuffers.set(i,[]),this.usedBuffers.get(i).push(r),this.numUsedBuffers++,this.numBytesUsed+=e,r},e.prototype.releaseBuffer=function(e,t){if(void 0===t&&(t=!0),0!==this.freeBuffers.size){var n=e.size,a=h(n,e.usage),r=this.usedBuffers.get(a),i=r.indexOf(e);if(i<0)throw new Error("Cannot find the buffer in buffer manager");r[i]=r[r.length-1],r.pop(),this.numUsedBuffers--,this.numBytesUsed-=n,t?(this.freeBuffers.get(a).push(e),this.numFreeBuffers++):(e.destroy(),this.numBytesAllocated-=n)}},e.prototype.getNumUsedBuffers=function(){return this.numUsedBuffers},e.prototype.getNumFreeBuffers=function(){return this.numFreeBuffers},e.prototype.dispose=function(){this.freeBuffers.forEach((function(e,t){e.forEach((function(e){e.destroy()}))})),this.usedBuffers.forEach((function(e,t){e.forEach((function(e){e.destroy()}))})),this.freeBuffers=new Map,this.usedBuffers=new Map,this.numUsedBuffers=0,this.numFreeBuffers=0,this.numBytesUsed=0,this.numBytesAllocated=0},e}();function h(e,t){return"".concat(e,"_").concat(t)}var f=function(){function e(e){this.device=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures=new Map,this.usedTextures=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}return e.prototype.acquireTexture=function(e,t,n,a){var r=e*t*g(n),i=m(e,t,n,a);if(this.freeTextures.has(i)||this.freeTextures.set(i,[]),this.usedTextures.has(i)||this.usedTextures.set(i,[]),this.numBytesUsed+=r,this.numUsedTextures++,this.freeTextures.get(i).length>0){this.numFreeTextures--;var o=this.freeTextures.get(i).shift();return this.usedTextures.get(i).push(o),o}this.numBytesAllocated+=r;var s=this.device.createTexture({size:[e,t],format:n,usage:a});return this.usedTextures.get(i).push(s),s},e.prototype.releaseTexture=function(e){if(0!==this.freeTextures.size){var t=e.width,n=e.height,a=e.format,r=m(t,n,a,e.usage);this.freeTextures.has(r)||this.freeTextures.set(r,[]),this.freeTextures.get(r).push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures.get(r),o=i.indexOf(e);if(o<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(o,1);var s=t*n*g(a);this.numBytesUsed-=s}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){this.freeTextures.forEach((function(e,t){e.forEach((function(e){e.destroy()}))})),this.usedTextures.forEach((function(e,t){e.forEach((function(e){e.destroy()}))})),this.freeTextures=new Map,this.usedTextures=new Map,this.numUsedTextures=0,this.numFreeTextures=0,this.numBytesUsed=0,this.numBytesAllocated=0},e}();function m(e,t,n,a){return"".concat(e,"_").concat(t,"_").concat(n,"_").concat(a)}function g(e){if("rgba8unorm"===e)return 16;throw new Error("".concat(e," is not supported!"))}function v(e,t){if(Math.max.apply(Math,c([],u(e),!1))>5)throw new Error("Cannot symbolically compute strides for rank > 6 tensor.");var n=e.length,a=e.map((function(e){return"".concat(t,".").concat("xyzwuv"[e])})),r=new Array(n-1);r[n-2]=a[n-1];for(var i=n-3;i>=0;--i)r[i]="(".concat(r[i+1]," * ").concat(a[i+1],")");return r}var y,x=function(e,t,n){return"int32"===n?"atomicAdd(".concat(e,", bitcast<i32>(").concat(t,"));"):"\n          {\n            var oldValue = 0;\n            loop {\n              let newValueF32 = bitcast<f32>(oldValue) + (".concat(t,");\n              let newValue = bitcast<i32>(newValueF32);\n              let res = atomicCompareExchangeWeak(").concat(e,", oldValue, newValue);\n              if res.exchanged {\n                break;\n              }\n              oldValue = res.old_value;\n            }\n          }")};!function(e){e[e.FROM_PIXELS=0]="FROM_PIXELS",e[e.DRAW=1]="DRAW"}(y||(y={}));var b=function(e,n,a,r,i){var o=function(e,n,a){var r,i,o=[],s=a.workgroupSize[0]*a.workgroupSize[1]*a.workgroupSize[2];if(a.outputComponent=a.outputComponent?a.outputComponent:1,o.push("\n\n      var<private> localId: vec3<u32>;\n      var<private> localIndex: u32;\n      var<private> globalId: vec3<u32>;\n      var<private> numWorkgroups: vec3<u32>;\n      var<private> workgroupId: vec3<u32>;\n\n      // Only used when the y/z dimension of workgroup size is 1.\n      fn getGlobalIndex() -> i32 {\n        ".concat(N(a)?"  return i32(globalId.x);":"  return i32((workgroupId.z * numWorkgroups.x * numWorkgroups.y +\n                workgroupId.y * numWorkgroups.x + workgroupId.x) * ".concat(s,"u +\n                localIndex);\n        "),"\n      }\n    ")),null!=a.pixelsOpType){var u=a.pixelsOpType===y.FROM_PIXELS?"@group(0) @binding(0) var<storage, read_write> result: array<".concat(D(n.dtype,a.outputComponent),">;"):"@group(0) @binding(1) var<storage, read> inBuf : array<".concat(D(e[0].dtype,a.outputComponent),">;"),c=3===n.shape.length?"vec2<i32>":"i32";o.push("\n        struct Uniform {\n          outShapeStrides : ".concat(c,",\n          size            : i32,\n          numChannels     : i32,\n          alpha           : f32,\n        };\n\n        ").concat(u,"\n        @group(0) @binding(2) var<uniform> uniforms: Uniform;\n      "));var d=F(a);return[R,o.join("\n"),z(n.shape),a.getUserCode(),I(d,a)].join("\n")}var l="struct Uniforms { NAN : f32, INFINITY : f32, ";a.variableNames.forEach((function(t,n){var a=C(e[n].shape.length);l+="".concat(t.charAt(0).toLowerCase()+t.slice(1),"Shape : ").concat(a,", "),r=e[n].shape.length-1,i=C(r),l+="".concat(t.charAt(0).toLowerCase()+t.slice(1),"ShapeStrides: ").concat(i,", ")}));var p=C(n.shape.length);l+="outShape : ".concat(p,", "),r=n.shape.length-1,i=C(r),l+="\n         outShapeStrides: ".concat(i,", "),a.size&&(l+="size : i32, ");a.uniforms&&(l+=a.uniforms);l=function(e){var t=/(\w+)\s*:\s*vec(5|6)/g;e=e.replace(t,(function(e){return"@align(16) "+e}));var n=/vec(5|6)\s*,\s*(\w+)/g;return e=e.replace(n,(function(e,t,n){return"vec".concat(t,", @align(16) ").concat(n)}))}(l+="};"),o.push(l),a.atomic?o.push("\n      @group(0) @binding(0) var<storage, read_write> result: array<atomic<i32>>;\n    "):o.push("\n      @group(0) @binding(0) var<storage, read_write> result: array<".concat(D(n.dtype,a.outputComponent),">;\n    "));a.variableNames.forEach((function(t,n){o.push("\n      @group(0) @binding(".concat(1+n,") var<storage, read> ").concat(t,": array<").concat(a.variableComponents?D(e[n].dtype,a.variableComponents[n]):D(e[n].dtype,a.outputComponent),">;\n        "))})),""!==l&&o.push("\n      @group(0) @binding(".concat(1+a.variableNames.length,") var<uniform> uniforms: Uniforms;\n      "));var h=function(e,t){var n=t.x,a=t.y,r=void 0===a?[]:a,i=t.z,o=void 0===i?[]:i,s=e.length,u=n.length+r.length+o.length;if(u!==s)return"";if(n.length===s){var c=C(s);return"fn getOutputCoords() -> ".concat(c,"{\n    let globalIndex = getGlobalIndex();\n    return getCoordsFromIndex(globalIndex);\n  }\n  ")}for(var d="",l=[n,r,o],p=0;p<l.length;p++){var h=l[p];if(0!==h.length)if(1===h.length)d+="let d".concat(h[0]," = i32(globalId[").concat(p,"]);");else{var f=v(h,"uniforms.outShape");d+="var index".concat(p," = i32(globalId[").concat(p,"]);");for(var m=0;m<f.length;m++)d+="let d".concat(h[m]," = index").concat(p," / ").concat(f[m],";"),m===f.length-1?d+="let d".concat(h[m+1]," = ")+"index".concat(p," - d").concat(h[m]," * ").concat(f[m],";"):d+="index".concat(p," = index").concat(p," - d").concat(h[m]," * ").concat(f[m],";")}}var g=[];for(p=0;p<u;p++)g.push("d".concat(p));var y=C(u),x="fn getOutputCoords() -> ".concat(y," {\n  ").concat(d,"\n");0===g.length?x+="return ".concat(y,"(0); }"):x+="return ".concat(y,"(").concat(g.join(","),"); }");return x}(n.shape,a.dispatchLayout),f=[R,o.join("\n")+P,z(n.shape),h,A(n.shape.length)];a.atomic||f.push(function(e,t,n){var a=e.length,r=D(t,n),i="fn setOutputAtIndex(flatIndex : i32, value : ".concat(w(n),") {\n      result[flatIndex] = ").concat(r,"(value);\n    }\n\n    fn setOutputAtIndexI32(flatIndex : i32, value : ").concat(w(n,"i32"),") {\n      result[flatIndex] = ").concat(r,"(value);\n    }\n    ");if(a>=2){var o=["d0","d1","d2","d3","d4","d5"].slice(0,a),s=C(a);i+="\n      fn setOutputAtCoords(".concat(o.map((function(e){return"".concat(e," : i32")})).join(", "),", value : ").concat(w(n),") {\n        let flatIndex = getOutputIndexFromCoords(").concat(s,"(").concat(o.join(", "),"));\n        setOutputAtIndex(flatIndex").concat(1===n?"":" / ".concat(n),", value);\n      }\n      fn setOutputAtCoordsI32(").concat(o.map((function(e){return"".concat(e," : i32")})).join(", "),", value : ").concat(w(n,"i32"),") {\n        let flatIndex = getOutputIndexFromCoords(").concat(s,"(").concat(o.join(", "),"));\n        setOutputAtIndexI32(flatIndex").concat(1===n?"":" / ".concat(n),", value);\n      }\n    ")}return i}(n.shape,n.dtype,a.outputComponent));a.variableNames.forEach((function(t,n){f.push("".concat(z(e[n].shape,t)))}));var m=e.map((function(e,r){return function(e,n,a,r){var i=function(e,t){var n=e.name,a=e.shape.length,r=C(a),i="get"+n.charAt(0).toUpperCase()+n.slice(1),o=["d0","d1","d2","d3","d4","d5"].slice(0,a),s=o.map((function(e){return"".concat(e," : i32")})).join(", ");if(a<1)return"\n      fn ".concat(i,"() -> ").concat(w(t)," {\n        return ").concat(w(t),"(").concat(n,"[0]);\n      }\n    ");var u="uniforms.".concat(n.charAt(0).toLowerCase()+n.slice(1),"Shape"),c="".concat(a,"D");0===a&&(c="1D");return"\n    fn ".concat(i,"(").concat(s,") -> ").concat(w(t)," {\n      return ").concat(w(t),"(").concat(n,"[getIndexFromCoords").concat(c,"(").concat(r,"(").concat(o.join(","),"),\n        ").concat(u,")").concat(1===t?"":" / ".concat(t),"]);\n    }\n   ")}(e,a);e.shape.length<=n.length&&(i+=function(e,n,a,r){var i=e.name,o=i.charAt(0).toUpperCase()+i.slice(1),s="get"+o+"ByOutput",u=e.shape.length,c=n.length,d=C(c);if(t.util.arraysEqual(e.shape,n)&&r)return"\n    fn ".concat(s,"Index(globalIndex : i32) -> ").concat(w(a)," {\n      return ").concat(w(a),"(").concat(i,"[globalIndex]);\n    }\n\n    fn ").concat(s,"Coords(coords : ").concat(d,") -> ").concat(w(a)," {\n      return ").concat(w(a),"(").concat(i,"[").concat(c>1?"getOutputIndexFromCoords(coords)":"coords").concat(1===a?"":" / ".concat(a),"]);\n    }\n    ");var l=t.backend_util.getBroadcastDims(e.shape,n),p=c-u,h="";if(0===u)return"\n    fn ".concat(s,"Index(globalIndex : i32) -> ").concat(w(a),"{\n      return get").concat(o,"();\n    }\n\n    fn ").concat(s,"Coords(coords : ").concat(d,") -> ").concat(w(a),"{\n      return get").concat(o,"();\n    }\n  ");h=c<2&&l.length>=1?"coords = 0;":l.map((function(e){return"coords.".concat(k(e+p)," = 0;")})).join("\n");var f="";if(c<2&&u>0)f="coords";else if(c>1){var m=C(u),g=e.shape.map((function(e,t){return"coords.".concat(k(t+p))})).join(", ");f="".concat(m,"(").concat(g,")")}else f="coords";var v="uniforms.".concat(i.charAt(0).toLowerCase()+i.slice(1),"Shape"),y="".concat(u,"D");return"\n  fn ".concat(s,"Index(globalIndex : i32) -> ").concat(w(a)," {\n    var coords = getCoordsFromIndex(globalIndex);\n    ").concat(h,"\n    return ").concat(w(a),"(").concat(i,"[getIndexFromCoords").concat(y,"(").concat(f,", ").concat(v,")").concat(1===a?"":" / ".concat(a),"]);\n  }\n\n  fn ").concat(s,"Coords(coordsIn : ").concat(d,") -> ").concat(w(a)," {\n    var coords = coordsIn;\n    ").concat(h,"\n    return ").concat(w(a),"(").concat(i,"[getIndexFromCoords").concat(y,"(").concat(f,", ").concat(v,")").concat(1===a?"":" / ".concat(a),"]);\n  }\n")}(e,n,a,r));return i}(e,n.shape,a.variableComponents?a.variableComponents[r]:a.outputComponent,a.dispatchLayout.x.length===n.shape.length)})).join("\n");f.push(m),f.push(a.getUserCode());var g=F(a);return f.push(I(g,a)),f.join("\n")}(a,{dtype:r.dtype,shape:r.shape},n),s=e.createShaderModule({code:o,label:n.constructor.name}),u=t.env().get("WEBGPU_PRINT_SHADER");if(""!==u){var c=(u=u.toLowerCase()).split(",");("all"===u||c.some((function(e){return n.shaderKey.toLowerCase().includes(e)})))&&(console.group(n.shaderKey),console.debug(o),console.groupEnd())}return i?e.createComputePipelineAsync({compute:{module:s,entryPoint:"_start"},label:n.constructor.name,layout:"auto"}):e.createComputePipeline({compute:{module:s,entryPoint:"_start"},label:n.constructor.name,layout:"auto"})},w=function(e,t){switch(void 0===t&&(t="f32"),e){case 1:return"".concat(t);case 2:return"vec2<".concat(t,">");case 3:return"vec3<".concat(t,">");case 4:return"vec4<".concat(t,">");default:throw new Error("".concat(e,"-component ").concat(t," is not supported."))}};function C(e){if(e<=1)return"i32";if(2===e)return"vec2<i32>";if(3===e)return"vec3<i32>";if(4===e)return"vec4<i32>";if(5===e)return"vec5";if(6===e)return"vec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function k(e){if(0===e)return"x";if(1===e)return"y";if(2===e)return"z";if(3===e)return"w";if(4===e)return"u";if(5===e)return"v";throw Error("Index ".concat(e," is not yet supported"))}function S(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];switch(t.length){case 0:e="\n        fn main()\n      ";break;case 1:e="\n        fn main(".concat(t[0]," : i32)\n      ");break;default:throw Error("Unreachable")}return e}function I(e,t){var n;return n="\n     ".concat(function(e){return"\n  @compute @workgroup_size(".concat(e.workgroupSize[0],", ").concat(e.workgroupSize[1],", ").concat(e.workgroupSize[2],")\n")}(t),"\n      fn _start(@builtin(local_invocation_id) LocalId : vec3<u32>,\n                @builtin(global_invocation_id) GlobalId : vec3<u32>,\n                @builtin(local_invocation_index) LocalIndex: u32,\n                @builtin(workgroup_id) WorkgroupId : vec3<u32>,\n                @builtin(num_workgroups) NumWorkgroups : vec3<u32>) {\n        localId = LocalId;\n        localIndex = LocalIndex;\n        globalId = GlobalId;\n        numWorkgroups = NumWorkgroups;\n        workgroupId = WorkgroupId;\n        ").concat(e?"main(getGlobalIndex());":"main();",";\n      }\n    "),n}var R="\n  struct vec5 {x: i32, y: i32, z: i32, w: i32, u: i32};\n  struct vec6 {x: i32, y: i32, z: i32, w: i32, u: i32, v: i32};\n\n  // Checks whether coordinates lie within the bounds of the shape.\n  fn coordsInBounds2D(coord : vec2<i32>, shape : vec2<i32>) -> bool {\n    return all(coord >= vec2<i32>(0)) && all(coord < shape);\n  }\n  fn coordsInBounds3D(coord : vec3<i32>, shape : vec3<i32>) -> bool {\n    return all(coord >= vec3<i32>(0)) && all(coord < shape);\n  }\n  fn coordsInBounds4D(coord : vec4<i32>, shape : vec4<i32>) -> bool {\n    return all(coord >= vec4<i32>(0)) && all(coord < shape);\n  }\n\n  fn getIndexFromCoords1D(coord : i32, shape : i32) -> i32 {\n    return coord;\n  }\n  fn getIndexFromCoords2D(coords : vec2<i32>, shape : vec2<i32>) -> i32 {\n    return dot(coords, vec2<i32>(shape.y, 1));\n  }\n  fn getIndexFromCoords3D(coords : vec3<i32>, shape : vec3<i32>) -> i32 {\n    return dot(coords, vec3<i32>(shape.y * shape.z, shape.z, 1));\n  }\n  fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n    return dot(coords, vec4<i32>(\n        shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n  }\n  fn getIndexFromCoords5D(coords : vec5, shape : vec5) -> i32 {\n    let shapeStrides: vec5 = vec5(shape.y * shape.z * shape.w * shape.u, shape.z * shape.w * shape.u, shape.w * shape.u, shape.u, 1);\n    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u;\n  }\n  fn getIndexFromCoords6D(coords : vec6, shape : vec6) -> i32 {\n    let shapeStrides: vec6 = vec6(shape.y * shape.z * shape.w * shape.u * shape.v, shape.z * shape.w * shape.u * shape.v, shape.w * shape.u * shape.v, shape.u * shape.v, shape.v, 1);\n    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u + coords.v*shapeStrides.v;\n  }\n\n  // NaN defination in IEEE 754-1985 is :\n  //   - sign = either 0 or 1.\n  //   - biased exponent = all 1 bits.\n  //   - fraction = anything except all 0 bits (since all 0 bits represents infinity).\n  // https://en.wikipedia.org/wiki/IEEE_754-1985#Representation_of_non-numbers\n  fn isnan(val: f32) -> bool {\n    let floatToUint: u32 = bitcast<u32>(val);\n    return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n  }\n  fn isnanVec4(val : vec4<f32>) -> vec4<bool> {\n    let floatToUint: vec4<u32> = bitcast<vec4<u32>>(val);\n    return (floatToUint & vec4<u32>(0x7fffffffu)) > vec4<u32>(0x7f800000u);\n  }\n",P="\n  fn isinf(val: f32) -> bool {\n    return abs(val) == uniforms.INFINITY;\n  }\n";function z(e,n){void 0===n&&(n="");var a=e.length,r=""!==n?"get".concat(n.charAt(0).toUpperCase()+n.slice(1),"CoordsFromIndex"):"getCoordsFromIndex",i=""!==n?"".concat(n.charAt(0).toLowerCase()+n.slice(1),"ShapeStrides"):"outShapeStrides";if(a<=1)return"fn ".concat(r,"(index : i32) -> i32 { return index; }");for(var o,s=t.util.computeStrides(e),u=C(a),c=[],d=0;d<a;d++)c.push("d".concat(d));return 1===s.length?"    fn ".concat(r,"(index : i32) -> vec2<i32> {\n      let d0 = index / uniforms.").concat(i,"; let d1 = index - d0 * uniforms.").concat(i,";\n      return vec2<i32>(d0, d1);\n    }"):(o="var index2 = index;"+s.map((function(e,t){var n="let ".concat(c[t]," = index2 / uniforms.").concat(i,".").concat(k(t)),a=t===s.length-1?"let ".concat(c[t+1]," = index2 - ").concat(c[t]," * uniforms.").concat(i,".").concat(k(t)):"index2 = index2 - ".concat(c[t]," * uniforms.").concat(i,".").concat(k(t));return"".concat(n,"; ").concat(a,";")})).join(""),"\n    fn ".concat(r,"(index : i32) -> ").concat(u," {\n      ").concat(o,"\n      return ").concat(u,"(").concat(c.join(","),");\n    }\n  "))}function A(e){var n="";switch(e){case 0:case 1:n+="\n        fn getOutputIndexFromCoords(coords : i32) -> i32 {\n          return coords;\n        }\n        ";break;case 2:n+="\n        fn getOutputIndexFromCoords(coords : vec2<i32>) -> i32 {\n          return dot(coords, vec2<i32>(uniforms.outShapeStrides, 1));\n        }\n        ";break;case 3:n+="\n        fn getOutputIndexFromCoords(coords : vec3<i32>) -> i32 {\n          return dot(coords, vec3<i32>(uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, 1));\n        }\n        ";break;case 4:n+="\n        fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n          return dot(coords, vec4<i32>(\n            uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, uniforms.outShapeStrides.z, 1));\n        }\n        ";break;case 5:n+="\n        fn getOutputIndexFromCoords(coords : vec5) -> i32 {\n          return coords.x * uniforms.outShapeStrides.x +\n              coords.y * uniforms.outShapeStrides.y +\n              coords.z * uniforms.outShapeStrides.z +\n              coords.w * uniforms.outShapeStrides.w +\n              coords.u;\n        }\n        ";break;case 6:n+="\n        fn getOutputIndexFromCoords(coords : vec6) -> i32 {\n          return coords.x * uniforms.outShapeStrides.x +\n              coords.y * uniforms.outShapeStrides.y +\n              coords.z * uniforms.outShapeStrides.z +\n              coords.w * uniforms.outShapeStrides.w +\n              coords.u * uniforms.outShapeStrides.u +\n              coords.v;\n        }\n        ";break;default:t.util.assert(!1,(function(){return"Unsupported ".concat(e,"D shape")}))}return n}function N(e){return 1===e.dispatch[1]&&1===e.dispatch[2]}function D(e,t){if(void 0===t&&(t=1),"float32"===e)return w(t,"f32");if("int32"===e||"bool"===e)return w(t,"i32");throw new Error("type ".concat(e," is not supported."))}function F(e){return(!e.dispatchLayout.hasOwnProperty("y")||0===e.dispatchLayout.y.length)&&(!e.dispatchLayout.hasOwnProperty("z")||0===e.dispatchLayout.z.length)}var T,_=function(e){for(var t=1,n=0;n<e.length;n++)t*=e[n];return t};function L(e,t,n,a){void 0===n&&(n=[1,1,1]),void 0===a&&(a=[1,1,1]);var r=u([Math.ceil(_(e.x.map((function(e){return t[e]})))/(n[0]*a[0])),e.y?Math.ceil(_(e.y.map((function(e){return t[e]})))/(n[1]*a[1])):1,e.z?Math.ceil(_(e.z.map((function(e){return t[e]})))/(n[2]*a[2])):1],3);return[r[0],r[1],r[2]]}function W(e,t,n,a){void 0===a&&(a=!1);var r=[8,8,1],i=[4,4,1];return a||(e<=8&&(i[1]=1),t<=16&&n<=16&&(r[0]=4)),{workgroupSize:r,elementsPerThread:i}}function E(e,t,n){if(void 0===n&&(n=!1),n)return[8,8,1];var a=_(e.x.map((function(e){return t[e]}))),r=_(e.y.map((function(e){return t[e]})));return a<=4?[4,16,1]:r<=4?[16,4,1]:[16,16,1]}function B(e,t,n){if(void 0===n&&(n=!1),n)return[4,4,1];var a=_(e.x.map((function(e){return t[e]}))),r=_(e.y.map((function(e){return t[e]})));return a<=4?[1,2,1]:r<=4?[2,1,1]:[2,2,1]}function O(e){return{x:e.map((function(e,t){return t}))}}function U(e){if("float32"===e||"int32"===e||"bool"===e||"string"===e)return 4;if("complex64"===e)return 8;throw new Error("Unknown dtype ".concat(e))}function M(){return!("undefined"==typeof globalThis||!globalThis.navigator||!globalThis.navigator.gpu)}function V(e,n){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&t.util.assert("complex64"!==e.dtype,(function(){return"".concat(n," does not support complex64 tensors ")+"in the WebGPU backend."}))}))}!function(e){e[e.MatMulReduceProgram=0]="MatMulReduceProgram",e[e.MatMulSplitKProgram=1]="MatMulSplitKProgram",e[e.MatMulSmallOutputSizeProgram=2]="MatMulSmallOutputSizeProgram",e[e.MatMulPackedProgram=3]="MatMulPackedProgram",e[e.MatMulMax=4]="MatMulMax"}(T||(T={}));var G,H={__proto__:null,GPUBytesPerElement:U,get MatMulProgramType(){return T},assertNotComplex:V,computeDispatch:L,computeWorkPerThreadForConv2d:B,computeWorkgroupInfoForMatMul:W,computeWorkgroupSizeForConv2d:E,flatDispatchLayout:O,isWebGPUSupported:M,tilesFitEvenlyIntoShape:function(e,t){if(e.length!==t.length)throw new Error("Cannot compute whether rank ".concat(e.length)+" tiles fit evenly into rank ".concat(t.length," shape")+" - ranks must match.");return t.every((function(t,n){return t%e[n]==0}))}},X=t.env().getNumber("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD"),K=function(e){function n(n,a){var r=e.call(this)||this;if(r.commandQueueOwnedIds=new WeakSet,r.dispatchCountInPass=0,r.disposed=!1,r.downloadWaitMs=0,r.tensorDataPendingDisposal=[],r.queryResolveBuffer=null,r.querySet=null,r.querySetCount=2,r.stagingPendingDisposal=[],r.uniformPendingDisposal=[],r.uploadWaitMs=0,r.hasReadSyncWarned=!1,r.hasTimestampQueryWarned=!1,!M())throw new Error("WebGPU is not supported on this device");return r.pipelineCache={},r.device=n,r.queue=n.queue,r.commandEncoder=null,r.computePassEncoder=null,r.adapterInfo=new l(a),r.supportTimestampQuery=r.device.features.has("timestamp-query"),r.thresholdToIncreaseWorkgroups=r.adapterInfo.intelGPUGeneration>=12?16:8,r.bufferManager=new p(r.device),r.textureManager=new f(r.device),r.tensorMap=new t.DataStorage(r,t.engine()),t.env().getBool("WEBGPU_USE_PROFILE_TOOL")&&(r.dummyCanvas=document.createElement("canvas"),r.dummyCanvas.width=1,r.dummyCanvas.height=1,r.dummyContext=r.dummyCanvas.getContext("webgpu"),r.dummyContext.configure({device:n,format:"bgra8unorm"}),document.body.appendChild(r.dummyCanvas)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,e),n.prototype.nextDataId=function(){return n.nextDataId++},n.prototype.floatPrecision=function(){return 32},n.prototype.disposeData=function(e,t){if(void 0===t&&(t=!1),!this.tensorMap.has(e))return!0;var n=this.tensorMap.get(e);return t?n.refCount=0:n.refCount--,!(n.refCount>0)&&(null!=n.complexTensorInfos&&(this.disposeData(n.complexTensorInfos.real.dataId),this.disposeData(n.complexTensorInfos.imag.dataId)),this.commandQueueOwnedIds.has(e)?(this.tensorDataPendingDisposal.push(e),!0):(this.releaseResource(e),this.tensorMap.delete(e),!0))},n.prototype.memory=function(){return{numBytesInGPU:this.bufferManager.numBytesUsed,numBytesAllocatedInGPU:this.bufferManager.numBytesAllocated,unreliable:!1}},n.prototype.releaseResource=function(e){var t=this.tensorMap.get(e);t&&t.resource&&(t.external||(t.resource instanceof GPUBuffer?this.bufferManager.releaseBuffer(t.resource):t.resource instanceof GPUTexture&&this.textureManager.releaseTexture(t.resource)),t.resource=null)},n.prototype.refCount=function(e){return this.tensorMap.has(e)?this.tensorMap.get(e).refCount:0},n.prototype.incRef=function(e){this.tensorMap.get(e).refCount++},n.prototype.decRef=function(e){this.tensorMap.has(e)&&this.tensorMap.get(e).refCount--},n.prototype.write=function(e,t,n){if("complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var a={id:this.nextDataId()};return this.tensorMap.set(a,{dtype:n,shape:t,values:e,refCount:1}),a},n.prototype.move=function(e,t,n,a,r){if("complex64"===a)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.tensorMap.set(e,{dtype:a,shape:n,values:t,refCount:r})},n.prototype.submitQueue=function(){var e=this;this.queue.submit([this.commandEncoder.finish()]),this.commandEncoder=null,this.dispatchCountInPass=0,this.commandQueueOwnedIds=new WeakSet,this.tensorDataPendingDisposal.forEach((function(t){e.releaseResource(t),e.tensorMap.delete(t)})),this.uniformPendingDisposal.forEach((function(t){return e.bufferManager.releaseBuffer(t)})),this.stagingPendingDisposal.forEach((function(t){return e.bufferManager.releaseBuffer(t,!1)})),this.tensorDataPendingDisposal=[],this.uniformPendingDisposal=[],this.stagingPendingDisposal=[]},n.prototype.ensureCommandEncoderReady=function(){this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder())},n.prototype.endComputePassEncoder=function(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)},n.prototype.checkCompileCompletionAsync=function(){return i(this,void 0,void 0,(function(){var e,t,n=this;return o(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Promise.all(Object.values(this.pipelineCache))];case 1:return e=a.sent(),[3,3];case 2:throw t=a.sent(),new Error(t.message);case 3:return Object.keys(this.pipelineCache).map((function(t,a){n.pipelineCache[t]=e[a]})),[2]}}))}))},n.prototype.getBufferData=function(e){return i(this,void 0,void 0,(function(){var n,a,r;return o(this,(function(i){switch(i.label){case 0:return t.env().getBool("WEBGPU_ENGINE_COMPILE_ONLY")?(console.warn("The data may be invalid since WEBGPU_ENGINE_COMPILE_ONLY is true, this can only be called when WEBGPU_ENGINE_COMPILE_ONLY is false"),[2,null]):(n=e.size,a=this.bufferManager.acquireBuffer(n,GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ),this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(e,0,a,0,n),this.submitQueue(),[4,a.mapAsync(GPUMapMode.READ)]);case 1:return i.sent(),r=a.getMappedRange().slice(0),a.unmap(),null!=a&&this.bufferManager.releaseBuffer(a),t.env().getBool("WEBGPU_USE_PROFILE_TOOL")&&(t.util.assert(void 0!==this.dummyContext,(function(){return"Fail to get context for profiling tool"})),this.dummyContext.getCurrentTexture()),[2,r]}}))}))},n.prototype.convertAndCacheOnCPU=function(e,t){var n=this.tensorMap.get(e);return n.values=t,n.values},n.prototype.readSync=function(e){var n=this,a=this.tensorMap.get(e),r=a.values,i=a.complexTensorInfos;if(null!=r||"string"===a.dtype)return r;if("complex64"===a.dtype){var o=this.readSync(i.real.dataId),s=this.readSync(i.imag.dataId),u=t.util.convertBackendValuesAndArrayBuffer(t.backend_util.mergeRealAndImagArrays(o,s).buffer,"float32");return this.convertAndCacheOnCPU(e,u),u}this.hasReadSyncWarned||(this.hasReadSyncWarned=!0,console.warn("The performance of synchronously reading data from GPU to CPU is poor on the webgpu backend, please use asynchronous APIs instead."));var c=["opaque","premultiplied"],d=a.resource,l=d.size;t.util.assert(l%4==0,(function(){return"Because there is 4 bytes for one pixel, buffer size must be multiple of 4."}));var p=l/4,h=new ArrayBuffer(l),f=256,m=256,g=c.map((function(e){return new OffscreenCanvas(f,m)})),v=new OffscreenCanvas(f,m);this.endComputePassEncoder(),g.map((function(e,t){var a=e.getContext("webgpu");return a.configure({device:n.device,format:"bgra8unorm",usage:GPUTextureUsage.COPY_DST,alphaMode:c[t]}),a.getCurrentTexture()})).map((function(e,t){for(var a=function(a,r,i){n.ensureCommandEncoderReady(),n.commandEncoder.copyBufferToTexture({buffer:d,bytesPerRow:1024,offset:i},{texture:e},{width:a,height:r}),n.submitQueue();var o=v.getContext("2d",{willReadFrequently:!0});o.clearRect(0,0,a,r),o.drawImage(g[t],0,0);for(var s=o.getImageData(0,0,a,r).data,u=c[t],l=new Uint8ClampedArray(h,i,a*r*4),p=0;p<l.length;p+=4)if("premultiplied"===u)l[p+3]=s[p+3];else{var f=s[p];l[p]=s[p+2],l[p+1]=s[p+1],l[p+2]=f}},r=Math.floor(p/65536),i=f,o=m,s=0,u=0;u<r;u++)a(i,o,s),s+=262144;var l=p%65536;(o=Math.floor(l/f))>0&&(a(i,o,s),s+=1024*o),(i=l%f)>0&&a(i,1,s)}));var y=t.util.convertBackendValuesAndArrayBuffer(h,a.dtype);return this.convertAndCacheOnCPU(e,y),y},n.prototype.read=function(e){return i(this,void 0,void 0,(function(){var n,a,r,i,s,u,c;return o(this,(function(o){switch(o.label){case 0:if(!this.tensorMap.has(e))throw new Error("Tensor ".concat(e," was not registered!"));return n=this.tensorMap.get(e),null!=(a=n.values)?[2,a]:"complex64"!==n.dtype?[3,2]:[4,Promise.all([this.read(n.complexTensorInfos.real.dataId),this.read(n.complexTensorInfos.imag.dataId)])];case 1:return i=o.sent(),s=i[0],u=i[1],r=t.backend_util.mergeRealAndImagArrays(s,u),[3,4];case 2:return[4,this.getBufferData(n.resource)];case 3:c=o.sent(),r=t.util.convertBackendValuesAndArrayBuffer(c,n.dtype),o.label=4;case 4:return this.convertAndCacheOnCPU(e,r),[2,r]}}))}))},n.prototype.copyBuffer=function(e){var t=e.size,n=e.usage,a=this.bufferManager.acquireBuffer(t,n);return this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(e,0,a,0,t),this.submitQueue(),a},n.prototype.createTensorFromGPUData=function(e,n,a){var r=e.buffer;if("complex64"===a)throw new Error("Cannot write to a complex64 dtype. ");var i={id:this.nextDataId()};this.tensorMap.set(i,{dtype:a,shape:n,values:null,refCount:1,external:e.zeroCopy});var o=this.tensorMap.get(i),s=U(o.dtype)*t.util.sizeFromShape(o.shape);if(e.buffer.size<s)throw new Error("GPUBuffer size(".concat(e.buffer.size,") is smaller than tensor size(").concat(s,")!"));if((e.buffer.usage&(GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC))!=(GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC))throw new Error("GPUBuffer.usage should include GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC!");return!0!==e.zeroCopy&&(r=this.copyBuffer(r)),o.resource=r,t.engine().makeTensorFromDataId(i,n,a,this)},n.prototype.readToGPU=function(e){var n=this.tensorMap.get(e),a=n.values,r=n.dtype,i=n.shape,o=n.resource;if("complex64"===r)throw new Error("Does not support reading buffer for complex64 dtype.");if(null==o)throw null!=a?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var s=o,u=s.size,c=s.usage,d=this.bufferManager.acquireBuffer(u,c);this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(o,0,d,0,u),this.submitQueue();var l=this.makeTensorInfo(i,r),p=t.engine().makeTensorFromTensorInfo(l);return this.tensorMap.get(l.dataId).resource=d,{tensorRef:p,buffer:d}},n.prototype.bufferSync=function(e){var n=this.readSync(e.dataId);if("string"===e.dtype)try{var a=n.map((function(e){return t.util.decodeString(e)}));return t.buffer(e.shape,e.dtype,a)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return t.buffer(e.shape,e.dtype,n)},n.prototype.time=function(e){return i(this,void 0,void 0,(function(){var n,a,r,i,s,u,c;return o(this,(function(o){switch(o.label){case 0:return this.supportTimestampQuery||this.hasTimestampQueryWarned||(console.warn("This device doesn't support timestamp-query extension. Start Chrome browser with flag --enable-dawn-features=allow_unsafe_apis to try it again. Otherwise, zero will be shown for the kernel time when profiling mode is enabled."),this.hasTimestampQueryWarned=!0),n=this.activeTimers,a=[],r=!1,null==this.programTimersStack?(this.programTimersStack=a,r=!0):this.activeTimers.push(a),this.activeTimers=a,e(),i=t.util.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),s=t.util.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,r&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},[4,Promise.all(i)];case 1:return c=o.sent(),u.kernelMs=t.util.sum(c),u.getExtraProfileInfo=function(){return c.map((function(e,t){return{name:s[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}}))}))},n.prototype.makeTensorInfo=function(e,n,a){return"string"===n&&null!=a&&a.length>0&&t.util.isString(a[0])&&(a=a.map((function(e){return t.util.encodeString(e)}))),{dataId:this.write(a,e,n),shape:e,dtype:n}},n.prototype.tensorToBinding=function(e){if(!e)return null;var t=this.tensorMap.get(e.dataId).resource;return t instanceof GPUBuffer?{buffer:t}:t instanceof GPUTexture?t.createView():t},n.prototype.uploadToGPU=function(e){var n=this.tensorMap.get(e);if(null==n.resource){var a,r=U(n.dtype)*t.util.sizeFromShape(n.shape),i=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;if(n.values){if("unmapped"===(a=this.bufferManager.acquireBuffer(r,i,!0)).mapState){var o=this.bufferManager.acquireBuffer(r,GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC,!0,!1),s=o.getMappedRange();"int32"===n.dtype||"bool"===n.dtype?new Int32Array(s).set(n.values):new Float32Array(s).set(n.values),o.unmap(),this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(o,0,a,0,r),this.stagingPendingDisposal.push(o)}else{s=a.getMappedRange();"int32"===n.dtype||"bool"===n.dtype?new Int32Array(s).set(n.values):new Float32Array(s).set(n.values),a.unmap()}n.values=null}else a=this.bufferManager.acquireBuffer(r,i);n.resource=a}},n.prototype.makeUniforms=function(e){var n=0,a=0,r=[],i=1;e.forEach((function(e){var o;switch(0===e.data.length&&(e.data=[1]),e.data.length){case 1:o=4;break;case 2:o=8;break;case 3:case 4:case 5:case 6:o=16;break;default:t.util.assert(!1,(function(){return"Unsupported ".concat(e.data.length,"D shape")}))}5!==a&&6!==a||(o=16),o>i&&(i=o),n=Math.ceil(n/o)*o,a=e.data.length,r.push(n),n+=4*e.data.length})),n=Math.ceil(n/i)*i;var o=new ArrayBuffer(n);e.forEach((function(e,t){var n=r[t];"int32"===e.type?new Int32Array(o,n,e.data.length).set(e.data):"uint32"===e.type?new Uint32Array(o,n,e.data.length).set(e.data):new Float32Array(o,n,e.data.length).set(e.data)}));var s=this.bufferManager.acquireBuffer(n,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);return this.queue.writeBuffer(s,0,o,0,n),this.uniformPendingDisposal.push(s),{offset:0,size:n,buffer:s}},n.prototype.runWebGPUProgram=function(e,n,a,r,i){var o=this;if(i||(i=this.makeTensorInfo(e.outputShape,a)),0===t.util.sizeFromShape(i.shape))return this.tensorMap.get(i.dataId).values=t.util.getTypedArrayFromDType(i.dtype,0),i;this.uploadToGPU(i.dataId),e.dispatch=function(e,n){var a=e.limits.maxComputeWorkgroupsPerDimension,r=n.dispatchLayout,i=n.dispatch;if(i.every((function(e){return e<=a})))return i;t.util.assert(i[0]>a&&void 0===r.y&&void 0===r.z,(function(){return"Dispatch size exceeds WebGPU limits in Y or Z dimension."}));var o=Math.ceil(Math.sqrt(i[0]));return o>a?(o=Math.ceil(Math.cbrt(i[0])),t.util.assert(o<=a,(function(){return"Total dispatch size exceeds WebGPU maximum."})),[o,o,o]):[o,o,1]}(this.device,e);var s=n.map((function(t,n){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");return o.uploadToGPU(t.dataId),{dtype:o.tensorMap.get(t.dataId).dtype,shape:t.shape,name:e.variableNames[n]}}));e.shaderKey=function(e,n,a){var r=e.shaderKey;if(null!=e.pixelsOpType)return r;var i=[],o=[];n.forEach((function(e){i.push(e.shape),o.push(e.dtype)})),i.push(a.shape),o.push(a.dtype);var s=n.map((function(e){return t.backend_util.getBroadcastDims(e.shape,a.shape)})),u=n.map((function(e){return t.util.arraysEqual(e.shape,a.shape)})).join("_"),c=s.map((function(e){return e.join("_")})).join(";"),d=N(e)?"flatDispatch":"";return r+"_"+(e.workgroupSize?e.workgroupSize.join(","):"")+i.map((function(e){return e.length})).join(",")+o.join(",")+e.variableNames.join(",")+c+u+d}(e,s,i);var u=t.env().getBool("WEBGPU_ENGINE_COMPILE_ONLY");return e.shaderKey in this.pipelineCache||(this.pipelineCache[e.shaderKey]=b(this.device,e,s,i,u)),e.pipeline=this.pipelineCache[e.shaderKey],u||this.recordAndSubmit(e,i,n,r),i},n.prototype.recordAndSubmit=function(e,n,a,r){var i=this;if(e.pipeline instanceof Promise)throw new Error("Please call checkCompileCompletionAsync to ensure parallel compilation is done!");var o=[],s=[],d="int32";if(null==e.pixelsOpType){o.push({type:"float32",data:[NaN]},{type:"float32",data:[1/0]}),s=a.concat(n).map((function(e){return e.shape}));var l="int32";s.map((function(e){o.push({type:l,data:e});var n=t.util.computeStrides(e);o.push({type:l,data:n})}))}else{var p=t.util.computeStrides(n.shape);o.push({type:d,data:p})}if(e.size){var h=t.util.sizeFromShape(e.outputShape);o.push({type:d,data:[e.outputComponent?h/e.outputComponent:h]})}r&&(o=c(c([],u(o),!1),u(r),!1));var f=c(c([this.tensorToBinding(n)],u(a.map((function(e){return i.tensorToBinding(e)}))),!1),[this.makeUniforms(o)],!1);a.forEach((function(e){i.commandQueueOwnedIds.add(e.dataId)})),this.commandQueueOwnedIds.add(n.dataId);var m=this.device.createBindGroup({layout:e.pipeline.getBindGroupLayout(0),entries:f.map((function(e,t){return{binding:t,resource:e}}))}),g=null!=this.activeTimers;this.ensureCommandEncoderReady();var v={};g&&this.supportTimestampQuery?(this.endComputePassEncoder(),null==this.querySet&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.querySetCount})),v.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1},this.computePassEncoder=this.commandEncoder.beginComputePass(v)):this.computePassEncoder||(this.computePassEncoder=this.commandEncoder.beginComputePass(v)),this.computePassEncoder.setPipeline(e.pipeline),this.computePassEncoder.setBindGroup(0,m),this.computePassEncoder.dispatchWorkgroups(e.dispatch[0],e.dispatch[1],e.dispatch[2]),this.dispatchCountInPass++,(g||t.env().get("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE")<=this.dispatchCountInPass||e.pixelsOpType===y.DRAW)&&(this.endComputePassEncoder(),g?this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime()}):this.submitQueue())},n.prototype.getQueryTime=function(){return i(this,void 0,void 0,(function(){var e,t,n;return o(this,(function(a){switch(a.label){case 0:return this.supportTimestampQuery?(null==this.queryResolveBuffer&&(this.queryResolveBuffer=this.bufferManager.acquireBuffer(8*this.querySetCount,GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST|GPUBufferUsage.QUERY_RESOLVE)),this.commandEncoder.resolveQuerySet(this.querySet,0,this.querySetCount,this.queryResolveBuffer,0),e=this.bufferManager.acquireBuffer(8*this.querySetCount,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,8*this.querySetCount),this.submitQueue(),[4,e.mapAsync(GPUMapMode.READ)]):[2,0];case 1:return a.sent(),t=new BigUint64Array(e.getMappedRange()),n=Number(t[1]-t[0])/1e6,e.unmap(),this.bufferManager.releaseBuffer(e),[2,n]}}))}))},n.prototype.shouldExecuteOnCPU=function(e,n){var a=this;return void 0===n&&(n=X),t.env().getBool("WEBGPU_CPU_FORWARD")&&e.every((function(e){return null==a.tensorMap.get(e.dataId).resource&&t.util.sizeFromShape(e.shape)<n}))},n.prototype.numDataIds=function(){return this.tensorMap.numDataIds()-this.tensorDataPendingDisposal.length},n.prototype.dispose=function(){this.disposed||(null!=this.querySet&&this.querySet.destroy(),this.bufferManager.dispose(),this.textureManager.dispose(),this.disposed=!0)},n}(t.KernelBackend);K.nextDataId=0,M()&&t.registerBackend("webgpu",(function(){return i(void 0,void 0,void 0,(function(){var e,n,a,r,i,s,u,c;return o(this,(function(o){switch(o.label){case 0:return e={powerPreference:t.env().get("WEBGPU_USE_LOW_POWER_GPU")?"low-power":"high-performance"},[4,navigator.gpu.requestAdapter(e)];case 1:return n=o.sent(),a={},r=[],n.features.has("timestamp-query")&&r.push("timestamp-query"),n.features.has("bgra8unorm-storage")&&r.push(["bgra8unorm-storage"]),a.requiredFeatures=r,i=n.limits,a.requiredLimits={maxComputeWorkgroupStorageSize:i.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:i.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:i.maxStorageBufferBindingSize,maxBufferSize:i.maxBufferSize,maxComputeWorkgroupSizeX:i.maxComputeWorkgroupSizeX,maxComputeInvocationsPerWorkgroup:i.maxComputeInvocationsPerWorkgroup},[4,n.requestDevice(a)];case 2:return s=o.sent(),"info"in n?(u=n.info,[3,7]):[3,3];case 3:return"requestAdapterInfo"in n?[4,n.requestAdapterInfo()]:[3,5];case 4:return c=o.sent(),[3,6];case 5:c=void 0,o.label=6;case 6:u=c,o.label=7;case 7:return[2,new K(s,u)]}}))}))}),3),function(e){e[e.ADD=0]="ADD",e[e.ATAN2=1]="ATAN2",e[e.COMPLEX_MULTIPLY_IMAG=2]="COMPLEX_MULTIPLY_IMAG",e[e.COMPLEX_MULTIPLY_REAL=3]="COMPLEX_MULTIPLY_REAL",e[e.DIV=4]="DIV",e[e.ELU_DER=5]="ELU_DER",e[e.EQUAL=6]="EQUAL",e[e.FLOOR_DIV=7]="FLOOR_DIV",e[e.GREATER=8]="GREATER",e[e.GREATER_EQUAL=9]="GREATER_EQUAL",e[e.LESS=10]="LESS",e[e.LESS_EQUAL=11]="LESS_EQUAL",e[e.LOGICAL_AND=12]="LOGICAL_AND",e[e.LOGICAL_OR=13]="LOGICAL_OR",e[e.MAX=14]="MAX",e[e.MIN=15]="MIN",e[e.MOD=16]="MOD",e[e.MUL=17]="MUL",e[e.NOT_EQUAL=18]="NOT_EQUAL",e[e.POW=19]="POW",e[e.PRELU=20]="PRELU",e[e.SQUARED_DIFFERENCE=21]="SQUARED_DIFFERENCE",e[e.SUB=22]="SUB"}(G||(G={}));var q;function Y(e,t){var n;do{switch(e){case G.ATAN2:n="let resultTemp = atan2(a, b);";break;case G.MAX:n="let resultTemp = max(a, b);";break;case G.MIN:n="let resultTemp = min(a, b);";break;case G.MOD:n=t?"\n  let isNaN = !vec4<bool>(b);\n  var resultTemp = vec4<f32>(a % b);\n  if (!((a[0] < 0. && b[0] < 0.) || (a[0] >= 0. && b[0] > 0.))) {\n    resultTemp[0] = (resultTemp[0] + b[0]) % b[0];\n  }\n  if (!((a[1] < 0. && b[1] < 0.) || (a[1] >= 0. && b[1] > 0.))) {\n    resultTemp[1] = (resultTemp[1] + b[1]) % b[1];\n  }\n  if (!((a[2] < 0. && b[2] < 0.) || (a[2] >= 0. && b[2] > 0.))) {\n    resultTemp[2] = (resultTemp[2] + b[2]) % b[2];\n  }\n  if (!((a[3] < 0. && b[3] < 0.) || (a[3] >= 0. && b[3] > 0.))) {\n    resultTemp[3] = (resultTemp[3] + b[3]) % b[3];\n  }\n":"\n  let isNaN = b == 0.;\n  var resultTemp = a % b;\n  resultTemp = select((resultTemp + b) % b, resultTemp,\n      (a < 0. && b < 0.) || (a >= 0. && b > 0.));\n";break;case G.NOT_EQUAL:n=t?"\n  var resultTemp = vec4<f32>(a != b);\n  let valueForNaN = 1.0;\n":"\n  var resultTemp = f32(a != b);\n  let valueForNaN = 1.0;\n";break;case G.POW:n=t?"\n  let isModRound1Bool = vec4<i32>(round(abs(b) % vec4<f32>(2.0))) == vec4<i32>(1);\n  let isModRound1 = vec4<f32>(isModRound1Bool);\n  let multiplier = sign(a) * isModRound1 + (vec4<f32>(1.0) - isModRound1);\n  var resultTemp = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  let isExpZero = b == vec4<f32>(0.0);\n  if (isExpZero.r) {\n    resultTemp.r = 1.0;\n  }\n  if (isExpZero.g) {\n    resultTemp.g = 1.0;\n  }\n  if (isExpZero.b) {\n    resultTemp.b = 1.0;\n  }\n  if (isExpZero.a) {\n    resultTemp.a = 1.0;\n  }\n  let isNaN = (a < vec4<f32>(0.0)) & (floor(b) < b);\n":"\n  let isNaN = a < 0.0 && floor(b) < b;\n  if (b == 0.0) {\n    return 1.0;\n  }\n  var resultTemp = select(sign(a) * pow(abs(a), b), pow(abs(a), b),\n      round(abs(b) % 2.0) != 1.0);\n";break;default:continue}var a=void 0,r=void 0,i=void 0;return t?(a="isnanVec4",r="vec4<f32>",i="vec4<bool>"):(a="isnan",r="f32",i="bool"),"\n      let aIsNaN = ".concat(a,"(a);\n      let aPostLegalization = select(a, ").concat(r,"(42), aIsNaN);\n      let bIsNaN = ").concat(a,"(b);\n      let bPostLegalization = select(b, ").concat(r,"(42), bIsNaN);\n      let isNaN = false;\n      let valueForNaN = uniforms.NAN;\n      {\n        let a = aPostLegalization;\n        let b = bPostLegalization;\n        ").concat(n,"\n        return select(\n            resultTemp, ").concat(r,"(valueForNaN),\n            ").concat(i,"(isNaN) | aIsNaN | bIsNaN);\n      }\n    ")}while(0);switch(e){case G.ADD:n="let resultTemp = a + b;";break;case G.COMPLEX_MULTIPLY_IMAG:n="let resultTemp = areal * bimag + aimag * breal;";break;case G.COMPLEX_MULTIPLY_REAL:n="let resultTemp = areal * breal - aimag * bimag;";break;case G.DIV:n="let resultTemp = a / b;";break;case G.ELU_DER:n="let resultTemp = select(a * (b + 1.0), a, b >= b - b);";break;case G.EQUAL:n="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a == b);\n";break;case G.FLOOR_DIV:n="\n  let remainder =\n      select(a % b, round(a % b), (round(a) == a) & (round(b) == b));\n  let quotient = (a - remainder) / b;\n  let resultTemp =\n      round(select(quotient, quotient - 1, sign(remainder) == -sign(b)));\n";break;case G.GREATER:n="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a > b);\n";break;case G.GREATER_EQUAL:n="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a >= b);\n";break;case G.LESS:n="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a < b);\n";break;case G.LESS_EQUAL:n="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a <= b);\n";break;case G.LOGICAL_AND:return t?"return (vec4<f32>(a >= vec4<f32>(1.0)) *\n  vec4<f32>(b >= vec4<f32>(1.0)));":"return f32(a >= 1.0 && b >= 1.0);";case G.LOGICAL_OR:return t?"return min(vec4<f32>(a >= vec4<f32>(1.0)) +\n  vec4<f32>(b >= vec4<f32>(1.0)), vec4<f32>(1.0));":"return f32(a >= 1.0 || b >= 1.0);";case G.MUL:n="let resultTemp = a * b;";break;case G.PRELU:return t?"\n  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));\n  return (aLessThanZero * (b * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);\n":"if (a < 0.0) { return b * a; }  return a;";case G.SQUARED_DIFFERENCE:n="let resultTemp = (a - b) * (a - b);";break;case G.SUB:n="let resultTemp = a - b;"}return"\n    ".concat(n,"\n    return resultTemp;\n  ")}!function(e){e[e.ABS=0]="ABS",e[e.ACOS=1]="ACOS",e[e.ACOSH=2]="ACOSH",e[e.ASIN=3]="ASIN",e[e.ASINH=4]="ASINH",e[e.ATAN=5]="ATAN",e[e.ATANH=6]="ATANH",e[e.CEIL=7]="CEIL",e[e.COS=8]="COS",e[e.COSH=9]="COSH",e[e.ELU=10]="ELU",e[e.ERF=11]="ERF",e[e.EXP=12]="EXP",e[e.EXPM1=13]="EXPM1",e[e.FLOOR=14]="FLOOR",e[e.IS_FINITE=15]="IS_FINITE",e[e.IS_INF=16]="IS_INF",e[e.IS_NAN=17]="IS_NAN",e[e.LINEAR=18]="LINEAR",e[e.LOG=19]="LOG",e[e.LOG1P=20]="LOG1P",e[e.LOGICAL_NOT=21]="LOGICAL_NOT",e[e.NEG=22]="NEG",e[e.RELU=23]="RELU",e[e.RELU6=24]="RELU6",e[e.LEAKYRELU=25]="LEAKYRELU",e[e.RECIPROCAL=26]="RECIPROCAL",e[e.ROUND=27]="ROUND",e[e.RSQRT=28]="RSQRT",e[e.SELU=29]="SELU",e[e.SIGMOID=30]="SIGMOID",e[e.SIGN=31]="SIGN",e[e.SIN=32]="SIN",e[e.SINH=33]="SINH",e[e.SOFTPLUS=34]="SOFTPLUS",e[e.SQRT=35]="SQRT",e[e.SQUARE=36]="SQUARE",e[e.STEP=37]="STEP",e[e.TAN=38]="TAN",e[e.TANH=39]="TANH",e[e.TO_INT=40]="TO_INT"}(q||(q={}));var j='\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  let p = '.concat(t.backend_util.ERF_P,";\n  let a1 = ").concat(t.backend_util.ERF_A1,";\n  let a2 = ").concat(t.backend_util.ERF_A2,";\n  let a3 = ").concat(t.backend_util.ERF_A3,";\n  let a4 = ").concat(t.backend_util.ERF_A4,";\n  let a5 = ").concat(t.backend_util.ERF_A5,";\n\n  let sign = sign(a);\n  let absA = abs(a);\n  let t = 1.0 / (1.0 + p * absA);\n  return sign * (1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * exp(-absA * absA));\n"),Q="\n  if (a >= 0.0) {\n    return ".concat(t.backend_util.SELU_SCALE," * a;\n  } else {\n    return ").concat(t.backend_util.SELU_SCALEALPHA," * (exp(a) - 1.0);\n  }\n");function Z(e,t){switch(e){case q.ABS:return"return abs(a);";case q.ACOS:return"\n  if (abs(a) > 1.) {\n    return uniforms.NAN;\n  }\n  return acos(a);\n";case q.ACOSH:return"\n  if (a < 1.) {\n    return uniforms.NAN;\n  }\n  return acosh(a);\n";case q.ASIN:return"\n  if (abs(a) > 1.) {\n    return uniforms.NAN;\n  }\n  return asin(a);\n";case q.ASINH:return"return asinh(a);";case q.ATAN:return"\n  if (isnan(a)) {\n    return uniforms.NAN;\n  }\n  return atan(a);\n";case q.ATANH:return"\n  if (abs(a) > 1.) {\n    return uniforms.NAN;\n  }\n  if (a == 1.) {\n    return uniforms.INFINITY;\n  }\n  if (a == -1.) {\n    return -uniforms.INFINITY;\n  }\n  return atanh(a);\n";case q.COS:return"return cos(a);";case q.COSH:return"\n  let e2x = exp(-a);\n  return (e2x + 1.0 / e2x) / 2.0;\n";case q.CEIL:return"return ceil(a);";case q.ELU:return t?"\n  var resFloat = exp(a) - vec4<f32>(1.0);\n  if (a.r >= 0.0) {\n    resFloat.r = a.r;\n  }\n  if (a.g >= 0.0) {\n    resFloat.g = a.g;\n  }\n  if (a.b >= 0.0) {\n    resFloat.b = a.b;\n  }\n  if (a.a >= 0.0) {\n    resFloat.a = a.a;\n  }\n  return resFloat;\n":"if (a >= 0.0) { return a; }  return (exp(a) - 1.0);";case q.ERF:return j;case q.EXP:return"return exp(a);";case q.EXPM1:return"return exp(a) - 1.0;";case q.FLOOR:return"return floor(a);";case q.IS_FINITE:return"return f32(!isnan(a) && !isinf(a));";case q.IS_INF:return"return f32(isinf(a));";case q.IS_NAN:return"return f32(isnan(a));";case q.LINEAR:return"return a;";case q.LOG:return"if (a < 0.0) { return uniforms.NAN; }\n  return log(a);";case q.LOG1P:return"\n  if (isnan(a)) { return a; }\n  return log(1.0 + a);\n";case q.LOGICAL_NOT:return"return f32(!(a >= 1.0));";case q.NEG:return"return -a;";case q.LEAKYRELU:return t?"\n  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));\n  return (aLessThanZero * (uniforms.alpha * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);\n":"if (a < 0.0) { return uniforms.alpha * a; } return a;";case q.RECIPROCAL:return"return 1.0 / a;";case q.RELU:return t?"\n  return select(a, vec4<f32>(0.0), a < vec4<f32>(0.0));\n":"return select(a, 0.0, a < 0.0);";case q.RELU6:return t?"return clamp(a, vec4<f32>(0.0, 0.0, 0.0, 0.0), vec4<f32>(6.0, 6.0, 6.0, 6.0));":"return clamp(a, 0.0, 6.0);";case q.ROUND:return"return round(a);";case q.RSQRT:return"return inverseSqrt(a);";case q.SELU:return Q;case q.SIGMOID:return"return 1.0 / (1.0 + exp(-1.0 * a));";case q.SIGN:return"return sign(a);";case q.SIN:return"return sin(a);";case q.SINH:return"\n  let e2x = exp(a);\n  return (e2x - 1.0 / e2x) / 2.0;\n";case q.SOFTPLUS:return"\n  let epsilon = 1.1920928955078125e-7;\n  let threshold = log(epsilon) + 2.0;\n\n  let too_large = a > -threshold;\n  let too_small = a < threshold;\n  let exp_a = exp(a);\n\n  if (too_large) {\n    return a;\n  } else if (too_small) {\n    return exp_a;\n  } else {\n    return log(exp_a + 1.0);\n  }\n";case q.SQRT:return"return sqrt(a);";case q.SQUARE:return"return a * a;";case q.STEP:return"\n  if (isnan(a)) {\n    return a;\n  }\n\n  return select(uniforms.stepAlpha, 1.0, a > 0.0);\n";case q.TAN:return"return tan(a);";case q.TANH:return"\n  let e2x = exp(-2.0 * abs(a));\n  return sign(a) * (1.0 - e2x) / (1.0 + e2x);\n";case q.TO_INT:return"return f32(i32((a)));";default:throw new Error("BinaryType ".concat(e," is not implemented!"))}}function J(e,t,n,a){if(void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===a&&(a=3),null===e)return"";var r="";if("linear"===e)r=Z(q.LINEAR);else if("relu"===e)r=Z(q.RELU,n);else if("elu"===e)r=Z(q.ELU,n);else if("relu6"===e)r=Z(q.RELU6,n);else if("prelu"===e)r=Y(G.PRELU,n);else if("sigmoid"===e)r=Z(q.SIGMOID,n);else{if("leakyrelu"!==e)throw new Error("Activation ".concat(e," has not been implemented for the WebGPU backend."));r=Z(q.LEAKYRELU,n)}var i=w(n?4:1);return t?"\n      fn activation(a : ".concat(i,", coords : vec").concat(a,"<i32>) -> ").concat(i," {\n        let b = getPreluActivationWeightsByOutputCoords(coords);\n        ").concat(r,"\n      }"):"\n      fn activation(a : ".concat(i,", coords : vec").concat(a,"<i32>) -> ").concat(i," {\n        ").concat(r,"\n      }")}function $(e,t){return"\n      ".concat(e?"value = value + getBiasByOutputCoords(coords);":"","\n      ").concat(t?"value = activation(value, coords);":"","\n      ")}function ee(e,n,a,r,i,o){void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===o&&(o=1),t.util.assert(e&&1===o||!e,(function(){return"transposeA ".concat(e," is not compatible with component size ").concat(o)}));var s="\n      ".concat(e?"value = getA(batch, col, row);":"value = getA(batch, row, col);","\n\n    "),u=n?"value = getB(batch, col, row);":"value = getB(batch, row, col);";return"\n  fn mm_readA(batch: i32, row: i32, col: i32) -> ".concat(w(o)," {\n    var value = ").concat(w(o),"(0.0);\n    ").concat(a&&i?s:"\n    ".concat(e?"if(row < uniforms.dimAOuter && col < uniforms.dimInner)":"if(row < uniforms.aShape[1] && col < uniforms.aShape[2])","\n    {\n      ").concat(s,"\n    }\n    "),"\n    return value;\n  }\n\n  fn mm_readB(batch: i32, row: i32, col: i32) -> ").concat(w(o)," {\n    var value = ").concat(w(o),"(0.0);\n    ").concat(u,"\n    return value;\n  }\n  ")}function te(e,t,n,a,r,i,o,s){return void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===s&&(s=1),"\n  ".concat(ee(n,a,r,0,o,s),"\n  fn mm_write(batch: i32, row: i32, col: i32, valueIn: ").concat(w(s),") {\n    ").concat(r&&i?"":"if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)","\n    {\n      var value = valueIn;\n      let coords = vec3<i32>(batch, row, col);\n      ").concat($(e,t),"\n      setOutputAtCoords(coords[0], coords[1], coords[2], value);\n    }\n  }\n  ")}function ne(e,n,a,r,i,o,s){void 0===a&&(a=!1),void 0===r&&(r=32),void 0===i&&(i=!1),void 0===o&&(o=32),void 0===s&&(s=!1);var u=n[1]*e[1],c=n[0]*e[0],d=a?u:r,l=a?r:u,p=d/n[0],h=r/n[1],f=e[1],m=e[0];return t.util.assert((a&&4===p&&4===e[1]||!a&&(3===p||4===p))&&d%n[0]==0&&r%n[1]==0&&4===e[0],(function(){return"If transposeA ".concat(a," is true, innerElementSize ").concat(p," and workPerThread[1] ").concat(e[1]," must be 4.\n          Otherwise, innerElementSize ").concat(p," must be 3 or 4.\n      tileAWidth ").concat(d," must be divisible by workgroupSize[0]").concat(n[0],". tileInner ").concat(r," must be divisible by workgroupSize[1] ").concat(n[1],". colPerThread ").concat(e[0]," must be 4.")})),"\n  var<workgroup> mm_Asub : array<array<vec".concat(p,"<f32>, ").concat(d/p,">, ").concat(l,">;\n  var<workgroup> mm_Bsub : array<array<vec4<f32>, ").concat(c/e[0],">, ").concat(r,">;\n\n  ").concat(S()," {\n    let localRow = i32(localId.y);\n    let tileRow = localRow * ").concat(f,";\n    let tileCol = i32(localId.x);\n\n    let globalRow = i32(globalId.y) * ").concat(f,";\n    let globalCol = i32(globalId.x) * ").concat(m,";\n    let batch = ").concat(i?"0":"i32(globalId.z)",";\n    let batchA = ").concat(i||!s?"batch":"batch % uniforms.aShape[0]",";\n    let batchB = ").concat(i||!s?"batch":"batch % uniforms.bShape[0]",";\n    let globalRowStart = i32(workgroupId.y) * ").concat(u,";\n\n    let numTiles = ").concat(i?"".concat(Math.ceil(o/r)):"(uniforms.dimInner - 1) / ".concat(r," + 1"),";\n    var kStart = ").concat(i?"i32(globalId.z) * ".concat(o):"0",";\n\n    var acc: array<vec4<f32>, ").concat(f,">;\n\n    // Loop over shared dimension.\n    let tileRowB = localRow * ").concat(h,";\n    for (var t = 0; t < numTiles; t++) {\n        // Load one tile of A into local memory.\n        for (var innerRow = 0; innerRow < ").concat(f,"; innerRow++) {\n            let inputRow = tileRow + innerRow;\n            let inputCol = tileCol;\n            ").concat(function(e,t){return e?"\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          kStart + inputRow,\n          globalRowStart + inputCol * ".concat(t,");\n        "):"\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          globalRow + innerRow,\n          kStart + inputCol * ".concat(t,");\n        ")}(a,p),"\n        }\n\n        // Load one tile of B into local memory.\n        for (var innerRow = 0; innerRow < ").concat(h,"; innerRow++) {\n            let inputRow = tileRowB + innerRow;\n            let inputCol = tileCol;\n            mm_Bsub[inputRow][inputCol] = mm_readB(batchB, kStart + inputRow, globalCol);\n        }\n        kStart = kStart + ").concat(r,";\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        ").concat(function(e,t,n,a){if(e)return"\n      for (var k = 0; k < ".concat(a,"; k++) {\n        let BCached0 = mm_Bsub[k][tileCol];\n        let ACached0 = mm_Asub[k][localRow];\n        for (var i = 0; i < ").concat(n,"; i++) {\n          acc[i] = fma(BCached0, vec4<f32>(ACached0[i]), acc[i]);\n        }\n      }");for(var r="",i="",o=0;o<t;o++)r+="let BCached".concat(o," = mm_Bsub[k * ").concat(t," + ").concat(o,"][tileCol];"),i+="acc[i] = fma(BCached".concat(o,", vec4<f32>(ACached[").concat(o,"]), acc[i]);");return"\n      for (var k = 0; k < ".concat(a/t,"; k++) {\n        ").concat(r,"\n        for (var i = 0; i < ").concat(n,"; i++) {\n          let ACached = mm_Asub[tileRow + i][k];\n          ").concat(i,"\n        }\n      }")}(a,p,f,r),"\n        workgroupBarrier();\n    }\n\n    for (var innerRow = 0; innerRow < ").concat(f,"; innerRow++) {\n        mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n    }\n  }")}var ae=function(e){return e?"\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          kStart + inputRow,\n          globalRowStart + inputCol);\n        ":"\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          globalRowStart + inputRow,\n          kStart + inputCol);\n        "};function re(e,n,a,r,i,o,s,u){void 0===a&&(a=!1),void 0===r&&(r=32),void 0===i&&(i=!1),void 0===o&&(o=32),void 0===s&&(s=!1),void 0===u&&(u=!1);var c=e[1]*n[1],d=e[0]*n[0],l=a?c:r,p=a?r:c;t.util.assert(p%n[1]==0&&l%n[0]==0&&r%n[1]==0,(function(){return"tileAHight ".concat(p," must be divisible by workgroupSize[1]").concat(n[1],", tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(n[0],", tileInner ").concat(r," must be divisible by workgroupSize[1]").concat(n[1])}));var h=p/n[1],f=l/n[0],m=r/n[1],g=e[1],v=e[0],y=s?"\n      let localRow = i32(localId.y);\n      let localCol = i32(localId.x);\n      let globalRowStart = i32(workgroupId.y) * ".concat(c,";\n      let globalColStart = i32(workgroupId.x) * ").concat(d,";\n\n      // Loop over shared dimension.\n      for (var t = 0; t < numTiles; t++) {\n        // Load one tile of A into local memory.\n        for (var inputRow = localRow; inputRow < ").concat(p,"; inputRow = inputRow + ").concat(n[1],") {\n          for (var inputCol = localCol; inputCol < ").concat(l,"; inputCol = inputCol + ").concat(n[0],") {\n            ").concat(ae(a),"\n          }\n        }\n        // Load one tile of B into local memory.\n        for (var inputRow = localRow; inputRow < ").concat(r,"; inputRow = inputRow + ").concat(n[1],") {\n              for (var inputCol = localCol; inputCol < ").concat(d,"; inputCol = inputCol + ").concat(n[0],") {\n            mm_Bsub[inputRow][inputCol] = mm_readB(batchB,\n              kStart + inputRow,\n              globalColStart + inputCol);\n          }\n        }\n        kStart = kStart + ").concat(r,";\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        var BCached : array<f32, ").concat(v,">;\n        for (var k = 0; k < ").concat(r,"; k++) {\n          for (var inner = 0; inner < ").concat(v,"; inner++) {\n            BCached[inner] = mm_Bsub[k][localCol + inner * ").concat(n[0],"];\n          }\n          for (var innerRow = 0; innerRow < ").concat(g,"; innerRow++) {\n            let ACached = ").concat(a?"mm_Asub[k][localRow + innerRow * ".concat(n[1],"];"):"mm_Asub[localRow + innerRow * ".concat(n[1],"][k];"),"\n            for (var innerCol = 0; innerCol < ").concat(v,"; innerCol++) {\n              acc[innerRow][innerCol] =\n                  fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);\n            }\n          }\n        }\n        workgroupBarrier();\n      }\n      for (var innerRow = 0; innerRow < ").concat(g,"; innerRow++) {\n        let gRow = globalRowStart + localRow + innerRow * ").concat(n[1],";\n        for (var innerCol = 0; innerCol < ").concat(v,"; innerCol++) {\n          let gCol = globalColStart + localCol + innerCol * ").concat(n[0],";\n          mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n        }\n      }\n      "):"\n  let tileRow = i32(localId.y) * ".concat(g,";\n  let tileCol = i32(localId.x) * ").concat(v,";\n\n  let globalRow = i32(globalId.y) * ").concat(g,";\n  let globalCol = i32(globalId.x) * ").concat(v,";\n  let globalRowStart = i32(workgroupId.y) * ").concat(c,";\n\n  let tileRowA = i32(localId.y) * ").concat(h,";\n  let tileColA = i32(localId.x) * ").concat(f,";\n  let tileRowB = i32(localId.y) * ").concat(m,";\n  // Loop over shared dimension.\n  for (var t = 0; t < numTiles; t++) {\n    // Load one tile of A into local memory.\n    for (var innerRow = 0; innerRow < ").concat(h,"; innerRow++) {\n      for (var innerCol = 0; innerCol < ").concat(f,"; innerCol++) {\n        let inputRow = tileRowA + innerRow;\n        let inputCol = tileColA + innerCol;\n        ").concat(ae(a),"\n      }\n    }\n\n    // Load one tile of B into local memory.\n    for (var innerRow = 0; innerRow < ").concat(m,"; innerRow++) {\n      for (var innerCol = 0; innerCol < ").concat(v,"; innerCol++) {\n        let inputRow = tileRowB + innerRow;\n        let inputCol = tileCol + innerCol;\n        mm_Bsub[inputRow][inputCol] = mm_readB(batchB,\n          kStart + inputRow,\n          globalCol + innerCol);\n      }\n    }\n    kStart = kStart + ").concat(r,";\n    workgroupBarrier();\n\n    // Compute acc values for a single thread.\n    var BCached : array<f32, ").concat(v,">;\n    for (var k = 0; k < ").concat(r,"; k++) {\n      for (var inner = 0; inner < ").concat(v,"; inner++) {\n        BCached[inner] = mm_Bsub[k][tileCol + inner];\n      }\n\n      for (var innerRow = 0; innerRow < ").concat(g,"; innerRow++) {\n        ").concat(function(e){return e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];"}(a),"\n        for (var innerCol = 0; innerCol < ").concat(v,"; innerCol++) {\n          acc[innerRow][innerCol] =\n              fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);\n        }\n      }\n    }\n\n    workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < ").concat(g,"; innerRow++) {\n    for (var innerCol = 0; innerCol < ").concat(v,"; innerCol++) {\n      mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n          acc[innerRow][innerCol]);\n    }\n  }\n  ");return"\n    var<workgroup> mm_Asub : array<array<f32, ".concat(l,">, ").concat(p,">;\n    var<workgroup> mm_Bsub : array<array<f32, ").concat(d,">, ").concat(r,">;\n\n    ").concat(S()," {\n      let batch = ").concat(i?"0":"i32(globalId.z)",";\n      let batchA = ").concat(i||!u?"batch":"batch % uniforms.aShape[0]",";\n      let batchB = ").concat(i||!u?"batch":"batch % uniforms.bShape[0]",";\n      let numTiles = ").concat(i?"".concat(Math.ceil(o/r)):"(uniforms.dimInner - 1) / ".concat(r," + 1"),";\n      var kStart = ").concat(i?"i32(globalId.z) * ".concat(o):"0",";\n\n      var acc : array<array<f32, ").concat(v,">, ").concat(g,">;\n\n      // Without this initialization strange values show up in acc.\n      for (var innerRow = 0; innerRow < ").concat(g,"; innerRow++) {\n        for (var innerCol = 0; innerCol < ").concat(v,"; innerCol++) {\n          acc[innerRow][innerCol] = 0.0;\n        }\n      }\n      ").concat(y,"\n    }\n  ")}var ie=function(){function e(e,t,n,a,r,i,o,s){var c;void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=!1),this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=t,this.dispatchLayout={x:[2],y:[1],z:[0]};var d=n?e[1]:e[2];if(this.isVec4=(d%4==0&&!n||t[1]%4==0&&n)&&t[2]%4==0&&!a,this.outputComponent=this.isVec4?4:1,this.isVectorA=1===t[1]&&!n,!this.isVec4&&this.isVectorA)this.elementsPerThread=[1,1,1],this.workgroupSize=[32,1,1];else{var l=W(t[1],d,t[2],n);this.workgroupSize=l.workgroupSize,this.elementsPerThread=l.elementsPerThread}this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread);var p=null!=r,h=null!=o;p&&this.variableNames.push("bias"),h&&this.variableNames.push("preluActivationWeights"),this.sequentialAccessByThreads=s,this.transposeA=n,this.transposeB=a,this.addBias=p,this.activation=i,this.hasPreluActivationWeights=h,c=u(this.getShapeFit(t[1],t[2],d),3),this.fitAOuter=c[0],this.fitBOuter=c[1],this.fitInner=c[2],this.shaderKey="matMulPacked_".concat(this.elementsPerThread,"_").concat(n,"_").concat(a,"_").concat(this.activation,"_").concat(this.fitAOuter,"_").concat(this.fitBOuter,"_").concat(this.fitInner,"_").concat(this.isVec4,"_").concat(this.isVectorA,"_").concat(this.sequentialAccessByThreads)}return e.prototype.getShapeFit=function(e,t,n){var a=this.workgroupSize[1]*this.elementsPerThread[1],r=this.workgroupSize[0]*this.elementsPerThread[0];return!this.isVec4&&this.isVectorA?this.tileInner=4*this.workgroupSize[0]:this.tileInner=r,[e%a==0,t%r==0,n%this.tileInner==0]},e.prototype.getUserCode=function(){var e="\n      ".concat(J(this.activation,this.hasPreluActivationWeights,this.isVec4),"\n      ").concat(te(this.addBias,this.activation,!1,this.transposeB,this.fitAOuter,this.fitBOuter,this.fitInner,this.isVec4?4:1),"\n      ").concat(this.isVec4?ne(this.elementsPerThread,this.workgroupSize,this.transposeA,this.tileInner,!1,null,!0):this.isVectorA?function(e,n){void 0===n&&(n=!1),t.util.assert(1===e[1]&&1===e[2],(function(){return"A linear work group size is required. But got ".concat(e,".")}));var a=4*e[0];return"\n    var<workgroup> mm_Asub : array<vec4<f32>, ".concat(e[0],">;\n\n    ").concat(S()," {\n      let tileCol = i32(localId.x);\n      let globalCol = i32(globalId.x);\n      let globalRow = i32(globalId.y);\n\n      let numTiles = (uniforms.dimInner - 1) / ").concat(a," + 1;\n      let batch = i32(globalId.z);\n      let batchA = batch % uniforms.aShape[0];\n      let batchB = batch % uniforms.bShape[0];\n      // Without this initialization strange values show up in acc.\n      var acc = 0.0;\n\n      // Loop over shared dimension.\n      for (var t = 0; t < numTiles; t++) {\n        // Load one tile of A into local memory.\n        let colA = t * ").concat(a," + tileCol * 4;\n        mm_Asub[tileCol] = vec4<f32>(").concat(function(e){return e?"\n      mm_readA(batchA, colA, globalRow),\n      mm_readA(batchA, colA + 1, globalRow),\n      mm_readA(batchA, colA + 2, globalRow),\n      mm_readA(batchA, colA + 3, globalRow)\n  ":"\n      mm_readA(batchA, globalRow, colA),\n      mm_readA(batchA, globalRow, colA + 1),\n      mm_readA(batchA, globalRow, colA + 2),\n      mm_readA(batchA, globalRow, colA + 3)\n  "}(n),");\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        for (var k = 0; k < ").concat(a/4,"; k++) {\n          let rowB = t * ").concat(a," + k * 4;\n          let BCached = vec4<f32>(mm_readB(batchB, rowB, globalCol),\n                              mm_readB(batchB, rowB + 1, globalCol),\n                              mm_readB(batchB, rowB + 2, globalCol),\n                              mm_readB(batchB, rowB + 3, globalCol));\n\n          let ACached = mm_Asub[k];\n          acc = acc + dot(ACached, BCached);\n        }\n\n        workgroupBarrier();\n      }\n\n      mm_write(batch, globalRow, globalCol, acc);\n    }\n  ")}(this.workgroupSize,this.transposeA):re(this.elementsPerThread,this.workgroupSize,this.transposeA,this.tileInner,!1,null,this.sequentialAccessByThreads,!0),"\n    ");return e},e}();var oe=function(){function e(e,t,n,a,r,i){void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===a&&(a=null),void 0===r&&(r=null),void 0===i&&(i=null),this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[256,1,1],this.outputShape=e,this.dispatchLayout={x:[],y:[1,2],z:[0]},this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize);var o=null!=a,s=null!=i;o&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.transposeA=t,this.transposeB=n,this.addBias=o,this.activation=r,this.hasPreluActivationWeights=s,this.shaderKey="matMulReduce_".concat(this.activation,"_").concat(t,"_").concat(n)}return e.prototype.getUserCode=function(){var e;return"\n      ".concat(J(this.activation,this.hasPreluActivationWeights),"\n      ").concat(te(this.addBias,this.activation,this.transposeA,this.transposeB),"\n      ").concat((e=this.workgroupSize[0],"\n    var<workgroup> sumValues : array<f32, ".concat(e,">;\n    ").concat(S()," {\n      let coords = getOutputCoords();\n      let batch = coords[0];\n      let batchA = batch % uniforms.aShape[0];\n      let batchB = batch % uniforms.bShape[0];\n      let row = coords[1];\n      let col = coords[2];\n      var sum = 0.0;\n      let Length = uniforms.dimInner;\n      for (var k = i32(localId.x); k < Length; k = k + ").concat(e,") {\n        let dataA = mm_readA(batchA, row, k);\n        let dataB = mm_readB(batchB, k, col);\n        sum = sum + dataA * dataB;\n      }\n      sumValues[localId.x] = sum;\n      workgroupBarrier();\n\n      for(var currentSize = ").concat(e/2,"u; currentSize > 1u;\n          currentSize = currentSize / 2u) {\n        if (localId.x < currentSize)\n        {\n          sumValues[localId.x] = sumValues[localId.x] + sumValues[localId.x + currentSize];\n        }\n        workgroupBarrier();\n      }\n\n      if (localId.x == 0u) {\n        sum = sumValues[0] + sumValues[1];\n        mm_write(batch, row, col, sum);\n      }\n    }\n  ")),"\n    ")},e}();var se=function(){function e(e,t,n,a,r,i,o,s){void 0===a&&(a=!1),void 0===r&&(r=!1),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[16,8,1],this.outputShape=n,this.dispatchLayout={x:[2],y:[1],z:[0]},this.dispatch=[Math.ceil(n[2]/this.workgroupSize[0]),Math.ceil(n[1]/this.workgroupSize[1]),n[0]];var u=null!=i;u&&this.variableNames.push("bias");var c=null!=s;c&&this.variableNames.push("preluActivationWeights"),this.transposeA=a,this.transposeB=r,this.addBias=u,this.activation=o,this.hasPreluActivationWeights=c,this.shaderKey="matMulSmallOutputSize_".concat(this.activation,"_").concat(a,"_").concat(r)}return e.prototype.getUserCode=function(){var e,t,n,a;return"\n      ".concat(J(this.activation,this.hasPreluActivationWeights),"\n      ").concat(te(this.addBias,this.activation,this.transposeA,this.transposeB),"\n      ").concat((e=this.workgroupSize,t=e[1],n=e[0],"\n  var<workgroup> mm_Asub : array<array<f32, ".concat(a=t>n?t:n,">, ").concat(t,">;\n  var<workgroup> mm_Bsub : array<array<f32, ").concat(n,">, ").concat(a,">;\n\n  // If the output size is small for matrix multiplication, avoid to use vec4\n  // and handle some elements per thread to optimally utilize the ALU.\n  // Read data from global memory to registers firstly, then store them into\n  // shared memory, so it is instruction-Level parallelism for arithmetic\n  // operations and others handle IO operations between barrier api, makes ALU\n  // and load/store units work simultaneously, could improves the performance.\n  ").concat(S()," {\n    let tileRow = i32(localId.y);\n    let tileCol = i32(localId.x);\n    let globalRow = i32(globalId.y);\n    let globalCol = i32(globalId.x);\n    let batch = i32(globalId.z);\n    let batchA = batch % uniforms.aShape[0];\n    let batchB = batch % uniforms.bShape[0];\n\n    // uniforms.dimInner should be greater than 0.\n    let numTiles = (uniforms.dimInner - 1) / ").concat(a," + 1;\n    var acc = 0.0;\n\n    var globalColA = tileCol;\n    var globalRowB = 0;\n    var regA = mm_readA(batchA, globalRow, globalColA);\n    var regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);\n    var regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);\n    globalColA = globalColA + ").concat(a,";\n    globalRowB = globalRowB + ").concat(a,";\n\n    for (var t = 0; t < numTiles; t = t + 1) {\n      mm_Asub[tileRow][tileCol] = regA;\n      mm_Bsub[2 * tileRow][tileCol] = regB0;\n      mm_Bsub[2 * tileRow + 1][tileCol] = regB1;\n\n      workgroupBarrier();\n\n      regA = mm_readA(batchA, globalRow, globalColA);\n      regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);\n      regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);\n      globalColA = globalColA + ").concat(a,";\n      globalRowB = globalRowB + ").concat(a,";\n\n      for (var k = 0; k < ").concat(a,"; k = k + 1) {\n        acc = acc + mm_Asub[tileRow][k] * mm_Bsub[k][tileCol];\n      }\n      workgroupBarrier();\n    }\n\n    mm_write(batch, globalRow, globalCol, acc);\n  }\n  ")),"\n    ")},e}(),ue=function(){function e(e,n,a,r){void 0===a&&(a=!1),void 0===r&&(r=!1),this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[8,8,1],this.atomic=!0,this.splitedDimInner=128,t.util.assert(1===e[0],(function(){return"MatMulSplitKProgram only supports batch = 1."})),this.outputShape=e,this.dispatchLayout={x:[2],y:[1],z:[0,3]};var i=(a&&this.outputShape[1]%4==0||!a&&n%4==0)&&this.outputShape[2]%4==0;this.elementsPerThread=[4,4,this.splitedDimInner],this.outputComponent=i?4:1,i||(this.outputShape[1]<16&&(this.elementsPerThread[1]=1),this.outputShape[2]<16&&(this.elementsPerThread[0]=1)),this.dispatch=L(this.dispatchLayout,[this.outputShape[0],this.outputShape[1],this.outputShape[2],n],this.workgroupSize,this.elementsPerThread),this.transposeA=a,this.transposeB=r,this.shaderKey="matMulSplitK_".concat(a,"_").concat(r,"_").concat(this.elementsPerThread,"_").concat(this.outputComponent)}return e.prototype.getUserCode=function(){var e=this.outputComponent;return"\n      ".concat(ee(!1,this.transposeB,!1,0,!1,e),"\n      fn mm_write(batch: i32, row : i32, col : i32, value : ").concat(w(e),") {\n        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {\n          let coords = vec3<i32>(batch, row, col);\n          let flatIndex = getOutputIndexFromCoords(coords);\n          // The problem is that we should initialize output to zero before using.\n          // Otherwise, the original value will be added to the result.\n          for (var i = 0; i < ").concat(e,"; i = i + 1) {\n            ").concat(x("&result[flatIndex + i]","".concat(e>1?"value[i]":"value"),"float32"),"\n          }\n        }\n      }\n      ").concat(4===e?ne(this.elementsPerThread,this.workgroupSize,this.transposeA,32,!0,this.splitedDimInner):re(this.elementsPerThread,this.workgroupSize,this.transposeA,32,!0,this.splitedDimInner),"\n    ")},e}(),ce=function(){function e(e,t,n,a){void 0===t&&(t=null),void 0===n&&(n=null),void 0===a&&(a=null),this.uniforms="",this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.addBias=null!=t,this.hasPreluActivationWeights=null!=a,this.activation=n,this.addBias&&this.variableNames.push("bias"),this.hasPreluActivationWeights&&this.variableNames.push("preluActivationWeights"),this.shaderKey="biasActivation_".concat(n)}return e.prototype.getUserCode=function(){return"\n    ".concat(J(this.activation,this.hasPreluActivationWeights),"\n    ").concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        var value = getXByOutputIndex(index);\n        ").concat($(this.addBias,this.activation),"\n        setOutputAtIndex(index, value);\n      }\n    }\n    ")},e}(),de=function(){function e(e){this.variableNames=[],this.outputShape=[],this.uniforms="value : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="fill"}return e.prototype.getUserCode=function(){return"\n    ".concat(S("index")," {\n      if (index < uniforms.size) {\n        setOutputAtIndex(index, uniforms.value);\n      }\n    }\n  ")},e}();function le(e){var n=e.backend,a=e.attrs,r=a.shape,i=a.value,o=a.dtype;if("string"===(o=o||t.util.inferDtype(i))){var s=t.util.getArrayFromDType(o,t.util.sizeFromShape(r));return s.fill(i),n.makeTensorInfo(r,o,s)}var u=new de(r),c=[{type:"float32",data:[i]}];return n.runWebGPUProgram(u,[],o,c)}var pe={kernelName:t.Fill,backendName:"webgpu",kernelFunc:le};function he(e){var n=e.inputs,a=e.attrs,r=n.x,i=a.shape,o=t.util.sizeFromShape(r.shape),s=t.util.inferFromImplicitShape(i,o),u=t.util.sizeFromShape(s);return t.util.assert(o===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(r.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:s,dtype:r.dtype}}var fe={kernelName:t.Reshape,backendName:"webgpu",kernelFunc:he};function me(e){var n,a,r,i,o=e.a,u=e.b,c=e.transposeA,d=e.transposeB,l=e.backend,p=e.bias,h=void 0===p?null:p,f=e.preluActivationWeights,m=void 0===f?null:f,g=e.leakyreluAlpha,v=void 0===g?0:g,y=e.activation,x=void 0===y?null:y,b=o.shape.length,w=u.shape.length,C=c?o.shape[b-2]:o.shape[b-1],k=d?u.shape[w-1]:u.shape[w-2],S=c?o.shape[b-1]:o.shape[b-2],I=d?u.shape[w-2]:u.shape[w-1],R=o.shape.slice(0,-2),P=u.shape.slice(0,-2),z=t.util.sizeFromShape(R),A=t.util.sizeFromShape(P),N=t.broadcast_util.assertAndGetBroadcastShape(o.shape.slice(0,-2),u.shape.slice(0,-2)).concat([S,I]);t.util.assert(C===k,(function(){return"Error in matMul: inner shapes (".concat(C,") and (")+"".concat(k,") of Tensors with shapes ").concat(o.shape," and ")+"".concat(u.shape," and transposeA=").concat(c)+" and transposeB=".concat(d," must match.")}));var D,F,_=c?[z,C,S]:[z,S,C],L=d?[A,I,k]:[A,k,I],W=he({inputs:{x:o},backend:l,attrs:{shape:_}}),E=he({inputs:{x:u},backend:l,attrs:{shape:L}}),B=[W,E],O=Math.max(z,A),U=[W,E],M=[{type:"int32",data:[S]},{type:"int32",data:[I]},{type:"int32",data:[C]}],V=[O,S,I],G=t.env().get("WEBGPU_MATMUL_PROGRAM_TYPE");if(G<0){var H=t.env().getNumber("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL"),X=H>0?H:l.thresholdToIncreaseWorkgroups,K=O*Math.ceil(S/32)*Math.ceil(I/32);G=K<=X||S<=8&&K<=2*X?O*S*I<=128?T.MatMulReduceProgram:1===O&&k>=2e3?T.MatMulSplitKProgram:T.MatMulSmallOutputSizeProgram:T.MatMulPackedProgram}switch(G){case T.MatMulReduceProgram:D=new oe(V,c,d,h,x,m);break;case T.MatMulSplitKProgram:if(F=le({backend:l,attrs:{shape:V,value:0,dtype:o.dtype}}),D=new ue(V,k,c,d),h||x){F=l.runWebGPUProgram(D,U,o.dtype,M,F);var q=new ce(F.shape,h,x,m),Y=null,j=[F];h&&j.push(h),m&&j.push(m),"leakyrelu"===x&&(Y=[{type:"float32",data:[v]}],q.uniforms+=" alpha : f32,");var Q=l.runWebGPUProgram(q,j,F.dtype,Y);B.push(F);var Z=he({inputs:{x:Q},backend:l,attrs:{shape:N}});B.push(Q);try{for(var J=s(B),$=J.next();!$.done;$=J.next()){var ee=$.value;l.disposeData(ee.dataId)}}catch(e){n={error:e}}finally{try{$&&!$.done&&(a=J.return)&&a.call(J)}finally{if(n)throw n.error}}return Z}break;case T.MatMulSmallOutputSizeProgram:D=new se(_,L,V,c,d,h,x,m);break;case T.MatMulPackedProgram:var te=l.adapterInfo.isIntel();D=new ie(_,V,c,d,h,x,m,te);break;default:throw new Error("Unsupported MatMulProgramType ".concat(G,"."))}h&&U.push(h),m&&U.push(m),"leakyrelu"===x&&(M.push({type:"float32",data:[v]}),D.uniforms+=" alpha : f32,");var ne=he({inputs:{x:F=l.runWebGPUProgram(D,U,o.dtype,M,F)},backend:l,attrs:{shape:N}});B.push(F);try{for(var ae=s(B),re=ae.next();!re.done;re=ae.next()){ee=re.value;l.disposeData(ee.dataId)}}catch(e){r={error:e}}finally{try{re&&!re.done&&(i=ae.return)&&i.call(ae)}finally{if(r)throw r.error}}return ne}var ge={kernelName:t._FusedMatMul,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=a.transposeA,c=a.transposeB,d=a.activation;return me({a:r,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:a.leakyreluAlpha,activation:d})}},ve=function(){function e(e,n,a){this.variableNames=["AReal","AImag","BReal","BImag"],this.workgroupSize=[128,1,1],this.size=!0,this.outputShape=t.backend_util.assertAndGetBroadcastShape(n,a),this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="binaryOpComplex_".concat(e),this.op=e}return e.prototype.getUserCode=function(){var e=Y(this.op,!1);return"\n      fn binaryOpComplex(\n          areal : f32, aimag : f32, breal : f32, bimag : f32) -> f32 {\n        ".concat(e,"\n      }\n\n      ").concat(S("index")," {\n        if(index < uniforms.size) {\n          let areal = getARealByOutputIndex(index);\n          let aimag = getAImagByOutputIndex(index);\n          let breal = getBRealByOutputIndex(index);\n          let bimag = getBImagByOutputIndex(index);\n          setOutputAtIndex(index, binaryOpComplex(areal, aimag, breal, bimag));\n        }\n      }\n    ")},e}(),ye=function(){function e(e,n,a){if(this.size=!0,this.variableNames=["A","B"],this.outputShape=t.backend_util.assertAndGetBroadcastShape(n,a),this.dispatchLayout=O(this.outputShape),this.op=e,this.useSharedMemoryWithA=n.length<=1&&a.length>1&&n[0]<128,this.useSharedMemoryWithB=a.length<=1&&n.length>1&&a[0]<128,this.useSharedMemoryWithA||this.useSharedMemoryWithB)this.outputComponent=1,this.variableComponents=[1,1],this.lastDimensionSize=this.useSharedMemoryWithB?a[0]:n[0],this.shaderKey="binary_".concat(e,"_").concat(this.lastDimensionSize),this.type="shared",this.workgroupSize=[256,1,1];else{var r=n.length>0&&n[n.length-1]%4==0,i=a.length>0&&a[a.length-1]%4==0;r&&i?(this.outputComponent=4,this.variableComponents=[4,4]):r&&(t.util.isScalarShape(a)||1===a[a.length-1])||i&&(t.util.isScalarShape(n)||1===n[n.length-1])?(this.outputComponent=4,this.variableComponents=r?[4,1]:[1,4]):(this.outputComponent=1,this.variableComponents=[1,1]),this.type="nonshared",this.shaderKey="binary_".concat(e,"_").concat(this.variableComponents),this.workgroupSize=[128,1,1]}this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.outputComponent,1,1])}return e.prototype.getUserCode=function(){var e,t=4===this.outputComponent?"vec4<f32>":"f32",n="\n    fn binaryOperation(a : ".concat(t,", b : ").concat(t,") -> ").concat(t," {\n      ").concat(Y(this.op,4===this.outputComponent),"\n    };\n    ");if("shared"===this.type){var a=this.lastDimensionSize>1?"coords[".concat(this.outputShape.length-1,"]"):"0",r=this.useSharedMemoryWithB?"let a = getAByOutputIndex(index);\n          let b = sharedBuf[".concat(a,"];"):"let a = sharedBuf[".concat(a,"];\n          let b = getBByOutputIndex(index);");e="\n        ".concat(n,"\n        var<workgroup> sharedBuf : array<f32, ").concat(this.lastDimensionSize,">;\n        ").concat(S("index")," {\n          // Fill in the shared memory buffer.\n          let localIndex = i32(localId.x);\n          if(localIndex < ").concat(this.lastDimensionSize,") {\n            sharedBuf[localIndex] = f32(").concat(this.useSharedMemoryWithB?"B":"A","[localIndex]);\n          }\n          workgroupBarrier();\n\n          if(index < uniforms.size) {\n            let coords = getCoordsFromIndex(index);\n            ").concat(r,"\n            setOutputAtIndex(index, binaryOperation(a, b));\n          }\n        }\n        ")}else e="\n       ".concat(n,"\n       ").concat(S("index")," {\n         if (index < uniforms.size) {\n           let coords = getCoordsFromIndex(index * ").concat(this.outputComponent,");\n           let a = ").concat(t,"(getAByOutputCoords(coords));\n           let b = ").concat(t,"(getBByOutputCoords(coords));\n           setOutputAtIndex(index, binaryOperation(a, b));\n         }\n       }\n       ");return e},e}();function xe(e){var t=e.inputs.x;return e.backend.incRef(t.dataId),{dataId:t.dataId,shape:t.shape,dtype:t.dtype}}var be={kernelName:t.Identity,backendName:"webgpu",kernelFunc:xe};function we(e){var t=e.inputs,n=e.backend,a=t.real,r=t.imag,i=n.makeTensorInfo(a.shape,"complex64"),o=n.tensorMap.get(i.dataId),s=xe({inputs:{x:a},backend:n}),u=xe({inputs:{x:r},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var Ce={kernelName:t.Complex,backendName:"webgpu",kernelFunc:we},ke=function(){function e(e,t,n){void 0===n&&(n=""),this.variableNames=["A"],this.size=!0;this.workgroupSize=[128,1,1],this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.op=t,""!==n&&(this.uniforms=n),this.shaderKey="unary_".concat(t)}return e.prototype.getUserCode=function(){return"\n      fn unaryOperation(a : f32) -> f32 {\n        ".concat(Z(this.op,!1),"\n      }\n      ").concat(S("index")," {\n        if (index < uniforms.size) {\n          let a = getAByOutputIndex(index);\n          setOutputAtIndex(index, unaryOperation(a));\n        }\n      }\n      ")},e}();function Se(e){var t=e.opType,n=e.cpuKernelImpl,a=e.dtype;return function(e){var r=e.inputs,i=e.backend,o=r.x,s=i,u=a||o.dtype;if(s.shouldExecuteOnCPU([o])&&null!=n){var c=s.tensorMap.get(o.dataId),d=n(c.values,u);return s.makeTensorInfo(o.shape,u,d)}var l=new ke(o.shape,t);return s.runWebGPUProgram(l,[o],u)}}function Ie(e){var n=e.opType,a=e.cpuKernelImpl,r=e.supportsComplex,i=void 0!==r&&r,o=e.dtype;return function(e){var r,s=e.inputs,c=e.backend,d=s.a,l=s.b,p=c;if(i&&"complex64"===d.dtype){var h=p.tensorMap.get(d.dataId),f=p.tensorMap.get(l.dataId),m=void 0,g=void 0;if(n!==G.MUL)r=u([[h.complexTensorInfos.real,f.complexTensorInfos.real],[h.complexTensorInfos.imag,f.complexTensorInfos.imag]].map((function(e){var a=u(e,2),r=a[0],i=a[1],o={dataId:r.dataId,dtype:r.dtype,shape:d.shape},s={dataId:i.dataId,dtype:i.dtype,shape:l.shape},c=new ye(n,d.shape,l.shape);return p.runWebGPUProgram(c,[o,s],t.upcastType(r.dtype,i.dtype))})),2),m=r[0],g=r[1];else{var v=new ve(G.COMPLEX_MULTIPLY_REAL,d.shape,l.shape),y=new ve(G.COMPLEX_MULTIPLY_IMAG,d.shape,l.shape),x=[{dataId:h.complexTensorInfos.real.dataId,dtype:h.complexTensorInfos.real.dtype,shape:d.shape},{dataId:h.complexTensorInfos.imag.dataId,dtype:h.complexTensorInfos.imag.dtype,shape:d.shape},{dataId:f.complexTensorInfos.real.dataId,dtype:f.complexTensorInfos.real.dtype,shape:l.shape},{dataId:f.complexTensorInfos.imag.dataId,dtype:f.complexTensorInfos.imag.dtype,shape:l.shape}];m=p.runWebGPUProgram(v,x,"float32"),g=p.runWebGPUProgram(y,x,"float32")}var b=we({inputs:{real:m,imag:g},backend:p});return p.disposeData(m.dataId),p.disposeData(g.dataId),b}var w=o||t.upcastType(d.dtype,l.dtype);if(("string"===d.dtype||"string"===l.dtype||p.shouldExecuteOnCPU([d,l]))&&null!=a){h=p.tensorMap.get(d.dataId).values,f=p.tensorMap.get(l.dataId).values;var C="string"===d.dtype?t.backend_util.fromUint8ToStringArray(h):h,k="string"===d.dtype?t.backend_util.fromUint8ToStringArray(f):f,S=u(a(d.shape,l.shape,C,k,w),2),I=S[0],R=S[1];return p.makeTensorInfo(R,w,I)}var P=new ye(n,d.shape,l.shape);return p.runWebGPUProgram(P,[d,l],w)}}function Re(e){return function(n,a,r,i,o){var s=t.backend_util.assertAndGetBroadcastShape(n,a),u=s.length,c=t.util.computeStrides(s),d=t.util.sizeFromShape(s),l=t.util.getTypedArrayFromDType(o,d),p=n.length,h=a.length,f=t.util.computeStrides(n),m=t.util.computeStrides(a),g=t.backend_util.getBroadcastDims(n,s),v=t.backend_util.getBroadcastDims(a,s);if(g.length+v.length===0)for(var y=0;y<l.length;++y)l[y]=e(r[y%r.length],i[y%i.length]);else{var x=function(n){var a=t.util.indexToLoc(n,u,c),o=a.slice(-p);g.forEach((function(e){return o[e]=0}));var s=t.util.locToIndex(o,p,f),d=a.slice(-h);v.forEach((function(e){return d[e]=0}));var y=t.util.locToIndex(d,h,m);l[n]=e(r[s],i[y])};for(y=0;y<l.length;++y)x(y)}return[l,s]}}var Pe=Re((function(e,t){return e+t}));function ze(e){return function(n,a,r){for(var i=t.util.getArrayFromDType(a,n.length),o=0;o<n.length;++o)i[o]=e(n[o],r);return i}}var Ae=ze((function(e){return Math.ceil(e)}));var Ne=Re((function(e,t){return e===t?1:0})),De=ze((function(e){return Math.exp(e)})),Fe=ze((function(e){return Math.expm1(e)})),Te=ze((function(e){return Math.floor(e)})),_e=Re((function(e,t){return Math.floor(e/t)}));var Le=Re((function(e,t){return e>t?1:0})),We=Re((function(e,t){return e>=t?1:0})),Ee=Re((function(e,t){return e<t?1:0})),Be=Re((function(e,t){return e<=t?1:0})),Oe=ze((function(e){return Math.log(e)}));var Ue=Re((function(e,t){return Math.max(e,t)})),Me=Re((function(e,t){return Math.min(e,t)})),Ve=Re((function(e,t){return e*t}));var Ge=Re((function(e,t){return e!==t?1:0}));t.backend_util.RowPartitionType;var He=ze((function(e){return 1/Math.sqrt(e)}));var Xe=function(){function e(e,n,a,r,i,o){this.separator=t.util.encodeString(e),this.nGramWidths=n,this.leftPad=t.util.encodeString(a),this.rightPad=t.util.encodeString(r),this.padWidth=i,this.preserveShort=o}return e.prototype.getPadWidth=function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)},e.prototype.getNumNGrams=function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)},e.prototype.createNGrams=function(e,t,n,a,r,i){for(var o=function(o){var u=s.getPadWidth(i),c=Math.max(0,u-o),d=Math.max(0,u-(r-(o+1))),l=i-(c+d),p=t+(c>0?0:o-u),h=0;h+=c*s.leftPad.length;for(var f=0;f<l;++f)h+=e[p+f].length;h+=d*s.rightPad.length,h+=(c+d+l-1)*s.separator.length,n[a+o]=new Uint8Array(h);var m=n[a+o],g=0,v=function(e){return e.forEach((function(e){return m[g++]=e}))};for(f=0;f<c;++f)v(s.leftPad),v(s.separator);for(f=0;f<l-1;++f)v(e[p+f]),v(s.separator);if(l>0){v(e[p+l-1]);for(f=0;f<d;++f)v(s.separator),v(s.rightPad)}else{for(f=0;f<d-1;++f)v(s.rightPad),v(s.separator);v(s.rightPad)}},s=this,u=0;u<r;++u)o(u)},e.prototype.compute=function(e,n){var a=this,r=e.length,i=n.length;if(i>0){var o=n[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var s=1;s<i;++s){var u=n[s]>=o;if(!(u=u&&n[s]<=r))throw new Error("Invalid split value ".concat(n[s],", must be in [").concat(o,", ").concat(r,"]"));o=n[s]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var c=i-1,d=t.util.getArrayFromDType("int32",i);if(0===r||0===i){var l=new Array(r);for(s=0;s<=c;++s)d[s]=0;return[l,d]}d[0]=0;var p=function(e){var t=n[e]-n[e-1],r=0;h.nGramWidths.forEach((function(e){r+=a.getNumNGrams(t,e)})),h.preserveShort&&t>0&&0===r&&(r=1),d[e]=d[e-1]+r},h=this;for(s=1;s<=c;++s)p(s);var f=new Array(d[c]),m=function(t){var r=n[t],i=d[t];if(g.nGramWidths.forEach((function(o){var s=n[t+1]-n[t],u=a.getNumNGrams(s,o);a.createNGrams(e,r,f,i,u,o),i+=u})),g.preserveShort&&i===d[t]){var o=n[t+1]-n[t];if(0===o)return"continue";var s=o+2*g.padWidth;g.createNGrams(e,r,f,i,1,s)}},g=this;for(s=0;s<c;++s)m(s);return[f,d]},e}();var Ke=Re((function(e,t){return e-t}));var qe=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function Ye(e,n,a,r){for(void 0===a&&(a=0),void 0===r&&(r=e.length-1);r>a;){if(r-a>600){var i=r-a+1,o=n-a+1,s=Math.log(i),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(i-u)/i)*Math.sign(o-i/2);Ye(e,n,Math.max(a,Math.floor(n-o*u/i+c)),Math.min(r,Math.floor(n+(i-o)*u/i+c)))}var d=e[n],l=a,p=r;for(t.util.swap(e,a,n),qe(e[r],d)>0&&t.util.swap(e,a,r);l<p;){for(t.util.swap(e,l,p),l++,p--;qe(e[l],d)<0;)l+=1;for(;qe(e[p],d)>0;)p-=1}0===qe(e[a],d)?t.util.swap(e,a,p):(p+=1,t.util.swap(e,p,r)),p<=n&&(a=p+1),n<=p&&(r=p-1)}}var je=Pe,Qe=function(e,n,a,r){if("int32"===r)return[n,"int32",Int32Array.from(e)];if("bool"===r){var i=t.util.toTypedArray([0],a),o=u(Re((function(e,t){return e!==t?1:0}))(n,[],e,i,"bool"),2),s=o[0];return[o[1],"bool",s]}throw new Error("Error in Cast: failed to cast ".concat(a," to ").concat(r))},Ze=Ae,Je=function(e,n,a,r){var i=t.util.getArrayFromDType(a,t.util.sizeFromShape(n));if(r&&"string"!==a){var o=0;e.forEach((function(e){var n=t.util.sizeFromShape(e.shape);i.set(e.vals,o),o+=n}))}else{var s=0;e.forEach((function(e){for(var r="string"===a?t.backend_util.fromUint8ToStringArray(e.vals):e.vals,o=0,u=0;u<e.shape[0];++u)for(var c=u*n[1]+s,d=0;d<e.shape[1];++d)i[c+d]=r[o++];s+=e.shape[1]}))}return i},$e=Ne,et=De,tt=Fe,nt=Te,at=_e,rt=function(e,n,a,r,i,o,s,d,l){for(var p=t.buffer([r,o],a),h=0;h<r;h++){for(var f=[],m=0,g=0;g<i;g++){var v=e[h*i+g];m+=v*s[g],f.push(v)}if(m<0||m>=l/o)throw new Error("Invalid indices: ".concat(f," does not index into ").concat(d));for(var y=0;y<o;y++)p.values[h*o+y]=n.get.apply(n,c([],u(n.indexToLoc(m*o+y)),!1))}return p},it=function(e,n,a){for(var r=t.buffer(a,e.dtype),i=0;i<r.size;++i){var o=r.indexToLoc(i).slice(),s=o[0],u=o[2],c=n.locToIndex([s,u]);o[2]=n.values[c];var d=e.locToIndex(o);0<=d&&d<e.values.length&&(r.values[i]=e.values[d])}return r},ot=We,st=Le,ut=Be,ct=Ee,dt=Oe,lt=function(e,n,a,r){for(var i=t.util.getTypedArrayFromDType(r,t.util.sizeFromShape(a)),o=0;o<i.length;++o){for(var s=o*n,u=e[s],c=0;c<n;++c){var d=e[s+c];(Number.isNaN(d)||d>u)&&(u=d)}i[o]=u}return i},pt=Ue,ht=Me,ft=Ve,mt=function(e,n,a){var r=t.util.createScalarValue(-1,a);return Ve([],n,r,e,a)},gt=Ge,vt=function(e,n,a,r){for(var i=u(t.backend_util.computeOutAndReduceShapes(e,r),2),o=i[0],s=i[1],c=t.upcastType(n,"int32"),d=t.util.makeZerosTypedArray(t.util.sizeFromShape(o),c),l=t.util.sizeFromShape(s),p=0;p<d.length;++p){for(var h=p*l,f=1,m=0;m<l;++m)f*=a[h+m];d[p]=f}return{outVals:d,outShape:o,outDtype:c}},yt=function(e,n,a,r){if(e===n||e<n&&a<0||n<e&&a>1)return t.util.makeZerosTypedArray(0,r);var i=Math.abs(Math.ceil((n-e)/a)),o=t.util.makeZerosTypedArray(i,r);n<e&&1===a&&(a=-1),o[0]=e;for(var s=1;s<o.length;s++)o[s]=o[s-1]+a;return o},xt=He,bt=function(e,n,a,r,i,o,s,u,c,d){var l=[r/i,i],p=e.values,h=n.values;if(0===r)return t.buffer(a,n.dtype);var f=c instanceof t.TensorBuffer?c:t.buffer(l,n.dtype);"string"==typeof c||"number"==typeof c?f.values.fill(c):"boolean"==typeof c&&f.values.fill(+c);for(var m=0;m<o;m++){for(var g=[],v=0,y=0;y<s;y++){var x=p[m*s+y];g.push(x),v+=x*u[y]}if(v<0||v>=r/i)throw new Error("Invalid indices: ".concat(g," does not index into ").concat(a));for(var b=0;b<i;b++)d?f.values[v*i+b]+=h[m*i+b]:f.values[v*i+b]=0===n.rank?h[0]:h[m*i+b]}return f},wt=function(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t},Ct=function(e,n,a,r,i){var o=t.slice_util.isSliceContinous(r,n,a),s=t.util.sizeFromShape(a),d=t.util.computeStrides(r);if(o){var l=t.slice_util.computeFlatOffset(n,d);return"string"===i?e.slice(l,l+s):e.subarray(l,l+s)}for(var p="string"===i?t.backend_util.fromUint8ToStringArray(e):e,h=t.buffer(r,i,p),f=t.buffer(a,i),m=0;m<f.size;++m){var g=f.indexToLoc(m),v=g.map((function(e,t){return e+n[t]}));f.set.apply(f,c([h.get.apply(h,c([],u(v),!1))],u(g),!1))}return"string"===i?t.backend_util.fromStringArrayToUint8(f.values):f.values},kt=function(e,n,a,r){for(var i=t.buffer(e,n.dtype),o=0;o<i.size;o++){for(var s=i.indexToLoc(o),d=new Array(s.length),l=0;l<d.length;l++)d[l]=s[l]*a[l]+r[l];i.set.apply(i,c([n.get.apply(n,c([],u(d),!1))],u(s),!1))}return i},St=function(e,t,n,a,r,i,o,s){return new Xe(n,a,r,i,o,s).compute(e,t)},It=Ke,Rt=function(e,n){for(var a=new Array(e.rank),r=0;r<a.length;r++)a[r]=e.shape[r]*n[r];var i=t.buffer(a,e.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var c=e.locToIndex(s);i.values[r]=e.values[c]}return i},Pt=function(e,n,a,r,i){for(var o=n[n.length-1],s=u([e.length/o,o],2),c=s[0],d=s[1],l=t.util.getTypedArrayFromDType(a,c*r),p=t.util.getTypedArrayFromDType("int32",c*r),h=function(t){var n=t*d,a=e.subarray(n,n+d),o=new Array(a.length);a.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(Ye(o,r),o=o.slice(0,r)),i&&o.sort(qe);for(var s=t*r,u=l.subarray(s,s+r),c=p.subarray(s,s+r),h=0;h<r;h++)u[h]=o[h].value,c[h]=o[h].index},f=0;f<c;f++)h(f);var m=n.slice();return m[m.length-1]=r,[t.buffer(m,a,l),t.buffer(m,"int32",p)]},zt=function(e,n,a,r,i){for(var o=n.length,s=t.util.sizeFromShape(n),u=t.util.computeStrides(n),c=t.util.computeStrides(i),d=t.util.getTypedArrayFromDType(a,t.util.sizeFromShape(i)),l=0;l<s;++l){for(var p=t.util.indexToLoc(l,o,u),h=new Array(p.length),f=0;f<h.length;f++)h[f]=p[r[f]];d[t.util.locToIndex(h,o,c)]=e[l]}return d},At=Se({opType:q.ABS,cpuKernelImpl:wt}),Nt={kernelName:t.Abs,backendName:"webgpu",kernelFunc:At},Dt=Se({opType:q.ACOS}),Ft={kernelName:t.Acos,backendName:"webgpu",kernelFunc:Dt},Tt=Se({opType:q.ACOSH}),_t={kernelName:t.Acosh,backendName:"webgpu",kernelFunc:Tt},Lt=Ie({opType:G.ADD,cpuKernelImpl:je,supportsComplex:!0}),Wt={kernelName:t.Add,backendName:"webgpu",kernelFunc:Lt},Et=function(){function e(e){this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e[0],this.variableNames=e.map((function(e,t){return"T".concat(t)})),this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.shaderKey="addN"}return e.prototype.getUserCode=function(){var e=[];this.variableNames.forEach((function(t){e.push("let v".concat(t," = get").concat(t,"ByOutputCoords(coords);"))}));var t=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");return"\n      ".concat(S("index")," {\n        for (var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let flatIndex = index * ").concat(this.workPerThread," + i;\n          if (flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            ").concat(e.join("\n        "),"\n            setOutputAtIndex(flatIndex, ").concat(t,");\n          }\n        }\n      }\n    ")},e}();var Bt={kernelName:t.AddN,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=n;if(1===r.length)return xe({inputs:{x:r[0]},backend:a});var i=r.map((function(e){return e.dtype})).reduce((function(e,n){return t.upcastType(e,n)})),o=r.map((function(e){return e.shape})),s=new Et(o);return a.runWebGPUProgram(s,r,i)}},Ot=function(){function e(e,t){this.variableNames=["A"],this.workgroupSize=[16,16,1];for(var n=new Array(e.length),a=0;a<n.length;a++)n[a]=e[t[a]];this.outputShape=n,this.dispatchLayout={x:[0],y:[1]},this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,[1,1,1]),this.shaderKey="transposeShared"}return e.prototype.getUserCode=function(){var e=this;t.util.assert(this.workgroupSize[0]===this.workgroupSize[1],(function(){return"Must be a square tile, current tile shape is ".concat(e.workgroupSize[0]," x ").concat(e.workgroupSize[1])}));var n=this.workgroupSize[0];return"\n      var<workgroup> tile : array<array<f32, ".concat(this.workgroupSize[0]+1,">, ").concat(this.workgroupSize[0],">;\n      ").concat(S()," {\n        var x = i32(workgroupId.x) * ").concat(n," + i32(localId.x);\n        var y = i32(workgroupId.y) * ").concat(n," + i32(localId.y);\n        let width = uniforms.outShape[0];\n        let height = uniforms.outShape[1];\n        if (x < width && y < height) {\n          tile[localId.y][localId.x] = f32(A[y * width + x]);\n        }\n        workgroupBarrier();\n\n        x = i32(workgroupId.y) * ").concat(n," + i32(localId.x);\n        y = i32(workgroupId.x) * ").concat(n," + i32(localId.y);\n        if (x < height && y < width) {\n          setOutputAtIndex((y * height + x), tile[localId.x]\n            [localId.y]);\n        }\n      }\n    ")},e}(),Ut=function(){function e(e,t){this.variableNames=["A"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0;for(var n=new Array(e.length),a=0;a<n.length;a++)n[a]=e[t[a]];this.outputShape=n,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.newDim=t,this.shaderKey="transpose_".concat(t)}return e.prototype.getUserCode=function(){var e=C(this.outputShape.length),t=Mt(this.newDim);return"\n      ".concat(S("index")," {\n        for(var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let flatIndex = index * ").concat(this.workPerThread," + i;\n          if(flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            setOutputAtIndex(flatIndex, A[getIndexFromCoords").concat(this.outputShape.length,"D(\n              ").concat(e,"(").concat(t,"), uniforms.aShape)]);\n          }\n        }\n      }\n    ")},e}();function Mt(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=new Array(t),a=0;a<e.length;a++)n[e[a]]="coords.".concat(k(a));return n.join()}function Vt(e){for(var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.perm,s=a,u=i.shape.length,c=new Array(u),d=0;d<c.length;d++)c[d]=i.shape[o[d]];if(a.shouldExecuteOnCPU([i])){var l=s.tensorMap.get(i.dataId).values,p=zt(l,i.shape,i.dtype,o,c);return a.makeTensorInfo(c,i.dtype,p)}if(2===i.shape.length&&t.util.arraysEqual(o,[1,0])){var h=new Ot(i.shape,o);return s.runWebGPUProgram(h,[i],i.dtype)}var f=new Ut(i.shape,o);return s.runWebGPUProgram(f,[i],i.dtype)}var Gt={kernelName:t.Transpose,backendName:"webgpu",kernelFunc:Vt},Ht=function(){function e(e,n,a){this.variableNames=["x"],this.uniforms="reduceSize : i32,",this.size=!0,this.inputShape=[e.batchSize,e.inSize];var r=u(t.backend_util.computeOutAndReduceShapes(this.inputShape,[1]),1)[0];this.outputShape=0===r.length?[1]:r,e.inSize>=32768&&a>=512?this.workgroupSize=[512,1,1]:e.inSize>=4096?this.workgroupSize=[256,1,1]:this.workgroupSize=[64,1,1],this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,[1,1,1]),this.reduceType=n,this.shaderKey="reduce_".concat(n)}return e.prototype.getUserCode=function(){var e="",t="0.0",n=this.workgroupSize[0];"min"===this.reduceType||"max"===this.reduceType?(e="\n         if (isnan(candidate)) {\n          bestValue = uniforms.NAN;\n         } else if (!isnan(bestValue) && candidate ".concat("min"===this.reduceType?"<":">"," bestValue)\n           {  bestValue = candidate; }"),t="f32(x[offset])"):"sum"===this.reduceType||"mean"===this.reduceType?e=" bestValue = bestValue + candidate; ":"prod"===this.reduceType?(e=" bestValue = bestValue * candidate; ",t="1.0"):"all"===this.reduceType?(e=" bestValue = f32(bestValue >= 1.0 && candidate >= 1.0); ",t="1.0"):"any"===this.reduceType&&(e=" bestValue = f32(bestValue >= 1.0 || candidate >= 1.0); ",t="0.0");var a="mean"===this.reduceType?"setOutputAtIndex(outputIndex, bestValue / f32(uniforms.reduceSize));":"setOutputAtIndex(outputIndex, bestValue);",r="\n         var<workgroup> xBestValues : array<f32, ".concat(n,">;\n       ");return"\n       fn DIV_CEIL(a : u32, b : u32) -> u32 {\n        return ((a - 1u) / b + 1u);\n       }\n\n       ".concat(r,"\n       fn getOffset(outputIndex : i32) -> i32 {\n         let outputCoords = getCoordsFromIndex(outputIndex);\n         let offset = ").concat(1===this.outputShape.length?"outputCoords":"outputCoords[0]"," * uniforms.reduceSize;\n          return offset;\n       }\n       ").concat(S("index")," {\n         let outputIndex = index / ").concat(n,";\n         let offset = getOffset(outputIndex);\n         var bestValue = ").concat(t,";\n         let Length = uniforms.reduceSize;\n         let WorkPerThread = DIV_CEIL(u32(Length), ").concat(n,"u);\n         for (var k = i32(localId.x); k < Length && outputIndex < uniforms.size;\n             k = k + ").concat(n,") {\n           let candidate = f32(x[offset + k]);\n           ").concat(e,"\n         }\n         xBestValues[localId.x] = bestValue;\n         workgroupBarrier();\n\n         var reduceSize = min(u32(Length), ").concat(n,"u);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (localId.x < currentSize) {\n            let candidate = xBestValues[localId.x + interval];\n            ").concat(e,"\n            xBestValues[localId.x] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (localId.x == 0u && outputIndex < uniforms.size) {\n          ").concat(a,"\n        }\n       }\n     ")},e}(),Xt={mean:"float32",all:"bool",any:"bool"};function Kt(e,n,a,r,i){var o=e.shape.length,s=[],c=t.util.parseAxisParam(n,e.shape),d=c,l=t.backend_util.getAxesPermutation(d,o),p=e;null!=l&&(p=Vt({inputs:{x:e},attrs:{perm:l},backend:i}),d=t.backend_util.getInnerMostAxes(d.length,o),s.push(p)),t.backend_util.assertAxesAreInnerMostDims(r,d,o);var h,f=u(t.backend_util.computeOutAndReduceShapes(p.shape,d),2),m=f[0],g=f[1],v=m;if(a&&(v=t.backend_util.expandShapeToKeepDim(m,c)),"max"!==r&&"prod"!==r||!i.shouldExecuteOnCPU([p])){var y=t.util.sizeFromShape(g),x={windowSize:y,inSize:y,batchSize:t.util.sizeFromShape(p.shape)/y,outSize:1},b=Xt[r]||t.sumOutType(e.dtype),w=[{type:"int32",data:[y]}],C=new Ht(x,r,i.device.limits.maxComputeWorkgroupSizeX),k=i.runWebGPUProgram(C,[p],b,w);s.push(k),h=he({inputs:{x:k},attrs:{shape:v},backend:i})}else{var S=i.tensorMap.get(p.dataId).values;switch(r){case"max":var I=lt(S,t.util.sizeFromShape(g),v,e.dtype);h=i.makeTensorInfo(v,e.dtype,I);break;case"prod":var R=vt(p.shape,p.dtype,S,d),P=R.outVals,z=R.outShape,A=R.outDtype;h=i.makeTensorInfo(z,A,P);break;default:throw new Error("".concat(r," CPU implementation is not yet supported."))}}return s.forEach((function(e){return i.disposeData(e.dataId)})),h}var qt={kernelName:t.All,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.keepDims;return Kt(r,a.axis,i,"all",n)}};var Yt={kernelName:t.Any,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.keepDims;return Kt(r,a.axis,i,"any",n)}},jt=function(){function e(e,n,a){this.workgroupSize=[64,1,1],this.variableNames=["x"],this.uniforms="infinityValue : f32,",this.size=!0;var r=[n];this.op="min"===a?"<":">";var i=u(t.backend_util.computeOutAndReduceShapes(e,r),2),o=i[0],s=i[1];this.outputShape=0===o.length?[1]:o,this.dispatchLayout=O(this.outputShape),t.util.sizeFromShape(s)<32?(this.type="plain",this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize)):(this.type="shared",this.dispatch=L(this.dispatchLayout,this.outputShape,[1,1,1])),this.inputShape=e,this.shaderKey="argMinMax_".concat(this.op,"_").concat(this.type)}return e.prototype.getUserCode=function(){var e=this,t=this.workgroupSize[0],n=function(){return 1===e.inputShape.length?"uniforms.xShape":"uniforms.xShape.".concat(k(e.inputShape.length-1))},a=function(){var t="";if(1===e.outputShape.length)1!==e.inputShape.length&&(t+="outputCoords,");else for(var n=0;n<e.outputShape.length;n++)t+="outputCoords.".concat(k(n),",");return t};if("shared"===this.type){var r="\n      var<workgroup> xBestIndices : array<i32, ".concat(t,">;\n      var<workgroup> xBestValues : array<f32, ").concat(t,">;\n    ");return"\n      fn DIV_CEIL(a : u32, b : u32) -> u32 {\n        return ((a - 1u) / b + 1u);\n      }\n\n      ".concat(r,"\n\n      ").concat(S("index")," {\n        let outputIndex = index / ").concat(t,";\n        let reduceLength = ").concat(n(),";\n\n        var bestIndex = i32(localId.x);\n        var bestValue = uniforms.infinityValue;\n        let outputCoords = getCoordsFromIndex(outputIndex);\n        for (var k = i32(localId.x); k < reduceLength && outputIndex < uniforms.size;\n            k = k + ").concat(t,") {\n          let candidate = getX(").concat(a()," k);\n          if (!isnan(candidate) && candidate ").concat(this.op," bestValue) {\n            bestValue = candidate;\n            bestIndex = k;\n          }\n        }\n        xBestValues[localId.x] = bestValue;\n        xBestIndices[localId.x] = bestIndex;\n        workgroupBarrier();\n\n        var reduceSize = min(u32(reduceLength), ").concat(t,"u);\n        for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n            currentSize = reduceSize / 2u) {\n          let interval = DIV_CEIL(reduceSize, 2u);\n          if (localId.x < currentSize) {\n            let candidate = xBestValues[localId.x + interval];\n            if (candidate ").concat(this.op," bestValue) {\n              bestValue = candidate;\n              xBestValues[localId.x] = bestValue;\n              xBestIndices[localId.x] = xBestIndices[localId.x + interval];\n            }\n          }\n          reduceSize = interval;\n          workgroupBarrier();\n        }\n\n        if (localId.x == 0u && outputIndex < uniforms.size) {\n          setOutputAtIndexI32(outputIndex, xBestIndices[localId.x]);\n        }\n      }\n    ")}return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let outputCoords = getCoordsFromIndex(index);\n          var bestIndex = 0;\n          var bestValue = getX(").concat(a()," 0);\n          let reduceLength = ").concat(n(),";\n          for (var i = 1; i < reduceLength; i++) {\n            let candidate = getX(").concat(a()," i);\n            if (candidate ").concat(this.op," bestValue) {\n              bestValue = candidate;\n              bestIndex = i;\n            }\n          }\n          setOutputAtIndexI32(index, bestIndex);\n        }\n      }\n      ")},e}();var Qt={kernelName:t.ArgMax,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.axis,s=t.util.parseAxisParam(o,i.shape),u=t.backend_util.getAxesPermutation(s,i.shape.length),c=i,d=[];null!=u&&(c=Vt({inputs:{x:i},backend:a,attrs:{perm:u}}),d.push(c),s=t.backend_util.getInnerMostAxes(s.length,c.shape.length)),t.backend_util.assertAxesAreInnerMostDims("argMax",[s[0]],c.shape.length);var l=new jt(c.shape,s[0],"max"),p=[{type:"float32",data:[Number.NEGATIVE_INFINITY]}],h=a.runWebGPUProgram(l,[c],"int32",p);return d.forEach((function(e){return a.disposeData(e.dataId)})),h}};var Zt={kernelName:t.ArgMin,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.axis,s=t.util.parseAxisParam(o,i.shape),u=t.backend_util.getAxesPermutation(s,i.shape.length),c=i,d=[];null!=u&&(c=Vt({inputs:{x:i},backend:a,attrs:{perm:u}}),d.push(c),s=t.backend_util.getInnerMostAxes(s.length,c.shape.length)),t.backend_util.assertAxesAreInnerMostDims("argMin",[s[0]],c.shape.length);var l=new jt(c.shape,s[0],"min"),p=[{type:"float32",data:[Number.POSITIVE_INFINITY]}],h=a.runWebGPUProgram(l,[c],"int32",p);return d.forEach((function(e){return a.disposeData(e.dataId)})),h}},Jt=Se({opType:q.ASIN}),$t={kernelName:t.Asin,backendName:"webgpu",kernelFunc:Jt},en=Se({opType:q.ASINH}),tn={kernelName:t.Asinh,backendName:"webgpu",kernelFunc:en},nn=Se({opType:q.ATAN}),an={kernelName:t.Atan,backendName:"webgpu",kernelFunc:nn},rn=Ie({opType:G.ATAN2}),on={kernelName:t.Atan2,backendName:"webgpu",kernelFunc:rn},sn=Se({opType:q.ATANH}),un={kernelName:t.Atanh,backendName:"webgpu",kernelFunc:sn},cn=function(){function e(e){this.variableNames=["x"],this.uniforms="strides : vec2<i32>,",this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=e.outShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="poolWithFilterSizeEqualsOne"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let batch = coords[0];\n          let d = coords[3];\n\n          let xRCCorner = coords.yz * uniforms.strides;\n          let xRCorner = xRCCorner.x;\n          let xCCorner = xRCCorner.y;\n\n          let value = getX(batch, xRCorner, xCCorner, d);\n          setOutputAtIndex(index, value);\n        }\n      }\n    ")},e}(),dn=function(){function e(e,t,n,a,r){if(void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===r&&(r=!1),this.variableNames=["x"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, convDims : vec2<i32>, filterDims : vec2<i32>,",this.workgroupSize=[128,1,1],this.size=!0,"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");this.outputShape=e.outShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.poolType=t,this.computePositions=n,this.flattenPositions=a,this.includeBatchIndex=r,this.shaderKey="pool2D_".concat(t,"_").concat(n,"_").concat(a,"_").concat(r)}return e.prototype.getUserCode=function(){var e;if("avg"===this.poolType)e="resultValue = resultValue + value; count = count + 1.0;";else if(this.computePositions){var t=this.flattenPositions?this.includeBatchIndex?"((batch * uniforms.xShape[1] + xR) * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d":"(xR * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d":"wR * uniforms.filterDims.y + wC";e="let currMaxValue = mix(value, maxValue, maxValueFound);\n      if (value >= currMaxValue) {\n        maxValue = value;\n        maxValueFound = 1.0;\n        maxPosition = ".concat(t,";\n      }")}else e="resultValue = max(value, resultValue);";var n="resultValue";return"avg"===this.poolType&&(n="resultValue / max(count, 1.0)"),"\n      ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n          let batch = coords[0];\n          let d = coords[3];\n          let xRCCorner = vec2<i32>(coords.yz) * uniforms.strides - uniforms.pads;\n          let xRCorner = xRCCorner.x;\n          let xCCorner = xRCCorner.y;\n\n          ").concat(this.computePositions?"var maxValue = 0.0;\n            var maxValueFound = 0.0;\n            var maxPosition = 0;":"var resultValue = ".concat("avg"===this.poolType?"0.0":"-1.0 / pow(10.0, -20.0)",";"),"\n\n          var count = 0.0;\n          for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + uniforms.dilations.x) {\n            let xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= uniforms.convDims.x) {\n              continue;\n            }\n\n            for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + uniforms.dilations.y) {\n              let xC = xCCorner + wC;\n              if (xC < 0 || xC >= uniforms.convDims.y) {\n                continue;\n              }\n\n              let value = getX(batch, xR, xC, d);\n              ").concat(e,"\n            }\n          }\n\n          ").concat(this.computePositions?"setOutputAtIndexI32(index, maxPosition);":"setOutputAtIndex(index, ".concat(n,");"),"\n        }\n      }\n    ")},e}(),ln=function(){function e(e,t,n,a,r){if(void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===r&&(r=!1),this.variableNames=["x"],this.uniforms="strides : vec3<i32>, pads : vec3<i32>, convDims : vec3<i32>, filterDims : vec3<i32>,",this.workgroupSize=[128,1,1],this.size=!0,"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");this.outputShape=e.outShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.poolType=t,this.computePositions=n,this.flattenPositions=a,this.includeBatchIndex=r,this.shaderKey="pool3D_".concat(t,"_").concat(n,"_").concat(a,"_").concat(r)}return e.prototype.getUserCode=function(){var e;if("avg"===this.poolType)e="resultValue += value; count += 1.0;";else if(this.computePositions){var t=this.flattenPositions?this.includeBatchIndex?"(((batch * uniforms.xShape.y + xD) * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch":"((xD * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch":"wD * uniforms.filterDims.y * uniforms.filterDims.y + wR * uniforms.filterDims.z + wC";e="let currMaxValue = mix(value, maxValue, maxValueFound);\n      if (value >= currMaxValue) {\n        maxValue = value;\n        maxValueFound = 1.0;\n        maxPosition = ".concat(t,";\n      }")}else e="resultValue = max(value, resultValue);";var n="resultValue";return"avg"===this.poolType&&(n="resultValue / max(count, 1.0)"),"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let batch = coords.x;\n          let ch = coords.u;\n\n          let xCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;\n          let xDCorner = xCorner.x;\n          let xRCorner = xCorner.y;\n          let xCCorner = xCorner.z;\n\n          ").concat(this.computePositions?"var maxValue = 0.0;\n            var maxValueFound = 0.0;\n            var maxPosition = 0;":"var resultValue = ".concat("avg"===this.poolType?"0.0":"-1.0 / pow(10.0, -20.0)",";"),"\n\n          var count = 0.0;\n          for (var wD = 0; wD < uniforms.filterDims.x; wD++) {\n            let xD = xDCorner + wD;\n            if (xD < 0 || xD >= uniforms.convDims.x) {\n              continue;\n            }\n\n            for (var wR = 0; wR < uniforms.filterDims.y; wR++) {\n              let xR = xRCorner + wR;\n              if (xR < 0 || xR >= uniforms.convDims.y) {\n                continue;\n              }\n\n              for (var wC = 0; wC < uniforms.filterDims.z; wC++) {\n                let xC = xCCorner + wC;\n                if (xC < 0 || xC >= uniforms.convDims.z) {\n                  continue;\n                }\n\n                let value = getX(batch, xD, xR, xC, ch);\n                ").concat(e,"\n              }\n            }\n          }\n\n          ").concat(this.computePositions?"setOutputAtIndexI32(index, maxPosition);":"setOutputAtIndex(index, ".concat(n,");"),"\n        }\n      }\n    ")},e}();function pn(e){var t=e.inputs,n=e.backend,a=e.attrs;return Kt(t.x,a.reductionIndices,a.keepDims,"max",n)}var hn={kernelName:t.Max,backendName:"webgpu",kernelFunc:pn};function fn(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.keepDims;return Kt(r,a.axis,i,"mean",n)}var mn={kernelName:t.Mean,backendName:"webgpu",kernelFunc:fn};function gn(e,n,a,r){if(1===n.filterWidth&&1===n.filterHeight&&t.util.arraysEqual(n.inShape,n.outShape))return xe({inputs:{x:e},backend:r});if(n.filterWidth===n.inWidth&&n.filterHeight===n.inHeight&&1===n.batchSize&&"VALID"===n.padInfo.type){var i=e.shape.length,o=he({inputs:{x:e},backend:r,attrs:{shape:[e.shape[i-3]*e.shape[i-2],e.shape[i-1]]}}),s=void 0;"avg"===a?s=fn({inputs:{x:o},backend:r,attrs:{axis:0,keepDims:!1}}):(t.util.assert("max"===a,(function(){return"Invalid pool type ".concat(a)})),s=pn({inputs:{x:o},backend:r,attrs:{reductionIndices:0,keepDims:!1}}));var u=he({inputs:{x:s},backend:r,attrs:{shape:n.outShape}});return r.disposeData(o.dataId),r.disposeData(s.dataId),u}var c,d=[{type:"int32",data:[n.strideHeight,n.strideWidth]}];return 1===n.filterHeight&&1===n.filterWidth?c=new cn(n):("avg"===a?c=new dn(n,"avg"):(t.util.assert("max"===a,(function(){return"Invalid pool type ".concat(a)})),c=new dn(n,"max")),d.push({type:"int32",data:[n.padInfo.top,n.padInfo.left]},{type:"int32",data:[n.dilationHeight,n.dilationWidth]},{type:"int32",data:[n.inHeight,n.inWidth]},{type:"int32",data:[n.effectiveFilterHeight,n.effectiveFilterWidth]})),r.runWebGPUProgram(c,[e],e.dtype,d)}var vn={kernelName:t.AvgPool,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;return gn(i,t.backend_util.computePool2DInfo(i.shape,o,s,1,u,c),"avg",a)}};var yn={kernelName:t.AvgPool3D,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.filterSize,s=r.strides,u=r.pad,c=r.dataFormat,d=r.dimRoundingMode,l=t.backend_util.computePool3DInfo(i.shape,o,s,[1,1,1],u,d,c),p=new ln(l,"avg"),h=[{type:"int32",data:[l.strideDepth,l.strideHeight,l.strideWidth]},{type:"int32",data:[l.padInfo.front,l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.inDepth,l.inHeight,l.inWidth]},{type:"int32",data:[l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth]}];return a.runWebGPUProgram(p,[i],i.dtype,h)}},xn=function(){function e(e){this.variableNames=["dy"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,\n       outHeight : i32, outWidth : i32, avgMultiplier : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="avgPool2DBackprop"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d = coords[3];\n\n        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;\n        let dyRCorner = dyRCCorner.x;\n        let dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims[0]; wR = wR + uniforms.dilations[0]) {\n          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);\n\n          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n            continue;\n          }\n          let idyR = i32(dyR);\n\n          for (var wC = 0; wC < uniforms.filterDims[1]; wC = wC + uniforms.dilations[1]) {\n            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);\n\n            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n              continue;\n            }\n            let idyC = i32(dyC);\n\n            let dyValue = getDy(batch, idyR, idyC, d);\n\n            dotProd = dotProd + dyValue * uniforms.avgMultiplier;\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    ")},e}(),bn=function(){function e(e){this.variableNames=["dy"],this.uniforms="strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,\n       outDepth : i32, outHeight : i32, outWidth : i32, avgMultiplier : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="avgPool3DBackprop"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords.x;\n        let ch = coords.u;\n\n        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;\n        let dyDCorner = dyCorner.x;\n        let dyRCorner = dyCorner.y;\n        let dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {\n          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);\n\n          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {\n            continue;\n          }\n          let idyD = i32(dyD);\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);\n\n            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n              continue;\n            }\n            let idyR = i32(dyR);\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);\n\n              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n                continue;\n              }\n              let idyC = i32(dyC);\n\n              let dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              dotProd += dyValue * uniforms.avgMultiplier;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    ")},e}();var wn={kernelName:t.AvgPool3DGrad,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.dy,o=n.input,s=r.filterSize,u=r.strides,c=r.pad,d=r.dimRoundingMode,l=t.backend_util.computePool3DInfo(o.shape,s,u,1,c,d),p=new bn(l),h=1/(l.filterDepth*l.filterHeight*l.filterWidth),f=[{type:"int32",data:[l.strideDepth,l.strideHeight,l.strideWidth]},{type:"int32",data:[l.effectiveFilterDepth-1-l.padInfo.front,l.effectiveFilterHeight-1-l.padInfo.top,l.effectiveFilterWidth-1-l.padInfo.left]},{type:"int32",data:[l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth]},{type:"int32",data:[l.outDepth]},{type:"int32",data:[l.outHeight]},{type:"int32",data:[l.outWidth]},{type:"float32",data:[h]}];return a.runWebGPUProgram(p,[i],o.dtype,f)}};var Cn={kernelName:t.AvgPoolGrad,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.dy,o=n.input,s=o;V([i,o],"avgPoolGrad");var u=r.filterSize,c=r.strides,d=r.pad,l=t.backend_util.computePool2DInfo(s.shape,u,c,1,d),p=new xn(l),h=1/(l.filterHeight*l.filterWidth),f=[{type:"int32",data:[l.strideHeight,l.strideWidth]},{type:"int32",data:[l.effectiveFilterHeight-1-l.padInfo.top,l.effectiveFilterWidth-1-l.padInfo.left]},{type:"int32",data:[l.dilationHeight,l.dilationWidth]},{type:"int32",data:[l.effectiveFilterHeight,l.effectiveFilterWidth]},{type:"int32",data:[l.outHeight]},{type:"int32",data:[l.outWidth]},{type:"float32",data:[h]}];return a.runWebGPUProgram(p,[i],s.dtype,f)}};var kn={kernelName:t.BatchMatMul,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs;return me({a:t.a,b:t.b,transposeA:a.transposeA,transposeB:a.transposeB,backend:n})}},Sn=function(){function e(e,t){this.variableNames=["source"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.rank=t.length,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.start=e,this.uniforms="start : ".concat(C(e.length),", "),this.shaderKey="slice"}return e.prototype.getUserCode=function(){var e,t=C(this.rank),n=function(e){if(1===e)return"sourceLoc";if(e<=6)return In.slice(0,e).map((function(e){return"sourceLoc.".concat(e)})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);return e=1===this.start.length?this.outputShape.map((function(e,t){return"sourceLoc = uniforms.start + coords;"})):this.outputShape.map((function(e,t){return"sourceLoc.".concat(In[t]," = uniforms.start.").concat(k(t)," + coords.").concat(In[t],";")})),"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          var sourceLoc : ").concat(t,";\n          let coords = getCoordsFromIndex(index);\n          ").concat(e.join("\n"),"\n          setOutputAtIndex(index, getSource(").concat(n,"));\n        }\n      }\n    ")},e}(),In=["x","y","z","w","u","v"];function Rn(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.begin,s=r.size,c=u(t.slice_util.parseSliceParams(i,o,s),2),d=c[0],l=c[1];if(t.slice_util.assertParamsValid(i,d,l),a.shouldExecuteOnCPU([i])||"string"===i.dtype){var p=a.tensorMap.get(i.dataId),h=Ct(p.values,d,l,i.shape,i.dtype);return a.makeTensorInfo(l,i.dtype,h)}if(0===t.util.sizeFromShape(l))return a.makeTensorInfo(l,i.dtype,[]);var f=new Sn(d,l),m=[{type:"int32",data:d}];return a.runWebGPUProgram(f,[i],i.dtype,m)}var Pn={kernelName:t.Slice,backendName:"webgpu",kernelFunc:Rn},zn={kernelName:t.BatchToSpaceND,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.blockShape,s=r.crops;t.util.assert(i.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGPU backend not implemented yet"}));var u=o.reduce((function(e,t){return e*t})),c=t.backend_util.getReshaped(i.shape,o,u),d=t.backend_util.getPermuted(c.length,o.length),l=t.backend_util.getReshapedPermuted(i.shape,o,u),p=t.backend_util.getSliceBeginCoords(s,o.length),h=t.backend_util.getSliceSize(l,s,o.length),f=[],m=he({inputs:{x:i},backend:a,attrs:{shape:c}}),g=Vt({inputs:{x:m},backend:a,attrs:{perm:d}}),v=he({inputs:{x:g},backend:a,attrs:{shape:l}}),y=Rn({inputs:{x:v},backend:a,attrs:{begin:p,size:h}});return f.push(m),f.push(g),f.push(v),f.forEach((function(e){return a.disposeData(e.dataId)})),y}},An="\n  fn bincount_write(index: i32, value: f32) {\n    ".concat(x("&result[index]","value","float32"),"\n  }\n"),Nn=function(){function e(e,t,n){void 0===n&&(n=!1),this.outputShape=[],this.variableNames=["x"],this.uniforms="binCountSize : i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.hasWeights=!0,this.binaryOutput=!1,this.outputShape=e,this.rank=e.length,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.binaryOutput=n,n&&(this.atomic=!1),this.hasWeights=t,this.hasWeights&&this.variableNames.push("w"),this.shaderKey="bincount_".concat(this.hasWeights,"_").concat(this.binaryOutput,"_").concat(this.rank)}return e.prototype.getUserCode=function(){return"\n    ".concat(this.binaryOutput?"\n  fn bincount_write(index: i32, value: f32) {\n    atomicStore(&result[index], bitcast<i32>(value));\n  }\n":An,"\n  ").concat(S("index")," {\n    ").concat(1===this.rank?"if (index < uniforms.xShape) {\n      let indexVal = i32(getX(index));\n      if (indexVal < uniforms.binCountSize) {\n        let value = ".concat(this.binaryOutput?1:this.hasWeights?"getW(index)":"1.",";\n        bincount_write(indexVal, value);\n      }\n    }"):"let coord = getCoordsFromIndex(index);\n    if (coordsInBounds2D(coord, uniforms.xShape)) {\n      let indexVal = i32(getX(coord[0], coord[1]));\n      if (indexVal < uniforms.binCountSize) {\n        let value = ".concat(this.binaryOutput?1:this.hasWeights?"getW(coord[0], coord[1])":"1.",";\n        bincount_write(coord.x * uniforms.binCountSize + indexVal, value);\n      }\n    }"),"\n  }\n  ")},e}();var Dn={kernelName:t.Bincount,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.weights,s=r.size,u=t.util.sizeFromShape(i.shape),c=t.util.sizeFromShape(o.shape)>0,d=[s],l=o.dtype,p=le({backend:a,attrs:{shape:d,value:0,dtype:l}}),h=new Nn([u],c),f=[{type:"int32",data:[s]}],m=c?[i,o]:[i];return a.runWebGPUProgram(h,m,l,f,p)}},Fn=function(){function e(e){this.outputShape=[],this.variableNames=["s0","s1"],this.uniforms="s0Size : i32, s1Size : i32, ",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e],this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="broadcastArgs"}return e.prototype.getUserCode=function(){return"\n  ".concat(S("index")," {\n    if (index < uniforms.size) {\n      var s0 = 1.0;\n      var s1 = 1.0;\n      let indexS0 = index - uniforms.size + uniforms.s0Size;\n      let indexS1 = index - uniforms.size + uniforms.s1Size;\n      if (indexS0 >= 0) {\n        s0 = getS0(indexS0);\n      }\n      if (indexS1 >= 0) {\n        s1 = getS1(indexS1);\n      }\n\n      if (s0 == 1.0) {\n        setOutputAtIndex(index, s1);\n      } else if (s1 == 1.0) {\n        setOutputAtIndex(index, s0);\n      } else if (s0 != s1) {\n        setOutputAtIndex(index, uniforms.NAN);\n      } else {\n        setOutputAtIndex(index, s0);\n      }\n    }\n  }\n  ")},e}();var Tn={kernelName:t.BroadcastArgs,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=n.s0,i=n.s1;if(a.shouldExecuteOnCPU([r,i])){var o=a.tensorMap.get(r.dataId),s=a.tensorMap.get(i.dataId),u=o.values,c=s.values,d=t.backend_util.assertAndGetBroadcastShape(Array.from(u),Array.from(c));return a.makeTensorInfo([d.length],"int32",Int32Array.from(d))}var l=t.util.sizeFromShape(r.shape),p=t.util.sizeFromShape(i.shape),h=Math.max(l,p),f=new Fn(h),m=[{type:"int32",data:[l]},{type:"int32",data:[p]}];return a.runWebGPUProgram(f,[r,i],"int32",m)}},_n=Ie({opType:G.NOT_EQUAL,dtype:"bool",cpuKernelImpl:gt}),Ln={kernelName:t.NotEqual,backendName:"webgpu",kernelFunc:_n};function Wn(e){var t=e.inputs,n=e.backend,a=t.input;return xe({inputs:{x:n.tensorMap.get(a.dataId).complexTensorInfos.real},backend:n})}var En={kernelName:t.Real,backendName:"webgpu",kernelFunc:Wn};var Bn={kernelName:t.Cast,backendName:"webgpu",kernelFunc:function e(n){var r=n.inputs,i=n.backend,o=n.attrs,s=r.x,c=o.dtype;if("complex64"===c){if("complex64"===s.dtype)return xe({inputs:{x:s},backend:i});var d=a.zeros(s.shape),l=e({inputs:{x:s},backend:i,attrs:{dtype:"float32"}}),p=we({inputs:{real:l,imag:d},backend:i});return d.dispose(),i.disposeData(l.dataId),p}if("complex64"===s.dtype){var h=Wn({inputs:{input:s},backend:i}),p=e({inputs:{x:h},backend:i,attrs:{dtype:c}});return i.disposeData(h.dataId),p}if(!t.util.hasEncodingLoss(s.dtype,c))return{dataId:(p=xe({inputs:{x:s},backend:i})).dataId,shape:p.shape,dtype:c};if(i.shouldExecuteOnCPU([s])){var f=i.tensorMap.get(s.dataId).values,m=u(Qe(f,s.shape,s.dtype,c),3),g=m[0],v=m[1],y=m[2];return i.makeTensorInfo(g,v,y)}if("int32"===c)return function(e,t){var n=new ke(e.shape,q.TO_INT),a=t.runWebGPUProgram(n,[e],"int32");return{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}(s,i);if("bool"===c){var x=i.makeTensorInfo([],"bool",t.util.getTypedArrayFromDType("bool",1));p=_n({inputs:{a:s,b:x},backend:i});return i.disposeData(x.dataId),p}throw new Error("Error in Cast: failed to cast ".concat(s.dtype," to ").concat(c))}},On=Se({opType:q.CEIL,cpuKernelImpl:Ze}),Un={kernelName:t.Ceil,backendName:"webgpu",kernelFunc:On},Mn=function(){function e(e){this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workPerThread=4,this.workgroupSize=[64,1,1],this.outputComponent=4,this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.shaderKey="clipVec4"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n        if(index < uniforms.size) {\n          let value = getAByOutputIndex(index);\n          var clampedValue = clamp(\n              value, vec4<f32>(uniforms.minVal), vec4<f32>(uniforms.maxVal));\n          clampedValue = select(clampedValue, value, isnanVec4(value));\n          setOutputAtIndex(index, clampedValue);\n        }\n      }\n    ")},e}(),Vn=function(){function e(e){this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="clip"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n        if(index < uniforms.size) {\n          let value = getAByOutputIndex(index);\n          if (isnan(value)) {\n            setOutputAtIndex(index, value);\n            return;\n          }\n          setOutputAtIndex(index, clamp(value, uniforms.minVal, uniforms.maxVal));\n        }\n      }\n    ")},e}();var Gn={kernelName:t.ClipByValue,backendName:"webgpu",kernelFunc:function(e){var n,a=e.inputs,r=e.backend,i=e.attrs,o=a.x,s=[{type:"float32",data:[i.clipValueMin]},{type:"float32",data:[i.clipValueMax]}];return n=t.util.sizeFromShape(o.shape)%4==0?new Mn(o.shape):new Vn(o.shape),r.runWebGPUProgram(n,[o],o.dtype,s)}},Hn=function(){function e(e){this.outputShape=[],this.variableNames=["real","imag"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="complexAbs"}return e.prototype.getUserCode=function(){return"\n    ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let re = abs(getRealByOutputIndex(index));\n        let im = abs(getImagByOutputIndex(index));\n        let mx = max(re, im);\n\n        // The length function in wgsl may be not underflow-safe on some GPUs.\n        // So the safe solution is to ensure underflow-safety in all cases.\n        setOutputAtIndex(index, select(mx * length(vec2<f32>(1, min(re, im)/mx)), 0.0, mx == 0.0));\n      }\n    }\n  ")},e}();function Xn(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var Kn={kernelName:t.ComplexAbs,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x,r=n.tensorMap.get(a.dataId),i=new Hn(a.shape),o=[Xn(a,r.complexTensorInfos.real),Xn(a,r.complexTensorInfos.imag)];return n.runWebGPUProgram(i,o,o[0].dtype)}},qn=function(){function e(e){this.uniforms="",this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.backend_util.computeOutShape(e,1),this.variableNames=e.map((function(e,t){return"T".concat(t)})),this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.offsetLength=e.length-1;for(var n=0;n<this.offsetLength;n++)this.uniforms+="offset".concat(n," : i32,");this.shaderKey="concat"}return e.prototype.getUserCode=function(){var e=[];if(this.offsetLength>0){e.push("if (yC < uniforms.offset0){ setOutputAtCoords(coords.x, coords.y, getT0(yR, yC)); }");for(var t=1;t<this.offsetLength;t++)e.push("else if (yC < uniforms.offset".concat([t],"){ ")+"setOutputAtCoords(coords.x, coords.y, getT".concat(t,"(yR, yC - uniforms.offset").concat(t-1,")); }"));var n=this.offsetLength,a=this.offsetLength-1;e.push("else { setOutputAtCoords(coords.x, coords.y, getT".concat(n,"(yR, yC - uniforms.offset").concat(a,")); }"))}else e.push("setOutputAtCoords(coords.x, coords.y, getT0(yR, yC));");return"\n      ".concat(S("index")," {\n        for(var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let flatIndex = index * ").concat(this.workPerThread," + i;\n          if(flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            let yR = coords.x;\n            let yC = coords.y;\n\n            ").concat(e.join("\n        "),"\n          }\n        }\n      }\n    ")},e}();function Yn(e){var t=e.inputs,n=e.backend,a=t.input;return xe({inputs:{x:n.tensorMap.get(a.dataId).complexTensorInfos.imag},backend:n})}var jn={kernelName:t.Imag,backendName:"webgpu",kernelFunc:Yn};function Qn(e,n,a){var r,i,o=e[0].dtype;if("complex64"===o){var u=e.map((function(e){return Wn({inputs:{input:e},backend:a})})),c=e.map((function(e){return Yn({inputs:{input:e},backend:a})})),d=Qn(u,n,a),l=Qn(c,n,a),p=we({inputs:{real:d,imag:l},backend:a});return u.forEach((function(e){return a.disposeData(e.dataId)})),c.forEach((function(e){return a.disposeData(e.dataId)})),a.disposeData(d.dataId),a.disposeData(l.dataId),p}var h=a.shouldExecuteOnCPU(e);if("string"===o&&(h=!0),h){var f=e.map((function(e){var r=t.util.sizeFromShape(e.shape.slice(n));return he({inputs:{x:e},backend:a,attrs:{shape:[-1,r]}})})),m=f.map((function(e){return{vals:a.readSync(e.dataId),shape:e.shape}})),g=t.backend_util.computeOutShape(f.map((function(e){return e.shape})),1),v=1===f[0].shape[0],y=Je(m,g,o,v),x=t.backend_util.computeOutShape(e.map((function(e){return e.shape})),n),b=a.makeTensorInfo(x,o,y);return f.forEach((function(e){return a.disposeData(e.dataId)})),b}var w=a.device.limits.maxStorageBuffersPerShaderStage-1;if(e.length>w){for(var C=[],k=0;k<e.length;k+=w){var S=e.slice(k,k+w);C.push(Qn(S,n,a))}p=Qn(C,n,a);try{for(var I=s(C),R=I.next();!R.done;R=I.next()){k=R.value;a.disposeData(k.dataId)}}catch(e){r={error:e}}finally{try{R&&!R.done&&(i=I.return)&&i.call(I)}finally{if(r)throw r.error}}return p}var P=function(e,n,a){var r=t.backend_util.computeOutShape(e.map((function(e){return e.shape})),n);return{tensors2D:e.map((function(e){return he({inputs:{x:e},backend:a,attrs:{shape:[t.util.sizeFromShape(e.shape.slice(0,n)),t.util.sizeFromShape(e.shape.slice(n))]}})})),outShape:r}}(e,n,a),z=P.tensors2D,A=P.outShape,N=z.map((function(e){return e.shape})),D=new qn(N),F=[],T=new Array(N.length-1);if(T.length>0){T[0]=N[0][1],F.push({type:"int32",data:[T[0]]});for(k=1;k<T.length;k++)T[k]=T[k-1]+N[k][1],F.push({type:"int32",data:[T[k]]})}var _=a.runWebGPUProgram(D,z,z[0].dtype,F);z.forEach((function(e){return a.disposeData(e.dataId)}));var L=he({inputs:{x:_},backend:a,attrs:{shape:A}});return a.disposeData(_.dataId),L}function Zn(e){var n=e.inputs,a=e.backend,r=e.attrs.axis,i=t.util.parseAxisParam(r,n[0].shape)[0],o=n.map((function(e){return e.shape}));t.backend_util.assertParamsConsistent(o,i);var s=t.backend_util.computeOutShape(n.map((function(e){return e.shape})),i);if(0===t.util.sizeFromShape(s))return a.makeTensorInfo(s,n[0].dtype,[]);var u=n.filter((function(e){return t.util.sizeFromShape(e.shape)>0}));return 1===u.length?xe({inputs:{x:u[0]},backend:a}):Qn(u,i,a)}var Jn={kernelName:t.Concat,backendName:"webgpu",kernelFunc:Zn};var $n=function(){function e(e,t,n,a,r,i,o,s){void 0===r&&(r=!1),void 0===i&&(i=null),void 0===o&&(o=!1),void 0===s&&(s=!1),this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=e.outShape,this.isChannelsLast="channelsLast"===e.dataFormat,this.isVec4=((e.inChannels%4==0||e.inChannels%3==0)&&this.isChannelsLast||e.outWidth%4==0&&!this.isChannelsLast)&&e.outChannels%4==0,this.dispatchLayout=this.isChannelsLast?{x:[3],y:[1,2],z:[0]}:{x:[2,3],y:[1],z:[0]},this.workgroupSize=E(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=B(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread),this.isVec4?(this.outputComponent=4,this.isChannelsLast&&e.inChannels%4!=0?(this.innerElementSize=3,this.variableComponents=[1,4]):(this.innerElementSize=4,this.variableComponents=[4,4]),r&&(this.variableNames.push("bias"),this.variableComponents.push(4)),o&&(this.variableNames.push("preluActivationWeights"),this.variableComponents.push(4))):(this.innerElementSize=this.elementsPerThread[0],r&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights")),this.sequentialAccessByThreads=s,this.addBias=r,this.activation=i,this.hasPreluActivationWeights=o,this.tileAOuter=this.workgroupSize[1]*this.elementsPerThread[1],this.tileBOuter=this.workgroupSize[0]*this.elementsPerThread[0],this.tileInner=Math.max(this.workgroupSize[0]*this.innerElementSize,this.workgroupSize[1]),this.fitAOuter=t%this.tileAOuter==0,this.fitBOuter=n%this.tileBOuter==0,this.fitInner=a%this.tileInner==0,this.shaderKey="conv2DMM_".concat(this.elementsPerThread,"_").concat(this.activation,"}_").concat(this.fitAOuter,"_").concat(this.fitBOuter,"_").concat(this.fitInner,"_").concat(this.isVec4,"_").concat(this.innerElementSize,"_").concat(this.isChannelsLast,"_").concat(this.sequentialAccessByThreads)}return e.prototype.getUserCode=function(){var e=this.isVec4?ne(this.elementsPerThread,this.workgroupSize,!this.isChannelsLast,this.tileInner):re(this.elementsPerThread,this.workgroupSize,!this.isChannelsLast,this.tileInner,!1,null,this.sequentialAccessByThreads),t=this.isVec4?[this.innerElementSize,4,4]:[1,1,1];return"\n    ".concat(function(e,t,n,a,r,i,o,s,u,c){void 0===r&&(r=!1),void 0===i&&(i=null),void 0===o&&(o=!1),void 0===s&&(s=4),void 0===u&&(u=4),void 0===c&&(c=4);var d=e?"\n      let coord = vec4<i32>(batch, xRow, xCol, xCh);\n      ":"\n      let coord = vec4<i32>(batch, xCh, xRow, xCol);\n      ",l=e?"\n      let coords = vec4<i32>(\n        batch,\n        row / outWidth,\n        row % outWidth,\n        col);\n      ":"\n      let coords = vec4<i32>(\n        batch,\n        row,\n        col / outWidth,\n        col % outWidth);\n      ",p=e?"uniforms.xShape[1]":"uniforms.xShape[2]",h=e?"uniforms.xShape[2]":"uniforms.xShape[3]",f=e?"row":"col",m=e?"col":"row",g="\n      let inChannels = uniforms.wShape[2];\n      let outWidth = ".concat(e?"uniforms.outShape[2]":"uniforms.outShape[3]",";\n      let outRow = ").concat(f," / outWidth;\n      let outCol = ").concat(f," % outWidth;\n\n      let WRow = ").concat(m," / (uniforms.filterDims[1] * inChannels);\n      let WCol = ").concat(m," / inChannels % uniforms.filterDims[1];\n      let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * WRow - uniforms.pads[0];\n      let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * WCol - uniforms.pads[1];\n      let xCh = ").concat(m," % inChannels;\n      var resData = ").concat(w(s),"(0.0);\n      // The bounds checking is always needed since we use it to pad zero for\n      // the 'same' padding type.\n      if (xRow >= 0 && xRow < ").concat(p," && xCol >= 0 && xCol < ").concat(h,") {\n        ").concat(d,"\n        let xIndex = getIndexFromCoords4D(coord, uniforms.xShape);\n        ").concat(function(e){switch(e){case 1:return"resData = f32(x[xIndex]);";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = vec4<f32>(x[xIndex / 4]);";default:throw new Error("innerElementSize ".concat(e," is not supported."))}}(s),"\n      }\n      return resData;"),v=e?t&&a?"\n      ".concat(g):"\n      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n        ".concat(g,"\n      }\n      return ").concat(w(s),"(0.0);"):a&&n?"\n      ".concat(g):"\n      if (row < uniforms.dimInner && col < uniforms.dimBOuter) {\n        ".concat(g,"\n      }\n      return ").concat(w(s),"(0.0);"),y="".concat(function(e){switch(e){case 1:return"return f32(W[row * uniforms.wShape[3] + col]);";case 4:return"return vec4<f32>(W[(row * uniforms.wShape[3] + col) / 4]);";default:throw new Error("innerElementSize ".concat(e," is not supported."))}}(u)),x=w(c),b=w(e?s:u),C=w(e?u:s);return"\n      ".concat(J(i,o,4===c,4),"\n      fn mm_readA(batch: i32, row : i32, col : i32) -> ").concat(b," {\n        ").concat(e?v:y,"\n      }\n\n      fn mm_readB(batch: i32, row : i32, col : i32) -> ").concat(C," {\n        ").concat(e?y:v,"\n      }\n\n      fn mm_write(batch: i32, row : i32, col : i32, valueIn : ").concat(x,") {\n        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)\n        {\n        var value = valueIn;\n        let outWidth = ").concat(e?"uniforms.outShape[2]":"uniforms.outShape[3]",";\n        ").concat(l,"\n        ").concat($(r,i),"\n        setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n        }\n      }")}(this.isChannelsLast,this.fitAOuter,this.fitBOuter,this.fitInner,this.addBias,this.activation,this.hasPreluActivationWeights,t[0],t[1],t[2]),"\n    ").concat(e,"\n  ")},e}(),ea=function(){function e(e,t,n,a){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===a&&(a=!1),this.variableNames=["x","W"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>,",this.workgroupSize=[4,4,8],this.outputShape=e.outShape,this.isChannelsLast="channelsLast"===e.dataFormat,this.dispatchLayout=this.isChannelsLast?{x:[2],y:[1],z:[0,3]}:{x:[3],y:[2],z:[0,1]},this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.addBias=t,this.activation=n,this.hasPreluActivationWeights=a,t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.shaderKey="conv2dnaive_".concat(this.activation,"_").concat(this.isChannelsLast)}return e.prototype.getUserCode=function(){return"\n       ".concat(J(this.activation,this.hasPreluActivationWeights,!1,4),"\n       fn readInp(batch : i32, row : i32, col : i32, chan : i32) -> f32{\n         let coords = vec4<i32>(batch, row, col, chan);\n         if (coordsInBounds4D(coords, uniforms.xShape)) {\n           return  getX(batch, row, col, chan);\n         } else {\n          return 0.0;\n         }\n       }\n       fn readFilt(row : i32, col : i32, xChannel : i32, outChannel : i32) -> f32{\n         let coords = vec4<i32>(row, col, xChannel, outChannel);\n         if(coordsInBounds4D(coords, uniforms.wShape)) {\n           return getW(row, col, xChannel, outChannel);\n          } else {\n            return 0.0;\n          }\n       }\n       fn writeResult(batch : i32, row : i32, col : i32, chan : i32, valueIn : f32) {\n         let coords = ").concat(this.isChannelsLast?"vec4<i32>(batch, row, col, chan);":"vec4<i32>(batch, chan, row, col);","\n         if (coordsInBounds4D(coords, uniforms.outShape)) {\n           var value = valueIn;\n           ").concat($(this.addBias,this.activation),"\n           setOutputAtCoords(coords.x, coords.y, coords.z, coords.w, value);\n         }\n       }\n       ").concat(S("index")," {\n         let coords = getOutputCoords();\n         let batch = coords[0];\n         let outChannel = ").concat(this.isChannelsLast?"coords[3];":"coords[1];","\n         let outRow = ").concat(this.isChannelsLast?"coords[1];":"coords[2];","\n         let outCol = ").concat(this.isChannelsLast?"coords[2];":"coords[3];","\n         var acc : f32 = 0.0;\n         for (var row = 0; row < uniforms.filterDims[0]; row = row + 1) {\n           for (var col = 0; col < uniforms.filterDims[1]; col = col + 1) {\n             let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * row - uniforms.pads[0];\n             let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * col - uniforms.pads[1];\n             for (var xChannel = 0; xChannel < ").concat(this.isChannelsLast?"uniforms.xShape[3];":"uniforms.xShape[1];"," xChannel = xChannel + 1) {\n               ").concat(this.isChannelsLast?"let v = readInp(batch, xRow, xCol, xChannel);":"let v = readInp(batch, xChannel, xRow, xCol);","\n               let f = readFilt(row, col, xChannel, outChannel);\n               acc = acc + v * f;\n             }\n           }\n         }\n         writeResult(batch, outRow, outCol, outChannel, acc);\n       }\n     ")},e}(),ta=function(){function e(e,t){this.variableNames=["x"],this.uniforms="pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, outWidth : i32, itemsPerBlockRow : i32,\n       inChannels : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast=t,this.shaderKey="im2col_".concat(this.isChannelsLast)}return e.prototype.getUserCode=function(){var e=this.isChannelsLast?1:2,t=this.isChannelsLast?2:3,n=this.isChannelsLast?"coords[1]":"coords[2]",a=this.isChannelsLast?"coords[2]":"coords[1]",r=this.isChannelsLast?"getX(batch, xRow, xCol, ch)":"getX(batch, ch, xRow, xCol)";return"\n    ".concat(S("index")," {\n      let coords = getCoordsFromIndex(index);\n      if(index < uniforms.size) {\n        let batch = coords[0];\n        let row = ").concat(n,";\n        let col = ").concat(a,";\n        let offsetY = (row / uniforms.outWidth) * uniforms.strides[0] - uniforms.pads[0];\n        let xRow = offsetY + uniforms.dilations[0] * (col / uniforms.itemsPerBlockRow);\n        var value = 0.0;\n        if(xRow < uniforms.xShape[").concat(e,"] && xRow >= 0) {\n          let offsetX = (row % uniforms.outWidth) * uniforms.strides[1] -\n              uniforms.pads[1];\n          let xCol = offsetX + uniforms.dilations[1] * ((col %\n              uniforms.itemsPerBlockRow) / uniforms.inChannels);\n          let ch = col % uniforms.inChannels;\n          if(xCol < uniforms.xShape[").concat(t,"] && xCol >= 0) {\n            value = ").concat(r,";\n          }\n        }\n        setOutputAtIndex(index, value);\n      }\n    }\n   ")},e}();function na(e,t){var n=e.length;return n>=3?c(c([],u(e.slice(0,-3)),!1),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]],!1):!t&&1===n&&e[0]>1?[e[0],1]:null}function aa(e){var n,a,r=e.x,i=e.filter,o=e.convInfo,d=e.backend,l=e.bias,p=void 0===l?null:l,h=e.preluActivationWeights,f=void 0===h?null:h,m=e.leakyreluAlpha,g=void 0===m?0:m,v=e.activation,y=void 0===v?null:v,x=null!=p,b=null!=f,w="channelsLast"===o.dataFormat,C=w&&o.filterHeight===o.inHeight&&o.filterWidth===o.inWidth&&"VALID"===o.padInfo.type,k=t.env().getBool("WEBGPU_USE_NAIVE_CONV2D_DEBUG");if(!k&&(C||1===o.filterHeight&&1===o.filterWidth&&1===o.dilationHeight&&1===o.dilationWidth&&1===o.strideHeight&&1===o.strideWidth&&("SAME"===o.padInfo.type||"VALID"===o.padInfo.type)))return function(e){var t,n,a,r,i,o=e.x,u=e.filter,c=e.convInfo,d=e.backend,l=e.bias,p=void 0===l?null:l,h=e.preluActivationWeights,f=void 0===h?null:h,m=e.leakyreluAlpha,g=void 0===m?0:m,v=e.activation,y=void 0===v?null:v,x="channelsLast"===c.dataFormat,b=!x,w=[];if(x&&c.filterHeight===c.inHeight&&c.filterWidth===c.inWidth&&"VALID"===c.padInfo.type){var C=c.inHeight*c.inWidth*c.inChannels;a=he({inputs:{x:o},backend:d,attrs:{shape:[1,c.batchSize,C]}}),r=he({inputs:{x:u},backend:d,attrs:{shape:[1,C,c.outChannels]}})}else a=he({inputs:{x:o},backend:d,attrs:{shape:x?[c.batchSize,c.inHeight*c.inWidth,c.inChannels]:[c.batchSize,c.inChannels,c.inHeight*c.inWidth]}}),r=he({inputs:{x:u},backend:d,attrs:{shape:[1,c.inChannels,c.outChannels]}});w.push(a),w.push(r),null!=f&&null!=(i=na(f.shape,x))&&(f=he({inputs:{x:f},backend:d,attrs:{shape:i}}),w.push(f)),null!=p&&null!=(i=na(p.shape,x))&&(p=he({inputs:{x:p},backend:d,attrs:{shape:i}}),w.push(p));var k=me({a:x?a:r,b:x?r:a,transposeA:b,transposeB:!1,backend:d,bias:p,activation:y,preluActivationWeights:f,leakyreluAlpha:g}),S=he({inputs:{x:k},backend:d,attrs:{shape:c.outShape}});w.push(k);try{for(var I=s(w),R=I.next();!R.done;R=I.next()){var P=R.value;d.disposeData(P.dataId)}}catch(e){t={error:e}}finally{try{R&&!R.done&&(n=I.return)&&n.call(I)}finally{if(t)throw t.error}}return S}({x:r,filter:i,convInfo:o,backend:d,bias:p,activation:y,preluActivationWeights:f,leakyreluAlpha:g});var S,I=t.env().getNumber("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL"),R=I>-1?I:d.thresholdToIncreaseWorkgroups,P=o.batchSize*Math.ceil(o.outHeight*o.outWidth/32)*Math.ceil(o.outChannels/32);if(t.env().getBool("WEBGPU_CONV_SEPARATE_IM2COL_SHADER")||P<=R)return function(e){var t,n,a=e.x,r=e.filter,i=e.convInfo,o=e.backend,u=e.bias,c=void 0===u?null:u,d=e.preluActivationWeights,l=void 0===d?null:d,p=e.leakyreluAlpha,h=void 0===p?0:p,f=e.activation,m=void 0===f?null:f,g=i.filterWidth,v=i.filterHeight,y=i.inChannels,x=i.strideWidth,b=i.strideHeight,w=i.padInfo,C=i.outWidth,k=i.outHeight,S=i.dilationWidth,I=i.dilationHeight,R="channelsLast"===i.dataFormat,P=g*v*y,z=k*C,A=R?[i.batchSize,z,P]:[i.batchSize,P,z],N=new ta(A,R),D=[{type:"int32",data:[w.top,w.left]},{type:"int32",data:[b,x]},{type:"int32",data:[I,S]},{type:"int32",data:[C]},{type:"int32",data:[y*g]},{type:"int32",data:[y]}],F=o.runWebGPUProgram(N,[a],a.dtype,D),T=[];T.push(F);var _,L=he({inputs:{x:r},backend:o,attrs:{shape:[1,P,-1]}});T.push(L),null!=l&&null!=(_=na(l.shape,R))&&(l=he({inputs:{x:l},backend:o,attrs:{shape:_}}),T.push(l)),null!=c&&null!=(_=na(c.shape,R))&&(c=he({inputs:{x:c},backend:o,attrs:{shape:_}}),T.push(c));var W=me({a:R?F:L,b:R?L:F,transposeA:!R,transposeB:!1,backend:o,bias:c,activation:m,preluActivationWeights:l,leakyreluAlpha:h}),E=he({inputs:{x:W},backend:o,attrs:{shape:i.outShape}});T.push(W);try{for(var B=s(T),O=B.next();!O.done;O=B.next()){var U=O.value;o.disposeData(U.dataId)}}catch(e){t={error:e}}finally{try{O&&!O.done&&(n=B.return)&&n.call(B)}finally{if(t)throw t.error}}return E}({x:r,filter:i,convInfo:o,backend:d,bias:p,preluActivationWeights:f,leakyreluAlpha:g,activation:y});var z=[o.padInfo.top,o.padInfo.left],A=[{type:"int32",data:[o.filterHeight,o.filterWidth]},{type:"int32",data:c([],u(z),!1)},{type:"int32",data:[o.strideHeight,o.strideWidth]},{type:"int32",data:[o.dilationHeight,o.dilationWidth]}];if(k)S=new ea(o,x,y,b);else{var N=w?o.outHeight*o.outWidth:o.outChannels,D=w?o.outChannels:o.outHeight*o.outWidth,F=o.filterHeight*o.filterWidth*o.inChannels;A.push({type:"int32",data:[N]},{type:"int32",data:[D]},{type:"int32",data:[F]});var T=d.adapterInfo.isIntel();S=new $n(o,N,D,F,x,y,b,T)}var _=[],L=[r,i];x&&(w||1!==p.shape.length||(p=he({inputs:{x:p},backend:d,attrs:{shape:[p.shape[0],1,1]}}),_.push(p)),L.push(p)),b&&(w||1!==f.shape.length||(f=he({inputs:{x:f},backend:d,attrs:{shape:[f.shape[0],1,1]}}),_.push(f)),L.push(f)),"leakyrelu"===y&&(A.push({type:"float32",data:[g]}),S.uniforms+=" alpha : f32,");var W=d.runWebGPUProgram(S,L,r.dtype,A);try{for(var E=s(_),B=E.next();!B.done;B=E.next()){var O=B.value;d.disposeData(O.dataId)}}catch(e){n={error:e}}finally{try{B&&!B.done&&(a=E.return)&&a.call(E)}finally{if(n)throw n.error}}return W}var ra={kernelName:t.Conv2D,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.attrs,r=e.backend,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,d=a.dilations,l=a.dimRoundingMode,p=t.backend_util.convertConv2DDataFormat(c);return aa({x:i,filter:o,convInfo:t.backend_util.computeConv2DInfo(i.shape,o.shape,s,d,u,l,!1,p),backend:r})}},ia=function(){function e(e){this.variableNames=["dy","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>,",this.workgroupSize=[64,1,1],this.size=!1,this.isVec4=!1,this.workPerThread=1,this.outputShape=e.inShape,this.isChannelsLast="channelsLast"===e.dataFormat,this.isVec4=this.isChannelsLast&&e.outChannels%4==0&&e.inChannels%4==0,this.isVec4?(this.workPerThread=2,this.outputComponent=4,this.workgroupSize=[4,4,4],this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,[4,this.workPerThread,1])):(this.size=!0,this.workPerThread=1,this.workgroupSize=[64,1,1],this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize)),this.shaderKey="conv2DDerInput_".concat(this.isChannelsLast,"_").concat(this.isVec4,"_").concat(this.workPerThread)}return e.prototype.getUserCode=function(){var e=this.isChannelsLast?1:2,t=this.isChannelsLast?2:3,n=this.isChannelsLast?3:1,a="\n    ".concat(S()," {\n      let batch = i32(globalId.z) / uniforms.outShape[1];\n      let r = i32(globalId.z) % uniforms.outShape[1];\n      let c = i32(globalId.y) * ").concat(this.workPerThread,";\n      let d1 = i32(globalId.x) * 4;\n\n      let dyCorner = vec2<i32>(r, c) - uniforms.pads;\n\n      // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n      // ? = to be determined. : = across all values in that axis.\n      var dotProd: array<vec4<f32>, ").concat(this.workPerThread,">;\n      for (var i = 0; i < ").concat(this.workPerThread,"; i++) {\n        dotProd[i] = vec4<f32>(0.0);\n      }\n      for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {\n        let dyR = f32(dyCorner.x + wR) / f32(uniforms.strides.x);\n        let wRPerm = uniforms.filterDims.x - 1 - wR;\n        if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) ||\n            fract(dyR) > 0.0) {\n          continue;\n        }\n        let idyR = i32(dyR);\n\n        for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {\n          let dyC = f32(dyCorner.y + wC) / f32(uniforms.strides.y);\n          let dyC2 = f32(dyCorner.y + 1 + wC) / f32(uniforms.strides.y);\n          let wCPerm = uniforms.filterDims.y - 1 - wC;\n          var bDyCVal = true;\n          var bDyCVal2 = true;\n          if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||\n              fract(dyC) > 0.0) {\n            bDyCVal = false;\n          }\n          if (dyC2 < 0.0 || dyC2 >= f32(uniforms.outBackprop[2]) ||\n              fract(dyC2) > 0.0) {\n            bDyCVal2 = false;\n          }\n\n          let idyC = i32(dyC);\n          let idyC2 = i32(dyC2);\n          if (bDyCVal && bDyCVal2) {\n            let d2Length = uniforms.outBackprop[3];\n            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {\n              let wValue0 = getW(wRPerm, wCPerm, d1, d2);\n              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);\n              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);\n              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);\n              var xValue =  getDy(batch, idyR, idyC, d2);\n              let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                     dot(xValue, wValue1),\n                                     dot(xValue, wValue2),\n                                     dot(xValue, wValue3));\n              dotProd[0] = dotProd[0] + tmpval;\n              xValue = getDy(batch, idyR, idyC2, d2);\n              dotProd[1] = dotProd[1] + vec4<f32>(dot(xValue, wValue0),\n                                                  dot(xValue, wValue1),\n                                                  dot(xValue, wValue2),\n                                                  dot(xValue, wValue3));\n            }\n          } else if (bDyCVal) {\n            let d2Length = uniforms.outBackprop[3];\n            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {\n              let wValue0 = getW(wRPerm, wCPerm, d1, d2);\n              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);\n              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);\n              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);\n              var xValue =  getDy(batch, idyR, idyC, d2);\n              let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                     dot(xValue, wValue1),\n                                     dot(xValue, wValue2),\n                                     dot(xValue, wValue3));\n              dotProd[0] = dotProd[0] + tmpval;\n            }\n          } else if (bDyCVal2) {\n            let d2Length = uniforms.outBackprop[3];\n            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {\n              let wValue0 = getW(wRPerm, wCPerm, d1, d2);\n              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);\n              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);\n              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);\n              var xValue =  getDy(batch, idyR, idyC2, d2);\n              let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                     dot(xValue, wValue1),\n                                     dot(xValue, wValue2),\n                                     dot(xValue, wValue3));\n              dotProd[1] = dotProd[1] + tmpval;\n            }\n          }\n        }\n      }\n\n      for (var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n        let coords = vec4<i32>(batch, r, c + i, d1);\n        if (coordsInBounds4D(coords, uniforms.outShape)) {\n          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], dotProd[i]);\n        }\n      }\n    }\n    ");return this.isVec4?"\n    ".concat(a,"\n    "):"\n    ".concat(S("index")," {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d1 = coords[").concat(n,"];\n\n        let dyCorner = vec2<i32>(coords[").concat(e,"], coords[").concat(t,"]) - uniforms.pads;\n        let dyRCorner = dyCorner.x;\n        let dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {\n          let dyR = (f32(dyRCorner) + f32(wR)) / f32(uniforms.strides.x);\n          let wRPerm = uniforms.filterDims.x - 1 - wR;\n          if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) || fract(dyR) > 0.0 ||\n              wRPerm < 0) {\n            continue;\n          }\n          let idyR = i32(dyR);\n\n          for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {\n            let dyC = (f32(dyCCorner) + f32(wC)) / f32(uniforms.strides.y);\n            let wCPerm = uniforms.filterDims.y - 1 - wC;\n            if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||\n                fract(dyC) > 0.0 || wCPerm < 0) {\n              continue;\n            }\n            let idyC = i32(dyC);\n\n            for (var d2 = 0; d2 < uniforms.outBackprop[3]; d2 = d2 + 1) {\n              let xValue = ").concat(this.isChannelsLast?"getDy(batch, idyR, idyC, d2)":"getDy(batch, d2, idyR, idyC)",";\n              let wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd = dotProd + xValue * wValue;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  ")},e}(),oa=function(){function e(e){this.variableNames=["x","dy"],this.uniforms="pads : vec2<i32>, strides : vec2<i32>, batchSize : i32, outHeight : i32, outWidth : i32, inHeight : i32, inWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.filterShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast="channelsLast"===e.dataFormat,this.shaderKey="conv2DDerFilter_".concat(this.isChannelsLast)}return e.prototype.getUserCode=function(){return"\n    ".concat(S("index")," {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let wR = coords[0];\n        let wC = coords[1];\n        let d1 = coords[2];\n        let d2 = coords[3];\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var b = 0; b < uniforms.batchSize; b = b + 1) {\n          for (var yR = 0; yR < uniforms.outHeight; yR = yR + 1) {\n            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];\n            if (xR < 0 || xR >= uniforms.inHeight) {\n              continue;\n            }\n\n            for (var yC = 0; yC < uniforms.outWidth; yC = yC + 1) {\n              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];\n\n              if (xC < 0 || xC >= uniforms.inWidth) {\n                continue;\n              }\n\n              if (").concat(this.isChannelsLast,") {\n                let dyValue = getDy(b, yR, yC, d2);\n                let xValue = getX(b, xR, xC, d1);\n                dotProd = dotProd + xValue * dyValue;\n              } else {\n                let dyValue = getDy(b, d2, yR, yC);\n                let xValue = getX(b, d1, xR, xC);\n                dotProd = dotProd + xValue * dyValue;\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  ")},e}(),sa=function(){function e(e){this.variableNames=["x","dy"],this.uniforms="pads : vec3<i32>, strides : vec3<i32>, batchSize : i32, outDepth : i32,\n       outHeight : i32, outWidth : i32, inDepth : i32, inHeight : i32, inWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.filterShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3DDerFilter"}return e.prototype.getUserCode=function(){return"\n    ".concat(S("index")," {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let wF = coords.x;\n        let wR = coords.y;\n        let wC = coords.z;\n        let d1 = coords.w;\n        let d2 = coords.u;\n\n        var dotProd = 0.0;\n        for (var b = 0; b < uniforms.batchSize; b++) {\n          for (var yF = 0; yF < uniforms.outDepth; yF++) {\n            let xF = wF + yF * uniforms.strides[0] - uniforms.pads[0];\n            if (xF < 0 || xF >= uniforms.inDepth) {\n              continue;\n            }\n\n            for (var yR = 0; yR < uniforms.outHeight; yR++) {\n              let xR = wR + yR * uniforms.strides[1] - uniforms.pads[1];\n              if (xR < 0 || xR >= uniforms.inHeight) {\n                continue;\n              }\n\n              for (var yC = 0; yC < uniforms.outWidth; yC++) {\n                let xC = wC + yC * uniforms.strides[2] - uniforms.pads[2];\n                if (xC < 0 || xC >= uniforms.inWidth) {\n                  continue;\n                }\n\n                let dyValue = getDy(b, yF, yR, yC, d2);\n                let xValue = getX(b, xF, xR, xC, d1);\n                dotProd += xValue * dyValue;\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  ")},e}(),ua=function(){function e(e){this.variableNames=["dy","W"],this.uniforms="filterDims : vec3<i32>, pads : vec3<i32>, strides : vec3<i32>,\n      outDepth : i32, outHeight : i32, outWidth : i32, outChannels : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3DDerInput"}return e.prototype.getUserCode=function(){return"\n    ".concat(S("index")," {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords.x;\n        let d1 = coords.u;\n\n        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;\n        let dyFCorner = dyCorner.x;\n        let dyRCorner = dyCorner.y;\n        let dyCCorner = dyCorner.z;\n\n        var dotProd = 0.0;\n        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {\n          let dyF = f32(dyFCorner + wF) / f32(uniforms.strides[0]);\n          if (dyF < 0.0 || dyF >= f32(uniforms.outDepth) || fract(dyF) > 0.0) {\n            continue;\n          }\n          let idyF = i32(dyF);\n\n          let wFPerm = uniforms.filterDims[0] - 1 - wF;\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);\n\n            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n              continue;\n            }\n            let idyR = i32(dyR);\n\n            let wRPerm = uniforms.filterDims[1] - 1 - wR;\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);\n\n              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n                continue;\n              }\n              let idyC = i32(dyC);\n\n              let wCPerm = uniforms.filterDims[2] - 1 - wC;\n\n              for (var d2 = 0; d2 < uniforms.outChannels; d2++) {\n                let xValue = getDy(batch, idyF, idyR, idyC, d2);\n                let wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  ")},e}();var ca={kernelName:t.Conv2DBackpropFilter,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.dy,s=r.strides,u=r.pad,c=r.dataFormat,d=r.dimRoundingMode,l=r.filterShape,p=t.backend_util.convertConv2DDataFormat(c),h=t.backend_util.computeConv2DInfo(i.shape,l,s,1,u,d,!1,p),f=new oa(h),m=[{type:"int32",data:[h.padInfo.top,h.padInfo.left]},{type:"int32",data:[h.strideHeight,h.strideWidth]},{type:"int32",data:[h.batchSize]},{type:"int32",data:[h.outHeight]},{type:"int32",data:[h.outWidth]},{type:"int32",data:[h.inHeight]},{type:"int32",data:[h.inWidth]}];return a.runWebGPUProgram(f,[i,o],i.dtype,m)}};var da=function(){function e(e){this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=e.inShape,t.util.assert("channelsLast"===e.dataFormat,(function(){return"TODO: NCHW is unimplemented"})),this.isVec4=e.inChannels%4==0&&e.outChannels%4==0,this.dispatchLayout={x:[3],y:[1,2],z:[0]},this.workgroupSize=E(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=B(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread),this.isVec4&&(this.outputComponent=4,this.variableComponents=[4,1]),this.shaderKey="conv2DDerInputMM_".concat(this.isVec4,"_").concat(this.elementsPerThread)}return e.prototype.getUserCode=function(){var e=this.isVec4?ne(this.elementsPerThread,this.workgroupSize):re(this.elementsPerThread,this.workgroupSize);return"\n    ".concat(function(e){void 0===e&&(e=4);var t="\n      let outRow = row / uniforms.outShape[2];\n      let outCol = row % uniforms.outShape[2];\n\n      let WRow = col / (uniforms.filterDims[1] * uniforms.outBackprop[3]);\n      let WCol = col / uniforms.outBackprop[3] % uniforms.filterDims[1];\n      let xR = f32(outRow - uniforms.pads[0] + WRow) / f32(uniforms.strides[0]);\n      let xC = f32(outCol - uniforms.pads[1] + WCol) / f32(uniforms.strides[1]);\n      if (xR < 0.0 || xR >= f32(uniforms.outBackprop[1]) || fract(xR) > 0.0) {\n        return ".concat(w(e),"(0.0);\n      }\n      if (xC < 0.0 || xC >= f32(uniforms.outBackprop[2]) || fract(xC) > 0.0) {\n        return ").concat(w(e),"(0.0);\n      }\n      let coord = vec4<i32>(\n          batch,\n          i32(xR),\n          i32(xC),\n          col % uniforms.outBackprop[3]);\n      return x[getIndexFromCoords4D(coord, uniforms.xShape)/").concat(e,"];"),n="if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n        ".concat(t,"\n      }\n      return ").concat(w(e),"(0.0);");return"\n  fn mm_readA(batch: i32, row : i32, col : i32) -> ".concat(w(e)," {\n    ").concat(n,"\n  }\n\n  fn mm_readB(batch: i32, row : i32, col : i32) -> ").concat(w(e)," {\n    let coordX = uniforms.filterDims.x - 1 -\n        row / (uniforms.filterDims[1] * uniforms.outBackprop[3]);\n    let coordY = uniforms.filterDims.y - 1 -\n        (row / uniforms.outBackprop[3]) % uniforms.filterDims[1];\n    if (row < uniforms.dimInner && col < uniforms.dimBOuter &&\n        coordX >= 0 && coordY >= 0) {\n      let rowInner = row % uniforms.outBackprop[3];\n      let coord = vec4<i32>(coordX, coordY, col, rowInner);\n      ").concat(function(e){switch(e){case 1:return"return W[getIndexFromCoords4D(coord, uniforms.wShape)];";case 4:return"\n            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);\n            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);\n            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);\n            let v0 = W[getIndexFromCoords4D(coord, uniforms.wShape)];\n            let v1 = W[getIndexFromCoords4D(coord1, uniforms.wShape)];\n            let v2 = W[getIndexFromCoords4D(coord2, uniforms.wShape)];\n            let v3 = W[getIndexFromCoords4D(coord3, uniforms.wShape)];\n            return vec4<f32>(v0, v1, v2, v3);\n            ";default:throw new Error("innerElementSize ".concat(e," is not supported."))}}(e),"\n    }\n    return ").concat(w(e),"(0.0);\n  }\n\n  fn mm_write(batch: i32, row : i32, col : i32, valueInput : ").concat(w(e),") {\n    if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {\n      var value = valueInput;\n      let outCoord = vec4<i32>(\n          batch,\n          row / uniforms.outShape[2],\n          row % uniforms.outShape[2],\n          col);\n      result[getIndexFromCoords4D(outCoord, uniforms.outShape)/").concat(e,"] = value;\n    }\n  }")}(this.isVec4?4:1),"\n    ").concat(e,"\n    ")},e}();var la={kernelName:t.Conv2DBackpropInput,backendName:"webgpu",kernelFunc:function(e){var n,a=e.inputs,r=e.backend,i=e.attrs,o=a.dy,s=a.filter,u=i.inputShape,c=i.strides,d=i.pad,l=i.dataFormat,p=i.dimRoundingMode,h=t.backend_util.convertConv2DDataFormat(l),f=t.backend_util.computeConv2DInfo(u,s.shape,c,1,d,p,!1,h),m=[{type:"int32",data:[f.filterHeight,f.filterWidth]},{type:"int32",data:[f.filterHeight-1-f.padInfo.top,f.filterWidth-1-f.padInfo.left]},{type:"int32",data:[f.strideHeight,f.strideWidth]},{type:"int32",data:[f.batchSize,f.outHeight,f.outWidth,f.outChannels]}];if(t.env().getBool("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE")||"channelsLast"!==f.dataFormat)n=new ia(f);else{n=new da(f);var g=f.inHeight*f.inWidth,v=f.inChannels,y=f.filterHeight*f.filterWidth*f.outChannels;m.push({type:"uint32",data:[g]},{type:"uint32",data:[v]},{type:"uint32",data:[y]})}return r.runWebGPUProgram(n,[o,s],"float32",m)}},pa=function(){function e(e){this.variableNames=["x","W"],this.uniforms="filterDims: vec3<i32>, pads: vec3<i32>, strides: vec3<i32>, dilations: vec3<i32>,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.outShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3dnaive"}return e.prototype.getUserCode=function(){return"\n    ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let batch = coords.x;\n        let d2 = coords.u;\n\n        let xFRCCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;\n        let xFCorner = xFRCCorner.x;\n        let xRCorner = xFRCCorner.y;\n        let xCCorner = xFRCCorner.z;\n\n        let inputDepthNearestVec4 = (uniforms.xShape.u / 4) * 4;\n        let inputDepthVec4Remainder = uniforms.xShape.u % 4;\n\n        var dotProd = 0.0;\n        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {\n          let xF = xFCorner + wF * uniforms.dilations[0];\n          if (xF < 0 || xF >= uniforms.xShape.y) {\n            continue;\n          }\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let xR = xRCorner + wR * uniforms.dilations[1];\n            if (xR < 0 || xR >= uniforms.xShape.z) {\n              continue;\n            }\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let xC = xCCorner + wC * uniforms.dilations[2];\n              if (xC < 0 || xC >= uniforms.xShape.w) {\n                continue;\n              }\n\n              for (var d1 = 0; d1 < inputDepthNearestVec4; d1 += 4) {\n                let xValues = vec4<f32>(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                let wValues = vec4<f32>(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (inputDepthVec4Remainder == 1) {\n                dotProd += getX(batch, xF, xR, xC, inputDepthNearestVec4) *\n                  getW(wF, wR, wC, inputDepthNearestVec4, d2);\n              } else if (inputDepthVec4Remainder == 2) {\n                let xValues = vec2<f32>(\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4),\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1)\n                );\n                let wValues = vec2<f32>(\n                  getW(wF, wR, wC, inputDepthNearestVec4, d2),\n                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (inputDepthVec4Remainder == 3) {\n                let xValues = vec3<f32>(\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4),\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2)\n                );\n                let wValues = vec3<f32>(\n                  getW(wF, wR, wC, inputDepthNearestVec4, d2),\n                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2),\n                  getW(wF, wR, wC, inputDepthNearestVec4 + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }")},e}();var ha={kernelName:t.Conv3D,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,s=r.strides,d=r.pad,l=r.dilations,p=t.backend_util.computeConv3DInfo(i.shape,o.shape,s,l,d),h=[p.padInfo.front,p.padInfo.top,p.padInfo.left],f=[{type:"int32",data:[p.filterDepth,p.filterHeight,p.filterWidth]},{type:"int32",data:c([],u(h),!1)},{type:"int32",data:[p.strideDepth,p.strideHeight,p.strideWidth]},{type:"int32",data:[p.dilationDepth,p.dilationHeight,p.dilationWidth]}],m=new pa(p),g=t.upcastType(i.dtype,o.dtype);return a.runWebGPUProgram(m,[i,o],g,f)}};var fa={kernelName:t.Conv3DBackpropFilterV2,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.dy,s=r.strides,u=r.pad,c=r.filterShape,d=t.backend_util.computeConv3DInfo(i.shape,c,s,1,u),l=new sa(d),p=[{type:"int32",data:[d.padInfo.front,d.padInfo.top,d.padInfo.left]},{type:"int32",data:[d.strideDepth,d.strideHeight,d.strideWidth]},{type:"int32",data:[d.batchSize]},{type:"int32",data:[d.outDepth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]},{type:"int32",data:[d.inDepth]},{type:"int32",data:[d.inHeight]},{type:"int32",data:[d.inWidth]}];return a.runWebGPUProgram(l,[i,o],o.dtype,p)}};var ma,ga={kernelName:t.Conv3DBackpropInputV2,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.dy,o=n.filter,s=r.strides,u=r.pad,c=r.inputShape,d=t.backend_util.computeConv3DInfo(c,o.shape,s,1,u),l=new ua(d),p=[{type:"int32",data:[d.filterDepth,d.filterHeight,d.filterWidth]},{type:"int32",data:[d.filterDepth-1-d.padInfo.front,d.filterHeight-1-d.padInfo.top,d.filterWidth-1-d.padInfo.left]},{type:"int32",data:[d.strideDepth,d.strideHeight,d.strideWidth]},{type:"int32",data:[d.outDepth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]},{type:"int32",data:[d.outChannels]}];return a.runWebGPUProgram(l,[i,o],i.dtype,p)}},va=Se({opType:q.COS}),ya={kernelName:t.Cos,backendName:"webgpu",kernelFunc:va},xa=Se({opType:q.COSH}),ba={kernelName:t.Cosh,backendName:"webgpu",kernelFunc:xa},wa=function(){function e(e,t,n,a){this.variableNames=["Image","Boxes","BoxInd"],this.uniforms="extrapolationValue : f32,",this.workgroupSize=[64,1,1],this.size=!0;var r=u(t,1)[0];this.outputShape=[r,n[0],n[1],e],this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.methodId="bilinear"===a?1:0,this.cropHeightBiggerThan1=this.outputShape[1]>1,this.cropWidthBiggerThan1=this.outputShape[2]>1,this.shaderKey="cropAndResize_".concat(this.methodId,"_").concat(this.cropHeightBiggerThan1,"_").concat(this.cropWidthBiggerThan1)}return e.prototype.getUserCode=function(){var e=u(["f32(uniforms.imageShape[1] - 1)","f32(uniforms.imageShape[2] - 1)"],2),t=e[0],n=e[1],a=u(this.cropHeightBiggerThan1?["(".concat(t," / f32(uniforms.outShape[1] - 1))"),"(y2-y1) * height_ratio","y1*".concat(t," + f32(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(t)],3),r=a[0],i=a[1],o=a[2],s=u(this.cropWidthBiggerThan1?["(".concat(n," / f32(uniforms.outShape[2] - 1))"),"(x2-x1) * width_ratio","x1*".concat(n," + f32(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(n)],3),c=s[0],d=s[1],l=s[2];return"\n    ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let height_ratio = f32(").concat(r,");\n        let width_ratio = f32(").concat(c,");\n        let b = coords[0];\n        let y = coords[1];\n        let x = coords[2];\n        let d = coords[3];\n        // get box vals\n        let y1 = getBoxes(b, 0);\n        let x1 = getBoxes(b, 1);\n        let y2 = getBoxes(b, 2);\n        let x2 = getBoxes(b, 3);\n        // get image in batch index\n        let bInd = i32(round(getBoxInd(b)));\n        if(bInd < 0 || bInd >= uniforms.outShape[0]) {\n          return;\n        }\n        let height_scale = ").concat(i,";\n        let width_scale = ").concat(d,";\n        let in_y = ").concat(o,";\n        if( in_y < 0.0 || in_y > ").concat(t," ) {\n          setOutputAtIndex(index, uniforms.extrapolationValue);\n          return;\n        }\n        let in_x = ").concat(l,";\n        if( in_x < 0.0 || in_x > ").concat(n," ) {\n          setOutputAtIndex(index, uniforms.extrapolationValue);\n          return;\n        }\n        let sourceFracIndexCR = vec2<f32>(in_x,in_y);\n        if(").concat(this.methodId," == 1) {\n          // Compute the four integer indices.\n          let sourceFloorCR = vec2<i32>(sourceFracIndexCR);\n          let sourceCeilCR = vec2<i32>(ceil(sourceFracIndexCR));\n          let topLeft = getImage(bInd, sourceFloorCR.y, sourceFloorCR.x, d);\n          let bottomLeft = getImage(bInd, sourceCeilCR.y, sourceFloorCR.x, d);\n          let topRight = getImage(bInd, sourceFloorCR.y, sourceCeilCR.x, d);\n          let bottomRight = getImage(bInd, sourceCeilCR.y, sourceCeilCR.x, d);\n          let fracCR = sourceFracIndexCR - vec2<f32>(sourceFloorCR);\n          let top = topLeft + (topRight - topLeft) * fracCR.x;\n          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          let newValue = top + (bottom - top) * fracCR.y;\n          setOutputAtIndex(index, newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          let sourceNearestCR = vec2<i32>(floor(\n            sourceFracIndexCR + vec2<f32>(0.5,0.5)));\n          let newValue = getImage(\n            bInd, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    }\n    ")},e}(),Ca={kernelName:t.CropAndResize,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.image,i=t.boxes,o=t.boxInd,s=a.cropSize,u=a.method,c=a.extrapolationValue,d=new wa(r.shape[3],i.shape,s,u),l=[{type:"float32",data:[c]}];return n.runWebGPUProgram(d,[r,i,o],"float32",l)}};!function(e){e.Prod="*",e.Sum="+"}(ma||(ma={}));var ka=function(){function e(e,t,n,a){this.variableNames=["x"],this.uniforms="index : f32,",this.size=!0,this.workgroupSize=[128,1,1],this.outputShape=t,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.exclusive=n,this.reverse=a,this.op=e,this.shaderKey="cum_".concat(this.op,"_").concat(this.exclusive,"_").concat(this.reverse)}return e.prototype.getUserCode=function(){var e=this.outputShape.length,t=this.op===ma.Prod?"1.0":"0.0",n=this.exclusive?t:"getX(".concat(Sa(e,"coords",this.op),")"),a=this.outputShape[this.outputShape.length-1],r="",i="";return this.exclusive?(r=this.reverse?"end != ".concat(a-1):"end != 0",i=this.reverse?"end + 1":"end - 1"):(r=this.reverse?"end + pow2 < ".concat(a):"end >= pow2",i=this.reverse?"end + pow2":"end - pow2"),"\n      ".concat(S("index")," {\n       if (index < uniforms.size) {\n         var coords = getCoordsFromIndex(index);\n\n         let end = ").concat(Ia(e,"coords",this.op),";\n         var val = ").concat(n,";\n         let pow2 = i32(pow(2.0, uniforms.index));\n         if (").concat(r,") {\n           let idx = ").concat(i,";\n           ").concat(Ia(e,"coords",this.op)," = idx;\n           val ").concat(this.op,"= getX(").concat(Sa(e,"coords",this.op),");\n         }\n         setOutputAtIndex(index, val);\n       }\n      }\n    ")},e}();function Sa(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function Ia(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function Ra(e,n,a,r,i,o){var s=n.shape.length,u=t.backend_util.getAxesPermutation([r],s),c=n;null!=u&&(c=Vt({inputs:{x:n},backend:a,attrs:{perm:u}}));var d=t.backend_util.getInnerMostAxes(1,s)[0];if(d!==s-1)throw new Error("WebGPU cumprod shader expects an inner-most axis=".concat(n.shape.length-1," ")+"but got axis=".concat(r));for(var l=c.shape[d],p=xe({inputs:{x:c},backend:a}),h=0;h<=Math.ceil(Math.log2(l))-1;h++){var f=new ka(e,c.shape,!1,o),m=p,g=[{type:"float32",data:[h]}];p=a.runWebGPUProgram(f,[p],p.dtype,g),a.disposeData(m.dataId)}if(i){f=new ka(e,c.shape,i,o),m=p,g=[{type:"float32",data:[0]}];p=a.runWebGPUProgram(f,[p],p.dtype,g),a.disposeData(m.dataId)}if(null!=u){var v=Vt({inputs:{x:p},backend:a,attrs:{perm:t.backend_util.getUndoAxesPermutation(u)}});return a.disposeData(p.dataId),a.disposeData(c.dataId),v}return p}var Pa={kernelName:t.Cumprod,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.exclusive,s=a.reverse;return Ra(ma.Prod,r,n,i,o,s)}};var za={kernelName:t.Cumsum,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.axis,o=a.exclusive,s=a.reverse;return Ra(ma.Sum,r,n,i,o,s)}};var Aa={kernelName:t.DenseBincount,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.weights,s=r.size,u=r.binaryOutput,c=1===i.shape.length,d=t.util.sizeFromShape(o.shape)>0,l=o.dtype,p=c?[i.shape[0]]:[i.shape[0],i.shape[1]],h=le({backend:a,attrs:{shape:c?[s]:[i.shape[0],s],value:0,dtype:l}}),f=new Nn(p,d,u),m=[{type:"int32",data:[s]}],g=d?[i,o]:[i];return a.runWebGPUProgram(f,g,l,m,h)}},Na=function(){function e(e,t){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.uniforms="blockSize : i32,",this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthToSpace_".concat(t),this.dataFormat=t}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let h = ").concat(this.getHeightCoordString(),";\n          let w = ").concat(this.getWidthCoordString(),";\n          let d = ").concat(this.getDepthCoordString(),";\n\n          let in_h = h / uniforms.blockSize;\n          let offset_h = h % uniforms.blockSize;\n          let in_w = w / uniforms.blockSize;\n          let offset_w = w % uniforms.blockSize;\n          let offset_d = (offset_h * uniforms.blockSize + offset_w) *\n            ").concat(this.getOutputDepthSize(),";\n          let in_d = d + offset_d;\n\n          let rlt = ").concat(this.getInputSamplingString(),";\n          setOutputAtIndex(index, rlt);\n        }\n      }")},e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?"uniforms.outShape[3]":"uniforms.outShape[1]"},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}();var Da={kernelName:t.DepthToSpace,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=a.blockSize,o=a.dataFormat,s=r.shape[0],u=("NHWC"===o?r.shape[1]:r.shape[2])*i,c=("NHWC"===o?r.shape[2]:r.shape[3])*i,d=("NHWC"===o?r.shape[3]:r.shape[1])/(i*i),l=[{type:"int32",data:[i]}],p=new Na("NHWC"===o?[s,u,c,d]:[s,d,u,c],o);return n.runWebGPUProgram(p,[r],r.dtype,l)}},Fa=function(){function e(e,t,n,a,r,i){void 0===a&&(a=!1),void 0===r&&(r=null),void 0===i&&(i=!1),this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>,",this.workgroupSize=[16,16,1],this.outputShape=e,this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),a&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.addBias=a,this.activation=r,this.hasPreluActivation=i,this.filterHeight=t,this.filterWidth=n,this.shaderKey="depthwiseNCHW_".concat(this.activation,"_").concat(this.filterHeight,"_").concat(this.filterWidth)}return e.prototype.getUserCode=function(){var e=this.filterWidth*this.filterHeight,t=this.workgroupSize[0]*this.workgroupSize[1]*this.workgroupSize[2],n=this.workgroupSize[1]+this.filterHeight-1,a=this.workgroupSize[0]+this.filterWidth-1;return"\n      ".concat(J(this.activation,this.hasPreluActivation,!1,4),"\n\n      var<workgroup> mm_Asub : array<array<f32, ").concat(a,">, ").concat(n,">;\n      var<workgroup> mm_Bsub : array<array<f32, ").concat(this.filterWidth,">, ").concat(this.filterHeight,">;\n      fn readX(batch : i32, channel : i32, row : i32, col : i32) -> f32 {\n        var value = 0.0;\n        if (row >=0 && row < uniforms.inDims[0] && col >=0 && col < uniforms.inDims[1])\n        {\n          value = getX(batch, channel, row, col);\n        }\n        return value;\n      }\n\n      ").concat(S()," {\n        let coords = getOutputCoords();\n        let batch = coords[0];\n        let xRCCorner = vec2<i32>(coords.zw) - uniforms.pads;\n        let channelMul = uniforms.wShape[3];\n        let d1 = coords[1] / channelMul;\n        let q = coords[1] % channelMul;\n\n        let inputRowStart = xRCCorner.x;\n        let inputColStart = xRCCorner.y;\n\n        let localRow = i32(localId.y);\n        let localCol = i32(localId.x);\n\n        // Load one tile of X into local memory.\n        for (var inputRow = localRow; inputRow < ").concat(n,"; inputRow = inputRow + ").concat(this.workgroupSize[1],") {\n          for (var inputCol = localCol; inputCol < ").concat(a,"; inputCol = inputCol + ").concat(this.workgroupSize[0],") {\n            let rowOffset = inputRow - localRow;\n            let colOffset = inputCol - localCol;\n            mm_Asub[inputRow][inputCol] = readX(batch, d1, inputRowStart + rowOffset, inputColStart + colOffset);\n          }\n        }\n\n        // Load one tile of W into local memory.\n        var wIndex = i32(localIndex);\n        ").concat(e<t?"if (wIndex < ".concat(e,")"):"for(; wIndex < ".concat(e,"; wIndex = wIndex + ").concat(t,")"),"\n\n        {\n          let wRow = wIndex / ").concat(this.filterWidth,";\n          let wCol = wIndex % ").concat(this.filterWidth,";\n          mm_Bsub[wRow][wCol] = getW(wRow, wCol, d1, q);\n        }\n\n        workgroupBarrier();\n\n        var value = 0.0;\n        for (var wR = 0; wR < ").concat(this.filterHeight,"; wR = wR + 1) {\n          for (var wC = 0; wC < ").concat(this.filterWidth,"; wC = wC + 1) {\n            let xVal = mm_Asub[localRow + wR][localCol + wC];\n            let wVal = mm_Bsub[wR][wC];\n            value = fma(xVal, wVal, value);\n          }\n        }\n        ").concat($(this.addBias,this.activation),"\n        if (coordsInBounds4D(coords, uniforms.outShape)) {\n          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n        }\n      }\n    ")},e}(),Ta=function(){function e(e,n,a,r){void 0===n&&(n=!1),void 0===a&&(a=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>, virtualWidth : i32,",this.workgroupSize=[64,1,1],this.workPerThread=4,this.outputComponent=4,this.outputShape=e.outShape,this.virtualWidth=Math.ceil(this.outputShape[2]/this.workPerThread)*this.workPerThread;var i=[this.outputShape[0],this.outputShape[1],this.virtualWidth,this.outputShape[3]];this.dispatchLayout=O(i),this.dispatch=L(this.dispatchLayout,i,this.workgroupSize,[this.outputComponent*this.workPerThread,1,1]),t.util.assert("channelsLast"===e.dataFormat,(function(){return"TODO: NCHW is unimplemented"})),n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.convInfo=e,this.addBias=n,this.activation=a,this.hasPreluActivation=r,this.shaderKey="depthwiseVec4_".concat(a,"_").concat(this.convInfo.filterHeight,"_").concat(this.convInfo.filterWidth,"_").concat(this.convInfo.strideHeight,"_").concat(this.convInfo.strideWidth,"_").concat(this.workPerThread)}return e.prototype.getUserCode=function(){var e=(this.workPerThread-1)*this.convInfo.strideWidth+this.convInfo.filterWidth,t=this.convInfo.strideHeight,n=this.convInfo.strideWidth;return"\n      ".concat(J(this.activation,this.hasPreluActivation,!0,4),"\n      fn readX(batch : i32, row : i32, col : i32, channel : i32) -> vec4<f32> {\n        var value = vec4<f32>(0.0);\n        if (col >=0 && col < uniforms.inDims[1]) {\n          value = getX(batch, row, col, channel);\n        }\n        return value;\n      }\n\n      ").concat(S("index")," {\n        let width0 = uniforms.outShape[3] / ").concat(this.outputComponent,";\n        let d1 = (index % width0) * ").concat(this.outputComponent,";\n        var index1 = index / width0;\n        let width1 = uniforms.virtualWidth / ").concat(this.workPerThread,";\n        let c = (index1 % width1) * ").concat(this.workPerThread,";\n        index1 = index1 / width1;\n        let r = index1 % uniforms.outShape[1];\n        let batch = index1 / uniforms.outShape[1];\n\n        let xRCCorner = vec2<i32>(r, c) * vec2<i32>(").concat(t,", ").concat(n,") - uniforms.pads;\n\n        let xRCorner = xRCCorner.x;\n        let xCCorner = xRCCorner.y;\n        var xVals : array<vec4<f32>, ").concat(e,">;\n        var dotProd : array<vec4<f32>, ").concat(this.workPerThread,">;\n        for (var i = 0; i < ").concat(this.workPerThread,"; i++) {\n          dotProd[i] = vec4<f32>(0.0);\n        }\n\n        // Use constant instead of uniform can give better performance.\n        for (var wR = 0; wR < ").concat(this.convInfo.filterHeight,"; wR = wR + 1) {\n          let xR = xRCorner + wR;\n          if (xR >=0 && xR < uniforms.inDims[0]) {\n            for (var i = 0; i < ").concat(e,"; i++) {\n              xVals[i] = readX(batch, xR, xCCorner + i, d1);\n            }\n            for (var wC = 0; wC < ").concat(this.convInfo.filterWidth,"; wC = wC + 1) {\n              let wValue = getW(wR, wC, d1, 0);\n              for (var i = 0; i < ").concat(this.workPerThread,"; i++) {\n                dotProd[i] = fma(xVals[i * ").concat(n," + wC], wValue, dotProd[i]);\n              }\n            }\n          }\n        }\n\n        for (var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let coords = vec4<i32>(batch, r, c + i, d1);\n          if (coordsInBounds4D(coords, uniforms.outShape)) {\n            var value = dotProd[i];\n            ").concat($(this.addBias,this.activation),"\n            setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n          }\n        }\n      }\n    ")},e}(),_a=function(){function e(e,t,n,a){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===a&&(a=!1),this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>, filterHeight : i32,\n      filterWidth : i32, strides : vec2<i32>, dilations : vec2<i32>,",this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=e.outShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast="channelsLast"===e.dataFormat,t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.convInfo=e,this.addBias=t,this.activation=n,this.hasPreluActivation=a,this.shaderKey="depthwise_".concat(this.activation,"_").concat(this.isChannelsLast)}return e.prototype.getUserCode=function(){var e=this.isChannelsLast?"getX(batch, xR, xC, d1);":"getX(batch, d1, xR, xC);";return"\n      ".concat(J(this.activation,this.hasPreluActivation,!1,4),"\n\n      ").concat(S("index")," {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let batch = coords[0];\n          let xRCCorner = vec2<i32>(coords.").concat(this.isChannelsLast?"yz":"zw",") * uniforms.strides - uniforms.pads;\n          let d2 = coords[").concat(this.isChannelsLast?3:1,"];\n          let channelMul = uniforms.wShape[3];\n          let d1 = d2 / channelMul;\n          let q = d2 % channelMul;\n\n          let inputRowStart = xRCCorner.x;\n          let inputColStart = xRCCorner.y;\n          let inputRowEnd = inputRowStart + uniforms.filterHeight *\n              uniforms.dilations[0];\n          let inputColEnd = inputColStart + uniforms.filterWidth *\n              uniforms.dilations[1];\n\n          // Convolve x(?, ?, d1)|x(d1, ?, ?) with w(:, :, d1, q) to get\n          // y(yR, yC, d2)|y(d2, yR, yC). ? = to be determined. : = across all\n          // values in that axis. x(?, ?, d1) and y(yR, yC, d2) is for NHWC.\n          // x(d1, ?, ?) and y(d2, yR, yC) is for NCHW.\n          var value = 0.0;\n\n          // Extract if checking out of for loop for performance.\n          if (inputRowStart >= 0 && inputColStart >= 0 &&\n            inputRowEnd < uniforms.inDims[0] &&\n                inputColEnd < uniforms.inDims[1]) {\n              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {\n                let xR = inputRowStart + wR * uniforms.dilations[0];\n\n                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {\n                  let xC = inputColStart + wC * uniforms.dilations[1];\n\n                  let xVal = ").concat(e,";\n                  let wVal = getW(wR, wC, d1, q);\n                  value = value + xVal * wVal;\n                }\n              }\n            } else {\n              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {\n                let xR = inputRowStart + wR * uniforms.dilations[0];\n\n                if (xR < 0 || xR >= uniforms.inDims[0]) {\n                  continue;\n                }\n\n                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {\n                  let xC = inputColStart + wC * uniforms.dilations[1];\n\n                  if (xC < 0 || xC >= uniforms.inDims[1]) {\n                    continue;\n                  }\n\n                  let xVal = ").concat(e,";\n                  let wVal = getW(wR, wC, d1, q);\n                  value = value + xVal * wVal;\n                }\n              }\n            }\n            ").concat($(this.addBias,this.activation),"\n          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n        }\n      }\n    ")},e}();var La={kernelName:t.DepthwiseConv2dNative,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,s=r.strides,u=r.pad,c=r.dataFormat,d=r.dilations,l=r.dimRoundingMode,p=t.backend_util.convertConv2DDataFormat(c),h=d;null==h&&(h=[1,1]);var f,m=t.backend_util.computeConv2DInfo(i.shape,o.shape,s,h,u,l,!0,p),g=[{type:"int32",data:[m.padInfo.top,m.padInfo.left]},{type:"int32",data:[m.inHeight,m.inWidth]}],v="channelsLast"===m.dataFormat;return!v&&m.inHeight>16&&m.inWidth>16&&1===m.strideHeight&&1===m.strideWidth&&1===m.dilationWidth&&1===m.dilationHeight&&m.inChannels===m.outChannels?f=new Fa(m.outShape,m.filterHeight,m.filterWidth):v&&m.outHeight>4&&m.outWidth>4&&m.strideWidth<=2&&m.inChannels===m.outChannels&&1===m.dilationHeight&&1===m.dilationWidth&&m.inChannels%4==0?(f=new Ta(m),g.push({type:"int32",data:[f.virtualWidth]})):(f=new _a(m),g.push({type:"int32",data:[m.filterHeight]},{type:"int32",data:[m.filterWidth]},{type:"int32",data:[m.strideHeight,m.strideWidth]},{type:"int32",data:[m.dilationHeight,m.dilationWidth]})),a.runWebGPUProgram(f,[i,o],i.dtype,g)}},Wa=function(){function e(e){this.variableNames=["x","dy"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>, outHeight : i32,\n      outWidth : i32, inHeight : i32, inWidth : i32, batchSize : i32, channelMul : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.filterShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthwise_conv2d_backprop_filter"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let wR = coords[0];\n        let wC = coords[1];\n        let d1 = coords[2];\n        let dm = coords[3];\n        let d2 = d1 * uniforms.channelMul + dm;\n\n        var dotProd = 0.0;\n        for (var b = 0; b < uniforms.batchSize; b++) {\n          for (var yR = 0; yR < uniforms.outHeight; yR++) {\n            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];\n\n            if (xR < 0 || xR >= uniforms.inHeight) {\n              continue;\n            }\n\n            for (var yC = 0; yC < uniforms.outWidth; yC++) {\n              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];\n\n              if (xC < 0 || xC >= uniforms.inWidth) {\n                continue;\n              }\n\n              let dyValue = getDy(b, yR, yC, d2);\n              let xValue = getX(b, xR, xC, d1);\n              dotProd += xValue * dyValue;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    ")},e}(),Ea=function(){function e(e){this.variableNames=["dy","W"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>,\n       outHeight : i32, outWidth : i32, channelMul : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthwise_conv2d_backprop_input"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d1 = coords[3];\n        let dyCorner = coords.yz - uniforms.pads;\n        let dyRCorner = dyCorner.x;\n        let dyCCorner = dyCorner.y;\n\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {\n          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);\n\n          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n            continue;\n          }\n\n          let idyR = i32(dyR);\n          let wRPerm = uniforms.filterDims[0] - 1 - wR;\n\n          for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {\n            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);\n\n            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n              continue;\n            }\n\n            let idyC = i32(dyC);\n            let wCPerm = uniforms.filterDims[1] - 1 - wC;\n\n            for (var dm = 0; dm < uniforms.channelMul; dm++) {\n              let d2 = d1 * uniforms.channelMul + dm;\n              let xValue = getDy(batch, idyR, idyC, d2);\n              let wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    ")},e}();var Ba={kernelName:t.DepthwiseConv2dNativeBackpropFilter,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.dy,s=r.strides,u=r.dilations,c=r.pad,d=r.dimRoundingMode,l=r.filterShape,p=t.backend_util.computeConv2DInfo(i.shape,l,s,u,c,d,!0),h=new Wa(p),f=[{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.padInfo.top,p.padInfo.left]},{type:"int32",data:[p.filterHeight,p.filterWidth]},{type:"int32",data:[p.outHeight]},{type:"int32",data:[p.outWidth]},{type:"int32",data:[p.inHeight]},{type:"int32",data:[p.inWidth]},{type:"int32",data:[p.batchSize]},{type:"int32",data:[p.outChannels/p.inChannels]}];return a.runWebGPUProgram(h,[i,o],"float32",f)}};var Oa={kernelName:t.DepthwiseConv2dNativeBackpropInput,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.dy,o=n.filter,s=r.strides,u=r.dilations,c=r.pad,d=r.dimRoundingMode,l=r.inputShape,p=t.backend_util.computeConv2DInfo(l,o.shape,s,u,c,d,!0),h=new Ea(p),f=[{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.filterHeight-1-p.padInfo.top,p.filterWidth-1-p.padInfo.left]},{type:"int32",data:[p.filterHeight,p.filterWidth]},{type:"int32",data:[p.outHeight]},{type:"int32",data:[p.outWidth]},{type:"int32",data:[p.outChannels/p.inChannels]}];return a.runWebGPUProgram(h,[i,o],i.dtype,f)}},Ua=function(){function e(e){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e,e],this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="diag"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let value = select(0.0, getX(coords[0]), coords[0] == coords[1]);\n          setOutputAtIndex(index, value);\n        }\n      }\n    ")},e}();var Ma={kernelName:t.Diag,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=n.x,i=c(c([],u(r.shape),!1),u(r.shape),!1),o=t.util.sizeFromShape(r.shape),s=he({inputs:{x:r},backend:a,attrs:{shape:[o]}}),d=new Ua(o),l=a.runWebGPUProgram(d,[s],s.dtype),p=he({inputs:{x:l},backend:a,attrs:{shape:i}});return a.disposeData(s.dataId),a.disposeData(l.dataId),p}},Va=function(){function e(e){this.variableNames=["x","w"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.outShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="dilation2d"}return e.prototype.getUserCode=function(){return"\n       ".concat(S("index")," {\n         if (index < uniforms.size) {\n           let neg_infinity = -3.4e38;\n           let coords = getOutputCoords();\n           let batch = coords.x;\n           let d1 = coords.w;\n           let outTopLeftCorner = coords.yz * uniforms.strides - uniforms.pads;\n           let hBeg = outTopLeftCorner.x;\n           let wBeg = outTopLeftCorner.y;\n\n           var curVal = neg_infinity;\n           for (var h = 0; h < uniforms.filterDims[0]; h = h + 1) {\n             let hIn = hBeg + h * uniforms.dilations[0];\n\n             if (hIn >= 0 && hIn < uniforms.xShape[1]) {\n               for (var w = 0; w < uniforms.filterDims[1]; w = w + 1) {\n                 let wIn = wBeg + w * uniforms.dilations[1];\n\n                 if (wIn >= 0 && wIn < uniforms.xShape[2]) {\n                   let val = getX(batch, hIn, wIn, d1) + getW(h, w, d1);\n                   if (val > curVal) {\n                     curVal = val;\n                   }\n                 }\n               }\n             }\n           }\n\n           setOutputAtIndex(index, curVal);\n         }\n       }\n     ")},e}();var Ga={kernelName:t.Dilation2D,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,s=r.strides,d=r.pad,l=r.dilations,p=t.backend_util.computeDilation2DInfo(i.shape,o.shape,s,d,"NHWC",l),h=[p.padInfo.top,p.padInfo.left],f=[{type:"int32",data:[p.filterHeight,p.filterWidth]},{type:"int32",data:c([],u(h),!1)},{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.dilationHeight,p.dilationWidth]}],m=new Va(p);return a.runWebGPUProgram(m,[i,o],i.dtype,f)}},Ha=function(){function e(e,t){if(this.variableNames=["x","w","dy"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=e.inShape,this.dispatchLayout=O(e.outShape),this.dispatch=L(this.dispatchLayout,e.outShape,this.workgroupSize),"float32"!==t&&"int32"!==t)throw new Error("Dilation2DBackpropInput only supports float32 and int32\n          types, does not support ".concat(t," type."));this.type=t,this.shaderKey="dilation2DBackpropInput"}return e.prototype.getUserCode=function(){return"\n       ".concat(S("index")," {\n         if (index < uniforms.dySize) {\n           let coords = getDyCoordsFromIndex(index);\n           let b = coords[0];\n           let r = coords[1];\n           let c = coords[2];\n           let d = coords[3];\n\n           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;\n           var curVal = -3.4e38;  // neg_infinity\n           var xRMax = 0;\n           var xCMax = 0;\n\n           // In the case of multiple argmax branches, we only back-propagate\n           // along the last branch, i.e., the one with largest value of\n           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling\n           // backward routines.\n           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {\n             let xR = dyCorner.x + wR * uniforms.dilations[0];\n\n             if (xR >= 0 && xR < uniforms.xShape[1]) {\n               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {\n                 let xC = dyCorner.y + wC * uniforms.dilations[1];\n\n                 if (xC >= 0 && xC < uniforms.xShape[2]) {\n                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);\n                   if (val > curVal) {\n                     curVal = val;\n                     xRMax = xR;\n                     xCMax = xC;\n                   }\n                 }\n               }\n             }\n           }\n\n           let flatIndexIn = d + uniforms.xShape[3] *\n               (xCMax + uniforms.xShape[2] * (xRMax + uniforms.xShape[1] * b));\n           let value = getDy(b, r, c, d);\n           ").concat(x("&result[flatIndexIn]","value",this.type),"\n         }\n       }\n     ")},e}(),Xa=function(){function e(e,t,n){if(this.variableNames=["x","w","dy"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=e.filterShape,this.dispatchLayout=O(e.outShape),this.dispatch=L(this.dispatchLayout,e.outShape,this.workgroupSize),"float32"!==n&&"int32"!==n)throw new Error("Dilation2DBackpropFilter only supports float32 and int32\n          types, does not support ".concat(n," type."));this.type=n,this.shaderKey="dilation2DBackpropFilter"}return e.prototype.getUserCode=function(){return"\n       ".concat(S("index")," {\n         if (index < uniforms.dySize) {\n           let coords = getDyCoordsFromIndex(index);\n           let b = coords[0];\n           let r = coords[1];\n           let c = coords[2];\n           let d = coords[3];\n\n           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;\n           var curVal = -3.4e38;  // neg_infinity\n           var wRMax = 0;\n           var wCMax = 0;\n\n           // In the case of multiple argmax branches, we only back-propagate\n           // along the last branch, i.e., the one with largest value of\n           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling\n           // backward routines.\n           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {\n             let xR = dyCorner.x + wR * uniforms.dilations[0];\n\n             if (xR >= 0 && xR < uniforms.xShape[1]) {\n               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {\n                 let xC = dyCorner.y + wC * uniforms.dilations[1];\n\n                 if (xC >= 0 && xC < uniforms.xShape[2]) {\n                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);\n                   if (val > curVal) {\n                     curVal = val;\n                     wRMax = wR;\n                     wCMax = wC;\n                   }\n                 }\n               }\n             }\n           }\n\n           let flatIndexIn = d + uniforms.wShape[2] * (wCMax + wRMax * uniforms.wShape[1]);\n           let value = getDy(b, r, c, d);\n           ").concat(x("&result[flatIndexIn]","value",this.type),"\n         }\n       }\n     ")},e}();var Ka={kernelName:t.Dilation2DBackpropFilter,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,s=n.dy,u=r.strides,c=r.pad,d=r.dilations,l=t.backend_util.computeDilation2DInfo(i.shape,o.shape,u,c,"NHWC",d),p=o.dtype,h=new Xa(l,o.shape,p),f=[{type:"int32",data:[l.filterHeight,l.filterWidth]},{type:"int32",data:[l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.strideHeight,l.strideWidth]},{type:"int32",data:[l.dilationHeight,l.dilationWidth]},{type:"int32",data:[t.util.sizeFromShape(l.outShape)]}],m=le({backend:a,attrs:{shape:o.shape,value:0,dtype:p}});return a.runWebGPUProgram(h,[i,o,s],p,f,m)}};var qa={kernelName:t.Dilation2DBackpropInput,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,s=n.dy,u=r.strides,c=r.pad,d=r.dilations,l=t.backend_util.computeDilation2DInfo(i.shape,o.shape,u,c,"NHWC",d),p=i.dtype,h=new Ha(l,p),f=[{type:"int32",data:[l.filterHeight,l.filterWidth]},{type:"int32",data:[l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.strideHeight,l.strideWidth]},{type:"int32",data:[l.dilationHeight,l.dilationWidth]},{type:"int32",data:[t.util.sizeFromShape(l.outShape)]}],m=le({backend:a,attrs:{shape:l.inShape,value:0,dtype:p}});return a.runWebGPUProgram(h,[i,o,s],p,f,m)}},Ya=function(){function e(e,t,n){this.variableNames=["Image"],this.uniforms="alpha: f32,",this.workgroupSize=[64,1,1],this.pixelsOpType=y.DRAW,this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.type=t,this.textureFormat=n,this.shaderKey="draw_".concat(t,"_").concat(n)}return e.prototype.getUserCode=function(){var e,t="float32"===this.type?"value":"value / 255.0";return e="\n      if (uniforms.numChannels == 1) {\n        rgba[0] = ".concat(t,";\n        rgba[1] = ").concat(t,";\n        rgba[2] = ").concat(t,";\n      } else {\n        rgba[d] = ").concat(t,";\n      }"),"\n       @group(0) @binding(0) var outImage : texture_storage_2d<".concat(this.textureFormat,", write>;\n       ").concat(S("index")," {\n         if (index < uniforms.size) {\n           var rgba = vec4<f32>(0.0, 0.0, 0.0, uniforms.alpha);\n           for (var d = 0; d < uniforms.numChannels; d = d + 1) {\n             let value = f32(inBuf[index * uniforms.numChannels + d]);\n             ").concat(e,"\n           }\n           rgba.x = rgba.x * rgba.w;\n           rgba.y = rgba.y * rgba.w;\n           rgba.z = rgba.z * rgba.w;\n           let coords = getCoordsFromIndex(index);\n           textureStore(outImage, vec2<i32>(coords.yx), rgba);\n         }\n       }\n      ")},e}();var ja={kernelName:t.Draw,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.image,i=a.canvas,o=a.options,s=u(r.shape.slice(0,2),2),c=s[0],d=s[1],l=(o||{}).imageOptions,p=(null==l?void 0:l.alpha)||1,h=n.device.features.has("bgra8unorm-storage")?"bgra8unorm":"rgba8unorm",f=[c,d],m=new Ya(f,r.dtype,h);i.width=d,i.height=c;var g,v="webgpu",y=i.getContext(v);y||(y=(g=new OffscreenCanvas(d,c)).getContext(v));var x=3===r.shape.length?r.shape[2]:1;y.configure({device:n.device,format:h,usage:GPUTextureUsage.STORAGE_BINDING,alphaMode:"premultiplied"});var b="int32",w=n.makeTensorInfo(f,b),C=n.tensorMap.get(w.dataId);C.resource=y.getCurrentTexture(),C.external=!0;var k=[{type:"uint32",data:[x]},{type:"float32",data:[p]}];if(n.runWebGPUProgram(m,[r],b,k,w),g){var S=i.getContext("2d");if(!S)throw new Error("Please make sure this canvas has only been used for 2d or webgpu context!");S.drawImage(g,0,0)}return n.disposeData(w.dataId),r}},Qa=Ie({opType:G.MUL,cpuKernelImpl:ft,supportsComplex:!0}),Za={kernelName:t.Multiply,backendName:"webgpu",kernelFunc:Qa};function Ja(e){var t=e.inputs,n=e.backend,a=e.attrs;return Kt(t.x,a.axis,a.keepDims,"sum",n)}var $a={kernelName:t.Sum,backendName:"webgpu",kernelFunc:Ja};var er={kernelName:t.Einsum,backendName:"webgpu",kernelFunc:function(e){var n,a,r,i,o=e.inputs,u=e.backend,c=e.attrs.equation,d=o,l=t.backend_util.decodeEinsumEquation(c,d.length),p=l.allDims,h=l.summedDims,f=l.idDims;t.backend_util.checkEinsumDimSizes(p.length,f,d);for(var m=t.backend_util.getEinsumComputePath(h,f),g=m.path,v=m.steps,y=v.length,x=null,b=p.length,w=[],C=0;C<y;++C){try{for(var k=(n=void 0,s(v[C])),S=k.next();!S.done;S=k.next()){var I=S.value,R=t.backend_util.getEinsumPermutation(b,f[I]),P=R.permutationIndices,z=R.expandDims,A=void 0;t.backend_util.isIdentityPermutation(P)?A=d[I]:(A=Vt({inputs:{x:d[I]},backend:u,attrs:{perm:P}}),w.push(A));for(var N=A.shape.slice(),D=0;D<z.length;++D)N.splice(z[D],0,1);t.util.arraysEqual(A.shape,N)||(A=he({inputs:{x:A},backend:u,attrs:{shape:N}}),w.push(A)),null===x?x=A:(x=Qa({inputs:{a:A,b:x},backend:u}),w.push(x))}}catch(e){n={error:e}}finally{try{S&&!S.done&&(a=k.return)&&a.call(k)}finally{if(n)throw n.error}}C<y-1&&(g[C]>=0&&(x=Ja({inputs:{x:x},backend:u,attrs:{axis:g[C]-(p.length-b),keepDims:!1}}),w.push(x)),b--)}try{for(var F=s(w),T=F.next();!T.done;T=F.next()){var _=T.value;_!==x&&u.disposeData(_.dataId)}}catch(e){r={error:e}}finally{try{T&&!T.done&&(i=F.return)&&i.call(F)}finally{if(r)throw r.error}}return x}},tr=Se({opType:q.ELU}),nr={kernelName:t.Elu,backendName:"webgpu",kernelFunc:tr},ar={kernelName:t.EluGrad,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.dy,r=t.y,i=new ye(G.ELU_DER,a.shape,r.shape);return n.runWebGPUProgram(i,[a,r],a.dtype)}},rr=Ie({opType:G.EQUAL,dtype:"bool",cpuKernelImpl:$e}),ir={kernelName:t.Equal,backendName:"webgpu",kernelFunc:rr},or=Se({opType:q.ERF}),sr={kernelName:t.Erf,backendName:"webgpu",kernelFunc:or},ur=Se({opType:q.EXP,cpuKernelImpl:et,dtype:"float32"}),cr={kernelName:t.Exp,backendName:"webgpu",kernelFunc:ur};function dr(e){var n=e.inputs,a=e.attrs,r=e.backend,i=a.dim,o=n.input,s=o.shape.length,u=o.shape.slice(),c=i;return i<0&&(t.util.assert(-(s+1)<=i,(function(){return"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")})),c=s+i+1),u.splice(c,0,1),he({inputs:{x:o},backend:r,attrs:{shape:u}})}var lr={kernelName:t.ExpandDims,backendName:"webgpu",kernelFunc:dr},pr=Se({opType:q.EXPM1,cpuKernelImpl:tt}),hr={kernelName:t.Expm1,backendName:"webgpu",kernelFunc:pr},fr=function(){function e(e,t){this.variableNames=["real","imag"],this.outputShape=[],this.uniforms="exponentMultiplier : f32, denominator: f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.component=e,this.shaderKey="fft_".concat(e)}return e.prototype.getUserCode=function(){var e="real"===this.component?"return real * expR - imag * expI;":"return real * expI + imag * expR;";return"\n    fn unaryOpComplex(real: f32, expR: f32, imag: f32, expI: f32) -> f32 {\n      ".concat(e,"\n    }\n\n    fn mulMatDFT(batch: i32, index: i32) -> f32 {\n      let indexRatio = f32(index) / f32(uniforms.realShape[1]);\n      let exponentMultiplierTimesIndexRatio =\n          uniforms.exponentMultiplier * indexRatio;\n\n      var result = 0.0;\n\n      for (var i = 0; i < uniforms.realShape[1]; i = i + 1) {\n        // x = (-2|2 * PI / N) * index * i;\n        let x = exponentMultiplierTimesIndexRatio * f32(i);\n        let expR = cos(x);\n        let expI = sin(x);\n        let real = getReal(batch, i);\n        let imag = getImag(batch, i);\n\n        result = result +\n            unaryOpComplex(real, expR, imag, expI) / uniforms.denominator;\n      }\n\n      return result;\n    }\n\n    ").concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        setOutputAtIndex(index, mulMatDFT(coords[0], coords[1]));\n      }\n    }\n  ")},e}();function mr(e,n,a){var r=a.tensorMap.get(e.dataId),i=t.util.sizeFromShape(e.shape),o=e.shape[e.shape.length-1],s=[],u=he({inputs:{x:e},backend:a,attrs:{shape:[i/o,o]}});s.push(u);var c=u.shape,d=new fr("real",c),l=new fr("imag",c),p=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:c},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:c}],h=[{type:"float32",data:[n?2*Math.PI:-2*Math.PI]},{type:"float32",data:[n?c[1]:1]}],f=a.runWebGPUProgram(d,p,"float32",h);s.push(f);var m=a.runWebGPUProgram(l,p,"float32",h);s.push(m);var g=we({inputs:{real:f,imag:m},backend:a});s.push(g);var v=he({inputs:{x:g},backend:a,attrs:{shape:e.shape}});return s.forEach((function(e){return a.disposeData(e.dataId)})),v}var gr,vr={kernelName:t.FFT,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend;return mr(t.input,!1,n)}},yr=function(){function e(e){this.outputShape=[],this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="flipLeftRight"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let coordX = uniforms.xShape[2] - coords[2] - 1;\n          let outputValue = getX(coords[0], coords[1], coordX, coords[3]);\n          setOutputAtIndex(index, outputValue);\n        }\n      }\n    ")},e}(),xr={kernelName:t.FlipLeftRight,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.image,r=n,i=new yr(a.shape);return r.runWebGPUProgram(i,[a],a.dtype)}},br=Se({opType:q.FLOOR,cpuKernelImpl:nt}),wr={kernelName:t.Floor,backendName:"webgpu",kernelFunc:br},Cr=Ie({opType:G.FLOOR_DIV,cpuKernelImpl:at,dtype:"int32"}),kr={kernelName:t.FloorDiv,backendName:"webgpu",kernelFunc:Cr},Sr=function(){function e(e,t,n){void 0===n&&(n=!1),this.pixelsOpType=y.FROM_PIXELS,this.outputShape=[0],this.variableNames=[],this.workgroupSize=[256,1,1],this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,[t,1,1]),this.importVideo=n,this.shaderKey="fromPixels_".concat(this.importVideo)}return e.prototype.getUserCode=function(){var e=this.importVideo?"textureLoad(src, vec2<i32>(coords.yx));":"textureLoad(src, vec2<i32>(coords.yx), 0)",t=this.importVideo?"texture_external":"texture_2d<f32>";return"\n      @binding(1) @group(0) var src: ".concat(t,";\n      ").concat(S("index")," {\n        let flatIndex = index * uniforms.numChannels;\n        if (flatIndex < uniforms.size) {\n          let coords = getCoordsFromIndex(flatIndex);\n          let values = ").concat(e,";\n          for (var i = 0; i < uniforms.numChannels; i = i + 1) {\n            result[flatIndex + i] = i32(floor(255.0 * values[i]));\n          }\n        }\n      }\n  ")},e}(),Ir={kernelName:t.FromPixels,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.pixels,o=r.numChannels;if(null==i)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var s="undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement,d="undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement,l="undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&i instanceof OffscreenCanvas,p="undefined"!=typeof ImageBitmap&&i instanceof ImageBitmap,h=u(s?[i.videoWidth,i.videoHeight]:[i.width,i.height],2),f=h[0],m=h[1],g=[m,f,o],v=t.env().getBool("WEBGPU_IMPORT_EXTERNAL_TEXTURE")&&s,y=s||d;if(p||l||y){var x=void 0;if(v)x=a.device.importExternalTexture({source:i});else{if(y){var b=t.env().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=gr&&b===Rr||(Rr=b,gr=document.createElement("canvas").getContext("2d",{willReadFrequently:Rr})),gr.canvas.width=f,gr.canvas.height=m,gr.drawImage(i,0,0,f,m),i=gr.canvas}var w=GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,C=a.textureManager.acquireTexture(g[1],g[0],"rgba8unorm",w);a.queue.copyExternalImageToTexture({source:i},{texture:C},[g[1],g[0]]),x=C}var k=t.util.sizeFromShape(g),S=t.util.computeStrides(g),I=new Sr(g,o,v),R=[{type:"uint32",data:[k]},{type:"uint32",data:[o]},{type:"uint32",data:c([],u(S),!1)}],P=a.makeTensorInfo([m,f],"int32");a.tensorMap.get(P.dataId).resource=x;var z=a.runWebGPUProgram(I,[P],"int32",R);return a.disposeData(P.dataId),z}var A=i.data,N=A;if(null!=o&&4!==o){N=new Uint8Array(i.width*i.height*o);for(var D=A.length,F=0,T=0;T<D;T++)T%4<o&&(N[F++]=A[T])}var _=a.makeTensorInfo(g,"int32",new Int32Array(N));return a.uploadToGPU(_.dataId),_}},Rr=t.env().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var Pr=function(){function e(e,n,a,r,i){this.uniforms="varianceEpsilon : f32,",this.workgroupSize=[128,1,1],this.size=!0,this.variableNames=["x","mean","variance"],t.backend_util.assertAndGetBroadcastShape(e,n),t.backend_util.assertAndGetBroadcastShape(e,a),this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),null!=r&&(t.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset")),null!=i&&(t.backend_util.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale")),this.offsetShape=r,this.scaleShape=i,this.shaderKey="batchNorm"}return e.prototype.getUserCode=function(){var e="0.0";null!=this.offsetShape&&(e="getOffsetByOutputIndex(index)");var t="1.0";return null!=this.scaleShape&&(t="getScaleByOutputIndex(index)"),"\n      ".concat(S("index")," {\n        if (index < uniforms.size)\n        {\n          let xValue = getXByOutputIndex(index);\n          let meanValue = getMeanByOutputIndex(index);\n          let varianValue = getVarianceByOutputIndex(index);\n          let offsetValue = ").concat(e,";\n          let scaleValue = ").concat(t,";\n          let inv = scaleValue * inverseSqrt(varianValue + f32(uniforms.varianceEpsilon));\n          setOutputAtIndex(index,dot(vec3<f32>(xValue, -meanValue, offsetValue), vec3<f32>(inv, inv, 1.0)));\n        }\n      }\n  ")},e}(),zr={kernelName:t.FusedBatchNorm,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,r=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance,c=n.varianceEpsilon,d=a,l=[r,s,u],p=null;null!=o&&(p=o.shape,l.push(o));var h=null;null!=i&&(h=i.shape,l.push(i));var f=new Pr(r.shape,s.shape,u.shape,p,h),m=[{type:"float32",data:[c]}];return d.runWebGPUProgram(f,l,r.dtype,m)}};var Ar={kernelName:t.FusedConv2D,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,c=r.strides,d=r.pad,l=r.dataFormat,p=r.dilations,h=r.dimRoundingMode,f=r.activation,m=r.leakyreluAlpha,g=t.backend_util.convertConv2DDataFormat(l);return aa({x:i,filter:o,convInfo:t.backend_util.computeConv2DInfo(i.shape,o.shape,c,p,d,h,!1,g),backend:a,bias:s,preluActivationWeights:u,leakyreluAlpha:m,activation:f})}};var Nr={kernelName:t.FusedDepthwiseConv2D,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,c=r.strides,d=r.pad,l=r.dilations,p=r.dimRoundingMode,h=r.activation,f=r.leakyreluAlpha,m=l;null==m&&(m=[1,1]),t.util.assert(t.backend_util.eitherStridesOrDilationsAreOne(c,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(m,"'")}));var g=t.backend_util.computeConv2DInfo(i.shape,o.shape,c,m,d,p,!0),v=[i,o],y=null!=s,x=null!=u;y&&v.push(s),x&&v.push(u);var b,w=[{type:"int32",data:[g.padInfo.top,g.padInfo.left]},{type:"int32",data:[g.inHeight,g.inWidth]}];return g.outHeight>4&&g.outWidth>4&&g.strideWidth<=2&&g.inChannels===g.outChannels&&1===g.dilationHeight&&1===g.dilationWidth&&g.inChannels%4==0?(b=new Ta(g,y,h,x),w.push({type:"int32",data:[b.virtualWidth]})):(b=new _a(g,y,h,x),w.push({type:"int32",data:[g.filterHeight]},{type:"int32",data:[g.filterWidth]},{type:"int32",data:[g.strideHeight,g.strideWidth]},{type:"int32",data:[g.dilationHeight,g.dilationWidth]})),"leakyrelu"===h&&(w.push({type:"float32",data:[f]}),b.uniforms+=" alpha : f32,"),a.runWebGPUProgram(b,v,"float32",w)}},Dr=function(){function e(e,t){this.variableNames=["A","indices"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="gathernd_".concat(e),this.sliceDim=e,this.uniforms="sliceDim : i32, strides : ".concat(C(e),",")}return e.prototype.getUserCode=function(){var e;return e=this.sliceDim>1?"uniforms.strides[j]":"uniforms.strides","\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          var flattenIndex = 0;\n          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n            let indexTemp = i32(round(getIndices(coords[0], j)));\n            let strideNum = ").concat(e,";\n            flattenIndex = flattenIndex + indexTemp * strideNum;\n          }\n\n          setOutputAtIndex(index, getA(flattenIndex, coords[1]));\n        }\n      }\n      ")},e}();var Fr={kernelName:t.GatherNd,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=n.params,i=n.indices,o=i.shape,s=o[o.length-1],c=t.util.sizeFromShape(r.shape),d=u(t.backend_util.prepareAndValidate(r,i),4),l=d[0],p=d[1],h=d[2],f=d[3],m=he({inputs:{x:i},backend:a,attrs:{shape:[p,s]}}),g=he({inputs:{x:r},backend:a,attrs:{shape:[t.util.sizeFromShape(r.shape)/h,h]}});if(a.shouldExecuteOnCPU([r,i])||"string"===r.dtype){var v=a.readSync(i.dataId),y=a.bufferSync(r),x=rt(v,y,r.dtype,p,s,h,f,r.shape,c);return a.makeTensorInfo(l,r.dtype,x.values)}var b=new Dr(s,[p,h]),w=[{type:"int32",data:[s]},{type:"int32",data:f}],C=a.runWebGPUProgram(b,[g,m],g.dtype,w),k=he({inputs:{x:C},backend:a,attrs:{shape:l}});return a.disposeData(m.dataId),a.disposeData(g.dataId),a.disposeData(C.dataId),k}},Tr=function(){function e(e,t){this.variableNames=["A","indices"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.slice(),this.aShape=e,this.outputShape=t,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="gather"}return e.prototype.getUserCode=function(){var e=function(e){for(var t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[],a=0;a<e.length;a++)2===a?n.push("indexZ"):n.push("".concat(t[a]));return n.join()}(this.aShape);return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          let indexZ = i32(getIndices(resRC.x, resRC.z));\n          let inBounds = select(0.0, 1.0, indexZ >= 0 && indexZ < uniforms.aShape[2]);\n          setOutputAtIndex(index, inBounds * getA(").concat(e,"));\n        }\n      }\n    ")},e}();function _r(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.indices,s=r.axis,u=r.batchDims,c=t.util.parseAxisParam(s,i.shape)[0],d=t.backend_util.segment_util.collectGatherOpShapeInfo(i,o,c,u),l=t.util.sizeFromShape(o.shape),p=[],h=he({inputs:{x:i},backend:a,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),f=he({inputs:{x:o},backend:a,attrs:{shape:[d.batchSize,l/d.batchSize]}});p.push(h),p.push(f);var m=[d.batchSize,d.outerSize,l/d.batchSize,d.sliceSize];if(a.shouldExecuteOnCPU([i,o])){var g=a.tensorMap.get(f.dataId).values,v=t.buffer(f.shape,f.dtype,g),y=a.tensorMap.get(h.dataId).values,x=t.buffer(h.shape,h.dtype,y),b=it(x,v,m);return p.forEach((function(e){return a.disposeData(e.dataId)})),a.makeTensorInfo(d.outputShape,b.dtype,b.values)}var w=new Tr(h.shape,m),C=a.runWebGPUProgram(w,[h,f],h.dtype);p.push(C);var k=he({inputs:{x:C},backend:a,attrs:{shape:d.outputShape}});return p.forEach((function(e){return a.disposeData(e.dataId)})),k}var Lr={kernelName:t.GatherV2,backendName:"webgpu",kernelFunc:_r},Wr=Ie({opType:G.GREATER,cpuKernelImpl:st,dtype:"bool"}),Er={kernelName:t.Greater,backendName:"webgpu",kernelFunc:Wr},Br=Ie({opType:G.GREATER_EQUAL,dtype:"bool",cpuKernelImpl:ot}),Or={kernelName:t.GreaterEqual,backendName:"webgpu",kernelFunc:Br};var Ur={kernelName:t.IFFT,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend;return mr(t.input,!0,n)}},Mr=Se({opType:q.IS_FINITE,dtype:"bool"}),Vr={kernelName:t.IsFinite,backendName:"webgpu",kernelFunc:Mr},Gr=Se({opType:q.IS_INF,dtype:"bool"}),Hr={kernelName:t.IsInf,backendName:"webgpu",kernelFunc:Gr},Xr=Se({opType:q.IS_NAN,dtype:"bool"}),Kr={kernelName:t.IsNan,backendName:"webgpu",kernelFunc:Xr};var qr={kernelName:t.LeakyRelu,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=[{type:"float32",data:[a.alpha]}],o=new ke(r.shape,q.LEAKYRELU,"alpha : f32,");return n.runWebGPUProgram(o,[r],"float32",i)}},Yr=Ie({opType:G.LESS,dtype:"bool",cpuKernelImpl:ct}),jr={kernelName:t.Less,backendName:"webgpu",kernelFunc:Yr},Qr=Ie({opType:G.LESS_EQUAL,dtype:"bool",cpuKernelImpl:ut}),Zr={kernelName:t.LessEqual,backendName:"webgpu",kernelFunc:Qr},Jr=function(){function e(e){this.variableNames=[],this.outputShape=[],this.uniforms="start : f32, step : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e],this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="linSpace"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          setOutputAtIndex(index, uniforms.start + f32(index) * uniforms.step);\n        }\n      }\n    ")},e}();var $r={kernelName:t.LinSpace,backendName:"webgpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,a=n.start,r=n.stop,i=n.num,o=(r-a)/(i-1),s=new Jr(i),u=[{type:"float32",data:[a]},{type:"float32",data:[o]}];return t.runWebGPUProgram(s,[],"float32",u)}},ei=Se({opType:q.LOG,cpuKernelImpl:dt}),ti={kernelName:t.Log,backendName:"webgpu",kernelFunc:ei},ni=Se({opType:q.LOG1P}),ai={kernelName:t.Log1p,backendName:"webgpu",kernelFunc:ni},ri=Ie({opType:G.LOGICAL_AND,dtype:"bool"}),ii={kernelName:t.LogicalAnd,backendName:"webgpu",kernelFunc:ri},oi=Se({opType:q.LOGICAL_NOT}),si={kernelName:t.LogicalNot,backendName:"webgpu",kernelFunc:oi},ui=Ie({opType:G.LOGICAL_OR}),ci={kernelName:t.LogicalOr,backendName:"webgpu",kernelFunc:ui},di="\n  var powValue = 0.0;\n  let basis = uniforms.bias + uniforms.alpha * sum;\n  if (uniforms.beta == 0.5) {\n    powValue = inverseSqrt(basis);\n  } else if (uniforms.beta == 1.0) {\n    powValue = 1.0 / basis;\n  } else {\n    powValue = exp(log(basis) * (-uniforms.beta));\n  }\n",li=function(){function e(e){this.outputShape=[],this.variableNames=["x"],this.uniforms="radius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="lrn"}return e.prototype.getUserCode=function(){return"\n    ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let b = coords[0];\n        let r = coords[1];\n        let c = coords[2];\n        let d = coords[3];\n\n        let x = getX(b, r, c, d);\n        var sum = 0.0;\n        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {\n          let idx = d + i;\n          if (idx >= 0 && idx < uniforms.xShape[3]) {\n            let z = getX(b, r, c, idx);\n            sum = sum + z * z;\n          }\n        }\n        ").concat(di,"\n\n        setOutputAtIndex(index, x * powValue);\n      }\n    }\n  ")},e}(),pi=function(){function e(e,n){var a=this;this.outputShape=[],this.variableNames=["x"],this.uniforms="radius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[256,1,1],this.maxAllowRadius=16,t.util.assert(n<=this.maxAllowRadius,(function(){return"Radius must be less than or equal to ".concat(a.maxAllowRadius,", current radius is ").concat(n)})),this.outputShape=e,this.elementsPerWorkgroup=this.workgroupSize[0]-2*this.maxAllowRadius,this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=L(this.dispatchLayout,this.outputShape,[this.elementsPerWorkgroup,this.workgroupSize[1],this.workgroupSize[2]]),this.shaderKey="lrn_shared"}return e.prototype.getUserCode=function(){return"\n    var <workgroup>lrnSub: array<f32, ".concat(this.workgroupSize[0],">;\n    const elementsPerWorkgroup = ").concat(this.elementsPerWorkgroup,";\n    const maxAllowRadius = ").concat(this.maxAllowRadius,";\n\n    ").concat(S()," {\n      let localDepth = i32(localId.x);\n      let workgroupDepth = i32(workgroupId.x) * elementsPerWorkgroup;\n      let xDepth = workgroupDepth + localDepth - maxAllowRadius;\n      let b = i32(globalId.z) / uniforms.xShape[1];\n      let r = i32(globalId.z) - b * uniforms.xShape[1];\n      let c = i32(globalId.y);\n      let d = workgroupDepth + localDepth;\n\n      var x = 0.0;\n      if (xDepth >= 0 && xDepth < uniforms.xShape[3]) {\n        x = getX(b, r, c, xDepth);\n      }\n      lrnSub[localDepth] = x;\n      workgroupBarrier();\n\n      if (localDepth < elementsPerWorkgroup && d < uniforms.outShape[3]) {\n        var sum = 0.0;\n        let index = localDepth + maxAllowRadius;\n        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {\n          let z = lrnSub[index + i];\n          sum = sum + z * z;\n        }\n        ").concat(di,"\n\n        setOutputAtCoords(b, r, c, d, lrnSub[index] * powValue);\n      }\n    } ")},e}();var hi={kernelName:t.LRN,backendName:"webgpu",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.depthRadius,s=r.bias,u=r.alpha,c=r.beta;t=o>16?new li(i.shape):new pi(i.shape,o);var d=[{type:"int32",data:[o]},{type:"float32",data:[s]},{type:"float32",data:[u]},{type:"float32",data:[c]}];return a.runWebGPUProgram(t,[i],i.dtype,d)}},fi=function(){function e(e){this.outputShape=[],this.variableNames=["inputImage","outputImage","dy"],this.uniforms="depthRadius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="lrn_grad"}return e.prototype.getUserCode=function(){return"\n    ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let b = coords[0];\n        let r = coords[1];\n        let c = coords[2];\n\n        let MIN_DEPTH_BEGIN = 0;\n        let MAX_DEPTH_END = uniforms.outShape[3];\n        var result = 0.0;\n        for (var d = MIN_DEPTH_BEGIN; d < MAX_DEPTH_END; d++) {\n          let depthBegin = max(MIN_DEPTH_BEGIN, d - uniforms.depthRadius);\n          let depthEnd = min(MAX_DEPTH_END, d + uniforms.depthRadius + 1);\n\n          var norm = 0.0;\n          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {\n            if (k < depthBegin) {\n              continue;\n            } else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            } else {\n              break;\n            }\n          }\n\n          norm = uniforms.alpha * norm + uniforms.bias;\n\n          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {\n            if (k < depthBegin) {\n              continue;\n            } else if (k >= depthBegin && k < depthEnd) {\n              var dyi = -2.0 * uniforms.alpha * uniforms.beta\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d) / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * uniforms.beta);\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            } else {\n              break;\n            }\n          }\n        }\n\n        setOutputAtIndex(index, result);\n      }\n    }\n  ")},e}();var mi={kernelName:t.LRNGrad,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.x,i=t.y,o=t.dy,s=a.depthRadius,u=a.bias,c=a.alpha,d=a.beta,l=new fi(r.shape),p=[{type:"int32",data:[s]},{type:"float32",data:[u]},{type:"float32",data:[c]},{type:"float32",data:[d]}];return n.runWebGPUProgram(l,[r,i,o],r.dtype,p)}},gi=Ie({opType:G.MAX,cpuKernelImpl:pt}),vi={kernelName:t.Maximum,backendName:"webgpu",kernelFunc:gi};var yi={kernelName:t.MaxPool,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;return gn(i,t.backend_util.computePool2DInfo(i.shape,o,s,1,u,c),"max",a)}};var xi={kernelName:t.MaxPool3D,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.filterSize,s=r.strides,u=r.pad,c=r.dataFormat,d=r.dimRoundingMode,l=t.backend_util.computePool3DInfo(i.shape,o,s,[1,1,1],u,d,c),p=new ln(l,"max"),h=[{type:"int32",data:[l.strideDepth,l.strideHeight,l.strideWidth]},{type:"int32",data:[l.padInfo.front,l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.inDepth,l.inHeight,l.inWidth]},{type:"int32",data:[l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth]}];return a.runWebGPUProgram(p,[i],i.dtype,h)}},bi=function(){function e(e){this.variableNames=["dy","maxPos"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,\n       outHeight : i32, outWidth : i32",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="maxPool2DBackprop"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d = coords[3];\n\n        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;\n        let dyRCorner = dyRCCorner.x;\n        let dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] - 1;\n        for (var wR = 0; wR < uniforms.filterDims[0]; wR += uniforms.dilations[0]) {\n          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);\n\n          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n            continue;\n          }\n          let idyR = i32(dyR);\n\n          for (var wC = 0; wC < uniforms.filterDims[1]; wC += uniforms.dilations[1]) {\n            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);\n\n            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n              continue;\n            }\n            let idyC = i32(dyC);\n\n            let dyValue = getDy(batch, idyR, idyC, d);\n            let maxPosValue = lastIndex - i32(getMaxPos(batch, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            let curPosValue = wR * uniforms.filterDims[1] + wC;\n            let mask = select(0.0, 1.0, maxPosValue == curPosValue);\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    ")},e}(),wi=function(){function e(e){this.variableNames=["dy","maxPos"],this.uniforms="strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,\n      outDepth : i32, outHeight : i32, outWidth : i32",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="maxPool3DBackprop"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords.x;\n        let ch = coords.u;\n\n        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;\n        let dyDCorner = dyCorner.x;\n        let dyRCorner = dyCorner.y;\n        let dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] * uniforms.filterDims[2] - 1;\n\n        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {\n          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);\n\n          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {\n            continue;\n          }\n          let idyD = i32(dyD);\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);\n\n            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n              continue;\n            }\n            let idyR = i32(dyR);\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);\n\n              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n                continue;\n              }\n              let idyC = i32(dyC);\n\n              let dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              let maxPosValue = lastIndex - i32(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              let curPosValue = wD * uniforms.filterDims[1] * uniforms.filterDims[2] + wR * uniforms.filterDims[2] + wC;\n              let mask = select(0.0, 1.0, maxPosValue == curPosValue);\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    ")},e}();var Ci={kernelName:t.MaxPool3DGrad,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.dy,o=n.input,s=r.filterSize,u=r.strides,c=r.pad,d=r.dimRoundingMode,l=t.backend_util.computePool3DInfo(o.shape,s,u,[1,1,1],c,d),p=new ln(l,"max",!0),h=[{type:"int32",data:[l.strideDepth,l.strideHeight,l.strideWidth]},{type:"int32",data:[l.padInfo.front,l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.inDepth,l.inHeight,l.inWidth]},{type:"int32",data:[l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth]}],f=a.runWebGPUProgram(p,[o],"int32",h),m=new wi(l);h=[{type:"int32",data:[l.strideDepth,l.strideHeight,l.strideWidth]},{type:"int32",data:[l.effectiveFilterDepth-1-l.padInfo.front,l.effectiveFilterHeight-1-l.padInfo.top,l.effectiveFilterWidth-1-l.padInfo.left]},{type:"int32",data:[l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth]},{type:"int32",data:[l.outDepth]},{type:"int32",data:[l.outHeight]},{type:"int32",data:[l.outWidth]}];var g=a.runWebGPUProgram(m,[i,f],o.dtype,h);return a.disposeData(f.dataId),g}};var ki={kernelName:t.MaxPoolGrad,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.dy,o=n.input,s=o;V([o,n.output],"maxPoolGrad");var u=r.filterSize,c=r.strides,d=r.pad,l=r.dimRoundingMode,p=t.backend_util.computePool2DInfo(s.shape,u,c,1,d,l),h=new dn(p,"max",!0),f=[{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.padInfo.top,p.padInfo.left]},{type:"int32",data:[p.dilationHeight,p.dilationWidth]},{type:"int32",data:[p.inHeight,p.inWidth]},{type:"int32",data:[p.effectiveFilterHeight,p.effectiveFilterWidth]}],m=a.runWebGPUProgram(h,[s],"int32",f),g=new bi(p);f=[{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.effectiveFilterHeight-1-p.padInfo.top,p.effectiveFilterWidth-1-p.padInfo.left]},{type:"int32",data:[p.dilationHeight,p.dilationWidth]},{type:"int32",data:[p.effectiveFilterHeight,p.effectiveFilterWidth]},{type:"int32",data:[p.outHeight]},{type:"int32",data:[p.outWidth]}];var v=a.runWebGPUProgram(g,[i,m],s.dtype,f);return a.disposeData(m.dataId),v}};var Si={kernelName:t.MaxPoolWithArgmax,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=r.filterSize,o=r.strides,s=r.pad,u=r.includeBatchInIndex,c=n.x;t.util.assert(4===c.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(c.shape.length,".")}));var d=[1,1];t.util.assert(t.backend_util.eitherStridesOrDilationsAreOne(o,d),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(d,"'")}));var l=t.backend_util.computePool2DInfo(c.shape,i,o,d,s),p=[{type:"int32",data:[l.strideHeight,l.strideWidth]},{type:"int32",data:[l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.dilationHeight,l.dilationWidth]},{type:"int32",data:[l.inHeight,l.inWidth]},{type:"int32",data:[l.effectiveFilterHeight,l.effectiveFilterWidth]}],h=new dn(l,"max",!1),f=a.runWebGPUProgram(h,[c],c.dtype,p);return h=new dn(l,"max",!0,!0,u),[f,a.runWebGPUProgram(h,[c],"int32",p)]}};var Ii={kernelName:t.Min,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs;return Kt(t.x,a.axis,a.keepDims,"min",n)}},Ri=Ie({opType:G.MIN,cpuKernelImpl:ht}),Pi={kernelName:t.Minimum,backendName:"webgpu",kernelFunc:Ri},zi=function(){function e(e,t,n){var a=this;this.uniforms="",this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]})),this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.xShape=e,t.map((function(e,t){a.uniforms+=" pad".concat(t," : vec2<i32>,")})),this.offset="reflect"===n?0:1,this.shaderKey="mirrorPad_".concat(n)}return e.prototype.getUserCode=function(){var e=this.xShape.length,t=this.xShape.map((function(e,t){return"uniforms.pad".concat(t,"[0]")})).join(","),n=this.xShape.map((function(t,n){return"uniforms.pad".concat(n,"[0] + uniforms.xShape").concat(e>1?"[".concat(n,"]"):"")})).join(","),a=1===e?"start":"start[i]",r=1===e?"end":"end[i]",i=1===e?"outC":"outC[i]",o=C(e),s=e>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e):"coords";return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let start = ").concat(o,"(").concat(t,");\n          let end = ").concat(o,"(").concat(n,");\n          var outC = getCoordsFromIndex(index);\n          for (var i = 0; i < ").concat(e,"; i = i + 1) {\n            if (").concat(i," < ").concat(a,") {\n              ").concat(i," = ").concat(a," * 2 - ").concat(i," - ").concat(this.offset,";\n            } else if(").concat(i," >= ").concat(r,") {\n              ").concat(i," = (").concat(r," - 1) * 2 - ").concat(i," + ").concat(this.offset,";\n            }\n          }\n          let coords = outC - start;\n          setOutputAtIndex(index, getX(").concat(s,"));\n        }\n      }\n    ")},e}(),Ai={kernelName:t.MirrorPad,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,r=t.x,i=n.paddings,o=n.mode,s=a,u=i.map((function(e){return{type:"int32",data:[e[0],e[1]]}})),c=new zi(r.shape,i,o);return s.runWebGPUProgram(c,[r],r.dtype,u)}},Ni=Ie({opType:G.MOD}),Di={kernelName:t.Mod,backendName:"webgpu",kernelFunc:Ni},Fi=function(){function e(e,t){this.variableNames=["probs"],this.outputShape=[],this.uniforms="seed : f32, numOutcomes: i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e,t],this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="multinomial"}return e.prototype.getUserCode=function(){return"\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    fn random (seed : f32, resultUV : vec2<f32>) -> f32 {\n      let HASHSCALE1 = 443.8975;\n      let p = resultUV * seed;\n      var p3  = fract(vec3<f32>(p.xyx) * HASHSCALE1);\n      p3 = p3 + dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let batch = coords[0];\n\n        let resUV = vec2<f32>(f32(coords[1]) / f32(uniforms.outShape[1]),\n            f32(coords[0]) / f32(uniforms.outShape[0]));\n        let r = random(uniforms.seed, resUV);\n        var cdf = 0.0;\n        for (var i = 0; i < uniforms.numOutcomes - 1; i = i + 1) {\n          cdf = cdf + getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutputAtIndexI32(index, i);\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutputAtIndexI32(index, uniforms.numOutcomes - 1);\n      }\n    }\n  ")},e}(),Ti=function(){function e(e){this.variableNames=["logits"],this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=[this.outputShape[0],1,1],this.outputShape[1]>=4096?this.workgroupSize=[256,1,1]:this.workgroupSize=[64,1,1],this.shaderKey="softmax"}return e.prototype.getUserCode=function(){return"\n    var<workgroup> buf : array<f32, ".concat(this.workgroupSize[0],">;\n    var<workgroup> rowMaxShared : f32;\n    var<workgroup> rowSumShared : f32;\n    const blockSize = ").concat(this.workgroupSize[0],";\n    ").concat(S("index")," {\n      let row = index / blockSize;\n      let tid = i32(localId.x);\n      let cols = uniforms.outShape[1];\n\n      var threadMax = -3.402823e+38f;\n      for (var col = tid; col < cols; col += blockSize) {\n        let value = getLogits(row, col);\n        threadMax = max(threadMax, value);\n      }\n      if (tid < cols) {\n        buf[tid] = threadMax;\n      }\n      workgroupBarrier();\n\n      var reduceSize = min(cols, blockSize);\n      for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\n        reduceSize = currSize + (reduceSize & 1);\n        if (tid < currSize) {\n          buf[tid] = max(buf[tid], buf[tid + reduceSize]);\n        }\n        workgroupBarrier();\n      }\n\n      if (tid == 0) {\n        rowMaxShared = buf[0];\n      }\n      workgroupBarrier();\n\n      var threadSum = 0.0;\n      for (var col = tid; col < cols; col += blockSize) {\n        let subExp = exp(getLogits(row, col) - rowMaxShared);\n        threadSum += subExp;\n      }\n      buf[tid] = threadSum;\n      workgroupBarrier();\n\n      for (var currSize = blockSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n        if (tid < currSize) {\n          buf[tid] = buf[tid] + buf[tid + currSize];\n        }\n        workgroupBarrier();\n      }\n\n      if (tid == 0) {\n        rowSumShared = buf[0];\n      }\n      workgroupBarrier();\n\n      for (var col = tid; col < cols; col += blockSize) {\n        let value = exp(getLogits(row, col) - rowMaxShared) / rowSumShared;\n        setOutputAtCoords(row, col, value);\n      }\n  }\n    ")},e}();function _i(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.logits,o=r.dim,s=he({inputs:{x:i},backend:a,attrs:{shape:[t.util.sizeFromShape(i.shape)/i.shape[o],i.shape[o]]}}),u=new Ti(s.shape),c=a.runWebGPUProgram(u,[s],i.dtype),d=he({inputs:{x:c},backend:a,attrs:{shape:i.shape}});return a.disposeData(s.dataId),a.disposeData(c.dataId),d}var Li={kernelName:t.Softmax,backendName:"webgpu",kernelFunc:_i};var Wi={kernelName:t.Multinomial,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.logits,i=a.numSamples,o=a.seed,s=a.normalized,u=s?r:_i({inputs:{logits:r},backend:n,attrs:{dim:r.shape.length-1}}),c=u.shape[0],d=u.shape[1],l=new Fi(c,i),p=[{type:"float32",data:[o]},{type:"int32",data:[d]}],h=n.runWebGPUProgram(l,[u],"int32",p);return s||n.disposeData(u.dataId),h}};var Ei={kernelName:t.Neg,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x;if(n.shouldExecuteOnCPU([a])){var r=n.tensorMap.get(a.dataId),i=u(mt(r.values,a.shape,a.dtype),2),o=i[0],s=i[1];return n.makeTensorInfo(s,a.dtype,o)}var c=new ke(a.shape,q.NEG);return n.runWebGPUProgram(c,[a],a.dtype)}};var Bi={kernelName:t.NonMaxSuppressionV3,backendName:"webgpu",kernelFunc:function(e){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var n=e.inputs,a=e.backend,r=e.attrs,i=n.boxes,o=n.scores,s=r.maxOutputSize,u=r.iouThreshold,c=r.scoreThreshold,d=a.readSync(i.dataId),l=a.readSync(o.dataId),p=t.kernel_impls.nonMaxSuppressionV3Impl(d,l,s,u,c).selectedIndices;return a.makeTensorInfo([p.length],"int32",new Int32Array(p))}};var Oi={kernelName:t.NonMaxSuppressionV5,backendName:"webgpu",kernelFunc:function(e){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var n=e.inputs,a=e.backend,r=e.attrs,i=n.boxes,o=n.scores,s=r.maxOutputSize,u=r.iouThreshold,c=r.scoreThreshold,d=r.softNmsSigma,l=a.readSync(i.dataId),p=a.readSync(o.dataId),h=s,f=u,m=c,g=d,v=t.kernel_impls.nonMaxSuppressionV5Impl(l,p,h,f,m,g),y=v.selectedIndices,x=v.selectedScores;return[a.makeTensorInfo([y.length],"int32",new Int32Array(y)),a.makeTensorInfo([x.length],"float32",new Float32Array(x))]}},Ui=function(){function e(e,t){this.variableNames=["x"],this.uniforms="onValue : f32, offValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e,t],this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="onehot"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n        if(index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          setOutputAtIndex(index, mix(uniforms.offValue, uniforms.onValue,\n                                      f32(i32(round(getX(coords.x))) == coords.y)));\n        }\n      }\n    ")},e}();var Mi={kernelName:t.OneHot,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.indices,o=r.dtype,s=r.depth,d=r.onValue,l=r.offValue,p=t.util.sizeFromShape(i.shape),h=new Ui(p,s),f=he({inputs:{x:i},backend:a,attrs:{shape:[p]}}),m=[{type:"float32",data:[d]},{type:"float32",data:[l]}],g=a.runWebGPUProgram(h,[f],o,m);a.disposeData(f.dataId);var v=he({inputs:{x:g},backend:a,attrs:{shape:c(c([],u(i.shape),!1),[s],!1)}});return a.disposeData(g.dataId),v}};function Vi(e){var t=e.inputs,n=e.backend,a=t.x;if("complex64"===a.dtype){var r=Wn({inputs:{input:a},backend:n}),i=Vi({inputs:{x:r},backend:n}),o=Yn({inputs:{input:a},backend:n}),s=Vi({inputs:{x:o},backend:n}),u=we({inputs:{real:i,imag:s},backend:n});return n.disposeData(r.dataId),n.disposeData(i.dataId),n.disposeData(o.dataId),n.disposeData(s.dataId),u}return le({attrs:{shape:a.shape,dtype:a.dtype,value:"string"===a.dtype?"":0},backend:n})}var Gi={kernelName:t.ZerosLike,backendName:"webgpu",kernelFunc:Vi};var Hi={kernelName:t.OnesLike,backendName:"webgpu",kernelFunc:function e(t){var n=t.inputs,a=t.backend,r=n.x;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){var i=Wn({inputs:{input:r},backend:a}),o=e({inputs:{x:i},backend:a}),s=Yn({inputs:{input:r},backend:a}),u=Vi({inputs:{x:s},backend:a}),c=we({inputs:{real:o,imag:u},backend:a});return a.disposeData(i.dataId),a.disposeData(o.dataId),a.disposeData(s.dataId),a.disposeData(u.dataId),c}return le({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:a})}};var Xi={kernelName:t.Pack,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs.axis;if(1===n.length)return dr({inputs:{input:n[0]},backend:a,attrs:{dim:r}});var i=n[0].shape,o=n[0].dtype;n.forEach((function(e){t.util.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),t.util.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var s=[],u=Zn({inputs:n.map((function(e){var t=dr({inputs:{input:e},backend:a,attrs:{dim:r}});return s.push(t),t})),backend:a,attrs:{axis:r}});return s.forEach((function(e){return a.disposeData(e.dataId)})),u}};function Ki(e,t){void 0===t&&(t=!1);var n=e.length,a=C(n),r=e.map((function(e,t){return"uniforms.pad".concat(t,"[0]")})).join(","),i=e.map((function(e,t){return"uniforms.pad".concat(t,"[0] + uniforms.xShape").concat(n>1?"[".concat(t,"]"):"")})).join(","),o=n>1?"".concat(a,"(").concat(r,")"):"".concat(r),s=n>1?"".concat(a,"(").concat(i,")"):"".concat(i),u=n>1?"any(paddedCoords < start)":"paddedCoords < start",c=n>1?"any(paddedCoords >= end)":"paddedCoords >= end",d=n>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,n):"coords";return"\n        let start = ".concat(o,";\n        let end = ").concat(s,";\n        if (").concat(u," || ").concat(c,") {\n          setOutputAtIndex(index, ").concat(t?0:"uniforms.constantValue",");\n        } else {\n          let coords = paddedCoords - start;\n          setOutputAtIndex(index, getX(").concat(d,"));\n        }\n  ")}var qi=function(){function e(e,t){var n=this;this.variableNames=["x"],this.uniforms="constantValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]})),this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),t.map((function(e,t){n.uniforms+=" pad".concat(t," : vec2<i32>,")})),this.xShape=e,this.shaderKey="pad"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let paddedCoords = getCoordsFromIndex(index);\n          ").concat(Ki(this.xShape),"\n        }\n      }\n    ")},e}(),Yi={kernelName:t.PadV2,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.paddings,s=r.constantValue;if(o.every((function(e){return t.util.arraysEqual(e,[0,0])})))return xe({inputs:{x:i},backend:a});if(0===t.util.sizeFromShape(i.shape))return le({backend:a,attrs:{shape:o.map((function(e,t){return e[0]+i.shape[t]+e[1]})),value:s,dtype:i.dtype}});var u=[{type:"float32",data:[s]}];o.map((function(e){return u.push({type:"int32",data:[e[0],e[1]]})}));var c=new qi(i.shape,o);return a.runWebGPUProgram(c,[i],i.dtype,u)}},ji=Ie({opType:G.POW}),Qi={kernelName:t.Pow,backendName:"webgpu",kernelFunc:ji};var Zi={kernelName:t.Prelu,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x,r=t.alpha,i=new ye(G.PRELU,a.shape,r.shape);return n.runWebGPUProgram(i,[a,r],"float32")}};var Ji={kernelName:t.Prod,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs;return Kt(t.x,a.axis,a.keepDims,"prod",n)}},$i={kernelName:t.Range,backendName:"webgpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,a=n.start,r=n.stop,i=n.step,o=n.dtype,s=yt(a,r,i,o);return t.makeTensorInfo([s.length],o,s)}},eo=Ie({opType:G.DIV}),to={kernelName:t.RealDiv,backendName:"webgpu",kernelFunc:eo},no=Se({opType:q.RECIPROCAL}),ao={kernelName:t.Reciprocal,backendName:"webgpu",kernelFunc:no},ro=Se({opType:q.RELU}),io={kernelName:t.Relu,backendName:"webgpu",kernelFunc:ro},oo=Se({opType:q.RELU6}),so={kernelName:t.Relu6,backendName:"webgpu",kernelFunc:oo},uo=function(){function e(e,t,n){this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, halfPixelCenters : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e[0],t,n,e[3]],this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="resizeBilinear"}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let d = coords[3];\n          let rc = coords.yz;\n\n          let effectiveInSize = vec2<f32>(\n            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveOutSize = vec2<f32>(\n            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveInputOverOutputRatioRC =\n              effectiveInSize / effectiveOutSize;\n\n          // Fractional source index\n          let sourceFracIndexRC =\n            (vec2<f32>(rc) + vec2<f32>(uniforms.halfPixelCenters)) *\n            effectiveInputOverOutputRatioRC - vec2<f32>(uniforms.halfPixelCenters);\n\n          // Compute the four integer indices.\n          let sourceFloorRC = vec2<i32>(sourceFracIndexRC);\n          let sourceCeilRC = vec2<i32>(\n            min(vec2<f32>(uniforms.xShape.yz) - vec2<f32>(1.0), ceil(sourceFracIndexRC)));\n\n          let topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);\n          let bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);\n          let topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);\n          let bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n          let fracRC = sourceFracIndexRC - vec2<f32>(sourceFloorRC);\n\n          let top = topLeft + (topRight - topLeft) * fracRC.y;\n          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n          let newValue = top + (bottom - top) * fracRC.x;\n\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    ")},e}();var co={kernelName:t.ResizeBilinear,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.images,i=a.alignCorners,o=a.size,s=a.halfPixelCenters,c=u(o,2),d=c[0],l=c[1],p=[{type:"float32",data:[i&&d>1?1:0,i&&l>1?1:0]},{type:"float32",data:[s?.5:0]}],h=new uo(r.shape,d,l);return n.runWebGPUProgram(h,[r],"float32",p)}},lo=function(){function e(e,t){this.variableNames=["dy"],this.uniforms="effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, heightScale : f32, widthScale : f32,\n       invHeightScale : f32, invWidthScale : f32, winHeight : i32, winWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.alignCorners=t,this.shaderKey="resizeBilinearBackprop_".concat(t)}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let b = coords[0];\n          let d = coords[3];\n          let r = coords[1];\n          let c = coords[2];\n\n          var accumulator = 0.0;\n\n          // Compute bounds for where in dy we will look\n          let startRLerp = floor(f32(r) * uniforms.invHeightScale);\n          let startDyR = i32(startRLerp - f32(uniforms.winHeight / 2));\n\n          let startCLerp = floor(f32(c) * uniforms.invWidthScale);\n          let startDyC = i32(startCLerp - f32(uniforms.winWidth / 2));\n\n          // Loop over dy\n          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {\n            let dyR = startDyR + dyROffset;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {\n              continue;\n            }\n\n            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {\n              let dyC = startDyC + dyCOffset;\n\n              // Guard against the window exceeding the bounds of dy\n              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {\n                continue;\n              }\n\n              let dxR = f32(dyR) * uniforms.heightScale;\n              let topDxRIndex = i32(floor(dxR));\n              let bottomDxRIndex = i32(min(ceil(dxR), f32(uniforms.outShape[1] - 1)));\n              let dxRLerp = dxR - f32(topDxRIndex);\n              let inverseDxRLerp = 1.0 - dxRLerp;\n\n              let dxC = f32(dyC) * uniforms.widthScale;\n              let leftDxCIndex = i32(floor(dxC));\n              let rightDxCIndex = i32(min(ceil(dxC), f32(uniforms.outShape[2] - 1)));\n              let dxCLerp = dxC - f32(leftDxCIndex);\n              let inverseDxCLerp = 1.0 - dxCLerp;\n\n              if (r == topDxRIndex && c == leftDxCIndex) {\n                // topLeft\n                accumulator +=\n                  getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n              }\n\n              if (r == topDxRIndex && c == rightDxCIndex) {\n                // topRight\n                accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n              }\n\n              if (r == bottomDxRIndex && c == leftDxCIndex) {\n                // bottomLeft\n                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n              }\n\n              if (r == bottomDxRIndex && c == rightDxCIndex) {\n                // bottomRight\n                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n              }\n            }\n          }\n          // End loop over dy\n\n          setOutputAtIndex(index, accumulator);\n        }\n      }\n    ")},e}();var po={kernelName:t.ResizeBilinearGrad,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.images,i=t.dy,o=a.alignCorners,s=u(r.shape,3),c=s[1],d=s[2],l=u(i.shape,3),p=l[1],h=l[2],f=[o&&p>1?c-1:c,o&&h>1?d-1:d],m=[o&&p>1?p-1:p,o&&h>1?h-1:h],g=f[0]/m[0],v=f[1]/m[1],y=1/g,x=1/v,b=2*Math.ceil(y)+2,w=2*Math.ceil(x)+2,C=new lo(r.shape,o),k=[{type:"int32",data:f},{type:"int32",data:m},{type:"float32",data:[g]},{type:"float32",data:[v]},{type:"float32",data:[y]},{type:"float32",data:[x]},{type:"int32",data:[b]},{type:"int32",data:[w]}];return n.runWebGPUProgram(C,[i],i.dtype,k)}},ho=function(){function e(e,t,n,a){this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, roundBase : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e[0],t,n,e[3]],this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.halfPixelCenters=a,this.shaderKey="resizeNearest_".concat(a)}return e.prototype.getUserCode=function(){var e;return e=this.halfPixelCenters?"max((vec2<f32>(rc) + vec2<f32>(0.5)) * effectiveInputOverOutputRatioRC, vec2<f32>(0.0))":"vec2<f32>(rc) * effectiveInputOverOutputRatioRC","\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let d = coords[3];\n          let rc = coords.yz;\n\n          let effectiveInSize = vec2<f32>(\n            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveOutSize = vec2<f32>(\n            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveInputOverOutputRatioRC =\n              effectiveInSize / effectiveOutSize;\n\n          // Fractional source index\n          let sourceFracIndexRC = ").concat(e,";\n\n          // Compute the coordinators of nearest neighbor point.\n          let inputShapeRC = vec2<f32>(f32(uniforms.xShape.y), f32(uniforms.xShape.z));\n          let sourceNearestRC = vec2<i32>(\n            min(inputShapeRC - 1.0, floor(sourceFracIndexRC + uniforms.roundBase)));\n          let newValue = getX(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    ")},e}();var fo={kernelName:t.ResizeNearestNeighbor,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.images,i=a.alignCorners,o=a.halfPixelCenters,s=u(a.size,2),c=s[0],d=s[1],l=[{type:"float32",data:[i&&c>1?1:0,i&&d>1?1:0]},{type:"float32",data:[i?.5:0]}],p=new ho(r.shape,c,d,o);return n.runWebGPUProgram(p,[r],r.dtype,l)}},mo=function(){function e(e,t){this.variableNames=["dy"],this.uniforms="effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, invHeightScale : f32, invWidthScale : f32,\n       winHeight : i32, winWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.alignCorners=t,this.shaderKey="resizeNearestNeigborBackprop_".concat(t)}return e.prototype.getUserCode=function(){return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let b = coords[0];\n          let d = coords[3];\n          let r = coords[1];\n          let c = coords[2];\n\n          var accumulator = 0.0;\n\n          // Compute bounds for where in dy we will look\n          let startRLerp = floor(f32(r) * uniforms.invHeightScale);\n          let startDyR = i32(floor(startRLerp - f32(uniforms.winHeight / 2)));\n\n          let startCLerp = floor(f32(c) * uniforms.invWidthScale);\n          let startDyC = i32(floor(startCLerp - f32(uniforms.winWidth / 2)));\n\n          // Loop over dy\n          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {\n            let dyR = startDyR + dyROffset;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {\n              continue;\n            }\n\n            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {\n              let dyC = startDyC + dyCOffset;\n\n              // Guard against the window exceeding the bounds of dy\n              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {\n                continue;\n              }\n\n              let sourceFracRow = f32(uniforms.effectiveXSize[0]) *\n                  (f32(dyR) / f32(uniforms.effectiveYSize[0]));\n\n              let sourceFracCol = f32(uniforms.effectiveXSize[1]) *\n                  (f32(dyC) / f32(uniforms.effectiveYSize[1]));\n\n              let sourceNearestRow =\n                  i32(min(f32(uniforms.outShape[1] - 1),\n                  ").concat(this.alignCorners?"floor(sourceFracRow + 0.5)":"floor(sourceFracRow)","));\n\n              let sourceNearestCol =\n                  i32(min(f32(uniforms.outShape[2] - 1),\n                  ").concat(this.alignCorners?"floor(sourceFracCol + 0.5)":"floor(sourceFracCol)","));\n\n              if (r == sourceNearestRow && c == sourceNearestCol) {\n                accumulator += getDy(b, dyR, dyC, d);\n              }\n            }\n          }\n          // End loop over dy\n\n          setOutputAtIndex(index, accumulator);\n        }\n      }\n    ")},e}();var go={kernelName:t.ResizeNearestNeighborGrad,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.images,i=t.dy,o=a.alignCorners,s=u(r.shape,3),c=s[1],d=s[2],l=u(i.shape,3),p=l[1],h=l[2],f=[o&&p>1?c-1:c,o&&h>1?d-1:d],m=[o&&p>1?p-1:p,o&&h>1?h-1:h],g=1/(f[0]/m[0]),v=1/(f[1]/m[1]),y=2*Math.ceil(g)+2,x=2*Math.ceil(v)+2,b=new mo(r.shape,o),w=[{type:"int32",data:f},{type:"int32",data:m},{type:"float32",data:[g]},{type:"float32",data:[v]},{type:"int32",data:[y]},{type:"int32",data:[x]}];return n.runWebGPUProgram(b,[i],i.dtype,w)}},vo=function(){function e(e){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms=" axis : vec4<i32>,",this.shaderKey="reverse"}return e.prototype.getUserCode=function(){return"\n      ".concat("\n      // Using uniform variables as judging conditions, so the function has\n      // coherent execution within all threads.\n      fn getReverseCoords(coords : vec4<i32>) -> vec4<i32> {\n        var reverseCoords = coords;\n        if (uniforms.axis[0] == 1) {\n          reverseCoords[0] = uniforms.xShape[0] - coords[0] - 1;\n        }\n        if (uniforms.axis[1] == 1) {\n          reverseCoords[1] = uniforms.xShape[1] - coords[1] - 1;\n        }\n        if (uniforms.axis[2] == 1) {\n          reverseCoords[2] = uniforms.xShape[2] - coords[2] - 1;\n        }\n        if (uniforms.axis[3] == 1) {\n          reverseCoords[3] = uniforms.xShape[3] - coords[3] - 1;\n        }\n\n        return reverseCoords;\n      }\n    ","\n      ").concat(S("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let reverseCoords = getReverseCoords(coords);\n          setOutputAtIndex(index, getX(reverseCoords[0],\n              reverseCoords[1], reverseCoords[2], reverseCoords[3]));\n        }\n      }\n    ")},e}();var yo={kernelName:t.Reverse,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.dims,s=i.shape.length;if(0===s)return xe({inputs:{x:i},backend:a});var u=i.shape,c=[1,1,1,1];u.forEach((function(e,t){c[t+4-s]=e}));var d=t.util.parseAxisParam(o,i.shape),l=[0,0,0,0];d.forEach((function(e){l[e+4-s]=1}));var p=[{type:"int32",data:l}],h=he({inputs:{x:i},backend:a,attrs:{shape:c}}),f=new vo(c),m=a.runWebGPUProgram(f,[h],h.dtype,p);a.disposeData(h.dataId);var g=he({inputs:{x:m},backend:a,attrs:{shape:u}});return a.disposeData(m.dataId),g}},xo=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms="centerX : f32, centerY : f32, sinRadians : f32,\n          cosRadians : f32,",this.shaderKey="rotate",this.outputShape=e,"number"==typeof t?(this.uniforms+=" fillValue : f32,",this.fillSnippet="var outputValue = uniforms.fillValue;",this.shaderKey+="_float"):(this.uniforms+=" fillValue : vec3<f32>,",this.fillSnippet="var outputValue = uniforms.fillValue[coords[3]];",this.shaderKey+="_vec3")}return e.prototype.getUserCode=function(){return"\n        ".concat(S("index")," {\n          if (index < uniforms.size) {\n            let coords = getCoordsFromIndex(index);\n            let coordXFloat = (f32(coords[2]) - uniforms.centerX) *\n                uniforms.cosRadians - (f32(coords[1]) - uniforms.centerY) *\n                uniforms.sinRadians;\n            let coordYFloat = (f32(coords[2]) - uniforms.centerX) *\n                uniforms.sinRadians + (f32(coords[1]) - uniforms.centerY) *\n                uniforms.cosRadians;\n            let coordX = i32(round(coordXFloat + uniforms.centerX));\n            let coordY = i32(round(coordYFloat + uniforms.centerY));\n            ").concat(this.fillSnippet,"\n            if(coordX >= 0 && coordX < uniforms.xShape[2] && coordY >= 0 &&\n                coordY < uniforms.xShape[1]) {\n              outputValue = getX(coords[0], coordY, coordX, coords[3]);\n            }\n            setOutputAtIndex(index, outputValue);\n          }\n        }\n      ")},e}(),bo={kernelName:t.RotateWithOffset,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.attrs,r=e.backend,i=n.image,o=a.radians,s=a.fillValue,c=a.center,d=r,l=new xo(i.shape,s),p=u(t.backend_util.getImageCenter(c,i.shape[1],i.shape[2]),2),h=[{type:"float32",data:[p[0]]},{type:"float32",data:[p[1]]},{type:"float32",data:[Math.sin(o)]},{type:"float32",data:[Math.cos(o)]}];return"number"==typeof s?h.push({type:"float32",data:[Number.parseFloat(s.toFixed(2))]}):h.push({type:"float32",data:s}),d.runWebGPUProgram(l,[i],i.dtype,h)}},wo=Se({opType:q.ROUND}),Co={kernelName:t.Round,backendName:"webgpu",kernelFunc:wo},ko=Se({opType:q.RSQRT,cpuKernelImpl:xt}),So={kernelName:t.Rsqrt,backendName:"webgpu",kernelFunc:ko},Io=function(){function e(e,t,n,a,r,i,o,s){void 0===s&&(s=!0),this.variableNames=["updates","indices"],this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=i,this.type=o,this.sumDupeIndices=s,this.dispatchLayout=O(e),this.dispatch=L(this.dispatchLayout,e,this.workgroupSize),this.sliceDimGreaterThanOne=t>1,this.shaderKey="scatter_".concat(n,"_").concat(a,"_").concat(this.sliceDimGreaterThanOne,"_").concat(o,"_").concat(s,"_").concat(r.length);var u=C(r.length);this.uniforms="sliceDim : i32, strides: ".concat(u,", updatesSize: i32,"),this.updatesRank=a,this.indicesRank=n}return e.prototype.getUserCode=function(){var e="";1===this.indicesRank?e="coords[0]":2===this.indicesRank&&(e="coords[0], j");var t="getIndices(".concat(e,")"),n=this.sliceDimGreaterThanOne?"uniforms.strides[j]":"uniforms.strides",a="",r="";1===this.dispatchLayout.x.length?(a="flattenedIndex",r="\n      fn getUpdatesCoordsFromFlatIndex(index : i32) -> i32 {\n        return index;\n      }\n      "):2===this.dispatchLayout.x.length&&(a="vec2<i32>(flattenedIndex, coords[1])",r="\n      fn getUpdatesCoordsFromFlatIndex(index : i32) -> vec2<i32> {\n        // N.B. |updates| could be a scalar tensor, conceptually representing a\n        // 2D tensor with all values equal to that. By design, its size must be\n        // the same as |outShape[1]| in one dimension, and |indicesShape[0]|\n        // gives the other.\n        let sliceSize = uniforms.outShape[1];\n        let d0 = index / sliceSize;\n        let d1 = index - d0 * sliceSize;\n        return vec2<i32>(d0, d1);\n      }\n      ");var i=Array.from({length:this.updatesRank},(function(e,t){return"coords[".concat(t,"]")})),o="getUpdates(".concat(i.join(", "),")");return"\n    ".concat(r,"\n      ").concat(S("index")," {\n        if (index < uniforms.updatesSize) {\n          let coords = getUpdatesCoordsFromFlatIndex(index);\n          var flattenedIndex = 0;\n          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n            let indexInside = i32(round(").concat(t,"));\n            flattenedIndex = flattenedIndex + indexInside * ").concat(n,";\n          }\n          let updateValue =\n              ").concat(D(this.type),"(").concat(o,");\n          let flatIndex = getOutputIndexFromCoords(").concat(a,");\n\n          ").concat(this.sumDupeIndices?x("&result[flatIndex]","updateValue",this.type):"atomicStore(&result[flatIndex], bitcast<i32>(updateValue));","\n        }\n      }")},e}();var Ro={kernelName:t.ScatterNd,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.indices,o=n.updates,s=r.shape,u=t.backend_util.calculateShapes(o,i,s),c=u.sliceRank,d=u.numUpdates,l=u.sliceSize,p=u.strides,h=u.outputSize,f=[h/l,l];if(0===h)return a.makeTensorInfo(s,i.dtype);var m=he({inputs:{x:i},backend:a,attrs:{shape:[d,c]}}),g=he({inputs:{x:o},backend:a,attrs:{shape:[d,l]}}),v=g.dtype,y=le({backend:a,attrs:{shape:f,value:0,dtype:v}}),x=[{type:"int32",data:[c]},{type:"int32",data:p},{type:"int32",data:[t.util.sizeFromShape(g.shape)]}],b=new Io(g.shape,c,m.shape.length,g.shape.length,p,f,v),w=a.runWebGPUProgram(b,[g,m],v,x,y),C=he({inputs:{x:w},backend:a,attrs:{shape:s}});return a.disposeData(m.dataId),a.disposeData(g.dataId),a.disposeData(w.dataId),C}},Po=function(){function e(e,t){this.outputShape=[],this.variableNames=["sortedSequence","values"],this.uniforms="numInputs : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.side=t,this.shaderKey="search_sorted_".concat(t)}return e.prototype.getUserCode=function(){var e="left"===this.side?"<":"<=";return"\n      fn findBound(batch: i32, value: f32) -> i32 {\n        var left = i32(0);\n        var right = uniforms.numInputs;\n        while (left < right) {\n          var mid = (left + right) / 2;\n          if (getSortedSequence(batch, mid) ".concat(e," value) {\n            left = mid + 1;\n          } else {\n            right = mid;\n          }\n        }\n        return right;\n      }\n\n      ").concat(S("index")," {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let value = getValuesByOutputIndex(index);\n          setOutputAtIndexI32(index, findBound(coords[0], value));\n        }\n      }\n    ")},e}();var zo={kernelName:t.SearchSorted,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.sortedSequence,i=t.values,o=a.side,s=new Po([i.shape[0],i.shape[1]],o),u=[{type:"int32",data:[r.shape[1]]}];return n.runWebGPUProgram(s,[r,i],"int32",u)}},Ao=function(){function e(e,t,n){this.variableNames=["c","a","b"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.cRank=e,this.rank=n,this.shaderKey="select"}return e.prototype.getUserCode=function(){var e,t;if(this.rank>4)throw Error("Where for rank ".concat(this.rank," is not yet supported"));if(1===this.rank)t="resRC",e="resRC";else{for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],r=[],i=0;i<this.outputShape.length;i++)r.push("".concat(n[i])),i<this.cRank&&a.push("".concat(n[i]));e=a.join(),t=r.join()}return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          let cVal = getC(").concat(e,");\n          if (cVal >= 1.0) {\n            setOutputAtIndex(index, getA(").concat(t,"));\n          } else {\n            setOutputAtIndex(index, getB(").concat(t,"));\n          }\n        }\n      }\n    ")},e}();var No={kernelName:t.Select,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=n.condition,i=n.t,o=n.e,s=new Ao(r.shape.length,i.shape,i.shape.length);return a.runWebGPUProgram(s,[r,i,o],t.upcastType(i.dtype,o.dtype))}},Do=Se({opType:q.SELU}),Fo={kernelName:t.Selu,backendName:"webgpu",kernelFunc:Do},To=Se({opType:q.SIGMOID}),_o={kernelName:t.Sigmoid,backendName:"webgpu",kernelFunc:To},Lo=Se({opType:q.SIGN}),Wo={kernelName:t.Sign,backendName:"webgpu",kernelFunc:Lo},Eo=Se({opType:q.SIN}),Bo={kernelName:t.Sin,backendName:"webgpu",kernelFunc:Eo},Oo=Se({opType:q.SINH}),Uo={kernelName:t.Sinh,backendName:"webgpu",kernelFunc:Oo},Mo=Se({opType:q.SOFTPLUS}),Vo={kernelName:t.Softplus,backendName:"webgpu",kernelFunc:Mo},Go=function(){function e(e,t,n,a,r,i){var o=this;this.variableNames=["x"],this.outputShape=[],this.uniforms="",this.workgroupSize=[64,1,1],this.size=!0;for(var s=new Array(a.length),u=0;u<s.length;u++)s[u]=a[r[u]];this.outputShape=s,this.newDim=r,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.xShape=e,this.paddedXShape=t,this.uniforms+="reshapedPaddedXShape : ".concat(C(a.length),", paddedXShapeStrides : ").concat(C(i),", "),n.map((function(e,t){o.uniforms+=" pad".concat(t," : vec2<i32>,")})),this.shaderKey="spaceToBatchND_".concat(r)}return e.prototype.getUserCode=function(){var e=C(this.outputShape.length),t=Mt(this.newDim);return"\n      ".concat(z(this.paddedXShape,"PaddedX"),"\n      ").concat(S("index")," {\n        if(index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let switchedIndex = getIndexFromCoords").concat(this.outputShape.length,"D(").concat(e,"(").concat(t,"), uniforms.reshapedPaddedXShape);\n          let paddedCoords = getPaddedXCoordsFromIndex(switchedIndex);\n          ").concat(Ki(this.xShape,!0),"\n        }\n      }\n    ")},e}(),Ho={kernelName:t.SpaceToBatchND,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.blockShape,s=r.paddings;t.util.assert(i.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGPU backend not implemented yet"}));var d=o.reduce((function(e,t){return e*t})),l=[[0,0]];l.push.apply(l,c([],u(s),!1));for(var p=1+o.length;p<i.shape.length;++p)l.push([0,0]);var h=l.map((function(e,t){return e[0]+i.shape[t]+e[1]})),f=t.backend_util.getReshaped(h,o,d,!1),m=t.backend_util.getPermuted(f.length,o.length,!1),g=t.backend_util.getReshapedPermuted(h,o,d,!1),v=t.util.computeStrides(h),y=new Go(i.shape,h,l,f,m,v.length),x=[{type:"int32",data:f},{type:"int32",data:v}];l.map((function(e){return x.push({type:"int32",data:[e[0],e[1]]})}));var b=a.runWebGPUProgram(y,[i],i.dtype,x),w=he({inputs:{x:b},backend:a,attrs:{shape:g}});return a.disposeData(b.dataId),w}},Xo=function(){function e(e,t,n){this.variableNames=["input","indices","segmentIds"],this.outputShape=[],this.uniforms="segmentSize : i32, sparseSize : i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=e,this.type=n,this.dispatchLayout=O([t]),this.dispatch=L(this.dispatchLayout,[t],this.workgroupSize),this.shaderKey="sparseSegmentSum"}return e.prototype.getUserCode=function(){return"\n    ".concat(S("index")," {\n      if (index < uniforms.sparseSize) {\n        let indexInSegmentIds = index / uniforms.segmentSize;\n        let indexInSegment = index % uniforms.segmentSize;\n        let indexInInput = indices[indexInSegmentIds];\n        let segmentId = segmentIds[indexInSegmentIds];\n\n        let value = input[indexInInput * uniforms.segmentSize + indexInSegment];\n        let outIndex = segmentId * uniforms.segmentSize + indexInSegment;\n        ").concat(x("&result[outIndex]","value",this.type),"\n      }\n    }\n  ")},e}(),Ko=function(){function e(e,t){this.variableNames=["segmentIds"],this.outputShape=[],this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=[e],this.dispatchLayout=O(t),this.dispatch=L(this.dispatchLayout,t,this.workgroupSize),this.shaderKey="sparseSegmentIdCountProgram"}return e.prototype.getUserCode=function(){return"\n    ".concat(S("index")," {\n      if (index < uniforms.segmentIdsShape) {\n        let segmentId = segmentIds[index];\n        ").concat(x("&result[segmentId]","1","int32"),"\n      }\n    }\n  ")},e}(),qo=function(){function e(e,t){this.variableNames=["segmentSum","sameSegmentIdCount"],this.outputShape=[],this.uniforms="segmentSize : i32",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.type=t,this.dispatchLayout=O(e),this.dispatch=L(this.dispatchLayout,e,this.workgroupSize),this.shaderKey="sparseSegmentMean"}return e.prototype.getUserCode=function(){return"\n    ".concat(S("index")," {\n      if (index < uniforms.size) {\n        let segmentId = index / uniforms.segmentSize;\n        let count = sameSegmentIdCount[segmentId];\n        if (count != 0) {\n          ").concat("float32"===this.type?"setOutputAtIndex(index, segmentSum[index] / f32(count));":"setOutputAtIndexI32(index, segmentSum[index] / count);","\n        }\n      }\n    }\n  ")},e}();function Yo(e,n,a,r,i){void 0===r&&(r=!1);var o,s=t.util.sizeFromShape(e.shape)/e.shape[0],u=e.dtype,c=t.util.sizeFromShape(n.shape),d=i.readSync(a.dataId),l=c>0?d[c-1]+1:0,p=e.shape.slice();p[0]=l;var h=c*s,f=le({backend:i,attrs:{shape:p,value:0,dtype:u}});o=new Xo(p,h,u);var m=[{type:"int32",data:[s]},{type:"int32",data:[h]}],g=i.runWebGPUProgram(o,[e,n,a],u,m,f);if(r)return g;var v=le({backend:i,attrs:{shape:[l],value:0,dtype:"int32"}});o=new Ko(l,a.shape);var y=i.runWebGPUProgram(o,[a],"int32",null,v),x=le({backend:i,attrs:{shape:p,value:0,dtype:u}});o=new qo(p,u),m=[{type:"int32",data:[s]}];var b=i.runWebGPUProgram(o,[g,y],u,m,x);return i.disposeData(g.dataId),i.disposeData(y.dataId),b}var jo={kernelName:t.SparseSegmentMean,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend;return Yo(t.data,t.indices,t.segmentIds,!1,n)}};var Qo={kernelName:t.SparseSegmentSum,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend;return Yo(t.data,t.indices,t.segmentIds,!0,n)}},Zo=function(){function e(e,t){this.variableNames=["A"],this.workgroupSize=[64,1,1],this.size=!0;for(var n=new Array(e.length),a=0;a<n.length;a++)n[a]=e[a]*t[a];this.outputShape=n,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.rank=this.outputShape.length,this.shaderKey="tile"}return e.prototype.getUserCode=function(){var e=function(e,t){void 0===t&&(t="");if(e>=5)throw Error("Tile for rank ".concat(e," is not yet supported"));if(1===e)return"(resRC % ".concat(t,"aShape)");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],r=0;r<e;r++)a.push("(".concat(n[r]," % ").concat(t,"aShape[").concat(r,"])"));return a.join()}(this.rank,"uniforms.");return"\n      ".concat(S("index")," {\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          setOutputAtIndex(index, getA(").concat(e,"));\n        }\n      }\n    ")},e}();function Jo(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.reps;if(a.shouldExecuteOnCPU([i])||"string"===i.dtype||i.shape.length>=5){var s=a.readSync(i.dataId),u="string"===i.dtype?s.map((function(e){return t.util.decodeString(e)})):s,c=t.buffer(i.shape,i.dtype,u),d=Rt(c,o);return a.makeTensorInfo(d.shape,d.dtype,d.values)}var l=new Zo(i.shape,o);return a.runWebGPUProgram(l,[i],i.dtype)}var $o={kernelName:t.Tile,backendName:"webgpu",kernelFunc:Jo};var es={kernelName:t.SparseToDense,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.sparseIndices,o=n.sparseValues,s=n.defaultValue,u=r.outputShape,c=t.backend_util.calculateShapes(o,i,u),d=c.sliceRank,l=c.numUpdates,p=c.sliceSize,h=c.strides,f=c.outputSize,m=!1;if("string"===o.dtype){var g=a.bufferSync(i),v=a.bufferSync(o),y=t.util.decodeString(a.readSync(s.dataId)[0]),x=bt(g,v,u,f,p,l,d,h,y,m);return a.makeTensorInfo(u,x.dtype,x.values)}var b=[f/p,p],w=he({inputs:{x:i},backend:a,attrs:{shape:[l,d]}}),C=o.shape.length?he({inputs:{x:o},backend:a,attrs:{shape:[l,p]}}):xe({inputs:{x:o},backend:a}),k=C.dtype,S=a.makeTensorInfo([],k,t.util.makeZerosTypedArray(1,k)),I=he({inputs:{x:s},backend:a,attrs:{shape:Array(b.length).fill(1)}}),R=Jo({inputs:{x:I},backend:a,attrs:{reps:b}}),P=[{type:"int32",data:[d]},{type:"int32",data:h},{type:"int32",data:[t.util.sizeFromShape([l,p])]}];switch(l){case 0:break;case 1:var z=new Io([l,p],d,w.shape.length,C.shape.length,h,b,k,m);a.runWebGPUProgram(z,[C,w],k,P,R);break;default:z=new Io([l,p],d,w.shape.length,S.shape.length,h,b,k,m);a.runWebGPUProgram(z,[S,w],k,P,R);z=new Io([l,p],d,w.shape.length,C.shape.length,h,b,k);a.runWebGPUProgram(z,[C,w],k,P,R)}var A=he({inputs:{x:R},backend:a,attrs:{shape:u}});return a.disposeData(w.dataId),a.disposeData(C.dataId),a.disposeData(I.dataId),a.disposeData(S.dataId),a.disposeData(R.dataId),A}};var ts={kernelName:t.SplitV,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.numOrSizeSplits,s=r.axis,d=t.util.parseAxisParam(s,i.shape)[0],l=t.backend_util.prepareSplitSize(i,o,d),p=i.shape.length,h=new Array(p).fill(0),f=i.shape.slice();return l.map((function(e){var t=c([],u(f),!1);t[d]=e;var n=Rn({inputs:{x:i},backend:a,attrs:{begin:h,size:t}});return h[d]+=e,n}))}},ns=Se({opType:q.SQRT}),as={kernelName:t.Sqrt,backendName:"webgpu",kernelFunc:ns},rs={kernelName:t.Square,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x,r=n,i=new ke(a.shape,q.SQUARE);return r.runWebGPUProgram(i,[a],a.dtype)}},is=Ie({opType:G.SQUARED_DIFFERENCE}),os={kernelName:t.SquaredDifference,backendName:"webgpu",kernelFunc:is};var ss={kernelName:t.Step,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,r=t.x,i=new ke(r.shape,q.STEP,"stepAlpha : f32,"),o=[{type:"float32",data:[n.alpha]}];return a.runWebGPUProgram(i,[r],r.dtype,o)}},us=function(){function e(e){this.variableNames=["x"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]);var t=C(this.outputShape.length);this.uniforms="begin : ".concat(t,",  strides : ").concat(t,", "),this.shaderKey="stridedSlice"}return e.prototype.getUserCode=function(){var e=this,t="";if(1===this.outputShape.length)t="coords * uniforms.strides + uniforms.begin";else{var n=0;t=this.outputShape.map((function(t,a){return n++,1===e.outputShape.length?"coords * uniforms.strides[".concat(a,"] + uniforms.begin[").concat(a,"]"):"coords[".concat(n-1,"] * uniforms.strides[").concat(a,"] + uniforms.begin[").concat(a,"]")})).join(",")}return"\n       ".concat(S("index")," {\n         if (index < uniforms.size) {\n           let coords = getCoordsFromIndex(index);\n           setOutputAtIndex(index, getX(").concat(t,"));\n         }\n       }\n     ")},e}();var cs={kernelName:t.StridedSlice,backendName:"webgpu",kernelFunc:function(e){var n,a=e.inputs,r=e.backend,i=e.attrs,o=a.x,s=i.begin,u=i.end,c=i.strides,d=i.beginMask,l=i.endMask,p=i.ellipsisMask,h=i.newAxisMask,f=i.shrinkAxisMask,m=t.slice_util.sliceInfo(o.shape,s,u,c,d,l,p,h,f),g=m.finalShapeSparse,v=m.finalShape,y=m.isIdentity,x=m.sliceDim0,b=m.isSimpleSlice,w=m.begin,C=m.end,k=m.strides;if(y)n=he({inputs:{x:o},backend:r,attrs:{shape:v}});else if(x||b){t.util.assert(o.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(o.shape.length)}));var S=t.slice_util.computeOutShape(w,C,k),I=Rn({inputs:{x:o},backend:r,attrs:{begin:w,size:S}});n=he({inputs:{x:I},backend:r,attrs:{shape:v}}),r.disposeData(I.dataId)}else{if(r.shouldExecuteOnCPU([o])){var R=r.readSync(o.dataId),P=t.buffer(o.shape,o.dtype,R),z=kt(g,P,k,w);n=r.makeTensorInfo(v,o.dtype,z.values)}else{var A=new us(g),N=[{type:"int32",data:w},{type:"int32",data:k}];n=he({inputs:{x:z=r.runWebGPUProgram(A,[o],o.dtype,N)},backend:r,attrs:{shape:v}}),r.disposeData(z.dataId)}}return n}};var ds={kernelName:t.StringNGrams,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=a.separator,i=a.nGramWidths,o=a.leftPad,s=a.rightPad,c=a.padWidth,d=a.preserveShortSequences,l=t.data,p=t.dataSplits,h=n.readSync(l.dataId),f=n.readSync(p.dataId),m=u(St(h,f,r,i,o,s,c,d),2),g=m[0],v=m[1];return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(p.shape,"int32",v)]}},ls=Ie({opType:G.SUB,cpuKernelImpl:It,supportsComplex:!0}),ps={kernelName:t.Sub,backendName:"webgpu",kernelFunc:ls},hs=Se({opType:q.TAN}),fs={kernelName:t.Tan,backendName:"webgpu",kernelFunc:hs},ms=Se({opType:q.TANH}),gs={kernelName:t.Tanh,backendName:"webgpu",kernelFunc:ms};var vs={kernelName:t.TensorScatterUpdate,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend;e.attrs;var r=n.tensor,i=n.indices,o=n.updates,s=t.backend_util.calculateShapes(o,i,r.shape),u=s.sliceRank,c=s.numUpdates,d=s.sliceSize,l=s.strides,p=s.outputSize,h=[p/d,d];if(0===p)return a.makeTensorInfo(r.shape,i.dtype);var f=[],m=he({inputs:{x:i},backend:a,attrs:{shape:[c,u]}});f.push(m);var g=he({inputs:{x:o},backend:a,attrs:{shape:[c,d]}});f.push(g);var v=he({inputs:{x:r},backend:a,attrs:{shape:h}});f.push(v);var y=Jo({inputs:{x:v},backend:a,attrs:{reps:Array(h.length).fill(1)}}),x=new Io([c,d],u,m.shape.length,g.shape.length,l,h,r.dtype,!1),b=[{type:"int32",data:[u]},{type:"int32",data:l},{type:"int32",data:[t.util.sizeFromShape([c,d])]}],w=a.runWebGPUProgram(x,[g,m],v.dtype,b,y);f.push(w);var C=he({inputs:{x:w},backend:a,attrs:{shape:r.shape}});return f.forEach((function(e){return a.disposeData(e.dataId)})),C}},ys=function(){function e(e){this.variableNames=["x","indices"],this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms="inputSize : i32, firstPass : i32, negativeInf : f32,\n        dir : i32, inc : i32,",this.shaderKey="swap"}return e.prototype.getUserCode=function(){return"\n        ".concat(S("index")," {\n          if (index < uniforms.size) {\n            let outC = getCoordsFromIndex(index);\n            let batch = outC[0];\n            let elemIdx = outC[1];\n            // We compare elements pair-wise within a group of size 2 * inc.\n            // The comparing rule for each group alternates between ascending\n            // and descending. Within each group, we compare each pair at\n            // positions i and i+inc. To decide whether an element at position i\n            // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n            // inc, it is in the first half of the group, we denote it as x0,\n            // otherwise we denote it as x1.\n            // For example, as shown in the Bitonic top K paper referenced\n            // above, Figure5(a) shows that element[1] is in the second half of\n            // the group when group size is 2, but it is in the first half of\n            // the group when group size is 4.\n            let isFirstInPair = elemIdx % (2 * uniforms.inc) < uniforms.inc;\n            var i = 0;\n            if (isFirstInPair) {\n              i = elemIdx;\n            } else {\n              i = elemIdx - uniforms.inc;\n            }\n\n            var i0 = 0;\n            if (uniforms.firstPass == 1) {\n              i0 = i;\n            } else {\n              i0 = i32(getIndices(batch, i));\n            }\n\n            var i1 = 0;\n            if (uniforms.firstPass == 1) {\n              i1 = i + uniforms.inc;\n            } else {\n              i1 = i32(getIndices(batch, i + uniforms.inc));\n            }\n\n            var x0 = f32(0.0);\n            var x1 = f32(0.0);\n            if (i0 < uniforms.inputSize) {\n              x0 = getX(batch, i0);\n            } else {\n              x0 = uniforms.negativeInf;\n            }\n            if (i1 < uniforms.inputSize) {\n              x1 = getX(batch, i1);\n            } else {\n              x1 = uniforms.negativeInf;\n            }\n\n            let reverse = elemIdx % (2 * uniforms.dir) >= uniforms.dir;\n            let isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n            if (reverse == isGreater) {\n              // Elements in opposite order of direction\n              let iTemp = i0;\n              i0 = i1;\n              i1 = iTemp;\n            }\n            if (isFirstInPair) {\n              setOutputAtIndex(index, f32(i0));\n            } else {\n              setOutputAtIndex(index, f32(i1));\n            }\n          }\n        }\n      ")},e}(),xs=function(){function e(e){this.variableNames=["x","indices"],this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms="inputSize : i32, firstPass : i32, k : i32,",this.shaderKey="merge"}return e.prototype.getUserCode=function(){return"\n        ".concat(S("index")," {\n          if (index < uniforms.size) {\n            let outC = getCoordsFromIndex(index);\n            let batch = outC[0];\n            let elemIdx = outC[1];\n            // The output size is half of the previous size.\n            // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _\n            // (k=4), we only need to output the indices at positions |, the\n            // indices at positions _ can be thrown away, see Figure5(b) After\n            // Phase 2 (Merge phase) in the Bitonic Top K paper referenced\n            // above.\n            // For example, the paper shows we only need to output the orange\n            // bars. The output sequence should look like this | | | | | | | |.\n            // Because the sequence is halved, to map the output index back to\n            // the previous sequence to find the corresponding value, we need\n            // to double the index. When we double the index, we basically\n            // interpolate a position, so 2i looks like\n            // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k\n            // position of each 2k positions by - elemIdx % k. E.g. for output\n            // at index 4,5,6,7, we want to get the corresponding element at\n            // original index 8,9,10,11, for output at index 8,9,10,11,\n            // we want to get the corresponding element at original index\n            // 16,17,18,19, so on and so forth.\n\n            var i = 0;\n            if (elemIdx < uniforms.k) {\n              i = elemIdx;\n            } else {\n              i = elemIdx * 2 - elemIdx % uniforms.k;\n            }\n            var i0 = 0;\n            if (uniforms.firstPass == 1) {\n              i0 = i;\n            } else {\n              i0 = i32(getIndices(batch, i));\n            }\n            var i1 = 0;\n            if (uniforms.firstPass == 1) {\n              i1 = i + uniforms.k;\n            } else {\n              i1 = i32(getIndices(batch, i + uniforms.k));\n            }\n\n            let x0 = getX(batch, i0);\n            var x1 = f32(0.0);\n            if (i1 < uniforms.inputSize) {\n              x1 = getX(batch, i1);\n            } else {\n              x1 = x0;\n            }\n\n            if (x0 >= x1) {\n              setOutputAtIndex(index, f32(i0));\n            } else {\n              setOutputAtIndex(index, f32(i1));\n            }\n          }\n        }\n      ")},e}();function bs(e,t){null!==t&&e.disposeData(t.dataId)}function ws(e){for(var t=1;t<e;)t*=2;return t}var Cs={kernelName:t.TopK,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=r.k,s=r.sorted,c=i.shape,d=c[c.length-1];if(a.shouldExecuteOnCPU([i])){var l=a.readSync(i.dataId),p=u(Pt(l,c,i.dtype,o,s),2),h=p[0],f=p[1];return[a.makeTensorInfo(h.shape,h.dtype,h.values),a.makeTensorInfo(f.shape,f.dtype,f.values)]}if(0===o)return c[c.length-1]=0,[a.makeTensorInfo(c,i.dtype,[]),a.makeTensorInfo(c,"int32",[])];if(1===d)return[i,le({attrs:{shape:c,dtype:"int32",value:0},backend:a})];for(var m=t.util.sizeFromShape(c)/d,g=he({inputs:{x:i},attrs:{shape:[m,d]},backend:a}),v=ws(o),y=ws(d),x=null,b=function(){return null===x?[g,g]:[g,x]},w=function(e,t,n){var r=b(),i=new ys(n),o=[{type:"int32",data:[d]},{type:"int32",data:[null===x?1:0]},{type:"float32",data:[Number.NEGATIVE_INFINITY]},{type:"int32",data:[e]},{type:"int32",data:[t]}],s=x;x=a.runWebGPUProgram(i,r,"int32",o),bs(a,s)},C=1;C<v;C*=2)for(var k=2*C,S=C;S>=1;S/=2)w(k,S,[m,y]);for(var I=y;I>v;I/=2){var R=b(),P=new xs([m,I/2]),z=[{type:"int32",data:[d]},{type:"int32",data:[null===x?1:0]},{type:"int32",data:[v]}],A=x;x=a.runWebGPUProgram(P,R,"int32",z),bs(a,A);for(k=2*(C=v/2),S=C;S>=1;S/=2)w(k,S,x.shape)}var N=x;x=Rn({inputs:{x:x},backend:a,attrs:{begin:0,size:[m,o]}}),bs(a,N);var D=_r({inputs:{x:g,indices:x},backend:a,attrs:{axis:1,batchDims:1}});bs(a,g);var F=c.slice(0,-1);F.push(o),N=x,x=he({inputs:{x:x},attrs:{shape:F},backend:a}),bs(a,N);var T=D;return D=he({inputs:{x:D},attrs:{shape:F},backend:a}),bs(a,T),[D,x]}},ks=function(){function e(e){this.variableNames=["Image","Transforms"],this.uniforms="interpolationModeId : i32, fillModeId : i32, fillValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=O(this.outputShape),this.dispatch=L(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="transform"}return e.prototype.getUserCode=function(){return"\n          fn mapCoord(outCoord : f32, len : f32) -> f32{\n            var inCoord = outCoord;\n            if(uniforms.fillModeId == 2) {\n              if (inCoord < 0.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz2 = 2.0 * len;\n                  if (inCoord < sz2) {\n                    inCoord = sz2 * f32(i32(f32(-inCoord / sz2))) +\n                    inCoord;\n                  }\n                  if (inCoord < -len) {\n                    inCoord = inCoord + sz2;\n                  } else {\n                    inCoord = -inCoord - 1.0;\n                  }\n                }\n              } else if (inCoord > len - 1.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz2 = 2.0 * len;\n                  inCoord = inCoord - sz2 * f32(i32(f32(inCoord / sz2)));\n                  if (inCoord >= len) {\n                    inCoord = sz2 - inCoord - 1.0;\n                  }\n                }\n              }\n              return clamp(inCoord, 0.0, len - 1.0);\n            } else if (uniforms.fillModeId == 3) {\n              if (inCoord < 0.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz = len - 1.0;\n                  inCoord = inCoord + len * (f32(i32(f32(-inCoord / sz))) + 1.0);\n                }\n              } else if (inCoord > len - 1.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz = len - 1.0;\n                  inCoord = inCoord - len * f32(i32(f32(inCoord / sz)));\n                }\n              }\n              return clamp(inCoord, 0.0, len - 1.0);\n            } else if (uniforms.fillModeId == 4) {\n              return clamp(outCoord, 0.0, len - 1.0);\n            }\n            return outCoord;\n          }\n          fn readWithFillValue(batch : i32, coordY : i32, coordX : i32,\n            channel : i32) -> f32 {\n            var outputValue : f32;\n            if (0 <= coordY && coordY < uniforms.imageShape[1] && 0 <= coordX && coordX < uniforms.imageShape[2]) {\n                outputValue = getImage(batch, coordY, coordX, channel);\n            } else {\n              outputValue = uniforms.fillValue;\n            }\n            return outputValue;\n          }\n\n          ".concat(S("index")," {\n            if (index < uniforms.size) {\n              let coords = getCoordsFromIndex(index);\n              var outputValue : f32;\n              let batch = coords[0];\n              let x = coords[2];\n              let y = coords[1];\n              let channel = coords[3];\n              let xf = f32(x);\n              let yf = f32(y);\n              let a1 = getTransforms(batch, 0);\n              let a2 = getTransforms(batch, 1);\n              let a3 = getTransforms(batch, 2);\n              let b1 = getTransforms(batch, 3);\n              let b2 = getTransforms(batch, 4);\n              let b3 = getTransforms(batch, 5);\n              let c1 = getTransforms(batch, 6);\n              let c2 = getTransforms(batch, 7);\n              let projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = uniforms.fillValue;\n              } else {\n                let inX = (a1 * xf + a2 * yf + a3) / projection;\n                let inY = (b1 * xf + b2 * yf + b3) / projection;\n                let mapX = mapCoord(inX, f32(uniforms.imageShape[2]));\n                let mapY = mapCoord(inY, f32(uniforms.imageShape[1]));\n\n                if (uniforms.interpolationModeId == 1) {\n                  let coordY = i32(round(mapY));\n                  let coordX = i32(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  let yFloor = floor(mapY);\n                  let xFloor = floor(mapX);\n                  let yCeil = yFloor + 1.0;\n                  let xCeil = xFloor + 1.0;\n                  let valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, i32(yFloor), i32(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, i32(yFloor), i32(xCeil), channel);\n                  let valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, i32(yCeil), i32(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, i32(yCeil), i32(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutputAtIndex(index, outputValue);\n            }\n          }\n        ")},e}();var Ss={kernelName:t.Transform,backendName:"webgpu",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,r=e.attrs,i=n.image,o=n.transforms,s=r.interpolation,c=r.fillMode,d=r.fillValue,l=r.outputShape,p=u(i.shape,4),h=p[0],f=p[1],m=p[2],g=p[3],v=u(null!=l?l:[f,m],2),y=v[0],x=v[1],b=new ks([h,y,x,g]),w="nearest"===s?1:2;switch(c){case"constant":default:t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4}var C=[{type:"int32",data:[w]},{type:"int32",data:[t]},{type:"float32",data:[d]}];return a.runWebGPUProgram(b,[i,o],"float32",C)}};var Is={kernelName:t.Unpack,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,r=t.value,i=a.axis;i<0&&(i+=r.shape.length);for(var o=r,s=o.shape.length,u=r.shape[i],c=new Array(s-1),d=0,l=0;l<s;l++)l!==i&&(c[d++]=o.shape[l]);var p=[],h=new Array(s).fill(0),f=o.shape.slice();f[i]=1;var m=new Array(u);for(l=0;l<m.length;l++){h[i]=l;var g=Rn({inputs:{x:o},backend:n,attrs:{begin:h,size:f}}),v=he({inputs:{x:g},backend:n,attrs:{shape:c}});m[l]=v,p.push(g)}return p.forEach((function(e){return n.disposeData(e.dataId)})),m}},Rs=function(){function e(e,t,n){if(this.outputShape=[],this.variableNames=["x","segmentIds"],this.uniforms="numSegments : i32, xSize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=t,this.dispatchLayout=O(e),this.dispatch=L(this.dispatchLayout,e,this.workgroupSize),"float32"!==n&&"int32"!==n)throw new Error("UnsortedSegmentSum only supports float32 and int32\n              types, does not support ".concat(n," type."));this.type=n,this.shaderKey="unsortedSegmentSum"}return e.prototype.getUserCode=function(){return"\n    ".concat(S("index")," {\n      if (index < uniforms.xSize) {\n        let coords = getXCoordsFromIndex(index);\n        let b = coords[0];\n        let inCol = coords[1];\n\n        let segmentId = i32(getSegmentIds(inCol));\n        if (segmentId >= 0) {\n          let flatIndex = b * uniforms.numSegments + segmentId % uniforms.numSegments;\n          let value = getX(b, inCol);\n\n          ").concat(x("&result[flatIndex]","value",this.type),"\n        }\n      }\n    }\n  ")},e}();var Ps,zs,As=[ge,Nt,Ft,_t,Wt,Bt,qt,Yt,Qt,Zt,$t,tn,an,on,un,vn,yn,wn,Cn,kn,zn,Dn,Tn,Bn,Un,Gn,Ce,Kn,Jn,ra,ca,la,ha,fa,ga,ya,ba,Ca,Pa,za,Aa,Da,Ba,Oa,La,Ma,Ga,Ka,qa,ja,er,nr,ar,ir,sr,cr,lr,hr,vr,pe,xr,Ir,wr,kr,zr,Ar,Nr,Fr,Lr,Er,Or,be,Ur,jn,Vr,Hr,Kr,qr,jr,Zr,$r,ai,ti,ii,si,ci,hi,mi,hn,vi,yi,ki,xi,Ci,Si,mn,Ii,Pi,Ai,Di,Wi,Za,Ei,Bi,Oi,Ln,Mi,Hi,Xi,Yi,Qi,Zi,Ji,$i,En,to,ao,io,so,fe,co,po,fo,go,yo,bo,Co,So,Ro,zo,No,Fo,_o,Wo,Bo,Uo,Pn,ss,cs,ds,Li,Vo,Ho,jo,Qo,es,ts,as,rs,os,ps,$a,fs,gs,vs,$o,Cs,Ss,Gt,Is,{kernelName:t.UnsortedSegmentSum,backendName:"webgpu",kernelFunc:function(e){var n=e.inputs,a=e.backend,r=e.attrs,i=n.x,o=n.segmentIds,s=r.numSegments,u=i.shape.length,c=[],d=0,l=t.backend_util.getAxesPermutation([d],u),p=i;null!=l&&(p=Vt({inputs:{x:i},backend:a,attrs:{perm:l}}),c.push(p),d=t.backend_util.getInnerMostAxes(1,u)[0]);var h=t.backend_util.segment_util.computeOutShape(p.shape,d,s),f=t.util.sizeFromShape([p.shape[d]]),m=he({inputs:{x:p},backend:a,attrs:{shape:[-1,f]}});c.push(m);var g=i.dtype,v=[m.shape[0],s],y=le({backend:a,attrs:{shape:v,value:0,dtype:g}}),x=new Rs(m.shape,v,g),b=[{type:"int32",data:[s]},{type:"int32",data:[t.util.sizeFromShape(m.shape)]}],w=a.runWebGPUProgram(x,[m,o],g,b,y),C=he({inputs:{x:w},backend:a,attrs:{shape:h}});c.push(w);var k=C;if(null!=l){c.push(C);var S=t.backend_util.getUndoAxesPermutation(l);k=Vt({inputs:{x:k},backend:a,attrs:{perm:S}})}return c.forEach((function(e){return a.disposeData(e.dataId)})),k}},Gi];try{for(var Ns=s(As),Ds=Ns.next();!Ds.done;Ds=Ns.next()){var Fs=Ds.value;t.registerKernel(Fs)}}catch(e){Ps={error:e}}finally{try{Ds&&!Ds.done&&(zs=Ns.return)&&zs.call(Ns)}finally{if(Ps)throw Ps.error}}e.WebGPUBackend=K,e.webgpu_util=H}));
//# sourceMappingURL=tf-backend-webgpu.min.js.map</script>
<script>/**
 * @license
 * Copyright 2024 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@tensorflow/tfjs-core")):"function"==typeof define&&define.amd?define(["exports","@tensorflow/tfjs-core"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).tf=e.tf||{},e.tf)}(this,(function(e,n){"use strict";function t(e){var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var a=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,a.get?a:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,n}var a=t(n),r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},r(e,n)};function o(e,n,t,a){return new(t||(t=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function c(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}s((a=a.apply(e,n||[])).next())}))}function i(e,n){var t,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e],a=0}finally{t=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function c(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],a=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,r,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(a=o.next()).done;)i.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return i}function u(e,n,t){if(t||2===arguments.length)for(var a,r=0,o=n.length;r<o;r++)!a&&r in n||(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return e.concat(a||Array.prototype.slice.call(n))}var l,d,p,h={},f={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function x(e,n){h[e]=n}function v(e,t){if(!(e in h)||null!=t){var a=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var a=null==t?function(e){if(n.env().getBool("IS_SAFARI")||"undefined"==typeof OffscreenCanvas||2!==e){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;a.addEventListener("webglcontextlost",(function(n){n.preventDefault(),delete h[e]}),!1),n.env().getBool("SOFTWARE_WEBGL_ENABLED")&&(f.failIfMajorPerformanceCaveat=!1);if(1===e)return a.getContext("webgl",f)||a.getContext("experimental-webgl",f);return a.getContext("webgl2",f)}(e,t);if(null===a)return console.log("Could not get context for WebGL version",e),null;h[e]=a}var r=h[e];return null==r||r.isContextLost()?(delete h[e],v(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),h[e])}function g(e,n){return[n,e]}function m(e){var t=n.util.sizeFromShape(e),a=Math.ceil(t/4);return n.util.sizeToSquarishShape(a)}function b(e,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(e/2))]}function C(e,t){var a,r,o,i,c,s,u,l,d,p,h=e;return 2===n.env().getNumber("WEBGL_VERSION")?(a=h.R32F,r=h.R16F,o=h.RGBA16F,i=h.RGBA32F,c=h.RED,u=4,l=1,d=h.HALF_FLOAT,p=h.FLOAT,s=h.RGBA8):(a=e.RGBA,r=e.RGBA,o=e.RGBA,i=h.RGBA,c=e.RGBA,u=4,l=4,d=null!=t?t.HALF_FLOAT_OES:null,p=e.FLOAT,s=e.RGBA),{internalFormatFloat:a,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:c,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:l,textureTypeHalfFloat:d,textureTypeFloat:p}}function y(e,t){var a=t();return n.env().getBool("DEBUG")&&function(e){var n=e.getError();if(n!==e.NO_ERROR)throw new Error("WebGL Error: "+I(e,n))}(e),a}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(l||(l={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(d||(d={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(p||(p={}));function w(e){return!!(n.env().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function I(e,n){switch(n){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(n)}}function S(e,n){return q(e,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function k(e,n){var t=q(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(y(e,(function(){return e.shaderSource(t,n)})),y(e,(function(){return e.compileShader(t)})),!1===e.getShaderParameter(t,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function R(e,t){var a=q(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(y(e,(function(){return e.shaderSource(a,t)})),y(e,(function(){return e.compileShader(a)})),n.env().get("ENGINE_COMPILE_ONLY"))return a;if(!1===e.getShaderParameter(a,e.COMPILE_STATUS))throw A(t,e.getShaderInfoLog(a)),new Error("Failed to compile fragment shader.");return a}var T,N,E=/ERROR: [0-9]+:([0-9]+):/g;function A(e,t){var a=E.exec(t);if(null==a)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+a[1],o=e.split("\n"),i=o.length.toString().length+2,c=o.map((function(e,t){return n.util.rightPad((t+1).toString(),i)+e})),s=0,u=0;u<c.length;u++)s=Math.max(c[u].length,s);var l=c.slice(0,r-1),d=c.slice(r-1,r),p=c.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(n.util.rightPad(d[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(p.join("\n"))}function _(e){return q(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function O(e,t){if(y(e,(function(){return e.linkProgram(t)})),!n.env().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function F(e,n){if(y(e,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function D(e,n){var t=q(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return y(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,t)})),y(e,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),t}function P(e,n){var t=q(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return y(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t)})),y(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),t}function L(e){return q(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function B(e,t){var a=n.env().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>a||t>a){r="[".concat(e,"x").concat(t,"]");var o="[".concat(a,"x").concat(a,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}function V(e){return q(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function W(e,n,t,a,r,o,i){var c=e.getAttribLocation(n,t);return-1!==c&&(y(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,a)})),y(e,(function(){return e.vertexAttribPointer(c,r,e.FLOAT,!1,o,i)})),y(e,(function(){return e.enableVertexAttribArray(c)})),!0)}function U(e,n,t){Y(e,t),y(e,(function(){return e.activeTexture(e.TEXTURE0+t)})),y(e,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function M(e,n,t){return q(e,(function(){return e.getUniformLocation(n,t)}),'uniform "'+t+'" not present in program.')}function G(e,n,t){return e.getUniformLocation(n,t)}function z(e,n,t,a){y(e,(function(){return U(e,n,a)})),y(e,(function(){return e.uniform1i(t,a)}))}function X(e,n,t){y(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),y(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function H(e,n){y(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),y(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function j(e){var n=e.checkFramebufferStatus(e.FRAMEBUFFER);if(n!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+K(e,n))}function K(e,n){switch(n){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(n)}}function q(e,n,t){var a=y(e,(function(){return n()}));if(null==a)throw new Error(t);return a}function Y(e,n){var t=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,a=n+e.TEXTURE0;if(a<e.TEXTURE0||a>t){var r="[gl.TEXTURE0, gl.TEXTURE".concat(t,"]");throw new Error("textureUnit must be in ".concat(r,"."))}}function Q(e,t){return void 0===t&&(t=2),n.util.sizeFromShape(e.slice(0,e.length-t))}function Z(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function J(e){var n=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(n=u([Q(e)],s(Z(e)),!1)),n}function $(e,t){var a;void 0===t&&(t=!1);var r=n.env().getNumber("WEBGL_MAX_TEXTURE_SIZE"),o=n.env().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(o===1/0&&n.env().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(o=r/2),t&&(r*=2,o*=2,1===(e=e.map((function(t,a){return a>=e.length-2?n.util.nearestLargerEven(e[a]):e[a]}))).length&&(e=[2,e[0]])),2!==e.length){var i=n.util.squeezeShape(e);e=i.newShape}var c=n.util.sizeFromShape(e),l=null;e.length<=1&&c<=r?l=[1,c]:2===e.length&&e[0]<=r&&e[1]<=r?l=e:3===e.length&&e[0]*e[1]<=r&&e[2]<=r?l=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=r&&e[1]*e[2]<=r?l=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r?l=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r&&(l=[e[0],e[1]*e[2]*e[3]]);var d=null!=l&&Math.max.apply(Math,u([],s(l),!1))>o&&Math.min.apply(Math,u([],s(l),!1))<=(t?2:1)&&Math.min.apply(Math,u([],s(l),!1))>0;if(null==l||d)if(t){var p=Q(e),h=2,f=2;e.length&&(h=(a=s(Z(e),2))[0],f=a[1]),c=p*(h/2)*(f/2),l=n.util.sizeToSquarishShape(c).map((function(e){return 2*e}))}else l=n.util.sizeToSquarishShape(c);return l}function ee(e){return e%2==0}function ne(e,t){if(e=e.slice(-2),t=t.slice(-2),n.util.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var a=e[e.length-1],r=t[t.length-1];if(a===r)return!0;if(ee(a)&&ee(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&ee(e[0])&&ee(t[0])}function te(e){if(null==T){var n=v(e);T=n.getParameter(n.MAX_TEXTURE_SIZE)}return T}function ae(e){if(null==N){var n=v(e);N=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,N)}function re(e){if(0===e)return 0;var n=v(e);return oe(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:oe(n,"EXT_disjoint_timer_query")?1:0}function oe(e,n){return null!=e.getExtension(n)}function ie(e){try{if(null!=v(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function ce(e){if(0===e)return!1;var n=v(e);if(1===e){if(!oe(n,"OES_texture_float"))return!1}else if(!oe(n,"EXT_color_buffer_float"))return!1;return ue(n)}function se(e){if(0===e)return!1;var n=v(e);if(1!==e){if(oe(n,"EXT_color_buffer_float"))return ue(n);var t="EXT_color_buffer_half_float";if(oe(n,t)){var a=n.getExtension(t);return function(e,n){var t=C(e,n),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);var r=1,o=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatHalfFloat,r,o,0,t.textureFormatFloat,t.textureTypeHalfFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0);var c=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(a),e.deleteFramebuffer(i),c}(n,a)}return!1}return!!oe(n,"OES_texture_float")&&(!!oe(n,"WEBGL_color_buffer_float")&&ue(n))}function ue(e){var n=C(e),t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);e.texImage2D(e.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);var r=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(t),e.deleteFramebuffer(a),r}function le(e){return 2===e&&null!=v(e).fenceSync}function de(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&n.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var pe={__proto__:null,assertNotComplex:de,bindCanvasToFramebuffer:function(e){y(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),y(e,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),y(e,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:X,bindTextureToProgramUniformSampler:z,bindTextureUnit:U,bindVertexBufferToProgramAttribute:W,callAndCheck:y,canBeRepresented:w,createFragmentShader:R,createFramebuffer:V,createProgram:_,createStaticIndexBuffer:P,createStaticVertexBuffer:D,createTexture:L,createVertexShader:k,getBatchDim:Q,getExtensionOrThrow:S,getFramebufferErrorMessage:K,getMaxTexturesInShader:ae,getNumChannels:function(){return 2===n.env().getNumber("WEBGL_VERSION")?1:4},getProgramUniformLocation:G,getProgramUniformLocationOrThrow:M,getRowsCols:Z,getShapeAs3D:J,getTextureShapeFromLogicalShape:$,getWebGLDisjointQueryTimerVersion:re,getWebGLErrorMessage:I,getWebGLMaxTextureSize:te,hasExtension:oe,isCapableOfRenderingToFloatTexture:ce,isDownloadFloatTextureEnabled:se,isReshapeFree:ne,isWebGLFenceEnabled:le,isWebGLVersionEnabled:ie,linkProgram:O,logShaderSourceAndInfoLog:A,resetMaxTextureSize:function(){T=null},resetMaxTexturesInShader:function(){N=null},unbindColorTextureFromFramebuffer:H,unbindTextureUnit:function(e,n){Y(e,n),y(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),y(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},validateFramebuffer:j,validateProgram:F,validateTextureSize:B},he=n.env();function fe(){var e,t,a,r,o,i,c,s,u,l;return 2===n.env().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",a="out",r="in",o="texture",i="outputColor",c="out vec4 outputColor;",s=n.env().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",a="varying",r="varying",o="texture2D",i="gl_FragColor",c="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:a,varyingFs:r,texture2D:o,output:i,defineOutput:c,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function xe(e,t,a){void 0===a&&(a="index");var r=n.util.computeStrides(t);return r.map((function(n,t){var o="int ".concat(e[t]," = ").concat(a," / ").concat(n),i=t===r.length-1?"int ".concat(e[t+1]," = ").concat(a," - ").concat(e[t]," * ").concat(n):"index -= ".concat(e[t]," * ").concat(n);return"".concat(o,"; ").concat(i,";")})).join("")}function ve(e,t,a){void 0===a&&(a="index");var r=n.util.computeStrides(t);return r.map((function(n,t){var o="int ".concat(e[t]," = ").concat(a," / outShapeStrides[").concat(t,"]"),i=t===r.length-1?"int ".concat(e[t+1]," = ").concat(a," - ").concat(e[t]," * outShapeStrides[").concat(t,"]"):"index -= ".concat(e[t]," * outShapeStrides[").concat(t,"]");return"".concat(o,"; ").concat(i,";")})).join("")}function ge(e,n,t){void 0===t&&(t="index");var a=function(e,n){var t=e.length,a=e.map((function(e){return"".concat(n,"[").concat(e,"]")})),r=new Array(t-1);r[t-2]=a[t-1];for(var o=t-3;o>=0;--o)r[o]="(".concat(r[o+1]," * ").concat(a[o+1],")");return r}(e.map((function(e,n){return n})),n);return a.map((function(n,r){var o="int ".concat(e[r]," = ").concat(t," / ").concat(a[r]),i=r===a.length-1?"int ".concat(e[r+1]," = ").concat(t," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(o,"; ").concat(i,";")})).join("")}function me(e){var t=n.util.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}he.registerFlag("HAS_WEBGL",(function(){return he.getNumber("WEBGL_VERSION")>0})),he.registerFlag("WEBGL_VERSION",(function(){return ie(2)?2:ie(1)?1:0})),he.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),he.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===he.get("WEBGL_VERSION")})),he.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),he.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),he.registerFlag("WEBGL_PACK",(function(){return he.getBool("HAS_WEBGL")})),he.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return he.getBool("WEBGL_PACK")})),he.registerFlag("WEBGL_PACK_CLIP",(function(){return he.getBool("WEBGL_PACK")})),he.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return he.getBool("WEBGL_PACK")})),he.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return he.getBool("WEBGL_PACK")})),he.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return he.getBool("WEBGL_PACK")})),he.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return he.getBool("WEBGL_PACK")})),he.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return he.getBool("WEBGL_PACK")})),he.registerFlag("WEBGL_PACK_REDUCE",(function(){return he.getBool("WEBGL_PACK")})),he.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return he.getBool("WEBGL_PACK")})),he.registerFlag("WEBGL_CONV_IM2COL",(function(){return he.getBool("WEBGL_PACK")})),he.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(function(){return he.getBool("WEBGL_PACK")})),he.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return te(he.getNumber("WEBGL_VERSION"))})),he.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return ae(he.getNumber("WEBGL_VERSION"))})),he.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=he.getNumber("WEBGL_VERSION");return 0===e?0:re(e)})),he.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return he.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!n.device_util.isMobile()})),he.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return ce(he.getNumber("WEBGL_VERSION"))})),he.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!he.getBool("WEBGL_FORCE_F16_TEXTURES")&&he.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),he.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return se(he.getNumber("WEBGL_VERSION"))})),he.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return le(he.getNumber("WEBGL_VERSION"))})),he.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return he.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),he.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if("number"!=typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),he.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return n.device_util.isMobile()?1:-1}),(function(e){if("number"!=typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),he.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),he.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),he.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),he.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128})),he.registerFlag("WEBGL_EXP_CONV",(function(){return!1})),he.registerFlag("SOFTWARE_WEBGL_ENABLED",(function(){return he.getBool("IS_TEST")})),he.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(function(){return 1/0})),he.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(function(){return!1})),he.registerFlag("WEBGL2_ISNAN_CUSTOM",(function(){return!1})),he.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));var be="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",Ce=n.backend_util.getBroadcastDims;function ye(e,t,a){var r=[];if(e.forEach((function(e){var t=n.util.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),a.enableShapeUniforms){switch(_e(a.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),a.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}a.customUniforms&&a.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var o,i,c=r.join("\n"),s=e.map((function(e){return function(e,t,a,r){void 0===a&&(a=!1);var o="";o+=a?Ie(e,r):we(e,r);var i=e.shapeInfo.logicalShape,c=t.logicalShape;i.length<=c.length&&(o+=a?function(e,t){var a,r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),i="get"+o+"AtOutCoords",c=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=Ce(e.shapeInfo.logicalShape,t.logicalShape),l=Ae(s),d=s-c,p=["x","y","z","w","u","v"];a=0===c?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(p[e+d]," = 0;")})).join("\n");var h="";h=s<2&&c>0?"coords":e.shapeInfo.logicalShape.map((function(e,n){return"coords.".concat(p[n+d])})).join(", ");var f="return outputValue;",x=1===n.util.sizeFromShape(e.shapeInfo.logicalShape),v=1===n.util.sizeFromShape(t.logicalShape);if(1!==c||x||v){if(x&&!v)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=c-2,m=c-1;u.indexOf(g)>-1&&u.indexOf(m)>-1?f="return vec4(outputValue.x);":u.indexOf(g)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(m)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(a,"\n      vec4 outputValue = get").concat(o,"(").concat(h,");\n      ").concat(f,"\n    }\n  ")}(e,t):function(e,t){var a=e.name,r=a.charAt(0).toUpperCase()+a.slice(1),o="get"+r+"AtOutCoords",i=t.texShape,c=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&n.util.arraysEqual(c,i))return"\n      float ".concat(o,"() {\n        return sampleTexture(").concat(a,", resultUV);\n      }\n    ");var l,d=Ae(u),p=Ce(e.shapeInfo.logicalShape,t.logicalShape),h=u-s,f=["x","y","z","w","u","v"];l=0===s?"":u<2&&p.length>=1?"coords = 0;":p.map((function(e){return"coords.".concat(f[e+h]," = 0;")})).join("\n");var x="";x=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,n){return"coords.".concat(f[n+h])})).join(", ");return"\n    float ".concat(o,"() {\n      ").concat(d," coords = getOutputCoords();\n      ").concat(l,"\n      return get").concat(r,"(").concat(x,");\n    }\n  ")}(e,t));return o}(e,t,a.packedInputs,a.enableShapeUniforms)})).join("\n"),u=t.texShape,l=fe(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(l),p=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(Se,"\n    ").concat(ke,"\n    ").concat(Re,"\n  ")}(l);return t.isPacked?(o=function(e,t,a){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,n,t){var a=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];if(1===a[0])return t?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(a[1],".0);\n      }\n    ");if(1===a[1])return t?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(a[0],".0);\n      }\n    ");if(t)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      return 2 * (resTexRC.x * ").concat(a[1]," + resTexRC.y);\n    }\n  ")}(0,t,a);case 2:return function(e,t,a){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(n.util.arraysEqual(e,t))return a?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var o=Math.ceil(e[1]/2);if(a)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(o,");\n      int c = imod(index, ").concat(o,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,a);case 3:return function(e,n,t){if(t)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var a=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],r=Math.ceil(e[2]/2),o=r*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,a);default:return function(e,n,t){if(t)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var a=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],r=Math.ceil(e[e.length-1]/2),o=r*Math.ceil(e[e.length-2]/2),i=o,c="",s="b, r, c",u=2;u<e.length-1;u++)i*=e[e.length-u-1],c="\n      int b".concat(u," = index / ").concat(i,";\n      index -= b").concat(u," * ").concat(i,";\n    ")+c,s="b".concat(u,", ")+s;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(a[0],", ").concat(a[1],"));\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n\n      ").concat(c,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(e.length,"(").concat(s,");\n    }\n  ")}(e,t,a)}}(t.logicalShape,u,a.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(l)):(o=function(e,t,a){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,n,t){if(1===n[0])return t?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(n[1],".0);\n      }\n    ");if(1===n[1])return t?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(n[0],".0);\n      }\n    ");if(t)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      return resTexRC.x * ").concat(n[1]," + resTexRC.y;\n    }\n  ")}(0,t,a);case 2:return function(e,t,a){if(n.util.arraysEqual(e,t))return a?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return a?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return a?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(a)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,a);case 3:return function(e,n,t){if(t){var a=ve(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(a,"\n    return ivec3(r, c, d);\n  }\n")}var r=xe(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,a);case 4:return function(e,n,t){if(t){var a=ve(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var r=xe(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,a);case 5:return r=t,o=xe(["r","c","d","d2","d3"],e),"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(r[0],",\n                             ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(o,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ");case 6:return function(e,n){var t=xe(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      ").concat(t,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}var r,o}(t.logicalShape,u,a.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(l)),a.packedInputs&&(p+=Te),[p,d,i,c,o,s,a.userCode].join("\n")}function we(e,t){void 0===t&&(t=!1);var a=e.shapeInfo.logicalShape;switch(a.length){case 0:return function(e,n){var t=e.name,a="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(a,"() {return ").concat(t,";}");var r=s(e.shapeInfo.texShape,2),o=r[0],i=r[1];if(1===o&&1===i)return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var c=Ne(t);if(n)return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(t,"TexShape[0], ").concat(t,"TexShape[1], ").concat(c,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ");var u=s(e.shapeInfo.texShape,2),l=u[0],d=u[1];return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(l,", ").concat(d,", ").concat(c,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(e,t);case 1:return function(e,n){var t=e.name,a="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int index) {\n        ").concat(Ee(e),"\n      }\n    ");var r=e.shapeInfo.texShape,o=r[0],i=r[1];if(1===i&&1===o)return"\n      float ".concat(a,"(int index) {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var c=Ne(t);if(1===i)return n?"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(c,") + 0.5) / float(").concat(t,"TexShape[0]));\n        return sampleTexture(").concat(t,", uv);\n      }\n    "):"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(c,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(t,", uv);\n      }\n    ");if(1===o)return n?"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(c,") + 0.5) / float(").concat(t,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(t,", uv);\n      }\n    "):"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(c,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(t,", uv);\n      }\n    ");if(n)return"\n    float ".concat(a,"(int index) {\n      vec2 uv = uvFromFlat(").concat(t,"TexShape[0], ").concat(t,"TexShape[1], index + ").concat(c,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", index + ").concat(c,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var a=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&n.util.arraysEqual(a,i)){if(t)return"\n      float ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var c=i[0],s=i[1];return"\n    float ".concat(o,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(c,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=n.util.squeezeShape(a),l=u.newShape,d=u.keptDims,p=l;if(p.length<a.length){var h=Oe(e,p),f=["row","col"];return"\n      ".concat(we(h,t),"\n      float ").concat(o,"(int row, int col) {\n        return ").concat(o,"(").concat(Fe(f,d),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(a[1],", 1)));\n        ").concat(Ee(e),"\n      }\n    ");var x=i[0],v=i[1],g=Ne(r);if(1===v)return t?"\n      float ".concat(o,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(g,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(g,"), vec3(").concat(a[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(x,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===x)return t?"\n      float ".concat(o,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(g,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(g,"), vec3(").concat(a[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(v,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(o,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(o,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(a[1]," + col + ").concat(g,";\n    vec2 uv = uvFromFlat(").concat(x,", ").concat(v,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){var a=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=a[1]*a[2],c=a[2],s=n.util.squeezeShape(a),u=s.newShape,l=s.keptDims,d=u;if(d.length<a.length){var p=Oe(e,d),h=["row","col","depth"];return"\n        ".concat(we(p,t),"\n        float ").concat(o,"(int row, int col, int depth) {\n          return ").concat(o,"(").concat(Fe(h,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(c,", 1)));\n        ").concat(Ee(e),"\n      }\n    ");var f=e.shapeInfo.texShape,x=f[0],v=f[1],g=e.shapeInfo.flatOffset;if(v===i&&null==g)return t?"\n      float ".concat(o,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(o,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(c,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(v,".0, ").concat(x,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(v===c&&null==g)return t?"\n      float ".concat(o,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(a[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(v,".0, ").concat(x,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var m=Ne(r);if(t)return"\n    float ".concat(o,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(o,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(c," + depth + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(x,", ").concat(v,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){var a=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=a[3],c=a[2]*i,s=a[1]*c,u=n.util.squeezeShape(a),l=u.newShape,d=u.keptDims;if(l.length<a.length){var p=Oe(e,l),h=["row","col","depth","depth2"];return"\n      ".concat(we(p,t),"\n      float ").concat(o,"(int row, int col, int depth, int depth2) {\n        return ").concat(o,"(").concat(Fe(h,d),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(c,", ").concat(i,", 1)));\n        ").concat(Ee(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,x=e.shapeInfo.texShape,v=x[0],g=x[1],m="int stride2 = ".concat(r,"Shape[3];"),b="int stride1 = ".concat(r,"Shape[2] * stride2;"),C="int stride0 = ".concat(r,"Shape[1] * stride1;");if(g===s&&null==f)return t?"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        ").concat(m,"\n        ").concat(b,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(c,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(g===i&&null==f)return t?"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(a[1]*a[2],", ").concat(a[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var y=Ne(r);if(t)return"\n    float ".concat(o,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(m,"\n      ").concat(b,"\n      ").concat(C,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(o,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(c," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(g,", index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){var t=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=t[4],i=t[3]*o,c=t[2]*i,s=t[1]*c,u=n.util.squeezeShape(t),l=u.newShape,d=u.keptDims;if(l.length<t.length){var p=Oe(e,l),h=["row","col","depth","depth2","depth3"];return"\n      ".concat(we(p),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(Fe(h,d),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(c,", ").concat(i,", ").concat(o,")) +\n          depth3;\n        ").concat(Ee(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,x=e.shapeInfo.texShape,v=x[0],g=x[1];if(g===s&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(c,", ").concat(i,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");if(g===o&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");var m=Ne(a);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(c," + depth * ").concat(i," +\n          depth2 * ").concat(o," + depth3 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(g,", index);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n.util.squeezeShape(t),i=o.newShape,c=o.keptDims;if(i.length<t.length){var s=Oe(e,i),u=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(we(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(Fe(u,c),");\n      }\n    ")}var l=t[5],d=t[4]*l,p=t[3]*d,h=t[2]*p,f=t[1]*h;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(f,", ").concat(h,", ").concat(p,", ").concat(d,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(l,", 1)));\n        ").concat(Ee(e),"\n      }\n    ");var x=e.shapeInfo.flatOffset,v=e.shapeInfo.texShape,g=v[0],m=v[1];if(m===f&&null==x)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(h,", ").concat(p,", ").concat(d,", ").concat(l,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(g,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");if(m===l&&null==x)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(g,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");var b=Ne(a);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(f," + col * ").concat(h," + depth * ").concat(p," +\n          depth2 * ").concat(d," + depth3 * ").concat(l," + depth4 + ").concat(b,";\n      vec2 uv = uvFromFlat(").concat(g,", ").concat(m,", index);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(a.length,"-D input sampling")+" is not yet supported")}}function Ie(e,t){var a,r,o;switch(e.shapeInfo.logicalShape.length){case 0:return a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=fe(),"\n    vec4 ".concat(r,"() {\n      return ").concat(o.texture2D,"(").concat(a,", halfCR);\n    }\n  ");case 1:return function(e,n){var t=e.name,a="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,o=fe();if(n)return"\n    vec4 ".concat(a,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(t,"TexShape[0]) / 2.0), ceil(float(").concat(t,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(t,", uv);\n    }\n  ");var i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return"\n    vec4 ".concat(a,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(o.texture2D,"(").concat(t,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var a=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,c=i[0],s=i[1],u=fe();if(null!=i&&n.util.arraysEqual(a,i))return t?"\n      vec4 ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(c,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(o,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],d=Math.ceil(a[1]/2);return"\n    vec4 ".concat(o,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(d,", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,n){var t=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===t[0]){var c=[1,2],s=Oe(e,t.slice(1)),u=["b","row","col"];return"\n        ".concat(Ie(s,n),"\n        vec4 ").concat(r,"(int b, int row, int col) {\n          return ").concat(r,"(").concat(Fe(u,c),");\n        }\n      ")}var l=fe();if(n)return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(a,"TexShape[0]) / 2.0), ceil(float(").concat(a,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(a,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(a,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(a,", uv);\n    }\n  ");var d=i[0],p=i[1],h=Math.ceil(t[2]/2),f=h*Math.ceil(t[1]/2);return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(d,", ").concat(p,", ").concat(f,", ").concat(h,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(a,", uv);\n    }\n  ")}(e,t);default:return function(e,n){var t=e.name,a="get"+t.charAt(0).toUpperCase()+t.slice(1),r=fe();if(n)return"\n    vec4 ".concat(a,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(t,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(t,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(t,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(t,"TexShape[0]) / 2.0), ceil(float(").concat(t,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(r.texture2D,"(").concat(t,", uv);\n    }\n  ");for(var o=e.shapeInfo.logicalShape,i=o.length,c=e.shapeInfo.texShape,s=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],u=s[0],l=s[1],d=Math.ceil(o[i-1]/2),p=d*Math.ceil(o[i-2]/2),h="int b, int row, int col",f="b * ".concat(p," + (row / 2) * ").concat(d," + (col / 2)"),x=2;x<i-1;x++)h="int b".concat(x,", ")+h,p*=o[i-x-1],f="b".concat(x," * ").concat(p," + ")+f;return"\n    vec4 ".concat(a,"(").concat(h,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(u,");\n      return ").concat(r.texture2D,"(").concat(t,", uv);\n    }\n  ")}(e,t)}}var Se="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ke="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Re="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Te="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Ne(e){return"offset".concat(e)}function Ee(e){var t=e.name,a=n.util.sizeFromShape(e.shapeInfo.logicalShape);return a<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(a,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function Ae(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function _e(e,t,a){var r=n.util.squeezeShape(t),o=r.newShape,i=r.keptDims,c=t.length,s=e&&3===c&&1===t[0],u=s?t.slice(1):o,l=!e&&c>1&&!n.util.arraysEqual(t,a)&&o.length<c||s;return{useSqueezeShape:l,uniformShape:l?u:t,keptDims:i}}function Oe(e,n){var t=JSON.parse(JSON.stringify(e));return t.shapeInfo.logicalShape=n,t}function Fe(e,n){return n.map((function(n){return e[n]})).join(", ")}function De(e,t,a){var r,o,i,s,u,l,d,p,h=[],f=[],x=null;p=e.getUniformLocation(a,"NAN",!1),1===n.env().getNumber("WEBGL_VERSION")&&(x=e.getUniformLocation(a,"INFINITY",!1));var v=!1;try{for(var g=c(t.variableNames),m=g.next();!m.done;m=g.next()){var b=m.value,C={name:b,uniform:e.getUniformLocation(a,b,v),offset:e.getUniformLocation(a,"offset".concat(b),v)};t.enableShapeUniforms&&(C.shape=e.getUniformLocation(a,"".concat(b,"Shape"),v),C.texShape=e.getUniformLocation(a,"".concat(b,"TexShape"),v)),h.push(C)}}catch(e){r={error:e}}finally{try{m&&!m.done&&(o=g.return)&&o.call(g)}finally{if(r)throw r.error}}if(t.enableShapeUniforms&&(u=e.getUniformLocation(a,"outShape",v),d=e.getUniformLocation(a,"outShapeStrides",v),l=e.getUniformLocation(a,"outTexShape",v)),t.customUniforms)try{for(var y=c(t.customUniforms),w=y.next();!w.done;w=y.next()){var I=w.value;f.push(e.getUniformLocation(a,I.name,v))}}catch(e){i={error:e}}finally{try{w&&!w.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}return{variablesLocations:h,customUniformLocations:f,infLoc:x,nanLoc:p,outShapeLocation:u,outShapeStridesLocation:d,outTexShapeLocation:l}}function Pe(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,a){var r=e.logicalShape,o=t[a],i=o.shape;if(!n.util.arraysEqual(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!o.isUniform){var c=e.texShape,s=o.isUniform?null:o.texData.texShape;if(!n.util.arraysEqual(c,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(c," and ").concat(s," must match"))}}))}function Le(e){return n.env().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var Be=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=l.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=fe();this.outputShape=e,this.enableShapeUniforms=Le(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?ve(["r","c","d"],e):xe(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},Ve=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=l.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=fe();this.outputShape=e,this.enableShapeUniforms=Le(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?ve(["r","c","d"],e):xe(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},We=function(e){this.variableNames=["A"],this.outTexUsage=d.DOWNLOAD;var n=fe();this.outputShape=e,this.userCode="\n      ".concat(be,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},Ue=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=d.DOWNLOAD;var n=fe();this.outputShape=e,this.userCode="\n      ".concat(be,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},Me={R:0,G:1,B:2,A:3},Ge=function(e,n,t){void 0===n&&(n=!1),void 0===t&&(t="RGBA"),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var a=fe();this.outputShape=e,this.enableShapeUniforms=Le(this.outputShape.length);var r="result";n&&(r="floor(result * 255. + 0.5)");for(var o="",i=0;i<t.length;i++){var c=t[i];o+="\n          if(offset == ".concat(i,") {\n            result = values[").concat(Me[c],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":me(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(t.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(t.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(a.texture2D,"(A, uv);\n          ").concat(o,"\n        }\n        ").concat(a.output," = vec4(").concat(r,", 0., 0., 0.);\n      }\n    ")},ze=function(e,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var t=fe();this.outputShape=e,this.enableShapeUniforms=Le(this.outputShape.length);var a="",r="result";n&&(r="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var i=0;i<=1;i++){var c=2*o+i;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(i," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(i,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(t.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(c,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(c,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(c,"] = values[2];\n            } else {\n              result[").concat(c,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":me(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(t.output," = ").concat(r,";\n        }\n    ")};function Xe(e){var n=fe();return k(e,"".concat(n.version,"\n    precision highp float;\n    ").concat(n.attribute," vec3 clipSpacePos;\n    ").concat(n.attribute," vec2 uv;\n    ").concat(n.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function He(e){return D(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function je(e){return P(e,new Uint16Array([0,1,2,2,1,3]))}function Ke(e,t,a,r,o,i){B(t,a);var c=L(e),s=e.TEXTURE_2D;return y(e,(function(){return e.bindTexture(s,c)})),y(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),y(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),y(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),y(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===n.env().getNumber("WEBGL_VERSION")?y(e,(function(){return e.texImage2D(s,0,r,t,a,0,o,i,null)})):y(e,(function(){return e.texStorage2D(s,1,r,t,a)})),y(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:c,texShape:[a,t]}}function qe(e){return e.internalFormatFloat}function Ye(e,n,t,a){var r=s(g(n,t),2);return Ke(e,r[0],r[1],qe(a),a.textureFormatFloat,e.FLOAT)}function Qe(e){return e.internalFormatHalfFloat}function Ze(e,n,t,a){var r=s(g(n,t),2);return Ke(e,r[0],r[1],Qe(a),a.textureFormatFloat,a.textureTypeHalfFloat)}function Je(e){return e.downloadTextureFormat}function $e(e,n,t,a){var r=s(g(n,t),2);return Ke(e,r[0],r[1],Je(a),e.RGBA,e.UNSIGNED_BYTE)}function en(e){return e.internalFormatPackedFloat}function nn(e,n,t,a){var r=s(b(n,t),2);return Ke(e,r[0],r[1],en(a),e.RGBA,e.FLOAT)}function tn(e){return e.internalFormatPackedHalfFloat}function an(e,n,t,a){var r=s(b(n,t),2);return Ke(e,r[0],r[1],tn(a),e.RGBA,a.textureTypeHalfFloat)}function rn(e,n,t){return y(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,t)})),W(e,n,"clipSpacePos",t,3,20,0)&&W(e,n,"uv",t,2,20,12)}function on(e,t,a,r,o,i){var c,s,u;y(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),o instanceof Uint8Array?(c=new Uint8Array(a*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(c=new Float32Array(a*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),c.set(o),2===n.env().getNumber("WEBGL_VERSION")?y(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,a,r,e.RGBA,s,c)})):y(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,a,r,0,e.RGBA,s,c)})),y(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function cn(e,t,a){y(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a.data instanceof Uint8Array?2===n.env().getNumber("WEBGL_VERSION")?y(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,a.width,a.height,e.RGBA,e.UNSIGNED_BYTE,a.data)})):y(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a.width,a.height,0,e.RGBA,e.UNSIGNED_BYTE,a.data)})):2===n.env().getNumber("WEBGL_VERSION")?y(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,a)})):y(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a)})),y(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function sn(e,n,t,a){var r=e.createBuffer();y(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,r)}));var o=16*n*t;return y(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),y(e,(function(){return e.readPixels(0,0,t,n,e.RGBA,e.FLOAT,0)})),y(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),r}function un(e,n,t){var a=e,r=new Float32Array(t);return a.bindBuffer(a.PIXEL_PACK_BUFFER,n),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,r),a.bindBuffer(a.PIXEL_PACK_BUFFER,null),r}function ln(e,n,t,a){var r=s(g(n,t),2),o=r[0],i=r[1],c=new Uint8Array(n*t*4);return y(e,(function(){return e.readPixels(0,0,o,i,a.downloadTextureFormat,e.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}function dn(e,n,t,a,r,o,i,c){var u=e,l=new Float32Array(function(e,n){var t=s(b(e,n),2);return t[0]*t[1]*4}(o,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,n),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function pn(e,n,t){var a=new Float32Array(n*t*4);return y(e,(function(){return e.readPixels(0,0,t,n,e.RGBA,e.FLOAT,a)})),a}var hn={__proto__:null,bindVertexProgramAttributeStreams:rn,createBufferFromOutputTexture:sn,createFloat16MatrixTexture:Ze,createFloat16PackedMatrixTexture:an,createFloat32MatrixTexture:Ye,createIndexBuffer:je,createPackedMatrixTexture:nn,createUnsignedBytesMatrixTexture:$e,createVertexBuffer:He,createVertexShader:Xe,downloadByteEncodedFloatMatrixFromOutputTexture:ln,downloadFloat32MatrixFromBuffer:un,downloadMatrixFromPackedOutputTexture:pn,downloadPackedMatrixFromBuffer:dn,getInternalFormatForFloat16MatrixTexture:Qe,getInternalFormatForFloat16PackedMatrixTexture:tn,getInternalFormatForFloat32MatrixTexture:qe,getInternalFormatForPackedMatrixTexture:en,getInternalFormatForUnsignedBytesMatrixTexture:Je,uploadDenseMatrixToTexture:on,uploadPixelDataToTexture:cn},fn=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];var t=n.env().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,x(t,e)):this.gl=v(t),e=this.gl,2===n.env().getNumber("WEBGL_VERSION")){var a=e;this.createVertexArray=function(){return y(a,(function(){return a.createVertexArray()}))},this.bindVertexArray=function(e){return y(a,(function(){return a.bindVertexArray(e)}))},this.deleteVertexArray=function(e){return y(a,(function(){return a.deleteVertexArray(e)}))},this.getVertexArray=function(){return y(a,(function(){return a.getParameter(a.VERTEX_ARRAY_BINDING)}))}}else if(null!=e){var r=e.getExtension("OES_vertex_array_object");if(null==r)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=function(){return y(e,(function(){return r.createVertexArrayOES()}))},this.bindVertexArray=function(n){return y(e,(function(){return r.bindVertexArrayOES(n)}))},this.deleteVertexArray=function(n){return y(e,(function(){return r.deleteVertexArrayOES(n)}))},this.getVertexArray=function(){return y(e,(function(){return e.getParameter(r.VERTEX_ARRAY_BINDING_OES)}))}}var o="WEBGL_color_buffer_float",i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===n.env().getNumber("WEBGL_VERSION")){var c="OES_texture_half_float";if(this.textureFloatExtension=S(this.gl,"OES_texture_float"),oe(this.gl,c))this.textureHalfFloatExtension=S(this.gl,c);else if(n.env().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(o),oe(this.gl,i))this.colorBufferHalfFloatExtension=S(this.gl,i);else if(n.env().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(o="EXT_color_buffer_float",oe(this.gl,o))this.colorBufferFloatExtension=this.gl.getExtension(o);else{if(!oe(this.gl,i))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(i)}this.vertexBuffer=He(this.gl),this.indexBuffer=je(this.gl),this.framebuffer=V(this.gl),this.textureConfig=C(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return n.env().getBool("DEBUG")},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;y(n,(function(){return n.finish()})),y(n,(function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)})),y(n,(function(){return n.deleteFramebuffer(e.framebuffer)})),y(n,(function(){return n.bindBuffer(n.ARRAY_BUFFER,null)})),y(n,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)})),y(n,(function(){return n.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),Ye(this.gl,e,n,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),Ze(this.gl,e,n,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),$e(this.gl,e,n,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),cn(this.gl,e,n)},e.prototype.uploadDenseMatrixToTexture=function(e,n,t,a){this.throwIfDisposed(),on(this.gl,e,n,t,a,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),an(this.gl,e,n,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),nn(this.gl,e,n,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(H(this.gl,this.framebuffer),this.outputTexture=null),y(this.gl,(function(){return n.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,t){var a=this;return this.downloadMatrixDriver(e,(function(){return ln(a.gl,n,t,a.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,n,t,a,r,o){return dn(this.gl,e,0,0,0,r,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,n){return un(this.gl,e,n)},e.prototype.createBufferFromTexture=function(e,n,t){this.bindTextureToFrameBuffer(e);var a=sn(this.gl,n,t,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,a,r=this;if(n.env().getBool("WEBGL_FENCE_API_ENABLED")){var o=e,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),a=function(){var e=o.clientWaitSync(i,0,0);return e===o.ALREADY_SIGNALED||e===o.CONDITION_SATISFIED},t=i}else n.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),a=function(){return r.isQueryAvailable(t,n.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):a=function(){return!0};return{query:t,isFencePassed:a}},e.prototype.downloadMatrixFromPackedTexture=function(e,n,t){var a=this;return this.downloadMatrixDriver(e,(function(){return pn(a.gl,n,t)}))},e.prototype.createProgram=function(e){var n=this;this.throwIfDisposed();var t=this.gl;null==this.vertexShader&&(this.vertexShader=Xe(t));var a=_(t);y(t,(function(){return t.attachShader(a,n.vertexShader)})),y(t,(function(){return t.attachShader(a,e)})),O(t,a);var r=Object.assign(a,{vao:this.createVertexArray()});return this.debug&&F(t,r),r},e.prototype.buildVao=function(e){var n=this;this.setProgram(e),this.bindVertexArray(e.vao);var t=this.gl;y(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.indexBuffer)})),rn(t,e,this.vertexBuffer)},e.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(y(this.gl,(function(){return n.gl.deleteProgram(e)})),this.deleteVertexArray(e.vao))},e.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&F(this.gl,this.program),y(this.gl,(function(){return n.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,n,t){return void 0===t&&(t=!0),this.throwIfDisposed(),t?M(this.gl,e,n):G(this.gl,e,n)},e.prototype.getAttributeLocation=function(e,n){var t=this;return this.throwIfDisposed(),y(this.gl,(function(){return t.gl.getAttribLocation(e,n)}))},e.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},e.prototype.setInputMatrixTexture=function(e,n,t){this.throwIfDisposed(),this.throwIfNoProgram(),z(this.gl,e,n,t)},e.prototype.setOutputMatrixTexture=function(e,n,t){this.setOutputMatrixTextureDriver(e,t,n)},e.prototype.setOutputPackedMatrixTexture=function(e,n,t){this.throwIfDisposed();var a=s(b(n,t),2),r=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,r,o)},e.prototype.setOutputMatrixWriteRegion=function(e,n,t,a){this.setOutputMatrixWriteRegionDriver(t,e,a,n)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,n,t,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&F(this.gl,this.program),j(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;if(this.debug){var n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}y(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),y(this.gl,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=S(this.gl,2===n.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===n.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),a=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,a),a}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},e.prototype.endQuery=function(){if(2!==n.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,a=this.getQueryTimerExtensionWebGL2();t.endQuery(a.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return o(this,void 0,void 0,(function(){var t=this;return i(this,(function(a){switch(a.label){case 0:return[4,n.util.repeatedTry((function(){return t.disposed||t.isQueryAvailable(e,n.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return a.sent(),[2,this.getQueryTime(e,n.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,n){if(0===n)return null;if(2===n){var t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(e,a.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,n){if(0===n)return!0;if(2===n){var t=this.gl,a=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),r&&!this.disjoint}r=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,a.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),r&&!this.disjoint},e.prototype.pollFence=function(e){var n=this;return new Promise((function(t){n.addItemToPoll((function(){return e.isFencePassed()}),(function(){return t()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var n=0;n<e.length;++n){if(!e[n]())break}return n-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),n=0;n<=e;++n){(0,this.itemsToPoll[n].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var a=this;if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)){var r=void 0;"setTimeoutCustom"in n.env().platform&&(r=n.env().platform.setTimeoutCustom.bind(n.env().platform)),n.util.repeatedTry((function(){return a.pollItems(),0===a.itemsToPoll.length}),(function(){return 0}),null,r)}},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),X(this.gl,e,this.framebuffer),this.debug&&j(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(X(this.gl,this.outputTexture,this.framebuffer),this.debug&&j(this.gl)):H(this.gl,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var t=n();return this.unbindTextureToFrameBuffer(),t},e.prototype.setOutputMatrixTextureDriver=function(e,n,t){this.throwIfDisposed();var a=this.gl;X(a,e,this.framebuffer),this.debug&&j(a),this.outputTexture=e,y(a,(function(){return a.viewport(0,0,n,t)})),y(a,(function(){return a.scissor(0,0,n,t)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,n,t,a){var r=this;this.throwIfDisposed(),y(this.gl,(function(){return r.gl.scissor(e,n,t,a)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function xn(e){return function(t,a,r,o,i){var c=n.backend_util.assertAndGetBroadcastShape(t,a),s=c.length,u=n.util.computeStrides(c),l=n.util.sizeFromShape(c),d=n.util.getTypedArrayFromDType(i,l),p=t.length,h=a.length,f=n.util.computeStrides(t),x=n.util.computeStrides(a),v=n.backend_util.getBroadcastDims(t,c),g=n.backend_util.getBroadcastDims(a,c);if(v.length+g.length===0)for(var m=0;m<d.length;++m)d[m]=e(r[m%r.length],o[m%o.length]);else{var b=function(t){var a=n.util.indexToLoc(t,s,u),i=a.slice(-p);v.forEach((function(e){return i[e]=0}));var c=n.util.locToIndex(i,p,f),l=a.slice(-h);g.forEach((function(e){return l[e]=0}));var m=n.util.locToIndex(l,h,x);d[t]=e(r[c],o[m])};for(m=0;m<d.length;++m)b(m)}return[d,c]}}var vn=xn((function(e,n){return e+n}));var gn=xn((function(e,n){return e&n}));function mn(e){return function(t,a,r){for(var o=n.util.getArrayFromDType(a,t.length),i=0;i<t.length;++i)o[i]=e(t[i],r);return o}}var bn=mn((function(e){return Math.ceil(e)}));var Cn=xn((function(e,n){return e===n?1:0})),yn=mn((function(e){return Math.exp(e)})),wn=mn((function(e){return Math.expm1(e)})),In=mn((function(e){return Math.floor(e)}));var Sn=xn((function(e,n){return e>n?1:0})),kn=xn((function(e,n){return e>=n?1:0})),Rn=xn((function(e,n){return e<n?1:0})),Tn=xn((function(e,n){return e<=n?1:0}));var Nn=mn((function(e){return Math.log(e)}));var En=xn((function(e,n){return Math.max(e,n)})),An=xn((function(e,n){return Math.min(e,n)})),_n=xn((function(e,n){return e*n}));var On=xn((function(e,n){return e!==n?1:0}));function Fn(e,n,t,a){var r=[],o=0,i=n.length-1+t.length,c=new Array(i).fill(null).map((function(){return[0]}));!function(e,n){for(var t=0;t<e.length;++t){var a=e[t],r=t===e.length-1?n:e[t+1].length;if(0===a.length)throw new Error("Ragged splits may not be empty");if(a[0]<0)throw new Error("Ragged splits must be non-negative");if(a[a.length-1]>r)throw new Error("Ragged splits must not point past values");for(var o=1;o<a.length;++o)if(a[o-1]>a[o])throw new Error("Ragged splits must be sorted in ascending order")}}(t,a);for(var s=1,u=0;u<n.length-1;++u){s*=n[u];for(var l=n[u+1],d=1;d<s+1;++d)c[u].push(d*l)}for(d=0;d<e.length;++d){var p=e[d],h=e[d]+1;for(u=0;u<t.length;++u){var f=t[u],x=u+n.length-1;if(x>=0)for(var v=c[x],g=v[v.length-1]-f[p],m=p;m<h;++m)c[x].push(f[m+1]+g);p=f[p],h=f[h]}h!==p&&(r.push([p,h]),o+=h-p)}return{outSplits:c,valueSlices:r,numValues:o}}function Dn(e,n){for(var t=e.slice(0,n);t.length<n;)t.push(1);for(var a=n;a<e.length;a++)t[n-1]*=e[a];return t}function Pn(e,t,a,r,o){var i=t.slice();i[0]=o;var s=n.util.getArrayFromDType(a,n.util.sizeFromShape(i)),u=e.length;return function(e,n,t,a,r,o){var i,s,u=Dn(n,2)[1],l=Dn(o,2)[1],d=0;try{for(var p=c(t),h=p.next();!h.done;h=p.next())for(var f=h.value,x=f[0];x<f[1];++x){for(var v=0;v<a;++v)r[d*l+v]=e[x*u+v];++d}}catch(e){i={error:e}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}}(e,t,r,0===u?0:u/t[0],s,i),[s,i]}var Ln=2147483647;var Bn=n.backend_util.RowPartitionType,Vn=function(){function e(e,t,a,r,o,i,c,s,u,l){this.shape=e,this.shapeShape=t,this.values=a,this.valuesShape=r,this.valuesDType=o,this.defaultValue=i,this.defaultValueShape=c,this.rowPartitionValues=s,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=n.backend_util.getRowPartitionTypesHelper(l),this.raggedRank=n.backend_util.getRaggedRank(this.rowPartitionTypes)}return e.prototype.getRowPartitionTypeByDimension=function(e){return this.rowPartitionTypes[0]===Bn.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]},e.prototype.getRowPartitionTensor=function(e){return this.rowPartitionTypes[0]===Bn.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]},e.prototype.getMaxWidth=function(n){var t=this.getRowPartitionTensor(n-1);switch(this.getRowPartitionTypeByDimension(n-1)){case Bn.VALUE_ROWIDS:return e.getMaxWidthValueRowID(t);case Bn.ROW_SPLITS:return e.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(Bn[this.getRowPartitionTypeByDimension(n-1)]))}},e.getMaxWidthRowSplit=function(e){var n=e.length;if(0===n||1===n)return 0;for(var t=0,a=0;a<n-1;++a){var r=e[a+1]-e[a];r>t&&(t=r)}return t},e.getMaxWidthValueRowID=function(e){var n=e.length;if(0===n)return 0;for(var t=0,a=e[0],r=0,o=1;o<n;++o){var i=e[o];i!==a&&(a=i,r=Math.max(o-t,r),t=o)}return Math.max(n-t,r)},e.prototype.tensorShapeFromTensor=function(e,n,t){if(void 0===t&&(t=!0),0===n.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Un(e,t)},e.prototype.calculateOutputSize=function(e){var t=this.valuesShape,a=this.defaultValueShape;n.backend_util.validateDefaultValueShape(a,t);var r=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=n.backend_util.combineRaggedTensorToTensorShapes(this.raggedRank,r,t);o[0]<0&&(o[0]=e);for(var i=1;i<=this.raggedRank;++i)o[i]<0&&(o[i]=this.getMaxWidth(i));return o},e.prototype.calculateFirstParentOutputIndex=function(e,t,a){for(var r=Math.min(e,a),o=[],i=0,c=0;c<r;++c,i+=t)o.push(i);for(c=r;c<e;++c)o.push(-1);return n.util.assert(o.length===e,(function(){return"Final length of result must be equal to firstDimension."})),o},e.prototype.calculateOutputIndexRowSplit=function(e,n,t,a){for(var r=e.length,o=[],i=0;i<r-1;++i){var c=e[i+1]-e[i],s=Math.min(a,c),u=n[i];-1===u&&(s=0);for(var l=0;l<s;++l)o.push(u),u+=t;for(l=0;l<c-s;++l)o.push(-1)}if(r>0&&o.length!==e[r-1])throw new Error("Invalid row split size.");return o},e.prototype.calculateOutputIndexValueRowID=function(e,n,t,a){var r=e.length,o=[];if(0===r)return[];var i=0,c=e[0];if(c>=n.length)throw new Error("Got currentValueRowId=".concat(c,", which is not less than ").concat(n.length));var s=n[c];o.push(s);for(var u=1;u<r;++u){var l=e[u];if(l===c)s>=0&&(++i<a?s+=t:s=-1);else{if(i=0,c=l,l>=n.length)throw new Error("Got nextValueRowId=".concat(l," which is not less than ").concat(n.length));s=n[l]}o.push(s)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o},e.prototype.calculateOutputIndex=function(e,n,t,a){var r=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case Bn.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(r,n,t,a);case Bn.ROW_SPLITS:if(r.length-1>n.length)throw new Error("Row partition size is greater than output size: ".concat(r.length-1," > ").concat(n.length));return this.calculateOutputIndexRowSplit(r,n,t,a);default:throw new Error("Unsupported partition type: ".concat(Bn[o]))}},e.prototype.getFirstDimensionSize=function(){var e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");var n=this.rowPartitionTypes[0];switch(n){case Bn.FIRST_DIM_SIZE:return e[0];case Bn.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Bn.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(Bn[n]))}},e.prototype.compute=function(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),a=new Array(this.raggedRank+1);a[a.length-1]=1;for(var r=a.length-2;r>=0;--r)a[r]=a[r+1]*t[r+1];var o=Un(t,!1),i=n.util.getArrayFromDType(this.valuesDType,n.util.sizeFromShape(o));if(a[0]*t[0]>0){var c=this.calculateFirstParentOutputIndex(e,a[0],t[0]);for(r=1;r<=this.raggedRank;++r){c=this.calculateOutputIndex(r-1,c,a[r],t[r])}this.setOutput(this.raggedRank,c,i,o)}return[o,i]},e.prototype.setOutput=function(e,t,a,r){if(0!==a.length){var o=this.values,i=a,c=r.slice();c=c.slice(e+1);var s=n.util.sizeFromShape(c),u=t.length,l=this.defaultValue;if(l.length!==s&&1!==l.length){var d=this.defaultValueShape;n.tidy((function(){var e=n.reshape(l,d),t=n.broadcastTo(e,c);l=t.dataSync()}))}for(var p=0,h=0,f=0,x=0;x<=u;++x){var v=x<u?t[x]:-1;if(v!==f){if(h<f){var g=o.subarray(p*s);Wn(i.subarray(h*s),g,(f-h)*s)}if(x>=u){var m=a.length;v=Math.floor(m/s)}if(v>f)if(1===this.defaultValue.length)i.subarray(f*s,v*s).fill(this.defaultValue[0]),f=v;else for(;v>f;){Wn(i.slice(f*s),l,s),++f}v<0?(p=x+1,h=f):(p=x,f=(h=f)+1)}else++f}}},e}();function Wn(e,n,t){for(var a=0;a<t;a++)e[a]=n[a]}function Un(e,n){var t,a,r=[];try{for(var o=c(e),i=o.next();!i.done;i=o.next()){var s=i.value;if(s<0){if(!n)throw new Error("Dimension ".concat(s," must be >= 0"));if(s<-1)throw new Error("Dimension ".concat(s," must be >= -1"));s=-1}r.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(a=o.return)&&a.call(o)}finally{if(t)throw t.error}}return r}var Mn=mn((function(e){return 1/Math.sqrt(e)}));var Gn=mn((function(e){return 1/(1+Math.exp(-e))}));var zn=mn((function(e){return Math.sqrt(e)})),Xn=mn((function(e,n){var t=n.pattern,a=n.replaceGlobal,r=n.rewrite;return e.replace(new RegExp(t,a?"g":""),r)}));var Hn=function(){function e(e,t,a,r,o,i){this.separator=n.util.encodeString(e),this.nGramWidths=t,this.leftPad=n.util.encodeString(a),this.rightPad=n.util.encodeString(r),this.padWidth=o,this.preserveShort=i}return e.prototype.getPadWidth=function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)},e.prototype.getNumNGrams=function(e,n){var t=this.getPadWidth(n);return Math.max(0,e+2*t-n+1)},e.prototype.createNGrams=function(e,n,t,a,r,o){for(var i=function(i){var s=c.getPadWidth(o),u=Math.max(0,s-i),l=Math.max(0,s-(r-(i+1))),d=o-(u+l),p=n+(u>0?0:i-s),h=0;h+=u*c.leftPad.length;for(var f=0;f<d;++f)h+=e[p+f].length;h+=l*c.rightPad.length,h+=(u+l+d-1)*c.separator.length,t[a+i]=new Uint8Array(h);var x=t[a+i],v=0,g=function(e){return e.forEach((function(e){return x[v++]=e}))};for(f=0;f<u;++f)g(c.leftPad),g(c.separator);for(f=0;f<d-1;++f)g(e[p+f]),g(c.separator);if(d>0){g(e[p+d-1]);for(f=0;f<l;++f)g(c.separator),g(c.rightPad)}else{for(f=0;f<l-1;++f)g(c.rightPad),g(c.separator);g(c.rightPad)}},c=this,s=0;s<r;++s)i(s)},e.prototype.compute=function(e,t){var a=this,r=e.length,o=t.length;if(o>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var c=1;c<o;++c){var s=t[c]>=i;if(!(s=s&&t[c]<=r))throw new Error("Invalid split value ".concat(t[c],", must be in [").concat(i,", ").concat(r,"]"));i=t[c]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=o-1,l=n.util.getArrayFromDType("int32",o);if(0===r||0===o){var d=new Array(r);for(c=0;c<=u;++c)l[c]=0;return[d,l]}l[0]=0;var p=function(e){var n=t[e]-t[e-1],r=0;h.nGramWidths.forEach((function(e){r+=a.getNumNGrams(n,e)})),h.preserveShort&&n>0&&0===r&&(r=1),l[e]=l[e-1]+r},h=this;for(c=1;c<=u;++c)p(c);var f=new Array(l[u]),x=function(n){var r=t[n],o=l[n];if(v.nGramWidths.forEach((function(i){var c=t[n+1]-t[n],s=a.getNumNGrams(c,i);a.createNGrams(e,r,f,o,s,i),o+=s})),v.preserveShort&&o===l[n]){var i=t[n+1]-t[n];if(0===i)return"continue";var c=i+2*v.padWidth;v.createNGrams(e,r,f,o,1,c)}},v=this;for(c=0;c<u;++c)x(c);return[f,l]},e}();function jn(e,n,t,a){if(e.length)if(0!==n.length)if(1!==n.length){var r=0;for(s=0;s<e.length+1;s++)if(s===e.length||-1!==n.indexOf(e[s])){c=e.subarray(r,s);t&&0===c.length||a.push(c),r=s+1}}else{for(var o=n[0],i=e.indexOf(o);-1!==i;){var c=e.subarray(0,i);t&&0===c.length||a.push(c),i=(e=e.subarray(i+1)).indexOf(o)}t&&0===e.length||a.push(e)}else for(var s=0;s<e.length;++s)a.push(e.subarray(s,s+1))}var Kn=xn((function(e,n){return e-n}));var qn=function(e,n){var t=n.value-e.value;return 0===t?e.index-n.index:t};function Yn(e,t,a,r){for(void 0===a&&(a=0),void 0===r&&(r=e.length-1);r>a;){if(r-a>600){var o=r-a+1,i=t-a+1,c=Math.log(o),s=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*s*(o-s)/o)*Math.sign(i-o/2);Yn(e,t,Math.max(a,Math.floor(t-i*s/o+u)),Math.min(r,Math.floor(t+(o-i)*s/o+u)))}var l=e[t],d=a,p=r;for(n.util.swap(e,a,t),qn(e[r],l)>0&&n.util.swap(e,a,r);d<p;){for(n.util.swap(e,d,p),d++,p--;qn(e[d],l)<0;)d+=1;for(;qn(e[p],l)>0;)p-=1}0===qn(e[a],l)?n.util.swap(e,a,p):(p+=1,n.util.swap(e,p,r)),p<=t&&(a=p+1),t<=p&&(r=p-1)}}var Qn=vn,Zn=function(e,t,a,r,o){for(var i=n.util.sizeFromShape(r),c=n.util.makeZerosTypedArray(o,a),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=o||(c[u]+=i>0?t[s]:1)}return c},Jn=function(e,t,a,r){void 0===r&&(r=!1);for(var o=e.shape[0],i=e.shape[1],c=n.buffer([o,a],t.dtype),s=0;s<o;s++)for(var u=0;u<i;u++){var l=e.get(s,u);if(l<0)throw new Error("Input x must be non-negative!");l>=a||(r?c.set(1,s,l):t.size>0?c.set(c.get(s,l)+t.get(s,u),s,l):c.set(c.get(s,l)+1,s,l))}return c},$n=gn,et=function(e,t,a,r){if("int32"===r)return[t,"int32",Int32Array.from(e)];if("bool"===r){var o=n.util.toTypedArray([0],a),i=s(xn((function(e,n){return e!==n?1:0}))(t,[],e,o,"bool"),2),c=i[0];return[i[1],"bool",c]}throw new Error("Error in Cast: failed to cast ".concat(a," to ").concat(r))},nt=bn,tt=function(e,t,a,r){var o=n.util.getArrayFromDType(a,n.util.sizeFromShape(t));if(r&&"string"!==a){var i=0;e.forEach((function(e){var t=n.util.sizeFromShape(e.shape);o.set(e.vals,i),i+=t}))}else{var c=0;e.forEach((function(e){for(var r="string"===a?n.backend_util.fromUint8ToStringArray(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+c,l=0;l<e.shape[1];++l)o[u+l]=r[i++];c+=e.shape[1]}))}return o},at=Cn,rt=yn,ot=wn,it=In,ct=function(e,t,a,r,o,i,c,l,d){for(var p=n.buffer([r,i],a),h=0;h<r;h++){for(var f=[],x=0,v=0;v<o;v++){var g=e[h*o+v];x+=g*c[v],f.push(g)}if(x<0||x>=d/i)throw new Error("Invalid indices: ".concat(f," does not index into ").concat(l));for(var m=0;m<i;m++)p.values[h*i+m]=t.get.apply(t,u([],s(t.indexToLoc(x*i+m)),!1))}return p},st=function(e,t,a){for(var r=n.buffer(a,e.dtype),o=0;o<r.size;++o){var i=r.indexToLoc(o).slice(),c=i[0],s=i[2],u=t.locToIndex([c,s]);i[2]=t.values[u];var l=e.locToIndex(i);0<=l&&l<e.values.length&&(r.values[o]=e.values[l])}return r},ut=Sn,lt=kn,dt=Rn,pt=Tn,ht=function(e,t,a){var r=(t-e)/(a-1),o=n.util.makeZerosTypedArray(a,"float32");o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+r;return o},ft=Nn,xt=function(e,t,a,r){for(var o=n.util.getTypedArrayFromDType(r,n.util.sizeFromShape(a)),i=0;i<o.length;++i){for(var c=i*t,s=e[c],u=0;u<t;++u){var l=e[c+u];(Number.isNaN(l)||l>s)&&(s=l)}o[i]=s}return o},vt=En,gt=An,mt=_n,bt=function(e,t,a){var r=n.util.createScalarValue(-1,a);return _n([],t,r,e,a)},Ct=On,yt=function(e,t,a,r){for(var o=s(n.backend_util.computeOutAndReduceShapes(e,r),2),i=o[0],c=o[1],u=n.upcastType(t,"int32"),l=n.util.makeZerosTypedArray(n.util.sizeFromShape(i),u),d=n.util.sizeFromShape(c),p=0;p<l.length;++p){for(var h=p*d,f=1,x=0;x<d;++x)f*=a[h+x];l[p]=f}return{outVals:l,outShape:i,outDtype:u}},wt=function(e,t,a,r,o,i,c,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,a){e.forEach((function(e,r){if(e<0||e>=a){var o=n.util.indexToLoc(r,t.length,n.util.computeStrides(t)).join(",");throw new Error("indices[".concat(o,"] = ").concat(e," is not in [0, ").concat(a,")"))}}))}(i,c,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");var u=Fn(i,c,e,r[0]),l=u.outSplits,d=u.valueSlices,p=u.numValues,h=function(e){for(var t=[],a=function(a){var r=e[a].length,o=n.util.getArrayFromDType("int32",r);t.push(o),e[a].forEach((function(e,n){return o[n]=e}))},r=0;r<e.length;++r)a(r);return t}(l),f=Pn(a,r,o,d,p);return[h,f[0],f[1]]},It=function(e,t,a,r,o,i,c){if(t.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(c.length>1)throw new Error("deltas must be a scalar or vector");var s=0===t.length,u=0===o.length,l=0===c.length,d=[];s||d.push(t[0]),u||d.push(o[0]),l||d.push(c[0]);for(var p=1;p<d.length;++p)if(d[p]!==d[p-1])throw new Error("starts, limits, and deltas must have the same shape");var h=0===d.length?1:d[0],f=n.util.getArrayFromDType("int32",h+1);f[0]=0;for(var x=0;x<h;++x){var v=s?e[0]:e[x],g=u?r[0]:r[x];if(0===(S=l?i[0]:i[x]))throw new Error("Requires delta != 0");var m=void 0;if(S>0&&g<v||S<0&&g>v)m=0;else if((m=Math.ceil(Math.abs((g-v)/S)))>Ln)throw new Error("Requires ((limit - start) / delta) <= ".concat(Ln));f[x+1]=f[x]+m}var b=f[h],C=n.util.getArrayFromDType(a,b),y=0;for(x=0;x<h;++x){var w=f[x+1]-f[x],I=s?e[0]:e[x],S=l?i[0]:i[x];for(p=0;p<w;++p)C[y++]=I,I+=S}return[f,C]},St=function(e,n,t,a,r,o,i,c,s,u){return new Vn(e,n,t,a,r,o,i,c,s,u).compute()},kt=function(e,t,a,r){if(e===t||e<t&&a<0||t<e&&a>1)return n.util.makeZerosTypedArray(0,r);var o=Math.abs(Math.ceil((t-e)/a)),i=n.util.makeZerosTypedArray(o,r);t<e&&1===a&&(a=-1),i[0]=e;for(var c=1;c<i.length;c++)i[c]=i[c-1]+a;return i},Rt=Mn,Tt=function(e,t,a,r,o,i,c,s,u,l){var d=[r/o,o],p=e.values,h=t.values;if(0===r)return n.buffer(a,t.dtype);var f=u instanceof n.TensorBuffer?u:n.buffer(d,t.dtype);"string"==typeof u||"number"==typeof u?f.values.fill(u):"boolean"==typeof u&&f.values.fill(+u);for(var x=0;x<i;x++){for(var v=[],g=0,m=0;m<c;m++){var b=p[x*c+m];v.push(b),g+=b*s[m]}if(g<0||g>=r/o)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(a));for(var C=0;C<o;C++)l?f.values[g*o+C]+=h[x*o+C]:f.values[g*o+C]=0===t.rank?h[0]:h[x*o+C]}return f},Nt=Gn,Et=function(e){for(var n=new Float32Array(e.length),t=0;t<e.length;++t)n[t]=Math.abs(e[t]);return n},At=function(e,t,a,r,o){var i=n.slice_util.isSliceContinous(r,t,a),c=n.util.sizeFromShape(a),l=n.util.computeStrides(r);if(i){var d=n.slice_util.computeFlatOffset(t,l);return"string"===o?e.slice(d,d+c):e.subarray(d,d+c)}for(var p="string"===o?n.backend_util.fromUint8ToStringArray(e):e,h=n.buffer(r,o,p),f=n.buffer(a,o),x=0;x<f.size;++x){var v=f.indexToLoc(x),g=v.map((function(e,n){return e+t[n]}));f.set.apply(f,u([h.get.apply(h,u([],s(g),!1))],s(v),!1))}return"string"===o?n.backend_util.fromStringArrayToUint8(f.values):f.values},_t=function(e,t,a,r,o,i,c){var s=t[0],u=i[0],l=new Array(u),d=new Array(s),p=t[1];if(0===u){if(0!==s)throw new Error(n.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(s));return[C=n.util.getArrayFromDType(a,0),[0,p],y=n.util.getArrayFromDType(o,0),l,d]}for(var h=!0,f=0,x=new Array(u).fill(0),v=0;v<s;++v){if((m=e[v*p])<0)throw new Error(n.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(v,m));if(m>=u)throw new Error(n.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(v,m,u));++x[m],h=h&&m>=f,f=m}for(var g=!0,m=0;m<u;++m){var b=0===x[m];l[m]=b,g=g&&!b,x[m]=Math.max(x[m],1),m>0&&(x[m]+=x[m-1])}if(g&&h){var C=e,y=r;for(v=0;v<s;++v)d[v]=v;return[C,[s,p],y,l,d]}var w=x[u-1],I=(C=n.util.getArrayFromDType(a,w*p),y=n.util.getArrayFromDType(o,w),new Array(u).fill(0));for(v=0;v<s;++v){var S=I[m=e[v*p]],k=(0===m?0:x[m-1])+S;I[m]++;for(var R=0;R<p;++R)C[k*p+R]=e[v*p+R];y[k]=r[v],d[v]=k}for(m=0;m<u;++m){if(0===I[m]){var T=0===m?0:x[m-1];C[T*p+0]=m;for(var N=1;N<p;++N)C[T*p+N]=0;y[T]=c}}return[C,[w,p],y,l,d]},Ot=function(e,t,a,r,o){for(var i=n.util.sizeFromShape(r),c=t[0],s=o.length,u=[],l=1,d=-1,p=0;p<s;++p){var h=o[p];if(-1===h){if(-1!==d)throw new Error(n.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(d,p));d=p,u.push(1)}else{if(h<0)throw new Error(n.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(p,h));l*=h,u.push(h)}}if(-1!==d){if(l<=0)throw new Error(n.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());var f=Math.trunc(i/l);if(l*f!==i)throw new Error(n.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[d]=f}if(n.util.sizeFromShape(u)!==i)throw new Error(n.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(r,u));var x=r.length,v=[];if(x>0){v[x-1]=1;for(p=x-2;p>=0;--p)v[p]=v[p+1]*r[p+1]}var g=[];if(s>0){g[s-1]=1;for(p=s-2;p>=0;--p)g[p]=g[p+1]*u[p+1]}for(var m=n.util.getArrayFromDType(a,c*s),b=0;b<c;++b){for(var C=0,y=0;y<x;++y)C+=e[b*x+y]*v[y];for(y=0;y<s;++y)m[b*s+y]=Math.trunc(C/g[y]),C%=g[y]}return[m,[c,s],u]},Ft=function(e,t,a,r,o,i,c){void 0===i&&(i=!1),void 0===c&&(c=0);var s=r.length,u=[t[0],e.length/t[0]],l=u[1],d=s>0?o[s-1]+1:0;if(d<0)throw new Error(n.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var p=t.slice();p[0]=d;var h=p.reduce((function(e,n){return e*n}),1),f=n.util.getArrayFromDType(a,h);if(0===s)return d>0&&f.fill(c),[f,p];if(d<=0)throw new Error(n.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());for(var x=0,v=1,g=0,m=o[x];;){var b=0;if(v<s){if(m===(b=o[v])){++v;continue}if(m>=b)throw new Error(n.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(m<0||m>=d)throw new Error(n.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(m,d));m>g&&f.fill(c,g*l,m*l);for(var C=x;C<v;++C){var y=r[C];if(y<0||y>=u[0])throw new Error(n.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(C,r[C],u[0]));for(var w=0;w<l;w++)f[m*l+w]+=e[y*l+w]}if(i)for(w=0;w<l;w++)f[m*l+w]/=v-x;if(x=v,g=m+1,m=b,++v>s)break}return g<d&&f.fill(c,g*l,d*l),[f,p]},Dt=zn,Pt=Xn,Lt=function(e,t,a,r){for(var o=n.buffer(e,t.dtype),i=0;i<o.size;i++){for(var c=o.indexToLoc(i),l=new Array(c.length),d=0;d<l.length;d++)l[d]=c[d]*a[d]+r[d];o.set.apply(o,u([t.get.apply(t,u([],s(l),!1))],s(c),!1))}return o},Bt=function(e,n,t,a,r,o,i,c){return new Hn(t,a,r,o,i,c).compute(e,n)},Vt=function(e,t,a){for(var r=e.length,o=[],i=0,c=0,s=new Array(r),u=0;u<r;++u){var l=o.length;jn(e[u],t,a,o);var d=o.length-l;s[u]=d,i+=d,c=Math.max(c,d)}var p=n.util.getArrayFromDType("int32",2*i),h=new Array(i),f=[r,c],x=0;for(u=0;u<r;++u)for(var v=0;v<s[u];++v)p[2*x]=u,p[2*x+1]=v,h[x]=o[x],++x;return[p,h,f]},Wt=function(e,t){for(var a=n.util.getArrayFromDType("int32",e.length),r=0;r<e.length;++r)a[r]=n.util.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return a},Ut=Kn,Mt=function(e,t){for(var a=new Array(e.rank),r=0;r<a.length;r++)a[r]=e.shape[r]*t[r];var o=n.buffer(a,e.dtype);for(r=0;r<o.values.length;++r){for(var i=o.indexToLoc(r),c=new Array(e.rank),s=0;s<c.length;s++)c[s]=i[s]%e.shape[s];var u=e.locToIndex(c);o.values[r]=e.values[u]}return o},Gt=function(e,t,a,r,o){for(var i=t[t.length-1],c=s([e.length/i,i],2),u=c[0],l=c[1],d=n.util.getTypedArrayFromDType(a,u*r),p=n.util.getTypedArrayFromDType("int32",u*r),h=function(n){var t=n*l,a=e.subarray(t,t+l),i=new Array(a.length);a.forEach((function(e,n){return i[n]={value:e,index:n}})),r<i.length&&(Yn(i,r),i=i.slice(0,r)),o&&i.sort(qn);for(var c=n*r,s=d.subarray(c,c+r),u=p.subarray(c,c+r),h=0;h<r;h++)s[h]=i[h].value,u[h]=i[h].index},f=0;f<u;f++)h(f);var x=t.slice();return x[x.length-1]=r,[n.buffer(x,a,d),n.buffer(x,"int32",p)]},zt=function(e,t,a,r,o){for(var i=t.length,c=n.util.sizeFromShape(t),s=n.util.computeStrides(t),u=n.util.computeStrides(o),l=n.util.getTypedArrayFromDType(a,n.util.sizeFromShape(o)),d=0;d<c;++d){for(var p=n.util.indexToLoc(d,i,s),h=new Array(p.length),f=0;f<h.length;f++)h[f]=p[r[f]];l[n.util.locToIndex(h,i,u)]=e[d]}return l},Xt=function(e,t,a,r){for(var o=n.util.parseAxisParam(t,a)[0],i=[1,a[0],1],c=0;c<o;c++)i[0]*=a[c];for(i[1]=a[o],c=o+1;c<a.length;c++)i[2]*=a[c];var s=new Map,u=new Int32Array(a[o]),l=new n.TensorBuffer(i,r,e),d=[],p=1===i[0]&&1===i[2];for(c=0;c<a[o];c++){var h=void 0;if(p)h=e[c].toString();else{for(var f=[],x=0;x<i[0];x++)for(var v=0;v<i[2];v++)f.push(l.get(x,c,v));h=f.join(",")}var g=s.get(h);if(null!=g)u[c]=g;else{var m=s.size;s.set(h,m),u[c]=m,d.push(c)}}var b=i.slice();b[1]=s.size;var C=new n.TensorBuffer(b,r);d.forEach((function(e,n){for(var t=0;t<i[0];t++)for(var a=0;a<i[2];a++)C.set(l.get(t,e,a),t,n,a)}));var y=a.slice();return y[o]=b[1],{outputValues:C.values,outputShape:y,indices:u}};function Ht(e,n){return["x","y","z","w","u","v"].slice(0,n).map((function(n){return"".concat(e,".").concat(n)}))}function jt(e,n){return 1===n?[e]:Ht(e,n)}var Kt=function(){function e(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Le(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=jt("rc",this.rank),t=Ae(this.rank),a=this.getOutOfBoundsCondition(n),r=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(r,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return e.prototype.getSourceCoordsArr=function(e){for(var n=[],t=0;t<=1;t++)for(var a=0;a<=1;a++){for(var r="".concat(0===t?"r":"rp1",", ").concat(0===a?"c":"cp1"),o=2;o<this.rank;o++)r="".concat(e[e.length-1-o],",")+r;n.push(r)}return n},e.prototype.getOutOfBoundsCondition=function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var n="",t=this.rank-2;t<this.rank;t++)n+="".concat(e[t]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(t,"]"):this.outputShape[t]),t<this.rank-1&&(n+="||");return n},e.prototype.getSetup=function(e){if(1===this.rank)return"";var n=e.slice(-2),t=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],a=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(n[0],";\n      int c = ").concat(n[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(t,";\n      bool rEdge = rp1 >= ").concat(a,";\n    ")},e.prototype.getOutput=function(e){var n=this.getSourceCoordsArr(e);if(1===this.rank){var t=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(t," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(n[0],"),\n            cEdge ? 0. : getA(").concat(n[1],"),\n            rEdge ? 0. : getA(").concat(n[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(n[3],")")},e}(),qt=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Le(this.outputShape.length);for(var t,a,r,o="",i=0;i<4;i++){var c="thisRC = rc;";i%2==1&&(c+="thisRC.z += 1;"),i>1&&(c+="thisRC.y += 1;"),o+="\n        ".concat(c,"\n        ").concat(i>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(i,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(i>0?"}":"","\n      ")}this.userCode="\n      ".concat((t=n,a=this.enableShapeUniforms,r=a?ge(["r","c","d"],"inputShape"):xe(["r","c","d"],t),"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":me(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")};var Yt=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}return e.prototype.acquireTexture=function(e,n,t){var a=Zt(n,t),r=Jt(e,a,t);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);var o,i=Qt(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,t);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();var c=this.freeTextures[r].pop();return this.usedTextures[r].push(c),c}return a===p.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===p.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===p.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===p.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===p.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[r].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o},e.prototype.releaseTexture=function(e,t,a,r){if(null!=this.freeTextures){var o=Zt(a,r),i=Jt(t,o,r);i in this.freeTextures||(this.freeTextures[i]=[]);var c=Qt(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=n.env().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=c):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=c),this.numUsedTextures--;var u=this.usedTextures[i],l=u&&u.indexOf(e);if(null==l||l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[l]=u[u.length-1],u.pop(),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var n=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*n),"%)"))}},Object.defineProperty(e.prototype,"numBytesAllocated",{get:function(){return this._numBytesAllocated},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numBytesFree",{get:function(){return this._numBytesFree},enumerable:!1,configurable:!0}),e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var n in this.freeTextures)this.freeTextures[n].forEach((function(n){e.gpgpu.deleteMatrixTexture(n.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(n){e.gpgpu.deleteMatrixTexture(n.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}},e}();function Qt(e,n,t,a,r){var o,i=function(e,n){switch(e){case p.PACKED_2X2_FLOAT32:return en(n);case p.PACKED_2X2_FLOAT16:return tn(n);case p.UNPACKED_FLOAT32:return qe(n);case p.UNPACKED_FLOAT16:return Qe(n);case p.PACKED_4X1_UNSIGNED_BYTE:return Je(n);default:throw new Error("Unknown physical texture type ".concat(e))}}(n,a);if(r){var c=s(b(e[0],e[1]),2);o=c[0]*c[1]}else{var u=s(g(e[0],e[1]),2);o=u[0]*u[1]}var l=function(e,n){var t=e;if(n===t.R32F)return 4;if(n===t.R16F)return 2;if(n===t.RGBA32F)return 16;if(n===e.RGBA)return 16;if(n===t.RGBA16F)return 8;if(n===t.RGBA8)return 4;throw new Error("Unknown internal format ".concat(n))}(t,i);return o*l}function Zt(e,t){if(e===d.UPLOAD)return p.PACKED_2X2_FLOAT32;if(e===d.RENDER||null==e)return function(e){return n.env().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?p.PACKED_2X2_FLOAT32:p.UNPACKED_FLOAT32:e?p.PACKED_2X2_FLOAT16:p.UNPACKED_FLOAT16}(t);if(e===d.DOWNLOAD||e===d.PIXELS)return p.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function Jt(e,n,t){return"".concat(e[0],"_").concat(e[1],"_").concat(n,"_").concat(t)}var $t=function(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Le(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},ea="if (isnan(x)) return x;",na="return abs(x);",ta="return x;",aa=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Le(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},ra=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Le(this.outputShape.length);var n=e.length,t=jt("rc",n),a=Ae(n),r=function(e,n){if(1===e)return"rc";for(var t="",a=0;a<e;a++)t+=n[a],a<e-1&&(t+=",");return t}(n,t),o=t.slice(-2),i=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(r,");\n\n        setOutput(getChannel(packedInput, ").concat(i,"));\n      }\n    ")},oa=n.kernel_impls.whereImpl,ia={};var ca=n.env().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var sa=function(e){function t(t){var a,r,o=e.call(this)||this;if(o.pendingRead=new WeakMap,o.pendingDisposal=new WeakSet,o.dataRefCount=new WeakMap,o.numBytesInGPU=0,o.uploadWaitMs=0,o.downloadWaitMs=0,o.lastGlFlushTime=0,o.warnedAboutMemory=!1,o.pendingDeletes=0,o.disposed=!1,!n.env().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=t){if(t instanceof fn)a=t;else{var i=v(n.env().getNumber("WEBGL_VERSION"),t);a=new fn(i)}o.binaryCache={},o.gpgpuCreatedLocally=!1}else{i=v(n.env().getNumber("WEBGL_VERSION"));a=new fn(i),o.binaryCache=((r=n.env().getNumber("WEBGL_VERSION"))in ia||(ia[r]={}),ia[r]),o.gpgpuCreatedLocally=!0}return o.gpgpu=a,o.canvas=o.gpgpu.gl.canvas,o.textureManager=new Yt(o.gpgpu),o.numMBBeforeWarning=null==n.env().global.screen?1024:n.env().global.screen.height*n.env().global.screen.width*window.devicePixelRatio*600/1024/1024,o.texData=new n.DataStorage(o,n.engine()),o}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(t,e),t.prototype.nextDataId=function(){return t.nextDataId++},t.prototype.numDataIds=function(){return this.texData.numDataIds()-this.pendingDeletes},t.prototype.writeTexture=function(e,n,t,a,r,o){var i=this.makeTensorInfo(n,t),c=this.texData.get(i.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[a,r]},c.texShape=[a,r];var s=J(n),u=new Ge(s,!1,o),l=this.runWebGLProgram(u,[i],t,[[a,r]]);return l.shape=n,c.texture=null,this.disposeIntermediateTensorInfo(i),l.dataId},t.prototype.write=function(e,t,a){if((n.env().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||n.env().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===a&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:a,values:e,usage:d.UPLOAD,refCount:1}),r},t.prototype.refCount=function(e){return this.texData.has(e)?this.texData.get(e).refCount:0},t.prototype.incRef=function(e){this.texData.get(e).refCount++},t.prototype.decRef=function(e){this.texData.has(e)&&this.texData.get(e).refCount--},t.prototype.move=function(e,t,a,r,o){if(n.env().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:a,dtype:r,values:t,usage:d.UPLOAD,refCount:o})},t.prototype.disposeIntermediateTensorInfo=function(e){this.disposeData(e.dataId)},t.prototype.readSync=function(e){var t=this.texData.get(e),a=t.values,r=t.dtype,o=t.complexTensorInfos,i=t.slice,c=t.shape,s=t.isPacked;if(null!=i){var u=void 0;u=s?new aa(c,ta):new $t(c,ta);var l=this.runWebGLProgram(u,[{dataId:e,shape:c,dtype:r}],r),d=this.readSync(l.dataId);return this.disposeIntermediateTensorInfo(l),d}if(null!=a)return this.convertAndCacheOnCPU(e);if("string"===r)return a;var p,h,f=null!=this.activeTimers;if(f&&(p=n.util.now()),"complex64"===r){var x=this.readSync(o.real.dataId),v=this.readSync(o.imag.dataId);h=n.backend_util.mergeRealAndImagArrays(x,v)}else h=this.getValuesFromTexture(e);return f&&(this.downloadWaitMs+=n.util.now()-p),this.convertAndCacheOnCPU(e,h)},t.prototype.read=function(e){return o(this,void 0,void 0,(function(){var t,a,r,o,c,l,d,p,h,f,x,v,g,b,C,w,I,S,k,R,T,N,E;return i(this,(function(i){switch(i.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(a=this.texData.get(e),r=a.values,o=a.shape,c=a.slice,l=a.dtype,d=a.complexTensorInfos,p=a.isPacked,null!=c)return h=void 0,h=p?new aa(o,ta):new $t(o,ta),f=this.runWebGLProgram(h,[{dataId:e,shape:o,dtype:l}],l),x=this.read(f.dataId),this.disposeIntermediateTensorInfo(f),[2,x];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(n.env().getBool("DEBUG")&&!n.env().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===n.env().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return v=null,"complex64"!==l&&n.env().get("WEBGL_BUFFER_SUPPORTED")&&(g=this.decode(e),b=this.texData.get(g.dataId),v=(E=this.gpgpu).createBufferFromTexture.apply(E,u([b.texture.texture],s(m(o)),!1))),this.pendingRead.set(e,[]),"complex64"===l?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:i.sent(),i.label=2;case 2:return"complex64"!==l?[3,4]:[4,Promise.all([this.read(d.real.dataId),this.read(d.imag.dataId)])];case 3:return w=i.sent(),I=w[0],S=w[1],C=n.backend_util.mergeRealAndImagArrays(I,S),[3,5];case 4:null==v?C=this.getValuesFromTexture(e):(k=n.util.sizeFromShape(o),C=this.gpgpu.downloadFloat32MatrixFromBuffer(v,k)),i.label=5;case 5:return null!=g&&this.disposeIntermediateTensorInfo(g),null!=v&&y(R=this.gpgpu.gl,(function(){return R.deleteBuffer(v)})),T=this.convertAndCacheOnCPU(e,C),N=this.pendingRead.get(e),this.pendingRead.delete(e),N.forEach((function(e){return e(T)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&n.engine().removeDataId(e,this),this.pendingDeletes--),[2,T]}}))}))},t.prototype.readToGPU=function(e,t){void 0===t&&(t={});var a=this.texData.get(e),r=a.values,o=a.shape,i=a.slice,c=a.dtype,s=a.isPacked,u=a.texture;if("complex64"===c)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var l=void 0;l=s?new aa(o,ta):new $t(o,ta);var d=this.runWebGLProgram(l,[{dataId:e,shape:o,dtype:c}],c),p=this.readToGPU(d,t);return this.disposeIntermediateTensorInfo(d),p}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var h=this.decode(e,t.customTexShape),f=n.engine().makeTensorFromTensorInfo(h),x=this.texData.get(h.dataId);return Object.assign({tensorRef:f},x.texture)},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var a=t.map((function(e){return n.util.decodeString(e)}));return n.buffer(e.shape,e.dtype,a)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return n.buffer(e.shape,e.dtype,t)},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var a=e[t];if(!w(a)){if(n.env().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(a," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(a," cannot be represented on this device."))}}},t.prototype.getValuesFromTexture=function(e){var t,a=this.texData.get(e),r=a.shape,o=a.dtype,i=a.isPacked,c=n.util.sizeFromShape(r);if(n.env().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(e),d=this.texData.get(l.dataId),p=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,u([d.texture.texture],s(m(r)),!1)).subarray(0,c);return this.disposeIntermediateTensorInfo(l),p}var h=n.env().getBool("WEBGL_PACK")&&!0===i,f=h?J(r):r,x=h?new Ue(f):new We(f),v=this.runWebGLProgram(x,[{shape:f,dtype:o,dataId:e}],"float32"),g=this.texData.get(v.dataId),b=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(g.texture.texture,g.texShape[0],g.texShape[1]).subarray(0,c);return this.disposeIntermediateTensorInfo(v),b},t.prototype.timerAvailable=function(){return n.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0},t.prototype.time=function(e){var t=this,a=this.activeTimers,r=[],c=!1;null==this.programTimersStack?(this.programTimersStack=r,c=!0):this.activeTimers.push(r),this.activeTimers=r,e();var s=n.util.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),u=n.util.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=a,c&&(this.programTimersStack=null);var l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return o(t,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return n.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(s)]:[3,2];case 1:return e=t.sent(),l.kernelMs=n.util.sum(e),l.getExtraProfileInfo=function(){return e.map((function(e,n){return{name:u[n],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},[3,3];case 2:l.kernelMs={error:"WebGL query timers are not supported in this environment."},t.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,l]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}},t.prototype.startTimer=function(){return n.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:n.util.now(),endMs:null}},t.prototype.endTimer=function(e){return n.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=n.util.now(),e)},t.prototype.getQueryTime=function(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(a){return n.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},t.prototype.disposeData=function(e,n){if(void 0===n&&(n=!1),this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var t=this.texData.get(e).complexTensorInfos;return null!=t&&(this.disposeData(t.real.dataId,n),this.disposeData(t.imag.dataId,n)),this.texData.delete(e),!0},t.prototype.releaseGPUData=function(e){var n=this.texData.get(e),t=n.texture,a=n.dtype,r=n.texShape,o=n.usage,i=n.isPacked,c=n.slice,s=c&&c.origDataId||e,u=this.dataRefCount.get(s);u>1?this.dataRefCount.set(s,u-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,a),this.textureManager.releaseTexture(t,r,o,i)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.shouldExecuteOnCPU=function(e,t){var a=this;return void 0===t&&(t=ca),n.env().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==a.texData.get(e.dataId).texture&&n.util.sizeFromShape(e.shape)<t}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.where=function(e){n.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return oa(e.shape,t)},t.prototype.packedUnaryOp=function(e,t,a){var r=new aa(e.shape,t),o=this.compileAndRun(r,[e],a);return n.engine().makeTensorFromTensorInfo(o)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=Et(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(n.env().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,na,e.dtype);var a=new $t(e.shape,na),r=this.compileAndRun(a,[e]);return n.engine().makeTensorFromTensorInfo(r)},t.prototype.makeTensorInfo=function(e,t,a){var r;if("string"===t&&null!=a&&a.length>0&&n.util.isString(a[0])){var o=a.map((function(e){return n.util.encodeString(e)}));r=this.write(o,e,t)}else r=this.write(a,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t,a){return n.engine().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,a),this)},t.prototype.unpackTensor=function(e){var n=new ra(e.shape);return this.runWebGLProgram(n,[e],e.dtype)},t.prototype.packTensor=function(e){var n=new Kt(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,n){var t=u([Q(e.shape)],s(Z(e.shape)),!1),a={dtype:e.dtype,shape:t,dataId:e.dataId},r=u([Q(n)],s(Z(n)),!1),o=new qt(r,t),i=[t],c=this.runWebGLProgram(o,[a],e.dtype,i,!0);return{dataId:c.dataId,shape:n,dtype:c.dtype}},t.prototype.decode=function(e,t){var a=this.texData.get(e),r=a.isPacked,o=a.shape,i=a.dtype;if(null!=t){var c=n.util.sizeFromShape(o),s=t[0]*t[1]*4;n.util.assert(c<=s,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}))}var u,l=J(o);u=r?new Ve(l):new Be(l);var d=[null!=t?t:m(l)];return{dtype:i,shape:o,dataId:this.runWebGLProgram(u,[{shape:l,dtype:i,dataId:e}],i,d,!0,t).dataId}},t.prototype.runWebGLProgram=function(e,t,a,r,o,i){var c=this;void 0===o&&(o=!1);var s=this.makeTensorInfo(e.outputShape,a),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===l.DENSE){var d=null!=i?i:m(e.outputShape);u.texShape=d.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===n.util.sizeFromShape(s.shape))return u.values=n.util.getTypedArrayFromDType(s.dtype,0),s;var p=[],h=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var a=c.texData.get(t.dataId);if(null==a.texture){if(!e.packedInputs&&n.util.sizeFromShape(t.shape)<=n.env().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:a.values};e.packedInputs&&(a.isPacked=!0,a.shape=t.shape)}if(c.uploadToGPU(t.dataId),!!a.isPacked!=!!e.packedInputs)t=a.isPacked?c.unpackTensor(t):c.packTensor(t),p.push(t),a=c.texData.get(t.dataId);else if(a.isPacked&&!ne(a.shape,t.shape)){var r=t,o=t.shape;t.shape=a.shape,t=c.packedReshape(t,o),p.push(t),a=c.texData.get(t.dataId),r.shape=o}return{shape:t.shape,texData:a,isUniform:!1}}));this.uploadToGPU(s.dataId);var f,x={shape:s.shape,texData:u,isUniform:!1},v=function(e,t,a){var r="";t.concat(a).forEach((function(t){var o=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,c=_e(e.packedInputs,t.shape,i),s=c.useSqueezeShape,u=c.uniformShape,l=c.keptDims,d="",p="",h="";if(1===u.length&&e.packedInputs){var f=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];d="".concat(f[0]>1,"_").concat(f[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var x=n.util.computeStrides(u);h="".concat(x[0]===i[1],"_").concat(x[x.length-1]===i[1])}}else p="".concat(u[0]>1,"_").concat(u[1]>1);var v=t.shape.length,g=2===u.length&&n.util.arraysEqual(t.shape,i),m=1===n.util.sizeFromShape(t.shape),b=n.backend_util.getBroadcastDims(t.shape,a.shape),C=!e.packedInputs&&v===a.shape.length&&n.util.arraysEqual(i,a.texData.texShape),y=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(v,"_").concat(C,"_").concat(s?l:"","_").concat(u.length,"_").concat(m,"_").concat(b,"_").concat(g,"_").concat(d,"_").concat(p,"_").concat(h,"_").concat(y,"_").concat(o)}else{var w=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(w,"_").concat(o)}}));var o=e.userCode,i=e.constructor.name;return i+"_"+r+"_"+o+"".concat(n.env().getNumber("WEBGL_VERSION"))}(e,h,x),g=this.getAndSaveBinary(v,(function(){return function(e,t,a,r){var o=a.map((function(e,n){var a={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(a.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:a}})),i=o.map((function(e){return e.shapeInfo})),c={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=ye(o,c,t),u=R(e.gl,s),l=e.createProgram(u);return n.env().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:c,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(l),Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:c},De(e,t,l)))}(c.gpgpu,e,h,x)})),b=null!=this.activeTimers;b&&(f=this.startTimer()),n.env().get("ENGINE_COMPILE_ONLY")||function(e,t,a,r,o){t.program.enableShapeUniforms||(Pe(t.inShapeInfos,a),Pe([t.outShapeInfo],[r]));var i=r.texData.texture,c=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,c[0],c[1]):e.setOutputMatrixTexture(i.texture,c[0],c[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===n.env().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(var s=0;s<a.length;++s){var u=a[s],l=t.variablesLocations[s],d=l.uniform,p=l.offset,h=l.shape,f=l.texShape;if(h){var x=_e(t.program.packedInputs,u.shape,u.texData.texShape).uniformShape;switch(x.length){case 1:e.gl.uniform1iv(h,new Int32Array(x));break;case 2:e.gl.uniform2iv(h,new Int32Array(x));break;case 3:e.gl.uniform3iv(h,new Int32Array(x));break;case 4:e.gl.uniform4iv(h,new Int32Array(x))}}if(f&&e.gl.uniform2i(f,u.texData.texShape[0],u.texData.texShape[1]),null!=d)if(u.isUniform)if(n.util.sizeFromShape(u.shape)<2)e.gl.uniform1f(d,u.uniformValues[0]);else{var v=u.uniformValues;v instanceof Float32Array||(v=new Float32Array(v)),e.gl.uniform1fv(d,v)}else null!=u.texData.slice&&null!=p&&e.gl.uniform1i(p,u.texData.slice.flatOffset),e.setInputMatrixTexture(u.texData.texture.texture,d,s)}var g=t.outShapeLocation;if(g)switch(r.shape.length){case 1:e.gl.uniform1iv(g,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(g,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(g,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(g,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var m=n.util.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(m));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(m));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(m))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&o)for(s=0;s<t.program.customUniforms.length;++s){var b=t.program.customUniforms[s],C=t.customUniformLocations[s],y=o[s];if("float"===b.type)e.gl.uniform1fv(C,y);else if("vec2"===b.type)e.gl.uniform2fv(C,y);else if("vec3"===b.type)e.gl.uniform3fv(C,y);else if("vec4"===b.type)e.gl.uniform4fv(C,y);else if("int"===b.type)e.gl.uniform1iv(C,y);else if("ivec2"===b.type)e.gl.uniform2iv(C,y);else if("ivec3"===b.type)e.gl.uniform3iv(C,y);else{if("ivec4"!==b.type)throw Error("uniform type ".concat(b.type," is not supported yet."));e.gl.uniform4iv(C,y)}}e.executeProgram()}(this.gpgpu,g,h,x,r),p.forEach((function(e){return c.disposeIntermediateTensorInfo(e)})),b&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));var C=n.env().getNumber("WEBGL_FLUSH_THRESHOLD");if(C>0){var y=n.util.now();y-this.lastGlFlushTime>C&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!n.env().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===o){var w=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),w}return s},t.prototype.compileAndRun=function(e,n,t,a,r){return void 0===r&&(r=!1),t=t||n[0].dtype,this.runWebGLProgram(e,n,t,a,r)},t.prototype.getAndSaveBinary=function(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;if(!this.disposed){if(!n.env().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(n){e.gpgpu.deleteProgram(e.binaryCache[n].webGLProgram),delete e.binaryCache[n]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=n.tidy((function(){if(!n.env().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=n.env().getBool("DEBUG");n.env().set("DEBUG",!1);var a=e.abs(n.scalar(1e-8)).dataSync()[0];if(n.env().set("DEBUG",t),a>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,a=this.texData.get(e),r=a.shape,o=a.dtype,i=a.values,c=a.texture,u=a.usage,l=a.isPacked;if(null==c){var p,h=null!=this.activeTimers;h&&(p=n.util.now());var f=a.texShape;if(null==f&&(f=$(r,l),a.texShape=f),null!=i){var x=J(r),v=void 0,g=f[1],m=f[0],C=i instanceof Uint8Array||i instanceof Uint8ClampedArray;!l&&C||(g=(t=s(b(f[0],f[1]),2))[0],m=t[1]),v=l?new ze(x,C):new Ge(x,C);var y=C?[m,g]:f,w=this.makeTensorInfo(y,o),I=this.texData.get(w.dataId);I.usage=C?d.PIXELS:d.UPLOAD,I.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),g,m,i);var S=[[m,g]],k=this.runWebGLProgram(v,[w],o,S,!0),R=this.texData.get(k.dataId);a.texShape=R.texShape,a.isPacked=R.isPacked,a.usage=R.usage,n.env().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(a.texture=R.texture,a.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(w),h&&(this.uploadWaitMs+=n.util.now()-p)}else{var T=this.acquireTexture(f,u,o,l);a.texture=T}}},t.prototype.convertAndCacheOnCPU=function(e,n){var t=this.texData.get(e),a=t.dtype;return null!=n&&(t.values=function(e,n){if("float32"===n||"complex64"===n)return e;if("int32"===n||"bool"===n){for(var t="int32"===n?new Int32Array(e.length):new Uint8Array(e.length),a=0;a<t.length;++a)t[a]=Math.round(e[a]);return t}throw new Error("Unknown dtype ".concat(n))}(n,a)),t.values},t.prototype.acquireTexture=function(e,n,t,a){if(this.numBytesInGPU+=this.computeBytes(e,t),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var r=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(r," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,n,a)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*n.util.bytesPerElement(t)},t.prototype.checkCompileCompletion=function(){var e,n;try{for(var t=c(Object.entries(this.binaryCache)),a=t.next();!a.done;a=t.next()){var r=s(a.value,2)[1];this.checkCompletion_(r)}}catch(n){e={error:n}}finally{try{a&&!a.done&&(n=t.return)&&n.call(t)}finally{if(e)throw e.error}}},t.prototype.checkCompileCompletionAsync=function(){return o(this,void 0,void 0,(function(){var e,n,t,a,r,o,u,l,d,p,h,f,x,v=this;return i(this,(function(i){if(e=[],this.gpgpu.parallelCompilationExtension){try{for(n=c(Object.entries(this.binaryCache)),t=n.next();!t.done;t=n.next())a=s(t.value,2),d=a[1],e.push(this.checkCompletionAsync_(d))}catch(e){p={error:e}}finally{try{t&&!t.done&&(h=n.return)&&h.call(n)}finally{if(p)throw p.error}}return[2,Promise.all(e)]}r=function(n){var t=new Promise((function(e){try{v.checkCompletion_(n),e(!0)}catch(e){throw e}}));e.push(t)};try{for(o=c(Object.entries(this.binaryCache)),u=o.next();!u.done;u=o.next())l=s(u.value,2),d=l[1],r(d)}catch(e){f={error:e}}finally{try{u&&!u.done&&(x=o.return)&&x.call(o)}finally{if(f)throw f.error}}return[2,Promise.all(e)]}))}))},t.prototype.checkCompletionAsync_=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?[2,this.checkCompletion_(e)]:[3,1];case 1:return[4,n.nextFrame()];case 2:return t.sent(),[2,this.checkCompletionAsync_(e)]}}))}))},t.prototype.checkCompletion_=function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw A(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0},t.prototype.getUniformLocations=function(){var e,n;try{for(var t=c(Object.values(this.binaryCache)),a=t.next();!a.done;a=t.next()){var r=a.value;this.gpgpu.buildVao(r.webGLProgram);var o=De(this.gpgpu,r.program,r.webGLProgram),i=o.variablesLocations,s=o.customUniformLocations,u=o.infLoc,l=o.nanLoc,d=o.outShapeLocation,p=o.outShapeStridesLocation,h=o.outTexShapeLocation;r.variablesLocations=i,r.customUniformLocations=s,r.infLoc=u,r.nanLoc=l,r.outShapeLocation=d,r.outShapeStridesLocation=p,r.outTexShapeLocation=h}}catch(n){e={error:n}}finally{try{a&&!a.done&&(n=t.return)&&n.call(t)}finally{if(e)throw e.error}}},t.prototype.createTensorFromGPUData=function(e,t,a){e.channels=e.channels||"RGBA";var r=e.texture,o=e.height,i=e.width,c=e.channels,s=n.engine().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");var u=s.writeTexture(r,t,a,o,i,c);return n.engine().makeTensorFromDataId(u,t,a,s)},t}(n.KernelBackend);sa.nextDataId=0;function ua(){n.env().set("WEBGL_FORCE_F16_TEXTURES",!0)}n.device_util.isBrowser()&&n.registerBackend("webgl",(function(){return new sa}),2);var la={forceHalfFloat:ua},da=function(e,t,a){this.variableNames=["A","B"],this.outputShape=n.backend_util.assertAndGetBroadcastShape(t,a),this.enableShapeUniforms=Le(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")},pa="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",ha=function(e,t,a,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.backend_util.assertAndGetBroadcastShape(t,a);var o=this.outputShape.length;this.enableShapeUniforms=Le(o);var i="";if(r)if(0===o||1===n.util.sizeFromShape(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var c=Ae(o);if(i="\n          ".concat(c," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var s=jt("coords",o);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(s[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(s[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(s[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(s[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")};function fa(e){var n=e.inputs,t=e.backend,a=n.x;return t.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}var xa={kernelName:n.Identity,backendName:"webgl",kernelFunc:fa};function va(e){var n=e.inputs,t=e.backend,a=n.real,r=n.imag,o=t.makeTensorInfo(a.shape,"complex64"),i=t.texData.get(o.dataId),c=fa({inputs:{x:a},backend:t}),s=fa({inputs:{x:r},backend:t});return i.complexTensorInfos={real:c,imag:s},o}var ga={kernelName:n.Complex,backendName:"webgl",kernelFunc:va},ma="return (a < 0.) ? b * a : a;",ba="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var Ca={kernelName:n.LeakyRelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.alpha,c=a.makeTensorInfo([],"float32",n.util.createScalarValue(i,"float32")),s=n.env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ha(ba,o.shape,c.shape):new da(ma,o.shape,c.shape),u=a.runWebGLProgram(s,[o,c],"float32");return a.disposeIntermediateTensorInfo(c),u}},ya="return (a < 0.) ? b * a : a;",wa="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var Ia={kernelName:n.Prelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=t.x,o=t.alpha,i=n.env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ha(wa,r.shape,o.shape):new da(ya,r.shape,o.shape);return a.runWebGLProgram(i,[r,o],"float32")}};function Sa(e){var t=e.opSnippet,a=e.packedOpSnippet,r=e.cpuKernelImpl,o=e.dtype;return function(e){var i,c=e.inputs,s=e.backend,u=c.x,l=s,d=o||u.dtype;if(l.shouldExecuteOnCPU([u])&&null!=r){var p=l.texData.get(u.dataId),h=r(p.values,d);return l.makeTensorInfo(u.shape,d,h)}return i=n.env().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=a?new aa(u.shape,a):new $t(u.shape,t),l.runWebGLProgram(i,[u],d)}}function ka(e){var t=e.opSnippet,a=e.packedOpSnippet,r=e.checkOutOfBounds,o=void 0!==r&&r,i=e.supportsComplex,c=void 0!==i&&i,u=e.cpuKernelImpl,l=e.dtype;return function(e){var r=e.inputs,i=e.backend,d=r.a,p=r.b,h=i;if(c&&"complex64"===d.dtype){var f=h.texData.get(d.dataId),x=h.texData.get(p.dataId),v=s([[f.complexTensorInfos.real,x.complexTensorInfos.real],[f.complexTensorInfos.imag,x.complexTensorInfos.imag]].map((function(e){var a=s(e,2),r=a[0],o=a[1],i={dataId:r.dataId,dtype:r.dtype,shape:d.shape},c={dataId:o.dataId,dtype:o.dtype,shape:p.shape},u=new da(t,d.shape,p.shape);return h.runWebGLProgram(u,[i,c],n.upcastType(r.dtype,o.dtype))})),2),g=v[0],m=v[1],b=va({inputs:{real:g,imag:m},backend:h});return h.disposeIntermediateTensorInfo(g),h.disposeIntermediateTensorInfo(m),b}var C,y=l||n.upcastType(d.dtype,p.dtype);if(("string"===d.dtype||"string"===p.dtype||h.shouldExecuteOnCPU([d,p]))&&null!=u){var w=h.texData.get(d.dataId).values,I=h.texData.get(p.dataId).values,S="string"===d.dtype?n.backend_util.fromUint8ToStringArray(w):w,k="string"===d.dtype?n.backend_util.fromUint8ToStringArray(I):I,R=s(u(d.shape,p.shape,S,k,y),2),T=R[0],N=R[1],E=h.makeTensorInfo(N,y);return h.texData.get(E.dataId).values=T,E}return C=n.env().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=a?new ha(a,d.shape,p.shape,o):new da(t,d.shape,p.shape),h.runWebGLProgram(C,[d,p],y)}}function Ra(e,n){if(void 0===n&&(n=!1),"linear"===e)return"return x;";if("relu"===e)return n?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return n?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return n?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return n?wa:ya;if("leakyrelu"===e)return n?ba:ma;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var Ta=function(e,n,t,a,r,o,i,c,s){void 0===a&&(a=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===i&&(i=null),void 0===c&&(c=!1),void 0===s&&(s=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=Le(this.outputShape.length);var u=a?e[1]:e[2],l=Math.ceil(u/2),d=a?"i * 2, rc.y":"rc.y, i * 2",p=r?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],x="",v="";i&&(x=c?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(i,"\n        }"):s?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(i,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(i,"\n        }"),v="result = activation(result);");var g=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha");var m="rc.x",b="rc.x";e[0]<n[0]?m="imod(rc.x, ".concat(e[0],")"):n[0]<e[0]&&(b="imod(rc.x, ".concat(n[0],")")),this.userCode="\n      ".concat(x,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(l,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(m,";\n        int batchB = ").concat(b,";\n        for (int i = 0; i < ").concat(l,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(f[0],");\n          result += (").concat(h[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(g,"\n\n        ").concat(v,"\n\n        setOutput(result);\n      }\n    ")},Na="return areal * breal - aimag * bimag;",Ea="return areal * bimag + aimag * breal;",Aa=function(e,t,a){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=n.backend_util.assertAndGetBroadcastShape(t,a),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")},_a="return a * b;";function Oa(e){var t,a=e.inputs,r=e.backend,o=a.a,i=a.b,c=n.backend_util.upcastType(o.dtype,i.dtype);if("complex64"===o.dtype){var u=r.texData.get(o.dataId),l=r.texData.get(i.dataId),d=new Aa(Na,o.shape,i.shape),p=new Aa(Ea,o.shape,i.shape),h=[{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:o.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:o.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],f=r.runWebGLProgram(d,h,"float32"),x=r.runWebGLProgram(p,h,"float32"),v=va({inputs:{real:f,imag:x},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(x),v}if(r.shouldExecuteOnCPU([o,i])){u=r.texData.get(o.dataId),l=r.texData.get(i.dataId);var g=s(mt(o.shape,i.shape,u.values,l.values,c),2),m=g[0],b=g[1],C=r.makeTensorInfo(b,c);return r.texData.get(C.dataId).values=m,C}return t=n.env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ha(_a,o.shape,i.shape):new da(_a,o.shape,i.shape),r.runWebGLProgram(t,[o,i],c)}var Fa={kernelName:n.Multiply,backendName:"webgl",kernelFunc:Oa};function Da(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.shape,c=a,l=n.util.sizeFromShape(o.shape),d=n.util.inferFromImplicitShape(i,l),p=n.util.sizeFromShape(d);n.util.assert(l===p,(function(){return"The new shape (".concat(d,") has ").concat(p," elements and the old ")+"shape (".concat(o.shape,") has ").concat(l," elements. The new shape and old ")+"shape must have the same number of elements."}));var h=c.texData.get(o.dataId);return!h.isPacked||ne(o.shape,d)||null!==h.texture&&ne(h.shape,d)?(c.incRef(o.dataId),{dataId:o.dataId,shape:d,dtype:o.dtype}):function(e,n,t){var a=u([Q(e.shape)],s(Z(e.shape)),!1),r={dtype:e.dtype,shape:a,dataId:e.dataId},o=u([Q(n)],s(Z(n)),!1),i=new qt(o,a),c=[a],l=t.runWebGLProgram(i,[r],e.dtype,c,!0);return{dataId:l.dataId,shape:n,dtype:l.dtype}}(o,d,c)}var Pa={kernelName:n.Reshape,backendName:"webgl",kernelFunc:Da},La=function(e,t){this.variableNames=["x"];var a=e.windowSize,r=e.batchSize,o=e.inSize,i=e.outSize;this.outputShape=[r,i];var c=4*Math.floor(a/4),s=a%4,u="sumValue += dot(values, ones);";if(null!=t){var l=1/t;u="sumValue += dot(values * ".concat(n.util.isInt(l)?l.toPrecision(2):l,", ones);")}var d="";o%a>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(a,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(u,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===s,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(u,"\n        } else if (").concat(2===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(u,"\n        } else if (").concat(3===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(u,"\n        }\n        setOutput(sumValue);\n      }\n    ")},Ba=function(e,n){this.variableNames=["x"];var t=e.windowSize,a=e.batchSize,r=e.inSize,o=e.outSize;this.outputShape=[a,o];var i="0.0",c="";"prod"===n?i="1.0":"min"===n?(i="1.0 / 1e-20",c="min"):"max"===n&&(i="-1.0 / 1e-20",c="max");var s="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?s="sumValue":"prod"===n?s="prodValue":"all"===n?s="allValue":"any"===n&&(s="anyValue");var u=4*Math.floor(t/4),l=t%4,d="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(c,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(c,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===n?(i="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(i="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var h="";r%t>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(i,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(t,";\n\n        vec4 minMaxValue = vec4(").concat(i,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===l,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===l,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===l,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(s,");\n      }\n    ")};function Va(e,t,a,r){for(var o=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var a=t.length?t[t.length-1].outSize:e[1],r=n.backend_util.computeOptimalWindowSize(a);t.push({inSize:a,windowSize:r,outSize:Math.ceil(a/r)})}return t}(e.shape),i=e,c=0;c<o.length;c++){var s,u=o[c],l=u.inSize,d=u.windowSize,p=u.outSize,h=void 0;h="mean"===a?0===c?new La({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:p},l):new La({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:p}):new Ba({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:p},a),s=i,i=r.runWebGLProgram(h,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var Wa=function(e,n){this.variableNames=["A"];for(var t=new Array(e.length),a=0;a<t.length;a++)t[a]=e[n[a]];this.outputShape=t,this.rank=t.length;var r=Ae(this.rank),o=function(e){var n=e.length;if(n>6)throw Error("Transpose for rank ".concat(n," is not yet supported"));for(var t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],a=new Array(n),r=0;r<e.length;r++)a[e[r]]=t[r];return a.join()}(n);this.userCode="\n    void main() {\n      ".concat(r," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")};var Ua=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var t=new Array(e.length),a=0;a<t.length;a++)t[a]=e[n[a]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));var r=Ae(this.rank),o=Ht("rc",this.rank),i=new Array(this.rank);for(a=0;a<n.length;a++)i[n[a]]=o[a];var c="vec2(".concat(i.slice(-2).join(),")"),s="++".concat(o[this.rank-1]," < ").concat(t[this.rank-1]),u="getChannel(getA(".concat(i.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(r," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(u,";\n      if(").concat(s,") {\n        result[1] = ").concat(u,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(t[this.rank-2],") {\n        result[2] = ").concat(u,";\n        if(").concat(s,") {\n          result[3] = ").concat(u,";\n        }\n      }\n      setOutput(result);\n    }\n    ")};function Ma(e,t,a){var r=n.env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ua(e.shape,t):new Wa(e.shape,t);return a.runWebGLProgram(r,[e],e.dtype)}function Ga(e){var t=e.inputs,a=e.backend,r=e.attrs;return function(e,t,a,r){var o=t,i=e.shape.length,c=n.util.parseAxisParam(o,e.shape),u=c,l=n.backend_util.getAxesPermutation(u,i),d=null!=l,p=e;d&&(p=Ma(e,l,r),u=n.backend_util.getInnerMostAxes(u.length,i)),n.backend_util.assertAxesAreInnerMostDims("sum",u,i);var h=s(n.backend_util.computeOutAndReduceShapes(p.shape,u),2),f=h[0],x=h[1],v=f;a&&(v=n.backend_util.expandShapeToKeepDim(f,c));var g=n.util.sizeFromShape(x),m=Da({inputs:{x:p},attrs:{shape:[n.util.sizeFromShape(e.shape)/g,g]},backend:r}),b=Va(m,n.sumOutType(e.dtype),"sum",r),C=Da({inputs:{x:b},attrs:{shape:v},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(b),d&&r.disposeIntermediateTensorInfo(p),C}(t.x,r.axis,r.keepDims,a)}var za={kernelName:n.Sum,backendName:"webgl",kernelFunc:Ga};function Xa(e){for(var n,t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.perm,c=a,s=o.shape.length,u=new Array(s),l=0;l<u.length;l++)u[l]=o.shape[i[l]];if(c.shouldExecuteOnCPU([o])){var d=c.texData.get(o.dataId).values,p=zt(d,o.shape,o.dtype,i,u);n=c.makeTensorInfo(u,o.dtype),c.texData.get(n.dataId).values=p}else n=Ma(o,i,c);return n}var Ha={kernelName:n.Transpose,backendName:"webgl",kernelFunc:Xa};function ja(e){var t,a,r=e.a,o=e.b,i=e.transposeA,s=e.transposeB,u=e.backend,l=e.bias,d=void 0===l?null:l,p=e.preluActivationWeights,h=void 0===p?null:p,f=e.leakyreluAlpha,x=void 0===f?0:f,v=e.activation,g=void 0===v?null:v,m=r.shape.length,b=o.shape.length,C=i?r.shape[m-2]:r.shape[m-1],y=s?o.shape[b-1]:o.shape[b-2],w=i?r.shape[m-1]:r.shape[m-2],I=s?o.shape[b-2]:o.shape[b-1],S=r.shape.slice(0,-2),k=o.shape.slice(0,-2),R=n.util.sizeFromShape(S),T=n.util.sizeFromShape(k),N=n.broadcast_util.assertAndGetBroadcastShape(r.shape.slice(0,-2),o.shape.slice(0,-2)).concat([w,I]);n.util.assert(C===y,(function(){return"Error in matMul: inner shapes (".concat(C,") and (")+"".concat(y,") of Tensors with shapes ").concat(r.shape," and ")+"".concat(o.shape," and transposeA=").concat(i)+" and transposeB=".concat(s," must match.")}));var E,A=i?[R,C,w]:[R,w,C],_=s?[T,I,y]:[T,y,I],O=Da({inputs:{x:r},backend:u,attrs:{shape:A}}),F=Da({inputs:{x:o},backend:u,attrs:{shape:_}}),D=[O,F],P=Math.max(R,T),L=i?O.shape[1]:O.shape[2],B=null!=d,V=null!=h,W="leakyrelu"===g,U=null!=g?Ra(g,!0):null;if((1===w||1===I)&&L>1e3&&!1===(B||V||W||null!=U)){var M=O,G=F;i&&(M=Xa({inputs:{x:O},backend:u,attrs:{perm:[0,2,1]}}),D.push(M)),s&&(G=Xa({inputs:{x:F},backend:u,attrs:{perm:[0,2,1]}}),D.push(G));var z=1===I,X=M;1!==I&&(X=Da({inputs:{x:M},backend:u,attrs:{shape:[P,L,1]}}),D.push(X));var H=1===I?2:1,j=G;z&&(j=Da({inputs:{x:G},backend:u,attrs:{shape:[P,1,L]}}),D.push(j));var K=Oa({inputs:{a:X,b:j},backend:u});E=Ga({inputs:{x:K},backend:u,attrs:{axis:H,keepDims:!0}}),D.push(K)}else{var q=n.upcastType(r.dtype,o.dtype),Y=new Ta(A,_,[P,w,I],i,s,B,U,V,W),Q=[O,F];if(null!=d&&Q.push(d),V&&Q.push(h),W){var Z=u.makeTensorInfo([],"float32",n.util.createScalarValue(x,"float32"));Q.push(Z),D.push(Z)}E=u.runWebGLProgram(Y,Q,q)}var J=Da({inputs:{x:E},backend:u,attrs:{shape:N}});D.push(E);try{for(var $=c(D),ee=$.next();!ee.done;ee=$.next()){var ne=ee.value;u.disposeIntermediateTensorInfo(ne)}}catch(e){t={error:e}}finally{try{ee&&!ee.done&&(a=$.return)&&a.call($)}finally{if(t)throw t.error}}return J}var Ka={kernelName:n._FusedMatMul,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.a,o=n.b,i=n.bias,c=n.preluActivationWeights,s=a.transposeA,u=a.transposeB,l=a.activation;return ja({a:r,b:o,transposeA:s,transposeB:u,backend:t,bias:i,preluActivationWeights:c,leakyreluAlpha:a.leakyreluAlpha,activation:l})}},qa="return abs(x);";var Ya={kernelName:n.Abs,backendName:"webgl",kernelFunc:function(e){var t,a=e.inputs,r=e.backend,o=a.x;if(r.shouldExecuteOnCPU([o])&&"complex64"!==o.dtype){var i=r.texData.get(o.dataId),c=Et(i.values);return r.makeTensorInfo(o.shape,o.dtype,c)}return t=n.env().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new aa(o.shape,qa):new $t(o.shape,qa),r.runWebGLProgram(t,[o],o.dtype)}},Qa=Sa({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),Za={kernelName:n.Acos,backendName:"webgl",kernelFunc:Qa},Ja=Sa({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),$a={kernelName:n.Acosh,backendName:"webgl",kernelFunc:Ja},er="return a + b;",nr=ka({opSnippet:er,packedOpSnippet:er,supportsComplex:!0,cpuKernelImpl:Qn}),tr={kernelName:n.Add,backendName:"webgl",kernelFunc:nr},ar=function(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((function(e,n){return"T".concat(n)}));var t=[];this.variableNames.forEach((function(e){t.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(t.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},rr=function(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((function(e,n){return"T".concat(n)}));var t=[];this.variableNames.forEach((function(e){t.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(t.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")};var or={kernelName:n.AddN,backendName:"webgl",kernelFunc:function e(t){var a=t.inputs,r=t.backend,o=a;if(1===o.length)return fa({inputs:{x:o[0]},backend:r});if(o.length>n.env().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(o.length/2),c=e({inputs:o.slice(0,i),backend:r}),s=e({inputs:o.slice(i),backend:r});return e({inputs:[c,s],backend:r})}var u=o.map((function(e){return e.dtype})).reduce((function(e,t){return n.upcastType(e,t)})),l=o.map((function(e){return e.shape})),d=n.env().getBool("WEBGL_PACK")?new rr(o[0].shape,l):new ar(o[0].shape,l);return r.runWebGLProgram(d,o,u)}};var ir={kernelName:n.All,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.axis,c=r.keepDims,u=o.shape.length,l=n.util.parseAxisParam(i,o.shape),d=l,p=n.backend_util.getAxesPermutation(d,u),h=o;null!=p&&(h=Xa({inputs:{x:o},backend:a,attrs:{perm:p}}),d=n.backend_util.getInnerMostAxes(d.length,u)),n.backend_util.assertAxesAreInnerMostDims("all",d,u);var f,x=s(n.backend_util.computeOutAndReduceShapes(h.shape,d),2),v=x[0],g=x[1],m=Da({inputs:{x:h},backend:a,attrs:{shape:[-1,n.util.sizeFromShape(g)]}}),b=Va(m,m.dtype,"all",a);return f=Da(c?{inputs:{x:b},backend:a,attrs:{shape:n.backend_util.expandShapeToKeepDim(v,l)}}:{inputs:{x:b},backend:a,attrs:{shape:v}}),a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(b),null!=p&&a.disposeIntermediateTensorInfo(h),f}};var cr={kernelName:n.Any,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.axis,c=r.keepDims,u=o.shape.length,l=n.util.parseAxisParam(i,o.shape),d=l,p=n.backend_util.getAxesPermutation(d,u),h=o;null!=p&&(h=Xa({inputs:{x:o},backend:a,attrs:{perm:p}}),d=n.backend_util.getInnerMostAxes(d.length,u)),n.backend_util.assertAxesAreInnerMostDims("any",d,u);var f,x=s(n.backend_util.computeOutAndReduceShapes(h.shape,d),2),v=x[0],g=x[1],m=Da({inputs:{x:h},backend:a,attrs:{shape:[-1,n.util.sizeFromShape(g)]}}),b=Va(m,m.dtype,"any",a);return f=Da(c?{inputs:{x:b},backend:a,attrs:{shape:n.backend_util.expandShapeToKeepDim(v,l)}}:{inputs:{x:b},backend:a,attrs:{shape:v}}),a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(b),null!=p&&a.disposeIntermediateTensorInfo(h),f}},sr=function(e,n,t){this.variableNames=["A"];var a=e.windowSize,r=e.batchSize,o=e.outSize;t||this.variableNames.push("bestIndicesA"),this.outputShape=[r,o];var i="max"===n?">":"<",c=t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(c,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(i," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")},ur=function(e,t,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,n.util.assert(e.length>2,(function(){return"Packed arg".concat(a.charAt(0).toUpperCase()+a.slice(1)," supports only inputs with rank above 2.")}));var o=e[e.length-1],i=Math.ceil(o/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var c,s,u=this.outputShape,l=u.length,d=Ae(l),p=jt("coords",l);if(1===i){var h=Ae(s=l+1);c="\n        ".concat(h," sourceLocR = ").concat(h,"(").concat(p.join(),", 0);\n        ++").concat(p[l-1],";\n        ").concat(h," sourceLocG = ").concat(h,"(").concat(p.join(),", 0);\n        ++").concat(p[l-2],";\n        ").concat(h," sourceLocA = ").concat(h,"(").concat(p.join(),", 0);\n        --").concat(p[l-1],";\n        ").concat(h," sourceLocB = ").concat(h,"(").concat(p.join(),", 0);\n        --").concat(p[l-2],";")}else s=l,c="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(p[l-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(p[l-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(p[l-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(p[l-2],";");var f=["x","y","z","w","u","v"].slice(0,s),x="."+f[s-1],v=f.map((function(e){return"int "+e})),g=jt("sourceLocR",s-1).concat("inIdx.r"),m=jt("sourceLocG",s-1).concat("inIdx.g"),b=jt("sourceLocB",s-1).concat("inIdx.b"),C=jt("sourceLocA",s-1).concat("inIdx.a"),y="max"===a?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(C.join(),")));"),I="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(m.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(C.join(),") : 0.)"),S=r?"":"\n      float getBestIndicesAChannel(".concat(v.join(),") {\n        return getChannel(getBestIndicesA(").concat(f.join(),"),\n                                          vec2(").concat(f.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(v.join(),") {\n        return getChannel(getA(").concat(f.join(),"),\n                               vec2(").concat(f.slice(-2).join(),"));\n      }\n      ").concat(S,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(p[l-1]," < ").concat(u[l-1]-1,";\n        bool hasNextRow = ").concat(p[l-2]," < ").concat(u[l-2]-1,";\n        ").concat(c,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(x,", sourceLocG").concat(x,",\n          sourceLocB").concat(x,", sourceLocA").concat(x,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(I,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(I,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(y,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")};function lr(e,t,a,r){void 0===r&&(r=null);var o=t.shape[0],i=t.shape[1];null!=r&&(o=r.shape[0],i=r.shape[1]);var c=n.backend_util.computeOptimalWindowSize(i),s={windowSize:c,inSize:i,batchSize:o,outSize:Math.ceil(i/c)},u=new sr(s,a,null==r),l=[t];null!=r&&l.push(r);var d=e.runWebGLProgram(u,l,"int32");if(1===d.shape[1])return d;var p=lr(e,t,a,d);return e.disposeIntermediateTensorInfo(d),p}function dr(e,t,a,r){void 0===r&&(r=null);var o=null!=r?r.shape:t.shape,i=o[o.length-1],c=n.backend_util.computeOptimalWindowSize(i),s=new ur(o,c,a,null==r),u=null==r?[t]:[t,r],l=e.runWebGLProgram(s,u,"int32");if(l.shape.length===t.shape.length){var d=dr(e,t,a,l);return e.disposeIntermediateTensorInfo(l),d}return l}function pr(e,t,a,r){var o=[a];if(n.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!n.env().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],c=e.texData.get(t.dataId),u=t;null!==c&&c.isPacked&&(u=e.unpackTensor(t),i.push(u));var l=s(n.backend_util.computeOutAndReduceShapes(u.shape,o),2),d=l[0],p=l[1],h=n.util.sizeFromShape(p),f=Da({inputs:{x:u},backend:e,attrs:{shape:[-1,h]}});i.push(f);var x=lr(e,f,r);i.push(x);var v=Da({inputs:{x:x},backend:e,attrs:{shape:d}});return i.forEach((function(n){return e.disposeIntermediateTensorInfo(n)})),v}return dr(e,t,r)}var hr={kernelName:n.ArgMax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.axis,c=n.util.parseAxisParam(i,o.shape),s=n.backend_util.getAxesPermutation(c,o.shape.length),u=o,l=[];null!=s&&(u=Xa({inputs:{x:o},backend:a,attrs:{perm:s}}),l.push(u),c=n.backend_util.getInnerMostAxes(c.length,u.shape.length)),n.backend_util.assertAxesAreInnerMostDims("argMax",[c[0]],u.shape.length);var d=pr(a,u,c[0],"max");return l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),d}};var fr={kernelName:n.ArgMin,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.axis,c=n.util.parseAxisParam(i,o.shape),s=n.backend_util.getAxesPermutation(c,o.shape.length),u=o,l=[];null!=s&&(u=Xa({inputs:{x:o},backend:a,attrs:{perm:s}}),l.push(u),c=n.backend_util.getInnerMostAxes(c.length,u.shape.length)),n.backend_util.assertAxesAreInnerMostDims("argMin",[c[0]],u.shape.length);var d=pr(a,u,c[0],"min");return l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),d}},xr=Sa({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),vr={kernelName:n.Asin,backendName:"webgl",kernelFunc:xr},gr=Sa({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),mr={kernelName:n.Asinh,backendName:"webgl",kernelFunc:gr},br=Sa({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),Cr={kernelName:n.Atan,backendName:"webgl",kernelFunc:br},yr=ka({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),wr={kernelName:n.Atan2,backendName:"webgl",kernelFunc:yr},Ir=Sa({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),Sr={kernelName:n.Atanh,backendName:"webgl",kernelFunc:Ir},kr=function(e,n,t,a,r){if(void 0===a&&(a=!1),void 0===r&&(r=!1),this.variableNames=["x"],"avg"===n&&t)throw new Error("Cannot compute positions for average pool.");var o=e.filterWidth,i=e.strideHeight,c=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;var f="avg"===n,x="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),v="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="0.0";if(f||(g="-1.0 / 1e-20"),t)this.userCode="\n        const ivec2 strides = ivec2(".concat(i,", ").concat(c,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(s,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(u,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(">="," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?r?x:v:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ");else{var m="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(m="avgValue / max(count, 1.0)");var b=4*Math.floor(o/4),C=o%4,y="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n      const float initializationValue = ").concat(g,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(g,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(l,";\n            wR += ").concat(s,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(b,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(u,", d),\n              getValue(batch, xR, xC + 2 * ").concat(u,", d),\n              getValue(batch, xR, xC + 3 * ").concat(u,", d)\n            );\n\n            ").concat(y,"\n          }\n\n          int xC = xCCorner + ").concat(b,";\n          if (").concat(1===C,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(y,"\n          } else if (").concat(2===C,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(u,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(y,"\n          } else if (").concat(3===C,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(u,", d),\n              getValue(batch, xR, xC + 2 * ").concat(u,", d),\n              initializationValue\n            );\n\n            ").concat(y,"\n          }\n        }\n        setOutput(").concat(m,");\n      }\n    ")}},Rr=function(e,n,t,a,r){if(void 0===a&&(a=!1),void 0===r&&(r=!1),this.variableNames=["x"],"avg"===n&&t)throw new Error("Cannot compute positions for average pool.");var o=e.filterWidth,i=e.strideDepth,c=e.strideHeight,s=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,d=e.dilationWidth,p=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,x=e.padInfo.front,v=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;var m="avg"===n,b="0.0";if(m||(b="-1.0 / 1e-20"),t)this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(i,", ").concat(c,", ").concat(s,");\n        const ivec3 pads = ivec3(").concat(x,", ").concat(v,", ").concat(g,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(u,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(l,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(">="," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?r?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(h," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ");else{var C="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(C="avgValue / max(count, 1.0)");var y=4*Math.floor(o/4),w=o%4,I="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(i,", ").concat(c,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(x,", ").concat(v,", ").concat(g,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(u,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(y,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(I,"\n            }\n\n            int xC = xCCorner + ").concat(y,";\n            if (").concat(1===w,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(I,"\n            } else if (").concat(2===w,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(I,"\n            } else if (").concat(3===w,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(I,"\n            }\n          }\n        }\n        setOutput(").concat(C,");\n      }\n    ")}};var Tr={kernelName:n.AvgPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x;de(o,"avgPool");var i=r.filterSize,c=r.strides,s=r.pad,u=r.dimRoundingMode;n.util.assert(n.backend_util.eitherStridesOrDilationsAreOne(c,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(c," and dilations '").concat(1,"'")}));var l=n.backend_util.computePool2DInfo(o.shape,i,c,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&n.util.arraysEqual(l.inShape,l.outShape))return fa({inputs:{x:o},backend:a});var d=new kr(l,"avg",!1);return a.runWebGLProgram(d,[o],"float32")}};var Nr={kernelName:n.AvgPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.filterSize,c=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat,d=n.backend_util.computePool3DInfo(o.shape,i,c,[1,1,1],s,u,l),p=new Rr(d,"avg",!1);return a.runWebGLProgram(p,[o],"float32")}},Er=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var n=e.filterHeight,t=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o=e.dilationHeight,i=e.dilationWidth,c=e.effectiveFilterHeight,s=e.effectiveFilterWidth,u=c-1-e.padInfo.top,l=s-1-e.padInfo.left,d=1/(n*t);this.userCode="\n      const ivec2 pads = ivec2(".concat(u,", ").concat(l,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(c,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(s,";\n            wC+= ").concat(i,") {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Ar=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var n=e.filterDepth,t=e.filterHeight,a=e.filterWidth,r=e.strideDepth,o=e.strideHeight,i=e.strideWidth,c=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=l-1-e.padInfo.front,f=d-1-e.padInfo.top,x=p-1-e.padInfo.left,v=1/(n*t*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(f,", ").concat(x,");\n      const float avgMultiplier = float(").concat(v,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(l,";\n            wD += ").concat(c,") {\n          float dyD = float(dyDCorner + wD) / ").concat(r,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(s,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(u,") {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var _r={kernelName:n.AvgPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.dy,i=t.input,c=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,d=n.backend_util.computePool3DInfo(i.shape,c,s,[1,1,1],u,l),p=new Ar(d);return a.runWebGLProgram(p,[o],i.dtype)}};var Or={kernelName:n.AvgPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.dy,i=t.input,c=i;de([o,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,d=n.backend_util.computePool2DInfo(c.shape,s,u,1,l),p=new Er(d);return a.runWebGLProgram(p,[o],c.dtype)}};var Fr={kernelName:n.BatchMatMul,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs;return ja({a:n.a,b:n.b,transposeA:a.transposeA,transposeB:a.transposeB,backend:t})}},Dr=function(e,t,a,r,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],n.backend_util.assertAndGetBroadcastShape(e,t),n.backend_util.assertAndGetBroadcastShape(e,a);var c="0.0";null!=r&&(n.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),c="getOffsetAtOutCoords()");var s="1.0";null!=o&&(n.backend_util.assertAndGetBroadcastShape(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(c,";\n        float scale = ").concat(s,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")},Pr=function(e,t,a,r,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],n.backend_util.assertAndGetBroadcastShape(e,t),n.backend_util.assertAndGetBroadcastShape(e,a);var c="vec4(0.0)";null!=r&&(n.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),c="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=o&&(n.backend_util.assertAndGetBroadcastShape(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(c,";\n        vec4 scale = ").concat(s,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")},Lr={kernelName:n.FusedBatchNorm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=t.mean,c=t.variance,s=t.offset,u=t.scale;n.util.assert(i.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),n.util.assert(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),n.util.assert(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var l=r.varianceEpsilon;null==l&&(l=.001);var d=[o,i,c],p=null;null!=s&&(p=s.shape,d.push(s));var h=null;null!=u&&(h=u.shape,d.push(u));var f=n.env().getBool("WEBGL_PACK_NORMALIZATION")?new Pr(o.shape,i.shape,c.shape,p,h,l):new Dr(o.shape,i.shape,c.shape,p,h,l);return a.runWebGLProgram(f,d,d[0].dtype)}},Br=function(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n=Ae(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var t,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return Vr.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),r=e.map((function(e,n){return"sourceLoc.".concat(Vr[n]," = start[").concat(n,"] + coords.").concat(Vr[n],";")}));t="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(r.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(t,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")},Vr=["x","y","z","w","u","v"];var Wr=function(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=Ae(this.rank),t=jt("coords",this.rank),a=jt("sourceLoc",this.rank),r=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(r,")"),i="\n      result.x = ".concat(o,";\n      if (++").concat(t[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),c=1===this.rank?"":"\n      --".concat(t[this.rank-1],";\n      if (++").concat(t[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(t[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),s=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(e.map((function(e,n){return"start[".concat(n,"]")})).join(),");"):e.map((function(e,n){return"".concat(a[n]," = ").concat(t[n]," + start[").concat(n,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(s,"\n        vec4 result = vec4(0.);\n        ").concat(i,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")};function Ur(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.begin,c=r.size,u=s(n.slice_util.parseSliceParams(o,i,c),2),l=u[0],d=u[1];if(n.slice_util.assertParamsValid(o,l,d),0===n.util.sizeFromShape(d))return a.makeTensorInfo(d,o.dtype,[]);if(a.shouldExecuteOnCPU([o])||"string"===o.dtype){var p=a.texData.get(o.dataId),h=At(p.values,l,d,o.shape,o.dtype);return a.makeTensorInfo(d,o.dtype,h)}var f=a.texData.get(o.dataId).isPacked,x=n.slice_util.isSliceContinous(o.shape,l,d);if(f||!x){var v=n.env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wr(d):new Br(d),g=[l];return a.runWebGLProgram(v,[o],o.dtype,g)}return a.uploadToGPU(o.dataId),function(e,t,a,r){var o=r.texData.get(e.dataId),i=r.makeTensorInfo(a,e.dtype),c=r.texData.get(i.dataId);Object.assign(c,o),c.refCount=1,c.shape=a,c.dtype=e.dtype;var s=n.slice_util.computeFlatOffset(t,n.util.computeStrides(e.shape));o.slice&&(s+=o.slice.flatOffset),c.slice={flatOffset:s,origDataId:o.slice&&o.slice.origDataId||e.dataId};var u=r.dataRefCount.get(c.slice.origDataId)||1;return r.dataRefCount.set(c.slice.origDataId,u+1),i}(o,l,d,a)}var Mr={kernelName:n.Slice,backendName:"webgl",kernelFunc:Ur},Gr={kernelName:n.BatchToSpaceND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.blockShape,c=r.crops;n.util.assert(o.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,n){return e*n})),u=n.backend_util.getReshaped(o.shape,i,s),l=n.backend_util.getPermuted(u.length,i.length),d=n.backend_util.getReshapedPermuted(o.shape,i,s),p=n.backend_util.getSliceBeginCoords(c,i.length),h=n.backend_util.getSliceSize(d,c,i.length),f=[],x=Da({inputs:{x:o},backend:a,attrs:{shape:u}}),v=Xa({inputs:{x:x},backend:a,attrs:{perm:l}}),g=Da({inputs:{x:v},backend:a,attrs:{shape:d}}),m=Ur({inputs:{x:g},backend:a,attrs:{begin:p,size:h}});return f.push(x),f.push(v),f.push(g),f.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m}};var zr={kernelName:n.Bincount,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.x,o=n.weights,i=a.size,c=t.readSync(r.dataId),s=t.readSync(o.dataId),u=Zn(c,s,o.dtype,o.shape,i);return t.makeTensorInfo([i],o.dtype,u)}};var Xr={kernelName:n.BitwiseAnd,backendName:"webgl",kernelFunc:function(e){var t,a=e.inputs,r=e.backend,o=a.a,i=a.b,c=n.env().getBool("WEBGL_PACK_BINARY_OPERATIONS"),u=n.env().getNumber("WEBGL_VERSION");if(r.shouldExecuteOnCPU([o,i])||1===u){var l=r.texData.get(o.dataId).values,d=r.texData.get(i.dataId).values,p=s($n(o.shape,i.shape,l,d,o.dtype),2),h=p[0],f=p[1],x=r.makeTensorInfo(f,o.dtype);return r.texData.get(x.dataId).values=h,x}return t=c?new ha("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",o.shape,i.shape,!1):new da("\n  return float(int(a.r) & int(b.r));\n",o.shape,i.shape),r.runWebGLProgram(t,[o,i],o.dtype)}};var Hr={kernelName:n.BroadcastArgs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=t.s0,o=t.s1,i=a.readSync(r.dataId),c=a.readSync(o.dataId),s=n.backend_util.assertAndGetBroadcastShape(Array.from(i),Array.from(c));return a.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},jr=ka({opSnippet:"return float(a != b);",cpuKernelImpl:Ct,dtype:"bool"}),Kr={kernelName:n.NotEqual,backendName:"webgl",kernelFunc:jr};function qr(e){var n=e.inputs,t=e.backend,a=n.input;return fa({inputs:{x:t.texData.get(a.dataId).complexTensorInfos.real},backend:t})}var Yr={kernelName:n.Real,backendName:"webgl",kernelFunc:qr};var Qr={kernelName:n.Cast,backendName:"webgl",kernelFunc:function e(t){var r=t.inputs,o=t.backend,i=t.attrs,c=r.x,u=i.dtype;if("complex64"===u){if("complex64"===c.dtype)return fa({inputs:{x:c},backend:o});var l=a.zeros(c.shape),d=e({inputs:{x:c},backend:o,attrs:{dtype:"float32"}}),p=va({inputs:{real:d,imag:l},backend:o});return l.dispose(),o.disposeIntermediateTensorInfo(d),p}if("complex64"===c.dtype){var h=qr({inputs:{input:c},backend:o}),p=e({inputs:{x:h},backend:o,attrs:{dtype:u}});return o.disposeIntermediateTensorInfo(h),p}if(!n.util.hasEncodingLoss(c.dtype,u))return{dataId:(p=fa({inputs:{x:c},backend:o})).dataId,shape:p.shape,dtype:u};if(o.shouldExecuteOnCPU([c])){var f=o.texData.get(c.dataId).values,x=s(et(f,c.shape,c.dtype,u),3),v=x[0],g=x[1],m=x[2];return o.makeTensorInfo(v,g,m)}if("int32"===u)return function(e,n){var t=new $t(e.shape,"return float(int(x));"),a=n.runWebGLProgram(t,[e],"int32");return{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}(c,o);if("bool"===u){var b=o.makeTensorInfo([],"bool",n.util.getTypedArrayFromDType("bool",1));p=jr({inputs:{a:c,b:b},backend:o});return o.disposeIntermediateTensorInfo(b),p}throw new Error("Error in Cast: failed to cast ".concat(c.dtype," to ").concat(u))}},Zr="return ceil(x);",Jr=Sa({opSnippet:Zr,packedOpSnippet:Zr,cpuKernelImpl:nt}),$r={kernelName:n.Ceil,backendName:"webgl",kernelFunc:Jr},eo=function(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "},no=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "};var to={kernelName:n.ClipByValue,backendName:"webgl",kernelFunc:function(e){var t,a=e.inputs,r=e.backend,o=e.attrs,i=a.x,c=o.clipValueMin,s=o.clipValueMax;t=n.env().getBool("WEBGL_PACK_CLIP")?new no(i.shape):new eo(i.shape);var u=[[c],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},ao=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "};function ro(e,n){return{dataId:n.dataId,dtype:n.dtype,shape:e.shape}}var oo={kernelName:n.ComplexAbs,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=n.x,r=t.texData.get(a.dataId),o=new ao(a.shape),i=[ro(a,r.complexTensorInfos.real),ro(a,r.complexTensorInfos.imag)];return t.runWebGLProgram(o,i,i[0].dtype)}},io=function(e){this.outputShape=[],this.outputShape=n.backend_util.computeOutShape(e,1),this.variableNames=e.map((function(e,n){return"T".concat(n)}));var t=new Array(e.length-1);t[0]=e[0][1];for(var a=1;a<t.length;a++)t[a]=t[a-1]+e[a][1];var r=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(a=1;a<t.length;a++){var o=t[a-1];r.push("else if (yC < ".concat(t[a],") ")+"setOutput(getT".concat(a,"(yR, yC-").concat(o,"));"))}var i=t.length,c=t[t.length-1];r.push("else setOutput(getT".concat(i,"(yR, yC-").concat(c,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(r.join("\n        "),"\n      }\n    ")},co=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=n.backend_util.computeOutShape(e,t);var a=this.outputShape,r=a.length,o=Ae(r),i=jt("coords",r),c=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,n){return"T".concat(n)}));var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var l=c[t],d=c.slice(-2),p=c.join(),h="if (".concat(l," < ").concat(s[0],") {\n        return getChannel(\n            getT0(").concat(p,"), vec2(").concat(d.join(),"));\n        }");for(u=1;u<s.length;u++){var f=s[u-1];h+="\n        if (".concat(l," < ").concat(s[u],"  && ").concat(l," >= ").concat(s[u-1],") {\n          return getChannel(\n            getT").concat(u,"(").concat(so(c,l,f),"),\n            vec2(").concat(so(d,l,f),"));\n        }")}var x=s.length,v=s[s.length-1];h+="\n        return getChannel(\n          getT".concat(x,"(").concat(so(c,l,v),"),\n          vec2(").concat(so(d,l,v),"));"),this.userCode="\n      float getValue(".concat(c.map((function(e){return"int "+e})),") {\n        ").concat(h,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," + 1;\n        if (").concat(i[r-1]," < ").concat(a[r-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-2]," = ").concat(i[r-2]," + 1;\n        if (").concat(i[r-2]," < ").concat(a[r-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," - 1;\n        if (").concat(i[r-2]," < ").concat(a[r-2]," &&\n            ").concat(i[r-1]," < ").concat(a[r-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")};function so(e,n,t){var a=e.indexOf(n);return e.map((function(e,n){return n===a?"".concat(e," - ").concat(t):e})).join()}function uo(e){var n=e.inputs,t=e.backend,a=n.input;return fa({inputs:{x:t.texData.get(a.dataId).complexTensorInfos.imag},backend:t})}var lo={kernelName:n.Imag,backendName:"webgl",kernelFunc:uo};function po(e,t,a){var r,o,i=e[0].dtype;if("complex64"===i){var s=e.map((function(e){return qr({inputs:{input:e},backend:a})})),u=e.map((function(e){return uo({inputs:{input:e},backend:a})})),l=po(s,t,a),d=po(u,t,a),p=va({inputs:{real:l,imag:d},backend:a});return s.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),u.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),a.disposeIntermediateTensorInfo(l),a.disposeIntermediateTensorInfo(d),p}var h=a.shouldExecuteOnCPU(e);if("string"===i&&(h=!0),h){var f=e.map((function(e){var r=n.util.sizeFromShape(e.shape.slice(t));return Da({inputs:{x:e},backend:a,attrs:{shape:[-1,r]}})})),x=f.map((function(e){return{vals:a.readSync(e.dataId),shape:e.shape}})),v=n.backend_util.computeOutShape(f.map((function(e){return e.shape})),1),g=1===f[0].shape[0],m=tt(x,v,i,g),b=n.backend_util.computeOutShape(e.map((function(e){return e.shape})),t),C=a.makeTensorInfo(b,i,m);return f.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),C}var y=e.filter((function(e){return n.util.sizeFromShape(e.shape)>0})),w=n.env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&y[0].shape.length>1;if(1===y.length){var I=w?new $t(e[0].shape,ta):new aa(e[0].shape,ta);return a.runWebGLProgram(I,e,i)}var S=n.env().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(y.length>S){for(var k=[],R=0;R<y.length;R+=S){var T=y.slice(R,R+S);k.push(po(T,t,a))}var N=po(k,t,a);try{for(var E=c(k),A=E.next();!A.done;A=E.next()){R=A.value;a.disposeIntermediateTensorInfo(R)}}catch(e){r={error:e}}finally{try{A&&!A.done&&(o=E.return)&&o.call(E)}finally{if(r)throw r.error}}return N}if(w){var _=new co(y.map((function(e){return e.shape})),t);return a.runWebGLProgram(_,y,i)}var O=function(e,t,a){var r=n.backend_util.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return Da({inputs:{x:e},attrs:{shape:[-1,n.util.sizeFromShape(e.shape.slice(t))]},backend:a})})),outShape:r}}(y,t,a),F=O.tensors2D,D=O.outShape,P=new io(F.map((function(e){return e.shape}))),L=a.runWebGLProgram(P,F,i);F.forEach((function(e){return a.disposeIntermediateTensorInfo(e)}));var B=Da({inputs:{x:L},attrs:{shape:D},backend:a});return a.disposeIntermediateTensorInfo(L),B}function ho(e){var t=e.inputs,a=e.backend,r=e.attrs.axis,o=n.util.parseAxisParam(r,t[0].shape)[0],i=t.map((function(e){return e.shape}));n.backend_util.assertParamsConsistent(i,o);var c=n.backend_util.computeOutShape(t.map((function(e){return e.shape})),o);if(0===n.util.sizeFromShape(c))return a.makeTensorInfo(c,t[0].dtype,[]);var s=t.filter((function(e){return n.util.sizeFromShape(e.shape)>0}));return 1===s.length?fa({inputs:{x:s[0]},backend:a}):po(s,o,a)}var fo={kernelName:n.Concat,backendName:"webgl",kernelFunc:ho},xo=function(e,n,t,a,r){void 0===n&&(n=!1),void 0===t&&(t=null),void 0===a&&(a=!1),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,i=e.padInfo.left,c=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,x="channelsLast"===e.dataFormat,v=x?1:2,g=x?2:3,m=x?3:1,b="",C="";t&&(b=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(t,"\n        }"):r?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(t,"\n        }"):"\n          float activation(float x) {\n            ".concat(t,"\n          }\n        "),C="result = activation(result);");var y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      const ivec2 strides = ivec2(").concat(c,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(m,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(v,"], coords[").concat(g,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(u,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(x,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(x,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(x,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(x,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(y,"\n        ").concat(C,"\n        setOutput(result);\n      }\n    ")},vo=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var n=e.padInfo.front,t=e.padInfo.top,a=e.padInfo.left,r=e.strideDepth,o=e.strideHeight,i=e.strideWidth,c=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,l=e.filterDepth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(r,", ").concat(o,", ").concat(i,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(t,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(l,"; wF++) {\n          int xF = xFCorner + wF * ").concat(c,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(s,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(u,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},go=function(e,t,a,r,o){void 0===t&&(t=!1),void 0===a&&(a=null),void 0===r&&(r=!1),void 0===o&&(o=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Le(this.outputShape.length);for(var i=e.padInfo.left,c=e.strideWidth,s=e.dilationWidth,u=e.filterHeight,l=e.filterWidth,d=l,p="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;",h=0;h<l;h++)p+="\n           vec4 xTexelC".concat(2*h,";\n           int xTexelC").concat(2*h,"Ready;\n           vec4 xTexelC").concat(2*h+1,";\n           int xTexelC").concat(2*h+1,"Ready;\n           vec4 xC").concat(h,";");for(p+="\n     for (int r = 0; r < ".concat(u,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       "),h=0;h<l;h++)p+="\n           xTexelC".concat(2*h," = vec4(0.0);\n           xTexelC").concat(2*h,"Ready = 0;\n           xTexelC").concat(2*h+1," = vec4(0.0);\n           xTexelC").concat(2*h+1,"Ready = 0;\n           xC").concat(h," = vec4(0.0);");p+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(var f=0;f<(d+1)/2;f++){var x=2*f;if(p+="\n           xC = xCCorner + ".concat(x*s,";\n           "),1===c){if(x<l&&(i%2==1?(p+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(x,"Ready == 0) {\n                   xTexelC").concat(x," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(x,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(x,"Ready = 1;\n                 }\n               "),p+=1===s&&x>0?"\n                 xC".concat(x," = vec4(xTexelC").concat(x-2,".zw, xTexelC").concat(x,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(x," = vec4(previous.zw, xTexelC").concat(x,".xy);\n                   } else {\n                     xC").concat(x," = vec4(0.0, 0.0, xTexelC").concat(x,".xy);\n                   }\n                   ")):p+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(x,"Ready == 0) {\n                   xTexelC").concat(x," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(x,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(x,"Ready = 1;\n                 }\n\n                 xC").concat(x," = xTexelC").concat(x,";\n                 "),x+1<l)){var v=i%2==0?n.util.nearestLargerEven(s):s;s%2==0&&i%2==1||s%2!=0&&i%2!=1?(p+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(v,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(x+1,"Ready == 0) {\n                     xTexelC").concat(x+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(x+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(x+1,"Ready = 1;\n                   }\n                   "),p+=s>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(x+1," = vec4(previous.zw, xTexelC").concat(x+1,".xy);\n                     } else {\n                      xC").concat(x+1," = vec4(0.0, 0.0, xTexelC").concat(x+1,".xy);\n                     }\n                     "):"\n                     xC".concat(x+1," = vec4(xTexelC").concat(x,".zw, xTexelC").concat(x+1,".xy);\n                     ")):p+=1===v?"\n                     xC".concat(x+1," = xTexelC").concat(x,";\n                     "):"\n                     xCOffset = xC + ".concat(v,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(x+1,"Ready == 0) {\n                       xTexelC").concat(x+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(x+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(x+1,"Ready = 1;\n                     }\n\n                     xC").concat(x+1," = xTexelC").concat(x+1,";\n                     ")}}else x<l&&(i%2==1?(p+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(x,"Ready == 0) {\n                   xTexelC").concat(x," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(x,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(x,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(x+1,"Ready == 0) {\n                   xTexelC").concat(x+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(x+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(x+1,"Ready = 1;\n                 }\n\n                 xC").concat(x," = vec4(xTexelC").concat(x,".zw, xTexelC").concat(x+1,".zw);\n               "),x+1<l&&(p+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(x+1," = vec4(xTexelC").concat(x+1,".xy, final.xy);\n                 "))):(p+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(x,"Ready == 0) {\n                   xTexelC").concat(x," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(x,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(x,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(x+1,"Ready == 0) {\n                   xTexelC").concat(x+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(x+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(x+1,"Ready = 1;\n                 }\n\n                 xC").concat(x," = vec4(\n                   xTexelC").concat(x,".xy, xTexelC").concat(x+1,".xy);\n               "),x+1<l&&(p+="\n                   xC".concat(x+1," = vec4(xTexelC").concat(x,".zw, xTexelC").concat(x+1,".zw);\n                 "))));x<l&&(p+="\n             wTexel = getW(r, ".concat(x,", d1, d2);\n             dotProd += xC").concat(x,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(x,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),x+1<l&&(p+="\n               wTexel = getW(r, ".concat(x+1,", d1, d2);\n               dotProd += xC").concat(x+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(x+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}p+="\n     }\n   ",p+="\n     }\n   ",p+="\n     }\n   ";var g="",m="";a&&(g=r?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(a,"\n         }"):o?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(a,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(a,"\n         }"),m="result = activation(result);");var b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(g,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(p,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(b,"\n         ").concat(m,"\n         setOutput(result);\n       }\n     ")},mo=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Le(this.outputShape.length);for(var t=n.dataFormat,a=fe(),r="channelsLast"===t,o=r?1:2,i=r?2:3,c=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {"),s="",u=0;u<=1;u++)for(var l=0;l<=1;l++)s+="\n          blockIndex = rc.z + ".concat(l,";\n          pos = rc.y + ").concat(u,";\n\n          ").concat(c,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(i,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(r,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*u+l,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*u+l,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(s,"\n\n        ").concat(a.output," = result;\n      }\n    ")};function bo(e,n){var t=e.length;return t>=3?u(u([],s(e.slice(0,-3)),!1),n?[e[t-3]*e[t-2],e[t-1]]:[e[t-3],e[t-2]*e[t-1]],!1):!n&&1===t&&e[0]>1?[e[0],1]:null}function Co(e){var t,a,r,o=e.x,i=e.filter,s=e.convInfo,u=e.backend,l=e.bias,d=void 0===l?null:l,p=e.preluActivationWeights,h=void 0===p?null:p,f=e.leakyreluAlpha,x=void 0===f?0:f,v=e.activation,g=void 0===v?null:v,m=o.shape,b=u.texData.get(o.dataId),C=s.inChannels,y=m[0]*m[1]*m[2],w=s.outChannels,I="channelsLast"===s.dataFormat,S=[];null!=h&&(null!=(k=bo(h.shape,I))&&(h=Da({inputs:{x:h},backend:u,attrs:{shape:k}}),S.push(h)));null!=d&&(null!=(k=bo(d.shape,I))&&(d=Da({inputs:{x:d},backend:u,attrs:{shape:k}}),S.push(d)));if(!((1===y||1===w)&&C>1e3)&&b.isPacked&&I&&null!=b.texture&&m[2]%2!=0&&n.util.arraysEqual(b.shape.slice(-3),m.slice(-3))){var k=m[0]*m[1]*(m[2]+1),R={dataId:o.dataId,shape:[1,k,s.inChannels],dtype:o.dtype},T=b.shape;b.shape=b.shape.slice(),b.shape[b.shape.length-2]++,n.util.assert(ne(b.shape,R.shape),(function(){return"packed reshape ".concat(b.shape," to ").concat(R.shape," isn't free")}));var N=Da({inputs:{x:i},backend:u,attrs:{shape:[1,s.inChannels,s.outChannels]}});S.push(N);var E=ja({a:R,b:N,backend:u,transposeA:!1,transposeB:false,bias:d,activation:g,preluActivationWeights:h,leakyreluAlpha:x}),A=u.texData.get(E.dataId);n.util.assert(A.isPacked,(function(){return"batchMatMul result is expected to be packed"})),b.shape=T,A.shape=s.outShape,(r=fa({inputs:{x:E},backend:u})).shape=s.outShape,S.push(E)}else{var _=s.outHeight*s.outWidth,O=Da({inputs:{x:o},backend:u,attrs:{shape:I?[s.batchSize,_,s.inChannels]:[s.batchSize,s.inChannels,_]}}),F=(N=Da({inputs:{x:i},backend:u,attrs:{shape:[1,s.inChannels,s.outChannels]}}),ja({a:I?O:N,b:I?N:O,transposeA:!I,transposeB:false,backend:u,bias:d,activation:g,preluActivationWeights:h,leakyreluAlpha:x}));r=Da({inputs:{x:F},backend:u,attrs:{shape:s.outShape}}),S.push(O),S.push(N),S.push(F)}try{for(var D=c(S),P=D.next();!P.done;P=D.next()){var L=P.value;u.disposeIntermediateTensorInfo(L)}}catch(e){t={error:e}}finally{try{P&&!P.done&&(a=D.return)&&a.call(D)}finally{if(t)throw t.error}}return r}function yo(e){var t,a,r,o=e.x,i=e.filter,s=e.convInfo,u=e.backend,l=e.bias,d=void 0===l?null:l,p=e.preluActivationWeights,h=void 0===p?null:p,f=e.leakyreluAlpha,x=void 0===f?0:f,v=e.activation,g=void 0===v?null:v,m=s.filterWidth,b=s.filterHeight,C=s.inChannels,y=s.outWidth,w=s.outHeight,I="channelsLast"===s.dataFormat,S=m*b*C,k=w*y,R=[s.batchSize,S,k],T=[];null!=h&&(null!=(r=bo(h.shape,I))&&(h=Da({inputs:{x:h},backend:u,attrs:{shape:r}}),T.push(h)));null!=d&&(null!=(r=bo(d.shape,I))&&(d=Da({inputs:{x:d},backend:u,attrs:{shape:r}}),T.push(d)));var N=Da({inputs:{x:i},backend:u,attrs:{shape:[1,S,n.util.sizeFromShape(i.shape)/S]}});T.push(N);var E=new mo(R,s),A=[o.shape,[s.padInfo.top,s.padInfo.left],[s.strideHeight,s.strideWidth],[s.dilationHeight,s.dilationWidth],[s.inChannels],[s.filterWidth*s.inChannels],[s.outWidth]],_=u.runWebGLProgram(E,[o],"float32",A),O=Da({inputs:{x:_},backend:u,attrs:{shape:R}});T.push(_),T.push(O);var F=null!=d,D=null!=h,P="leakyrelu"===g,L=g?Ra(g,!0):null,B=new Ta(I?O.shape:N.shape,I?N.shape:O.shape,I?[s.batchSize,k,s.outChannels]:[s.batchSize,s.outChannels,k],!0,!1,F,L,D,P),V=I?[O,N]:[N,O];if(d&&V.push(d),D&&V.push(h),P){var W=u.makeTensorInfo([],"float32",n.util.createScalarValue(x,"float32"));V.push(W),T.push(W)}var U=u.runWebGLProgram(B,V,"float32"),M=Da({inputs:{x:U},backend:u,attrs:{shape:s.outShape}});T.push(U);try{for(var G=c(T),z=G.next();!z.done;z=G.next()){var X=z.value;u.disposeIntermediateTensorInfo(X)}}catch(e){t={error:e}}finally{try{z&&!z.done&&(a=G.return)&&a.call(G)}finally{if(t)throw t.error}}return M}var wo={kernelName:n.Conv2D,backendName:"webgl",kernelFunc:function(e){var t,a=e.inputs,r=e.backend,o=e.attrs,i=a.x,c=a.filter,s=o.strides,u=o.pad,l=o.dataFormat,d=o.dilations,p=o.dimRoundingMode,h=n.backend_util.convertConv2DDataFormat(l),f=n.backend_util.computeConv2DInfo(i.shape,c.shape,s,d,u,p,!1,h);if(1!==f.filterHeight||1!==f.filterWidth||1!==f.dilationHeight||1!==f.dilationWidth||1!==f.strideHeight||1!==f.strideWidth||"SAME"!==f.padInfo.type&&"VALID"!==f.padInfo.type)if(f.strideWidth<=2&&"channelsLast"===h&&n.env().getBool("WEBGL_EXP_CONV")){var x=new go(f),v=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];t=r.runWebGLProgram(x,[i,c],"float32",v)}else if(n.env().getBool("WEBGL_CONV_IM2COL"))t=yo({x:i,filter:c,convInfo:f,backend:r});else{x=new xo(f);t=r.runWebGLProgram(x,[i,c],"float32")}else t=Co({x:i,filter:c,convInfo:f,backend:r});var g=Da({inputs:{x:t},backend:r,attrs:{shape:f.outShape}});return r.disposeIntermediateTensorInfo(t),g}},Io=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideHeight,t=e.strideWidth,a=e.padInfo.top,r=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(t," - ").concat(r,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},So=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterHeight,t=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o="channelsLast"===e.dataFormat,i=n-1-e.padInfo.top,c=t-1-e.padInfo.left,s=o?1:2,u=o?2:3,l=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(l,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(s,"], coords[").concat(u,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(t,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(t," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},ko=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideDepth,t=e.strideHeight,a=e.strideWidth,r=e.padInfo.front,o=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(r,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(t," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(i,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Ro=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterDepth,t=e.filterHeight,a=e.filterWidth,r=e.strideDepth,o=e.strideHeight,i=e.strideWidth,c=n-1-e.padInfo.front,s=t-1-e.padInfo.top,u=a-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(c,", ").concat(s,", ").concat(u,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(r,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(t,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(t," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var To={kernelName:n.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=t.dy,c=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,d=r.filterShape,p=n.backend_util.convertConv2DDataFormat(u),h=n.backend_util.computeConv2DInfo(o.shape,d,c,1,s,l,!1,p),f=new Io(h);return a.runWebGLProgram(f,[o,i],"float32")}},No=function(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Le(this.outputShape.length);var n=e.filterHeight,t=e.filterWidth,a=n-1-e.padInfo.top,r=t-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(r,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(t,"; wC++) {\n            int wCPerm = ").concat(t," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")};var Eo={kernelName:n.Conv2DBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.dy,i=t.filter,c=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,d=r.dimRoundingMode,p=n.backend_util.convertConv2DDataFormat(l),h=n.backend_util.computeConv2DInfo(c,i.shape,s,1,u,d,!1,p);if(n.env().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===p){var f=[[h.strideHeight,h.strideWidth]],x=new No(h);return a.runWebGLProgram(x,[o,i],"float32",f)}return x=new So(h),a.runWebGLProgram(x,[o,i],"float32")}};var Ao={kernelName:n.Conv3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=t.filter,c=r.strides,s=r.pad,u=r.dilations,l=n.backend_util.computeConv3DInfo(o.shape,i.shape,c,u,s),d=new vo(l);return a.runWebGLProgram(d,[o,i],"float32")}};var _o={kernelName:n.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=t.dy,c=r.strides,s=r.pad,u=r.filterShape,l=n.backend_util.computeConv3DInfo(o.shape,u,c,1,s),d=new ko(l);return a.runWebGLProgram(d,[o,i],"float32")}};var Oo,Fo={kernelName:n.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.dy,i=t.filter,c=r.pad,s=r.strides,u=r.inputShape,l=n.backend_util.computeConv3DInfo(u,i.shape,s,1,c),d=new Ro(l);return a.runWebGLProgram(d,[o,i],"float32")}},Do=Sa({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(pa,"\n  return result;\n")}),Po={kernelName:n.Cos,backendName:"webgl",kernelFunc:Do},Lo=Sa({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),Bo={kernelName:n.Cosh,backendName:"webgl",kernelFunc:Lo},Vo=function(e,n,t,a,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=s(e,4),i=o[0],c=o[1],u=o[2],l=o[3],d=s(n,1)[0],p=s(t,2),h=p[0],f=p[1];this.outputShape=[d,h,f,l];var x="bilinear"===a?1:0,v=s(["".concat(c-1,".0"),"".concat(u-1,".0")],2),g=v[0],m=v[1],b=s(h>1?["".concat((c-1)/(h-1)),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],3),C=b[0],y=b[1],w=b[2],I=s(f>1?["".concat((u-1)/(f-1)),"(x2-x1) * width_ratio","x1*".concat(m," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(m)],3),S=I[0],k=I[1],R=I[2];this.userCode="\n      const float height_ratio = float(".concat(C,");\n      const float width_ratio = float(").concat(S,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(i,") {\n          return;\n        }\n\n        float height_scale = ").concat(y,";\n        float width_scale = ").concat(k,";\n\n        float in_y = ").concat(w,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(r,"));\n          return;\n        }\n        float in_x = ").concat(R,";\n        if( in_x < 0.0 || in_x > ").concat(m," ) {\n          setOutput(float(").concat(r,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(x," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")},Wo={kernelName:n.CropAndResize,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.image,o=n.boxes,i=n.boxInd,c=a.cropSize,s=a.method,u=a.extrapolationValue,l=new Vo(r.shape,o.shape,c,s,u);return t.runWebGLProgram(l,[r,o,i],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(Oo||(Oo={}));var Uo=function(e,n,t,a){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var r=this.outputShape.length,o=this.op===Oo.Prod?"1.0":"0.0",i=t?o:"getX(".concat(Mo(r,"coords",this.op),")"),c=this.outputShape[this.outputShape.length-1],s="",u="";t?(s=a?"end != ".concat(c-1):"end != 0",u=a?"end + 1":"end - 1"):(s=a?"end + pow2 < ".concat(c):"end >= pow2",u=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(Ae(r)," coords = getOutputCoords();\n        int end = ").concat(Go(r,"coords",this.op),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(u,";\n          ").concat(Go(r,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(Mo(r,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")};function Mo(e,n,t){if(1===e)return"".concat(n);if(2===e)return"".concat(n,".x, ").concat(n,".y");if(3===e)return"".concat(n,".x, ").concat(n,".y, ").concat(n,".z");if(4===e)return"".concat(n,".x, ").concat(n,".y, ").concat(n,".z, ").concat(n,".w");throw new Error("Cumulative ".concat(t," for rank ").concat(e," is not yet supported"))}function Go(e,n,t){if(1===e)return"".concat(n);if(2===e)return"".concat(n,".y");if(3===e)return"".concat(n,".z");if(4===e)return"".concat(n,".w");throw new Error("Cumulative ".concat(t," for rank ").concat(e," is not yet supported"))}function zo(e,t,a,r,o,i){var c=t.shape.length,s=n.backend_util.getAxesPermutation([r],c),u=t;null!=s&&(u=Xa({inputs:{x:t},backend:a,attrs:{perm:s}}));var l=n.backend_util.getInnerMostAxes(1,c)[0];if(l!==c-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var d=u.shape[l],p=fa({inputs:{x:u},backend:a}),h=0;h<=Math.ceil(Math.log2(d))-1;h++){var f=new Uo(e,u.shape,!1,i),x=[[h]],v=p;p=a.runWebGLProgram(f,[p],p.dtype,x),a.disposeIntermediateTensorInfo(v)}if(o){f=new Uo(e,u.shape,o,i),v=p;p=a.runWebGLProgram(f,[p],p.dtype),a.disposeIntermediateTensorInfo(v)}if(null!=s){var g=Xa({inputs:{x:p},backend:a,attrs:{perm:n.backend_util.getUndoAxesPermutation(s)}});return a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(u),g}return p}var Xo={kernelName:n.Cumprod,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.x,o=a.axis,i=a.exclusive,c=a.reverse;return zo(Oo.Prod,r,t,o,i,c)}};var Ho={kernelName:n.Cumsum,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.x,o=a.axis,i=a.exclusive,c=a.reverse;return zo(Oo.Sum,r,t,o,i,c)}};var jo={kernelName:n.DenseBincount,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.x,o=n.weights,i=a.size,c=a.binaryOutput;if(1===r.shape.length){var s=t.readSync(r.dataId),u=t.readSync(o.dataId),l=Zn(s,u,o.dtype,o.shape,i);return t.makeTensorInfo([i],o.dtype,l)}if(2===r.shape.length){var d=t.bufferSync(r),p=t.bufferSync(o),h=Jn(d,p,i,c);return t.makeTensorInfo(h.shape,o.dtype,h.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(r.shape.length,"."))}},Ko=function(){function e(e,n,t){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=t,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}();var qo={kernelName:n.DepthToSpace,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.x,o=a.blockSize,i=a.dataFormat,c=r.shape[0],s=("NHWC"===i?r.shape[1]:r.shape[2])*o,u=("NHWC"===i?r.shape[2]:r.shape[3])*o,l=("NHWC"===i?r.shape[3]:r.shape[1])/(o*o),d=new Ko("NHWC"===i?[c,s,u,l]:[c,l,s,u],o,i);return t.runWebGLProgram(d,[r],r.dtype)}},Yo=function(e,n,t,a,r){void 0===n&&(n=!1),void 0===t&&(t=null),void 0===a&&(a=!1),void 0===r&&(r=!1),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Le(this.outputShape.length);var o=e.filterHeight,i=e.filterWidth,c=e.outChannels/e.inChannels,s="",u="";t&&(s=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(t,"\n        }"):r?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(t,"\n        }"):"\n          float activation(float x) {\n            ".concat(t,"\n          }\n        "),u="result = activation(result);");var l=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(s,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(c,";\n        int q = d2 - d1 * ").concat(c,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(l,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")},Qo=function(e,t,a,r,o){void 0===t&&(t=!1),void 0===a&&(a=null),void 0===r&&(r=!1),void 0===o&&(o=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Le(this.outputShape.length);for(var i=e.outChannels/e.inChannels,c=e.padInfo.left,s=e.strideWidth,u=e.dilationWidth,l=e.filterHeight,d=e.filterWidth,p=d,h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",f=0;f<d;f++)h+="\n          vec4 xTexelC".concat(2*f,";\n          int xTexelC").concat(2*f,"Ready;\n          vec4 xTexelC").concat(2*f+1,";\n          int xTexelC").concat(2*f+1,"Ready;\n          vec4 xC").concat(f,";");for(h+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      "),f=0;f<d;f++)h+="\n          xTexelC".concat(2*f," = vec4(0.0);\n          xTexelC").concat(2*f,"Ready = 0;\n          xTexelC").concat(2*f+1," = vec4(0.0);\n          xTexelC").concat(2*f+1,"Ready = 0;\n          xC").concat(f," = vec4(0.0);");h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var x=0;x<(p+1)/2;x++){var v=2*x;if(h+="\n          xC = xCCorner + ".concat(v*u,";\n          "),1===s){if(v<d&&(c%2==1?(h+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n              "),h+=1===u&&v>0?"\n                xC".concat(v," = vec4(xTexelC").concat(v-2,".zw, xTexelC").concat(v,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(v," = vec4(previous.zw, xTexelC").concat(v,".xy);\n                  } else {\n                    xC").concat(v," = vec4(0.0, 0.0, xTexelC").concat(v,".xy);\n                  }\n                  ")):h+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n\n                xC").concat(v," = xTexelC").concat(v,";\n                "),v+1<d)){var g=c%2==0?n.util.nearestLargerEven(u):u;u%2==0&&c%2==1||u%2!=0&&c%2!=1?(h+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(g,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                    xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(v+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(v+1,"Ready = 1;\n                  }\n                  "),h+=u>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(v+1," = vec4(previous.zw, xTexelC").concat(v+1,".xy);\n                    } else {\n                     xC").concat(v+1," = vec4(0.0, 0.0, xTexelC").concat(v+1,".xy);\n                    }\n                    "):"\n                    xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".xy);\n                    ")):h+=1===g?"\n                    xC".concat(v+1," = xTexelC").concat(v,";\n                    "):"\n                    xCOffset = xC + ".concat(g,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                      xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(v+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(v+1,"Ready = 1;\n                    }\n\n                    xC").concat(v+1," = xTexelC").concat(v+1,";\n                    ")}}else v<d&&(c%2==1?(h+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                  xTexelC").concat(v+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(v+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v+1,"Ready = 1;\n                }\n\n                xC").concat(v," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n              "),v+1<d&&(h+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(v+1," = vec4(xTexelC").concat(v+1,".xy, final.xy);\n                "))):(h+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                  xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(v+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(v+1,"Ready = 1;\n                }\n\n                xC").concat(v," = vec4(\n                  xTexelC").concat(v,".xy, xTexelC").concat(v+1,".xy);\n              "),v+1<d&&(h+="\n                  xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n                "))));v<d&&(h+="\n            wTexel = getW(r, ".concat(v,", d1, q);\n            dotProd += xC").concat(v," * vec4(wTexel.xz, wTexel.xz);\n          "),v+1<d&&(h+="\n              wTexel = getW(r, ".concat(v+1,", d1, q);\n              dotProd += xC").concat(v+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}h+="\n    }\n  ",h+="\n      }\n    ";var m="",b="";a&&(m=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(a,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(a,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(a,"\n        }"),b="result = activation(result);");var C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(m,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(h,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(C,"\n        ").concat(b,"\n        setOutput(result);\n      }\n    ")};var Zo={kernelName:n.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=t.filter,c=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode,d=u;null==d&&(d=[1,1]),n.util.assert(n.backend_util.eitherStridesOrDilationsAreOne(c,d),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(d,"'")}));var p,h=n.backend_util.computeConv2DInfo(o.shape,i.shape,c,d,s,l,!0);p=n.env().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels==1?new Qo(h):new Yo(h);var f=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return a.runWebGLProgram(p,[o,i],"float32",f)}},Jo=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideHeight,t=e.strideWidth,a=e.padInfo.top,r=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(t," - ").concat(r,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},$o=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterHeight,t=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o=n-1-e.padInfo.top,i=t-1-e.padInfo.left,c=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(t,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(t," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(c,"; dm++) {\n              int d2 = d1 * ").concat(c," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var ei={kernelName:n.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=t.dy,c=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,d=r.filterShape,p=n.backend_util.computeConv2DInfo(o.shape,d,c,s,u,l,!0),h=new Jo(p);return a.runWebGLProgram(h,[o,i],"float32")}};var ni={kernelName:n.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.dy,i=t.filter,c=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,d=r.inputShape,p=n.backend_util.computeConv2DInfo(d,i.shape,c,s,u,l,!0),h=new $o(p);return a.runWebGLProgram(h,[o,i],"float32")}},ti=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "};var ai={kernelName:n.Diag,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=t.x,o=u(u([],s(r.shape),!1),s(r.shape),!1),i=n.util.sizeFromShape(r.shape),c=Da({inputs:{x:r},backend:a,attrs:{shape:[i]}}),l=new ti(i),d=a.runWebGLProgram(l,[c],c.dtype),p=Da({inputs:{x:d},backend:a,attrs:{shape:o}});return a.disposeIntermediateTensorInfo(c),a.disposeIntermediateTensorInfo(d),p}},ri=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var n=e.inHeight,t=e.inWidth,a=e.padInfo,r=e.strideHeight,o=e.strideWidth,i=e.filterHeight,c=e.filterWidth,s=e.dilationHeight,u=e.dilationWidth,l=a.top,d=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(r,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(l,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(i,"; h++) {\n          int hIn = hBeg + h * ").concat(s,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(c,"; w++) {\n              int wIn = wBeg + w * ").concat(u,";\n\n              if (wIn >= 0 && wIn < ").concat(t,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")};var oi={kernelName:n.Dilation2D,backendName:"webgl",kernelFunc:function(e){var t,a=e.inputs,r=e.backend,o=e.attrs,i=a.x,c=a.filter,s=o.strides,u=o.pad,l=o.dilations,d=n.backend_util.computeDilation2DInfo(i.shape,c.shape,s,u,"NHWC",l),p=new ri(d),h=Da({inputs:{x:t=r.runWebGLProgram(p,[i,c],"float32")},backend:r,attrs:{shape:d.outShape}});return r.disposeIntermediateTensorInfo(t),h}};var ii={kernelName:n.Einsum,backendName:"webgl",kernelFunc:function(e){var t,a,r,o,i=e.inputs,s=e.backend,u=e.attrs.equation,l=i,d=n.backend_util.decodeEinsumEquation(u,l.length),p=d.allDims,h=d.summedDims,f=d.idDims;n.backend_util.checkEinsumDimSizes(p.length,f,l);for(var x=n.backend_util.getEinsumComputePath(h,f),v=x.path,g=x.steps,m=g.length,b=null,C=p.length,y=[],w=0;w<m;++w){try{for(var I=(t=void 0,c(g[w])),S=I.next();!S.done;S=I.next()){var k=S.value,R=n.backend_util.getEinsumPermutation(C,f[k]),T=R.permutationIndices,N=R.expandDims,E=void 0;n.backend_util.isIdentityPermutation(T)?E=l[k]:(E=Xa({inputs:{x:l[k]},backend:s,attrs:{perm:T}}),y.push(E));for(var A=E.shape.slice(),_=0;_<N.length;++_)A.splice(N[_],0,1);n.util.arraysEqual(E.shape,A)||(E=Da({inputs:{x:E},backend:s,attrs:{shape:A}}),y.push(E)),null===b?b=E:(b=Oa({inputs:{a:E,b:b},backend:s}),y.push(b))}}catch(e){t={error:e}}finally{try{S&&!S.done&&(a=I.return)&&a.call(I)}finally{if(t)throw t.error}}w<m-1&&(v[w]>=0&&(b=Ga({inputs:{x:b},backend:s,attrs:{axis:v[w]-(p.length-C),keepDims:!1}}),y.push(b)),C--)}try{for(var O=c(y),F=O.next();!F.done;F=O.next()){var D=F.value;D!==b&&s.disposeIntermediateTensorInfo(D)}}catch(e){r={error:e}}finally{try{F&&!F.done&&(o=O.return)&&o.call(O)}finally{if(r)throw r.error}}return b}},ci=Sa({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),si={kernelName:n.Elu,backendName:"webgl",kernelFunc:ci},ui={kernelName:n.EluGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=t.dy,o=t.y,i=n.env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ha("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,o.shape):new da("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,o.shape);return a.runWebGLProgram(i,[r,o],r.dtype)}},li=ka({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:at}),di={kernelName:n.Equal,backendName:"webgl",kernelFunc:li},pi=Sa({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(n.backend_util.ERF_P,";\n  float a1 = ").concat(n.backend_util.ERF_A1,";\n  float a2 = ").concat(n.backend_util.ERF_A2,";\n  float a3 = ").concat(n.backend_util.ERF_A3,";\n  float a4 = ").concat(n.backend_util.ERF_A4,";\n  float a5 = ").concat(n.backend_util.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),hi={kernelName:n.Erf,backendName:"webgl",kernelFunc:pi},fi=Sa({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:rt,dtype:"float32"}),xi={kernelName:n.Exp,backendName:"webgl",kernelFunc:fi};function vi(e){var t=e.inputs,a=e.attrs,r=e.backend,o=a.dim,i=t.input,c=i.shape.length,s=i.shape.slice(),u=o;return o<0&&(n.util.assert(-(c+1)<=o,(function(){return"Axis must be in the interval [".concat(-(c+1),", ").concat(c,"]")})),u=c+o+1),s.splice(u,0,1),Da({inputs:{x:i},backend:r,attrs:{shape:s}})}var gi={kernelName:n.ExpandDims,backendName:"webgl",kernelFunc:vi},mi="return exp(x) - 1.0;",bi=Sa({opSnippet:mi,packedOpSnippet:mi,cpuKernelImpl:ot}),Ci={kernelName:n.Expm1,backendName:"webgl",kernelFunc:bi},yi=function(e,n,t){this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var r,o=t?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),i=t?"".concat(a,".0"):"1.0";if("real"===e)r="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));r="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(r,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(i,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")};function wi(e,t,a){var r=a.texData.get(e.dataId),o=n.util.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],c=Da({inputs:{x:e},backend:a,attrs:{shape:[o/i,i]}}),s=c.shape,u=new yi("real",s,t),l=new yi("imag",s,t),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],p=a.runWebGLProgram(u,d,"float32"),h=a.runWebGLProgram(l,d,"float32"),f=va({inputs:{real:p,imag:h},backend:a});a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(h);var x=Da({inputs:{x:f},backend:a,attrs:{shape:e.shape}});return a.disposeIntermediateTensorInfo(c),a.disposeIntermediateTensorInfo(f),x}var Ii={kernelName:n.FFT,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend;return wi(n.input,!1,t)}},Si=function(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "};function ki(e){var t=e.backend,a=e.attrs,r=a.shape,o=a.value,i=a.dtype;if("string"===(i=i||n.util.inferDtype(o))){var c=n.util.getArrayFromDType(i,n.util.sizeFromShape(r));return c.fill(o),t.makeTensorInfo(r,i,c)}var s=new Si(r,o),u=[[o]];return t.runWebGLProgram(s,[],i,u)}var Ri,Ti={kernelName:n.Fill,backendName:"webgl",kernelFunc:ki},Ni=function(e){this.variableNames=["Image"],this.outputShape=[];var n=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},Ei={kernelName:n.FlipLeftRight,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=n.image,r=t,o=new Ni(a.shape);return r.runWebGLProgram(o,[a],a.dtype)}},Ai="return floor(x);",_i=Sa({opSnippet:Ai,packedOpSnippet:Ai,cpuKernelImpl:it}),Oi={kernelName:n.Floor,backendName:"webgl",kernelFunc:_i},Fi=ka({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Di={kernelName:n.FloorDiv,backendName:"webgl",kernelFunc:Fi},Pi=function(e){this.variableNames=["A"];var n=fe(),t=s(e,2),a=t[0],r=t[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(r,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")},Li=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=fe(),t=s(e,2),a=t[0],r=t[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(r,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},Bi={kernelName:n.FromPixels,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.pixels,i=r.numChannels,c="undefined"!=typeof HTMLVideoElement&&o instanceof HTMLVideoElement,u="undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement,l=s(c?[o.videoWidth,o.videoHeight]:[o.width,o.height],2),p=l[0],h=l[1],f=[h,p],x=[h,p,i];if(u||c){var v=n.env().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=Ri&&v===Vi||(Vi=v,Ri=document.createElement("canvas").getContext("2d",{willReadFrequently:Vi})),Ri.canvas.width=p,Ri.canvas.height=h,Ri.drawImage(o,0,0,p,h),o=Ri.canvas}var g=a.makeTensorInfo(f,"int32");a.texData.get(g.dataId).usage=d.PIXELS,a.gpgpu.uploadPixelDataToTexture(a.getTexture(g.dataId),o);var m=n.env().getBool("WEBGL_PACK")?new Li(x):new Pi(x),b=a.runWebGLProgram(m,[g],"int32");return a.disposeData(g.dataId),b}},Vi=n.env().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var Wi={kernelName:n.FusedConv2D,backendName:"webgl",kernelFunc:function(e){var t,a=e.inputs,r=e.backend,o=e.attrs,i=a.x,c=a.filter,s=a.bias,u=a.preluActivationWeights,l=o.strides,d=o.pad,p=o.dataFormat,h=o.dilations,f=o.dimRoundingMode,x=o.activation,v=o.leakyreluAlpha,g=n.backend_util.convertConv2DDataFormat(p),m=n.backend_util.computeConv2DInfo(i.shape,c.shape,l,h,d,f,!1,g),b=[],C=null!=s,y=null!=u,w="leakyrelu"===x,I=function(){var e=[i,c],t=function(e,n){if("NCHW"===n&&1===e.shape.length&&1!==e.shape[0]){var t=Da({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return b.push(t),t}return e};if(C&&e.push(t(s,p)),y&&e.push(t(u,p)),w){var a=r.makeTensorInfo([],"float32",n.util.createScalarValue(v,"float32"));e.push(a),b.push(a)}return e};if(1!==m.filterHeight||1!==m.filterWidth||1!==m.dilationHeight||1!==m.dilationWidth||1!==m.strideHeight||1!==m.strideWidth||"SAME"!==m.padInfo.type&&"VALID"!==m.padInfo.type)if(m.strideWidth<=2&&"channelsLast"===g&&n.env().getBool("WEBGL_EXP_CONV")){var S=x?Ra(x,!0):null,k=new go(m,C,S,y,w),R=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],T=I();t=r.runWebGLProgram(k,T,"float32",R)}else if(n.env().getBool("WEBGL_CONV_IM2COL"))t=yo({x:i,filter:c,convInfo:m,backend:r,bias:s,activation:x,preluActivationWeights:u,leakyreluAlpha:v});else{S=x?Ra(x,!1):null,k=new xo(m,C,S,y,w);var N=I();t=r.runWebGLProgram(k,N,"float32")}else t=Co({x:i,filter:c,convInfo:m,backend:r,bias:s,activation:x,preluActivationWeights:u,leakyreluAlpha:v});var E=Da({inputs:{x:t},backend:r,attrs:{shape:m.outShape}});return b.push(t),b.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),E}};var Ui={kernelName:n.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=t.filter,c=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,d=r.dilations,p=r.dimRoundingMode,h=r.activation,f=r.leakyreluAlpha,x=[],v=d;null==v&&(v=[1,1]),n.util.assert(n.backend_util.eitherStridesOrDilationsAreOne(u,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(v,"'")}));var g,m=n.backend_util.computeConv2DInfo(o.shape,i.shape,u,v,l,p,!0),b=n.env().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels==1,C=h?Ra(h,b):null,y=[o,i],w=null!=c,I=null!=s,S="leakyrelu"===h;if(w&&y.push(c),I&&y.push(s),S){var k=a.makeTensorInfo([],"float32",n.util.createScalarValue(f,"float32"));y.push(k),x.push(k)}g=b?new Qo(m,w,C,I,S):new Yo(m,w,C,I,S);var R=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],T=a.runWebGLProgram(g,y,"float32",R);return x.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),T}},Mi=function(e,n,t,a){this.sliceDim=e,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=t;for(var r=Ae(t.length),o="\n    int index;",i=0;i<this.sliceDim;i++)o+="\n          index = round(getIndices(coords[0], ".concat(i,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[i],";\n          flattenIndex += index * ").concat(this.strides[i],";");this.userCode="\n         void main() {\n          ".concat(r," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")};var Gi={kernelName:n.GatherNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=t.params,o=t.indices,i=o.shape,c=i[i.length-1],u=n.util.sizeFromShape(r.shape),l=s(n.backend_util.prepareAndValidate(r,o),4),d=l[0],p=l[1],h=l[2],f=l[3],x=Da({inputs:{x:o},backend:a,attrs:{shape:[p,c]}}),v=Da({inputs:{x:r},backend:a,attrs:{shape:[n.util.sizeFromShape(r.shape)/h,h]}});if(a.shouldExecuteOnCPU([r,o])||"string"===r.dtype){var g=a.readSync(o.dataId),m=a.bufferSync(r),b=ct(g,m,r.dtype,p,c,h,f,r.shape,u);return a.makeTensorInfo(d,r.dtype,b.values)}var C=new Mi(c,f,[p,h],r.shape),y=a.runWebGLProgram(C,[v,x],v.dtype),w=Da({inputs:{x:y},backend:a,attrs:{shape:d}});return a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(y),w}},zi=function(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var t=Ae(this.rank),a=function(e,n){for(var t=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],r=0;r<e.length;r++)2===r?a.push("index"):a.push("".concat(t[r]));return a.join()}(e);this.userCode="\n      void main() {\n        ".concat(t," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")};function Xi(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=t.indices,c=r.axis,s=r.batchDims,u=n.util.parseAxisParam(c,o.shape)[0];if(n.env().get("DEBUG"))for(var l=a.readSync(i.dataId),d=o.shape[u],p=function(e){var t=l[e];n.util.assert(t<=d-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(d-1,"]")}))},h=0;h<l.length;++h)p(h);var f=n.backend_util.segment_util.collectGatherOpShapeInfo(o,i,u,s),x=n.util.sizeFromShape(i.shape),v=[],g=Da({inputs:{x:o},backend:a,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),m=Da({inputs:{x:i},backend:a,attrs:{shape:[f.batchSize,x/f.batchSize]}});v.push(g),v.push(m);var b=[f.batchSize,f.outerSize,x/f.batchSize,f.sliceSize];if(a.shouldExecuteOnCPU([o,i])||"string"===o.dtype){var C=a.bufferSync(m),y=a.bufferSync(g),w=st(y,C,b);return v.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),a.makeTensorInfo(f.outputShape,w.dtype,w.values)}var I=new zi(g.shape,b),S=a.runWebGLProgram(I,[g,m],g.dtype);v.push(S);var k=Da({inputs:{x:S},backend:a,attrs:{shape:f.outputShape}});return v.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),k}var Hi={kernelName:n.GatherV2,backendName:"webgl",kernelFunc:Xi},ji=ka({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:ut,dtype:"bool"}),Ki={kernelName:n.Greater,backendName:"webgl",kernelFunc:ji},qi=ka({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:lt}),Yi={kernelName:n.GreaterEqual,backendName:"webgl",kernelFunc:qi};var Qi={kernelName:n.IFFT,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend;return wi(n.input,!0,t)}},Zi=Sa({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Ji={kernelName:n.IsFinite,backendName:"webgl",kernelFunc:Zi},$i=Sa({opSnippet:"return float(isinf(x));",dtype:"bool"}),ec={kernelName:n.IsInf,backendName:"webgl",kernelFunc:$i},nc=Sa({opSnippet:"return float(isnan(x));",dtype:"bool"}),tc={kernelName:n.IsNan,backendName:"webgl",kernelFunc:nc},ac=ka({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:dt,dtype:"bool"}),rc={kernelName:n.Less,backendName:"webgl",kernelFunc:ac},oc=ka({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:pt,dtype:"bool"}),ic={kernelName:n.LessEqual,backendName:"webgl",kernelFunc:oc};var cc={kernelName:n.LinSpace,backendName:"webgl",kernelFunc:function(e){var n=e.backend,t=e.attrs,a=t.start,r=t.stop,o=t.num,i=ht(a,r,o);return n.makeTensorInfo([i.length],"float32",i)}},sc=Sa({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:ft}),uc={kernelName:n.Log,backendName:"webgl",kernelFunc:sc},lc=Sa({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),dc={kernelName:n.Log1p,backendName:"webgl",kernelFunc:lc},pc=ka({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),hc={kernelName:n.LogicalAnd,backendName:"webgl",kernelFunc:pc},fc=Sa({opSnippet:"return float(!(x >= 1.0));"}),xc={kernelName:n.LogicalNot,backendName:"webgl",kernelFunc:fc},vc=ka({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),gc={kernelName:n.LogicalOr,backendName:"webgl",kernelFunc:vc},mc=function(e,n,t,a,r){this.variableNames=["x"],this.outputShape=[];var o,i=n,c=e[3]-1;this.outputShape=e;var s="float(".concat(t,") + float(").concat(a,") * sum");o=.5===r?"inversesqrt(".concat(s,")"):1===r?"1.0/(".concat(s,")"):"exp(log(".concat(s,") * float(-").concat(r,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(i,"; j <= ").concat(i,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(c,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")},bc=function(e,n,t,a,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,i=n,c=e[3]-1;this.outputShape=e;var s="float(".concat(t,") + float(").concat(a,") * sum");o=.5===r?"inversesqrt(".concat(s,")"):1===r?"1.0/(".concat(s,")"):"exp(log(".concat(s,") * float(-").concat(r,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(i,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(i,"; j <= ").concat(i,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(c,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")},Cc={kernelName:n.LRN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.depthRadius,c=r.bias,s=r.alpha,u=r.beta,l=n.env().getBool("WEBGL_PACK_NORMALIZATION")?new bc(o.shape,i,c,s,u):new mc(o.shape,i,c,s,u);return a.runWebGLProgram(l,[o],o.dtype)}},yc=function(e,n,t,a,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=t,this.alpha=a,this.beta=r,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(t,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(r,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(r,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")},wc={kernelName:n.LRNGrad,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.x,o=n.y,i=n.dy,c=a.depthRadius,s=a.bias,u=a.alpha,l=a.beta,d=new yc(r.shape,c,s,u,l);return t.runWebGLProgram(d,[r,o,i],r.dtype)}};function Ic(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.reductionIndices,c=r.keepDims,u=o.shape.length,l=n.util.parseAxisParam(i,o.shape),d=l,p=n.backend_util.getAxesPermutation(d,u),h=null!=p,f=a.shouldExecuteOnCPU([o]),x=o;if(h){if(f){for(var v=a.texData.get(x.dataId).values,g=new Array(u),m=0;m<g.length;m++)g[m]=o.shape[p[m]];var b=zt(v,o.shape,o.dtype,p,g);x=a.makeTensorInfo(g,o.dtype),a.texData.get(x.dataId).values=b}else x=Ma(o,p,a);d=n.backend_util.getInnerMostAxes(d.length,u)}n.backend_util.assertAxesAreInnerMostDims("max",d,u);var C,y=s(n.backend_util.computeOutAndReduceShapes(x.shape,d),2),w=y[0],I=y[1],S=w;if(c&&(S=n.backend_util.expandShapeToKeepDim(w,l)),f){v=a.texData.get(x.dataId).values;var k=xt(v,n.util.sizeFromShape(I),S,o.dtype);C=a.makeTensorInfo(S,o.dtype),a.texData.get(C.dataId).values=k}else C=function(e,t,a,r){var o=n.util.sizeFromShape(t),i=Da({inputs:{x:e},attrs:{shape:[n.util.sizeFromShape(e.shape)/o,o]},backend:r}),c=Va(i,e.dtype,"max",r),s=Da({inputs:{x:c},attrs:{shape:a},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(c),s}(x,I,S,a);return h&&a.disposeIntermediateTensorInfo(x),C}var Sc={kernelName:n.Max,backendName:"webgl",kernelFunc:Ic},kc=ka({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:vt}),Rc={kernelName:n.Maximum,backendName:"webgl",kernelFunc:kc};var Tc={kernelName:n.MaxPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x;de(o,"maxPool");var i=r.filterSize,c=r.strides,s=r.pad,u=r.dimRoundingMode;n.util.assert(n.backend_util.eitherStridesOrDilationsAreOne(c,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(c," and dilations '").concat(1,"'")}));var l=n.backend_util.computePool2DInfo(o.shape,i,c,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&n.util.arraysEqual(l.inShape,l.outShape))return fa({inputs:{x:o},backend:a});var d=new kr(l,"max",!1);return a.runWebGLProgram(d,[o],o.dtype)}};var Nc={kernelName:n.MaxPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.filterSize,c=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,d=n.backend_util.computePool3DInfo(o.shape,i,c,[1,1,1],s,l,u),p=new Rr(d,"max",!1);return a.runWebGLProgram(p,[o],o.dtype)}},Ec=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var n=e.strideHeight,t=e.strideWidth,a=e.dilationHeight,r=e.effectiveFilterHeight,o=e.effectiveFilterWidth,i=r-1-e.padInfo.top,c=o-1-e.padInfo.left,s=r*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(r,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(t,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(s," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Ac=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var n=e.strideDepth,t=e.strideHeight,a=e.strideWidth,r=e.dilationDepth,o=e.dilationHeight,i=e.dilationWidth,c=e.effectiveFilterDepth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=c-1-e.padInfo.front,d=s-1-e.padInfo.top,p=u-1-e.padInfo.left,h=c*s*u-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(l,", ").concat(d,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(c,";\n           wD += ").concat(r,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(s,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(u,";\n                wC += ").concat(i,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(s," * ").concat(u," +\n                  wR * ").concat(u," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var _c={kernelName:n.MaxPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.dy,i=t.input,c=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,d=n.backend_util.computePool3DInfo(i.shape,c,s,[1,1,1],u,l),p=new Rr(d,"max",!0),h=a.runWebGLProgram(p,[i],i.dtype),f=new Ac(d),x=a.runWebGLProgram(f,[o,h],i.dtype);return a.disposeIntermediateTensorInfo(h),x}};var Oc={kernelName:n.MaxPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.dy,i=t.input,c=i;de([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,d=r.dimRoundingMode,p=n.backend_util.computePool2DInfo(c.shape,s,u,1,l,d),h=new kr(p,"max",!0),f=a.runWebGLProgram(h,[c],c.dtype),x=new Ec(p),v=a.runWebGLProgram(x,[o,f],c.dtype);return a.disposeIntermediateTensorInfo(f),v}};var Fc={kernelName:n.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.attrs,r=e.backend,o=t.x,i=a.filterSize,c=a.strides,u=a.pad,l=a.includeBatchInIndex,d=r;n.util.assert(4===o.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.shape.length,".")}));var p=[1,1];n.util.assert(n.backend_util.eitherStridesOrDilationsAreOne(c,p),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(c," and dilations '").concat(p,"'")}));var h=n.backend_util.computePool2DInfo(o.shape,i,c,p,u),f=s(function(e,n,t,a){var r=new kr(t,"max",!1),o=a.runWebGLProgram(r,[e],"float32");return r=new kr(t,"max",!0,!0,n),[o,a.runWebGLProgram(r,[e],"float32")]}(o,l,h,d),2);return[f[0],f[1]]}};var Dc={kernelName:n.Mean,backendName:"webgl",kernelFunc:function(e){var t,a,r=e.inputs,o=e.attrs,i=e.backend,u=r.x,l=o.keepDims,d=o.axis,p=i,h=u.shape.length,f=n.util.parseAxisParam(d,u.shape),x=f,v=n.backend_util.getAxesPermutation(x,h),g=null!=v,m=p.shouldExecuteOnCPU([u]),b=[],C=u;if(g){if(m){for(var y=p.texData.get(C.dataId).values,w=new Array(h),I=0;I<w.length;I++)w[I]=u.shape[v[I]];var S=zt(y,u.shape,u.dtype,v,w);C=p.makeTensorInfo(w,u.dtype),p.texData.get(C.dataId).values=S}else C=Ma(u,v,p);b.push(C),x=n.backend_util.getInnerMostAxes(x.length,h)}n.backend_util.assertAxesAreInnerMostDims("sum",x,h);var k=s(n.backend_util.computeOutAndReduceShapes(C.shape,x),2),R=k[0],T=k[1],N=R;l&&(N=n.backend_util.expandShapeToKeepDim(R,f));var E=function(e,t,a,r){var o=n.util.sizeFromShape(t),i=Da({inputs:{x:e},attrs:{shape:[n.util.sizeFromShape(e.shape)/o,o]},backend:r}),c=Va(i,"float32","mean",r),s=Da({inputs:{x:c},attrs:{shape:a},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(c),s}(C,T,N,p);try{for(var A=c(b),_=A.next();!_.done;_=A.next()){I=_.value;p.disposeIntermediateTensorInfo(I)}}catch(e){t={error:e}}finally{try{_&&!_.done&&(a=A.return)&&a.call(A)}finally{if(t)throw t.error}}return E}};var Pc={kernelName:n.Min,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.axis,c=r.keepDims,u=o.shape.length,l=n.util.parseAxisParam(i,o.shape),d=l,p=n.backend_util.getAxesPermutation(d,u),h=o;null!=p&&(h=Xa({inputs:{x:o},backend:a,attrs:{perm:p}}),d=n.backend_util.getInnerMostAxes(d.length,o.shape.length)),n.backend_util.assertAxesAreInnerMostDims("min",d,u);var f,x=s(n.backend_util.computeOutAndReduceShapes(h.shape,d),2),v=x[0],g=x[1],m=Da({inputs:{x:h},backend:a,attrs:{shape:[-1,n.util.sizeFromShape(g)]}}),b=Va(m,m.dtype,"min",a);return f=Da(c?{inputs:{x:b},backend:a,attrs:{shape:n.backend_util.expandShapeToKeepDim(v,l)}}:{inputs:{x:b},backend:a,attrs:{shape:v}}),a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(b),null!=p&&a.disposeIntermediateTensorInfo(h),f}},Lc=ka({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:gt}),Bc={kernelName:n.Minimum,backendName:"webgl",kernelFunc:Lc},Vc=function(e,n,t){this.variableNames=["x"],this.outputShape=n.map((function(n,t){return n[0]+e[t]+n[1]}));var a=e.length,r=Ae(a),o=n.map((function(e){return e[0]})).join(","),i=n.map((function(n,t){return n[0]+e[t]})).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),s="reflect"===t?0:1;this.userCode=1!==a?"\n      ".concat(r," start = ").concat(r,"(").concat(o,");\n      ").concat(r," end = ").concat(r,"(").concat(i,");\n\n      void main() {\n        ").concat(r," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(s,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(s,";\n          }\n        }\n        ").concat(r," coords = outC - start;\n        setOutput(getX(").concat(c,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(i,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(s,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(s,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")},Wc=function(e,n,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(n,t){return n[0]+e[t]+n[1]}));var a=e.length,r=Ae(a),o=n.map((function(e){return e[0]})).join(","),i=n.map((function(n,t){return n[0]+e[t]})).join(","),c=jt("rc",a),s=jt("source",a),u="".concat(c[a-1]," < ").concat(this.outputShape[a-1]),l=1===a?"source":"vec2(".concat(s.slice(-2).join(),")"),d="reflect"===t?0:1,p="";if(1===a){var h="\n        ".concat(r," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");p="\n        ".concat(r," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(s.join(),"), ").concat(l,");\n        ").concat(c[a-1]," += 1;\n        if(").concat(u,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(s.join(),"), ").concat(l,");\n        }\n      ")}else h="\n        ".concat(r," source = rc;\n        ").concat(r," lt = ").concat(r,"(lessThan(source, start));\n        ").concat(r," gte = ").concat(r,"(greaterThanEqual(source, end));\n        ").concat(r," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      "),p="\n        ".concat(r," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(s.join(),"), ").concat(l,");\n        ").concat(c[a-1]," += 1;\n        if(").concat(u,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(s.join(),"), ").concat(l,");\n        }\n        rc = outputLoc;\n        ").concat(c[a-2]," += 1;\n        if(").concat(c[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(h,"\n          result[2] = getChannel(getX(").concat(s.join(),"), ").concat(l,");\n          ").concat(c[a-1]," += 1;\n          if(").concat(u,") {\n            ").concat(h,"\n            result[3] = getChannel(getX(").concat(s.join(),"), ").concat(l,");\n          }\n        }\n      ");this.userCode="\n      const ".concat(r," start = ").concat(r,"(").concat(o,");\n      const ").concat(r," end = ").concat(r,"(").concat(i,");\n\n      void main() {\n        ").concat(r," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")},Uc={kernelName:n.MirrorPad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.paddings,c=r.mode,s=n.env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wc(o.shape,i,c):new Vc(o.shape,i,c);return a.runWebGLProgram(s,[o],o.dtype)}},Mc=ka({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),Gc={kernelName:n.Mod,backendName:"webgl",kernelFunc:Mc},zc=function(e,n,t){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")},Xc=ka({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Hc={kernelName:n.RealDiv,backendName:"webgl",kernelFunc:Xc},jc="return a - b;",Kc=ka({opSnippet:jc,packedOpSnippet:jc,supportsComplex:!0,cpuKernelImpl:Ut}),qc={kernelName:n.Sub,backendName:"webgl",kernelFunc:Kc};function Yc(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.logits,i=r.dim,c=n.util.parseAxisParam([i],o.shape),s=Ic({inputs:{x:o},backend:a,attrs:{reductionIndices:c,keepDims:!1}}),u=n.backend_util.expandShapeToKeepDim(s.shape,c),l=Da({inputs:{x:s},backend:a,attrs:{shape:u}}),d=Kc({inputs:{a:o,b:l},backend:a}),p=fi({inputs:{x:d},backend:a}),h=Ga({inputs:{x:p},backend:a,attrs:{axis:c,keepDims:!1}}),f=Da({inputs:{x:h},backend:a,attrs:{shape:u}}),x=Xc({inputs:{a:p,b:f},backend:a});return a.disposeIntermediateTensorInfo(s),a.disposeIntermediateTensorInfo(l),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(f),x}var Qc={kernelName:n.Softmax,backendName:"webgl",kernelFunc:Yc};var Zc={kernelName:n.Multinomial,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.logits,o=a.numSamples,i=a.seed,c=a.normalized,s=c?r:Yc({inputs:{logits:r},backend:t,attrs:{dim:r.shape.length-1}}),u=s.shape[0],l=s.shape[1],d=new zc(u,l,o),p=[[i]],h=t.runWebGLProgram(d,[s],"int32",p);return c||t.disposeIntermediateTensorInfo(s),h}};var Jc={kernelName:n.Neg,backendName:"webgl",kernelFunc:function(e){var t,a=e.inputs,r=e.backend,o=a.x;if(r.shouldExecuteOnCPU([o])){var i=r.texData.get(o.dataId),c=s(bt(i.values,o.shape,o.dtype),2),u=c[0],l=c[1];return r.makeTensorInfo(l,o.dtype,u)}return t=n.env().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new aa(o.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new $t(o.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[o],o.dtype)}},$c=n.kernel_impls.nonMaxSuppressionV3Impl;var es={kernelName:n.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:function(e){n.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,a=e.backend,r=e.attrs,o=t.boxes,i=t.scores,c=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=a.readSync(o.dataId),d=a.readSync(i.dataId),p=$c(l,d,c,s,u).selectedIndices;return a.makeTensorInfo([p.length],"int32",new Int32Array(p))}},ns=n.kernel_impls.nonMaxSuppressionV4Impl;var ts={kernelName:n.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:function(e){n.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,a=e.backend,r=e.attrs,o=t.boxes,i=t.scores,c=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize,d=a.readSync(o.dataId),p=a.readSync(i.dataId),h=ns(d,p,c,s,u,l),f=h.selectedIndices,x=h.validOutputs;return[a.makeTensorInfo([f.length],"int32",new Int32Array(f)),a.makeTensorInfo([],"int32",new Int32Array([x]))]}},as=n.kernel_impls.nonMaxSuppressionV5Impl;var rs={kernelName:n.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:function(e){n.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,a=e.backend,r=e.attrs,o=t.boxes,i=t.scores,c=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma,d=a.readSync(o.dataId),p=a.readSync(i.dataId),h=as(d,p,c,s,u,l),f=h.selectedIndices,x=h.selectedScores;return[a.makeTensorInfo([f.length],"int32",new Int32Array(f)),a.makeTensorInfo([x.length],"float32",new Float32Array(x))]}},os=function(e,n,t,a){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(t,"),\n                      float(index == coords.y)));\n      }\n    ")},is={kernelName:n.OneHot,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.indices,i=r.dtype,c=r.depth,l=r.onValue,d=r.offValue,p=n.util.sizeFromShape(o.shape),h=new os(p,c,l,d),f=Da({inputs:{x:o},backend:a,attrs:{shape:[p]}}),x=a.runWebGLProgram(h,[f],i);a.disposeIntermediateTensorInfo(f);var v=Da({inputs:{x:x},backend:a,attrs:{shape:u(u([],s(o.shape),!1),[c],!1)}});return a.disposeIntermediateTensorInfo(x),v}};function cs(e){var n=e.inputs,t=e.backend,a=n.x;if("complex64"===a.dtype){var r=qr({inputs:{input:a},backend:t}),o=cs({inputs:{x:r},backend:t}),i=uo({inputs:{input:a},backend:t}),c=cs({inputs:{x:i},backend:t}),s=va({inputs:{real:o,imag:c},backend:t});return t.disposeIntermediateTensorInfo(r),t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(c),s}return ki({attrs:{shape:a.shape,dtype:a.dtype,value:"string"===a.dtype?"":0},backend:t})}var ss={kernelName:n.ZerosLike,backendName:"webgl",kernelFunc:cs};var us={kernelName:n.OnesLike,backendName:"webgl",kernelFunc:function e(n){var t=n.inputs,a=n.backend,r=t.x;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){var o=qr({inputs:{input:r},backend:a}),i=e({inputs:{x:o},backend:a}),c=uo({inputs:{input:r},backend:a}),s=cs({inputs:{x:c},backend:a}),u=va({inputs:{real:i,imag:s},backend:a});return a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(i),a.disposeIntermediateTensorInfo(c),a.disposeIntermediateTensorInfo(s),u}return ki({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:a})}};var ls={kernelName:n.Pack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs.axis;if(1===t.length)return vi({inputs:{input:t[0]},backend:a,attrs:{dim:r}});var o=t[0].shape,i=t[0].dtype;t.forEach((function(e){n.util.assertShapesMatch(o,e.shape,"All tensors passed to stack must have matching shapes"),n.util.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var c=[],s=ho({inputs:t.map((function(e){var n=vi({inputs:{input:e},backend:a,attrs:{dim:r}});return c.push(n),n})),backend:a,attrs:{axis:r}});return c.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),s}},ds=function(e,n,t){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(n,t){return n[0]+e[t]+n[1]}));var a=e.length,r=Ae(a),o=n.map((function(e){return e[0]})).join(","),i=n.map((function(n,t){return n[0]+e[t]})).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(r," start = ").concat(r,"(").concat(o,");\n      ").concat(r," end = ").concat(r,"(").concat(i,");\n\n      void main() {\n        ").concat(r," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(r," coords = outC - start;\n          setOutput(getX(").concat(c,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(i,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")},ps=function(e,n,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(n,t){return n[0]+e[t]+n[1]}));for(var a=e.length,r=Ae(a),o=n.map((function(e){return e[0]})).join(","),i=n.map((function(n,t){return n[0]+e[t]})).join(","),c=jt("rc",a),s=jt("source",a),u="".concat(c[a-1]," < ").concat(this.outputShape[a-1]),l=1===a?"source":"vec2(".concat(s.slice(-2).join(),")"),d=["".concat(r," rc = outputLoc;"),"".concat(c[a-1]," += 1;\n       if(").concat(u,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(c[a-2]," += 1;\n       if(").concat(c[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(c[a-1]," += 1;\n         if(").concat(u,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",f=0,x=1===a?2:4;f<x;f++)h+="\n        ".concat(d[f],"\n        if (").concat(p,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(r," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(s.join(),"), ").concat(l,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(r," start = ").concat(r,"(").concat(o,");\n      const ").concat(r," end = ").concat(r,"(").concat(i,");\n\n      void main() {\n        ").concat(r," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")},hs=function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.paddings,c=r.constantValue;if(0===n.util.sizeFromShape(o.shape))return ki({backend:a,attrs:{shape:i.map((function(e,n){return e[0]+o.shape[n]+e[1]})),value:c,dtype:o.dtype}});var s=n.env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ps(o.shape,i,c):new ds(o.shape,i,c),u=[[c]];return a.runWebGLProgram(s,[o],o.dtype,u)},fs={kernelName:n.PadV2,backendName:"webgl",kernelFunc:hs},xs=ka({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),vs={kernelName:n.Pow,backendName:"webgl",kernelFunc:xs};var gs={kernelName:n.Prod,backendName:"webgl",kernelFunc:function(e){var t,a=e.inputs,r=e.backend,o=e.attrs,i=a.x,c=o.axis,u=o.keepDims,l=i.shape.length,d=[],p=n.util.parseAxisParam(c,i.shape),h=p,f=n.backend_util.getAxesPermutation(h,l),x=i;if(null!=f&&(x=Xa({inputs:{x:i},backend:r,attrs:{perm:f}}),h=n.backend_util.getInnerMostAxes(h.length,l),d.push(x)),n.backend_util.assertAxesAreInnerMostDims("prod",h,l),r.shouldExecuteOnCPU([x])){var v=r.texData.get(x.dataId).values,g=yt(x.shape,x.dtype,v,h),m=g.outVals,b=g.outShape,C=g.outDtype;t=r.makeTensorInfo(b,C,m)}else{var y=s(n.backend_util.computeOutAndReduceShapes(x.shape,h),2),w=(b=y[0],y[1]),I=n.util.sizeFromShape(w),S=Da({inputs:{x:x},backend:r,attrs:{shape:[-1,I]}}),k=Va(S,n.sumOutType(i.dtype),"prod",r);t=Da({inputs:{x:k},backend:r,attrs:{shape:b}}),d.push(S),d.push(k)}if(u){d.push(t);var R=n.backend_util.expandShapeToKeepDim(t.shape,p);t=Da({inputs:{x:t},backend:r,attrs:{shape:R}})}return d.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}};var ms={kernelName:n.RaggedGather,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.paramsNestedSplits,o=n.paramsDenseValues,i=n.indices;a.outputRaggedRank;var c=r.map((function(e){return t.readSync(e.dataId)})),u=r.map((function(e){return e.shape})),l=t.readSync(o.dataId),d=t.readSync(i.dataId),p=s(wt(c,u,l,o.shape,o.dtype,d,i.shape),3),h=p[0],f=p[1],x=p[2],v=h.map((function(e){return t.makeTensorInfo([e.length],"int32",e)})),g=t.makeTensorInfo(x,o.dtype,f);return v.concat([g])}};var bs={kernelName:n.RaggedRange,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=n.starts,r=n.limits,o=n.deltas,i=t.readSync(a.dataId),c=t.readSync(r.dataId),u=t.readSync(o.dataId),l=s(It(i,a.shape,a.dtype,c,r.shape,u,o.shape),2),d=l[0],p=l[1];return[t.makeTensorInfo([d.length],"int32",d),t.makeTensorInfo([p.length],a.dtype,p)]}};var Cs={kernelName:n.RaggedTensorToTensor,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.shape,o=n.values,i=n.defaultValue,c=n.rowPartitionTensors,u=a.rowPartitionTypes,l=t.readSync(r.dataId),d=t.readSync(o.dataId),p=t.readSync(i.dataId),h=c.map((function(e){return t.readSync(e.dataId)})),f=c.map((function(e){return e.shape})),x=s(St(l,r.shape,d,o.shape,o.dtype,p,i.shape,h,f,u),2),v=x[0],g=x[1];return t.makeTensorInfo(v,o.dtype,g)}},ys=function(e){var n=e.backend,t=e.attrs,a=t.start,r=t.stop,o=t.step,i=t.dtype,c=kt(a,r,o,i);return n.makeTensorInfo([c.length],i,c)},ws={kernelName:n.Range,backendName:"webgl",kernelFunc:ys},Is=Sa({opSnippet:"return 1.0 / x;"}),Ss={kernelName:n.Reciprocal,backendName:"webgl",kernelFunc:Is},ks=Sa({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Rs={kernelName:n.Relu,backendName:"webgl",kernelFunc:ks},Ts=Sa({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Ns={kernelName:n.Relu6,backendName:"webgl",kernelFunc:Ts},Es=function(e,n,t,a,r){this.variableNames=["A"],this.outputShape=[];var o=s(e,4),i=o[0],c=o[1],u=o[2],l=o[3];this.outputShape=[i,n,t,l];var d,p=[a&&n>1?c-1:c,a&&t>1?u-1:u],h=[a&&n>1?n-1:n,a&&t>1?t-1:t];d=r?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/h[0],",\n          ").concat(p[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(u,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")},As=function(e,n,t,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=s(e,4),i=o[0],c=o[1],u=o[2],l=o[3];this.outputShape=[i,n,t,l];var d,p=[a&&n>1?c-1:c,a&&t>1?u-1:u],h=[a&&n>1?n-1:n,a&&t>1?t-1:t];d=r?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/h[0],",\n          ").concat(p[1]/h[1],",\n          ").concat(p[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(u,".0,\n                                     ").concat(u,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(t-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")};var _s={kernelName:n.ResizeBilinear,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.images,i=r.alignCorners,c=r.halfPixelCenters,u=s(r.size,2),l=u[0],d=u[1],p=n.env().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new As(o.shape,l,d,i,c):new Es(o.shape,l,d,i,c);return a.runWebGLProgram(p,[o],"float32")}},Os=function(e,n,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=s(n,3),r=a[1],o=a[2],i=s(e,3),c=i[1],u=i[2],l=[t&&c>1?r-1:r,t&&u>1?o-1:o],d=[t&&c>1?c-1:c,t&&u>1?u-1:u],p=l[0]/d[0],h=l[1]/d[1],f=1/p,x=1/h,v=2*Math.ceil(f)+2,g=2*Math.ceil(x)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(f,");\n        const float invWidthScale = float(").concat(x,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(u,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(r-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")};var Fs={kernelName:n.ResizeBilinearGrad,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.images,o=n.dy,i=a.alignCorners,c=new Os(o.shape,r.shape,i);return t.runWebGLProgram(c,[o],o.dtype)}},Ds=function(e,n,t,a,r){this.variableNames=["A"],this.outputShape=[];var o=s(e,4),i=o[0],c=o[1],u=o[2],l=o[3];this.outputShape=[i,n,t,l];var d,p=[a&&n>1?c-1:c,a&&t>1?u-1:u],h=[a&&n>1?n-1:n,a&&t>1?t-1:t],f=a?"0.5":"0.0";d=r?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/h[0],",\n          ").concat(p[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(u,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(f,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")},Ps=function(e,n,t,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=s(e,4),i=o[0],c=o[1],u=o[2],l=o[3];this.outputShape=[i,n,t,l];var d,p=[a&&n>1?c-1:c,a&&t>1?u-1:u],h=[a&&n>1?n-1:n,a&&t>1?t-1:t],f=a?"0.5":"0.0";d=r?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/h[0],",\n          ").concat(p[1]/h[1],",\n          ").concat(p[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(u,".0,\n                                     ").concat(u,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(f,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(t-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")};var Ls={kernelName:n.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.images,i=r.alignCorners,c=r.halfPixelCenters,u=s(r.size,2),l=u[0],d=u[1],p=n.env().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Ps(o.shape,l,d,i,c):new Ds(o.shape,l,d,i,c);return a.runWebGLProgram(p,[o],o.dtype)}},Bs=function(e,n,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=s(n,3),r=a[1],o=a[2],i=s(e,3),c=i[1],u=i[2],l=[t&&c>1?r-1:r,t&&u>1?o-1:o],d=[t&&c>1?c-1:c,t&&u>1?u-1:u],p=l[0]/d[0],h=l[1]/d[1],f=1/p,x=1/h,v=2*Math.ceil(f)+2,g=2*Math.ceil(x)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(f,");\n        const float invWidthScale = float(").concat(x,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(u,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(t," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(t," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")};var Vs={kernelName:n.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.images,o=n.dy,i=a.alignCorners,c=new Bs(o.shape,r.shape,i);return t.runWebGLProgram(c,[o],o.dtype)}},Ws=function(e,n){this.variableNames=["x"];var t=e.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-".concat(t," tensor is not yet supported"));if(this.outputShape=e,1!==t){var a=e.map((function(t,a){return function(t){return-1!==n.indexOf(t)&&1!==e[t]?"".concat(e[t]," - coords[").concat(t,"] - 1"):"coords[".concat(t,"]")}(a)})).join(","),r=Ae(t);this.userCode="\n      void main() {\n        ".concat(r," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      ")},Us=function(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var t=e.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-".concat(t," tensor is not yet supported"));this.outputShape=e;var a=jt("rc",t),r="".concat(a[t-1]," + 1 < ").concat(this.outputShape[t-1]),o="".concat(a[t-2]," + 1 < ").concat(this.outputShape[t-2]),i=Ae(t);function c(t){var a=e.map((function(a,r){return function(t,a){return-1!==n.indexOf(t)&&1!==e[t]?"".concat(e[t]," - ").concat(a[t]," - 1"):"".concat(a[t])}(r,t)})),r=a.join(","),o=a.slice(-2).join(",");return"getChannel(getX(".concat(r,"), vec2(").concat(o,"))")}this.userCode=1===t?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(r,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(i," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return c(e)}(a.slice()),";\n          if(").concat(r,"){\n            result.g = ").concat(function(e){return e[t-1]="("+e[t-1]+" + 1)",c(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[t-2]="("+e[t-2]+" + 1)",c(e)}(a.slice()),";\n            if(").concat(r,") {\n              result.a = ").concat(function(e){return e[t-1]="("+e[t-1]+" + 1)",e[t-2]="("+e[t-2]+" + 1)",c(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")};var Ms={kernelName:n.Reverse,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.dims,c=o.shape.length,s=n.util.parseAxisParam(i,o.shape);if(0===c)return fa({inputs:{x:o},backend:a});var u=n.env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Us(o.shape,s):new Ws(o.shape,s);return a.runWebGLProgram(u,[o],o.dtype)}},Gs=function(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var t=e[1],a=e[2];this.outputShape=e;var r="";r="number"==typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(r,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(t,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},zs={kernelName:n.RotateWithOffset,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.attrs,r=e.backend,o=t.image,i=a.radians,c=a.fillValue,u=a.center,l=r,d=new Gs(o.shape,c),p=s(n.backend_util.getImageCenter(u,o.shape[1],o.shape[2]),2),h=[[p[0],p[1],Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(d,[o],o.dtype,h)}},Xs=Sa({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Hs={kernelName:n.Round,backendName:"webgl",kernelFunc:Xs},js=Sa({opSnippet:"return inversesqrt(x);",cpuKernelImpl:Rt}),Ks={kernelName:n.Rsqrt,backendName:"webgl",kernelFunc:js},qs=function(e,n,t,a,r,o,i,c){void 0===c&&(c=!1),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Ae(r.length),u=Ae(o.length),l="";1===t?l="i":2===t&&(l="i, j");var d="getIndices(".concat(l,")"),p="";1===a?p="i":2===a&&(p="i, coords[1]");var h="getUpdates(".concat(p,")"),f="";c&&(f="coords[0], coords[1]");var x="getDefaultValue(".concat(f,")"),v=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(r,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(d,");\n              flattenedIndex += index * ").concat(v,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(x,", sum, float(found)));\n        }\n      ")},Ys=function(e,n,t,a,r,o,i,c){void 0===c&&(c=!1),this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;var s=Ae(r.length),u=Ae(o.length),l="";1===t?l="i":2===t&&(l="i, j");var d="getIndices(".concat(l,")"),p="";1===a?p="i":2===a&&(p="i, coords[1]");var h="getUpdates(".concat(p,")"),f="";c&&(f="coords[0], coords[1]");var x="getDefaultValue(".concat(f,")"),v=n>1?"strides[j]":"strides",g=n>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(r,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(n,"; j+=2) {\n              ivec4 index = round(").concat(d,");\n              flattenedIndex += index.xz * ").concat(v,";\n              if (j + 1 < ").concat(n,") {\n                flattenedIndex += index.yw * ").concat(g,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(h,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(x,", sum, found));\n        }\n      ")};var Qs={kernelName:n.ScatterNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.indices,i=t.updates,c=r.shape,s=n.backend_util.calculateShapes(i,o,c),u=s.sliceRank,l=s.numUpdates,d=s.sliceSize,p=s.strides,h=s.outputSize,f=[h/d,d];if(0===h)return a.makeTensorInfo(c,o.dtype);var x,v=Da({inputs:{x:o},backend:a,attrs:{shape:[l,u]}}),g=Da({inputs:{x:i},backend:a,attrs:{shape:[l,d]}}),m=a.makeTensorInfo([],"float32",new Float32Array([0]));x=n.env().getBool("WEBGL_PACK")?new Ys(l,u,v.shape.length,g.shape.length,p,f):new qs(l,u,v.shape.length,g.shape.length,p,f);var b=a.runWebGLProgram(x,[g,v,m],g.dtype),C=Da({inputs:{x:b},backend:a,attrs:{shape:c}});return a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(g),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(m),C}},Zs=function(e,t,a,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,a];var o="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),i=2===n.env().getNumber("WEBGL_VERSION")?"while (left < right) {":o,c="left"===r?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(i,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(c," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")};var Js={kernelName:n.SearchSorted,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.sortedSequence,o=n.values,i=a.side,c=new Zs(r.shape[0],r.shape[1],o.shape[1],i),s=[[r.shape[1]]];return t.runWebGLProgram(c,[r,o],"int32",s)}},$s=function(e,n,t){var a,r;if(this.variableNames=["c","a","b"],this.outputShape=n,t>4)throw Error("Where for rank ".concat(t," is not yet supported"));if(1===t)r="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],c=[],s=0;s<n.length;s++)c.push("".concat(o[s])),s<e&&i.push("".concat(o[s]));a=i.join(),r=c.join()}var u=Ae(t);this.userCode="\n      void main() {\n        ".concat(u," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(r,"));\n        } else {\n          setOutput(getB(").concat(r,"));\n        }\n      }\n    ")};var eu={kernelName:n.Select,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=t.condition,o=t.t,i=t.e,c=new $s(r.shape.length,o.shape,o.shape.length);return a.runWebGLProgram(c,[r,o,i],n.upcastType(o.dtype,i.dtype))}},nu=Sa({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(n.backend_util.SELU_SCALEALPHA,";\n  float scale = ").concat(n.backend_util.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),tu={kernelName:n.Selu,backendName:"webgl",kernelFunc:nu},au=Sa({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:Nt}),ru={kernelName:n.Sigmoid,backendName:"webgl",kernelFunc:au},ou=Sa({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),iu={kernelName:n.Sign,backendName:"webgl",kernelFunc:ou},cu=Sa({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(pa,"\n  return result;\n")}),su={kernelName:n.Sin,backendName:"webgl",kernelFunc:cu},uu=Sa({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),lu={kernelName:n.Sinh,backendName:"webgl",kernelFunc:uu},du=Sa({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),pu={kernelName:n.Softplus,backendName:"webgl",kernelFunc:du},hu={kernelName:n.SpaceToBatchND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.blockShape,c=r.paddings;n.util.assert(o.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var l=i.reduce((function(e,n){return e*n})),d=[[0,0]];d.push.apply(d,u([],s(c),!1));for(var p=1+i.length;p<o.shape.length;++p)d.push([0,0]);var h=[],f=hs({inputs:{x:o},backend:a,attrs:{paddings:d,constantValue:0}}),x=n.backend_util.getReshaped(f.shape,i,l,!1),v=n.backend_util.getPermuted(x.length,i.length,!1),g=n.backend_util.getReshapedPermuted(f.shape,i,l,!1),m=Da({inputs:{x:f},backend:a,attrs:{shape:x}}),b=Xa({inputs:{x:m},backend:a,attrs:{perm:v}}),C=Da({inputs:{x:b},backend:a,attrs:{shape:g}});return h.push(f),h.push(m),h.push(b),h.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),C}};var fu={kernelName:n.SparseFillEmptyRows,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=n.indices,r=n.values,o=n.denseShape,i=n.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(a.shape));if(1!==r.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(r.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));var c=t.readSync(a.dataId),u=t.readSync(r.dataId),l=t.readSync(o.dataId),d=t.readSync(i.dataId)[0],p=s(_t(c,a.shape,a.dtype,u,r.dtype,l,d),5),h=p[0],f=p[1],x=p[2],v=p[3],g=p[4];return[t.makeTensorInfo(f,a.dtype,h),t.makeTensorInfo([f[0]],r.dtype,x),t.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),t.makeTensorInfo([g.length],a.dtype,new Int32Array(g))]}};var xu={kernelName:n.SparseReshape,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=n.inputIndices,r=n.inputShape,o=n.newShape;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(a.shape));if(1!==r.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(r.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var i=Array.from(t.readSync(r.dataId)),c=t.readSync(a.dataId),u=Array.from(t.readSync(o.dataId)),l=s(Ot(c,a.shape,a.dtype,i,u),3),d=l[0],p=l[1],h=l[2];return[t.makeTensorInfo(p,a.dtype,d),t.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};var vu={kernelName:n.SparseSegmentMean,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=n.data,r=n.indices,o=n.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(r.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));var i=t.readSync(a.dataId),c=t.readSync(r.dataId),u=t.readSync(o.dataId),l=s(Ft(i,a.shape,a.dtype,c,u,!0),2),d=l[0],p=l[1];return t.makeTensorInfo(p,a.dtype,d)}};var gu={kernelName:n.SparseSegmentSum,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=n.data,r=n.indices,o=n.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(r.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));var i=t.readSync(a.dataId),c=t.readSync(r.dataId),u=t.readSync(o.dataId),l=s(Ft(i,a.shape,a.dtype,c,u),2),d=l[0],p=l[1];return t.makeTensorInfo(p,a.dtype,d)}};var mu={kernelName:n.SparseToDense,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.sparseIndices,i=t.sparseValues,c=t.defaultValue,s=r.outputShape,u=n.backend_util.calculateShapes(i,o,s),l=u.sliceRank,d=u.numUpdates,p=u.sliceSize,h=u.strides,f=u.outputSize;if("string"===i.dtype){var x=a.bufferSync(o),v=a.bufferSync(i),g=n.util.decodeString(a.readSync(c.dataId)[0]),m=Tt(x,v,s,f,p,d,l,h,g,false);return a.makeTensorInfo(s,m.dtype,m.values)}var b=new qs(d,l,o.shape.length,i.shape.length,h,[f,1],false),C=a.runWebGLProgram(b,[i,o,c],i.dtype),y=Da({inputs:{x:C},backend:a,attrs:{shape:s}});return a.disposeIntermediateTensorInfo(C),y}};var bu={kernelName:n.SplitV,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.numOrSizeSplits,c=r.axis,l=n.util.parseAxisParam(c,o.shape)[0],d=n.backend_util.prepareSplitSize(o,i,l),p=o.shape.length,h=new Array(p).fill(0),f=o.shape.slice();return d.map((function(e){var n=u([],s(f),!1);n[l]=e;var t=Ur({inputs:{x:o},backend:a,attrs:{begin:h,size:n}});return h[l]+=e,t}))}},Cu="return sqrt(x);",yu=Sa({opSnippet:Cu,packedOpSnippet:Cu,cpuKernelImpl:Dt}),wu={kernelName:n.Sqrt,backendName:"webgl",kernelFunc:yu},Iu=Sa({opSnippet:"return x * x;"}),Su={kernelName:n.Square,backendName:"webgl",kernelFunc:Iu},ku="return (a - b) * (a - b);",Ru=ka({opSnippet:ku,packedOpSnippet:ku}),Tu={kernelName:n.SquaredDifference,backendName:"webgl",kernelFunc:Ru};var Nu={kernelName:n.StaticRegexReplace,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x;if("string"!==o.dtype)throw new Error("Input must be of datatype string");var i=a.readSync(o.dataId),c=n.backend_util.fromUint8ToStringArray(i),s=Pt(c,"string",r);return a.makeTensorInfo(o.shape,"string",s)}};var Eu={kernelName:n.Step,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.attrs,a=e.backend,r=n.x,o=ea+"\n    return x > 0.0 ? 1.0 : float(".concat(t.alpha,");\n  "),i=new $t(r.shape,o);return a.runWebGLProgram(i,[r],r.dtype)}},Au=function(e,n,t){this.variableNames=["x"],this.outputShape=t;var a=t.length,r=Ae(t.length),o=Ae(t.length),i="";if(1===a)i="coords * strides + begin";else{var c=0;i=t.map((function(e,n){return c++,1===t.length?"coords * strides[".concat(n,"] + begin[").concat(n,"]"):"coords[".concat(c-1,"] * strides[").concat(n,"] + begin[").concat(n,"]")})).join(",")}this.userCode="\n      ".concat(r," begin = ").concat(r,"(").concat(e,");\n      ").concat(r," strides = ").concat(r,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(i,"));\n      }\n    ")};var _u={kernelName:n.StridedSlice,backendName:"webgl",kernelFunc:function(e){var t,a=e.inputs,r=e.backend,o=e.attrs,i=a.x,c=o.begin,s=o.end,u=o.strides,l=o.beginMask,d=o.endMask,p=o.ellipsisMask,h=o.newAxisMask,f=o.shrinkAxisMask,x=n.slice_util.sliceInfo(i.shape,c,s,u,l,d,p,h,f),v=x.finalShapeSparse,g=x.finalShape,m=x.isIdentity,b=x.sliceDim0,C=x.isSimpleSlice,y=x.begin,w=x.end,I=x.strides;if(m)t=Da({inputs:{x:i},backend:r,attrs:{shape:g}});else if(b||C){n.util.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=n.slice_util.computeOutShape(y,w,I),k=Ur({inputs:{x:i},backend:r,attrs:{begin:y,size:S}});t=Da({inputs:{x:k},backend:r,attrs:{shape:g}}),r.disposeIntermediateTensorInfo(k)}else{if(r.shouldExecuteOnCPU([i])){var R=r.readSync(i.dataId),T=n.buffer(i.shape,i.dtype,R),N=Lt(v,T,I,y);t=r.makeTensorInfo(g,i.dtype,N.values)}else{var E=new Au(y,I,v);t=r.runWebGLProgram(E,[i],i.dtype)}}var A=Da({inputs:{x:t},backend:r,attrs:{shape:g}});return r.disposeIntermediateTensorInfo(t),A}};var Ou={kernelName:n.StringNGrams,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=a.separator,o=a.nGramWidths,i=a.leftPad,c=a.rightPad,u=a.padWidth,l=a.preserveShortSequences,d=n.data,p=n.dataSplits,h=t.readSync(d.dataId),f=t.readSync(p.dataId),x=s(Bt(h,f,r,o,i,c,u,l),2),v=x[0],g=x[1];return[t.makeTensorInfo([v.length],"string",v),t.makeTensorInfo(p.shape,"int32",g)]}};var Fu={kernelName:n.StringSplit,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs.skipEmpty,r=n.input,o=n.delimiter;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(1!==r.shape.length)throw new Error("Input must be a vector, got shape: ".concat(r.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var i=t.readSync(r.dataId),c=t.readSync(o.dataId)[0],u=s(Vt(i,c,a),3),l=u[0],d=u[1],p=u[2],h=d.length;return[t.makeTensorInfo([h,2],"int32",l),t.makeTensorInfo([h],"string",d),t.makeTensorInfo([2],"int32",new Int32Array(p))]}};var Du={kernelName:n.StringToHashBucketFast,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs.numBuckets,r=n.input;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");var o=t.readSync(r.dataId),i=Wt(o,a);return t.makeTensorInfo(r.shape,"int32",i)}},Pu=Sa({opSnippet:"return tan(x);"}),Lu={kernelName:n.Tan,backendName:"webgl",kernelFunc:Pu},Bu=Sa({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),Vu={kernelName:n.Tanh,backendName:"webgl",kernelFunc:Bu};var Wu={kernelName:n.TensorScatterUpdate,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend;e.attrs;var r=t.tensor,o=t.indices,i=t.updates,c=n.backend_util.calculateShapes(i,o,r.shape),s=c.sliceRank,u=c.numUpdates,l=c.sliceSize,d=c.strides,p=c.outputSize,h=[p/l,l];if(0===p)return a.makeTensorInfo(r.shape,o.dtype);var f=Da({inputs:{x:o},backend:a,attrs:{shape:[u,s]}}),x=Da({inputs:{x:i},backend:a,attrs:{shape:[u,l]}}),v=Da({inputs:{x:r},backend:a,attrs:{shape:h}}),g=new qs(u,s,f.shape.length,x.shape.length,d,h,!1,!0),m=a.runWebGLProgram(g,[x,f,v],v.dtype),b=Da({inputs:{x:m},backend:a,attrs:{shape:r.shape}});return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(m),b}},Uu=function(e,n){this.variableNames=["A"];for(var t=new Array(e.length),a=0;a<t.length;a++)t[a]=e[a]*n[a];this.outputShape=t,this.rank=t.length;var r=Ae(this.rank),o=function(e){var n=e.length;if(n>5)throw Error("Tile for rank ".concat(n," is not yet supported"));if(1===n)return"imod(resRC, ".concat(e[0],")");for(var t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],a=[],r=0;r<e.length;r++)a.push("imod(".concat(t[r],", ").concat(e[r],")"));return a.join()}(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")};function Mu(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.reps;if("string"===o.dtype||o.shape.length>5){var c=a.readSync(o.dataId),s="string"===o.dtype?c.map((function(e){return n.util.decodeString(e)})):c,u=n.buffer(o.shape,o.dtype,s),l=Mt(u,i);return a.makeTensorInfo(l.shape,l.dtype,l.values)}var d=new Uu(o.shape,i);return a.runWebGLProgram(d,[o],o.dtype)}var Gu={kernelName:n.Tile,backendName:"webgl",kernelFunc:Mu},zu=function(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "},Xu=function(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "};function Hu(e,n){null!==n&&e.disposeIntermediateTensorInfo(n)}function ju(e){for(var n=1;n<e;)n*=2;return n}var Ku={kernelName:n.TopK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=r.k,c=r.sorted,u=n.env().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=n.env().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),d=o.shape,p=d[d.length-1];if(a.shouldExecuteOnCPU([o])||p<u||i>l){var h=a.readSync(o.dataId),f=s(Gt(h,d,o.dtype,i,c),2),x=f[0],v=f[1];return[a.makeTensorInfo(x.shape,x.dtype,x.values),a.makeTensorInfo(v.shape,v.dtype,v.values)]}if(0===i)return d[d.length-1]=0,[a.makeTensorInfo(d,o.dtype,[]),a.makeTensorInfo(d,"int32",[])];if(1===p)return[o,ki({attrs:{shape:d,dtype:"int32",value:0},backend:a})];var g=a.texData.get(o.dataId),m=null!==g&&g.isPacked,b=m?a.unpackTensor(o):o,C=n.util.sizeFromShape(d)/p,y=Da({inputs:{x:b},attrs:{shape:[C,p]},backend:a});m&&Hu(a,b);for(var w=ju(i),I=ju(p),S=null,k=function(){return null===S?[y,y]:[y,S]},R=function(e,n,t){var r=k(),o=new zu(t),i=[[p],[null===S?1:0],[Number.NEGATIVE_INFINITY],[e],[n]],c=S;S=a.runWebGLProgram(o,r,"int32",i),Hu(a,c)},T=1;T<w;T*=2)for(var N=2*T,E=T;E>=1;E/=2)R(N,E,[C,I]);for(var A=I;A>w;A/=2){var _=k(),O=new Xu([C,A/2]),F=[[p],[null===S?1:0],[w]],D=S;S=a.runWebGLProgram(O,_,"int32",F),Hu(a,D);for(N=2*(T=w/2),E=T;E>=1;E/=2)R(N,E,S.shape)}var P=S;S=Ur({inputs:{x:S},backend:a,attrs:{begin:0,size:[C,i]}}),Hu(a,P);var L=Xi({inputs:{x:y,indices:S},backend:a,attrs:{axis:1,batchDims:1}});Hu(a,y);var B=d.slice(0,-1);B.push(i),P=S,S=Da({inputs:{x:S},attrs:{shape:B},backend:a}),Hu(a,P);var V=L;return L=Da({inputs:{x:L},attrs:{shape:B},backend:a}),Hu(a,V),[L,S]}},qu=function(e,n,t,a,r,o){this.variableNames=["Image","Transforms"],this.outputShape=o;var i,c="nearest"===t?1:2;switch(a){case"constant":default:i=1;break;case"reflect":i=2;break;case"wrap":i=3;break;case"nearest":i=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(i," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(i," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(i," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(r,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(r,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(c," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")};var Yu={kernelName:n.Transform,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.image,o=n.transforms,i=a.interpolation,c=a.fillMode,u=a.fillValue,l=a.outputShape,d=s(r.shape,4),p=d[0],h=d[1],f=d[2],x=d[3],v=s(null!=l?l:[h,f],2),g=v[0],m=v[1],b=new qu(h,f,i,c,u,[p,g,m,x]);return t.runWebGLProgram(b,[r,o],"float32")}};var Qu={kernelName:n.Unique,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.attrs,a=e.backend,r=t.axis,o=n.x;de(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var i=a.readSync(o.dataId),c=Xt(i,r,o.shape,o.dtype),s=c.outputValues,u=c.outputShape,l=c.indices;return[a.makeTensorInfo(u,o.dtype,s),a.makeTensorInfo([l.length],"int32",l)]}};var Zu={kernelName:n.Unpack,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,a=e.attrs,r=n.value,o=a.axis;o<0&&(o+=r.shape.length);for(var i=r,c=i.shape.length,s=r.shape[o],u=new Array(c-1),l=0,d=0;d<c;d++)d!==o&&(u[l++]=i.shape[d]);var p=[],h=new Array(c).fill(0),f=i.shape.slice();f[o]=1;var x=new Array(s);for(d=0;d<x.length;d++){h[o]=d;var v=Ur({inputs:{x:i},backend:t,attrs:{begin:h,size:f}}),g=Da({inputs:{x:v},backend:t,attrs:{shape:u}});x[d]=g,p.push(v)}return p.forEach((function(e){return t.disposeIntermediateTensorInfo(e)})),x}},Ju=function(e,n){this.variableNames=["x","segmentIds"];var t=e.windowSize,a=e.batchSize,r=e.inSize,o=e.numSegments,i=o*Math.ceil(r/t);this.outputShape=[a,i];var c=4*Math.floor(t/4),s=t%4,u="\n        sumValue += dot(values, segFilter);\n    ",l="";r%t>0&&(l="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return initializationValue;\n        }\n      "));var d="";r%t>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(l,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(t,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(u,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(u,"\n        } else if (").concat(2===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(u,"\n        } else if (").concat(3===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(u,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")};var $u,el,nl=[Ka,Ya,Za,$a,tr,or,ir,cr,hr,fr,vr,mr,Cr,wr,Sr,Tr,Nr,_r,Or,Fr,Lr,Gr,zr,Xr,Hr,Qr,$r,to,ga,oo,fo,wo,To,Eo,Ao,_o,Fo,Po,Bo,Wo,Xo,Ho,jo,qo,Zo,ei,ni,ai,oi,ii,si,ui,di,hi,xi,gi,Ci,Ii,Ti,Ei,Oi,Di,Bi,Wi,Ui,Gi,Hi,Ki,Yi,xa,Qi,lo,Ji,ec,tc,Ca,rc,ic,cc,uc,dc,hc,xc,gc,Cc,wc,Sc,Rc,Tc,Nc,_c,Oc,Fc,Dc,Pc,Bc,Uc,Gc,Zc,Fa,Jc,es,ts,rs,Kr,is,us,ls,fs,vs,Ia,gs,ms,bs,Cs,ws,Yr,Hc,Ss,Rs,Ns,Pa,_s,Fs,Ls,Vs,Ms,zs,Hs,Ks,Qs,Js,eu,tu,ru,iu,su,lu,Mr,Qc,pu,hu,fu,xu,vu,gu,mu,bu,wu,Su,Tu,Nu,Eu,_u,Ou,Fu,Du,qc,za,Lu,Vu,Wu,Gu,Ku,Yu,Ha,Qu,Zu,{kernelName:n.UnsortedSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,a=e.backend,r=e.attrs,o=t.x,i=t.segmentIds,c=r.numSegments,s=o.shape.length,u=[],l=0,d=n.backend_util.getAxesPermutation([l],s),p=o;null!=d&&(p=Xa({inputs:{x:o},backend:a,attrs:{perm:d}}),u.push(p),l=n.backend_util.getInnerMostAxes(1,s)[0]);var h=n.backend_util.segment_util.computeOutShape(p.shape,l,c),f=n.util.sizeFromShape([p.shape[l]]),x=Da({inputs:{x:p},backend:a,attrs:{shape:[-1,f]}});u.push(x);var v=n.sumOutType(o.dtype),g=function(e,t,r,o,i){var c=e.shape[0],s=e.shape[1],l=n.backend_util.segment_util.segOpComputeOptimalWindowSize(s,i),d=new Ju({windowSize:l,inSize:s,batchSize:c,numSegments:i},t),p=a.compileAndRun(d,[e,r],o);if(u.push(p),p.shape[1]===i)return p;var h=ys({backend:a,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),f=Mu({inputs:{x:h},backend:a,attrs:{reps:[s/l]}});return u.push(h),u.push(f),g(p,t,f,o,i)},m=Da({inputs:{x:g(x,"unsortedSegmentSum",i,v,c)},backend:a,attrs:{shape:h}}),b=m;if(null!=d){u.push(m);var C=n.backend_util.getUndoAxesPermutation(d);b=Xa({inputs:{x:b},backend:a,attrs:{perm:C}})}return u.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),b}},ss];try{for(var tl=c(nl),al=tl.next();!al.done;al=tl.next()){var rl=al.value;n.registerKernel(rl)}}catch(e){$u={error:e}}finally{try{al&&!al.done&&(el=tl.return)&&el.call(tl)}finally{if($u)throw $u.error}}e.GPGPUContext=fn,e.MathBackendWebGL=sa,e.forceHalfFloat=ua,e.gpgpu_util=hn,e.setWebGLContext=x,e.version_webgl="4.22.0",e.webgl=la,e.webgl_util=pe}));
//# sourceMappingURL=tf-backend-webgl.min.js.map</script>
<script>
!function(f){"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define([],f):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).QuantumCircuit=f()}(function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){function ErrorListener(errors){return antlr4.error.ErrorListener.call(this),this.errors=errors,this}var antlr4=require("antlr4/index"),QASMLexer=require("./QASMLexer"),QASMParser=require("./QASMParser").QASMParser,QASMListener=require("./QASMListener").QASMListener;((ErrorListener.prototype=Object.create(antlr4.error.ErrorListener.prototype)).constructor=ErrorListener).prototype.syntaxError=function(rec,sym,line,col,msg,e){this.errors.push({line:line,col:col,msg:msg})};function QCQASMListener(circuit,compatibilityMode){return this.circuit=circuit,this.qregMap={},this.condition={},this.compatibilityMode=compatibilityMode,QASMListener.call(this),this}((QCQASMListener.prototype=Object.create(QASMListener.prototype)).constructor=QCQASMListener).prototype.numQbit=function(){var num=0;for(var reg in this.qregMap)num+=this.qregMap[reg];return num},QCQASMListener.prototype.qregBase=function(qreg){var base=0;for(var reg in this.qregMap){if(reg==qreg)return base;base+=this.qregMap[reg]}return base},QCQASMListener.prototype.qregLen=function(reg){return this.qregMap[reg]||0},QCQASMListener.prototype.enterMainprog=function(ctx){},QCQASMListener.prototype.exitMainprog=function(ctx){},QCQASMListener.prototype.enterStatement=function(ctx){var gatedecl,params,ccount,customGate,customGateName,customGateRegs,goplist,self=this,name=ctx.getChildCount()?ctx.getChild(0).getText():"";if("if"==name&&(this.condition={creg:ctx.ID().getText(),value:parseInt(ctx.INT().getText())}),"barrier"==name){var idlist=ctx.anylist()?ctx.anylist().idlist():null,mixedlist=ctx.anylist()?ctx.anylist().mixedlist():null;if(idlist){for(var wires=[],regCount=idlist.ID().length,regIndex=0;regIndex<regCount;regIndex++)for(var regName=idlist.ID()[regIndex].getText(),numBits=self.qregLen(regName),bit=0;bit<numBits;bit++){var wire=bit+self.qregBase(regName);wires.push(wire)}var destCol=self.circuit.lastNonEmptyPlace(wires,!1);destCol+=1,wires.map(function(destWire){self.circuit.addGate(name,destCol,destWire)})}if(mixedlist&&mixedlist.ID().length==mixedlist.INT().length){for(var args=[],count=mixedlist.ID().length,i=0;i<count;i++)args.push({reg:mixedlist.ID()[i].getText(),bit:parseInt(mixedlist.INT()[i].getText())});wires=[];args.map(function(a){wires.push(a.bit+self.qregBase(a.reg))}),self.circuit.addGate(name,-1,wires,{})}}ctx.gatedecl()&&(args=[],params=[],2<(ccount=(gatedecl=ctx.gatedecl()).getChildCount())&&gatedecl.getChild(2).ID?args=gatedecl.getChild(2).ID():(3<ccount&&gatedecl.getChild(3).ID&&(params=gatedecl.getChild(3).ID()),5<ccount&&gatedecl.getChild(5).ID&&(args=gatedecl.getChild(5).ID())),customGate=new(Object.getPrototypeOf(this.circuit).constructor)(args.length),customGateName=gatedecl.ID().getText(),customGateRegs=[],args.map(function(reg){customGateRegs.push(reg.getText())}),params.map(function(par){var parName=par.getText();customGate.params.push(parName)}),ctx.goplist()&&(goplist=ctx.goplist()).children.forEach(function(child,childIndex){if(child instanceof QASMParser.UopContext){var uop=child;if(gateName=uop.ID()?uop.ID().getText():""){var idlist=uop.anylist()?uop.anylist().idlist():null,explist=(uop.anylist()&&uop.anylist().mixedlist(),uop.explist());switch(gateName){case"CX":gateName="cx";break;case"U":gateName="u3"}if(!self.circuit.basicGates[gateName]&&!self.circuit.customGates[gateName])for(var tmpName in self.circuit.basicGates){var tmpDef=self.circuit.basicGates[tmpName];if(tmpDef.exportInfo&&tmpDef.exportInfo.qasm&&tmpDef.exportInfo.qasm.name&&tmpDef.exportInfo.qasm.name==gateName){gateName=tmpName;break}if(tmpDef.exportInfo&&tmpDef.exportInfo.qiskit&&tmpDef.exportInfo.qiskit.name&&tmpDef.exportInfo.qiskit.name==gateName){gateName=tmpName;break}}var paramList,paramDef,gateDef,params={};explist&&explist.exp()&&((gateDef=(gateDef=self.circuit.basicGates[gateName])||self.circuit.customGates[gateName])&&(paramList=explist.exp(),paramDef=gateDef.params||[],paramList.map(function(paramItem,paramIndex){var paramValue=paramItem.getText(),paramName=paramIndex<=paramDef.length?paramDef[paramIndex]:"";paramName&&(params[paramName]=paramValue)})));var options={params:params},wires=[];if(idlist)for(var count=idlist.ID().length,i=0;i<count;i++)wires.push(customGateRegs.indexOf(idlist.ID()[i].getText()));var external=self.circuit.customGates[gateName];external&&customGate.registerGate(gateName,JSON.parse(JSON.stringify(external))),customGate.addGate(gateName,-1,wires,options)}}else{var gateName;if(gateName=child.getText?child.getText():"")switch(gateName){case"barrier":if(goplist.children.length>childIndex+1&&(idlist=goplist.children[childIndex+1])&&idlist.ID){wires=[];if(idlist){for(count=idlist.ID().length,i=0;i<count;i++)wires.push(customGateRegs.indexOf(idlist.ID()[i].getText()));options={params:{}};customGate.addGate(gateName,-1,wires,options)}}}}}),this.circuit.registerGate(customGateName,customGate.save(!1)))},QCQASMListener.prototype.exitStatement=function(ctx){},QCQASMListener.prototype.enterVersion=function(ctx){},QCQASMListener.prototype.exitVersion=function(ctx){},QCQASMListener.prototype.enterDecl=function(ctx){switch(ctx.getChild(0).getText()){case"qreg":this.qregMap[ctx.getChild(1).getText()]=parseInt(ctx.getChild(3).getText());break;case"creg":this.circuit.createCreg(ctx.getChild(1).getText(),parseInt(ctx.getChild(3).getText()))}},QCQASMListener.prototype.exitDecl=function(ctx){},QCQASMListener.prototype.enterGatedecl=function(ctx){},QCQASMListener.prototype.exitGatedecl=function(ctx){},QCQASMListener.prototype.enterGoplist=function(ctx){},QCQASMListener.prototype.exitGoplist=function(ctx){},QCQASMListener.prototype.enterQop=function(ctx){var self=this,condition=JSON.parse(JSON.stringify(this.condition));this.condition={};var name=ctx.getChildCount()?ctx.getChild(0).getText():"";if("reset"==name){for(var qreg="",qbit=-1,count=ctx.argument().length,i=0;i<count;i++){var arg=ctx.argument()[i];0==i&&(qreg=arg.ID().getText(),qbit=arg.INT()?parseInt(arg.INT().getText()):-1)}if(qreg){var numBits=self.qregLen(qreg);if(qbit<0)for(var x=0;x<numBits;x++)self.circuit.addGate("reset",-1,x+self.qregBase(qreg),{condition:condition||{}});else self.circuit.addGate("reset",-1,qbit+self.qregBase(qreg),{condition:condition||{}})}}if("measure"==name){for(var qreg="",qbit=-1,creg="",cbit=-1,count=ctx.argument().length,i=0;i<count;i++){arg=ctx.argument()[i];0==i&&(qreg=arg.ID().getText(),qbit=arg.INT()?parseInt(arg.INT().getText()):-1),1==i&&(creg=arg.ID().getText(),cbit=arg.INT()?parseInt(arg.INT().getText()):-1)}if(qreg&&creg){numBits=self.qregLen(qreg);if(qbit<0&&cbit<0)for(x=0;x<numBits;x++)self.circuit.addGate("measure",-1,x+self.qregBase(qreg),{creg:{name:creg,bit:x},condition:condition||{}});else if(0<=qbit&&0<=cbit)self.circuit.addGate("measure",-1,qbit+self.qregBase(qreg),{creg:{name:creg,bit:cbit},condition:condition||{}});else if(0<=qbit&&cbit<0)for(x=0;x<numBits;x++)self.circuit.addGate("measure",-1,qbit+self.qregBase(qreg),{creg:{name:creg,bit:x},condition:condition||{}});else for(x=0;x<numBits;x++)self.circuit.addGate("measure",-1,x+self.qregBase(qreg),{creg:{name:creg,bit:cbit},condition:condition||{}})}}var uop=ctx.uop();if(uop&&uop.ID()){var gateName=uop.ID().getText(),idlist=uop.anylist()?uop.anylist().idlist():null,mixedlist=uop.anylist()?uop.anylist().mixedlist():null,explist=uop.explist();switch(gateName){case"CX":gateName="cx";break;case"U":gateName="u3"}if(!self.circuit.basicGates[gateName]&&!self.circuit.customGates[gateName])for(var tmpName in self.circuit.basicGates){var tmpDef=self.circuit.basicGates[tmpName];if(tmpDef.exportInfo&&tmpDef.exportInfo.qasm&&tmpDef.exportInfo.qasm.name&&tmpDef.exportInfo.qasm.name==gateName){gateName=tmpName;break}if(tmpDef.exportInfo&&tmpDef.exportInfo.qiskit&&tmpDef.exportInfo.qiskit.name&&tmpDef.exportInfo.qiskit.name==gateName){gateName=tmpName;break}}var paramList,paramDef,gateDef,params={};explist&&explist.exp()&&((gateDef=(gateDef=self.circuit.basicGates[gateName])||self.circuit.customGates[gateName])&&(paramList=explist.exp(),paramDef=gateDef.params||[],paramList.map(function(paramItem,paramIndex){var paramValue=paramItem.getText(),paramName=paramIndex<=paramDef.length?paramDef[paramIndex]:"";paramName&&(params[paramName]=paramValue)})));var options={params:params,condition:condition||{}};if(idlist)for(numBits=self.qregLen(idlist.ID()[0].getText()),x=0;x<numBits;x++){for(var args=[],count=idlist.ID().length,i=0;i<count;i++)args.push({reg:idlist.ID()[i].getText(),bit:x});var wires=[];args.map(function(a){wires.push(a.bit+self.qregBase(a.reg))}),self.circuit.addGate(gateName,-1,wires,options)}if(mixedlist&&mixedlist.ID().length==mixedlist.INT().length){for(args=[],count=mixedlist.ID().length,i=0;i<count;i++)args.push({reg:mixedlist.ID()[i].getText(),bit:parseInt(mixedlist.INT()[i].getText())});wires=[];args.map(function(a){wires.push(a.bit+self.qregBase(a.reg))}),self.circuit.addGate(gateName,-1,wires,options)}}},QCQASMListener.prototype.exitQop=function(ctx){},QCQASMListener.prototype.enterUop=function(ctx){},QCQASMListener.prototype.exitUop=function(ctx){},QCQASMListener.prototype.enterAnylist=function(ctx){},QCQASMListener.prototype.exitAnylist=function(ctx){},QCQASMListener.prototype.enterIdlist=function(ctx){},QCQASMListener.prototype.exitIdlist=function(ctx){},QCQASMListener.prototype.enterMixedlist=function(ctx){},QCQASMListener.prototype.exitMixedlist=function(ctx){},QCQASMListener.prototype.enterArgument=function(ctx){},QCQASMListener.prototype.exitArgument=function(ctx){},QCQASMListener.prototype.enterExplist=function(ctx){},QCQASMListener.prototype.exitExplist=function(ctx){},QCQASMListener.prototype.enterExp=function(ctx){},QCQASMListener.prototype.exitExp=function(ctx){},QCQASMListener.prototype.enterUnaryop=function(ctx){},QCQASMListener.prototype.exitUnaryop=function(ctx){},module.exports=function(circuit,input,errorCallback,compatibilityMode){var chars=new antlr4.InputStream(input),lexer=new QASMLexer.QASMLexer(chars),tokens=new antlr4.CommonTokenStream(lexer),parser=new QASMParser(tokens);parser.buildParseTrees=!0,parser.removeErrorListeners();var errors=[],errorListener=new ErrorListener(errors);parser.addErrorListener(errorListener);var tree=parser.mainprog(),QASM=new QCQASMListener(circuit,compatibilityMode);antlr4.tree.ParseTreeWalker.DEFAULT.walk(QASM,tree),errorCallback&&errorCallback(errors)}},{"./QASMLexer":2,"./QASMListener":3,"./QASMParser":4,"antlr4/index":47}],2:[function(require,module,exports){var antlr4=require("antlr4/index"),serializedATN=["\x03\u608b\ua72a\u8133\ub9ed\u417c\u3be7\u7786\u5964","\x02-\u0124\b\x01\x04\x02\t\x02\x04\x03\t\x03\x04","\x04\t\x04\x04\x05\t\x05\x04\x06\t\x06\x04\x07\t","\x07\x04\b\t\b\x04\t\t\t\x04\n\t\n\x04\v\t\v\x04","\f\t\f\x04\r\t\r\x04\x0e\t\x0e\x04\x0f\t\x0f\x04\x10","\t\x10\x04\x11\t\x11\x04\x12\t\x12\x04\x13\t\x13","\x04\x14\t\x14\x04\x15\t\x15\x04\x16\t\x16\x04\x17","\t\x17\x04\x18\t\x18\x04\x19\t\x19\x04\x1a\t\x1a","\x04\x1b\t\x1b\x04\x1c\t\x1c\x04\x1d\t\x1d\x04\x1e",'\t\x1e\x04\x1f\t\x1f\x04 \t \x04!\t!\x04"\t"\x04#',"\t#\x04$\t$\x04%\t%\x04&\t&\x04'\t'\x04(\t(\x04)\t)\x04","*\t*\x04+\t+\x04,\t,\x03\x02\x03\x02\x03\x03\x03\x03","\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x04","\x03\x04\x03\x05\x03\x05\x03\x06\x03\x06\x03\x07","\x03\x07\x03\x07\x03\b\x03\b\x03\b\x03\t\x03\t\x03","\t\x03\t\x03\t\x03\t\x03\t\x03\t\x03\n\x03\n\x03\n\x03","\n\x03\n\x03\n\x03\n\x03\n\x03\n\x03\v\x03\v\x03","\v\x03\v\x03\v\x03\v\x03\v\x03\v\x03","\f\x03\f\x03\f\x03\f\x03\f\x03\r\x03\r\x03\x0e\x03","\x0e\x03\x0f\x03\x0f\x03\x0f\x03\x0f\x03\x0f\x03","\x10\x03\x10\x03\x10\x03\x10\x03\x10\x03\x11\x03","\x11\x03\x12\x03\x12\x03\x12\x03\x12\x03\x12\x03","\x12\x03\x12\x03\x12\x03\x13\x03\x13\x03\x13\x03","\x14\x03\x14\x03\x14\x03\x14\x03\x14\x03\x14\x03","\x15\x03\x15\x03\x16\x03\x16\x03\x16\x03\x17\x03","\x17\x03\x18\x03\x18\x03\x19\x03\x19\x03\x1a\x03","\x1a\x03\x1b\x03\x1b\x03\x1c\x03\x1c\x03\x1d\x03","\x1d\x03\x1d\x03\x1d\x03\x1e\x03\x1e\x03\x1e\x03","\x1e\x03\x1f\x03\x1f\x03\x1f\x03\x1f\x03 \x03",' \x03 \x03 \x03!\x03!\x03!\x03"\x03"\x03"\x03"','\x03"\x03#\x03#\x03#\x03$\x03$\x03$\x03$\x03$\x03',"$\x03$\x05$\xe1\n$\x03%\x03%\x03%\x06%\xe6\n%\r%\x0e","%\xe7\x03&\x03&\x03&\x06&\xed\n&\r&\x0e&\xee\x03'","\x06'\xf2\n'\r'\x0e'\xf3\x03(\x03(\x07(\xf8\n(\f","(\x0e(\xfb\v(\x03)\x06)\xfe\n)\r)\x0e)\xff\x03)","\x03)\x03*\x03*\x06*\u0106\n*\r*\x0e*\u0107\x03*\x03*","\x03+\x03+\x03+\x03+\x07+\u0110\n+\f+\x0e+\u0113\v+","\x03+\x03+\x03+\x03+\x03+\x03,\x03,\x03,\x03,\x07",",\u011e\n,\f,\x0e,\u0121\v,\x03,\x03,\x03\u0111\x02-\x03","\x03\x05\x04\x07\x05\t\x06\v\x07\r\b\x0f\t\x11","\n\x13\v\x15\f\x17\r\x19\x0e\x1b\x0f\x1d\x10\x1f","\x11!\x12#\x13%\x14'\x15)\x16+\x17-\x18/\x191\x1a","3\x1b5\x1c7\x1d9\x1e;\x1f= ?!A\"C#E$G%I&K'M(O)Q*S+U,W-\x03","\x02\n\x03\x022;\x04\x02GGgg\x04\x02--//\x03\x02c",'|\x06\x022;C\\aac|\x05\x02\v\f\x0e\x0f""\x07\x02',"/02;C\\aac|\x04\x02\f\f\x0f\x0f\x02\u012d\x02\x03\x03","\x02\x02\x02\x02\x05\x03\x02\x02\x02\x02\x07\x03","\x02\x02\x02\x02\t\x03\x02\x02\x02\x02\v\x03","\x02\x02\x02\x02\r\x03\x02\x02\x02\x02\x0f\x03","\x02\x02\x02\x02\x11\x03\x02\x02\x02\x02\x13\x03","\x02\x02\x02\x02\x15\x03\x02\x02\x02\x02\x17\x03","\x02\x02\x02\x02\x19\x03\x02\x02\x02\x02\x1b\x03","\x02\x02\x02\x02\x1d\x03\x02\x02\x02\x02\x1f\x03","\x02\x02\x02\x02!\x03\x02\x02\x02\x02#\x03\x02","\x02\x02\x02%\x03\x02\x02\x02\x02'\x03\x02\x02","\x02\x02)\x03\x02\x02\x02\x02+\x03\x02\x02\x02","\x02-\x03\x02\x02\x02\x02/\x03\x02\x02\x02\x02","1\x03\x02\x02\x02\x023\x03\x02\x02\x02\x025\x03","\x02\x02\x02\x027\x03\x02\x02\x02\x029\x03\x02","\x02\x02\x02;\x03\x02\x02\x02\x02=\x03\x02\x02","\x02\x02?\x03\x02\x02\x02\x02A\x03\x02\x02\x02","\x02C\x03\x02\x02\x02\x02E\x03\x02\x02\x02\x02","G\x03\x02\x02\x02\x02I\x03\x02\x02\x02\x02K\x03","\x02\x02\x02\x02M\x03\x02\x02\x02\x02O\x03\x02","\x02\x02\x02Q\x03\x02\x02\x02\x02S\x03\x02\x02","\x02\x02U\x03\x02\x02\x02\x02W\x03\x02\x02\x02","\x03Y\x03\x02\x02\x02\x05[\x03\x02\x02\x02\x07","b\x03\x02\x02\x02\td\x03\x02\x02\x02\vf\x03\x02","\x02\x02\rh\x03\x02\x02\x02\x0fk\x03\x02\x02\x02","\x11n\x03\x02\x02\x02\x13v\x03\x02\x02\x02\x15","\x7f\x03\x02\x02\x02\x17\x87\x03\x02\x02\x02\x19","\x8c\x03\x02\x02\x02\x1b\x8e\x03\x02\x02\x02\x1d","\x90\x03\x02\x02\x02\x1f\x95\x03\x02\x02\x02!","\x9a\x03\x02\x02\x02#\x9c\x03\x02\x02\x02%\xa4","\x03\x02\x02\x02'\xa7\x03\x02\x02\x02)\xad\x03","\x02\x02\x02+\xaf\x03\x02\x02\x02-\xb2\x03\x02","\x02\x02/\xb4\x03\x02\x02\x021\xb6\x03\x02\x02","\x023\xb8\x03\x02\x02\x025\xba\x03\x02\x02\x02","7\xbc\x03\x02\x02\x029\xbe\x03\x02\x02\x02;\xc2","\x03\x02\x02\x02=\xc6\x03\x02\x02\x02?\xca\x03","\x02\x02\x02A\xce\x03\x02\x02\x02C\xd1\x03\x02","\x02\x02E\xd6\x03\x02\x02\x02G\xe0\x03\x02\x02","\x02I\xe2\x03\x02\x02\x02K\xe9\x03\x02\x02\x02","M\xf1\x03\x02\x02\x02O\xf5\x03\x02\x02\x02Q\xfd","\x03\x02\x02\x02S\u0103\x03\x02\x02\x02U\u010b\x03","\x02\x02\x02W\u0119\x03\x02\x02\x02YZ\x07\x7f\x02","\x02Z\x04\x03\x02\x02\x02[\\\x07q\x02\x02\\]\x07","r\x02\x02]^\x07c\x02\x02^_\x07s\x02\x02_`\x07w\x02","\x02`a\x07g\x02\x02a\x06\x03\x02\x02\x02bc\x07=","\x02\x02c\b\x03\x02\x02\x02de\x07*\x02\x02e\n\x03","\x02\x02\x02fg\x07+\x02\x02g\f\x03\x02\x02\x02h","i\x07k\x02\x02ij\x07h\x02\x02j\x0e\x03\x02\x02\x02","kl\x07?\x02\x02lm\x07?\x02\x02m\x10\x03\x02\x02","\x02no\x07d\x02\x02op\x07c\x02\x02pq\x07t\x02\x02","qr\x07t\x02\x02rs\x07k\x02\x02st\x07g\x02\x02tu\x07","t\x02\x02u\x12\x03\x02\x02\x02vw\x07Q\x02\x02wx","\x07R\x02\x02xy\x07G\x02\x02yz\x07P\x02\x02z{\x07","S\x02\x02{|\x07C\x02\x02|}\x07U\x02\x02}~\x07O\x02","\x02~\x14\x03\x02\x02\x02\x7f\x80\x07k\x02\x02","\x80\x81\x07p\x02\x02\x81\x82\x07e\x02\x02\x82","\x83\x07n\x02\x02\x83\x84\x07w\x02\x02\x84\x85","\x07f\x02\x02\x85\x86\x07g\x02\x02\x86\x16\x03","\x02\x02\x02\x87\x88\x07s\x02\x02\x88\x89\x07","t\x02\x02\x89\x8a\x07g\x02\x02\x8a\x8b\x07i\x02","\x02\x8b\x18\x03\x02\x02\x02\x8c\x8d\x07]\x02","\x02\x8d\x1a\x03\x02\x02\x02\x8e\x8f\x07_\x02","\x02\x8f\x1c\x03\x02\x02\x02\x90\x91\x07e\x02","\x02\x91\x92\x07t\x02\x02\x92\x93\x07g\x02\x02","\x93\x94\x07i\x02\x02\x94\x1e\x03\x02\x02\x02","\x95\x96\x07i\x02\x02\x96\x97\x07c\x02\x02\x97","\x98\x07v\x02\x02\x98\x99\x07g\x02\x02\x99 \x03",'\x02\x02\x02\x9a\x9b\x07}\x02\x02\x9b"\x03\x02',"\x02\x02\x9c\x9d\x07o\x02\x02\x9d\x9e\x07g\x02","\x02\x9e\x9f\x07c\x02\x02\x9f\xa0\x07u\x02\x02","\xa0\xa1\x07w\x02\x02\xa1\xa2\x07t\x02\x02\xa2","\xa3\x07g\x02\x02\xa3$\x03\x02\x02\x02\xa4\xa5","\x07/\x02\x02\xa5\xa6\x07@\x02\x02\xa6&\x03\x02","\x02\x02\xa7\xa8\x07t\x02\x02\xa8\xa9\x07g\x02","\x02\xa9\xaa\x07u\x02\x02\xaa\xab\x07g\x02\x02","\xab\xac\x07v\x02\x02\xac(\x03\x02\x02\x02\xad","\xae\x07W\x02\x02\xae*\x03\x02\x02\x02\xaf\xb0","\x07E\x02\x02\xb0\xb1\x07Z\x02\x02\xb1,\x03\x02","\x02\x02\xb2\xb3\x07.\x02\x02\xb3.\x03\x02\x02","\x02\xb4\xb5\x07`\x02\x02\xb50\x03\x02\x02\x02","\xb6\xb7\x07,\x02\x02\xb72\x03\x02\x02\x02\xb8","\xb9\x071\x02\x02\xb94\x03\x02\x02\x02\xba\xbb","\x07-\x02\x02\xbb6\x03\x02\x02\x02\xbc\xbd\x07","/\x02\x02\xbd8\x03\x02\x02\x02\xbe\xbf\x07u\x02","\x02\xbf\xc0\x07k\x02\x02\xc0\xc1\x07p\x02\x02","\xc1:\x03\x02\x02\x02\xc2\xc3\x07e\x02\x02\xc3","\xc4\x07q\x02\x02\xc4\xc5\x07u\x02\x02\xc5<\x03","\x02\x02\x02\xc6\xc7\x07v\x02\x02\xc7\xc8\x07","c\x02\x02\xc8\xc9\x07p\x02\x02\xc9>\x03\x02\x02","\x02\xca\xcb\x07g\x02\x02\xcb\xcc\x07z\x02\x02","\xcc\xcd\x07r\x02\x02\xcd@\x03\x02\x02\x02\xce","\xcf\x07n\x02\x02\xcf\xd0\x07p\x02\x02\xd0B\x03","\x02\x02\x02\xd1\xd2\x07u\x02\x02\xd2\xd3\x07","s\x02\x02\xd3\xd4\x07t\x02\x02\xd4\xd5\x07v\x02","\x02\xd5D\x03\x02\x02\x02\xd6\xd7\x07r\x02\x02","\xd7\xd8\x07k\x02\x02\xd8F\x03\x02\x02\x02\xd9","\xda\x05I%\x02\xda\xdb\x05K&\x02\xdb\xe1\x03\x02","\x02\x02\xdc\xdd\x05M'\x02\xdd\xde\x05K&\x02\xde","\xe1\x03\x02\x02\x02\xdf\xe1\x05I%\x02\xe0\xd9","\x03\x02\x02\x02\xe0\xdc\x03\x02\x02\x02\xe0\xdf","\x03\x02\x02\x02\xe1H\x03\x02\x02\x02\xe2\xe3","\x05M'\x02\xe3\xe5\x070\x02\x02\xe4\xe6\t\x02\x02","\x02\xe5\xe4\x03\x02\x02\x02\xe6\xe7\x03\x02\x02","\x02\xe7\xe5\x03\x02\x02\x02\xe7\xe8\x03\x02\x02","\x02\xe8J\x03\x02\x02\x02\xe9\xea\t\x03\x02\x02","\xea\xec\t\x04\x02\x02\xeb\xed\t\x02\x02\x02\xec","\xeb\x03\x02\x02\x02\xed\xee\x03\x02\x02\x02\xee","\xec\x03\x02\x02\x02\xee\xef\x03\x02\x02\x02\xef","L\x03\x02\x02\x02\xf0\xf2\t\x02\x02\x02\xf1\xf0","\x03\x02\x02\x02\xf2\xf3\x03\x02\x02\x02\xf3\xf1","\x03\x02\x02\x02\xf3\xf4\x03\x02\x02\x02\xf4N","\x03\x02\x02\x02\xf5\xf9\t\x05\x02\x02\xf6\xf8","\t\x06\x02\x02\xf7\xf6\x03\x02\x02\x02\xf8\xfb","\x03\x02\x02\x02\xf9\xf7\x03\x02\x02\x02\xf9\xfa","\x03\x02\x02\x02\xfaP\x03\x02\x02\x02\xfb\xf9","\x03\x02\x02\x02\xfc\xfe\t\x07\x02\x02\xfd\xfc","\x03\x02\x02\x02\xfe\xff\x03\x02\x02\x02\xff\xfd","\x03\x02\x02\x02\xff\u0100\x03\x02\x02\x02\u0100\u0101","\x03\x02\x02\x02\u0101\u0102\b)\x02\x02\u0102R\x03\x02","\x02\x02\u0103\u0105\x07$\x02\x02\u0104\u0106\t\b\x02\x02","\u0105\u0104\x03\x02\x02\x02\u0106\u0107\x03\x02\x02\x02","\u0107\u0105\x03\x02\x02\x02\u0107\u0108\x03\x02\x02\x02","\u0108\u0109\x03\x02\x02\x02\u0109\u010a\x07$\x02\x02","\u010aT\x03\x02\x02\x02\u010b\u010c\x071\x02\x02\u010c","\u010d\x07,\x02\x02\u010d\u0111\x03\x02\x02\x02\u010e","\u0110\v\x02\x02\x02\u010f\u010e\x03\x02\x02\x02\u0110","\u0113\x03\x02\x02\x02\u0111\u0112\x03\x02\x02\x02\u0111","\u010f\x03\x02\x02\x02\u0112\u0114\x03\x02\x02\x02\u0113","\u0111\x03\x02\x02\x02\u0114\u0115\x07,\x02\x02\u0115","\u0116\x071\x02\x02\u0116\u0117\x03\x02\x02\x02\u0117","\u0118\b+\x02\x02\u0118V\x03\x02\x02\x02\u0119\u011a\x07","1\x02\x02\u011a\u011b\x071\x02\x02\u011b\u011f\x03\x02","\x02\x02\u011c\u011e\n\t\x02\x02\u011d\u011c\x03\x02\x02","\x02\u011e\u0121\x03\x02\x02\x02\u011f\u011d\x03\x02\x02","\x02\u011f\u0120\x03\x02\x02\x02\u0120\u0122\x03\x02\x02","\x02\u0121\u011f\x03\x02\x02\x02\u0122\u0123\b,\x02\x02","\u0123X\x03\x02\x02\x02\f\x02\xe0\xe7\xee\xf3\xf9","\xff\u0107\u0111\u011f\x03\b\x02\x02"].join(""),atn=(new antlr4.atn.ATNDeserializer).deserialize(serializedATN),decisionsToDFA=atn.decisionToState.map(function(ds,index){return new antlr4.dfa.DFA(ds,index)});function QASMLexer(input){return antlr4.Lexer.call(this,input),this._interp=new antlr4.atn.LexerATNSimulator(this,atn,decisionsToDFA,new antlr4.PredictionContextCache),this}(QASMLexer.prototype=Object.create(antlr4.Lexer.prototype)).constructor=QASMLexer,Object.defineProperty(QASMLexer.prototype,"atn",{get:function(){return atn}}),QASMLexer.EOF=antlr4.Token.EOF,QASMLexer.T__0=1,QASMLexer.T__1=2,QASMLexer.T__2=3,QASMLexer.T__3=4,QASMLexer.T__4=5,QASMLexer.T__5=6,QASMLexer.T__6=7,QASMLexer.T__7=8,QASMLexer.T__8=9,QASMLexer.T__9=10,QASMLexer.T__10=11,QASMLexer.T__11=12,QASMLexer.T__12=13,QASMLexer.T__13=14,QASMLexer.T__14=15,QASMLexer.T__15=16,QASMLexer.T__16=17,QASMLexer.T__17=18,QASMLexer.T__18=19,QASMLexer.T__19=20,QASMLexer.T__20=21,QASMLexer.T__21=22,QASMLexer.T__22=23,QASMLexer.T__23=24,QASMLexer.T__24=25,QASMLexer.T__25=26,QASMLexer.T__26=27,QASMLexer.T__27=28,QASMLexer.T__28=29,QASMLexer.T__29=30,QASMLexer.T__30=31,QASMLexer.T__31=32,QASMLexer.T__32=33,QASMLexer.PI=34,QASMLexer.REAL=35,QASMLexer.SUBREAL=36,QASMLexer.EXPREAL=37,QASMLexer.INT=38,QASMLexer.ID=39,QASMLexer.WS=40,QASMLexer.FILENAME=41,QASMLexer.COMMENT=42,QASMLexer.LINE_COMMENT=43,QASMLexer.prototype.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],QASMLexer.prototype.modeNames=["DEFAULT_MODE"],QASMLexer.prototype.literalNames=[null,"'}'","'opaque'","';'","'('","')'","'if'","'=='","'barrier'","'OPENQASM'","'include'","'qreg'","'['","']'","'creg'","'gate'","'{'","'measure'","'->'","'reset'","'U'","'CX'","','","'^'","'*'","'/'","'+'","'-'","'sin'","'cos'","'tan'","'exp'","'ln'","'sqrt'","'pi'"],QASMLexer.prototype.symbolicNames=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"PI","REAL","SUBREAL","EXPREAL","INT","ID","WS","FILENAME","COMMENT","LINE_COMMENT"],QASMLexer.prototype.ruleNames=["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","T__8","T__9","T__10","T__11","T__12","T__13","T__14","T__15","T__16","T__17","T__18","T__19","T__20","T__21","T__22","T__23","T__24","T__25","T__26","T__27","T__28","T__29","T__30","T__31","T__32","PI","REAL","SUBREAL","EXPREAL","INT","ID","WS","FILENAME","COMMENT","LINE_COMMENT"],QASMLexer.prototype.grammarFileName="QASM.g4",exports.QASMLexer=QASMLexer},{"antlr4/index":47}],3:[function(require,module,exports){var antlr4=require("antlr4/index");function QASMListener(){return antlr4.tree.ParseTreeListener.call(this),this}((QASMListener.prototype=Object.create(antlr4.tree.ParseTreeListener.prototype)).constructor=QASMListener).prototype.enterMainprog=function(ctx){},QASMListener.prototype.exitMainprog=function(ctx){},QASMListener.prototype.enterStatement=function(ctx){},QASMListener.prototype.exitStatement=function(ctx){},QASMListener.prototype.enterVersion=function(ctx){},QASMListener.prototype.exitVersion=function(ctx){},QASMListener.prototype.enterInclude=function(ctx){},QASMListener.prototype.exitInclude=function(ctx){},QASMListener.prototype.enterFilename=function(ctx){},QASMListener.prototype.exitFilename=function(ctx){},QASMListener.prototype.enterDecl=function(ctx){},QASMListener.prototype.exitDecl=function(ctx){},QASMListener.prototype.enterGatedecl=function(ctx){},QASMListener.prototype.exitGatedecl=function(ctx){},QASMListener.prototype.enterGoplist=function(ctx){},QASMListener.prototype.exitGoplist=function(ctx){},QASMListener.prototype.enterQop=function(ctx){},QASMListener.prototype.exitQop=function(ctx){},QASMListener.prototype.enterUop=function(ctx){},QASMListener.prototype.exitUop=function(ctx){},QASMListener.prototype.enterAnylist=function(ctx){},QASMListener.prototype.exitAnylist=function(ctx){},QASMListener.prototype.enterIdlist=function(ctx){},QASMListener.prototype.exitIdlist=function(ctx){},QASMListener.prototype.enterMixedlist=function(ctx){},QASMListener.prototype.exitMixedlist=function(ctx){},QASMListener.prototype.enterArgument=function(ctx){},QASMListener.prototype.exitArgument=function(ctx){},QASMListener.prototype.enterExplist=function(ctx){},QASMListener.prototype.exitExplist=function(ctx){},QASMListener.prototype.enterExp=function(ctx){},QASMListener.prototype.exitExp=function(ctx){},QASMListener.prototype.enterAtom=function(ctx){},QASMListener.prototype.exitAtom=function(ctx){},QASMListener.prototype.enterUnaryop=function(ctx){},QASMListener.prototype.exitUnaryop=function(ctx){},exports.QASMListener=QASMListener},{"antlr4/index":47}],4:[function(require,module,exports){var antlr4=require("antlr4/index"),QASMListener=require("./QASMListener").QASMListener,serializedATN=["\x03\u608b\ua72a\u8133\ub9ed\u417c\u3be7\u7786\u5964","\x03-\u0130\x04\x02\t\x02\x04\x03\t\x03\x04\x04\t","\x04\x04\x05\t\x05\x04\x06\t\x06\x04\x07\t\x07\x04","\b\t\b\x04\t\t\t\x04\n\t\n\x04\v\t\v\x04\f\t\f\x04","\r\t\r\x04\x0e\t\x0e\x04\x0f\t\x0f\x04\x10\t\x10\x04","\x11\t\x11\x04\x12\t\x12\x04\x13\t\x13\x03\x02\x03","\x02\x07\x02)\n\x02\f\x02\x0e\x02,\v\x02\x03\x03","\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03","\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03","\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03","\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03","\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03","\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03","\x03\x03\x03\x03\x03\x03\x03\x03\x05\x03W\n\x03","\x03\x04\x03\x04\x03\x04\x03\x04\x03\x05\x03\x05","\x03\x05\x03\x05\x03\x06\x03\x06\x03\x07\x03\x07","\x03\x07\x03\x07\x03\x07\x03\x07\x03\x07\x03\x07","\x03\x07\x03\x07\x03\x07\x03\x07\x05\x07o\n\x07","\x03\b\x03\b\x03\b\x03\b\x03\b\x03\b\x03\b\x03\b\x03","\b\x03\b\x03\b\x03\b\x03\b\x03\b\x03\b\x03\b\x03\b\x03","\b\x03\b\x03\b\x05\b\x85\n\b\x03\t\x03\t\x03\t\x03\t","\x03\t\x06\t\x8c\n\t\r\t\x0e\t\x8d\x03\n\x03\n\x03\n","\x03\n\x03\n\x03\n\x03\n\x03\n\x03\n\x03\n\x03\n\x05","\n\x9b\n\n\x03\v\x03\v\x03\v\x03\v\x03\v","\x03\v\x03\v\x03\v\x03\v\x03\v\x03\v","\x03\v\x03\v\x03\v\x03\v\x03\v\x03\v","\x03\v\x03\v\x03\v\x03\v\x03\v\x03\v","\x03\v\x03\v\x03\v\x03\v\x03\v\x03\v","\x03\v\x05\v\xbb\n\v\x03\f\x03\f\x05\f\xbf","\n\f\x03\r\x03\r\x07\r\xc3\n\r\f\r\x0e\r\xc6\v\r\x03","\r\x03\r\x03\x0e\x03\x0e\x03\x0e\x03\x0e\x03\x0e","\x07\x0e\xcf\n\x0e\f\x0e\x0e\x0e\xd2\v\x0e\x03","\x0e\x03\x0e\x03\x0e\x03\x0e\x03\x0e\x03\x0e\x07","\x0e\xda\n\x0e\f\x0e\x0e\x0e\xdd\v\x0e\x03\x0e","\x03\x0e\x03\x0e\x03\x0e\x03\x0e\x03\x0e\x07\x0e","\xe5\n\x0e\f\x0e\x0e\x0e\xe8\v\x0e\x03\x0e\x03","\x0e\x07\x0e\xec\n\x0e\f\x0e\x0e\x0e\xef\v\x0e","\x03\x0e\x03\x0e\x03\x0e\x03\x0e\x05\x0e\xf5\n","\x0e\x03\x0f\x03\x0f\x03\x0f\x03\x0f\x03\x0f\x05","\x0f\xfc\n\x0f\x03\x10\x03\x10\x03\x10\x07\x10","\u0101\n\x10\f\x10\x0e\x10\u0104\v\x10\x03\x10\x03","\x10\x03\x11\x03\x11\x05\x11\u010a\n\x11\x03\x11","\x03\x11\x03\x11\x03\x11\x03\x11\x05\x11\u0111\n","\x11\x03\x11\x03\x11\x03\x11\x03\x11\x03\x11\x03","\x11\x05\x11\u0119\n\x11\x03\x11\x05\x11\u011c\n\x11","\x03\x11\x03\x11\x03\x11\x03\x11\x03\x11\x03\x11","\x03\x11\x03\x11\x03\x11\x07\x11\u0127\n\x11\f\x11","\x0e\x11\u012a\v\x11\x03\x12\x03\x12\x03\x13\x03","\x13\x03\x13\x02\x03 \x14\x02\x04\x06\b\n\f\x0e",'\x10\x12\x14\x16\x18\x1a\x1c\x1e "$\x02\x06\x03',"\x02\x1c\x1d\x03\x02\x1a\x1b\x04\x02$%()\x03\x02","\x1e#\x02\u0144\x02&\x03\x02\x02\x02\x04V\x03\x02","\x02\x02\x06X\x03\x02\x02\x02\b\\\x03\x02\x02\x02","\n`\x03\x02\x02\x02\fn\x03\x02\x02\x02\x0e\x84\x03","\x02\x02\x02\x10\x8b\x03\x02\x02\x02\x12\x9a\x03","\x02\x02\x02\x14\xba\x03\x02\x02\x02\x16\xbe\x03","\x02\x02\x02\x18\xc4\x03\x02\x02\x02\x1a\xf4\x03","\x02\x02\x02\x1c\xfb\x03\x02\x02\x02\x1e\u0102\x03",'\x02\x02\x02 \u011b\x03\x02\x02\x02"\u012b\x03\x02',"\x02\x02$\u012d\x03\x02\x02\x02&*\x05\x06\x04\x02","')\x05\x04\x03\x02('\x03\x02\x02\x02),\x03\x02","\x02\x02*(\x03\x02\x02\x02*+\x03\x02\x02\x02+\x03","\x03\x02\x02\x02,*\x03\x02\x02\x02-W\x05\f\x07\x02","./\x05\x0e\b\x02/0\x05\x10\t\x0201\x07\x03\x02\x02","1W\x03\x02\x02\x0223\x05\x0e\b\x0234\x07\x03\x02","\x024W\x03\x02\x02\x0256\x07\x04\x02\x0267\x07)","\x02\x0278\x05\x18\r\x0289\x07\x05\x02\x029W\x03","\x02\x02\x02:;\x07\x04\x02\x02;<\x07)\x02\x02<=","\x07\x06\x02\x02=>\x07\x07\x02\x02>?\x05\x18\r\x02","?@\x07\x05\x02\x02@W\x03\x02\x02\x02AB\x07\x04\x02","\x02BC\x07)\x02\x02CD\x07\x06\x02\x02DE\x05\x18","\r\x02EF\x07\x07\x02\x02FG\x05\x18\r\x02GH\x07\x05","\x02\x02HW\x03\x02\x02\x02IW\x05\x12\n\x02JK\x07","\b\x02\x02KL\x07\x06\x02\x02LM\x07)\x02\x02MN\x07","\t\x02\x02NO\x07(\x02\x02OP\x07\x07\x02\x02PW\x05","\x12\n\x02QR\x07\n\x02\x02RS\x05\x16\f\x02ST\x07\x05","\x02\x02TW\x03\x02\x02\x02UW\x05\b\x05\x02V-\x03","\x02\x02\x02V.\x03\x02\x02\x02V2\x03\x02\x02\x02","V5\x03\x02\x02\x02V:\x03\x02\x02\x02VA\x03\x02\x02","\x02VI\x03\x02\x02\x02VJ\x03\x02\x02\x02VQ\x03\x02","\x02\x02VU\x03\x02\x02\x02W\x05\x03\x02\x02\x02","XY\x07\v\x02\x02YZ\x07%\x02\x02Z[\x07\x05\x02","\x02[\x07\x03\x02\x02\x02\\]\x07\f\x02\x02]^\x05","\n\x06\x02^_\x07\x05\x02\x02_\t\x03\x02\x02\x02","`a\x07+\x02\x02a\v\x03\x02\x02\x02bc\x07\r\x02","\x02cd\x07)\x02\x02de\x07\x0e\x02\x02ef\x07(\x02","\x02fg\x07\x0f\x02\x02go\x07\x05\x02\x02hi\x07\x10","\x02\x02ij\x07)\x02\x02jk\x07\x0e\x02\x02kl\x07","(\x02\x02lm\x07\x0f\x02\x02mo\x07\x05\x02\x02nb","\x03\x02\x02\x02nh\x03\x02\x02\x02o\r\x03\x02\x02","\x02pq\x07\x11\x02\x02qr\x07)\x02\x02rs\x05\x18","\r\x02st\x07\x12\x02\x02t\x85\x03\x02\x02\x02uv","\x07\x11\x02\x02vw\x07)\x02\x02wx\x07\x06\x02\x02","xy\x07\x07\x02\x02yz\x05\x18\r\x02z{\x07\x12\x02","\x02{\x85\x03\x02\x02\x02|}\x07\x11\x02\x02}~\x07",")\x02\x02~\x7f\x07\x06\x02\x02\x7f\x80\x05\x18","\r\x02\x80\x81\x07\x07\x02\x02\x81\x82\x05\x18","\r\x02\x82\x83\x07\x12\x02\x02\x83\x85\x03\x02","\x02\x02\x84p\x03\x02\x02\x02\x84u\x03\x02\x02","\x02\x84|\x03\x02\x02\x02\x85\x0f\x03\x02\x02","\x02\x86\x8c\x05\x14\v\x02\x87\x88\x07\n\x02","\x02\x88\x89\x05\x18\r\x02\x89\x8a\x07\x05\x02","\x02\x8a\x8c\x03\x02\x02\x02\x8b\x86\x03\x02\x02","\x02\x8b\x87\x03\x02\x02\x02\x8c\x8d\x03\x02\x02","\x02\x8d\x8b\x03\x02\x02\x02\x8d\x8e\x03\x02\x02","\x02\x8e\x11\x03\x02\x02\x02\x8f\x9b\x05\x14\v","\x02\x90\x91\x07\x13\x02\x02\x91\x92\x05\x1c\x0f","\x02\x92\x93\x07\x14\x02\x02\x93\x94\x05\x1c\x0f","\x02\x94\x95\x07\x05\x02\x02\x95\x9b\x03\x02\x02","\x02\x96\x97\x07\x15\x02\x02\x97\x98\x05\x1c\x0f","\x02\x98\x99\x07\x05\x02\x02\x99\x9b\x03\x02\x02","\x02\x9a\x8f\x03\x02\x02\x02\x9a\x90\x03\x02\x02","\x02\x9a\x96\x03\x02\x02\x02\x9b\x13\x03\x02\x02","\x02\x9c\x9d\x07\x16\x02\x02\x9d\x9e\x07\x06\x02","\x02\x9e\x9f\x05\x1e\x10\x02\x9f\xa0\x07\x07\x02","\x02\xa0\xa1\x05\x1c\x0f\x02\xa1\xa2\x07\x05\x02","\x02\xa2\xbb\x03\x02\x02\x02\xa3\xa4\x07\x17\x02","\x02\xa4\xa5\x05\x1c\x0f\x02\xa5\xa6\x07\x18\x02","\x02\xa6\xa7\x05\x1c\x0f\x02\xa7\xa8\x07\x05\x02","\x02\xa8\xbb\x03\x02\x02\x02\xa9\xaa\x07)\x02","\x02\xaa\xab\x05\x16\f\x02\xab\xac\x07\x05\x02","\x02\xac\xbb\x03\x02\x02\x02\xad\xae\x07)\x02","\x02\xae\xaf\x07\x06\x02\x02\xaf\xb0\x07\x07\x02","\x02\xb0\xb1\x05\x16\f\x02\xb1\xb2\x07\x05\x02","\x02\xb2\xbb\x03\x02\x02\x02\xb3\xb4\x07)\x02","\x02\xb4\xb5\x07\x06\x02\x02\xb5\xb6\x05\x1e\x10","\x02\xb6\xb7\x07\x07\x02\x02\xb7\xb8\x05\x16\f","\x02\xb8\xb9\x07\x05\x02\x02\xb9\xbb\x03\x02\x02","\x02\xba\x9c\x03\x02\x02\x02\xba\xa3\x03\x02\x02","\x02\xba\xa9\x03\x02\x02\x02\xba\xad\x03\x02\x02","\x02\xba\xb3\x03\x02\x02\x02\xbb\x15\x03\x02\x02","\x02\xbc\xbf\x05\x18\r\x02\xbd\xbf\x05\x1a\x0e","\x02\xbe\xbc\x03\x02\x02\x02\xbe\xbd\x03\x02\x02","\x02\xbf\x17\x03\x02\x02\x02\xc0\xc1\x07)\x02","\x02\xc1\xc3\x07\x18\x02\x02\xc2\xc0\x03\x02\x02","\x02\xc3\xc6\x03\x02\x02\x02\xc4\xc2\x03\x02\x02","\x02\xc4\xc5\x03\x02\x02\x02\xc5\xc7\x03\x02\x02","\x02\xc6\xc4\x03\x02\x02\x02\xc7\xc8\x07)\x02","\x02\xc8\x19\x03\x02\x02\x02\xc9\xca\x07)\x02","\x02\xca\xcb\x07\x0e\x02\x02\xcb\xcc\x07(\x02","\x02\xcc\xcd\x07\x0f\x02\x02\xcd\xcf\x07\x18\x02","\x02\xce\xc9\x03\x02\x02\x02\xcf\xd2\x03\x02\x02","\x02\xd0\xce\x03\x02\x02\x02\xd0\xd1\x03\x02\x02","\x02\xd1\xd3\x03\x02\x02\x02\xd2\xd0\x03\x02\x02","\x02\xd3\xf5\x07)\x02\x02\xd4\xd5\x07)\x02\x02","\xd5\xd6\x07\x0e\x02\x02\xd6\xd7\x07(\x02\x02","\xd7\xd8\x07\x0f\x02\x02\xd8\xda\x07\x18\x02\x02","\xd9\xd4\x03\x02\x02\x02\xda\xdd\x03\x02\x02\x02","\xdb\xd9\x03\x02\x02\x02\xdb\xdc\x03\x02\x02\x02","\xdc\xde\x03\x02\x02\x02\xdd\xdb\x03\x02\x02\x02","\xde\xdf\x07)\x02\x02\xdf\xe0\x07\x0e\x02\x02","\xe0\xe1\x07(\x02\x02\xe1\xf5\x07\x0f\x02\x02","\xe2\xe3\x07)\x02\x02\xe3\xe5\x07\x18\x02\x02","\xe4\xe2\x03\x02\x02\x02\xe5\xe8\x03\x02\x02\x02","\xe6\xe4\x03\x02\x02\x02\xe6\xe7\x03\x02\x02\x02","\xe7\xe9\x03\x02\x02\x02\xe8\xe6\x03\x02\x02\x02","\xe9\xea\x07)\x02\x02\xea\xec\x07\x18\x02\x02","\xeb\xe6\x03\x02\x02\x02\xec\xef\x03\x02\x02\x02","\xed\xeb\x03\x02\x02\x02\xed\xee\x03\x02\x02\x02","\xee\xf0\x03\x02\x02\x02\xef\xed\x03\x02\x02\x02","\xf0\xf1\x07)\x02\x02\xf1\xf2\x07\x0e\x02\x02","\xf2\xf3\x07(\x02\x02\xf3\xf5\x07\x0f\x02\x02","\xf4\xd0\x03\x02\x02\x02\xf4\xdb\x03\x02\x02\x02","\xf4\xed\x03\x02\x02\x02\xf5\x1b\x03\x02\x02\x02","\xf6\xfc\x07)\x02\x02\xf7\xf8\x07)\x02\x02\xf8","\xf9\x07\x0e\x02\x02\xf9\xfa\x07(\x02\x02\xfa","\xfc\x07\x0f\x02\x02\xfb\xf6\x03\x02\x02\x02\xfb","\xf7\x03\x02\x02\x02\xfc\x1d\x03\x02\x02\x02\xfd","\xfe\x05 \x11\x02\xfe\xff\x07\x18\x02\x02\xff","\u0101\x03\x02\x02\x02\u0100\xfd\x03\x02\x02\x02\u0101","\u0104\x03\x02\x02\x02\u0102\u0100\x03\x02\x02\x02\u0102","\u0103\x03\x02\x02\x02\u0103\u0105\x03\x02\x02\x02\u0104","\u0102\x03\x02\x02\x02\u0105\u0106\x05 \x11\x02\u0106","\x1f\x03\x02\x02\x02\u0107\u0109\b\x11\x01\x02\u0108","\u010a\t\x02\x02\x02\u0109\u0108\x03\x02\x02\x02\u0109","\u010a\x03\x02\x02\x02\u010a\u010b\x03\x02\x02\x02\u010b","\u010c\x07\x06\x02\x02\u010c\u010d\x05 \x11\x02\u010d","\u010e\x07\x07\x02\x02\u010e\u011c\x03\x02\x02\x02\u010f","\u0111\t\x02\x02\x02\u0110\u010f\x03\x02\x02\x02\u0110","\u0111\x03\x02\x02\x02\u0111\u0112\x03\x02\x02\x02\u0112","\u0113\x05$\x13\x02\u0113\u0114\x07\x06\x02\x02\u0114","\u0115\x05 \x11\x02\u0115\u0116\x07\x07\x02\x02\u0116","\u011c\x03\x02\x02\x02\u0117\u0119\t\x02\x02\x02\u0118","\u0117\x03\x02\x02\x02\u0118\u0119\x03\x02\x02\x02\u0119",'\u011a\x03\x02\x02\x02\u011a\u011c\x05"\x12\x02\u011b',"\u0107\x03\x02\x02\x02\u011b\u0110\x03\x02\x02\x02\u011b","\u0118\x03\x02\x02\x02\u011c\u0128\x03\x02\x02\x02\u011d","\u011e\f\b\x02\x02\u011e\u011f\x07\x19\x02\x02\u011f\u0127","\x05 \x11\t\u0120\u0121\f\x07\x02\x02\u0121\u0122\t\x03","\x02\x02\u0122\u0127\x05 \x11\b\u0123\u0124\f\x06\x02\x02","\u0124\u0125\t\x02\x02\x02\u0125\u0127\x05 \x11\x07\u0126","\u011d\x03\x02\x02\x02\u0126\u0120\x03\x02\x02\x02\u0126","\u0123\x03\x02\x02\x02\u0127\u012a\x03\x02\x02\x02\u0128","\u0126\x03\x02\x02\x02\u0128\u0129\x03\x02\x02\x02\u0129","!\x03\x02\x02\x02\u012a\u0128\x03\x02\x02\x02\u012b","\u012c\t\x04\x02\x02\u012c#\x03\x02\x02\x02\u012d\u012e","\t\x05\x02\x02\u012e%\x03\x02\x02\x02\x19*Vn\x84\x8b","\x8d\x9a\xba\xbe\xc4\xd0\xdb\xe6\xed\xf4\xfb\u0102","\u0109\u0110\u0118\u011b\u0126\u0128"].join(""),atn=(new antlr4.atn.ATNDeserializer).deserialize(serializedATN),decisionsToDFA=atn.decisionToState.map(function(ds,index){return new antlr4.dfa.DFA(ds,index)}),sharedContextCache=new antlr4.PredictionContextCache,literalNames=[null,"'}'","'opaque'","';'","'('","')'","'if'","'=='","'barrier'","'OPENQASM'","'include'","'qreg'","'['","']'","'creg'","'gate'","'{'","'measure'","'->'","'reset'","'U'","'CX'","','","'^'","'*'","'/'","'+'","'-'","'sin'","'cos'","'tan'","'exp'","'ln'","'sqrt'","'pi'"],symbolicNames=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"PI","REAL","SUBREAL","EXPREAL","INT","ID","WS","FILENAME","COMMENT","LINE_COMMENT"],ruleNames=["mainprog","statement","version","include","filename","decl","gatedecl","goplist","qop","uop","anylist","idlist","mixedlist","argument","explist","exp","atom","unaryop"];function QASMParser(input){return antlr4.Parser.call(this,input),this._interp=new antlr4.atn.ParserATNSimulator(this,atn,decisionsToDFA,sharedContextCache),this.ruleNames=ruleNames,this.literalNames=literalNames,this.symbolicNames=symbolicNames,this}function MainprogContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_mainprog,this}function StatementContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_statement,this}function VersionContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_version,this}function IncludeContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_include,this}function FilenameContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_filename,this}function DeclContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_decl,this}function GatedeclContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_gatedecl,this}function GoplistContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_goplist,this}function QopContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_qop,this}function UopContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_uop,this}function AnylistContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_anylist,this}function IdlistContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_idlist,this}function MixedlistContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_mixedlist,this}function ArgumentContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_argument,this}function ExplistContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_explist,this}function ExpContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_exp,this}function AtomContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_atom,this}function UnaryopContext(parser,parent,invokingState){return void 0===parent&&(parent=null),null==invokingState&&(invokingState=-1),antlr4.ParserRuleContext.call(this,parent,invokingState),this.parser=parser,this.ruleIndex=QASMParser.RULE_unaryop,this}(QASMParser.prototype=Object.create(antlr4.Parser.prototype)).constructor=QASMParser,Object.defineProperty(QASMParser.prototype,"atn",{get:function(){return atn}}),QASMParser.EOF=antlr4.Token.EOF,QASMParser.T__0=1,QASMParser.T__1=2,QASMParser.T__2=3,QASMParser.T__3=4,QASMParser.T__4=5,QASMParser.T__5=6,QASMParser.T__6=7,QASMParser.T__7=8,QASMParser.T__8=9,QASMParser.T__9=10,QASMParser.T__10=11,QASMParser.T__11=12,QASMParser.T__12=13,QASMParser.T__13=14,QASMParser.T__14=15,QASMParser.T__15=16,QASMParser.T__16=17,QASMParser.T__17=18,QASMParser.T__18=19,QASMParser.T__19=20,QASMParser.T__20=21,QASMParser.T__21=22,QASMParser.T__22=23,QASMParser.T__23=24,QASMParser.T__24=25,QASMParser.T__25=26,QASMParser.T__26=27,QASMParser.T__27=28,QASMParser.T__28=29,QASMParser.T__29=30,QASMParser.T__30=31,QASMParser.T__31=32,QASMParser.T__32=33,QASMParser.PI=34,QASMParser.REAL=35,QASMParser.SUBREAL=36,QASMParser.EXPREAL=37,QASMParser.INT=38,QASMParser.ID=39,QASMParser.WS=40,QASMParser.FILENAME=41,QASMParser.COMMENT=42,QASMParser.LINE_COMMENT=43,QASMParser.RULE_mainprog=0,QASMParser.RULE_statement=1,QASMParser.RULE_version=2,QASMParser.RULE_include=3,QASMParser.RULE_filename=4,QASMParser.RULE_decl=5,QASMParser.RULE_gatedecl=6,QASMParser.RULE_goplist=7,QASMParser.RULE_qop=8,QASMParser.RULE_uop=9,QASMParser.RULE_anylist=10,QASMParser.RULE_idlist=11,QASMParser.RULE_mixedlist=12,QASMParser.RULE_argument=13,QASMParser.RULE_explist=14,QASMParser.RULE_exp=15,QASMParser.RULE_atom=16,QASMParser.RULE_unaryop=17,((MainprogContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=MainprogContext).prototype.version=function(){return this.getTypedRuleContext(VersionContext,0)},MainprogContext.prototype.statement=function(i){return void 0===i&&(i=null),null===i?this.getTypedRuleContexts(StatementContext):this.getTypedRuleContext(StatementContext,i)},MainprogContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterMainprog(this)},MainprogContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitMainprog(this)},QASMParser.MainprogContext=MainprogContext,QASMParser.prototype.mainprog=function(){var localctx=new MainprogContext(this,this._ctx,this.state);this.enterRule(localctx,0,QASMParser.RULE_mainprog);var _la=0;try{for(this.enterOuterAlt(localctx,1),this.state=36,this.version(),this.state=40,this._errHandler.sync(this),_la=this._input.LA(1);0==(-32&_la)&&0!=(1<<_la&(1<<QASMParser.T__1|1<<QASMParser.T__5|1<<QASMParser.T__7|1<<QASMParser.T__9|1<<QASMParser.T__10|1<<QASMParser.T__13|1<<QASMParser.T__14|1<<QASMParser.T__16|1<<QASMParser.T__18|1<<QASMParser.T__19|1<<QASMParser.T__20))||_la===QASMParser.ID;)this.state=37,this.statement(),this.state=42,this._errHandler.sync(this),_la=this._input.LA(1)}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((StatementContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=StatementContext).prototype.decl=function(){return this.getTypedRuleContext(DeclContext,0)},StatementContext.prototype.gatedecl=function(){return this.getTypedRuleContext(GatedeclContext,0)},StatementContext.prototype.goplist=function(){return this.getTypedRuleContext(GoplistContext,0)},StatementContext.prototype.ID=function(){return this.getToken(QASMParser.ID,0)},StatementContext.prototype.idlist=function(i){return void 0===i&&(i=null),null===i?this.getTypedRuleContexts(IdlistContext):this.getTypedRuleContext(IdlistContext,i)},StatementContext.prototype.qop=function(){return this.getTypedRuleContext(QopContext,0)},StatementContext.prototype.INT=function(){return this.getToken(QASMParser.INT,0)},StatementContext.prototype.anylist=function(){return this.getTypedRuleContext(AnylistContext,0)},StatementContext.prototype.include=function(){return this.getTypedRuleContext(IncludeContext,0)},StatementContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterStatement(this)},StatementContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitStatement(this)},QASMParser.StatementContext=StatementContext,QASMParser.prototype.statement=function(){var localctx=new StatementContext(this,this._ctx,this.state);this.enterRule(localctx,2,QASMParser.RULE_statement);try{switch(this.state=84,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,1,this._ctx)){case 1:this.enterOuterAlt(localctx,1),this.state=43,this.decl();break;case 2:this.enterOuterAlt(localctx,2),this.state=44,this.gatedecl(),this.state=45,this.goplist(),this.state=46,this.match(QASMParser.T__0);break;case 3:this.enterOuterAlt(localctx,3),this.state=48,this.gatedecl(),this.state=49,this.match(QASMParser.T__0);break;case 4:this.enterOuterAlt(localctx,4),this.state=51,this.match(QASMParser.T__1),this.state=52,this.match(QASMParser.ID),this.state=53,this.idlist(),this.state=54,this.match(QASMParser.T__2);break;case 5:this.enterOuterAlt(localctx,5),this.state=56,this.match(QASMParser.T__1),this.state=57,this.match(QASMParser.ID),this.state=58,this.match(QASMParser.T__3),this.state=59,this.match(QASMParser.T__4),this.state=60,this.idlist(),this.state=61,this.match(QASMParser.T__2);break;case 6:this.enterOuterAlt(localctx,6),this.state=63,this.match(QASMParser.T__1),this.state=64,this.match(QASMParser.ID),this.state=65,this.match(QASMParser.T__3),this.state=66,this.idlist(),this.state=67,this.match(QASMParser.T__4),this.state=68,this.idlist(),this.state=69,this.match(QASMParser.T__2);break;case 7:this.enterOuterAlt(localctx,7),this.state=71,this.qop();break;case 8:this.enterOuterAlt(localctx,8),this.state=72,this.match(QASMParser.T__5),this.state=73,this.match(QASMParser.T__3),this.state=74,this.match(QASMParser.ID),this.state=75,this.match(QASMParser.T__6),this.state=76,this.match(QASMParser.INT),this.state=77,this.match(QASMParser.T__4),this.state=78,this.qop();break;case 9:this.enterOuterAlt(localctx,9),this.state=79,this.match(QASMParser.T__7),this.state=80,this.anylist(),this.state=81,this.match(QASMParser.T__2);break;case 10:this.enterOuterAlt(localctx,10),this.state=83,this.include()}}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((VersionContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=VersionContext).prototype.REAL=function(){return this.getToken(QASMParser.REAL,0)},VersionContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterVersion(this)},VersionContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitVersion(this)},QASMParser.VersionContext=VersionContext,QASMParser.prototype.version=function(){var localctx=new VersionContext(this,this._ctx,this.state);this.enterRule(localctx,4,QASMParser.RULE_version);try{this.enterOuterAlt(localctx,1),this.state=86,this.match(QASMParser.T__8),this.state=87,this.match(QASMParser.REAL),this.state=88,this.match(QASMParser.T__2)}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((IncludeContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=IncludeContext).prototype.filename=function(){return this.getTypedRuleContext(FilenameContext,0)},IncludeContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterInclude(this)},IncludeContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitInclude(this)},QASMParser.IncludeContext=IncludeContext,QASMParser.prototype.include=function(){var localctx=new IncludeContext(this,this._ctx,this.state);this.enterRule(localctx,6,QASMParser.RULE_include);try{this.enterOuterAlt(localctx,1),this.state=90,this.match(QASMParser.T__9),this.state=91,this.filename(),this.state=92,this.match(QASMParser.T__2)}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((FilenameContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=FilenameContext).prototype.FILENAME=function(){return this.getToken(QASMParser.FILENAME,0)},FilenameContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterFilename(this)},FilenameContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitFilename(this)},QASMParser.FilenameContext=FilenameContext,QASMParser.prototype.filename=function(){var localctx=new FilenameContext(this,this._ctx,this.state);this.enterRule(localctx,8,QASMParser.RULE_filename);try{this.enterOuterAlt(localctx,1),this.state=94,this.match(QASMParser.FILENAME)}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((DeclContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=DeclContext).prototype.ID=function(){return this.getToken(QASMParser.ID,0)},DeclContext.prototype.INT=function(){return this.getToken(QASMParser.INT,0)},DeclContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterDecl(this)},DeclContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitDecl(this)},QASMParser.DeclContext=DeclContext,QASMParser.prototype.decl=function(){var localctx=new DeclContext(this,this._ctx,this.state);this.enterRule(localctx,10,QASMParser.RULE_decl);try{switch(this.state=108,this._errHandler.sync(this),this._input.LA(1)){case QASMParser.T__10:this.enterOuterAlt(localctx,1),this.state=96,this.match(QASMParser.T__10),this.state=97,this.match(QASMParser.ID),this.state=98,this.match(QASMParser.T__11),this.state=99,this.match(QASMParser.INT),this.state=100,this.match(QASMParser.T__12),this.state=101,this.match(QASMParser.T__2);break;case QASMParser.T__13:this.enterOuterAlt(localctx,2),this.state=102,this.match(QASMParser.T__13),this.state=103,this.match(QASMParser.ID),this.state=104,this.match(QASMParser.T__11),this.state=105,this.match(QASMParser.INT),this.state=106,this.match(QASMParser.T__12),this.state=107,this.match(QASMParser.T__2);break;default:throw new antlr4.error.NoViableAltException(this)}}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((GatedeclContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=GatedeclContext).prototype.ID=function(){return this.getToken(QASMParser.ID,0)},GatedeclContext.prototype.idlist=function(i){return void 0===i&&(i=null),null===i?this.getTypedRuleContexts(IdlistContext):this.getTypedRuleContext(IdlistContext,i)},GatedeclContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterGatedecl(this)},GatedeclContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitGatedecl(this)},QASMParser.GatedeclContext=GatedeclContext,QASMParser.prototype.gatedecl=function(){var localctx=new GatedeclContext(this,this._ctx,this.state);this.enterRule(localctx,12,QASMParser.RULE_gatedecl);try{switch(this.state=130,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,3,this._ctx)){case 1:this.enterOuterAlt(localctx,1),this.state=110,this.match(QASMParser.T__14),this.state=111,this.match(QASMParser.ID),this.state=112,this.idlist(),this.state=113,this.match(QASMParser.T__15);break;case 2:this.enterOuterAlt(localctx,2),this.state=115,this.match(QASMParser.T__14),this.state=116,this.match(QASMParser.ID),this.state=117,this.match(QASMParser.T__3),this.state=118,this.match(QASMParser.T__4),this.state=119,this.idlist(),this.state=120,this.match(QASMParser.T__15);break;case 3:this.enterOuterAlt(localctx,3),this.state=122,this.match(QASMParser.T__14),this.state=123,this.match(QASMParser.ID),this.state=124,this.match(QASMParser.T__3),this.state=125,this.idlist(),this.state=126,this.match(QASMParser.T__4),this.state=127,this.idlist(),this.state=128,this.match(QASMParser.T__15)}}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((GoplistContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=GoplistContext).prototype.uop=function(i){return void 0===i&&(i=null),null===i?this.getTypedRuleContexts(UopContext):this.getTypedRuleContext(UopContext,i)},GoplistContext.prototype.idlist=function(i){return void 0===i&&(i=null),null===i?this.getTypedRuleContexts(IdlistContext):this.getTypedRuleContext(IdlistContext,i)},GoplistContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterGoplist(this)},GoplistContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitGoplist(this)},QASMParser.GoplistContext=GoplistContext,QASMParser.prototype.goplist=function(){var localctx=new GoplistContext(this,this._ctx,this.state);this.enterRule(localctx,14,QASMParser.RULE_goplist);var _la;try{this.enterOuterAlt(localctx,1),this.state=137,this._errHandler.sync(this),this._input.LA(1);do{switch(this.state=137,this._errHandler.sync(this),this._input.LA(1)){case QASMParser.T__19:case QASMParser.T__20:case QASMParser.ID:this.state=132,this.uop();break;case QASMParser.T__7:this.state=133,this.match(QASMParser.T__7),this.state=134,this.idlist(),this.state=135,this.match(QASMParser.T__2);break;default:throw new antlr4.error.NoViableAltException(this)}this.state=139,this._errHandler.sync(this),_la=this._input.LA(1)}while(0==(_la-8&-32)&&0!=(1<<_la-8&(1<<QASMParser.T__7-8|1<<QASMParser.T__19-8|1<<QASMParser.T__20-8|1<<QASMParser.ID-8)))}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((QopContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=QopContext).prototype.uop=function(){return this.getTypedRuleContext(UopContext,0)},QopContext.prototype.argument=function(i){return void 0===i&&(i=null),null===i?this.getTypedRuleContexts(ArgumentContext):this.getTypedRuleContext(ArgumentContext,i)},QopContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterQop(this)},QopContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitQop(this)},QASMParser.QopContext=QopContext,QASMParser.prototype.qop=function(){var localctx=new QopContext(this,this._ctx,this.state);this.enterRule(localctx,16,QASMParser.RULE_qop);try{switch(this.state=152,this._errHandler.sync(this),this._input.LA(1)){case QASMParser.T__19:case QASMParser.T__20:case QASMParser.ID:this.enterOuterAlt(localctx,1),this.state=141,this.uop();break;case QASMParser.T__16:this.enterOuterAlt(localctx,2),this.state=142,this.match(QASMParser.T__16),this.state=143,this.argument(),this.state=144,this.match(QASMParser.T__17),this.state=145,this.argument(),this.state=146,this.match(QASMParser.T__2);break;case QASMParser.T__18:this.enterOuterAlt(localctx,3),this.state=148,this.match(QASMParser.T__18),this.state=149,this.argument(),this.state=150,this.match(QASMParser.T__2);break;default:throw new antlr4.error.NoViableAltException(this)}}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((UopContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=UopContext).prototype.explist=function(){return this.getTypedRuleContext(ExplistContext,0)},UopContext.prototype.argument=function(i){return void 0===i&&(i=null),null===i?this.getTypedRuleContexts(ArgumentContext):this.getTypedRuleContext(ArgumentContext,i)},UopContext.prototype.ID=function(){return this.getToken(QASMParser.ID,0)},UopContext.prototype.anylist=function(){return this.getTypedRuleContext(AnylistContext,0)},UopContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterUop(this)},UopContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitUop(this)},QASMParser.UopContext=UopContext,QASMParser.prototype.uop=function(){var localctx=new UopContext(this,this._ctx,this.state);this.enterRule(localctx,18,QASMParser.RULE_uop);try{switch(this.state=184,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,7,this._ctx)){case 1:this.enterOuterAlt(localctx,1),this.state=154,this.match(QASMParser.T__19),this.state=155,this.match(QASMParser.T__3),this.state=156,this.explist(),this.state=157,this.match(QASMParser.T__4),this.state=158,this.argument(),this.state=159,this.match(QASMParser.T__2);break;case 2:this.enterOuterAlt(localctx,2),this.state=161,this.match(QASMParser.T__20),this.state=162,this.argument(),this.state=163,this.match(QASMParser.T__21),this.state=164,this.argument(),this.state=165,this.match(QASMParser.T__2);break;case 3:this.enterOuterAlt(localctx,3),this.state=167,this.match(QASMParser.ID),this.state=168,this.anylist(),this.state=169,this.match(QASMParser.T__2);break;case 4:this.enterOuterAlt(localctx,4),this.state=171,this.match(QASMParser.ID),this.state=172,this.match(QASMParser.T__3),this.state=173,this.match(QASMParser.T__4),this.state=174,this.anylist(),this.state=175,this.match(QASMParser.T__2);break;case 5:this.enterOuterAlt(localctx,5),this.state=177,this.match(QASMParser.ID),this.state=178,this.match(QASMParser.T__3),this.state=179,this.explist(),this.state=180,this.match(QASMParser.T__4),this.state=181,this.anylist(),this.state=182,this.match(QASMParser.T__2)}}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((AnylistContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=AnylistContext).prototype.idlist=function(){return this.getTypedRuleContext(IdlistContext,0)},AnylistContext.prototype.mixedlist=function(){return this.getTypedRuleContext(MixedlistContext,0)},AnylistContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterAnylist(this)},AnylistContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitAnylist(this)},QASMParser.AnylistContext=AnylistContext,QASMParser.prototype.anylist=function(){var localctx=new AnylistContext(this,this._ctx,this.state);this.enterRule(localctx,20,QASMParser.RULE_anylist);try{switch(this.state=188,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,8,this._ctx)){case 1:this.enterOuterAlt(localctx,1),this.state=186,this.idlist();break;case 2:this.enterOuterAlt(localctx,2),this.state=187,this.mixedlist()}}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((IdlistContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=IdlistContext).prototype.ID=function(i){return void 0===i&&(i=null),null===i?this.getTokens(QASMParser.ID):this.getToken(QASMParser.ID,i)},IdlistContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterIdlist(this)},IdlistContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitIdlist(this)},QASMParser.IdlistContext=IdlistContext,QASMParser.prototype.idlist=function(){var localctx=new IdlistContext(this,this._ctx,this.state);this.enterRule(localctx,22,QASMParser.RULE_idlist);try{this.enterOuterAlt(localctx,1),this.state=194,this._errHandler.sync(this);for(var _alt=this._interp.adaptivePredict(this._input,9,this._ctx);2!=_alt&&_alt!=antlr4.atn.ATN.INVALID_ALT_NUMBER;)1===_alt&&(this.state=190,this.match(QASMParser.ID),this.state=191,this.match(QASMParser.T__21)),this.state=196,this._errHandler.sync(this),_alt=this._interp.adaptivePredict(this._input,9,this._ctx);this.state=197,this.match(QASMParser.ID)}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((MixedlistContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=MixedlistContext).prototype.ID=function(i){return void 0===i&&(i=null),null===i?this.getTokens(QASMParser.ID):this.getToken(QASMParser.ID,i)},MixedlistContext.prototype.INT=function(i){return void 0===i&&(i=null),null===i?this.getTokens(QASMParser.INT):this.getToken(QASMParser.INT,i)},MixedlistContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterMixedlist(this)},MixedlistContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitMixedlist(this)},QASMParser.MixedlistContext=MixedlistContext,QASMParser.prototype.mixedlist=function(){var localctx=new MixedlistContext(this,this._ctx,this.state);this.enterRule(localctx,24,QASMParser.RULE_mixedlist);try{switch(this.state=242,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,14,this._ctx)){case 1:this.enterOuterAlt(localctx,1),this.state=206,this._errHandler.sync(this);for(var _alt=this._interp.adaptivePredict(this._input,10,this._ctx);2!=_alt&&_alt!=antlr4.atn.ATN.INVALID_ALT_NUMBER;)1===_alt&&(this.state=199,this.match(QASMParser.ID),this.state=200,this.match(QASMParser.T__11),this.state=201,this.match(QASMParser.INT),this.state=202,this.match(QASMParser.T__12),this.state=203,this.match(QASMParser.T__21)),this.state=208,this._errHandler.sync(this),_alt=this._interp.adaptivePredict(this._input,10,this._ctx);this.state=209,this.match(QASMParser.ID);break;case 2:this.enterOuterAlt(localctx,2),this.state=217,this._errHandler.sync(this);for(_alt=this._interp.adaptivePredict(this._input,11,this._ctx);2!=_alt&&_alt!=antlr4.atn.ATN.INVALID_ALT_NUMBER;)1===_alt&&(this.state=210,this.match(QASMParser.ID),this.state=211,this.match(QASMParser.T__11),this.state=212,this.match(QASMParser.INT),this.state=213,this.match(QASMParser.T__12),this.state=214,this.match(QASMParser.T__21)),this.state=219,this._errHandler.sync(this),_alt=this._interp.adaptivePredict(this._input,11,this._ctx);this.state=220,this.match(QASMParser.ID),this.state=221,this.match(QASMParser.T__11),this.state=222,this.match(QASMParser.INT),this.state=223,this.match(QASMParser.T__12);break;case 3:this.enterOuterAlt(localctx,3),this.state=235,this._errHandler.sync(this);for(_alt=this._interp.adaptivePredict(this._input,13,this._ctx);2!=_alt&&_alt!=antlr4.atn.ATN.INVALID_ALT_NUMBER;){if(1===_alt){this.state=228,this._errHandler.sync(this);for(_alt=this._interp.adaptivePredict(this._input,12,this._ctx);2!=_alt&&_alt!=antlr4.atn.ATN.INVALID_ALT_NUMBER;)1===_alt&&(this.state=224,this.match(QASMParser.ID),this.state=225,this.match(QASMParser.T__21)),this.state=230,this._errHandler.sync(this),_alt=this._interp.adaptivePredict(this._input,12,this._ctx);this.state=231,this.match(QASMParser.ID),this.state=232,this.match(QASMParser.T__21)}this.state=237,this._errHandler.sync(this),_alt=this._interp.adaptivePredict(this._input,13,this._ctx)}this.state=238,this.match(QASMParser.ID),this.state=239,this.match(QASMParser.T__11),this.state=240,this.match(QASMParser.INT),this.state=241,this.match(QASMParser.T__12)}}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((ArgumentContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=ArgumentContext).prototype.ID=function(){return this.getToken(QASMParser.ID,0)},ArgumentContext.prototype.INT=function(){return this.getToken(QASMParser.INT,0)},ArgumentContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterArgument(this)},ArgumentContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitArgument(this)},QASMParser.ArgumentContext=ArgumentContext,QASMParser.prototype.argument=function(){var localctx=new ArgumentContext(this,this._ctx,this.state);this.enterRule(localctx,26,QASMParser.RULE_argument);try{switch(this.state=249,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,15,this._ctx)){case 1:this.enterOuterAlt(localctx,1),this.state=244,this.match(QASMParser.ID);break;case 2:this.enterOuterAlt(localctx,2),this.state=245,this.match(QASMParser.ID),this.state=246,this.match(QASMParser.T__11),this.state=247,this.match(QASMParser.INT),this.state=248,this.match(QASMParser.T__12)}}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((ExplistContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=ExplistContext).prototype.exp=function(i){return void 0===i&&(i=null),null===i?this.getTypedRuleContexts(ExpContext):this.getTypedRuleContext(ExpContext,i)},ExplistContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterExplist(this)},ExplistContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitExplist(this)},QASMParser.ExplistContext=ExplistContext,QASMParser.prototype.explist=function(){var localctx=new ExplistContext(this,this._ctx,this.state);this.enterRule(localctx,28,QASMParser.RULE_explist);try{this.enterOuterAlt(localctx,1),this.state=256,this._errHandler.sync(this);for(var _alt=this._interp.adaptivePredict(this._input,16,this._ctx);2!=_alt&&_alt!=antlr4.atn.ATN.INVALID_ALT_NUMBER;)1===_alt&&(this.state=251,this.exp(0),this.state=252,this.match(QASMParser.T__21)),this.state=258,this._errHandler.sync(this),_alt=this._interp.adaptivePredict(this._input,16,this._ctx);this.state=259,this.exp(0)}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((ExpContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=ExpContext).prototype.exp=function(i){return void 0===i&&(i=null),null===i?this.getTypedRuleContexts(ExpContext):this.getTypedRuleContext(ExpContext,i)},ExpContext.prototype.unaryop=function(){return this.getTypedRuleContext(UnaryopContext,0)},ExpContext.prototype.atom=function(){return this.getTypedRuleContext(AtomContext,0)},ExpContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterExp(this)},ExpContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitExp(this)},QASMParser.prototype.exp=function(_p){void 0===_p&&(_p=0);var _parentctx=this._ctx,_parentState=this.state,localctx=new ExpContext(this,this._ctx,_parentState);this.enterRecursionRule(localctx,30,QASMParser.RULE_exp,_p);var _la=0;try{this.enterOuterAlt(localctx,1),this.state=281,this._errHandler.sync(this);var la_=this._interp.adaptivePredict(this._input,20,this._ctx);switch(la_){case 1:this.state=263,this._errHandler.sync(this),(_la=this._input.LA(1))!==QASMParser.T__25&&_la!==QASMParser.T__26||(this.state=262,(_la=this._input.LA(1))!==QASMParser.T__25&&_la!==QASMParser.T__26?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())),this.state=265,this.match(QASMParser.T__3),this.state=266,this.exp(0),this.state=267,this.match(QASMParser.T__4);break;case 2:this.state=270,this._errHandler.sync(this),(_la=this._input.LA(1))!==QASMParser.T__25&&_la!==QASMParser.T__26||(this.state=269,(_la=this._input.LA(1))!==QASMParser.T__25&&_la!==QASMParser.T__26?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())),this.state=272,this.unaryop(),this.state=273,this.match(QASMParser.T__3),this.state=274,this.exp(0),this.state=275,this.match(QASMParser.T__4);break;case 3:this.state=278,this._errHandler.sync(this),(_la=this._input.LA(1))!==QASMParser.T__25&&_la!==QASMParser.T__26||(this.state=277,(_la=this._input.LA(1))!==QASMParser.T__25&&_la!==QASMParser.T__26?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())),this.state=280,this.atom()}this._ctx.stop=this._input.LT(-1),this.state=294,this._errHandler.sync(this);for(var _alt=this._interp.adaptivePredict(this._input,22,this._ctx);2!=_alt&&_alt!=antlr4.atn.ATN.INVALID_ALT_NUMBER;){if(1===_alt)switch(null!==this._parseListeners&&this.triggerExitRuleEvent(),this.state=292,this._errHandler.sync(this),la_=this._interp.adaptivePredict(this._input,21,this._ctx)){case 1:if(localctx=new ExpContext(this,_parentctx,_parentState),this.pushNewRecursionContext(localctx,30,QASMParser.RULE_exp),this.state=283,!this.precpred(this._ctx,6))throw new antlr4.error.FailedPredicateException(this,"this.precpred(this._ctx, 6)");this.state=284,this.match(QASMParser.T__22),this.state=285,this.exp(7);break;case 2:if(localctx=new ExpContext(this,_parentctx,_parentState),this.pushNewRecursionContext(localctx,30,QASMParser.RULE_exp),this.state=286,!this.precpred(this._ctx,5))throw new antlr4.error.FailedPredicateException(this,"this.precpred(this._ctx, 5)");this.state=287,(_la=this._input.LA(1))!==QASMParser.T__23&&_la!==QASMParser.T__24?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=288,this.exp(6);break;case 3:if(localctx=new ExpContext(this,_parentctx,_parentState),this.pushNewRecursionContext(localctx,30,QASMParser.RULE_exp),this.state=289,!this.precpred(this._ctx,4))throw new antlr4.error.FailedPredicateException(this,"this.precpred(this._ctx, 4)");this.state=290,(_la=this._input.LA(1))!==QASMParser.T__25&&_la!==QASMParser.T__26?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=291,this.exp(5)}this.state=296,this._errHandler.sync(this),_alt=this._interp.adaptivePredict(this._input,22,this._ctx)}}catch(error){if(!(error instanceof antlr4.error.RecognitionException))throw error;localctx.exception=error,this._errHandler.reportError(this,error),this._errHandler.recover(this,error)}finally{this.unrollRecursionContexts(_parentctx)}return localctx},((AtomContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=AtomContext).prototype.INT=function(){return this.getToken(QASMParser.INT,0)},AtomContext.prototype.REAL=function(){return this.getToken(QASMParser.REAL,0)},AtomContext.prototype.PI=function(){return this.getToken(QASMParser.PI,0)},AtomContext.prototype.ID=function(){return this.getToken(QASMParser.ID,0)},AtomContext.prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterAtom(this)},AtomContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitAtom(this)},QASMParser.AtomContext=AtomContext,QASMParser.prototype.atom=function(){var localctx=new AtomContext(this,this._ctx,this.state);this.enterRule(localctx,32,QASMParser.RULE_atom);var _la;try{this.enterOuterAlt(localctx,1),this.state=297,0!=((_la=this._input.LA(1))-34&-32)||0==(1<<_la-34&(1<<QASMParser.PI-34|1<<QASMParser.REAL-34|1<<QASMParser.INT-34|1<<QASMParser.ID-34))?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},((UnaryopContext.prototype=Object.create(antlr4.ParserRuleContext.prototype)).constructor=UnaryopContext).prototype.enterRule=function(listener){listener instanceof QASMListener&&listener.enterUnaryop(this)},UnaryopContext.prototype.exitRule=function(listener){listener instanceof QASMListener&&listener.exitUnaryop(this)},QASMParser.UnaryopContext=UnaryopContext,QASMParser.prototype.unaryop=function(){var localctx=new UnaryopContext(this,this._ctx,this.state);this.enterRule(localctx,34,QASMParser.RULE_unaryop);var _la;try{this.enterOuterAlt(localctx,1),this.state=299,0!=((_la=this._input.LA(1))-28&-32)||0==(1<<_la-28&(1<<QASMParser.T__27-28|1<<QASMParser.T__28-28|1<<QASMParser.T__29-28|1<<QASMParser.T__30-28|1<<QASMParser.T__31-28|1<<QASMParser.T__32-28))?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(re){if(!(re instanceof antlr4.error.RecognitionException))throw re;localctx.exception=re,this._errHandler.reportError(this,re),this._errHandler.recover(this,re)}finally{this.exitRule()}return localctx},QASMParser.prototype.sempred=function(localctx,ruleIndex,predIndex){switch(ruleIndex){case 15:return this.exp_sempred(localctx,predIndex);default:throw"No predicate with index:"+ruleIndex}},QASMParser.prototype.exp_sempred=function(localctx,predIndex){switch(predIndex){case 0:return this.precpred(this._ctx,6);case 1:return this.precpred(this._ctx,5);case 2:return this.precpred(this._ctx,4);default:throw"No predicate with index:"+predIndex}},exports.QASMParser=QASMParser},{"./QASMListener":3,"antlr4/index":47}],5:[function(require,module,exports){function formatComplex2(re,im,options){var sre=formatFloat(re,options=options||{}),opt=JSON.parse(JSON.stringify(options));return opt.plusChar="+",sre+formatFloat(im,opt)+(options.iotaChar?options.iotaChar:"i")}function isObject(item){return item&&"object"==typeof item&&!Array.isArray(item)}function qubitLetter(n,max){maxN=max||n+1,0<maxN&&--maxN,maxLen=maxN.toString(26).length;for(var nStr=n.toString(26);nStr.length<maxLen;)nStr="0"+nStr;for(var res="",i=0;i<nStr.length;i++){var code=nStr.charCodeAt(i);res+=String.fromCharCode(code<97?code+49:code+10)}return res}function QuantumCircuit(numQubits){this.basicGates={id:{description:"Single qubit identity gate",matrix:[[1,0],[0,1]],params:[],drawingInfo:{connectors:["box"],label:"ID"},exportInfo:{quil:{name:"I"},cirq:{name:"I",notTfqSupported:!0},quest:{name:"compactUnitary",params:{alpha:"(Complex) { .real = 1, .imag = 0 }",beta:"(Complex) {.real = 0, .imag = 0}"}},qsharp:{name:"I"},qiskit:{name:"id"},braket:{name:"i"},aqasm:{name:"I"},cudaq:{name:"i",matrix:"[[1, 0], [0, 1]]"},quirk:{name:"\u2026",controlQubits:0,targetQubits:1}}},x:{description:'Pauli X (PI rotation over X-axis) aka "NOT" gate',matrix:[[0,1],[1,0]],params:[],drawingInfo:{connectors:["box"],label:"X"},exportInfo:{quil:{name:"X"},cirq:{name:"X"},quest:{name:"pauliX"},qsharp:{name:"X"},quirk:{name:"X",controlQubits:0,targetQubits:1},braket:{name:"x"},aqasm:{name:"X"},ionq:{names:["x","not"]},cudaq:{name:"x"}}},y:{description:"Pauli Y (PI rotation over Y-axis)",matrix:[[0,"-i"],["i",0]],params:[],drawingInfo:{connectors:["box"],label:"Y"},exportInfo:{quil:{name:"Y"},cirq:{name:"Y"},quest:{name:"pauliY"},qsharp:{name:"Y"},quirk:{name:"Y",controlQubits:0,targetQubits:1},braket:{name:"y"},aqasm:{name:"Y"},ionq:{name:"y"},cudaq:{name:"y"}}},z:{description:"Pauli Z (PI rotation over Z-axis)",matrix:[[1,0],[0,-1]],params:[],drawingInfo:{connectors:["box"],label:"Z"},exportInfo:{quil:{name:"Z"},cirq:{name:"Z"},quest:{name:"pauliZ"},qsharp:{name:"Z"},quirk:{name:"Z",controlQubits:0,targetQubits:1},braket:{name:"z"},aqasm:{name:"Z"},ionq:{name:"z"},cudaq:{name:"z"}}},h:{description:"Hadamard gate",matrix:[["1 / sqrt(2)","1 / sqrt(2)"],["1 / sqrt(2)","-1 / sqrt(2)"]],params:[],drawingInfo:{connectors:["box"],label:"H"},exportInfo:{quil:{name:"H"},cirq:{name:"H"},quest:{name:"hadamard"},qsharp:{name:"H"},quirk:{name:"H",controlQubits:0,targetQubits:1},braket:{name:"h"},aqasm:{name:"H"},ionq:{name:"h"},cudaq:{name:"h"}}},srn:{description:"Square root of NOT",matrix:[["0.5+0.5i","0.5-0.5i"],["0.5-0.5i","0.5+0.5i"]],params:[],drawingInfo:{connectors:["box"],label:"&#x221A;X"},exportInfo:{quil:{name:"srn",defgate:"DEFGATE srn:\n    0.5+0.5i, 0.5-0.5i\n    0.5-0.5i, 0.5+0.5i"},pyquil:{name:"srn",array:"[[0.5+0.5j, 0.5-0.5j], [0.5-0.5j, 0.5+0.5j]]"},cirq:{name:"X**(1/2)"},quest:{name:"unitary",matrix:[[["0.5","0.5"],["0.5","-0.5"]],[["0.5","-0.5"],["0.5","0.5"]]]},qasm:{equivalent:[{name:"h",wires:[0]},{name:"u3",params:{theta:0,phi:0,lambda:"pi/2"},wires:[0]},{name:"h",wires:[0]}]},qiskit:{name:"sx"},braket:{name:"v"},aqasm:{matrix:[["0.5+0.5i","0.5-0.5i"],["0.5-0.5i","0.5+0.5i"]],array:"[[0.5+0.5j, 0.5-0.5j], [0.5-0.5j, 0.5+0.5j]]"},ionq:{name:"v"},cudaq:{equivalent:[{name:"h",wires:[0]},{name:"u3",params:{theta:0,phi:0,lambda:"pi/2"},wires:[0]},{name:"h",wires:[0]}]},quirk:{name:"X^\xbd",controlQubits:0,targetQubits:1}}},srndg:{description:"Inverse square root of NOT",matrix:[["0.5-0.5i","0.5+0.5i"],["0.5+0.5i","0.5-0.5i"]],params:[],drawingInfo:{connectors:["box"],label:"&#x221A;X&#8224;"},exportInfo:{quil:{name:"srndg",defgate:"DEFGATE srndg:\n    0.5-0.5i, 0.5+0.5i\n    0.5+0.5i, 0.5-0.5i"},pyquil:{name:"srndg",array:"[[0.5-0.5j, 0.5+0.5j], [0.5+0.5j, 0.5-0.5j]]"},cirq:{name:"X**(-1/2)"},quest:{name:"unitary",matrix:[[["0.5","-0.5"],["0.5","0.5"]],[["0.5","0.5"],["0.5","-0.5"]]]},qasm:{equivalent:[{name:"h",wires:[0]},{name:"u3",params:{theta:0,phi:0,lambda:"-pi/2"},wires:[0]},{name:"h",wires:[0]}]},qiskit:{name:"sxdg"},braket:{name:"vi"},aqasm:{matrix:[["0.5-0.5i","0.5+0.5i"],["0.5+0.5i","0.5-0.5i"]],array:"[[0.5-0.5j, 0.5+0.5j], [0.5+0.5j, 0.5-0.5j]]"},ionq:{name:"vi"},cudaq:{equivalent:[{name:"h",wires:[0]},{name:"u3",params:{theta:0,phi:0,lambda:"-pi/2"},wires:[0]},{name:"h",wires:[0]}]},quirk:{name:"X^-\xbd",controlQubits:0,targetQubits:1}}},r2:{description:'PI/2 rotation over Z-axis aka "Phase PI/2"',matrix:[[1,0],[0,"exp(i * pi / 2)"]],params:[],drawingInfo:{connectors:["box"],label:"Z&#x1D6D1;/2"},exportInfo:{quil:{replacement:{name:"s"}},cirq:{replacement:{name:"s"}},quest:{name:"sGate"},qsharp:{replacement:{name:"s"}},qasm:{replacement:[{name:"s",params:{}}]},qiskit:{replacement:[{name:"s",params:{}}]},quirk:{name:"Z^\xbd",controlQubits:0,targetQubits:1},braket:{name:"s"},aqasm:{name:"S"},cudaq:{name:"s"}}},r4:{description:'PI/4 rotation over Z-axis aka "Phase PI/4"',matrix:[[1,0],[0,"exp(i * pi / 4)"]],params:[],drawingInfo:{connectors:["box"],label:"Z&#x1D6D1;/4"},exportInfo:{quil:{replacement:{name:"t"}},cirq:{replacement:{name:"t"}},quest:{name:"tGate"},qsharp:{replacement:{name:"t"}},qasm:{replacement:[{name:"t",params:{}}]},qiskit:{replacement:[{name:"t",params:{}}]},quirk:{name:"Z^\xbc",controlQubits:0,targetQubits:1},braket:{name:"t"},aqasm:{name:"T"},cudaq:{name:"t"}}},r8:{description:'PI/8 rotation over Z-axis aka "Phase PI/8"',matrix:[[1,0],[0,"exp(i * pi / 8)"]],params:[],drawingInfo:{connectors:["box"],label:"Z&#x1D6D1;/8"},exportInfo:{quil:{replacement:{name:"u1",params:{lambda:"pi/8"}}},cirq:{replacement:{name:"u1",params:{lambda:"pi/8"}}},quest:{name:"phaseShift",params:{theta:"M_PI/8"}},qsharp:{replacement:{name:"u1",params:{lambda:"pi/8"}}},qasm:{replacement:[{name:"u1",params:{lambda:"pi/8"}}]},qiskit:{replacement:[{name:"u1",params:{lambda:"pi/8"}}]},quirk:{name:"Z^\u215b",controlQubits:0,targetQubits:1},braket:{name:"phaseshift",params:{theta:"pi/8"}},aqasm:{matrix:[[1,0],[0,"exp(i * pi / 8)"]],array:"[[1,0],[0,np.exp(1j * np.pi / 8)]]"},cudaq:{replacement:[{name:"u3",params:{theta:0,phi:0,lambda:"pi/8"}}]}}},rx:{description:"Rotation around the X-axis by given angle",matrix:[["cos(theta / 2)","-i * sin(theta / 2)"],["-i * sin(theta / 2)","cos(theta / 2)"]],params:["theta"],drawingInfo:{connectors:["box"],label:"RX"},exportInfo:{quil:{name:"RX",params:["theta"]},cirq:{name:"rx",params:["theta"]},quest:{name:"rotateX",params:["theta"]},qsharp:{name:"Rx",params:["theta"]},braket:{name:"rx",params:["theta"]},aqasm:{name:"RX"},ionq:{name:"rx",paramsKey:"rotation"},cudaq:{name:"rx"},quirk:{controlQubits:0,targetQubits:1}}},ry:{description:"Rotation around the Y-axis by given angle",matrix:[["cos(theta / 2)","-1 * sin(theta / 2)"],["sin(theta / 2)","cos(theta / 2)"]],params:["theta"],drawingInfo:{connectors:["box"],label:"RY"},exportInfo:{quil:{name:"RY",params:["theta"]},cirq:{name:"ry",params:["theta"]},quest:{name:"rotateY",params:["theta"]},qsharp:{name:"Ry",params:["theta"]},braket:{name:"ry",params:["theta"]},aqasm:{name:"RY"},ionq:{name:"ry",paramsKey:"rotation"},cudaq:{name:"ry"},quirk:{controlQubits:0,targetQubits:1}}},rz:{description:"Rotation around the Z-axis by given angle",matrix:[["cos(phi / 2) - i * sin(phi / 2)",0],[0,"cos(phi / 2) + i * sin(phi / 2)"]],params:["phi"],drawingInfo:{connectors:["box"],label:"RZ"},exportInfo:{quil:{name:"RZ",params:["phi"]},cirq:{name:"rz",params:["theta"]},quest:{name:"rZ",func:"TODO"},qsharp:{name:"Rz",params:["theta"]},braket:{name:"rz",params:["phi"]},aqasm:{name:"RZ"},ionq:{name:"rz",paramsKey:"rotation"},cudaq:{name:"rz"},quirk:{controlQubits:0,targetQubits:1}}},u1:{description:"Single-qubit rotation about the Z axis",matrix:[[1,0],[0,"exp(i * lambda)"]],params:["lambda"],drawingInfo:{connectors:["box"],label:"U1"},exportInfo:{quil:{name:"PHASE",params:["lambda"]},cirq:{name:"u1",params:["lambda"],array:"[[1, 0], [0, np.exp(1j*p_lambda)]]",notTfqSupported:!0},quest:{name:"phaseShift",params:["lambda"]},braket:{name:"phaseshift",params:["lambda"]},qiskit:{name:"p"},aqasm:{name:"PH"},cudaq:{replacement:[{name:"u3",params:{theta:0,phi:0,lambda:"lambda"}}]},quirk:{controlQubits:0,targetQubits:1}}},u2:{description:"Single-qubit rotation about the X+Z axis",matrix:[["1 / sqrt(2)","-exp(i * lambda) * 1 / sqrt(2)"],["exp(i * phi) * 1 / sqrt(2)","exp(i * lambda + i * phi) * 1 / sqrt(2)"]],params:["phi","lambda"],drawingInfo:{connectors:["box"],label:"U2"},exportInfo:{quil:{name:"u2",params:["phi","lambda"],defgate:"DEFGATE u2(%phi, %lambda):\n    1/SQRT(2), -1*EXP(i*%lambda)*1/SQRT(2)\n    EXP(i*%phi)*1/SQRT(2), EXP(i*%lambda + i*%phi)*1/SQRT(2)"},pyquil:{name:"u2",params:["phi","lambda"],array:"[[1/quil_sqrt(2),-quil_exp(1j*p_lambda)*1/quil_sqrt(2)],[quil_exp(1j*p_phi)*1/quil_sqrt(2),quil_exp(1j*p_lambda+1j*p_phi)*1/quil_sqrt(2)]]"},cirq:{name:"u2",params:["phi","lambda"],array:"[[1/np.sqrt(2), -np.exp(1j*p_lambda)*1/np.sqrt(2)], [np.exp(1j*p_phi)*1/np.sqrt(2), np.exp(1j*p_lambda+1j*p_phi)*1/np.sqrt(2)]]",notTfqSupported:!0},quest:{name:"unitary",params:["phi","lambda"],matrix:[[["1/sqrt(2)","0"],["-cos(lambda)/sqrt(2)","-sin(lambda)/sqrt(2)"]],[["cos(phi)/sqrt(2)","sin(phi)/sqrt(2)"],["cos(lambda+phi)/sqrt(2)","sin(lambda+phi)/sqrt(2)"]]]},braket:{name:"unitary",params:["phi","lambda"],array:"[[1/np.sqrt(2), -np.exp(1j*p_lambda)*1/np.sqrt(2)], [np.exp(1j*p_phi)*1/np.sqrt(2), np.exp(1j*p_lambda+1j*p_phi)*1/np.sqrt(2)]]"},aqasm:{matrix:[["1 / sqrt(2)","-exp(i * lambda) * 1 / sqrt(2)"],["exp(i * phi) * 1 / sqrt(2)","exp(i * lambda + i * phi) * 1 / sqrt(2)"]],array:"[[1/np.sqrt(2), -np.exp(1j*p_lambda)*1/np.sqrt(2)], [np.exp(1j*p_phi)*1/np.sqrt(2), np.exp(1j*p_lambda+1j*p_phi)*1/np.sqrt(2)]]",params:["phi","lambda"]},qiskit:{replacement:[{name:"u3",params:{theta:"pi/2",phi:"phi",lambda:"lambda"}}]},cudaq:{replacement:[{name:"u3",params:{theta:"pi/2",phi:"phi",lambda:"lambda"}}]},quirk:{controlQubits:0,targetQubits:1}}},u3:{description:"Generic single-qubit rotation gate with 3 Euler angles",matrix:[["cos(theta/2)","-exp(i * lambda) * sin(theta / 2)"],["exp(i * phi) * sin(theta / 2)","exp(i * lambda + i * phi) * cos(theta / 2)"]],params:["theta","phi","lambda"],drawingInfo:{connectors:["box"],label:"U3"},exportInfo:{quil:{name:"u3",params:["theta","phi","lambda"],defgate:"DEFGATE u3(%theta, %phi, %lambda):\n    COS(%theta/2), -1*EXP(i*%lambda)*SIN(%theta/2)\n    EXP(i*%phi)*SIN(%theta/2), EXP(i*%lambda + i*%phi)*COS(%theta/2)"},pyquil:{name:"u3",params:["theta","phi","lambda"],array:"[[quil_cos(p_theta/2),-quil_exp(1j*p_lambda)*quil_sin(p_theta/2)],[quil_exp(1j*p_phi)*quil_sin(p_theta/2),quil_exp(1j*p_lambda+1j*p_phi)*quil_cos(p_theta/2)]]"},cirq:{name:"u3",params:["theta","phi","lambda"],array:"[[np.cos(p_theta/2), -np.exp(1j*p_lambda)*np.sin(p_theta/2)], [np.exp(1j*p_phi)*np.sin(p_theta/2), np.exp(1j*p_lambda+1j*p_phi)*np.cos(p_theta/2)]]",notTfqSupported:!0},quest:{name:"unitary",params:["theta","phi","lambda"],matrix:[[["cos(theta/2)","0"],["-cos(lambda)*sin(theta/2)","-sin(lambda)*sin(theta/2)"]],[["cos(phi)*sin(theta/2)","sin(phi)*sin(theta/2)"],["cos(lambda+phi)*cos(theta/2)","sin(lambda+phi)*cos(theta/2)"]]]},braket:{name:"unitary",params:["theta","phi","lambda"],array:"[[np.cos(p_theta/2), -np.exp(1j*p_lambda)*np.sin(p_theta/2)], [np.exp(1j*p_phi)*np.sin(p_theta/2), np.exp(1j*p_lambda+1j*p_phi)*np.cos(p_theta/2)]]"},qiskit:{name:"u"},aqasm:{matrix:[["cos(theta/2)","-exp(i * lambda) * sin(theta / 2)"],["exp(i * phi) * sin(theta / 2)","exp(i * lambda + i * phi) * cos(theta / 2)"]],array:"[[np.cos(p_theta/2), -np.exp(1j*p_lambda)*np.sin(p_theta/2)], [np.exp(1j*p_phi)*np.sin(p_theta/2), np.exp(1j*p_lambda+1j*p_phi)*np.cos(p_theta/2)]]",params:["theta","phi","lambda"]},cudaq:{name:"u3"},quirk:{controlQubits:0,targetQubits:1}}},s:{description:"PI/2 rotation over Z-axis (synonym for `r2`)",matrix:[[1,0],[0,"i"]],params:[],drawingInfo:{connectors:["box"],label:"S"},exportInfo:{quil:{name:"S"},cirq:{name:"S"},quest:{name:"sGate"},qsharp:{name:"S"},quirk:{name:"Z^\xbd",controlQubits:0,targetQubits:1},braket:{name:"s"},aqasm:{name:"S"},ionq:{name:"s"},cudaq:{name:"s"}}},t:{description:"PI/4 rotation over Z-axis (synonym for `r4`)",matrix:[[1,0],[0,"exp(i * pi / 4)"]],params:[],drawingInfo:{connectors:["box"],label:"T"},exportInfo:{quil:{name:"T"},cirq:{name:"T"},quest:{name:"tGate"},qsharp:{name:"T"},quirk:{name:"Z^\xbc",controlQubits:0,targetQubits:1},braket:{name:"t"},aqasm:{name:"T"},ionq:{name:"t"},cudaq:{name:"t"}}},sdg:{description:"(-PI/2) rotation over Z-axis",matrix:[[1,0],[0,"-i"]],params:[],drawingInfo:{connectors:["box"],label:"S&#8224;"},exportInfo:{quil:{replacement:{name:"u1",params:{lambda:"-pi/2"}}},cirq:{replacement:{name:"u1",params:{lambda:"-pi/2"}}},quest:{name:"phaseShift",params:{theta:"-M_PI/2"}},qsharp:{replacement:{name:"u1",params:{lambda:"-pi/2"}}},quirk:{name:"Z^-\xbd",controlQubits:0,targetQubits:1},braket:{name:"si"},aqasm:{name:"S",dagger:!0},ionq:{name:"si"},cudaq:{name:"sdg"}}},tdg:{description:"(-PI/4) rotation over Z-axis",matrix:[[1,0],[0,"exp(-i * pi / 4)"]],params:[],drawingInfo:{connectors:["box"],label:"T&#8224;"},exportInfo:{quil:{replacement:{name:"u1",params:{lambda:"-pi/4"}}},cirq:{replacement:{name:"u1",params:{lambda:"-pi/4"}}},quest:{name:"phaseShift",params:{theta:"-M_PI/4"}},qsharp:{replacement:{name:"u1",params:{lambda:"-pi/4"}}},quirk:{name:"Z^-\xbc",controlQubits:0,targetQubits:1},braket:{name:"ti"},aqasm:{name:"T",dagger:!0},ionq:{name:"ti"},cudaq:{name:"tdg"}}},gpi:{description:"GPi gate",matrix:[[0,"exp(-i*phi)"],["exp(i*phi)",0]],params:["phi"],drawingInfo:{connectors:["box"],label:"GPi"},exportInfo:{quil:{name:"gpi",params:["phi"],defgate:"DEFGATE gpi(%phi):\n    0, EXP(-i * %phi)\n    EXP(i * %phi), 0"},pyquil:{name:"gpi",params:["phi"],array:"[ [ 0, quil_exp(-1j*p_phi) ], [ quil_exp(1j*p_phi), 0 ] ]"},cirq:{name:"gpi"},quest:{name:"gpi",func:"TODO"},qasm:{equivalent:[{name:"u3",params:{theta:"pi",phi:"phi",lambda:"pi-phi"},wires:[0]}]},qiskit:{equivalent:[{name:"u3",params:{theta:"pi",phi:"phi",lambda:"pi-phi"},wires:[0]}]},braket:{name:"unitary",params:["phi"],array:"[ [ 0, np.exp(-1j*p_phi) ], [ np.exp(1j*p_phi), 0 ] ]"},aqasm:{matrix:[[0,"exp(-i*phi)"],["exp(i*phi)",0]],array:"[ [ 0, np.exp(-1j*p_phi) ], [ np.exp(1j*p_phi), 0 ] ]",params:["phi"]},ionq:{name:"gpi",paramsKey:"phase"},cudaq:{equivalent:[{name:"u3",params:{theta:"pi",phi:"phi",lambda:"pi-phi"},wires:[0]}]},quirk:{controlQubits:0,targetQubits:1}}},gpi2:{description:"GPi2 gate",matrix:[["1/sqrt(2)","(-i*exp(-i*phi))/sqrt(2)"],["(-i*exp(i*phi))/sqrt(2)","1/sqrt(2)"]],params:["phi"],drawingInfo:{connectors:["box"],label:"GPi2"},exportInfo:{quil:{name:"gpi2",params:["phi"],defgate:"DEFGATE gpi2(%phi):\n    1/SQRT(2), (-i*EXP(-i * %phi)) / SQRT(2)\n    (-i*EXP(i * %phi)) / SQRT(2), 1/SQRT(2)"},pyquil:{name:"gpi2",params:["phi"],array:"[ [ 1/quil_sqrt(2), (-1j*quil_exp(-1j*p_phi))/quil_sqrt(2) ], [ (-1j*quil_exp(1j*p_phi))/quil_sqrt(2), 1/quil_sqrt(2) ] ]"},cirq:{name:"gpi2"},quest:{name:"gpi2",func:"TODO"},qasm:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"phi-(pi/2)",lambda:"(pi/2)-phi"},wires:[0]}]},qiskit:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"phi-(pi/2)",lambda:"(pi/2)-phi"},wires:[0]}]},braket:{name:"unitary",params:["phi"],array:"[ [ 1/np.sqrt(2), (-1j*np.exp(-1j*p_phi))/np.sqrt(2) ], [ (-1j*np.exp(1j*p_phi))/np.sqrt(2), 1/np.sqrt(2) ] ]"},aqasm:{matrix:[["1/sqrt(2)","(-i*exp(-i*phi))/sqrt(2)"],["(-i*exp(i*phi))/sqrt(2)","1/sqrt(2)"]],array:"[ [ 1/np.sqrt(2), (-1j*np.exp(-1j*p_phi))/np.sqrt(2) ], [ (-1j*np.exp(1j*p_phi))/np.sqrt(2), 1/np.sqrt(2) ] ]",params:["phi"]},ionq:{name:"gpi2",paramsKey:"phase"},cudaq:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"phi-(pi/2)",lambda:"(pi/2)-phi"},wires:[0]}]},quirk:{controlQubits:0,targetQubits:1}}},vz:{description:"VirtualZ gate",matrix:[["exp(-i*theta/2)",0],[0,"exp(i*theta/2)"]],params:["theta"],drawingInfo:{connectors:["box"],label:"VrtZ"},exportInfo:{quil:{name:"vz",params:["theta"],defgate:"DEFGATE vz(%theta):\n    EXP(-i * %theta/2), 0\n    0, EXP(-i * %theta/2)"},pyquil:{name:"vz",params:["theta"],array:"[ [ quil_exp(-1j*p_theta/2), 0 ], [ 0, quil_exp(1j*p_theta/2) ] ]"},cirq:{name:"vz"},quest:{name:"vz",func:"TODO"},qasm:{equivalent:[{name:"rz",params:{phi:"theta"},wires:[0]}]},qiskit:{equivalent:[{name:"rz",params:{phi:"theta"},wires:[0]}]},braket:{name:"unitary",params:["theta"],array:"[ [ np.exp(-1j*p_theta/2), 0 ], [ 0, np.exp(1j*p_theta/2) ] ]"},aqasm:{matrix:[["exp(-i*theta/2)",0],[0,"exp(i*theta/2)"]],array:"[ [ np.exp(-1j*p_theta/2), 0 ], [ 0, np.exp(1j*p_theta/2) ] ]",params:["theta"]},ionq:{name:"vz",paramsKey:"phase"},cudaq:{equivalent:[{name:"rz",params:{phi:"theta"},wires:[0]}]},quirk:{controlQubits:0,targetQubits:1}}},cx:{description:"Controlled NOT (CNOT) gate",matrix:[[1,0,0,0],[0,1,0,0],[0,0,0,1],[0,0,1,0]],numTargetQubits:1,numControlQubits:1,params:[],drawingInfo:{connectors:["dot","not"],label:"X",root:"x"},exportInfo:{quil:{name:"CNOT"},cirq:{name:"CNOT"},quest:{name:"controlledNot"},qsharp:{name:"CNOT"},quirk:{name:"X",controlQubits:1,targetQubits:1},braket:{name:"cnot"},aqasm:{name:"CNOT"},ionq:{name:"cnot"},cudaq:{name:"cx"}}},cy:{description:"Controlled Y gate (controlled rotation over Y-axis by PI)",matrix:[[1,0,0,0],[0,1,0,0],[0,0,0,"-i"],[0,0,"i",0]],numTargetQubits:1,numControlQubits:1,params:[],drawingInfo:{connectors:["dot","box"],label:"Y",root:"y"},exportInfo:{quest:{name:"controlledPauliY"},cirq:{replacement:{name:"y",type:"controlled",notTfqSupported:!0}},quil:{name:"cy",defgate:"DEFGATE cy:\n    1, 0, 0, 0\n    0, 1, 0, 0\n    0, 0, 0, -i\n    0, 0, i, 0"},pyquil:{name:"cy",array:"[[1,0,0,0],[0,1,0,0],[0,0,0,-1j],[0,0,1j,0]]"},qsharp:{name:"Controlled Y"},quirk:{name:"Y",controlQubits:1,targetQubits:1},braket:{name:"cy"},aqasm:{name:"Y",controlled:!0},cudaq:{name:"cy"}}},cz:{description:"Controlled Z gate (controlled rotation over Z-axis by PI)",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,-1]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","dot"],label:"Z",root:"z"},exportInfo:{quil:{name:"CZ"},cirq:{name:"CZ"},quest:{name:"controlledPhaseFlip"},qsharp:{name:"Controlled Z"},quirk:{name:"Z",controlQubits:1,targetQubits:1},braket:{name:"cz"},aqasm:{name:"CSIGN"},cudaq:{name:"cz"}}},ch:{description:"Controlled Hadamard gate",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"1 / sqrt(2)","1 / sqrt(2)"],[0,0,"1 / sqrt(2)","-1 / sqrt(2)"]],numTargetQubits:1,numControlQubits:1,params:[],drawingInfo:{connectors:["dot","box"],label:"H",root:"h"},exportInfo:{quest:{name:"controlledUnitary",matrix:[[["1/sqrt(2)","0"],["1/sqrt(2)","0"]],[["1/sqrt(2)","0"],["-1/sqrt(2)","0"]]]},cirq:{replacement:{name:"h",type:"controlled",notTfqSupported:!0}},quil:{name:"ch",defgate:"DEFGATE ch:\n    1, 0, 0, 0\n    0, 1, 0, 0\n    0, 0, 0.7071067811865475, 0.7071067811865475\n    0, 0, 0.7071067811865475, -0.7071067811865475"},pyquil:{name:"ch",array:"[[1,0,0,0],[0,1,0,0],[0,0,1/np.sqrt(2),1/np.sqrt(2)],[0,0,1/np.sqrt(2),-1/np.sqrt(2)]]"},qsharp:{name:"Controlled H"},quirk:{name:"H",controlQubits:1,targetQubits:1},braket:{name:"unitary",array:"[[1,0,0,0],[0,1,0,0],[0,0,1/np.sqrt(2),1/np.sqrt(2)],[0,0,1/np.sqrt(2),-1/np.sqrt(2)]]"},aqasm:{name:"H",controlled:!0},cudaq:{name:"ch"}}},csrn:{description:"Controlled square root of NOT",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"0.5+0.5i","0.5-0.5i"],[0,0,"0.5-0.5i","0.5+0.5i"]],numTargetQubits:1,numControlQubits:1,params:[],drawingInfo:{connectors:["dot","box"],label:"&#x221A;X",root:"srn"},exportInfo:{quest:{name:"controlledUnitary",matrix:[[["-1/sqrt(2)","0"],["-1/sqrt(2)","0"]],[["-1/sqrt(2)","0"],["1/sqrt(2)","0"]]]},cirq:{replacement:{name:"srn",type:"controlled",notTfqSupported:!0}},quil:{name:"csrn",defgate:"DEFGATE csrn:\n    1, 0, 0, 0\n    0, 1, 0, 0\n    0, 0, 0.5+0.5i, 0.5-0.5i\n    0, 0, 0.5-0.5i, 0.5+0.5i"},qasm:{name:"csx"},qiskit:{name:"csx"},pyquil:{name:"csrn",array:"[[1,0,0,0],[0,1,0,0],[0,0,0.5+0.5j,0.5-0.5j],[0,0,0.5-0.5j,0.5+0.5j]]"},braket:{name:"unitary",array:"[[1,0,0,0],[0,1,0,0],[0,0,0.5+0.5j,0.5-0.5j],[0,0,0.5-0.5j,0.5+0.5j]]"},aqasm:{matrix:[[1,0,0,0],[0,1,0,0],[0,0,"0.5+0.5i","0.5-0.5i"],[0,0,"0.5-0.5i","0.5+0.5i"]],array:"[[1,0,0,0],[0,1,0,0],[0,0,0.5+0.5j,0.5-0.5j],[0,0,0.5-0.5j,0.5+0.5j]]"},cudaq:{equivalent:[{name:"h",wires:[1]},{name:"cu1",params:{lambda:"pi/2"},wires:[0,1]},{name:"h",wires:[1]}]},quirk:{name:"X^\xbd",controlQubits:1,targetQubits:1}}},swap:{description:"Swaps the state of two qubits.",matrix:[[1,0,0,0],[0,0,1,0],[0,1,0,0],[0,0,0,1]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["x","x"],label:"SWP"},exportInfo:{quil:{name:"SWAP"},cirq:{name:"SWAP"},quest:{name:"swap",func:"void swap(Qureg qubits, const int q1, const int q2) {\n    controlledNot(qubits, q1, q2);\n    controlledNot(qubits, q2, q1);\n    controlledNot(qubits, q1, q2);\n}"},qsharp:{name:"SWAP"},quirk:{name:"Swap",controlQubits:0,targetQubits:2},braket:{name:"swap"},aqasm:{name:"SWAP"},ionq:{name:"swap"},cudaq:{name:"swap"}}},srswap:{description:"Square root of swap",matrix:[[1,0,0,0],[0,"0.5 * (1 + i)","0.5 * (1 - i)",0],[0,"0.5 * (1 - i)","0.5 * (1 + i)",0],[0,0,0,1]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["box","box"],label:"&#x221A;SWP"},exportInfo:{quil:{name:"srswap",defgate:"DEFGATE srswap:\n    1, 0, 0, 0\n    0, 0.5+0.5i, 0.5-0.5i, 0\n    0, 0.5-0.5i, 0.5+0.5i, 0\n    0, 0, 0, 1"},cirq:{name:"SWAP**(1/2)"},pyquil:{name:"srswap",array:"[[1,0,0,0],[0,0.5 * (1 + 1j),0.5 * (1 - 1j),0],[0,0.5 * (1 - 1j),0.5 * (1 + 1j),0],[0,0,0,1]]"},quest:{name:"srswap",func:"void srswap(Qureg qubits, const int q1, const int q2) {\n    controlledNot(qubits, q2, q1);\n    rotateY(qubits, q2, M_PI/2);\n    rotateZ(qubits, q2, M_PI/16);\n    controlledNot(qubits, q1, q2);\n    rotateZ(qubits, q1, M_PI/8);\n    rotateZ(qubits, q2, -M_PI/8);\n    controlledNot(qubits, q1, q2);\n    rotateZ(qubits, q2, M_PI/16);\n    rotateY(qubits, q2, -M_PI/2);\n    controlledNot(qubits, q2, q1);\n}"},qasm:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"pi/2",lambda:"-1*pi"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"pi"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/4",phi:"-1*pi/2",lambda:"-1*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"7*pi/4"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/4",phi:"-1*pi",lambda:"-1*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"pi",lambda:"pi/2"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"-3*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"pi/2",lambda:"0"},wires:[1]}]},qiskit:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"pi/2",lambda:"-1*pi"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"pi"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/4",phi:"-1*pi/2",lambda:"-1*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"7*pi/4"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/4",phi:"-1*pi",lambda:"-1*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"pi",lambda:"pi/2"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"-3*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"pi/2",lambda:"0"},wires:[1]}]},braket:{name:"unitary",array:"[[1,0,0,0],[0,0.5 * (1 + 1j),0.5 * (1 - 1j),0],[0,0.5 * (1 - 1j),0.5 * (1 + 1j),0],[0,0,0,1]]"},aqasm:{name:"SQRTSWAP"},cudaq:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"pi/2",lambda:"-1*pi"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"pi"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/4",phi:"-1*pi/2",lambda:"-1*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"7*pi/4"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/4",phi:"-1*pi",lambda:"-1*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"pi",lambda:"pi/2"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"-3*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"pi/2",lambda:"0"},wires:[1]}]},quirk:{controlQubits:0,targetQubits:2}}},iswap:{description:"Swaps the state of two qubits, applying a -i phase to q1 when it is in the 1 state and a -i phase to q2 when it is in the 0 state",matrix:[[1,0,0,0],[0,0,"0+i",0],[0,"0+i",0,0],[0,0,0,1]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["box","box"],label:"iSWP"},exportInfo:{quil:{name:"ISWAP"},cirq:{name:"ISWAP"},quest:{name:"iSWAP",func:"TODO"},qasm:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"-1*pi"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"pi"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"3*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"3*pi/2",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"0"},wires:[0]},{name:"u3",params:{theta:"pi",phi:"pi/4",lambda:"-1*pi/4"},wires:[1]}]},qiskit:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"-1*pi"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"pi"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"3*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"3*pi/2",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"0"},wires:[0]},{name:"u3",params:{theta:"pi",phi:"pi/4",lambda:"-1*pi/4"},wires:[1]}]},braket:{name:"iswap"},aqasm:{name:"ISWAP"},cudaq:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"-1*pi"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"pi"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"3*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"3*pi/2",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"0"},wires:[0]},{name:"u3",params:{theta:"pi",phi:"pi/4",lambda:"-1*pi/4"},wires:[1]}]},quirk:{controlQubits:0,targetQubits:2}}},xx:{description:"XX gate",matrix:[["cos(theta)",0,0,"-i*sin(theta)"],[0,"cos(theta)","-i*sin(theta)",0],[0,"-i*sin(theta)","cos(theta)",0],["-i*sin(theta)",0,0,"cos(theta)"]],numTargetQubits:2,numControlQubits:0,params:["theta"],drawingInfo:{connectors:["box","box"],label:"XX"},exportInfo:{quil:{name:"xx",params:["theta"],defgate:"DEFGATE xx(%theta):\n    COS(%theta), 0, 0, -i*SIN(%theta)\n    0, COS(%theta), -i*SIN(%theta), 0\n    0, -i*SIN(%theta), COS(%theta), 0\n    -i*SIN(%theta), 0, 0, COS(%theta)"},pyquil:{name:"xx",params:["theta"],array:"[ [quil_cos(p_theta), 0, 0, -1j*quil_sin(p_theta)], [0, quil_cos(p_theta), -1j*quil_sin(p_theta), 0], [0, -1j*quil_sin(p_theta), quil_cos(p_theta), 0], [-1j*quil_sin(p_theta), 0, 0, quil_cos(p_theta)] ]"},cirq:{name:"xx"},quest:{name:"xx",func:"TODO"},qasm:{name:"rxx"},qiskit:{name:"rxx"},braket:{name:"unitary",params:["theta"],array:"[[np.cos(p_theta), 0, 0, -1j*np.sin(p_theta)], [0, np.cos(p_theta), -1j*np.sin(p_theta), 0], [0, -1j*np.sin(p_theta), np.cos(p_theta), 0], [-1j*np.sin(p_theta), 0, 0, np.cos(p_theta)] ]"},aqasm:{matrix:[["cos(theta)",0,0,"-i*sin(theta)"],[0,"cos(theta)","-i*sin(theta)",0],[0,"-i*sin(theta)","cos(theta)",0],["-i*sin(theta)",0,0,"cos(theta)"]],array:"[[np.cos(p_theta), 0, 0, -1j*np.sin(p_theta)], [0, np.cos(p_theta), -1j*np.sin(p_theta), 0], [0, -1j*np.sin(p_theta), np.cos(p_theta), 0], [-1j*np.sin(p_theta), 0, 0, np.cos(p_theta)] ]",params:["theta"]},ionq:{name:"xx",paramsKey:"phase"},quirk:{controlQubits:0,targetQubits:2}}},yy:{description:"YY gate",matrix:[["cos(theta)",0,0,"i*sin(theta)"],[0,"cos(theta)","-i*sin(theta)",0],[0,"-i*sin(theta)","cos(theta)",0],["i*sin(theta)",0,0,"cos(theta)"]],numTargetQubits:2,numControlQubits:0,params:["theta"],drawingInfo:{connectors:["box","box"],label:"YY"},exportInfo:{quil:{name:"yy",params:["theta"],defgate:"DEFGATE yy(%theta):\n    COS(%theta), 0, 0, i*SIN(%theta)\n    0, COS(%theta), -i*SIN(%theta), 0\n    0, -i*SIN(%theta), COS(%theta), 0\n    i*SIN(%theta), 0, 0, COS(%theta)"},cirq:{name:"YY"},pyquil:{name:"yy",params:["theta"],array:"[ [quil_cos(p_theta), 0, 0, 1j*quil_sin(p_theta)], [0, quil_cos(p_theta), -1j*quil_sin(p_theta), 0], [0, -1j*quil_sin(p_theta), quil_cos(p_theta), 0], [1j*quil_sin(p_theta), 0, 0, quil_cos(p_theta)] ]"},quest:{name:"yy",func:"TODO"},braket:{name:"yy",params:["theta"]},aqasm:{matrix:[["cos(theta)",0,0,"i*sin(theta)"],[0,"cos(theta)","-i*sin(theta)",0],[0,"-i*sin(theta)","cos(theta)",0],["i*sin(theta)",0,0,"cos(theta)"]],array:"[[np.cos(p_theta), 0, 0, 1j*np.sin(p_theta)], [0, np.cos(p_theta), -1j*np.sin(p_theta), 0], [0, -1j*np.sin(p_theta), np.cos(p_theta), 0], [1j*np.sin(p_theta), 0, 0, np.cos(p_theta)] ]",params:["theta"]},qasm:{name:"ryy"},qiskit:{name:"ryy"},ionq:{name:"yy",paramsKey:"phase"},quirk:{controlQubits:0,targetQubits:2}}},zz:{description:"Parametric 2-qubit rotation about ZZ",matrix:[["exp(-i * theta / 2)",0,0,0],[0,"exp(i * theta / 2)",0,0],[0,0,"exp(i * theta / 2)",0],[0,0,0,"exp(-i * theta / 2)"]],numTargetQubits:2,numControlQubits:0,params:["theta"],drawingInfo:{connectors:["box","box"],label:"ZZ"},exportInfo:{quil:{name:"zz",params:["theta"],defgate:"DEFGATE zz(%theta):\n    EXP(-i * %theta / 2), 0, 0, 0\n    0, EXP(i * %theta / 2), 0, 0\n    0, 0, EXP(i * %theta / 2), 0\n    0, 0, 0, EXP(-i * %theta / 2)"},pyquil:{name:"zz",params:["theta"],array:"[ [ quil_exp(-1j * p_theta / 2), 0, 0, 0 ], [ 0, quil_exp(1j * p_theta / 2), 0, 0], [ 0, 0, quil_exp(1j * p_theta / 2), 0 ], [ 0, 0, 0, quil_exp(-1j * p_theta / 2) ] ]"},quest:{name:"zz",func:"TODO"},qasm:{name:"rzz"},qiskit:{name:"rzz"},ionq:{name:"zz",paramsKey:"phase"},quirk:{controlQubits:0,targetQubits:2}}},xy:{description:"XY gate",matrix:[[1,0,0,0],[0,"cos(phi / 2)","i * sin(phi / 2)",0],[0,"i * sin(phi / 2)","cos(phi / 2)",0],[0,0,0,1]],numTargetQubits:2,numControlQubits:0,params:["phi"],drawingInfo:{connectors:["box","box"],label:"XY"},exportInfo:{quil:{name:"XY",params:["phi"]},qasm:{equivalent:[{name:"rz",params:{phi:"3*pi/4"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"-3*pi/4"},wires:[1]},{name:"rx",params:{theta:"pi/2"},wires:[1]},{name:"cz",wires:[1,0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"phi/2"},wires:[0]},{name:"rx",params:{theta:"-1*pi/2"},wires:[0]},{name:"rz",params:{phi:"pi/2"},wires:[1]},{name:"rx",params:{theta:"pi/2"},wires:[1]},{name:"rz",params:{phi:"phi/2"},wires:[1]},{name:"rx",params:{theta:"-1*pi/2"},wires:[1]},{name:"cz",wires:[1,0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"pi/4"},wires:[0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[1]},{name:"rx",params:{theta:"-1*pi/2"},wires:[1]},{name:"rz",params:{phi:"3*pi/4"},wires:[1]}]},qiskit:{equivalent:[{name:"rz",params:{phi:"3*pi/4"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"-3*pi/4"},wires:[1]},{name:"rx",params:{theta:"pi/2"},wires:[1]},{name:"cz",wires:[1,0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"phi/2"},wires:[0]},{name:"rx",params:{theta:"-1*pi/2"},wires:[0]},{name:"rz",params:{phi:"pi/2"},wires:[1]},{name:"rx",params:{theta:"pi/2"},wires:[1]},{name:"rz",params:{phi:"phi/2"},wires:[1]},{name:"rx",params:{theta:"-1*pi/2"},wires:[1]},{name:"cz",wires:[1,0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"pi/4"},wires:[0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[1]},{name:"rx",params:{theta:"-1*pi/2"},wires:[1]},{name:"rz",params:{phi:"3*pi/4"},wires:[1]}]},cirq:{name:"xy",params:["phi"],array:"[[1, 0, 0, 0], [0, np.cos(p_phi/2), 1j*np.sin(p_phi/2), 0], [0, 1j*np.sin(p_phi/2), np.cos(p_phi/2), 0], [0, 0, 0, 1]]",notTfqSupported:!0},quest:{name:"xy",func:"TODO"},braket:{name:"xy",params:["phi"]},aqasm:{matrix:[[1,0,0,0],[0,"cos(phi / 2)","i * sin(phi / 2)",0],[0,"i * sin(phi / 2)","cos(phi / 2)",0],[0,0,0,1]],array:"[[1, 0, 0, 0], [0, np.cos(p_phi/2), 1j*np.sin(p_phi/2), 0], [0, 1j*np.sin(p_phi/2), np.cos(p_phi/2), 0], [0, 0, 0, 1]]",params:["phi"]},cudaq:{equivalent:[{name:"rz",params:{phi:"3*pi/4"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"-3*pi/4"},wires:[1]},{name:"rx",params:{theta:"pi/2"},wires:[1]},{name:"cz",wires:[1,0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"phi/2"},wires:[0]},{name:"rx",params:{theta:"-1*pi/2"},wires:[0]},{name:"rz",params:{phi:"pi/2"},wires:[1]},{name:"rx",params:{theta:"pi/2"},wires:[1]},{name:"rz",params:{phi:"phi/2"},wires:[1]},{name:"rx",params:{theta:"-1*pi/2"},wires:[1]},{name:"cz",wires:[1,0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"pi/4"},wires:[0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[1]},{name:"rx",params:{theta:"-1*pi/2"},wires:[1]},{name:"rz",params:{phi:"3*pi/4"},wires:[1]}]},quirk:{controlQubits:0,targetQubits:2}}},ms:{description:"M\xf8lmer-S\xf8rensen gate",matrix:[["1/sqrt(2)",0,0,"(-i*exp(-i*(phi0+phi1)))/sqrt(2)"],[0,"1/sqrt(2)","(-i*exp(-i*(phi0-phi1)))/sqrt(2)",0],[0,"(-i*exp(i*(phi0-phi1)))/sqrt(2)","1/sqrt(2)",0],["(-i*exp(i*(phi0+phi1)))/sqrt(2)",0,0,"1/sqrt(2)"]],numTargetQubits:2,numControlQubits:0,params:["phi0","phi1"],drawingInfo:{connectors:["box","box"],label:"MS"},exportInfo:{quil:{name:"ms",params:["phi0","phi1"],defgate:"DEFGATE ms(%phi0, %phi1):\n    1/SQRT(2), 0, 0, (-i*EXP(-i*(%phi0+%phi1)))/SQRT(2)\n    0, 1/SQRT(2), (-i*EXP(-i*(%phi0-%phi1)))/SQRT(2), 0\n    0, (-i*EXP(i*(%phi0-%phi1)))/SQRT(2), 1/SQRT(2), 0\n    (-i*EXP(i*(%phi0+%phi1)))/SQRT(2), 0, 0, 1/SQRT(2)"},pyquil:{name:"ms",params:["phi0","phi1"],array:"[ [ 1/quil_sqrt(2), 0, 0, (-1j*quil_exp(-1j*(p_phi0+p_phi1)))/quil_sqrt(2) ], [ 0, 1/quil_sqrt(2), (-1j*quil_exp(-1j*(p_phi0-p_phi1)))/quil_sqrt(2), 0 ], [ 0, (-1j*quil_exp(1j*(p_phi0-p_phi1)))/quil_sqrt(2), 1/quil_sqrt(2), 0 ], [ (-1j*quil_exp(1j*(p_phi0+p_phi1)))/quil_sqrt(2), 0, 0, 1/quil_sqrt(2) ] ]"},cirq:{name:"ms"},quest:{name:"ms",func:"TODO"},qasm:{name:"ms"},qiskit:{name:"ms"},braket:{name:"unitary",params:["phi0","phi1"],array:"[ [ 1/np.sqrt(2), 0, 0, (-1j*np.exp(-1j*(p_phi0+p_phi1)))/np.sqrt(2) ], [ 0, 1/np.sqrt(2), (-1j*np.exp(-1j*(p_phi0-p_phi1)))/np.sqrt(2), 0 ], [ 0, (-1j*np.exp(1j*(p_phi0-p_phi1)))/np.sqrt(2), 1/np.sqrt(2), 0 ], [ (-1j*np.exp(1j*(p_phi0+p_phi1)))/np.sqrt(2), 0, 0, 1/np.sqrt(2) ] ]"},aqasm:{matrix:[["1/sqrt(2)",0,0,"(-1i*exp(-1i*(phi0+phi1)))/sqrt(2)"],[0,"1/sqrt(2)","(-1i*exp(-1i*(phi0-phi1)))/sqrt(2)",0],[0,"(-1i*exp(1i*(phi0-phi1)))/sqrt(2)","1/sqrt(2)",0],["(-1i*exp(1i*(phi0+phi1)))/sqrt(2)",0,0,"1/sqrt(2)"]],array:"[ [ 1/np.sqrt(2), 0, 0, (-1j*np.exp(-1j*(p_phi0+p_phi1)))/np.sqrt(2) ], [ 0, 1/np.sqrt(2), (-1j*np.exp(-1j*(p_phi0-p_phi1)))/np.sqrt(2), 0 ], [ 0, (-1j*np.exp(1j*(p_phi0-p_phi1)))/np.sqrt(2), 1/np.sqrt(2), 0 ], [ (-1j*np.exp(1j*(p_phi0+p_phi1)))/np.sqrt(2), 0, 0, 1/np.sqrt(2) ] ]",params:["phi0","phi1"]},ionq:{name:"ms",paramsKey:"phases"},quirk:{controlQubits:0,targetQubits:2}}},cr2:{description:"Controlled PI/2 rotation over Z-axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(i * pi / 2)"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"Z&#x1D6D1;/2",root:"r2"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"pi/2"}}},cirq:{replacement:{name:"cu1",params:{lambda:"pi/2"}}},quest:{name:"controlledPhaseShift",params:{theta:"M_PI/2"}},qsharp:{replacement:{name:"cu1",params:{lambda:"pi/2"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"pi/2"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"pi/2"}}]},quirk:{name:"Z^\xbd",controlQubits:1,targetQubits:1},braket:{name:"unitary",array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, np.exp(1j * np.pi / 2)] ]"},aqasm:{name:"S",controlled:!0},cudaq:{name:"cs"}}},cr4:{description:"Controlled PI/4 rotation over Z-axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(i * pi / 4)"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"Z&#x1D6D1;/4",root:"r4"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"pi/4"}}},cirq:{replacement:{name:"cu1",params:{lambda:"pi/4"}}},quest:{name:"controlledPhaseShift",params:{theta:"M_PI/4"}},qsharp:{replacement:{name:"cu1",params:{lambda:"pi/4"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"pi/4"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"pi/4"}}]},quirk:{name:"Z^\xbc",controlQubits:1,targetQubits:1},braket:{name:"unitary",array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, np.exp(1j * np.pi / 4)] ]"},aqasm:{name:"T",controlled:!0},cudaq:{name:"ct"}}},cr8:{description:"Controlled PI/8 rotation over Z-axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(i * pi / 8)"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"Z&#x1D6D1;/8",root:"r8"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"pi/8"}}},cirq:{replacement:{name:"cu1",params:{lambda:"pi/8"}}},quest:{name:"controlledPhaseShift",params:{theta:"M_PI/8"}},qsharp:{replacement:{name:"cu1",params:{lambda:"pi/8"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"pi/8"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"pi/8"}}]},quirk:{name:"Z^\u215b",controlQubits:1,targetQubits:1},braket:{name:"unitary",array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, np.exp(1j * np.pi / 8)] ]"},aqasm:{matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(i * pi / 8)"]],array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, np.exp(1j * np.pi / 8)] ]"},cudaq:{replacement:[{name:"cu1",params:{lambda:"pi/8"}}]}}},crx:{description:"Controlled rotation around the X-axis by given angle",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"cos(theta / 2)","-i * sin(theta / 2)"],[0,0,"-i * sin(theta / 2)","cos(theta / 2)"]],numTargetQubits:1,numControlQubits:1,params:["theta"],drawingInfo:{connectors:["dot","box"],label:"RX",root:"rx"},exportInfo:{quil:{name:"crx",params:["theta"],defgate:"DEFGATE crx(%theta):\n    1, 0, 0, 0\n    0, 1, 0, 0\n    0, 0, COS(%theta/2), -i*SIN(%theta/2)\n    0, 0, -i*SIN(%theta/2), COS(%theta/2)"},cirq:{replacement:{name:"rx",params:{theta:"theta"},type:"controlled",notTfqSupported:!0}},pyquil:{name:"crx",params:["theta"],array:"[[ 1, 0, 0, 0 ], [ 0, 1, 0, 0 ], [ 0, 0, quil_cos(p_theta / 2), -1j*quil_sin(p_theta / 2) ], [ 0, 0, -1j*quil_sin(p_theta / 2), quil_cos(p_theta / 2) ]]"},quest:{name:"controlledUnitary",params:["theta"],matrix:[[["cos(theta/2)","0"],["0","-sin(theta/2)"]],[["0","-sin(theta/2)"],["cos(theta/2)","0"]]]},qsharp:{name:"Controlled Rx",params:["theta"]},qasm:{replacement:[{name:"cu3",params:{theta:"theta",phi:"-1*pi/2",lambda:"pi/2"}}]},qiskit:{replacement:[{name:"cu3",params:{theta:"theta",phi:"-1*pi/2",lambda:"pi/2"}}]},braket:{name:"unitary",params:["theta"],array:"[[ 1, 0, 0, 0 ], [ 0, 1, 0, 0 ], [ 0, 0, np.cos(p_theta / 2), -1j*np.sin(p_theta / 2) ], [ 0, 0, -1j*np.sin(p_theta / 2), np.cos(p_theta / 2) ]]"},aqasm:{name:"RX",controlled:!0},cudaq:{name:"crx"},quirk:{controlQubits:0,targetQubits:2}}},cry:{description:"Controlled rotation around the Y-axis by given angle",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"cos(theta / 2)","-1 * sin(theta / 2)"],[0,0,"sin(theta / 2)","cos(theta / 2)"]],numTargetQubits:1,numControlQubits:1,params:["theta"],drawingInfo:{connectors:["dot","box"],label:"RY",root:"ry"},exportInfo:{quil:{name:"cry",params:["theta"],defgate:"DEFGATE cry(%theta):\n    1, 0, 0, 0\n    0, 1, 0, 0\n    0, 0, COS(%theta/2), -1*SIN(%theta/2)\n    0, 0, SIN(%theta/2), COS(%theta/2)"},cirq:{replacement:{name:"ry",params:{theta:"theta"},type:"controlled",notTfqSupported:!0}},pyquil:{name:"cry",params:["theta"],array:"[[ 1, 0, 0, 0 ],[ 0, 1, 0, 0 ],[ 0, 0, quil_cos(p_theta / 2), -1*quil_sin(p_theta / 2) ],[ 0, 0, quil_sin(p_theta / 2), quil_cos(p_theta / 2) ]]"},quest:{name:"controlledUnitary",params:["theta"],matrix:[[["cos(theta/2)","0"],["-sin(theta/2)","0"]],[["sin(theta/2)","0"],["cos(theta/2)","0"]]]},qsharp:{name:"Controlled Ry",params:["theta"]},qasm:{equivalent:[{name:"u3",params:{theta:"theta/2",phi:"0",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"-1*theta / 2",phi:"0",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]}]},qiskit:{equivalent:[{name:"u3",params:{theta:"theta/2",phi:"0",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"-1*theta / 2",phi:"0",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]}]},braket:{name:"unitary",params:["theta"],array:"[[ 1, 0, 0, 0 ],[ 0, 1, 0, 0 ],[ 0, 0, np.cos(p_theta / 2), -1*np.sin(p_theta / 2) ],[ 0, 0, np.sin(p_theta / 2), np.cos(p_theta / 2) ]]"},aqasm:{name:"RY",controlled:!0},cudaq:{name:"cry"},quirk:{controlQubits:0,targetQubits:2}}},crz:{description:"Controlled rotation around the Z-axis by given angle",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"cos(phi / 2) - i * sin(phi / 2)",0],[0,0,0,"cos(phi / 2) + i * sin(phi / 2)"]],numTargetQubits:1,numControlQubits:1,params:["phi"],drawingInfo:{connectors:["dot","dot"],label:"RZ",root:"rz"},exportInfo:{quil:{name:"crz",params:["phi"],defgate:"DEFGATE crz(%phi):\n    1, 0, 0, 0\n    0, 1, 0, 0\n    0, 0, COS(%phi / 2) - i * SIN(%phi / 2), 0\n    0, 0, 0, COS(%phi / 2) + i * SIN(%phi / 2)"},pyquil:{name:"crz",params:["phi"],array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, quil_cos(p_phi / 2) - 1j * quil_sin(p_phi / 2), 0], [0, 0, 0, quil_cos(p_phi / 2) + 1j * quil_sin(p_phi / 2)]]"},cirq:{replacement:{name:"rz",params:{phi:"phi"},type:"controlled"}},quest:{name:"controlledRotateZ",params:["theta"]},qsharp:{name:"Controlled Rz",params:["phi"]},braket:{name:"unitary",params:["phi"],array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, np.cos(p_phi / 2) - 1j * np.sin(p_phi / 2), 0], [0, 0, 0, np.cos(p_phi / 2) + 1j * np.sin(p_phi / 2)]]"},aqasm:{name:"RZ",controlled:!0},cudaq:{name:"crz"},quirk:{controlQubits:0,targetQubits:2}}},cu1:{description:"Controlled rotation about the Z axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(i * lambda)"]],numTargetQubits:2,numControlQubits:0,params:["lambda"],drawingInfo:{connectors:["dot","box"],label:"CU1",root:"u1"},exportInfo:{quil:{name:"CPHASE",params:["lambda"]},cirq:{name:"cu1",params:["lambda"],array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, np.exp(1j*p_lambda)]]",notTfqSupported:!0},quest:{name:"controlledPhaseShift",params:["theta"]},braket:{name:"unitary",params:["lambda"],array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, np.exp(1j*p_lambda)]]"},aqasm:{name:"PH",controlled:!0},qiskit:{name:"cp"},cudaq:{replacement:[{name:"cu3",params:{theta:0,phi:0,lambda:"lambda"}}]},quirk:{controlQubits:0,targetQubits:2}}},cu2:{description:"Controlled rotation about the X+Z axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"1 / sqrt(2)","-exp(i * lambda) * 1 / sqrt(2)"],[0,0,"exp(i * phi) * 1 / sqrt(2)","exp(i * lambda + i * phi) * 1 / sqrt(2)"]],numTargetQubits:1,numControlQubits:1,params:["phi","lambda"],drawingInfo:{connectors:["dot","box"],label:"CU2",root:"u2"},exportInfo:{quil:{name:"cu2",params:["phi","lambda"],defgate:"DEFGATE cu2(%phi, %lambda):\n    1, 0, 0, 0\n    0, 1, 0, 0\n    0, 0, 1/SQRT(2), -1*EXP(i*%lambda)*1/SQRT(2)\n    0, 0, EXP(i*%phi)*1/SQRT(2), EXP(i*%lambda + i*%phi)*1/SQRT(2)"},pyquil:{name:"cu2",params:["phi","lambda"],array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1/quil_sqrt(2), -quil_exp(1j*p_lambda)*1/quil_sqrt(2)],[0, 0, quil_exp(1j*p_phi)*1/quil_sqrt(2), quil_exp(1j*p_lambda+1j*p_phi)*1/quil_sqrt(2)]]"},cirq:{name:"cu2",params:["phi","lambda"],array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1/np.sqrt(2), -np.exp(1j*p_lambda)*1/np.sqrt(2)],[0, 0, np.exp(1j*p_phi)*1/np.sqrt(2), np.exp(1j*p_lambda+1j*p_phi)*1/np.sqrt(2)]]",notTfqSupported:!0},quest:{name:"controlledUnitary",params:["phi","lambda"],matrix:[[["1/sqrt(2)","0"],["-cos(lambda)/sqrt(2)","-sin(lambda)/sqrt(2)"]],[["cos(phi)/sqrt(2)","sin(phi)/sqrt(2)"],["cos(lambda+phi)/sqrt(2)","sin(lambda+phi)/sqrt(2)"]]]},qasm:{replacement:[{name:"cu3",params:{theta:"pi/2",phi:"phi",lambda:"lambda"}}]},qiskit:{replacement:[{name:"cu3",params:{theta:"pi/2",phi:"phi",lambda:"lambda"}}]},braket:{name:"unitary",params:["phi","lambda"],array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1/np.sqrt(2), -np.exp(1j*p_lambda)*1/np.sqrt(2)],[0, 0, np.exp(1j*p_phi)*1/np.sqrt(2), np.exp(1j*p_lambda+1j*p_phi)*1/np.sqrt(2)]]"},aqasm:{matrix:[[1,0,0,0],[0,1,0,0],[0,0,"1 / sqrt(2)","-exp(i * lambda) * 1 / sqrt(2)"],[0,0,"exp(i * phi) * 1 / sqrt(2)","exp(i * lambda + i * phi) * 1 / sqrt(2)"]],array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1/np.sqrt(2), -np.exp(1j*p_lambda)*1/np.sqrt(2)],[0, 0, np.exp(1j*p_phi)*1/np.sqrt(2), np.exp(1j*p_lambda+1j*p_phi)*1/np.sqrt(2)]]",params:["phi","lambda"]},cudaq:{replacement:[{name:"cu3",params:{theta:"pi/2",phi:"phi",lambda:"lambda"}}]},quirk:{controlQubits:0,targetQubits:2}}},cu3:{description:"Controlled rotation gate with 3 Euler angles",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"cos(theta/2)","-exp(i * lambda) * sin(theta / 2)"],[0,0,"exp(i * phi) * sin(theta / 2)","exp(i * lambda + i * phi) * cos(theta / 2)"]],numTargetQubits:1,numControlQubits:1,params:["theta","phi","lambda"],drawingInfo:{connectors:["dot","box"],label:"CU3",root:"u3"},exportInfo:{quil:{name:"cu3",params:["theta","phi","lambda"],defgate:"DEFGATE cu3(%theta, %phi, %lambda):\n    1, 0, 0, 0\n    0, 1, 0, 0\n    0, 0, COS(%theta/2), -1*EXP(i*%lambda)*SIN(%theta/2)\n    0, 0, EXP(i*%phi)*SIN(%theta/2), EXP(i*%lambda + i*%phi)*COS(%theta/2)"},pyquil:{name:"cu3",params:["theta","phi","lambda"],array:"[[1,0,0,0],[0,1,0,0],[0, 0, quil_cos(p_theta/2),-quil_exp(1j*p_lambda)*quil_sin(p_theta/2)],[0, 0, quil_exp(1j*p_phi)*quil_sin(p_theta/2),quil_exp(1j*p_lambda+1j*p_phi)*quil_cos(p_theta/2)]]"},cirq:{name:"cu3",params:["theta","phi","lambda"],array:"[[1,0,0,0],[0,1,0,0],[0, 0, np.cos(p_theta/2),-np.exp(1j*p_lambda)*np.sin(p_theta/2)],[0, 0, np.exp(1j*p_phi)*np.sin(p_theta/2),np.exp(1j*p_lambda+1j*p_phi)*np.cos(p_theta/2)]]",notTfqSupported:!0},quest:{name:"controlledUnitary",params:["theta","phi","lambda"],matrix:[[["cos(theta/2)","0"],["-cos(lambda)*sin(theta/2)","-sin(lambda)*sin(theta/2)"]],[["cos(phi)*sin(theta/2)","sin(phi)*sin(theta/2)"],["cos(lambda+phi)*cos(theta/2)","sin(lambda+phi)*cos(theta/2)"]]]},braket:{name:"unitary",params:["theta","phi","lambda"],array:"[[1,0,0,0],[0,1,0,0],[0, 0, np.cos(p_theta/2),-np.exp(1j*p_lambda)*np.sin(p_theta/2)],[0, 0, np.exp(1j*p_phi)*np.sin(p_theta/2),np.exp(1j*p_lambda+1j*p_phi)*np.cos(p_theta/2)]]"},aqasm:{matrix:[[1,0,0,0],[0,1,0,0],[0,0,"cos(theta/2)","-exp(i * lambda) * sin(theta / 2)"],[0,0,"exp(i * phi) * sin(theta / 2)","exp(i * lambda + i * phi) * cos(theta / 2)"]],array:"[[1,0,0,0],[0,1,0,0],[0, 0, np.cos(p_theta/2),-np.exp(1j*p_lambda)*np.sin(p_theta/2)],[0, 0, np.exp(1j*p_phi)*np.sin(p_theta/2),np.exp(1j*p_lambda+1j*p_phi)*np.cos(p_theta/2)]]",params:["theta","phi","lambda"]},qiskit:{name:"cu"},cudaq:{controlled:!0,name:"u3",controlWiresCount:1},quirk:{controlQubits:0,targetQubits:2}}},cs:{description:"Controlled PI/2 rotation over Z-axis (synonym for `cr2`)",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"i"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"S",root:"s"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"pi/2"}}},cirq:{replacement:{name:"cu1",params:{lambda:"pi/2"}}},quest:{name:"controlledPhaseShift",params:{theta:"M_PI/2"}},qsharp:{replacement:{name:"cu1",params:{lambda:"pi/2"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"pi/2"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"pi/2"}}]},quirk:{name:"Z^\xbd",controlQubits:1,targetQubits:1},braket:{name:"unitary",array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1, 0],[0, 0, 0, np.exp(1j * np.pi / 2)]]"},aqasm:{name:"S",controlled:!0},cudaq:{name:"cs"}}},ct:{description:"Controlled PI/4 rotation over Z-axis (synonym for `cr4`)",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(i * pi / 4)"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"T",root:"t"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"pi/4"}}},cirq:{replacement:{name:"cu1",params:{lambda:"pi/4"}}},quest:{name:"controlledPhaseShift",params:{theta:"M_PI/4"}},qsharp:{replacement:{name:"cu1",params:{lambda:"pi/4"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"pi/4"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"pi/4"}}]},quirk:{name:"Z^\xbc",controlQubits:1,targetQubits:1},braket:{name:"unitary",array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1, 0],[0, 0, 0, np.exp(1j * np.pi / 4)]]"},aqasm:{name:"T",controlled:!0},cudaq:{name:"ct"}}},csdg:{description:"Controlled (-PI/2) rotation over Z-axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"-i"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"S&#8224;",root:"sdg"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"-pi/2"}}},cirq:{replacement:{name:"cu1",params:{lambda:"-pi/2"}}},quest:{name:"controlledPhaseShift",params:{theta:"-M_PI/2"}},qsharp:{replacement:{name:"cu1",params:{lambda:"-pi/2"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"-1*pi/2"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"-1*pi/2"}}]},quirk:{name:"Z^-\xbd",controlQubits:1,targetQubits:1},braket:{name:"unitary",array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1, 0],[0, 0, 0, np.exp(-1j * np.pi / 2)]]"},aqasm:{name:"S",controlled:!0,dagger:!0},cudaq:{equivalent:[{name:"cu3",params:{theta:0,phi:0,lambda:"-pi/2"},wires:[0,1]}]}}},ctdg:{description:"Controlled (-PI/4) rotation over Z-axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(-i * pi / 4)"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"T&#8224;",root:"tdg"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"-pi/4"}}},cirq:{replacement:{name:"cu1",params:{lambda:"-pi/4"}}},quest:{name:"controlledPhaseShift",params:{theta:"-M_PI/4"}},qsharp:{replacement:{name:"cu1",params:{lambda:"-pi/4"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"-1*pi/4"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"-1*pi/4"}}]},quirk:{name:"Z^-\xbc",controlQubits:1,targetQubits:1},braket:{name:"unitary",array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1, 0],[0, 0, 0, np.exp(-1j * np.pi / 4)]]"},aqasm:{name:"T",controlled:!0,dagger:!0},cudaq:{equivalent:[{name:"cu3",params:{theta:0,phi:0,lambda:"-pi/4"},wires:[0,1]}]}}},ccx:{description:'Toffoli aka "CCNOT" gate',matrix:[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0]],numTargetQubits:1,numControlQubits:2,params:[],drawingInfo:{connectors:["dot","dot","not"],label:"CCNOT",root:"x"},exportInfo:{quil:{name:"CCNOT"},cirq:{name:"CCX",notTfqSupported:!0},quest:{name:"ccx",func:"void ccx(Qureg qubits, const int q1, const int q2, const int q3) {\n    hadamard(qubits, q3);\n    controlledNot(qubits, q2, q3);\n    phaseShift(qubits, q3, -M_PI/4);\n    controlledNot(qubits, q1, q3);\n    tGate(qubits, q3);\n    controlledNot(qubits, q2, q3);\n    phaseShift(qubits, q3, -M_PI/4);\n    controlledNot(qubits, q1, q3);\n    tGate(qubits, q2);\n    tGate(qubits, q3);\n    controlledNot(qubits, q1, q2);\n    hadamard(qubits, q3);\n    tGate(qubits, q1);\n    phaseShift(qubits, q2, -M_PI/4);\n    controlledNot(qubits, q1, q2);\n}"},qsharp:{name:"CCNOT"},quirk:{name:"X",controlQubits:2,targetQubits:1},braket:{name:"ccnot"},aqasm:{name:"CCNOT"},cudaq:{name:"x",controlled:!0,controlWiresCount:2}}},cswap:{description:'Controlled swap aka "Fredkin" gate',matrix:[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,1]],numTargetQubits:2,numControlQubits:1,params:[],drawingInfo:{connectors:["dot","x","x"],label:"SWP",root:"swap"},exportInfo:{cirq:{name:"CSWAP"},quest:{name:"cswap",func:"void cswap(Qureg qubits, const int q1, const int q2, const int q3) {\n    controlledNot(qubits, q3, q2);\n    hadamard(qubits, q3);\n    controlledNot(qubits, q2, q3);\n    phaseShift(qubits, q3, -M_PI/4);\n    controlledNot(qubits, q1, q3);\n    tGate(qubits, q3);\n    controlledNot(qubits, q2, q3);\n    phaseShift(qubits, q3, -M_PI/4);\n    controlledNot(qubits, q1, q3);\n    tGate(qubits, q2);\n    tGate(qubits, q3);\n    hadamard(qubits, q3);\n    controlledNot(qubits, q1, q2);\n    tGate(qubits, q1);\n    phaseShift(qubits, q2, -M_PI/4);\n    controlledNot(qubits, q2, q3);\n    controlledNot(qubits, q3, q2);\n}"},qsharp:{name:"Controlled SWAP"},quil:{name:"CSWAP"},pyquil:{name:"CSWAP"},quirk:{name:"Swap",controlQubits:1,targetQubits:2},braket:{name:"unitary",array:"[[1,0,0,0,0,0,0,0], [0,1,0,0,0,0,0,0], [0,0,1,0,0,0,0,0], [0,0,0,1,0,0,0,0], [0,0,0,0,1,0,0,0], [0,0,0,0,0,0,1,0], [0,0,0,0,0,1,0,0], [0,0,0,0,0,0,0,1]]"},aqasm:{name:"SWAP",controlled:!0},cudaq:{name:"swap",controlled:!0,controlWiresCount:1}}},csrswap:{description:"Controlled square root of swap",matrix:[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,"0.5 * (1 + i)","0.5 * (1 - i)",0],[0,0,0,0,0,"0.5 * (1 - i)","0.5 * (1 + i)",0],[0,0,0,0,0,0,0,1]],numTargetQubits:2,numControlQubits:1,params:[],drawingInfo:{connectors:["dot","box","box"],label:"&#x221A;SWP",root:"srswap"},exportInfo:{quest:{name:"csrswap",func:"TODO"},cirq:{replacement:{name:"srswap",type:"controlled",notTfqSupported:!0}},quil:{name:"csrswap",defgate:"DEFGATE csrswap:\n    1, 0, 0, 0, 0, 0, 0, 0\n    0, 1, 0, 0, 0, 0, 0, 0\n    0, 0, 1, 0, 0, 0, 0, 0\n    0, 0, 0, 1, 0, 0, 0, 0\n    0, 0, 0, 0, 1, 0, 0, 0\n    0, 0, 0, 0, 0, 0.5+0.5i, 0.5-0.5i, 0\n    0, 0, 0, 0, 0, 0.5-0.5i, 0.5+0.5i, 0\n    0, 0, 0, 0, 0, 0, 0, 1"},pyquil:{name:"csrswap",array:"[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0.5 * (1 + 1j),0.5 * (1 - 1j),0],[0,0,0,0,0,0.5 * (1 - 1j),0.5 * (1 + 1j),0],[0,0,0,0,0,0,0,1]]"},braket:{name:"unitary",array:"[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0.5 * (1 + 1j),0.5 * (1 - 1j),0],[0,0,0,0,0,0.5 * (1 - 1j),0.5 * (1 + 1j),0],[0,0,0,0,0,0,0,1]]"},aqasm:{name:"SQRTSWAP",controlled:!0},cudaq:{name:"csrswap",matrix:"[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0.5 * (1 + 1j),0.5 * (1 - 1j),0],[0,0,0,0,0,0.5 * (1 - 1j),0.5 * (1 + 1j),0],[0,0,0,0,0,0,0,1]]"},quirk:{controlQubits:0,targetQubits:3}}},reset:{description:"Resets qubit",matrix:[],params:[],drawingInfo:{connectors:["box"],label:"RST"},exportInfo:{quil:{name:"RESET"},cirq:{name:"reset",notTfqSupported:!0},quest:{name:"reset",func:"TODO"},qsharp:{name:"Reset"},cudaq:{name:"reset"},quirk:{name:"|0\u27e9\u27e80|",controlQubits:0,targetQubits:1}}},measure:{description:"Measures qubit and stores outcome (0 or 1) into classical register",matrix:[],params:[],drawingInfo:{connectors:["gauge"],label:""},exportInfo:{quil:{name:"MEASURE"},cirq:{name:"measure"},quest:{name:"measure"},qsharp:{name:"M"},cudaq:{name:"mz"},quirk:{name:"Measure",controlQubits:0,targetQubits:1}}},barrier:{description:"Barrier",matrix:[],params:[],drawingInfo:{connectors:["barrier"],label:"BAR"},exportInfo:{quil:{name:"FENCE"},quest:{name:"barrier",func:"TODO"},quirk:{name:"\u2026",controlQubits:0,targetQubits:1}}}},this.init(numQubits)}var math=require("mathjs"),QASMImport=require("./qasm_import/QASMImport.js"),formatFloat=function(f,options){(options=options||{}).decimalPlaces&&(f=math.round(f,options.decimalPlaces));var s=f+"";options.fixedWidth&&(s=f.toFixed(options.decimalPlaces||14));var plusChar=options.plusChar;return options.fixedWidth&&!plusChar&&(plusChar=" "),plusChar&&0<=f&&(s=plusChar+s),s},deepMerge=function(target,source){if(!isObject(target)||!isObject(source))return source;for(var key in source){var targetValue=target[key],sourceValue=source[key];isObject(targetValue)&&isObject(sourceValue)?target[key]=deepMerge(targetValue,sourceValue):target[key]=sourceValue}return target};function binStr(n,len){for(var bin=n.toString(2);bin.length<len;)bin="0"+bin;return bin}function reverseBitwise(n,len){return parseInt(binStr(n,len).split("").reverse().join(""),2)}QuantumCircuit.prototype.defaultHybridOptions=function(){return{optimizer:"Powell",tolerance:.001,costFunction:{python:"",javascript:""}}},QuantumCircuit.prototype.defaultEncoderDecoderOptions=function(){return{functionName:"",inputEncoding:{type:"custom",customFunction:{python:'def custom_encoder(input_data_row, input_encoding):\n    qasm = ""\n    qasm += "OPENQASM 2.0;\\n"\n    qasm += "include \\"qelib1.inc\\";\\n"\n\n    # ...\n\n    return qasm\n',javascript:'function customEncoder(inputDataRow, inputEncoding) {\n    let qasm = "";\n    qasm += "OPENQASM 2.0;\\n";\n    qasm += "include \\"qelib1.inc\\";\\n";\n    \n    // ...\n    \n    return qasm;\n}\n'},qubitOffset:0,colDefs:[],data:[]},outputDecoding:{type:"custom",customFunction:{python:"def custom_decoder(counts, output_decoding):\n    output_data_row = {}\n\n    # ...\n    \n    return output_data_row\n",javascript:"function customDecoder(counts, outputDecoding) {\n    outputDataRow = {};\n    \n    // ...\n    \n    return outputDataRow;\n}\n"},qubitOffset:0,colDefs:[]}}},QuantumCircuit.prototype.init=function(numQubits,options){options=options||{},this.numQubits=numQubits||1,this.gates=[],this.partitionMap=[],this.partitionCount=0,this.partitionInfo={},this.params=[],this.options={params:{},hybrid:!1,hybridOptions:this.defaultHybridOptions(),encoderDecoder:!1,encoderDecoderOptions:this.defaultEncoderDecoderOptions()},options.keepCustomGates||(this.customGates={}),this.cregs={},this.collapsed=[],this.prob=[],this.measureResetsQubit=!1,this.reverseBitOrder=!1,this.lastRunArguments={initialValues:null,options:null},this.clear()},QuantumCircuit.prototype.clearGates=function(){this.gates=[];for(var i=0;i<this.numQubits;i++)this.gates.push([])},QuantumCircuit.prototype.clear=function(){this.clearGates(),this.initState()},QuantumCircuit.prototype.resetState=function(){for(var creg in this.state={},this.stateBits=0,this.partitionCache={},this.cregs){var len=this.cregs[creg].length||0;this.cregs[creg]=[];for(var i=0;i<len;i++)this.cregs[creg].push(0)}this.collapsed=[],this.prob=[],this.stats={duration:0}},QuantumCircuit.prototype.initState=function(){this.resetState(),this.state[0]=math.complex(1,0)},QuantumCircuit.prototype.formatComplex=function(complex,options){return formatComplex2(complex.re,complex.im,options)},QuantumCircuit.prototype.multiplySquareMatrices=function(m1,m2){for(var len=m1.length,c=len,d=len,k=len,res=[];c--;)for(res[c]=[],d=len;d--;)for(res[c][d]=0,k=len;k--;)m1[c][k]&&m2[k][d]&&(res[c][d]?res[c][d]=math.add(res[c][d],math.multiply(m1[c][k],m2[k][d])):res[c][d]=math.multiply(m1[c][k],m2[k][d]));return res},QuantumCircuit.prototype.isIdentityMatrix=function(m,precision){void 0===precision&&(precision=14);for(var i=0;i<m.length;i++)for(var j=0;j<m.length;j++)if(math.round(m[i][j],precision)!=(i==j?1:0))return!1;return!0},QuantumCircuit.prototype.isUnitaryMatrix=function(U,precision){return this.isIdentityMatrix(math.multiply(U,math.ctranspose(U)),precision)},QuantumCircuit.prototype.isHermitianMatrix=function(H,precision){return this.matrixDiff(H,math.ctranspose(H))<=math.pow(10,-1*(precision||14))},QuantumCircuit.prototype.matrixDiff=function(matrix1,matrix2){for(var total=0,count=0,r=0;r<matrix1.length;r++)for(var row1=matrix1[r],row2=matrix2[r],c=0;c<row1.length;c++){var item1=row1[c],item2=row2[c],i1="object"==typeof item1?item1:math.complex(item1),i2="object"==typeof item2?item2:math.complex(item2);total+=math.abs(math.subtract(i1,i2)),count++}return count?total/count:0},QuantumCircuit.prototype.parseMathString=function(str){var variables=[],node=math.parse(str.replace(/[\t\n\r]/gm,""));return{expression:node.toString({handler:function(node,options){if(node.isSymbolNode){if("j"==node.name)return"i";variables.indexOf(node.name)<0&&variables.push(node.name)}}}),variables:variables,node:node}},QuantumCircuit.prototype.evalMathString=function(str,vars){vars=vars||{};var parsed=this.parseMathString(str),res=math.evaluate(parsed.expression,vars);return res instanceof math.Matrix?res.toArray():res},QuantumCircuit.prototype.parseMatrix=function(M,vars){var self=this,A=null,A="string"==typeof M?self.evalMathString(M,vars):M,res=[];return A.map(function(row,rowIndex){Array.isArray(row)?(res.push([]),row.map(function(val,colIndex){"string"==typeof val?res[rowIndex].push(self.evalMathString(val,vars)):res[rowIndex].push(val)})):"string"==typeof row?res.push(self.evalMathString(row,vars)):res.push(row)}),res},QuantumCircuit.prototype.matrixHasComplexElement=function(M){for(var r=0;r<M.length;r++){var row=M[r];if(row instanceof Array)for(var c=0;c<row.length;c++){var cell=row[c];if(cell instanceof math.Complex||"object"==typeof cell&&(cell.mathjs&&"Complex"==cell.mathjs||cell.type&&"Complex"==cell.type))return!0}else if(row instanceof math.Complex||"object"==typeof row&&(row.mathjs&&"Complex"==row.mathjs||row.type&&"Complex"==row.type))return!0}return!1},QuantumCircuit.prototype.matrixZeroImagToReal=function(M){for(var r=0;r<M.length;r++){var row=M[r];if(row instanceof Array)for(var c=0;c<row.length;c++){var cell=row[c];(cell instanceof math.Complex||"object"==typeof cell&&(cell.mathjs&&"Complex"==cell.mathjs||cell.type&&"Complex"==cell.type))&&0==math.im(cell)&&(M[r][c]=math.re(cell))}else(row instanceof math.Complex||"object"==typeof row&&(row.mathjs&&"Complex"==row.mathjs||row.type&&"Complex"==row.type))&&0==math.im(row)&&(M[r]=math.re(row))}return M},QuantumCircuit.prototype.stringifyMatrix=function(M,options){var self=this,A=M.toArray?M.toArray():M,forceComplex=!1;(options=options||{}).fixedWidth&&(forceComplex=this.matrixHasComplexElement(A));var str="";return str+="[",A.map(function(row,rowIndex){0<rowIndex&&(str+=","),options.minify?str+=" ":str+="\n  ",row instanceof Array?(str+="[",row.map(function(el,elIndex){0<elIndex&&(str+=", "),el instanceof math.Complex?str+=self.formatComplex(el,options):"object"==typeof el&&(el.mathjs&&"Complex"==el.mathjs||el.type&&"Complex"==el.type)?str+=formatComplex2(el.re,el.im,options):str+="string"==typeof el?el:forceComplex?formatComplex2(el,0,options):formatFloat(el,options)}),str+="]"):row instanceof math.Complex?str+=self.formatComplex(row,options):"object"==typeof row&&(row.mathjs&&"Complex"==row.mathjs||row.type&&"Complex"==row.type)?str+=formatComplex2(row.re,row.im,options):str+="string"==typeof row?row:forceComplex?formatComplex2(row,0,options):formatFloat(row,options)}),A.length&&(options.minify?str+=" ":str+="\n"),str+="]"},QuantumCircuit.prototype.matrixRe=function(U){for(var res=[],r=0;r<U.length;r++){var row=U[r];if(Array.isArray(row)){for(var newRow=[],c=0;c<row.length;c++)"object"==typeof row[c]?newRow.push(row[c].re):newRow.push(row[c]);res.push(newRow)}else"object"==typeof row?newRow.push(row.re):newRow.push(row)}return res},QuantumCircuit.prototype.matrixIm=function(U){for(var res=[],r=0;r<U.length;r++){var row=U[r];if(Array.isArray(row)){for(var newRow=[],c=0;c<row.length;c++)"object"==typeof row[c]?newRow.push(row[c].im):newRow.push(0);res.push(newRow)}else"object"==typeof row?newRow.push(row.im):newRow.push(0)}return res},QuantumCircuit.prototype.matrixAbs=function(U){for(var res=[],r=0;r<U.length;r++){var row=U[r];if(Array.isArray(row)){for(var newRow=[],c=0;c<row.length;c++)newRow.push(math.abs(row[c]));res.push(newRow)}else res.push(math.abs(row))}return res},QuantumCircuit.prototype.matrixArg=function(U){for(var res=[],r=0;r<U.length;r++){var row=U[r];if(Array.isArray(row)){for(var newRow=[],c=0;c<row.length;c++)newRow.push(math.arg(row[c]));res.push(newRow)}else res.push(math.arg(row))}return res},QuantumCircuit.prototype.setCombinedState=function(combineList){for(var newState={},newStateBits=0,totalQubits=0,itemIndex=0;itemIndex<combineList.length;itemIndex++){(item=combineList[itemIndex]).wires.map(function(dest){totalQubits<dest+1&&(totalQubits=dest+1)})}for(var bitMaps=[],itemIndex=0;itemIndex<combineList.length;itemIndex++){var item=combineList[itemIndex],cmap=[];item.wires.map(function(dest,source){cmap.push({and:1<<totalQubits-1-dest,or:1<<item.circuit.numQubits-1-source})}),bitMaps.push(cmap)}for(var n3=1<<totalQubits,a3=0;a3<n3;a3++){for(var s3=null,itemIndex=0;itemIndex<combineList.length;itemIndex++){for(var map=bitMaps[itemIndex],a1=0,i=0;i<map.length;i++)a3&map[i].and&&(a1|=map[i].or);var s1=(item=combineList[itemIndex]).circuit.state[a1],s3=s1?null==s3?s1:math.multiply(s1,s3):math.complex(0,0)}s3&&(s3.re||s3.im)&&(newState[a3]=s3,newStateBits|=a3)}if(this.resetState(),this.numQubits<totalQubits){for(this.numQubits=totalQubits;this.gates.length<this.numQubits;)this.gates.push([]);for(var numCols=this.numCols(),i=0;i<this.gates.length;i++)for(;this.gates[i].length<numCols;)this.gates[i].push(null)}this.state=newState,this.stateBits=newStateBits,0==this.stateBits&&0==Object.keys(this.state).length&&(this.state[0]=math.complex(1,0))},QuantumCircuit.prototype._setCombinedState=function(c1,c2,options){options=options||{};var q1=c1.numQubits,q2=c2.numQubits;if(!options.wireMap){options.wireMap={c1:[],c2:[]};for(var i=0;i<q1;i++)options.wireMap.c1.push(i);for(i=0;i<q2;i++)options.wireMap.c2.push(i+q1)}var q3=0;options.wireMap.c1.map(function(dest){q3<dest+1&&(q3=dest+1)}),options.wireMap.c2.map(function(dest){q3<dest+1&&(q3=dest+1)});var c1map=[];options.wireMap.c1.map(function(dest,source){c1map.push({and:1<<q3-1-dest,or:1<<q1-1-source})});var c2map=[];options.wireMap.c2.map(function(dest,source){c2map.push({and:1<<q3-1-dest,or:1<<q2-1-source})});for(var unused=0,i=0;i<q3;i++)options.wireMap.c1.indexOf(i)<0&&options.wireMap.c2.indexOf(i)<0&&(unused|=1<<q3-1-i);for(var newState={},newStateBits=0,n3=1<<q3,a3=0;a3<n3;a3++)if(!(a3&unused)){for(var a1=0,i=0;i<c1map.length;i++)a3&c1map[i].and&&(a1|=c1map[i].or);for(var a2=0,i=0;i<c2map.length;i++)a3&c2map[i].and&&(a2|=c2map[i].or);var s2,s3,s1=c1.state[a1];s1&&(!(s2=c2.state[a2])||((s3=math.multiply(s1,s2)).re||s3.im)&&(newState[a3]=s3,newStateBits|=a3))}if(this.resetState(),this.numQubits<q3){for(this.numQubits=q3;this.gates.length<this.numQubits;)this.gates.push([]);for(var numCols=this.numCols(),i=0;i<this.gates.length;i++)for(;this.gates[i].length<numCols;)this.gates[i].push(null)}this.state=newState,this.stateBits=newStateBits,0==this.stateBits&&0==Object.keys(this.state).length&&(this.state[0]=math.complex(1,0))},QuantumCircuit.prototype.appendQubits=function(numQubits){var c=new QuantumCircuit(numQubits);this._setCombinedState(this,c)},QuantumCircuit.prototype.numAmplitudes=function(onlyPossible){if(onlyPossible){var possibleCount=0;for(var is in this.state){var state=math.round(this.state[is],14);(state.re||state.im)&&possibleCount++}return possibleCount}return math.pow(2,this.numQubits)},QuantumCircuit.prototype.numCols=function(){return this.gates.length?this.gates[0].length:0},QuantumCircuit.prototype.numGates=function(decompose){var circuit=null;decompose?(circuit=new QuantumCircuit).load(this.save(!0)):circuit=this;for(var numGates=0,numCols=circuit.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<circuit.numQubits;wire++){var gate=circuit.getGateAt(column,wire);gate&&0==gate.connector&&numGates++}return numGates},QuantumCircuit.prototype.isEmptyCell=function(col,wire){if(this.gates[wire]&&this.gates[wire][col])return!1;for(var w=0;w<this.numQubits;w++){var gate=this.getGateAt(col,w);if(gate&&("measure"==gate.name||gate.options&&gate.options.condition&&gate.options.condition.creg||Math.min.apply(null,gate.wires)<wire&&Math.max.apply(null,gate.wires)>wire))return!1}return!0},QuantumCircuit.prototype.isEmptyPlace=function(col,wires,usingCregs){var mx,minWire=Math.min.apply(null,wires),maxWire=Math.max.apply(null,wires);!usingCregs||maxWire<(mx=this.numQubits-1)&&(maxWire=mx);for(var allEmpty=!0,wire=minWire;wire<=maxWire;wire++)if(!this.isEmptyCell(col,wire)){allEmpty=!1;break}return allEmpty},QuantumCircuit.prototype.lastNonEmptyPlace=function(wires,usingCregs){var mx,col=this.numCols(),allEmpty=!0,minWire=Math.min.apply(null,wires),maxWire=Math.max.apply(null,wires);for(!usingCregs||maxWire<(mx=this.numQubits-1)&&(maxWire=mx);allEmpty&&col--;)for(var wire=minWire;wire<=maxWire;wire++)if(!this.isEmptyCell(col,wire)){allEmpty=!1;break}return col},QuantumCircuit.prototype.insertColumn=function(colIndex){for(var i=0;i<this.numQubits;i++)this.gates[i].splice(colIndex||0,0,null)},QuantumCircuit.prototype.randomString=function(len){len=len||17;var text="",charset="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";text+=charset.charAt(Math.floor(Math.random()*charset.length)),charset+="0123456789";for(var i=0;i<len;i++)text+=charset.charAt(Math.floor(Math.random()*charset.length));return text},QuantumCircuit.prototype.addGate=function(gateName,column,wires,options){var wireList=[];if(Array.isArray(wires))for(var i=0;i<wires.length;i++)wireList.push(wires[i]);else wireList.push(wires);column<0&&(column=this.lastNonEmptyPlace(wireList,"measure"==gateName||options&&options.condition&&options.condition.creg)+1);for(var numConnectors=wireList.length,id=this.randomString(),connector=0;connector<numConnectors;connector++){var wire=wireList[connector];for(wire+1>this.numQubits&&(this.numQubits=wire+1);this.gates.length<this.numQubits;)this.gates.push([]);var numCols=this.numCols();numCols<column+1&&(numCols=column+1);for(i=0;i<this.gates.length;i++)for(;this.gates[i].length<numCols;)this.gates[i].push(null);var cregBit,existingCreg,currentValue,gate={id:id,name:gateName,connector:connector,options:{}};options&&(gate.options=options).creg&&options.creg.name&&void 0!==options.creg.bit&&(cregBit=parseInt(options.creg.bit||0),isNaN(cregBit)&&(cregBit=0),currentValue=cregBit<(existingCreg=this.cregs[options.creg.name]||[]).length?existingCreg[options.creg.bit]:0,this.setCregBit(options.creg.name,cregBit,currentValue)),this.gates[wire][column]=gate}return id},QuantumCircuit.prototype.appendGate=function(gateName,wires,options){return this.addGate(gateName,-1,wires,options)},QuantumCircuit.prototype.insertGate=function(gateName,column,wires,options){var wireList=[];if(Array.isArray(wires))for(var i=0;i<wires.length;i++)wireList.push(wires[i]);else wireList.push(wires);column<0&&(column=this.lastNonEmptyPlace(wireList,!!gateName&&"measure"==gateName||options&&options.condition&&options.condition.creg)+1);for(var numConnectors=wireList.length,connector=0;connector<numConnectors;connector++){var wire=wireList[connector];for(wire+1>this.numQubits&&(this.numQubits=wire+1);this.gates.length<this.numQubits;)this.gates.push([]);var numCols=this.numCols();numCols<column+1&&(numCols=column+1);for(i=0;i<this.gates.length;i++)for(;this.gates[i].length<numCols;)this.gates[i].push(null)}this.isEmptyPlace(column,wireList,!!gateName&&"measure"==gateName||options&&options.condition&&options.condition.creg)||this.insertColumn(column);var id=null;return gateName&&(id=this.addGate(gateName,column,wireList,options)),id},QuantumCircuit.prototype.insertSpace=function(column,wires){return this.insertGate(null,column,wires,null)},QuantumCircuit.prototype.removeGateAt=function(column,wire){if(this.gates[wire]){var gate=this.gates[wire][column];if(gate)for(var id=gate.id,numWires=this.gates.length,w=0;w<numWires;w++){var cell=this.gates[w][column];cell&&cell.id==id&&(this.gates[w][column]=null)}}},QuantumCircuit.prototype.removeGate=function(gateId){var gatePos=this.getGatePosById(gateId);!gatePos||gatePos.col<0||!gatePos.wires.length||this.removeGateAt(gatePos.col,gatePos.wires[0])},QuantumCircuit.prototype.addMeasure=function(wire,creg,cbit){this.addGate("measure",-1,wire,{creg:{name:creg,bit:cbit}})},QuantumCircuit.prototype.appendCircuit=function(circuit,pack){for(var colOffset=this.numCols(),numCols=circuit.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<circuit.numQubits;wire++){var gate=circuit.getGateAt(column,wire);gate&&0==gate.connector&&(!this.basicGates[gate.name]&&circuit.customGates[gate.name]&&this.registerGate(gate.name,circuit.customGates[gate.name]),this.addGate(gate.name,column+colOffset,gate.wires,gate.options))}},QuantumCircuit.prototype.removeTrailingColumns=function(){for(var column=this.numCols()-1;0<=column;column--){for(var isEmptyCol=!0,wire=0;wire<this.numQubits;wire++){if(this.gates[wire][column]){isEmptyCol=!1;break}}if(!isEmptyCol)return;for(wire=0;wire<this.numQubits;wire++)this.gates[wire].pop()}},QuantumCircuit.prototype.removeLeadingColumns=function(){for(var emptyCount=0,numCols=this.numCols(),column=0;column<numCols;column++){for(var isEmptyCol=!0,wire=0;wire<this.numQubits;wire++){if(this.gates[wire][column]){isEmptyCol=!1;break}}if(!isEmptyCol)break;emptyCount++}for(var i=0;i<emptyCount;i++)for(wire=0;wire<this.numQubits;wire++)this.gates[wire].shift()},QuantumCircuit.prototype.removeTrailingRows=function(){for(var numCols=this.numCols(),wire=this.numQubits-1;0<=wire;wire--){for(var isEmptyRow=!0,column=0;column<numCols;column++){if(this.gates[wire][column]){isEmptyRow=!1;break}}if(!isEmptyRow)return;this.gates.pop(),this.numQubits--}},QuantumCircuit.prototype.removeQubit=function(wire){if(this.gates[wire]){this.resetState();for(var numCols=this.numCols(),col=0;col<numCols;col++)this.removeGateAt(col,wire);for(var w=wire+1;w<this.numQubits;w++)for(col=0;col<numCols;col++)this.gates[w-1][col]=this.gates[w][col];this.gates.pop(),this.numQubits--}},QuantumCircuit.prototype.flipVertically=function(){this.resetState();for(var numCols=this.numCols(),lastQubit=this.numQubits-1,w=0;w<this.numQubits/2;w++)for(var col=0;col<numCols;col++){var tmp=this.gates[w][col];this.gates[w][col]=this.gates[lastQubit-w][col],this.gates[lastQubit-w][col]=tmp}},QuantumCircuit.prototype.flipHorizontally=function(){this.resetState();for(var numCols=this.numCols(),lastCol=numCols-1,w=0;w<this.numQubits;w++)for(var col=0;col<numCols/2;col++){var tmp=this.gates[w][col];this.gates[w][col]=this.gates[w][lastCol-col],this.gates[w][lastCol-col]=tmp}},QuantumCircuit.prototype.applyTransform=function(U,qubits){var newState={},newStateBits=0;if(qubits=qubits.slice(0),this.reverseBitOrder)for(var i=0;i<qubits.length;i++)qubits[i]=this.numQubits-1-qubits[i];qubits.reverse();for(var unused=[],i=0;i<this.numQubits;i++)qubits.indexOf(i)<0&&unused.push(i);var unusedSpace=1<<unused.length;function getElMask(el){var res=0;return qubits.map(function(qubit,index){el&1<<index&&(res|=1<<qubit)}),res}for(var ZERO=math.complex(0,0),elrow=0;elrow<U.length;elrow++)for(var rowmask=getElMask(elrow),elcol=0;elcol<U[elrow].length;elcol++){var colmask=getElMask(elcol);if((this.stateBits&colmask)==colmask){var uval=U[elrow][elcol];if(uval)for(var row,col=colmask,counter=unusedSpace,countermask=getElMask(0),incmask=function(){var res=0;return qubits.map(function(qubit,index){res|=1<<qubit}),res+1}(),notmask=function(){var res=0;return unused.map(function(qubit,index){res|=1<<qubit}),res}(),toothless=countermask;counter--;){var state=this.state[col];state&&(newState[row=toothless|rowmask]=1==uval?math.add(newState[row]||ZERO,state):math.add(newState[row]||ZERO,math.multiply(uval,state)),newStateBits|=row),col=(toothless=toothless+incmask&notmask)|colmask}}}this.state=newState,this.stateBits=newStateBits,0==this.stateBits&&0==Object.keys(this.state).length&&(this.state[0]=math.complex(1,0))},QuantumCircuit.prototype.transformMatrix=function(totalQubits,U,targetQubits,endianness){targetQubits=targetQubits.slice(0);if(endianness?"big"==endianness:!this.reverseBitOrder)for(var i=0;i<targetQubits.length;i++)targetQubits[i]=totalQubits-1-targetQubits[i];targetQubits.reverse();for(var unused=[],i=0;i<totalQubits;i++)targetQubits.indexOf(i)<0&&unused.push(i);var unusedSpace=1<<unused.length;function getElMask(el){var res=0;return targetQubits.map(function(qubit,index){el&1<<index&&(res|=1<<qubit)}),res}for(var T=math.zeros([1<<totalQubits,1<<totalQubits]),elrow=0;elrow<U.length;elrow++)for(var rowmask=getElMask(elrow),elcol=0;elcol<U[elrow].length;elcol++){var colmask=getElMask(elcol),uval=U[elrow][elcol];if(uval)for(var col=colmask,counter=unusedSpace,countermask=getElMask(0),incmask=function(){var res=0;return targetQubits.map(function(qubit,index){res|=1<<qubit}),res+1}(),notmask=function(){var res=0;return unused.map(function(qubit,index){res|=1<<qubit}),res}(),toothless=countermask;counter--;)T[toothless|rowmask][col]=uval,col=(toothless=toothless+incmask&notmask)|colmask}return T},QuantumCircuit.prototype.circuitMatrix=function(endianness){var decomposed=new QuantumCircuit;if(decomposed.load(this.save(!0)),decomposed.gotClassicalControl())return[];for(var matrix=[],col=decomposed.numCols()-1;0<=col;col--)for(var wire=decomposed.numQubits-1;0<=wire;wire--){var gate=decomposed.getGateAt(col,wire);if(gate&&0==gate.connector){var rawGate,U,gateDef=decomposed.basicGates[gate.name];if(!gateDef)throw new Error('Unknown gate "'+gate.name+'"');gateDef.matrix&&gateDef.matrix.length&&(rawGate=decomposed.getRawGate(gateDef,gate.options),U=decomposed.transformMatrix(decomposed.numQubits,rawGate,gate.wires,endianness),matrix=matrix&&matrix.length?this.multiplySquareMatrices(matrix,U):U)}}return matrix},QuantumCircuit.prototype.eigenvalues2x2=function(A){var M=this.parseMatrix(A),eigen=[0,0],x=math.add(M[0][0],M[1][1]);return eigen[0]=math.divide(math.add(x,math.sqrt(math.add(math.multiply(math.multiply(4,M[0][1]),M[1][0]),math.pow(math.subtract(M[0][0],M[1][1]),2)))),2),eigen[1]=math.divide(math.subtract(x,math.sqrt(math.add(math.multiply(math.multiply(4,M[0][1]),M[1][0]),math.pow(math.subtract(M[0][0],M[1][1]),2)))),2),eigen},QuantumCircuit.prototype.getBipartiteState=function(q1,q2){var a,b,arg,bipartiteState={},ampCount=0;for(var is in this.state){var i=parseInt(is),index=0;index|=i&1<<q1?1:0,void 0!==bipartiteState[index|=i&1<<q2?2:0]?bipartiteState[index]=(a=bipartiteState[index],b=this.state[is],arg=void 0,arg=math.add(a,b).arg(),math.complex({abs:math.sqrt(math.pow(math.abs(a),2)+math.pow(math.abs(b),2)),arg:arg})):bipartiteState[index]=this.state[is],ampCount++}return ampCount||(bipartiteState[0]=math.complex(1,0)),bipartiteState},QuantumCircuit.prototype.chanceMap=function(){for(var map={},sour=0;sour<this.numQubits;sour++)for(var dest=0;dest<this.numQubits;dest++)map[sour]||(map[sour]={}),map[sour][dest]=dest==sour?null:{};for(sour=0;sour<this.numQubits;sour++)for(dest=sour+1;dest<this.numQubits;dest++){var reducedState=this.getBipartiteState(sour,dest),circ=new QuantumCircuit(2);circ.state=reducedState;var radius=math.abs(circ.angles()[0].radius),concurence=math.round(1-math.pow(radius,2),7);map[sour][dest].entangled=0<concurence,map[sour][dest].concurence=concurence,map[sour][dest].concurencePercent=math.round(100*concurence,2),map[dest][sour].entangled=0<concurence,map[dest][sour].concurence=concurence,map[dest][sour].concurencePercent=math.round(100*concurence,2)}return map},QuantumCircuit.prototype.resetQubit=function(wire,value){var U=[[0,0],[0,0]],bit=null,bit=this.reverseBitOrder?math.pow(2,this.numQubits-1-wire):math.pow(2,wire),prob=0;for(var is in this.state){var i=parseInt(is);(value?i&bit:!(i&bit))&&(prob+=math.pow(math.abs(this.state[is]),2))}1!=(prob=math.round(prob,14))&&(value?0==prob?U[1][0]=1:U[1][1]=math.sqrt(1/prob):0==prob?U[0][1]=1:U[0][0]=math.sqrt(1/prob),this.collapsed=[],this.prob=[],this.applyTransform(U,[wire]))},QuantumCircuit.prototype.applyGate=function(gateName,column,wires,options){if("measure"!=gateName){var gate,rawGate;"reset"!=gateName?"barrier"!=gateName&&((gate=this.basicGates[gateName])?(rawGate=this.getRawGate(gate,options),this.collapsed=[],this.prob=[],this.applyTransform(rawGate,wires)):console.log('Unknown gate "'+gateName+'".')):this.resetQubit(wires[0],0)}else{if(!options.creg)throw'Error: "measure" gate requires destination.';var value=this.measure(wires[0],options.creg.name,options.creg.bit),doReset=this.measureResetsQubit;if(!doReset)for(var col=column;col<this.numCols();col++){for(var row=col==column?wires[0]:0;row<this.numQubits;row++){var g=this.gates[row][col];if(g&&"measure"!=g.name){doReset=!0;break}}if(doReset)break}doReset&&this.resetQubit(wires[0],value)}},QuantumCircuit.prototype.getRawGate=function(gate,gateOptions,globalOptions){var originalGlobalParams=globalOptions&&globalOptions.params?globalOptions.params:this.options&&this.options.params?this.options.params:{},globalParams=JSON.parse(JSON.stringify(originalGlobalParams));for(var globalParamName in globalParams)globalParams[globalParamName]=math.evaluate(globalParams[globalParamName]);var rawGate=[];return gate.matrix.map(function(row){var rawGateRow=[];row.map(function(item){var params,vars,ev;"string"==typeof item?(params=gateOptions&&gateOptions.params||{},vars={},gate.params.map(function(varName,varIndex){Array.isArray(params)?vars[varName]=varIndex<params.length?math.evaluate(params[varIndex],globalParams):null:vars[varName]=math.evaluate(params[varName],globalParams)}),ev=math.evaluate(item,vars),rawGateRow.push(ev)):rawGateRow.push(item)}),rawGate.push(rawGateRow)}),rawGate},QuantumCircuit.prototype.countParameterizedGates=function(){for(var parameterizedCount=0,numCols=this.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var gate=this.getGateAt(column,wire);if(gate&&0==gate.connector&&gate.options&&gate.options.params){var gateParamCount=0;for(paramName in gate.options.params)gateParamCount++;0<gateParamCount&&parameterizedCount++}}return parameterizedCount},QuantumCircuit.prototype.findGlobalParams=function(){for(var res={globalParams:[],cells:[]},numCols=this.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var gate=this.getGateAt(column,wire);if(gate&&0==gate.connector&&gate.options&&gate.options.params){var cellAdded=!1;for(var gateParamName in gate.options.params){var gateParamValue=gate.options.params[gateParamName];if("string"==typeof gateParamValue){var globals=function(s){var vars=[];return math.parse(s).toString({handler:function(node,options){!node.isSymbolNode||node.isFunctionNode||math[node.name]||vars.push(node.name)}}),vars}(gateParamValue);if(globals.length){for(var maxWire,g=0;g<globals.length;g++)res.globalParams.indexOf(globals[g])<0&&res.globalParams.push(globals[g]);cellAdded||(maxWire=Math.max.apply(null,gate.wires),res.cells.push([column,maxWire]),cellAdded=!0)}}}}}return res},QuantumCircuit.prototype.getGlobalParams=function(){return this.findGlobalParams().globalParams},QuantumCircuit.prototype.gotGlobalParams=function(){return 0<this.getGlobalParams().length},QuantumCircuit.prototype.updateGlobalParams=function(){this.params=this.getGlobalParams(),this.options=this.options||{},this.options.params=this.options.params||{};for(var i=0;i<this.params.length;i++){var paramName=this.params[i];void 0===this.options.params[paramName]&&(this.options.params[paramName]=0)}for(var paramName in this.options.params)this.params.indexOf(paramName)<0&&delete this.options.params[paramName];return this.params},QuantumCircuit.prototype.isGateParamsGlobal=function(gate){this.getGlobalParams();if(gate.options&&gate.options.params){for(var gateParamName in gate.options.params){var gateParamValue=gate.options.params[gateParamName],isGlobal=!1;if("string"==typeof gateParamValue&&function(s){var vars=[];return math.parse(s).toString({handler:function(node,options){!node.isSymbolNode||node.isFunctionNode||math[node.name]||vars.push(node.name)}}),vars}(gateParamValue).length&&(isGlobal=!0),!isGlobal)return!1}return!0}return!1},QuantumCircuit.prototype.makeGateParamsGlobal=function(gate){var globalParams=this.getGlobalParams();if(gate.options&&gate.options.params)for(var gateParamName in gate.options.params){var gateParamValue=gate.options.params[gateParamName],isGlobal=!1;if("string"==typeof gateParamValue&&function(s){var vars=[];return math.parse(s).toString({handler:function(node,options){!node.isSymbolNode||node.isFunctionNode||math[node.name]||vars.push(node.name)}}),vars}(gateParamValue).length&&(isGlobal=!0),!isGlobal){for(var varIndex=0;0<=globalParams.indexOf("var"+varIndex);)varIndex++;var globalVarName="var"+varIndex;globalParams.push(globalVarName);for(var i=0;i<gate.wires.length;i++){this.gates[gate.wires[i]][gate.column].options.params[gateParamName]=globalVarName}this.params.push(globalVarName),this.options.params[globalVarName]=gateParamValue}}},QuantumCircuit.prototype.makeAllParamsGlobal=function(){for(var numCols=this.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var gate=this.getGateAt(column,wire);gate&&0==gate.connector&&this.makeGateParamsGlobal(gate)}},QuantumCircuit.prototype.decompose=function(obj){if(!obj.gates.length)return obj;function injectArray(a1,a2,pos){return a1.slice(0,pos).concat(a2).concat(a1.slice(pos))}this.updateGlobalParams();for(var column=0;column<obj.gates[0].length;column++)for(var wire=0;wire<obj.numQubits;wire++){var gate=obj.gates[wire][column];if(gate&&0==gate.connector&&!this.basicGates[gate.name]){var tmp=new QuantumCircuit,custom=obj.customGates[gate.name];if(custom){if(tmp.load(custom),tmp.params.length&&gate.options&&gate.options.params)for(var globalParams=gate.options.params,cc=0;cc<tmp.gates[0].length;cc++)for(var ww=0;ww<tmp.numQubits;ww++){if((gg=tmp.gates[ww][cc])&&0==gg.connector&&gg.options&&gg.options.params)for(var destParam in gg.options.params){var transformed=math.parse(gg.options.params[destParam]).transform(function(node,path,parent){return node.isSymbolNode&&globalParams.hasOwnProperty(node.name)?math.parse("("+globalParams[node.name]+")"):node});gg.options.params[destParam]=transformed.toString()}}if(gate.options&&gate.options.condition)for(cc=0;cc<tmp.gates[0].length;cc++)for(var gg,ww=0;ww<tmp.numQubits;ww++){(gg=tmp.gates[ww][cc])&&(gg.options=gg.options||{},gg.options.condition=gate.options.condition)}var decomposed=tmp.save(!0);if(!decomposed.gates[0].length)for(var tmpq=0;tmpq<decomposed.gates.length;tmpq++)decomposed.gates[tmpq].push(null);for(var empty=[],i=0;i<decomposed.gates[0].length-1;i++)empty.push(null);for(var w=0;w<obj.numQubits;w++){var g=obj.gates[w][column];if(g&&g.id==gate.id){obj.gates[w].splice(column,1);for(var insertGate=JSON.parse(JSON.stringify(decomposed.gates[g.connector])),tmpq=0;tmpq<insertGate.length;tmpq++)insertGate[tmpq]&&(insertGate[tmpq].id=insertGate[tmpq].id+"_"+gate.id);obj.gates[w]=injectArray(obj.gates[w],insertGate,column)}else obj.gates[w]=injectArray(obj.gates[w],empty,column+1)}}}}return obj.customGates={},obj},QuantumCircuit.prototype.decomposeGateAt=function(column,wire){var self=this,gate=this.getGateAt(column,wire);if(gate&&this.customGates[gate.name]){var obj=new QuantumCircuit;obj.load(this.save());for(var col=0;col<obj.gates[0].length;col++)for(var row=0;row<obj.numQubits;row++){var g=obj.gates[row][col];g&&g.id!=gate.id&&obj.removeGateAt(col,row)}var circuit=new QuantumCircuit;circuit.load(obj.save(!0)),circuit.removeLeadingColumns(),circuit.removeTrailingColumns();for(var i=0;i<circuit.gates[0].length-1;i++)this.insertSpace(column+i,gate.wires);this.removeGate(gate.id);for(var destCol=column,col=0;col<circuit.gates[0].length;col++){circuit.getGatesAtColumn(col).map(function(g){self.addGate(g.name,destCol,g.wires,g.options)}),destCol++}return circuit}},QuantumCircuit.prototype.removeMeasurementAndClassicalControl=function(){for(var numCols=this.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var gate=this.gates[wire][column];gate&&"measure"==gate.name&&(gate=this.gates[wire][column]=null),gate&&gate.options&&gate.options.condition&&delete this.gates[wire][column].options.condition}this.cregs={},this.options&&(this.options.hybrid=!1,this.options.hybridOptions&&delete this.options.hybridOptions,this.options.encoderDecoder=!1,this.options.encoderDecoderOptions&&delete this.options.encoderDecoderOptions)},QuantumCircuit.prototype.convertToCustomGate=function(gateName,decompose,addToCircuit){for(var numCols=this.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var gate=this.gates[wire][column];gate&&"measure"==gate.name&&(gate=this.gates[wire][column]=null),gate&&gate.options&&gate.options.condition&&delete this.gates[wire][column].options.condition}this.cregs={};var source=this.save(decompose);if(source.options&&(source.options.hybrid=!1,source.options.hybridOptions&&delete source.options.hybridOptions,source.options.encoderDecoder=!1,source.options.encoderDecoderOptions&&delete source.options.encoderDecoderOptions),this.clear(),this.customGates[gateName]=source,addToCircuit){for(var wires=[],i=0;i<this.numQubits;i++)wires.push(i);var gateOptions=JSON.parse(JSON.stringify(this.customGates[gateName].options));this.addGate(gateName,-1,wires,gateOptions)}else this.removeTrailingRows()},QuantumCircuit.prototype.validCustomGateName=function(baseName){baseName=(baseName||"sub")+"";var customGateNames=[];if(this.customGates){if(!this.basicGates[baseName]&&!this.customGates[baseName])return baseName;for(var gateName in this.basicGates)customGateNames.push(gateName);for(var gateName in this.customGates)customGateNames.push(gateName)}for(var index=0,validName="";validName=baseName+ ++index,0<=customGateNames.indexOf(validName););return validName},QuantumCircuit.prototype.splitIntoBlocks=function(blockSize,options){options=options||{};var blocks=[],prevCondition="{}",prevIsUnitary=!0,currentBlock=null,decomposed=new QuantumCircuit;decomposed.load(this.save(!0));for(var numCols=decomposed.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<decomposed.numQubits;wire++){if((gate=decomposed.getGateAt(column,wire))&&0==gate.connector&&!gate.addedToBlock){var gateDef=this.basicGates[gate.name],currentCondition=gate.options&&gate.options.condition?JSON.stringify(gate.options.condition):"{}",currentIsUnitary=gateDef&&!(!gateDef.matrix||!gateDef.matrix.length),newWires=JSON.parse(JSON.stringify(currentBlock?currentBlock.wires:[]));if(gate.wires.map(function(wire){newWires.indexOf(wire)<0&&newWires.push(wire)}),blocks.length&&currentCondition==prevCondition&&currentIsUnitary&&prevIsUnitary&&newWires.length<=blockSize?(currentBlock.wires=newWires,currentBlock.gates.push(gate)):(currentBlock={wires:gate.wires,gates:[gate]},blocks.push(currentBlock),gate.options&&gate.options.condition&&(currentBlock.condition=gate.options.condition)),gate.wires.map(function(ww){decomposed.gates[ww][column].addedToBlock=!0}),prevCondition=currentCondition,prevIsUnitary=currentIsUnitary,!options.verticalOnly){var extColumn=column+1,extWires=JSON.parse(JSON.stringify(currentBlock.wires));for(extWires.sort();extColumn<numCols&&extWires.length;){for(extWire=extWires[0];extWires.length&&extWire<=extWires[extWires.length-1];){var extGate=decomposed.getGateAt(extColumn,extWire);if(extGate&&!extGate.addedToBlock){var extGateDef=this.basicGates[extGate.name],extCondition=extGate.options&&extGate.options.condition?JSON.stringify(extGate.options.condition):"{}",gateValid=extGateDef&&!(!extGateDef.matrix||!extGateDef.matrix.length)&&extCondition==currentCondition;if(gateValid)for(var ww=0;ww<extGate.wires.length;ww++)if(extWires.indexOf(extGate.wires[ww])<0){gateValid=!1;break}if(gateValid)currentBlock.gates.push(extGate),extGate.wires.map(function(ww){decomposed.gates[ww][extColumn].addedToBlock=!0});else{for(var validExtWires=[],ww=0;ww<extWires.length;ww++){var extW=extWires[ww];extGate.wires.indexOf(extW)<0&&validExtWires.push(extW)}extWires=validExtWires}}if(extWires.length){for(var newExtWire=extWires[extWires.length-1]+1,ww=extWires.length-1;0<=ww;ww--){(extW=extWires[ww])>extWire&&(newExtWire=extW)}extWire=newExtWire}}extColumn++}}}}for(var circuit=new QuantumCircuit,blockCounter=0,blockIndex=0;blockIndex<blocks.length;blockIndex++){var block=blocks[blockIndex],isBlock=!1;if(block.wires.length<=blockSize||options.flexibleBlockSize)for(var x=0;x<block.gates.length;x++){var gate=block.gates[x];(gateDef=this.basicGates[gate.name]).matrix&&gateDef.matrix.length&&(isBlock=!0)}if(isBlock){blockCounter++;for(var customGate=new QuantumCircuit,x=0;x<block.gates.length;x++){(gate=block.gates[x]).options.condition&&delete gate.options.condition;var wires=[];gate.wires.map(function(wire){wires.push(block.wires.indexOf(wire))}),gate.wires=wires,customGate.appendGate(gate.name,wires,gate.options)}var customGateName="block"+blockCounter;circuit.registerGate(customGateName,customGate);var customGateOptions={};block.condition&&(customGateOptions.condition=block.condition),circuit.appendGate(customGateName,block.wires,customGateOptions)}else block.gates.map(function(gate){circuit.appendGate(gate.name,gate.wires,gate.options)})}this.load(circuit.save(!1))},QuantumCircuit.prototype.usedGates=function(options){options=options||{};var decomposed=new QuantumCircuit;decomposed.load(this.save(!0));for(var used=[],wire=0;wire<decomposed.numQubits;wire++)for(var col=0;col<decomposed.numCols();col++){var skipGate,basicGate,gate=decomposed.gates[wire][col];gate&&used.indexOf(gate.name)<0&&(skipGate=!1,options.unitariesOnly&&((basicGate=decomposed.basicGates[gate.name])&&basicGate.matrix&&basicGate.matrix.length||(skipGate=!0)),skipGate||used.push(gate.name))}if(!options.noCustomGates)for(var customGateName in this.customGates){this.customGates[customGateName];used.indexOf(customGateName)<0&&used.push(customGateName)}return used},QuantumCircuit.prototype.countOps=function(obj,options){(options=options||{}).shallow=options.shallow||!1,obj=obj||this;for(var ops={},wire=0;wire<obj.gates.length;wire++)for(var col=0;col<obj.gates[wire].length;col++){var gate=obj.gates[wire][col];if(gate&&0==gate.connector)if(this.basicGates[gate.name])ops[gate.name]?ops[gate.name]++:ops[gate.name]=1;else{var customGate=this.customGates[gate.name];if(customGate&&(ops[gate.name]?ops[gate.name]++:ops[gate.name]=1,!options.shallow)){var subOps=this.countOps(customGate,options);for(subName in subOps)ops[subName]?ops[subName]+=subOps[subName]:ops[subName]=subOps[subName]}}}return ops},QuantumCircuit.prototype.getCouplingMap=function(options){options=options||{};var couplingMap="",decomposed=new QuantumCircuit;decomposed.load(this.save(!0));for(var wire=0;wire<decomposed.numQubits;wire++)for(var col=0;col<decomposed.numCols();col++){var skipGate,basicGate,wiresStr,gate=decomposed.getGateAt(col,wire);gate&&0==gate.connector&&(skipGate=!1,options.unitariesOnly&&((basicGate=decomposed.basicGates[gate.name])&&basicGate.matrix&&basicGate.matrix.length||(skipGate=!0)),skipGate||(wiresStr=JSON.stringify(gate.wires),couplingMap.indexOf(wiresStr)<0&&(couplingMap&&(couplingMap+=","),couplingMap+=wiresStr)))}return JSON.parse("["+couplingMap+"]")},QuantumCircuit.prototype.getGateDef=function(name){return this.basicGates[name]||this.customGates[name]},QuantumCircuit.prototype.importRaw=function(data,errorCallback){var numQubits=data&&data.qubits||0;if(this.init(numQubits),!data){if(!errorCallback)return;errorCallback([])}if(data.cregs)for(var i=0;i<data.cregs.length;i++){var creg=data.cregs[i];if(!creg.name){var errorMessage="Classical register "+i+' doesn\'t have a "name".';if(errorCallback)return void errorCallback([{msg:errorMessage,line:0,col:0}]);throw new Error(errorMessage)}this.createCreg(creg.name,creg.len||0)}if(data.program)for(i=0;i<data.program.length;i++){var gate=data.program[i];if(!gate.name){errorMessage="Gate "+i+' doesn\'t have a "name". Name is optional and this is OK for QubitToaster but we cannot import gate from matrix. Not implemented yet.';if(errorCallback)return void errorCallback([{msg:errorMessage,line:0,col:0}]);throw new Error(errorMessage)}var basicGate=this.basicGates[gate.name];if(!basicGate){errorMessage='Unknown gate "'+gate.name+'". Name is optional and this is OK for QubitToaster but we cannot import gate from matrix. We can import only gates by name from set of known gates.';if(errorCallback)return void errorCallback([{msg:errorMessage,line:0,col:0}]);throw new Error(errorMessage)}var wires=JSON.parse(JSON.stringify(gate.wires||[])),options=JSON.parse(JSON.stringify(gate.options||{})),basicGateQubits=basicGate.matrix&&basicGate.matrix.length?math.log2(basicGate.matrix.length):1;if(wires.length!=basicGateQubits){errorMessage='Gate "'+gate.name+'" has '+wires.length+" wires but should have "+basicGateQubits+" wires.";if(errorCallback)return void errorCallback([{msg:errorMessage,line:0,col:0}]);throw new Error(errorMessage)}if(basicGate.params&&basicGate.params.length){if(!options.params){errorMessage='Missing parameters for gate "'+gate.name+'". Expecting '+basicGate.params.length+" parameters.";if(errorCallback)return void errorCallback([{msg:errorMessage,line:0,col:0}]);throw new Error(errorMessage)}for(var p=0;p<basicGate.params.length;p++){var paramName=basicGate.params[p];if(void 0===options.params[paramName]){errorMessage='Missing parameter "'+paramName+'" for gate "'+gate.name+'".';if(errorCallback)return void errorCallback([{msg:errorMessage,line:0,col:0}]);throw new Error(errorMessage)}}}this.appendGate(gate.name,wires,options)}errorCallback&&errorCallback([])},QuantumCircuit.prototype.exportRaw=function(){var globalParams=this.options&&this.options.params?this.options.params:{},globalParams=JSON.parse(JSON.stringify(globalParams));for(var globalParamName in globalParams)globalParams[globalParamName]=math.evaluate(globalParams[globalParamName]);var decomposed=new QuantumCircuit;decomposed.load(this.save(!0));for(var numCols=decomposed.numCols(),sequence=[],column=0;column<numCols;column++)for(var wire=0;wire<decomposed.numQubits;wire++){var gate=decomposed.getGateAt(column,wire);if(gate&&0==gate.connector){var gt=decomposed.basicGates[gate.name];if(!gt)return void console.log('Unknown gate "'+gate.name+'".');var rawGate=decomposed.getRawGate(gt,gate.options),rawMatrix=[];rawGate.map(function(row){var rawRow=[];row.map(function(cell){"object"==typeof(cell=JSON.parse(JSON.stringify(cell)))&&cell.mathjs&&"string"==typeof cell.mathjs&&(cell.type=cell.mathjs.toLowerCase(),delete cell.mathjs),rawRow.push(cell)}),rawMatrix.push(rawRow)});var options={};if(gate.options&&(options=JSON.parse(JSON.stringify(gate.options))),options.params)for(var paramName in options.params)options.params[paramName]=math.evaluate(options.params[paramName],globalParams);sequence.push({name:gate.name,matrix:rawMatrix,wires:gate.wires,options:options})}}var cregs=[];for(var creg in decomposed.cregs)cregs.push({name:creg,len:decomposed.cregs[creg].length||0});return{qubits:decomposed.numQubits,cregs:cregs,program:sequence}},QuantumCircuit.prototype.exportToGenerator=function(options){options=options||{};var qasm=this.exportQASM(null,!1,null,!1,!0),usedGates=this.usedGates({noCustomGates:!0,unitariesOnly:!0}),couplingMap=this.getCouplingMap({unitariesOnly:!0}),output={source:{circuit:{qasm:qasm}},problem:[],type:"circuit",settings:{allowed_gates:usedGates.join(","),coupling_map:couplingMap}},circuit=new QuantumCircuit;if(circuit.load(this.save(!0)),options.fromMatrix){var matrix=circuit.circuitMatrix(),unitary=[];return matrix.map(function(row){row.map(function(value){"object"==typeof value?unitary.push([value.re,value.im]):unitary.push(value)})}),output.problem.push({unitary:unitary}),output}if(!options.noVectors)if(options.basisInputVectors){for(var vectorLen=math.pow(2,this.numQubits),numSamples=options.numSamples||vectorLen,initialVector=[],i=0;i<vectorLen;i++)initialVector.push(math.complex(0,0));for(i=0;i<numSamples;i++){var set={input:[],output:[]};initialVector[i]=math.complex(1,0),initialVector.map(function(el){set.input.push([el.re,el.im])}),circuit.run(null,{initialState:initialVector}),circuit.stateAsArray().map(function(state){set.output.push([state.amplitude.re,state.amplitude.im])}),output.problem.push(set),initialVector[i]=math.complex(0,0)}}else for(var stateCircuit=new QuantumCircuit,numSamples=options.numSamples||(this.numQubits<3?8:this.numQubits<5?1+(1<<this.numQubits):this.numQubits<9?4*this.numQubits:this.numQubits),i=0;i<numSamples+1;i++){set={input:[],output:[]},initialVector=[];initialVector=0<i?(stateCircuit.randomCircuit(this.numQubits,20,{useGates:options.useGates||["u3","cx"],noClassicControl:!0,noMeasure:!0,noReset:!0}),stateCircuit.run(),stateCircuit.stateAsArray().map(function(state){set.input.push([state.amplitude.re,state.amplitude.im])}),stateCircuit.state):(circuit.initState(),circuit.stateAsArray().map(function(state){set.input.push([state.amplitude.re,state.amplitude.im])}),circuit.state),circuit.run(null,{initialState:initialVector}),circuit.stateAsArray().map(function(state){set.output.push([state.amplitude.re,state.amplitude.im])}),output.problem.push(set)}return output},QuantumCircuit.prototype.save=function(decompose,lightweight){this.updateGlobalParams();var data={numQubits:this.numQubits,params:JSON.parse(JSON.stringify(this.params)),options:JSON.parse(JSON.stringify(this.options)),gates:JSON.parse(JSON.stringify(this.gates)),customGates:JSON.parse(JSON.stringify(this.customGates)),cregs:JSON.parse(JSON.stringify(this.cregs))},res=null,res=decompose?this.decompose(data):data;if(lightweight&&(res.gates&&res.gates.map(function(row){row&&row.map(function(cell){cell&&cell.id&&delete cell.id})}),res.customGates))for(var customGateName in res.customGates){var customGate=res.customGates[customGateName];customGate&&customGate.gates&&customGate.gates.map(function(row){row&&row.map(function(cell){cell&&cell.id&&delete cell.id})})}return res},QuantumCircuit.prototype.load=function(obj){this.numQubits=obj.numQubits||1,this.clear(),this.params=JSON.parse(JSON.stringify(obj.params||[])),this.options=JSON.parse(JSON.stringify(obj.options||{})),this.gates=JSON.parse(JSON.stringify(obj.gates||[])),this.customGates=JSON.parse(JSON.stringify(obj.customGates||{})),this.cregs=JSON.parse(JSON.stringify(obj.cregs||{})),this.options.params=this.options.params||{},this.options.hybrid=this.options.hybrid||!1,this.options.hybridOptions||(this.options.hybridOptions=this.defaultHybridOptions()),this.options.encoderDecoder=this.options.encoderDecoder||!1,this.options.encoderDecoderOptions||(this.options.encoderDecoderOptions=this.defaultEncoderDecoderOptions())};function generateGrayCode(numBits){if(numBits<=0)throw new Error("Cannot generate the gray code for less than 1 bit.");var result=[0];for(i=0;i<numBits;i++){[].concat(result).reverse().map(function(x){result.push(x+math.pow(2,i))})}var gray=[];return result.map(function(dec){gray.push(binStr(dec,numBits))}),gray}QuantumCircuit.prototype.grayCodeChain=function(numCtrlQubits,gateName,gateOptions){for(var qControls=[],i=0;i<numCtrlQubits;i++)qControls.push(i);var qTarget=numCtrlQubits,grayCode=generateGrayCode(numCtrlQubits),lastPattern=null,rules=[];return grayCode.map(function(pattern){var lmPos=pattern.indexOf("1");if(0<=lmPos){var pos=function(s1,s2){for(var comp=[],i=0;i<s1.length;i++)comp.push(s1[i]!=s2[i]);return comp}(pattern,lastPattern=lastPattern||pattern).indexOf(!0);if(0<=pos)if(pos!=lmPos)rules.push({gateName:"cx",wires:[qControls[pos],qControls[lmPos]],options:null});else for(var indices=function(s,ch){for(var indices=[],i=0;i<s.length;i++)s[i]==ch&&indices.push(i);return indices}(pattern,"1"),idx=1;idx<indices.length;idx++)rules.push({gateName:"cx",wires:[qControls[indices[idx]],qControls[lmPos]],options:null});if(function(s,ch){for(var count=0,i=0;i<s.length;i++)s[i]==ch&&count++;return count}(pattern,"1")%2)rules.push({gateName:gateName,wires:[qControls[lmPos],qTarget],options:gateOptions});else{var inverseOptions=null;if(gateOptions&&(inverseOptions=JSON.parse(JSON.stringify(gateOptions))).params)for(key in inverseOptions.params){var val="number"==typeof(val=inverseOptions.params[key])?0-val:"-("+val+")";inverseOptions.params[key]=val}rules.push({gateName:gateName,wires:[qControls[lmPos],qTarget],options:inverseOptions})}lastPattern=pattern}}),rules},QuantumCircuit.prototype.MCU1Circuit=function(ctrlQubits){var numCtrlQubits=0,invertControls=[];if("number"==typeof ctrlQubits)numCtrlQubits=ctrlQubits;else{numCtrlQubits=ctrlQubits.length||0;for(var i=0;i<numCtrlQubits;i++)(!ctrlQubits[i]||"number"==typeof ctrlQubits[i]&&ctrlQubits[i]<0)&&invertControls.push(i)}if(0==numCtrlQubits)throw new Error("Cannot create multi-controlled gate with zero control qubits.");function addX(circuit,wires){wires.map(function(wire){circuit.appendGate("x",wire)})}var gateOptions={params:{lambda:"lambda / "+math.pow(2,numCtrlQubits-1)}},qc=new QuantumCircuit;return 1==numCtrlQubits?(addX(qc,invertControls),qc.appendGate("cu1",[0,1],gateOptions)):(addX(qc,invertControls),this.grayCodeChain(numCtrlQubits,"cu1",gateOptions).map(function(rule){qc.appendGate(rule.gateName,rule.wires,rule.options)})),addX(qc,invertControls),qc},QuantumCircuit.prototype.MCXCircuit=function(ctrlQubits){var numCtrlQubits=0,invertControls=[];if("number"==typeof ctrlQubits)numCtrlQubits=ctrlQubits;else{numCtrlQubits=ctrlQubits.length||0;for(var i=0;i<numCtrlQubits;i++)(!ctrlQubits[i]||"number"==typeof ctrlQubits[i]&&ctrlQubits[i]<0)&&invertControls.push(i)}var qc=new QuantumCircuit;if(0==numCtrlQubits)throw new Error("Cannot create multi-controlled gate with zero control qubits.");function addX(circuit,wires){wires.map(function(wire){circuit.appendGate("x",wire)})}if(1==numCtrlQubits)return addX(qc,invertControls),qc.appendGate("cx",[0,1]),addX(qc,invertControls),qc;if(2==numCtrlQubits)return addX(qc,invertControls),qc.appendGate("ccx",[0,1,2]),addX(qc,invertControls),qc;for(var mcu1=qc.MCU1Circuit(numCtrlQubits),mcu1name="mcu1_"+numCtrlQubits,mcu1wires=[],i=0;i<numCtrlQubits+1;i++)mcu1wires.push(i);return qc.registerGate(mcu1name,mcu1),addX(qc,invertControls),qc.appendGate("h",numCtrlQubits),qc.appendGate(mcu1name,mcu1wires,{params:{lambda:"pi"}}),addX(qc,invertControls),qc.appendGate("h",numCtrlQubits),qc},QuantumCircuit.prototype.registerGate=function(name,obj){if(this.customGates[name]=obj instanceof QuantumCircuit?obj.save():obj,this.isMultiControlledGate(name)){var mcInfo=this.decodeMultiControlledGateName(name);if(mcInfo.numCtrlQubits!=this.customGates[name].numQubits-1){mcInfo.numCtrlQubits=this.customGates[name].numQubits-1;for(var ctrlQubits=[],i=0;i<mcInfo.numCtrlQubits;i++)ctrlQubits.push(void 0===mcInfo.ctrlQubits[i]||mcInfo.ctrlQubits[i]);mcInfo.ctrlQubits=ctrlQubits}var connectors,rootGate=this.basicGates[mcInfo.rootName];rootGate&&rootGate.drawingInfo&&rootGate.drawingInfo.connectors&&(this.customGates[name].drawingInfo||(this.customGates[name].drawingInfo={}),connectors=[],mcInfo.ctrlQubits.map(function(ctrlQubit){ctrlQubit?connectors.push("dot"):connectors.push("ndot")}),connectors.push(rootGate.drawingInfo.connectors[rootGate.drawingInfo.connectors.length-1]),this.customGates[name].drawingInfo.connectors=connectors,this.customGates[name].drawingInfo.root=rootGate.drawingInfo.root)}},QuantumCircuit.prototype.registerMCXGate=function(ctrlQubits){var gateName=this.multiControlledGateName("mcx",ctrlQubits);return this.registerGate(gateName,this.MCXCircuit(ctrlQubits).save(!0)),gateName},QuantumCircuit.prototype.registerMCU1Gate=function(ctrlQubits){var gateName=this.multiControlledGateName("mcu1",ctrlQubits);return this.registerGate(gateName,this.MCU1Circuit(ctrlQubits).save(!0)),gateName},QuantumCircuit.prototype.registerMultiControlledGate=function(rootName,ctrlQubits){switch(rootName){case"cx":return this.registerMCXGate(ctrlQubits);case"cu1":return this.registerMCU1Gate(ctrlQubits)}return""},QuantumCircuit.prototype.getOrRegisterMultiControlledEquivalent=function(gateName,inverseControl){var gateDef=this.basicGates[gateName];if(gateDef){if(gateDef.drawingInfo&&("x"==gateName||"u1"==gateName||"x"==gateDef.drawingInfo.root||"u1"==gateDef.drawingInfo.root)){if(this.basicGates["c"+gateName]&&!inverseControl)return"c"+gateName;for(var rootName="c"+(gateDef.drawingInfo.root||gateName),numCtrlQubits=math.log2(gateDef.matrix.length),ctrlQubits=[],i=0;i<numCtrlQubits-1;i++)ctrlQubits.push(!0);return ctrlQubits.unshift(!inverseControl),this.registerMultiControlledGate(rootName,ctrlQubits)}for(var gn in this.basicGates){var tmpGateDef=this.basicGates[gn];if(tmpGateDef&&tmpGateDef.drawingInfo&&tmpGateDef.drawingInfo.root&&tmpGateDef.drawingInfo.root==gateName&&!inverseControl)return gn}return null}if(this.customGates[gateName]){var mcInfo=this.decodeMultiControlledGateName(gateName);return mcInfo&&mcInfo.numCtrlQubits?"cx"==mcInfo.rootName||"cu1"==mcInfo.rootName?(mcInfo.ctrlQubits.unshift(!inverseControl),this.registerMultiControlledGate(mcInfo.rootName,mcInfo.ctrlQubits)):null:null}return null},QuantumCircuit.prototype.removeUnusedMultiControlledGates=function(){var ops=this.countOps(null,{shallow:!1});for(gateName in this.customGates)ops[gateName]||this.isMultiControlledGate(gateName)&&delete this.customGates[gateName]},QuantumCircuit.prototype.decodeMultiControlledGateName=function(gateName){if(!gateName)return null;var numCtrlQubits,mcInfo={},splitted=gateName.split("_");if(0<splitted.length&&(mcInfo.name=splitted[0],mcInfo.rootName=mcInfo.name.substring(1),"cx"!=mcInfo.rootName&&"cu1"!=mcInfo.rootName))return null;if(1<splitted.length&&(numCtrlQubits=parseInt(splitted[1]),!isNaN(numCtrlQubits)&&numCtrlQubits<=20&&(mcInfo.numCtrlQubits=numCtrlQubits)),mcInfo.numCtrlQubits){var ctrlQubits=[];if(2<splitted.length)for(var i=0;i<splitted[2].length;i++)"0"==splitted[2][i]&&ctrlQubits.push(!1),"1"==splitted[2][i]&&ctrlQubits.push(!0);if(!ctrlQubits.length)for(i=0;i<numCtrlQubits;i++)ctrlQubits.push(!0);mcInfo.ctrlQubits=ctrlQubits}return mcInfo},QuantumCircuit.prototype.multiControlledGateName=function(namePrefix,ctrlQubits){var wires,gateName=namePrefix+"_";return"number"==typeof ctrlQubits?gateName+=ctrlQubits:(gateName+=ctrlQubits.length||0,wires="",ctrlQubits.map(function(wire){wires+=!wire||"number"==typeof wire&&wire<0?"0":"1"}),wires.indexOf("0")<0&&(wires=""),wires&&(gateName+="_"+wires)),gateName},QuantumCircuit.prototype.isMultiControlledGate=function(gateName){var mcInfo=this.decodeMultiControlledGateName(gateName);return!!this.customGates[gateName]&&!!mcInfo&&!!mcInfo.numCtrlQubits},QuantumCircuit.prototype.isControllableGate=function(gateName){var gateDef=this.basicGates[gateName];if(gateDef){if(gateDef.drawingInfo&&("x"==gateDef.drawingInfo.root||"u1"==gateDef.drawingInfo.root))return!0;for(var gn in this.basicGates){if((gateDef=this.basicGates[gn])&&gateDef.drawingInfo&&gateDef.drawingInfo.root&&gateDef.drawingInfo.root==gateName)return!0}}return this.isMultiControlledGate(gateName)},QuantumCircuit.prototype.getGatePosById=function(gateId){for(var numCols=this.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var gate=this.getGateAt(column,wire);if(gate&&gate.id==gateId)return{wires:gate.wires,col:column}}return{wires:[],col:-1}},QuantumCircuit.prototype.getGateById=function(gateId){for(var numCols=this.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var gate=this.getGateAt(column,wire);if(gate&&gate.id==gateId)return gate}return null},QuantumCircuit.prototype.getGateBefore=function(column,wire){for(var gate=null,col=column-1;0<=col&&!gate;)gate=this.getGateAt(col,wire),col--;return gate},QuantumCircuit.prototype.getGateAt=function(column,wire){if(!this.gates[wire]||!this.gates[wire][column])return null;var gate=JSON.parse(JSON.stringify(this.gates[wire][column]));if(!gate)return null;gate.column=column,gate.wires=[];for(var id=gate.id,numWires=this.gates.length,wire=0;wire<numWires;wire++){var g=this.gates[wire][column];g&&g.id==id&&(gate.wires[g.connector]=wire)}return gate},QuantumCircuit.prototype.getGatesAtColumn=function(column){for(var gates=[],numWires=this.gates.length,wire=0;wire<numWires;wire++){var gate=this.getGateAt(column,wire);gate&&0==gate.connector&&gates.push(gate)}return gates},QuantumCircuit.prototype.getControllableGatesAtColumn=function(column){for(var gates=this.getGatesAtColumn(column),controllableGates=[],i=0;i<gates.length;i++){var gate=gates[i];this.isControllableGate(gate.name)&&controllableGates.push(gate)}return controllableGates},QuantumCircuit.prototype.exportJavaScript=function(comment,decompose,exportAsGateName,asJupyter){var self=this,circuit=null;decompose?(circuit=new QuantumCircuit).load(this.save(!0)):circuit=this;var js="";comment&&(comment||"").split("\n").map(function(cline){2<=cline.length&&"/"!=cline[0]&&"/"!=cline[1]&&(js+="// "),js+=cline,js+="\n"});var usedGates,customGatesAdded,indent="",circuitVar="";exportAsGateName?(js+="const "+exportAsGateName+" = function() {\n",js+=(indent="    ")+"const "+(circuitVar="circ")+" = new QuantumCircuit("+circuit.numQubits+");\n\n",circuit.params&&circuit.params.length&&(js+=indent+circuitVar+".params = "+JSON.stringify(circuit.params)+"\n\n")):(js+=(indent="")+'const QuantumCircuit = require("quantum-circuit");\n\n',js+=indent+"const "+(circuitVar="circuit")+" = new QuantumCircuit("+circuit.numQubits+");\n\n",usedGates=circuit.usedGates(),decompose||(customGatesAdded=[],usedGates.map(function(usedGateName){var customGate,customCircuit;circuit.basicGates[usedGateName]||(customGate=self.customGates[usedGateName])&&((customCircuit=new QuantumCircuit).load(customGate),js+=customCircuit.exportJavaScript("",!0,usedGateName),customGatesAdded.push(usedGateName))}),customGatesAdded.map(function(customGateName){js+=indent+circuitVar+'.registerGate("'+customGateName+'", '+customGateName+"());\n"}),0<customGatesAdded.length&&(js+="\n")));var cregCount=0;for(var cregName in this.cregs)js+=indent+circuitVar+'.createCreg("'+cregName+'", '+(this.cregs[cregName].length||1)+");\n",cregCount++;0<cregCount&&(js+="\n");for(var numCols=circuit.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var gate=circuit.getGateAt(column,wire);if(gate&&0==gate.connector)if("measure"==gate.name&&gate.options&&gate.options.creg)js+=indent+circuitVar+".addMeasure("+wire+', "'+gate.options.creg.name+'", '+gate.options.creg.bit+");\n";else{if(js+=indent+circuitVar+'.appendGate("'+gate.name+'"',1==gate.wires.length)js+=", ",js+=gate.wires[0];else{js+=", [";for(var w=0;w<gate.wires.length;w++)0<w&&(js+=","),js+=gate.wires[w];js+="]"}if(gate.options){var obj,skip,opt={};for(var optKey in gate.options){gate.options[optKey]&&(skip=!1,"object"==typeof(obj=gate.options[optKey])&&0===Object.keys(obj).length&&obj.constructor===Object&&(skip=!0),skip||(opt[optKey]=obj))}js+=", "+JSON.stringify(opt)}js+=");\n"}}if(exportAsGateName?(js+="\n",js+=indent+"return "+circuitVar+";\n",js+="};\n\n"):(js+="\n",js+=indent+circuitVar+".run();\n\n",js+=indent+'console.log("Probabilities:");\n',js+=indent+"console.log(JSON.stringify(circuit.probabilities()));\n\n",js+=indent+'console.log("Measure all:");\n',js+=indent+"console.log(JSON.stringify(circuit.measureAll()));\n\n",circuit.cregCount()&&(js+=indent+'console.log("Classical registers:");\n',js+=indent+"console.log(circuit.cregsAsString());\n\n")),asJupyter){var notebook={metadata:{kernelspec:{display_name:"Javascript (Node.js)",language:"javascript",name:"javascript"},language_info:{file_extension:".js",mimetype:"application/javascript",name:"javascript"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:js,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(notebook)}return js},QuantumCircuit.prototype.exportQiskit=function(comment,decompose,exportAsGateName,versionStr,providerName,backendName,asJupyter,shots,circuitReplacement,insideSubmodule,hybrid,encoderDecoder){var options={comment:comment,decompose:decompose,versionStr:versionStr,providerName:providerName,backendName:backendName,asJupyter:asJupyter,shots:shots,hybrid:hybrid,encoderDecoder:encoderDecoder};return this.exportToQiskit(options,exportAsGateName,circuitReplacement,insideSubmodule)},QuantumCircuit.prototype.exportCudaQ=function(comment,decompose,exportAsGateName,versionStr,providerName,backendName,asJupyter,shots,circuitReplacement,insideSubmodule,hybrid,encoderDecoder){var options={comment:comment,decompose:decompose,versionStr:versionStr,providerName:providerName,backendName:backendName,asJupyter:asJupyter,shots:shots,hybrid:hybrid,encoderDecoder:encoderDecoder};return this.exportToCudaQ(options,exportAsGateName,circuitReplacement,insideSubmodule)},QuantumCircuit.prototype.exportQuEST=function(comment,decompose,exportAsGateName,definedFunc){var newOptions={comment:comment,decompose:decompose};return this.exportToQuEST(newOptions,exportAsGateName,definedFunc)},QuantumCircuit.prototype.exportQASM=function(comment,decompose,exportAsGateName,circuitReplacement,compatibilityMode,insideSubmodule){var options={comment:comment,decompose:decompose,compatibilityMode:compatibilityMode};return this.exportToQASM(options,exportAsGateName,circuitReplacement,insideSubmodule)},QuantumCircuit.prototype.importQASM=function(input,errorCallback,compatibilityMode){this.init(),QASMImport(this,input,errorCallback,compatibilityMode)},QuantumCircuit.prototype.exportPyquil=function(comment,decompose,exportAsGateName,versionStr,lattice,asQVM,asJupyter,shots,hybrid,encoderDecoder){var options={comment:comment,decompose:decompose,versionStr:versionStr,lattice:lattice,asQVM:asQVM,asJupyter:asJupyter,shots:shots,hybrid:hybrid,encoderDecoder:encoderDecoder};return this.exportToPyquil(options,exportAsGateName)},QuantumCircuit.prototype.exportQuil=function(comment,decompose,exportAsGateName,versionStr){var options={comment:comment,decompose:decompose,versionStr:versionStr};return this.exportToQuil(options,exportAsGateName)},QuantumCircuit.prototype.importQuil=function(quil,errorCallback,options,qubitNames,renamedGates,lineOffset){var self=this;function getGateInfo(gateName){if(self.customGates&&self.customGates[gateName])return{name:gateName,customGate:self.customGates[gateName]};for(var gname in self.basicGates){var gdef=self.basicGates[gname];if(gdef.exportInfo){if(gdef.exportInfo.quil&&gdef.exportInfo.quil.name==gateName)return{name:gname,gateDef:gdef,quilDef:gdef.exportInfo.quil};if(gdef.exportInfo.pyquil&&gdef.exportInfo.pyquil.name==gateName)return{name:gname,gateDef:gdef,quilDef:gdef.exportInfo.pyquil}}}return null}options=options||{},self.init(),renamedGates=renamedGates||{},lineOffset=lineOffset||0;var lines=quil.split("\n"),commands=[],multiline=!1;lines.map(function(line,lineIndex){var clines,codelines;(line=line.split("#")[0]).length?line=line.trim():multiline=!1,multiline?(codelines=line.split(";")).map(function(codeline){codeline.trim().length&&commands[commands.length-1].body.push(codeline.trim())}):line.length&&(clines=line.split(";"),codelines=[],clines.map(function(cline){cline.trim().length&&codelines.push(cline.trim())}),codelines.map(function(codeline){var tokens=codeline.split(" "),lastToken=tokens[tokens.length-1];if(lastToken.length&&(":"==lastToken[lastToken.length-1]&&(multiline=!0,lastToken=lastToken.substring(0,lastToken.length-1),tokens[tokens.length-1]=lastToken),tokens.length)){var type="GATE";"DEFGATE"!=tokens[0]&&"DEFCIRCUIT"!=tokens[0]||(type=tokens[0],tokens.splice(0,1));var paramEnd,name=tokens.join(" "),params=[],paramStart=name.indexOf("(");0<=paramStart?paramStart<(paramEnd=name.indexOf(")"))&&((params=name.substring(paramStart+1,paramEnd).split(",")).map(function(par,ndx){for(par=par.trim();par.length&&"%"==par[0];)par=par.slice(1);params[ndx]=par}),paramEnd+1<=name.length?(tok=name.substring(paramEnd+1,name.length).split(" "),tokens=[],tok.map(function(tk){(tk=tk.trim()).length&&tokens.push(tk)})):tokens=[],name=name.substring(0,paramStart).trim()):name=tokens.splice(0,1)[0].trim();for(var args=[],t=0;t<tokens.length;t++){var qindex,token=tokens[t];qubitNames&&0<=(qindex=qubitNames.indexOf(token))?args.push(qindex):args.push(token)}commands.push({type:type,name:name,params:params,args:args,body:[],line:lineIndex,col:0})}}))});for(var commandCount=commands.length,commandIndex=0;commandIndex<commandCount;commandIndex++){var newName,gateInfo,command=commands[commandIndex];switch(renamedGates[command.name]&&(command.name=renamedGates[command.name]),command.type){case"DEFGATE":command.name==command.name.toUpperCase()&&(newName=command.name.toLowerCase(),renamedGates[command.name]=newName,command.name=newName);break;case"DEFCIRCUIT":command.name==command.name.toUpperCase()&&(newName=command.name.toLowerCase(),renamedGates[command.name]=newName,command.name=newName);var subQuil=command.body.join("\n"),subQubitNames=command.args,subCircuit=new QuantumCircuit;subCircuit.importQuil(subQuil,errorCallback,options,subQubitNames,renamedGates,command.line+1),subCircuit.params=JSON.parse(JSON.stringify(command.params)),self.registerGate(command.name,subCircuit.save());break;case"GATE":switch(command.name){case"DECLARE":case"DEFFRAME":case"DEFWAVEFORM":case"PULSE":break;case"SET-FREQUENCY":case"SHIFT-FREQUENCY":break;case"SET-PHASE":case"SHIFT-PHASE":case"SET-SCALE":break;case"CAPTURE":case"RAW-CAPTURE":break;case"FENCEALL":if(!(gateInfo=getGateInfo("FENCE"))){var errorMessage='Cannot recognize "'+command.name+'".';if(errorCallback)return void errorCallback([{msg:errorMessage,line:lineOffset+command.line,col:command.col}]);throw new Error(errorMessage)}var destCol=self.lastNonEmptyPlace([0,self.numQubits-1],!1);destCol+=1;for(var destWire=0;destWire<self.numQubits;destWire++)self.addGate(gateInfo.name,destCol,destWire);break;case"DELAY":case"HALT":case"PRAGMA":break;default:if(!(gateInfo=getGateInfo(command.name))){errorMessage='Cannot recognize "'+command.name+'".';if(errorCallback)return void errorCallback([{msg:errorMessage,line:lineOffset+command.line,col:command.col}]);throw new Error(errorMessage)}var params={};if(gateInfo.gateDef){var gateDef=gateInfo.gateDef,quilDef=gateInfo.quilDef;if((quilDef.params||[]).length!=(command.params||[]).length){errorMessage="Invalid number of params. Expected "+(quilDef.params||[]).length+" got "+(command.params||[]).length+".";if(errorCallback)return void errorCallback([{msg:errorMessage,line:lineOffset+command.line,col:command.col}]);throw new Error(errorMessage)}for(var i=0;i<gateDef.params.length;i++){var paramName=gateDef.params[i],paramIndex=quilDef.params.indexOf(paramName);if(paramIndex<0||paramIndex>=command.params.length){errorMessage='Internal error: QUIL definition for gate "'+command.name+" is invalid.";if(errorCallback)return void errorCallback([{msg:errorMessage,line:lineOffset+command.line,col:command.col}]);throw new Error(errorMessage)}params[paramName]=command.params[paramIndex]}}else{if(((gateDef=gateInfo.customGate).params||[]).length!=(command.params||[]).length){errorMessage="Invalid number of params. Expected "+(gateDef.params||[]).length+" got "+(command.params||[]).length+".";if(errorCallback)return void errorCallback([{msg:errorMessage,line:lineOffset+command.line,col:command.col}]);throw new Error(errorMessage)}for(i=0;i<gateDef.params.length;i++){params[paramName=gateDef.params[i]]=command.params[i]}}if("MEASURE"==command.name){if(2!=command.args.length){errorMessage="Expecting 2 arguments (qubit and target register) but found "+command.args.length+".";if(errorCallback)return void errorCallback([{msg:errorMessage,line:lineOffset+command.line,col:command.col}]);throw new Error(errorMessage)}}else{var qubitCount=1;if(gateDef.numQubits?qubitCount=gateDef.numQubits:gateDef.matrix&&gateDef.matrix.length&&(qubitCount=math.log2(gateDef.matrix.length)),command.args.length!=qubitCount){errorMessage="Expecting "+qubitCount+" arguments but found "+command.args.length+".";if(errorCallback)return void errorCallback([{msg:errorMessage,line:lineOffset+command.line,col:command.col}]);throw new Error(errorMessage)}}for(var args=[],creg={},i=0;i<command.args.length;i++){var arg=command.args[i];if("MEASURE"==command.name){var cregStart=arg.indexOf("[");if(0<=cregStart){var cregEnd=arg.indexOf("]");cregStart<cregEnd&&(cregBit=arg.substring(cregStart+1,cregEnd),cregName=arg.substring(0,cregStart),creg={bit:cregBit,name:cregName})}else{var argInt=parseInt(arg);if(isNaN(argInt)){if(!(0<i)){errorMessage='Invalid argument "'+arg+'"';if(errorCallback)return void errorCallback([{msg:errorMessage,line:lineOffset+command.line,col:command.col}]);throw new Error(errorMessage)}args.push(arg)}args.push(argInt)}}else{argInt=parseInt(arg);if(isNaN(argInt)){errorMessage='Invalid argument "'+arg+'"';if(errorCallback)return void errorCallback([{msg:errorMessage,line:lineOffset+command.line,col:command.col}]);throw new Error(errorMessage)}args.push(argInt)}}self.appendGate(gateInfo.name,args,{params:params,creg:creg})}}}errorCallback&&errorCallback([])},QuantumCircuit.prototype.importIonq=function(data,errorCallback){var self=this,numQubits=data.qubits||1;if(self.init(numQubits),!data.circuit){if(errorCallback)return void errorCallback([{msg:"Invalid file format.",line:-1,col:-1}]);throw new Error("Invalid file format.")}data.circuit.map(function(ionqGate){var gateInfo=function(gateName){if(self.customGates&&self.customGates[gateName])return{name:gateName,customGate:self.customGates[gateName]};for(var gname in self.basicGates){var gdef=self.basicGates[gname];if(gdef.exportInfo&&gdef.exportInfo.ionq&&(gdef.exportInfo.ionq.name&&gdef.exportInfo.ionq.name==gateName||gdef.exportInfo.ionq.names&&0<=gdef.exportInfo.ionq.names.indexOf(gateName)))return{name:gname,gateDef:gdef}}return null}(ionqGate.gate);if(!gateInfo){var errorMessage='Unknown gate "'+ionqGate.gate+'"';if(errorCallback)return void errorCallback([{msg:errorMessage,line:-1,col:-1}]);throw new Error(errorMessage)}var wires=[];void 0!==ionqGate.control&&wires.push(ionqGate.control),void 0!==ionqGate.controls&&(wires=wires.concat(ionqGate.controls)),void 0!==ionqGate.target&&wires.push(ionqGate.target),void 0!==ionqGate.targets&&(wires=wires.concat(ionqGate.targets));var params=[];void 0!==ionqGate.rotation&&params.push(ionqGate.rotation),void 0!==ionqGate.phase&&params.push(ionqGate.phase),void 0!==ionqGate.phases&&(params=params.concat(ionqGate.phases));var gateQubits=gateInfo.gateDef?gateInfo.gateDef.matrix?math.log2(gateInfo.gateDef.matrix.length):1:gateInfo.customGate.numQubits||1,gateParams=gateInfo.gateDef?gateInfo.gateDef.params||[]:gateInfo.customGate.params||[];if(wires.length!=gateQubits){errorMessage='Gate "'+ionqGate.gate+'": invalid number of qubits. Expected '+gateQubits+" but got "+wires.length+".";if(errorCallback)return void errorCallback([{msg:errorMessage,line:-1,col:-1}]);throw new Error(errorMessage)}if(params.length!=gateParams.length){errorMessage='Gate "'+ionqGate.gate+'": invalid number of params. Expected '+gateParams.length+" but got "+params.length+".";if(errorCallback)return void errorCallback([{msg:errorMessage,line:-1,col:-1}]);throw new Error(errorMessage)}var options={};params.length&&(options.params={},gateParams.map(function(paramName,paramIndex){options.params[paramName]=ionqGate.rotation?params[paramIndex]:2*math.pi*params[paramIndex]})),self.appendGate(gateInfo.name,wires,options)}),errorCallback&&errorCallback([])},QuantumCircuit.prototype.exportToIonq=function(options,circuitReplacement){var globalParams=this.options&&this.options.params?this.options.params:{},globalParams=JSON.parse(JSON.stringify(globalParams));for(var globalParamName in globalParams)globalParams[globalParamName]=math.evaluate(globalParams[globalParamName]);var circuit=new QuantumCircuit;circuit.load(this.save(!0));for(var ionqCircuit={qubits:circuit.numQubits,circuit:[]},numCols=circuit.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<circuit.numQubits;wire++){var gateDef,ionqGate,gate=circuit.getGateAt(column,wire);gate&&0==gate.connector&&((gateDef=circuit.getGateDef(gate.name)).exportInfo&&gateDef.exportInfo.ionq&&(gateDef.exportInfo.ionq.name||gateDef.exportInfo.ionq.names)?(ionqGate={gate:gateDef.exportInfo.ionq.name||gateDef.exportInfo.ionq.names[0]},gateDef.params&&gateDef.params.length&&(ionqGate[gateDef.exportInfo.ionq.paramsKey]=[],gateDef.params.map(function(paramName){var paramValue=math.evaluate(gate.options.params[paramName],globalParams);"rotation"!=gateDef.exportInfo.ionq.paramsKey&&(paramValue/=2*math.pi),ionqGate[gateDef.exportInfo.ionq.paramsKey].push(paramValue)}))):ionqGate={gate:'Export gate "'+gate.name+'" to IONQ not supported yet. Comming soon.'},ionqCircuit.circuit.push(ionqGate))}return ionqCircuit},QuantumCircuit.prototype.exportQuirk=function(){circuit=new QuantumCircuit,circuit.load(this.save(!0));for(var quirk={cols:[],gates:[]},numQubits=circuit.numQubits,emptyColumn=[],wire=0;wire<numQubits;wire++)emptyColumn.push(1);for(var numCols=circuit.numCols(),column=0;column<numCols;column++)quirk.cols.push(JSON.parse(JSON.stringify(emptyColumn)));for(var quirkCol=0,processedGateIds=[],column=0;column<numCols;column++){for(var columnGotControl=!1,quirkName="",ignoreSubsequent=!1,firstGateInColumn=!0,wire=0;wire<numQubits;wire++){var gateDef,quirkInfo,globalParams,minWire,maxWire,targetWires,rawMatrix,gateMatrix,matrix,gate=circuit.getGateAt(column,wire);gate&&(quirkInfo=(gateDef=circuit.basicGates[gate.name]).exportInfo.quirk||{},processedGateIds.indexOf(gate.id)<0&&(processedGateIds.push(gate.id),ignoreSubsequent=!1,quirkInfo.name?(definedGate=!1,quirkName=quirkInfo.name):(definedGate=!0,quirkName="~"+gate.name,gateDef.params.length&&gate.options.params&&(globalParams=circuit.options&&circuit.options.params?circuit.options.params:{},gateDef.params.map(function(param){angle=math.round(math.evaluate(gate.options.params[param],globalParams),7),quirkName+="_"+angle})),minWire=math.min(gate.wires),maxWire=math.max(gate.wires),targetWires=[],gate.wires.map(function(tWire){var wIndex=tWire-minWire;targetWires.push(wIndex),quirkName+="_"+wIndex}),quirk.gates.find(function(gt){return gt.id==quirkName})||(rawMatrix=circuit.getRawGate(gateDef,gate.options),gateMatrix=circuit.transformMatrix(maxWire-minWire+1,rawMatrix,targetWires),matrix="{",gateMatrix.map(function(row,rowIndex){0<rowIndex&&(matrix+=","),matrix+="{",row.map(function(col,colIndex){0<colIndex&&(matrix+=","),col="object"!=typeof col?math.complex(col).toString():col.toString(),matrix+=col}),matrix+="}"}),matrix+="}",quirk.gates.push({id:quirkName,matrix:matrix}))),firstGateInColumn||columnGotControl||(columnGotControl=!!quirkInfo.controlQubits),columnGotControl?(quirk.cols.splice(quirkCol+1,0,JSON.parse(JSON.stringify(emptyColumn))),quirkCol++):columnGotControl=!!quirkInfo.controlQubits,firstGateInColumn=!1),ignoreSubsequent||(gate.connector<quirkInfo.controlQubits?quirk.cols[quirkCol][wire]="\u2022":quirk.cols[quirkCol][wire]=quirkName),ignoreSubsequent=definedGate)}quirkCol++}return quirk},QuantumCircuit.prototype.exportCirq=function(comment,decompose,exportAsGateName,versionStr,asJupyter,shots,exportTfq){var options={comment:comment,decompose:decompose,versionStr:versionStr,asJupyter:asJupyter,shots:shots,exportTfq:exportTfq};return this.exportToCirq(options,exportAsGateName)},QuantumCircuit.prototype.exportQSharp=function(comment,decompose,exportAsGateName,versionStr,asJupyter,circuitName,indentDepth){var options={comment:comment,decompose:decompose,versionStr:versionStr,asJupyter:asJupyter,circuitName:circuitName,indentDepth:indentDepth};return this.exportToQSharp(options,exportAsGateName)},QuantumCircuit.prototype.exportQobj=function(circuitName,experimentName,numShots,circuitReplacement){var options={circuitName:circuitName,experimentName:experimentName,numShots:numShots};return this.exportToQobj(options,circuitReplacement)},QuantumCircuit.prototype.importQobj=function(qobj,errorCallback){var self=this;if(this.init(),qobj&&qobj.experiments&&qobj.experiments.length){var experiment=qobj.experiments[0],header=experiment.header||{};this.init(parseInt(header.n_qubits||0));var cregData={};if(header.creg_sizes&&header.creg_sizes.length)for(var totalBits=0,i=0;i<header.creg_sizes.length;i++){var cregName,cregLen,cregMask,cregDef=header.creg_sizes[i];1<cregDef.length&&(cregName=cregDef[0]+"",cregLen=parseInt(cregDef[1]),this.createCreg(cregName,cregLen),cregMask=(1<<totalBits+cregLen)-(1<<totalBits),cregData[cregName]={mask:cregMask,offset:totalBits},totalBits+=cregLen)}experiment.instructions;for(var conditions={},instIndex=0;instIndex<experiment.instructions.length;instIndex++){var inst=experiment.instructions[instIndex];switch(inst.name){case"bfunc":if(!(condition=function(mask,value){for(var cregName in cregData){var data=cregData[cregName];if(data.mask==mask)return{creg:cregName,value:value>>data.offset}}}(parseInt(inst.mask),parseInt(inst.val)))){var errorMessage="Invalid classical condition.";if(errorCallback)return void errorCallback([{msg:errorMessage}]);throw new Error(errorMessage)}conditions[inst.register]=condition;break;case"measure":for(var qIndex=0;qIndex<inst.qubits.length;qIndex++){var qubit=inst.qubits[qIndex],creg=function(memory){var totalBits=0;for(var cregName in self.cregs){var creg=self.cregs[cregName];if(totalBits+creg.length>memory)return{name:cregName,bit:memory-totalBits};totalBits+=creg.length}return null}(inst.memory[qIndex]);if(!creg){errorMessage="Invalid measurement destination.";if(errorCallback)return void errorCallback([{msg:errorMessage}]);throw new Error(errorMessage)}var options={creg:creg};this.appendGate("measure",qubit,options)}break;case"barrier":break;default:var options={params:{},condition:{}},gateName=inst.name;switch(gateName){case"iden":gateName="id"}var condition,gateDef=this.basicGates[gateName];if(!gateDef){errorMessage='Unknown gate "'+inst.name+'".';if(errorCallback)return void errorCallback([{msg:errorMessage}]);throw new Error(errorMessage)}if(gateDef.params&&gateDef.params.length){if(!inst.params||!inst.params.length||inst.params.length!=gateDef.params.length){errorMessage='Invalid number of params for gate "'+inst.name+'".';if(errorCallback)return void errorCallback([{msg:errorMessage}]);throw new Error(errorMessage)}for(var parIndex=0;parIndex<gateDef.params.length;parIndex++){var paramName=gateDef.params[parIndex];options.params[paramName]=inst.params[parIndex]}}if(void 0!==inst.conditional){if(!(condition=conditions[inst.conditional])){errorMessage="Invalid classical condition.";if(errorCallback)return void errorCallback([{msg:errorMessage}]);throw new Error(errorMessage)}options.condition=condition}this.appendGate(gateName,inst.qubits,options)}}errorCallback&&errorCallback([])}else errorCallback&&errorCallback([{msg:"Invalid input file: no experiments found."}])},QuantumCircuit.prototype.exportTFQ=function(comment,decompose,exportAsGateName,versionStr,asJupyter,shots){var options={comment:comment,decompose:decompose,versionStr:versionStr,asJupyter:asJupyter,shots:shots};return this.exportToTFQ(options,exportAsGateName)},QuantumCircuit.prototype.exportBraket=function(comment,decompose,exportAsGateName,versionStr,asJupyter,shots,hybrid,encoderDecoder,indentDepth){var options={comment:comment,decompose:decompose,versionStr:versionStr,asJupyter:asJupyter,shots:shots,hybrid:hybrid,encoderDecoder:encoderDecoder,indentDepth:indentDepth};return this.exportToBraket(options,exportAsGateName)},QuantumCircuit.prototype.exportSVG=function(embedded,options){var newOptions=options||{};return newOptions.embedded=!!embedded,this.exportToSVG(newOptions,!1,"default",null)},QuantumCircuit.prototype.getDefaultSVGThemes=function(){return{default:{displayName:"Default",dimensions:{cellWidth:40,cellHeight:40,hSpacing:28,vSpacing:34,gateCornerRadius:0,blackboxPaddingX:2,blackboxPaddingY:2,blackboxCornerRadius:0,cArrowSize:10,wireLength:1,wireTextHeight:8,wireTextDown:16,wireMargin:20,wireLabelWidth:40,dotRadius:5,paramTextHeight:6,selectionPaddingX:4,selectionPaddingY:4},lightColors:{blackboxLineColor:"black",blackboxSelectedLineColor:"black",wireColor:"black",gateLineColor:"black",gateSelectedLineColor:"black",gateGalleryLineColor:"gray",defaultGateBgColor:"white",cWireColor:"black",cWireSelectedColor:"black",hWireColor:"black",edWireColor:"black",selectionLineColor:"#2185d0"},darkColors:{blackboxLineColor:"white",blackboxSelectedLineColor:"white",wireColor:"white",gateLineColor:"white",gateSelectedLineColor:"white",gateGalleryLineColor:"gray",defaultGateBgColor:"black",cWireColor:"white",cWireSelectedColor:"white",hWireColor:"white",edWireColor:"white",selectionLineColor:"#2185d0"}}}},QuantumCircuit.prototype.getValidSVGTheme=function(theme){var validTheme=this.getDefaultSVGThemes().default;return theme.displayName&&(validTheme.displayName=theme.displayName),theme.dimensions&&(validTheme.dimensions=deepMerge(validTheme.dimensions,theme.dimensions)),theme.lightColors&&(validTheme.lightColors=deepMerge(validTheme.lightColors,theme.lightColors)),theme.darkColors&&(validTheme.darkColors=deepMerge(validTheme.darkColors,theme.darkColors)),validTheme},QuantumCircuit.prototype.exportToSVG=function(options,darkMode,themeName,customThemes){var self=this;(options=options||{embedded:!1,drawBlochSpheres:!1}).embedded=options.embedded||!1,options.drawBlochSpheres=options.drawBlochSpheres||!1,void 0===options.drawHybrid&&(options.drawHybrid=!!this.options&&!!this.options.hybrid),void 0===options.drawEncoderDecoder&&(options.drawEncoderDecoder=!!this.options&&!!this.options.encoderDecoder);var gallery=options.gateGallery||options.gateGalleryRaw||options.customGateGallery,themes=this.getDefaultSVGThemes();if(customThemes)for(customThemeName in customThemes)themes[customThemeName]=customThemes[customThemeName];var theme=null,theme=themeName&&themes[themeName]?themes[themeName]:themes.default;theme=this.getValidSVGTheme(theme),options=deepMerge(options,theme.dimensions),options=deepMerge(options,theme[darkMode?"darkColors":"lightColors"]);var numRows=this.numQubits,numCols=this.numCols(),numCregs=this.cregCount(),columnOffset=0,paddingTop=0,totalCols=numCols;options.drawBlochSpheres&&totalCols++;var totalWireCols=totalCols;options.drawHybrid&&(totalCols+=2),options.drawEncoderDecoder&&(totalCols+=2,totalWireCols+=columnOffset=1,paddingTop=options.cellHeight+options.vSpacing);function getCellX(col){return options.wireLabelWidth+(options.cellWidth+options.hSpacing)*col+options.hSpacing}function getCellY(wire){return(options.cellHeight+options.vSpacing)*wire+options.vSpacing+paddingTop}function polarToCartesian(centerX,centerY,radius,angleInDegrees){var angleInRadians=(angleInDegrees-90)*Math.PI/180;return{x:centerX+radius*Math.cos(angleInRadians),y:centerY+radius*Math.sin(angleInRadians)}}function qWireY(wire){return(options.cellHeight+options.vSpacing)*wire+(options.vSpacing+options.cellHeight/2)+paddingTop}function qGateY(wire){return(options.cellHeight+options.vSpacing)*wire+options.vSpacing+paddingTop}function cWireY(cregName){return(options.cellHeight+options.vSpacing)*(numRows+function(name){var cregIndex=0;for(var cregName in self.cregs){if(cregName==name)return cregIndex;cregIndex++}return cregIndex}(cregName))+(options.vSpacing+options.cellHeight/2)+paddingTop}function gateCoverSVG(gateX,gateY,gateWidth,gateHeight){var res="";return res+='<rect class="qc-gate-cover" x="'+gateX+'" y="'+gateY+'" width="'+gateWidth+'" height="'+gateHeight+'" stroke="none" fill="transparent" stroke-width="0" />'}function gateBoxSVG(gateX,gateY,gateName,gateLabel,selected,cover){var gateWidth=options.cellWidth,gateHeight=options.cellHeight,res="";return res+='<rect class="qc-gate-box" x="'+(gateX+=.5)+'" y="'+(gateY+=.5)+'" width="'+--gateWidth+'" height="'+--gateHeight+'" stroke="'+(gallery?options.gateGalleryLineColor:selected?options.gateSelectedLineColor:options.gateLineColor)+'" fill="'+options.defaultGateBgColor+'" stroke-width="1"'+(options.gateCornerRadius?' rx="'+options.gateCornerRadius+'"':"")+" />",gateLabel&&(res+='<text class="qc-gate-label" x="'+(gateX+gateWidth/2)+'" y="'+(gateY+gateHeight/2)+'" dominant-baseline="middle" text-anchor="middle" fill="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'">'+gateLabel+"</text>"),cover&&(res+=gateCoverSVG(gateX,gateY,gateWidth,gateHeight)),res}function gateBarrierSVG(gateX,gateY,gateName,selected,cover){var gateWidth=options.cellWidth,gateHeight=options.cellHeight+options.vSpacing,res="",lineX=gateX+gateWidth/2,topPos=gateY-options.vSpacing/2;return res+='<line class="qc-gate-barrier-line" x1="'+lineX+'" y1="'+topPos+'" x2="'+lineX+'" y2="'+(topPos+gateHeight)+'" stroke="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'" stroke-width="1" stroke-dasharray="5,5" />',cover&&(res+=gateCoverSVG(gateX,gateY,gateWidth,gateHeight)),res}function gateCircleSVG(cellX,cellY,gateName,gateLabel,selected,cover){var centerX=cellX+options.cellWidth/2,centerY=cellY+options.cellHeight/2,gateWidth=.8*options.cellWidth,gateHeight=.8*options.cellHeight,gateX=cellX+(options.cellWidth-gateWidth)/2,gateY=cellY+(options.cellHeight-gateHeight)/2,res="";return res+='<ellipse class="qc-gate-not" cx="'+centerX+'" cy="'+centerY+'" rx="'+gateWidth/2+'" ry="'+gateHeight/2+'" stroke="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'" fill="'+options.defaultGateBgColor+'" stroke-width="1" />',gateLabel&&(res+='<text class="qc-gate-label" x="'+(gateX+gateWidth/2)+'" y="'+(gateY+gateHeight/2)+'" dominant-baseline="middle" text-anchor="middle" fill="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'">'+gateLabel+"</text>"),cover&&(res+=gateCoverSVG(cellX,cellY,options.cellWidth,options.cellHeight)),res}function gateNotSVG(cellX,cellY,gateName,selected,cover){var centerX=cellX+options.cellWidth/2,centerY=cellY+options.cellHeight/2,gateWidth=.8*options.cellWidth,gateHeight=.8*options.cellHeight,gateX=cellX+(options.cellWidth-gateWidth)/2,gateY=cellY+(options.cellHeight-gateHeight)/2,res="";return res+='<ellipse class="qc-gate-not" cx="'+centerX+'" cy="'+centerY+'" rx="'+gateWidth/2+'" ry="'+gateHeight/2+'" stroke="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'" fill="'+options.defaultGateBgColor+'" stroke-width="1" />',res+='<line class="qc-gate-not-line" x1="'+centerX+'" x2="'+centerX+'" y1="'+gateY+'" y2="'+(gateY+gateHeight)+'" stroke="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'" stroke-width="1" />',res+='<line class="qc-gate-not-line" x1="'+gateX+'" x2="'+(gateX+gateWidth)+'" y1="'+centerY+'" y2="'+centerY+'" stroke="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'" stroke-width="1" />',cover&&(res+=gateCoverSVG(cellX,cellY,options.cellWidth,options.cellHeight)),res}function gateGaugeSVG(gateX,gateY,gateName,selected,cover){var x,y,radius,startAngle,endAngle,start,end,largeArcFlag,gateWidth=options.cellWidth,gateHeight=options.cellHeight,centerX=(gateX+=.5)+--gateWidth/2,centerY=(gateY+=.5)+--gateHeight/2,movedown=gateHeight/5,res="";return res+='<rect class="qc-gate-box" x="'+gateX+'" y="'+gateY+'" width="'+gateWidth+'" height="'+gateHeight+'" stroke="'+(gallery?options.gateGalleryLineColor:selected?options.gateSelectedLineColor:options.gateLineColor)+'" fill="'+options.defaultGateBgColor+'" stroke-width="1"'+(options.gateCornerRadius?' rx="'+options.gateCornerRadius+'"':"")+" />",res+='<path class="gc-gate-gauge-arc" d="'+(startAngle=300,start=polarToCartesian(x=centerX,y=centerY+movedown,radius=gateWidth/2.3,endAngle=60),end=polarToCartesian(x,y,radius,startAngle),largeArcFlag=endAngle-startAngle<=180?"0":"1",["M",start.x,start.y,"A",radius,radius,0,largeArcFlag,0,end.x,end.y].join(" "))+'" stroke="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'" fill="none" stroke-width="1" />',res+='<line class="qc-gate-gauge-scale" x1="'+centerX+'" x2="'+(gateX+gateWidth-movedown)+'" y1="'+(centerY+movedown)+'" y2="'+(gateY+movedown)+'" stroke="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'" stroke-width="1" />',cover&&(res+=gateCoverSVG(gateX,gateY,gateWidth,gateHeight)),res}function gateXSVG(cellX,cellY,gateName,selected,cover){var gateWidth=.4*options.cellWidth,gateHeight=.4*options.cellHeight,gateX=cellX+(options.cellWidth-gateWidth)/2,gateY=cellY+(options.cellHeight-gateHeight)/2,res="";return res+='<line class="qc-gate-x" x1="'+gateX+'" x2="'+(gateX+gateWidth)+'" y1="'+gateY+'" y2="'+(gateY+gateHeight)+'" stroke="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'" stroke-width="1" />',res+='<line class="qc-gate-x" x1="'+gateX+'" x2="'+(gateX+gateWidth)+'" y1="'+(gateY+gateHeight)+'" y2="'+gateY+'" stroke="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'" stroke-width="1" />',cover&&(res+=gateCoverSVG(cellX,cellY,options.cellWidth,options.cellHeight)),res}function gateDotSVG(cellX,cellY,gateName,selected,cover){var gateWidth=options.cellWidth,gateHeight=options.cellHeight,res="";return res+='<circle class="qc-gate-dot" cx="'+(cellX+gateWidth/2)+'" cy="'+(cellY+gateHeight/2)+'" r="'+options.dotRadius+'" stroke="'+(selected?options.gateSelectedLineColor:options.wireColor)+'" fill="'+(selected?options.gateSelectedLineColor:options.wireColor)+'" stroke-width="1" />',cover&&(res+=gateCoverSVG(cellX,cellY,gateWidth,gateHeight)),res}function gateInvertedDotSVG(cellX,cellY,gateName,selected,cover){var gateWidth=options.cellWidth,gateHeight=options.cellHeight,res="";return res+='<circle class="qc-gate-ndot" cx="'+(cellX+gateWidth/2)+'" cy="'+(cellY+gateHeight/2)+'" r="'+options.dotRadius+'" stroke="'+(selected?options.gateSelectedLineColor:options.wireColor)+'" fill="'+options.defaultGateBgColor+'" stroke-width="1" />',cover&&(res+=gateCoverSVG(cellX,cellY,gateWidth,gateHeight)),res}function gateSVG(gateX,gateY,gateName,gateLabel,connector,drawBox,selected,cover){var res="";switch("box"!=connector&&drawBox&&(res+=gateBoxSVG(gateX,gateY,0,"",selected,cover)),connector){case"box":res+=gateBoxSVG(gateX,gateY,0,gateLabel,selected,cover);break;case"rect":res+=function(gateX,gateY,gateLabel,selected,cover){var gateWidth=2*options.cellWidth,gateHeight=options.cellHeight,res="";return res+='<rect class="qc-gate-rect" x="'+(gateX+=.5)+'" y="'+(gateY+=.5)+'" width="'+--gateWidth+'" height="'+--gateHeight+'" stroke="'+(gallery?options.gateGalleryLineColor:selected?options.gateSelectedLineColor:options.gateLineColor)+'" fill="'+options.defaultGateBgColor+'" stroke-width="1" />',gateLabel&&(res+='<text class="qc-gate-label" x="'+(gateX+gateWidth/2)+'" y="'+(gateY+gateHeight/2)+'" dominant-baseline="middle" text-anchor="middle" fill="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'">'+gateLabel+"</text>"),cover&&(res+=gateCoverSVG(gateX,gateY,gateWidth,gateHeight)),res}(gateX,gateY,gateLabel,selected,cover);break;case"circle":res+=gateCircleSVG(gateX,gateY,0,gateLabel,selected,cover);break;case"not":res+=gateNotSVG(gateX,gateY,0,selected,cover);break;case"x":res+=gateXSVG(gateX,gateY,0,selected,cover);break;case"dot":res+=gateDotSVG(gateX,gateY,0,selected,cover);break;case"ndot":res+=gateInvertedDotSVG(gateX,gateY,0,selected,cover);break;case"gauge":res+=gateGaugeSVG(gateX,gateY,0,selected,cover);break;case"barrier":res+=gateBarrierSVG(gateX,gateY,0,selected,cover)}return res}function escapeHtml(str){return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var totalWidth=getCellX(totalCols),totalWireWidth=getCellX(totalWireCols),totalHeight=(options.cellHeight+options.vSpacing)*(numRows+numCregs+(options.drawHybrid?1:0))+options.vSpacing+paddingTop,hybridWireY=(options.cellHeight+options.vSpacing)*(numRows+numCregs)+options.vSpacing+options.cellHeight/2+paddingTop;if(gallery){var gateList=[];if(options.gateGallery||options.gateGalleryRaw){var uniq=[];for(var gateName in this.basicGates){var gateLabel,connector,uniqStr,gate=this.basicGates[gateName],dinfo=JSON.parse(JSON.stringify(gate.drawingInfo||{connectors:["box"]}));dinfo.connectors&&(gateLabel=dinfo.label||gateName,connector=dinfo.connectors?dinfo.connectors[dinfo.connectors.length-1]:"box",options.gateGallery&&("x"!=connector&&"dot"!=connector||(connector="box")),uniqStr=gateLabel+"|"+connector,uniq.indexOf(uniqStr)<0&&"ccx"!=gateName&&(uniq.push(uniqStr),svg="",options.embedded||(svg+='<?xml version="1.0"?>',svg+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'),svg+='<svg class="qc-gate-gallery-item" data-gate="'+escapeHtml(gateName)+'" data-content="'+escapeHtml(gate.description)+'" width="'+options.cellWidth+'" height="'+options.cellHeight+'" version="1.1" xmlns="http://www.w3.org/2000/svg">',svg+="<title>"+(gate.description||gate.name)+"</title>",svg+=gateSVG(0,0,0,gateLabel,connector,!!options.gateGallery,!1,!0),svg+="</svg>",options.gateGallery?gateList.push(svg):gateList.push({name:gateName,svg:svg})))}var dotsvg="";options.embedded||(dotsvg+='<?xml version="1.0"?>',dotsvg+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'),dotsvg+='<svg class="qc-gate-gallery-item" data-gate="dot" data-content="Control" width="'+options.cellWidth+'" height="'+options.cellHeight+'" version="1.1" xmlns="http://www.w3.org/2000/svg">',dotsvg+=gateSVG(0,0,0,"dot","dot",!!options.gateGallery,!1,!0),dotsvg+="</svg>",options.gateGallery?gateList.push(dotsvg):gateList.push({name:"dot",svg:dotsvg});var ndotsvg="";options.embedded||(ndotsvg+='<?xml version="1.0"?>',ndotsvg+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'),ndotsvg+='<svg class="qc-gate-gallery-item" data-gate="ndot" data-content="Control" width="'+options.cellWidth+'" height="'+options.cellHeight+'" version="1.1" xmlns="http://www.w3.org/2000/svg">',ndotsvg+=gateSVG(0,0,0,"ndot","ndot",!!options.gateGallery,!1,!0),ndotsvg+="</svg>",options.gateGallery?gateList.push(ndotsvg):gateList.push({name:"ndot",svg:ndotsvg})}if(options.customGateGallery)for(var gateName in this.customGates){var svg="";options.embedded||(svg+='<?xml version="1.0"?>',svg+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'),svg+='<svg class="qc-custom-gate-gallery-item" data-gate="'+gateName+'" width="'+2*options.cellWidth+'" height="'+options.cellHeight+'" version="1.1" xmlns="http://www.w3.org/2000/svg">',svg+=gateSVG(0,0,0,gateName,"rect",!1,!1,!0),svg+="</svg>",gateList.push(svg)}return gateList}svg="";if(options.embedded||(svg+='<?xml version="1.0"?>',svg+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'),svg+='<svg class="qc-circuit" width="'+totalWidth+'" height="'+totalHeight+'" version="1.1" xmlns="http://www.w3.org/2000/svg">',options.placeholders)for(var column=0;column<=numCols;column++)for(var wire=0;wire<=this.numQubits;wire++)svg+=function(colOffset,colIndex,wire){var svg="",gateWidth=options.cellWidth+options.hSpacing,gateHeight=options.cellHeight+options.vSpacing,gateX=getCellX(colOffset+colIndex)-options.hSpacing,gateY=getCellY(wire)-options.vSpacing;return wire==numRows&&(gateHeight=options.vSpacing),colIndex==numCols&&(gateWidth=options.hSpacing),svg+='<rect class="qc-gate-placeholder" data-row="'+wire+'" data-col="'+colIndex+'" x="'+gateX+'" y="'+gateY+'" width="'+gateWidth+'" height="'+gateHeight+'" stroke="none" fill="transparent" stroke-width="0" />'}(columnOffset,column,wire);for(wire=0;wire<numRows;wire++){var wireY=qWireY(wire),initSymbol="0";options.customGate&&(initSymbol=qubitLetter(wire,numRows)),svg+='<text class="qc-wire-init" x="0" y="'+wireY+'" dominant-baseline="middle" text-anchor="start" fill="'+options.wireColor+'">|'+initSymbol+"&#x27E9;</text>",svg+='<line class="qc-wire" x1="'+options.wireMargin+'" x2="'+totalWireWidth+'" y1="'+wireY+'" y2="'+wireY+'" stroke="'+options.wireColor+'" stroke-width="'+options.wireWidth+'" />',svg+='<text class="qc-wire-label" x="'+options.wireMargin+'" y="'+(wireY-2*options.wireTextHeight)+'" dominant-baseline="hanging" text-anchor="start" font-size="75%" fill="'+options.wireColor+'">q'+wire+"</text>"}for(var cregName in this.cregs){svg+='<text class="qc-wire-init" x="0" y="'+(wireY=cWireY(cregName))+'" dominant-baseline="middle" text-anchor="start" fill="'+options.cWireColor+'">0</text>',svg+='<line class="qc-wire-c" x1="'+options.wireMargin+'" x2="'+totalWireWidth+'" y1="'+wireY+'" y2="'+wireY+'" stroke="'+options.cWireColor+'" stroke-width="'+options.wireWidth+'" />',svg+='<text class="qc-wire-label" x="'+options.wireMargin+'" y="'+(wireY-2*options.wireTextHeight)+'" dominant-baseline="hanging" text-anchor="start" font-size="75%" fill="'+options.cWireColor+'">'+cregName+"</text>"}for(column=0;column<numCols;column++)for(wire=0;wire<this.numQubits;wire++){(gate=this.getGateAt(column,wire))&&0==gate.connector&&(svg+=function(gate,colIndex){var dinfo=(dinfo=self.basicGates[gate.name]?self.basicGates[gate.name].drawingInfo:null)||(self.customGates[gate.name]?self.customGates[gate.name].drawingInfo:null),blackbox=!1,selected=options&&options.selection&&0<=options.selection.indexOf(gate.id);for(dinfo||(dinfo={connectors:[]},blackbox=!0);dinfo.connectors.length<gate.wires.length;)dinfo.connectors.push("box");var gateX,gateY,gateWidth,gateHeight,topWire=Math.min.apply(null,gate.wires),bottomWire=Math.max.apply(null,gate.wires),cLinkTopY=cWireY(bottomWire),svg="";svg+='<g class="qc-gate-group" data-id="'+gate.id+'" data-gate="'+gate.name+'">',blackbox&&(gateX=getCellX(colIndex)-options.blackboxPaddingX,gateY=qGateY(topWire)-options.blackboxPaddingY,gateWidth=options.cellWidth+2*options.blackboxPaddingX,gateHeight=qGateY(bottomWire)+options.cellHeight-gateY+options.blackboxPaddingY,cLinkTopY=(gateY+=.5)+--gateHeight,svg+='<text class="qc-blackbox-label" x="'+((gateX+=.5)+--gateWidth/2)+'" y="'+(gateY-options.wireTextHeight-2*options.blackboxPaddingY)+'" dominant-baseline="hanging" text-anchor="middle" font-size="75%" fill="'+(selected?options.blackboxSelectedLineColor:options.blackboxLineColor)+'">'+(dinfo.label||gate.name)+"</text>",svg+='<rect class="qc-gate-blackbox" x="'+gateX+'" y="'+gateY+'" width="'+gateWidth+'" height="'+gateHeight+'" stroke="'+(selected?options.blackboxSelectedLineColor:options.blackboxLineColor)+'" fill="transparent" stroke-width="1"'+(options.blackboxCornerRadius?' rx="'+options.blackboxCornerRadius+'"':"")+" />"),selected&&(gateX=getCellX(colIndex)-options.selectionPaddingX,gateY=qGateY(topWire)-options.selectionPaddingY,gateWidth=options.cellWidth+2*options.selectionPaddingX,gateHeight=qGateY(bottomWire)+options.cellHeight-gateY+options.selectionPaddingY,cLinkTopY=gateY+gateHeight,svg+='<rect class="qc-gate-selection" x="'+gateX+'" y="'+gateY+'" width="'+gateWidth+'" height="'+gateHeight+'" stroke="'+options.selectionLineColor+'" fill="transparent" stroke-dasharray="4" stroke-width="1" />'),topWire==bottomWire||blackbox||(linkX=getCellX(colIndex)+options.cellWidth/2,linkY1=getCellY(topWire)+options.cellHeight/2,linkY2=getCellY(bottomWire)+options.cellHeight/2,svg+='<line class="qc-gate-link" x1="'+linkX+'" x2="'+linkX+'" y1="'+linkY1+'" y2="'+linkY2+'" stroke="'+(selected?options.gateSelectedLineColor:options.wireColor)+'" stroke-width="1" />');var linkX,linkY1,linkY2,maxWire=Math.max.apply(null,gate.wires);return gate.wires.map(function(wire,connector){switch(dinfo.connectors[connector]){case"box":var gateX=getCellX(colIndex),gateY=getCellY(wire);svg+=gateBoxSVG(gateX,gateY,gate.name,blackbox?qubitLetter(connector,numRows):dinfo.label||gate.name,selected,!1),blackbox||wire!=bottomWire||(cLinkTopY=gateY+options.cellHeight);break;case"circle":gateX=getCellX(colIndex),gateY=getCellY(wire);svg+=gateCircleSVG(gateX,gateY,gate.name,blackbox?qubitLetter(connector,numRows):dinfo.label||gate.name,selected,!1),blackbox||wire!=bottomWire||(gateHeight=.8*options.cellHeight,cLinkTopY=gateY+gateHeight+(options.cellHeight-gateHeight)/2);break;case"not":var gateHeight,cellX=getCellX(colIndex),cellY=getCellY(wire);svg+=gateNotSVG(cellX,cellY,gate.name,selected,!1),blackbox||wire!=bottomWire||(gateHeight=.8*options.cellHeight,cLinkTopY=cellY+gateHeight+(options.cellHeight-gateHeight)/2);break;case"x":cellX=getCellX(colIndex),cellY=getCellY(wire);svg+=gateXSVG(cellX,cellY,gate.name,selected,!1),blackbox||wire!=bottomWire||(cLinkTopY=qWireY(bottomWire));break;case"dot":cellX=getCellX(colIndex),cellY=getCellY(wire);svg+=gateDotSVG(cellX,cellY,gate.name,selected,!1),blackbox||wire!=bottomWire||(cLinkTopY=qWireY(bottomWire)+options.dotRadius);break;case"ndot":cellX=getCellX(colIndex),cellY=getCellY(wire);svg+=gateInvertedDotSVG(cellX,cellY,gate.name,selected,!1),blackbox||wire!=bottomWire||(cLinkTopY=qWireY(bottomWire)+options.dotRadius);break;case"gauge":gateX=getCellX(colIndex),gateY=getCellY(wire);svg+=gateGaugeSVG(gateX,gateY,gate.name,selected,!1),blackbox||wire!=bottomWire||(cLinkTopY=gateY+options.cellHeight);break;case"barrier":gateX=getCellX(colIndex),gateY=getCellY(wire);svg+=gateBarrierSVG(gateX,gateY,gate.name,selected,!1),blackbox||wire!=bottomWire||(cLinkTopY=gateY+options.cellHeight)}if(gate.options&&gate.options.params&&wire==maxWire){var gateX=getCellX(colIndex),gateY=getCellY(wire),centerX=gateX+options.cellWidth/2,paramsStr="",paramsCount=0;for(var paramName in gate.options.params){paramsStr&&(paramsStr+=", ");var paramVal=gate.options.params[paramName];"string"==typeof paramVal&&paramVal.match(/^[\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?$/)&&(paramVal=parseFloat(paramVal)),"number"==typeof paramVal&&(paramVal=math.round(paramVal,3)),paramsStr+=paramVal,paramsCount++}26<paramsStr.length&&(paramsStr="("+paramsCount+" params)"),svg+='<text class="qc-gate-params" x="'+centerX+'" y="'+(gateY+options.cellHeight+options.paramTextHeight)+'" dominant-baseline="hanging" text-anchor="middle" font-size="75%" fill="'+(selected?options.gateSelectedLineColor:options.gateLineColor)+'">'+paramsStr+"</text>"}}),"measure"==gate.name&&gate.options&&gate.options.creg&&gate.options.creg.name&&(linkX=getCellX(colIndex)+options.cellWidth/2,linkY1=cLinkTopY,linkY2=cWireY(gate.options.creg.name),svg+='<line class="qc-gate-link-c" x1="'+linkX+'" x2="'+linkX+'" y1="'+linkY1+'" y2="'+linkY2+'" stroke="'+(selected?options.cWireSelectedColor:options.cWireColor)+'" stroke-width="1" />',svg+='<line class="qc-gate-link-c" x2="'+linkX+'" x1="'+(linkX-options.cArrowSize/2)+'" y1="'+(linkY2-options.cArrowSize)+'" y2="'+linkY2+'" stroke="'+(selected?options.cWireSelectedColor:options.cWireColor)+'" stroke-width="1" />',svg+='<line class="qc-gate-link-c" x2="'+linkX+'" x1="'+(linkX+options.cArrowSize/2)+'" y1="'+(linkY2-options.cArrowSize)+'" y2="'+linkY2+'" stroke="'+(selected?options.cWireSelectedColor:options.cWireColor)+'" stroke-width="1" />',svg+='<text class="qc-wire-label" x="'+linkX+'" y="'+(linkY2+options.wireTextHeight)+'" dominant-baseline="hanging" text-anchor="middle" font-size="75%" fill="'+(selected?options.cWireSelectedColor:options.cWireColor)+'">'+gate.options.creg.bit+"</text>"),gate.options&&gate.options.condition&&gate.options.condition.creg&&(linkX=getCellX(colIndex)+options.cellWidth/2,linkY1=cLinkTopY,linkY2=cWireY(gate.options.condition.creg),svg+='<line class="qc-gate-link-c" x1="'+linkX+'" x2="'+linkX+'" y1="'+linkY1+'" y2="'+linkY2+'" stroke="'+(selected?options.cWireSelectedColor:options.cWireColor)+'" stroke-width="1" />',svg+='<circle class="qc-gate-dot-c" cx="'+linkX+'" cy="'+linkY2+'" r="'+options.dotRadius+'" stroke="'+(selected?options.cWireSelectedColor:options.cWireColor)+'" fill="'+(selected?options.cWireSelectedColor:options.cWireColor)+'" stroke-width="1" />',svg+='<text class="qc-wire-label" x="'+linkX+'" y="'+(linkY2+options.wireTextHeight)+'" dominant-baseline="hanging" text-anchor="middle" font-size="75%" fill="'+(selected?options.cWireSelectedColor:options.cWireColor)+'">== '+gate.options.condition.value+"</text>"),svg+="</g>"}(gate,columnOffset+column))}if(options.placeholders)for(column=0;column<numCols;column++)for(wire=0;wire<this.numQubits;wire++){(gate=this.getGateAt(column,wire))&&(svg+=function(gate,colOffset,colIndex,wire){var svg="",gateWidth=options.cellWidth,gateHeight=options.cellHeight,gateX=getCellX(colOffset+colIndex),gateY=getCellY(wire);return svg+='<rect class="qc-gate-handle" data-id="'+gate.id+'" data-gate="'+gate.name+'" data-row="'+wire+'" data-col="'+colIndex+'" x="'+gateX+'" y="'+gateY+'" width="'+gateWidth+'" height="'+gateHeight+'" stroke="none" fill="transparent" stroke-width="0" />'}(gate,columnOffset,column,wire))}if(options.drawBlochSpheres){var currentCol=totalCols-1;options.drawHybrid&&(currentCol-=2),options.drawEncoderDecoder&&--currentCol;for(wire=0;wire<this.numQubits;wire++)svg+=function(colIndex,wire,className,canvasId){var svg="",gateWidth=options.cellWidth,gateHeight=options.cellHeight,gateX=getCellX(colIndex),gateY=getCellY(wire);return svg+='<g class="'+(className||"qc-canvas-group")+'" data-row="'+wire+'">',svg+='<rect class="qc-canvas-box" x="'+gateX+'" y="'+gateY+'" width="'+gateWidth+'" height="'+gateHeight+'" stroke="transparent" fill="'+options.defaultGateBgColor+'" stroke-width="1" />',svg+='<foreignObject class="qc-canvas-object" x="'+gateX+'" y="'+gateY+'" width="'+gateWidth+'" height="'+gateHeight+'">',svg+='<div style="position:relative;">',svg+='<canvas id="'+canvasId+"-"+wire+'" class="'+canvasId+'" width="'+gateWidth+'" height="'+gateHeight+'">',svg+="</canvas>",svg+="</div>",svg+="</foreignObject>",svg+="</g>"}(currentCol,wire,"qc-bloch-group","qc-bloch-canvas")}if(options.drawHybrid){var colIndex,gateWidth,gateHeight,gateX=getCellX(colIndex=currentCol=totalCols-2)+options.blackboxPaddingX-2,gateY=qGateY(0)+options.blackboxPaddingY,centerX=gateX+(gateWidth=options.cellWidth-2*options.blackboxPaddingX)/2,centerY=gateY+(gateHeight=qGateY(numRows+numCregs-1)+options.cellHeight-gateY-options.blackboxPaddingY)/2;cLinkTopY=gateY+gateHeight,svg+='<rect class="qc-cost-h" x="'+gateX+'" y="'+gateY+'" width="'+gateWidth+'" height="'+gateHeight+'" stroke="'+options.hWireColor+'" fill="'+options.defaultGateBgColor+'" stroke-width="1" rx="8" />',svg+='<text class="qc-label-h" x="'+centerX+'" y="'+centerY+'" dominant-baseline="middle" text-anchor="middle" fill="'+options.hWireColor+'" transform="rotate(-90, '+centerX+", "+centerY+')">Cost</text>';var linkX,linkY1,linkY2,gate2X=getCellX(colIndex+1)+options.blackboxPaddingX,center2X=gate2X+gateWidth/2;svg+='<marker id="qc-arrow-head" orient="auto" markerWidth="8" markerHeight="10" refX="8" refY="5"><path d="M0,0 V10 L8,5 Z" fill="'+options.hWireColor+'"/></marker>',svg+='<line class="qc-link-h" x1="'+(gateX+gateWidth)+'" x2="'+gate2X+'" y1="'+centerY+'" y2="'+centerY+'" stroke="'+options.hWireColor+'" stroke-width="'+options.wireWidth+'" marker-end="url(#qc-arrow-head)" />',svg+='<rect class="qc-optimizer-h" x="'+gate2X+'" y="'+gateY+'" width="'+gateWidth+'" height="'+gateHeight+'" stroke="'+options.hWireColor+'" fill="'+options.defaultGateBgColor+'" stroke-width="1" rx="8" />',svg+='<text class="qc-label-h" x="'+center2X+'" y="'+centerY+'" dominant-baseline="middle" text-anchor="middle" fill="'+options.hWireColor+'" transform="rotate(-90, '+center2X+", "+centerY+')">Optimizer</text>',svg+='<line class="qc-wire-h" x1="'+(linkX=center2X)+'" x2="'+linkX+'" y1="'+(linkY1=cLinkTopY)+'" y2="'+(linkY2=hybridWireY)+'" stroke="'+options.hWireColor+'" stroke-dasharray="4" stroke-width="1" />';var hWireX=0,globalParamsInfo=this.findGlobalParams();if(globalParamsInfo.globalParams.length){hWireX=getCellX(globalParamsInfo.cells[0][0])+options.cellWidth+options.hSpacing/2;for(var i=0;i<globalParamsInfo.cells.length;i++){var cell=globalParamsInfo.cells[i],link2X=getCellX(cell[0])+options.cellWidth+options.hSpacing/2,link2Y2=getCellY(cell[1])+options.cellHeight+options.vSpacing-options.paramTextHeight/2,cellBottomRightX=getCellX(cell[0])+options.cellWidth,cellBottomRightY=getCellY(cell[1])+options.cellHeight+2*options.paramTextHeight+4;svg+='<line class="qc-wire-h" x1="'+link2X+'" x2="'+link2X+'" y1="'+hybridWireY+'" y2="'+link2Y2+'" stroke="'+options.hWireColor+'" stroke-dasharray="4" stroke-width="1" />',svg+='<line class="qc-wire-h" x1="'+link2X+'" x2="'+cellBottomRightX+'" y1="'+link2Y2+'" y2="'+cellBottomRightY+'" stroke="'+options.hWireColor+'" stroke-dasharray="4" stroke-width="1" marker-end="url(#qc-arrow-head)" />'}svg+='<line class="qc-wire-h" x1="'+hWireX+'" x2="'+center2X+'" y1="'+(wireY=hybridWireY)+'" y2="'+wireY+'" stroke="'+options.hWireColor+'" stroke-dasharray="4" stroke-width="'+options.wireWidth+'" />'}else{svg+='<line class="qc-wire-h" x1="'+center2X+'" x2="'+(hWireX=getCellX(totalWireCols+1))+'" y1="'+(wireY=hybridWireY)+'" y2="'+wireY+'" stroke="'+options.hWireColor+'" stroke-dasharray="4" stroke-width="'+options.wireWidth+'"  marker-end="url(#qc-arrow-head)" />',svg+='<text class="qc-warning-params-h" x="'+(hWireX-5)+'" y="'+wireY+'" dominant-baseline="middle" text-anchor="end" fill="'+options.hWireColor+'">(no global params)</text>'}}return options.drawEncoderDecoder&&(gateX=getCellX(colIndex=currentCol=0)+options.blackboxPaddingX,gateY=qGateY(0)+options.blackboxPaddingY,centerX=gateX+(gateWidth=options.cellWidth-2*options.blackboxPaddingX)/2,centerY=gateY+(gateHeight=qGateY(numRows+numCregs-1)+options.cellHeight-gateY-options.blackboxPaddingY)/2,cLinkTopY=gateY+gateHeight,svg+='<marker id="qc-arrow-head-ed" orient="auto" markerWidth="8" markerHeight="10" refX="8" refY="5"><path d="M0,0 V10 L8,5 Z" fill="'+options.hWireColor+'"/></marker>',svg+='<rect class="qc-encoder-ed" x="'+gateX+'" y="'+gateY+'" width="'+gateWidth+'" height="'+gateHeight+'" stroke="'+options.edWireColor+'" fill="'+options.defaultGateBgColor+'" stroke-width="1" rx="8" />',svg+='<text class="qc-label-ed" x="'+centerX+'" y="'+centerY+'" dominant-baseline="middle" text-anchor="middle" fill="'+options.edWireColor+'" transform="rotate(-90, '+centerX+", "+centerY+')">Encoder</text>',svg+='<line class="qc-wire-ed" x1="'+(linkX=centerX)+'" x2="'+linkX+'" y1="'+(linkY1=gateY-(options.cellHeight+options.vSpacing))+'" y2="'+(linkY2=gateY)+'" stroke="'+options.edWireColor+'" stroke-width="1" marker-end="url(#qc-arrow-head-ed)" />',svg+='<text class="qc-label-input-ed" x="'+linkX+'" y="'+(linkY1-10)+'" dominant-baseline="middle" text-anchor="middle" fill="'+options.edWireColor+'">Input</text>',gateX=getCellX(colIndex=currentCol=totalCols-1)+options.blackboxPaddingX-2,gateY=qGateY(0)+options.blackboxPaddingY,centerX=gateX+(gateWidth=options.cellWidth-2*options.blackboxPaddingX)/2,centerY=gateY+(gateHeight=qGateY(numRows+numCregs-1)+options.cellHeight-gateY-options.blackboxPaddingY)/2,svg+='<rect class="qc-decoder-ed" x="'+gateX+'" y="'+(cLinkTopY=gateY)+'" width="'+gateWidth+'" height="'+gateHeight+'" stroke="'+options.edWireColor+'" fill="'+options.defaultGateBgColor+'" stroke-width="1" rx="8" />',svg+='<text class="qc-label-ed" x="'+centerX+'" y="'+centerY+'" dominant-baseline="middle" text-anchor="middle" fill="'+options.edWireColor+'" transform="rotate(-90, '+centerX+", "+centerY+')">Decoder</text>',svg+='<line class="qc-wire-ed" x1="'+(linkX=centerX)+'" x2="'+linkX+'" y1="'+(linkY1=gateY)+'" y2="'+(linkY2=gateY-(options.cellHeight+options.vSpacing))+'" stroke="'+options.edWireColor+'" stroke-width="1" marker-end="url(#qc-arrow-head-ed)" />',svg+='<text class="qc-label-output-ed" x="'+linkX+'" y="'+(linkY2-10)+'" dominant-baseline="middle" text-anchor="middle" fill="'+options.edWireColor+'">Output</text>'),svg+="</svg>"},QuantumCircuit.prototype.exportToQiskit=function(options,exportAsGateName,circuitReplacement,insideSubmodule){var comment=(options=options||{}).comment,decompose=options.decompose,versionStr=options.versionStr,providerName=options.providerName,backendName=options.backendName,asJupyter=options.asJupyter,shots=options.shots||1024,hybrid=options.hybrid,encoderDecoder=options.encoderDecoder;void 0===hybrid&&(hybrid=!!this.options&&!!this.options.hybrid),void 0===encoderDecoder&&(encoderDecoder=!!this.options&&!!this.options.encoderDecoder);var costFunction=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"",encoderDecoderOptions=this.options&&this.options.encoderDecoderOptions?this.options.encoderDecoderOptions:{},inputEncoding=encoderDecoderOptions.inputEncoding?encoderDecoderOptions.inputEncoding:{},outputDecoding=encoderDecoderOptions.outputDecoding?encoderDecoderOptions.outputDecoding:{},self=this,backendName=backendName||"";"Aer"==(providerName=providerName||"Aer")&&("aer_simulator"==(backendName=backendName||(hybrid&&0<=costFunction.indexOf("state")?"statevector_simulator":"qasm_simulator"))&&(backendName="qasm_simulator"),"aer_simulator_statevector"==backendName&&(backendName="statevector_simulator")),"IONQ"==providerName&&(backendName=backendName||"ionq_simulator"),"IQM"==providerName&&(backendName=backendName||"sirius");var version=parseFloat(versionStr||"1.0");isNaN(version)&&(version=1);var packageList=[],circuit=new QuantumCircuit;circuit.load(this.save(decompose));var qiskit="";comment&&(comment||"").split("\n").map(function(cline){1<=cline.length&&"#"!=cline[0]&&(qiskit+="# "),qiskit+=cline,qiskit+="\n"});function mathToStringHandler(node,options){if(node.isSymbolNode){if(0<=["pi","sin","cos","tan","asin","acos","atan"].indexOf(node.name))return"np."+node.name;var nodeName=node.name;if(options.replaceVars&&void 0!==options.replaceVars[nodeName])return nodeName=options.replaceVars[nodeName],0<=self.params.indexOf(nodeName)&&hybrid?"params["+self.params.indexOf(nodeName)+"]":nodeName;if(0<=self.params.indexOf(node.name)&&hybrid)return"params["+self.params.indexOf(node.name)+"]"}}function adjustIdentation(addStr,ident){ident=ident||"";var str="",cfLines=addStr.split("\n"),minIdent=-1;cfLines.map(function(cfLine){var tmpIdent=cfLine.search(/\S/);0<=tmpIdent&&(minIdent<0||tmpIdent<minIdent)&&(minIdent=tmpIdent)}),minIdent<0&&(minIdent=0);var addIdent="";if(minIdent<ident.length)for(var tmp=0;tmp<ident.length-minIdent;tmp++)addIdent+=" ";return cfLines.map(function(cfLine){str+=addIdent+cfLine+"\n"}),str}var identation="";if(exportAsGateName){qiskit+="def "+exportAsGateName+"(qc";if(circuit.params&&circuit.params.length)for(var pc=0;pc<circuit.params.length;pc++)qiskit+=", ",qiskit+=circuit.params[pc];for(var i=0;i<circuit.numQubits;i++)qiskit+=", ",qiskit+=qubitLetter(i,circuit.numQubits);qiskit+="):\n"}else if(!circuitReplacement){var usedGates=circuit.usedGates();qiskit+="from qiskit import QuantumCircuit, QuantumRegister, ClassicalRegister\n",1<=version?packageList.push("qiskit"):packageList.push("qiskit=="+version);var needTranspile=!1,isIonqNative=!1;switch(providerName){case"Aer":1<=version?(qiskit+="from qiskit_aer import AerSimulator\n",packageList.push("qiskit-aer"),needTranspile=!0):qiskit+="from qiskit import execute, "+providerName+"\n",hybrid&&0<=costFunction.indexOf("state")&&"statevector_simulator"!=backendName&&(qiskit+="from qiskit_experiments.library import StateTomography\n");break;case"IBMQ":qiskit+="from qiskit import execute, "+providerName+"\nfrom qiskit.providers.ibmq import least_busy\n",hybrid&&0<=costFunction.indexOf("state")&&(qiskit+="from qiskit_experiments.library import StateTomography\n"),packageList.push("qiskit-ibmq-provider");break;case"IONQ":needTranspile=!0,qiskit+="from qiskit_ionq import IonQProvider\n",hybrid&&0<=costFunction.indexOf("state")&&(qiskit+="from qiskit_experiments.library import StateTomography\n"),packageList.push("qiskit-ionq");break;case"IQM":needTranspile=!0,qiskit+="from iqm.qiskit_iqm import IQMProvider\n",hybrid&&0<=costFunction.indexOf("state")&&(qiskit+="from qiskit_experiments.library import StateTomography\n"),packageList.push("iqm-client")}switch((0<=usedGates.indexOf("ms")||0<=usedGates.indexOf("gpi")||0<=usedGates.indexOf("gpi2"))&&(needTranspile=!0,qiskit+="from qiskit_ionq import GPIGate, GPI2Gate, MSGate\n"),needTranspile&&(qiskit+="from qiskit import transpile\n"),hybrid&&(qiskit+="from scipy.optimize import minimize\n",qiskit+="from collections import Counter\n",packageList.push("scipy")),encoderDecoder&&(qiskit+="from quantastica.encoder_decoder import encode_input, decode_output\n",packageList.push("quantastica-encoder-decoder")),qiskit+="import numpy as np\n",qiskit+="\n",packageList.push("numpy"),providerName){case"Aer":qiskit+=1<=version?identation+'backend = AerSimulator(method="statevector")\n':identation+'backend = Aer.get_backend("'+backendName+'")\n',qiskit+="\n";break;case"IBMQ":qiskit+=identation+"IBMQ.load_account()\n",qiskit+=identation+'provider = IBMQ.get_provider(hub="ibm-q", group="open", project="main")\n',backendName?qiskit+=identation+'backend = provider.get_backend("'+backendName+'")\n':(qiskit+=identation+"backends = provider.backends()\n",qiskit+=identation+"backend = least_busy(backends)\n"),qiskit+="\n";break;case"IONQ":var ionqNative=["measure","delay","barrier","reset","snapshot","ms","gpi2","gpi"],isIonqNative=!0;usedGates.map(function(usedGate){ionqNative.indexOf(usedGate)<0&&(isIonqNative=!1)}),qiskit+=identation+"# Requires QISKIT_IONQ_API_TOKEN environment variable to be set\n",qiskit+=identation+"provider = IonQProvider()\n",qiskit+=identation+'backend = provider.get_backend("'+backendName+'"',isIonqNative&&(qiskit+=', gateset="native"'),qiskit+=")\n\n";break;case"IQM":qiskit+=identation+"# Requires IQM_TOKEN environment variable to be set\n",qiskit+=identation+'iqm_server_url = "https://resonance.meetiqm.com"\n',qiskit+=identation+'quantum_computer = "'+backendName+'"\n',qiskit+=identation+"provider = IQMProvider(iqm_server_url, quantum_computer=quantum_computer)\n",qiskit+=identation+"backend = provider.get_backend()\n",qiskit+="\n\n"}shots&&(qiskit+="shots = "+shots+"\n",qiskit+="\n");var customEncoder,customDecoder,functionName,inputEncodingCopy,outputDecodingCopy,inputEncodingStr,outputDecodingStr,inputRowStr,globalParams=this.options&&this.options.params?this.options.params:{};if(this.params.length){for(i=0;i<this.params.length;i++){var globalParamName=this.params[i],globalParamValue=math.parse(globalParams[globalParamName]).toString({handler:mathToStringHandler});qiskit+=globalParamName+" = "+globalParamValue+"\n"}qiskit+="\n"}for(var cregName in hybrid&&(qiskit+="tolerance = "+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.tolerance&&this.options.hybridOptions.tolerance||"0.001")+"\n",qiskit+="\n"),decompose||usedGates.map(function(usedGateName){var customGate,customCircuit,newOptions;circuit.basicGates[usedGateName]||(customGate=self.customGates[usedGateName])&&((customCircuit=new QuantumCircuit).load(customGate),newOptions={comment:"",decompose:!0,versionStr:versionStr,providerName:"",backendName:!1,asJupyter:!1,shots:!1,hybrid:null,encoderDecoder:!1},qiskit+=customCircuit.exportToQiskit(newOptions,usedGateName,circuitReplacement,insideSubmodule))}),hybrid&&(identation="  ",qiskit+="def objective_function(params):\n"),encoderDecoder&&(identation="  ","custom"==inputEncoding.type&&(customEncoder=inputEncoding.customFunction&&inputEncoding.customFunction.python?inputEncoding.customFunction.python:"def custom_encoder(input_data_row, input_encoding):\n    pass\n",qiskit+=customEncoder+"\n"),"custom"==outputDecoding.type&&(customDecoder=outputDecoding.customFunction&&outputDecoding.customFunction.python?outputDecoding.customFunction.python:"def custom_decoder(counts, output_decoding):\n    pass\n",qiskit+=customDecoder+"\n"),functionName=encoderDecoderOptions.functionName||"my_function",qiskit+="def "+functionName+"(",inputEncoding.colDefs&&inputEncoding.colDefs.map(function(colDef,colDefIndex){0<colDefIndex&&(qiskit+=", "),qiskit+=colDef.name}),qiskit+="):\n",(inputEncodingCopy=JSON.parse(JSON.stringify(inputEncoding))).colDefs&&inputEncodingCopy.colDefs.map(function(colDef){colDef.min&&(colDef.min=math.evaluate(colDef.min)),colDef.max&&(colDef.max=math.evaluate(colDef.max))}),void 0!==inputEncodingCopy.data&&delete inputEncodingCopy.data,"custom"==inputEncodingCopy.type?inputEncodingCopy.customFunction={python:"$custom_encoder$"}:inputEncodingCopy.customFunction&&delete inputEncodingCopy.customFunction,(outputDecodingCopy=JSON.parse(JSON.stringify(outputDecoding))).colDefs&&outputDecodingCopy.colDefs.map(function(colDef){colDef.min&&(colDef.min=math.evaluate(colDef.min)),colDef.max&&(colDef.max=math.evaluate(colDef.max))}),"custom"==outputDecodingCopy.type?outputDecodingCopy.customFunction={python:"$custom_decoder$"}:outputDecodingCopy.customFunction&&delete outputDecodingCopy.customFunction,inputEncodingStr=(inputEncodingStr="input_encoding = "+JSON.stringify(inputEncodingCopy,null,4)).replace('"$custom_encoder$"',"custom_encoder"),qiskit+=adjustIdentation(inputEncodingStr,identation)+"\n",outputDecodingStr=(outputDecodingStr="output_decoding = "+JSON.stringify(outputDecodingCopy,null,4)).replace('"$custom_decoder$"',"custom_decoder"),qiskit+=adjustIdentation(outputDecodingStr,identation)+"\n"),qiskit+=identation+"qc = QuantumCircuit()\n",qiskit+="\n",qiskit+=identation+"q = QuantumRegister("+circuit.numQubits+", 'q')\n",this.cregs)qiskit+=identation+cregName+" = ClassicalRegister("+(this.cregs[cregName].length||1)+", '"+cregName+"')\n";for(var cregName in qiskit+="\n",qiskit+=identation+"qc.add_register(q)\n",this.cregs)qiskit+=identation+"qc.add_register("+cregName+")\n";qiskit+="\n",encoderDecoder&&(inputRowStr="{",inputEncoding.colDefs&&(inputEncoding.colDefs.length&&(inputRowStr+=" "),inputEncoding.colDefs.map(function(colDef,colDefIndex){0<colDefIndex&&(inputRowStr+=", "),inputRowStr+='"'+colDef.name+'": '+colDef.name}),inputEncoding.colDefs.length&&(inputRowStr+=" ")),qiskit+=identation+"input_data_row = "+(inputRowStr+="}")+"\n",qiskit+=identation+"input_qasm = encode_input(input_data_row, input_encoding)\n",qiskit+=identation+"input_qc = QuantumCircuit()\n",qiskit+=identation+"input_qc = input_qc.from_qasm_str(input_qasm)\n",qiskit+=identation+"qc = qc.compose(input_qc)\n",qiskit+=identation+"qc.barrier()\n",qiskit+="\n")}for(var execBlock,globalParamList,numCols=circuit.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var gate=circuit.getGateAt(column,wire),qiskitReplacement=null,qiskitEquivalent=null;if(gate&&0==gate.connector){var replacementCircuit,equivalentCircuit,newOptions,qiskitCondition=gate.options&&gate.options.condition&&gate.options.condition.creg?gate.options.condition:null;if((gateDef=circuit.getGateDef(gate.name))&&gateDef.exportInfo&&!isIonqNative&&(gateDef.exportInfo.qiskit&&gateDef.exportInfo.qiskit.replacement?(qiskit+="\n"+identation+"# "+gate.name+"\n",replacementCircuit=new QuantumCircuit,(qiskitReplacement=gateDef.exportInfo.qiskit.replacement).map(function(replacement){var params,replacementParams;gate.options&&gate.options.params&&(params=Object.keys(gate.options.params),replacementParams=Object.keys(replacement.params),params.map(function(param){-1<replacementParams.indexOf(param)&&(replacement.params[param]=gate.options.params[param])})),replacementCircuit.appendGate(replacement.name,gate.wires,{params:replacement.params,condition:qiskitCondition})}),newOptions={comment:"",decompose:!1,versionStr:!1,providerName:!1,backendName:!1,asJupyter:!1,shots:!1,hybrid:null,encoderDecoder:!1},qiskit+=adjustIdentation(replacementCircuit.exportToQiskit(newOptions,!1,!0,!!exportAsGateName||insideSubmodule),identation)):gateDef.exportInfo.qiskit&&gateDef.exportInfo.qiskit.equivalent&&(qiskit+="\n"+identation+"# "+gate.name+"\n",equivalentCircuit=new QuantumCircuit,(qiskitEquivalent=gateDef.exportInfo.qiskit.equivalent).map(function(equivalent){var gateWires=1<equivalent.wires.length?gate.wires:gate.wires[equivalent.wires[0]],eqParams={};if(equivalent.params){var gateParams={};if(gate.options&&gate.options.params)for(var gateParamName in gate.options.params){var valueString=math.parse(gate.options.params[gateParamName]).toString({handler:mathToStringHandler});gateParams[gateParamName]=valueString}for(var eqParamName in equivalent.params){valueString=math.parse(equivalent.params[eqParamName]).toString({handler:mathToStringHandler,replaceVars:gateParams});eqParams[eqParamName]=valueString}}equivalentCircuit.appendGate(equivalent.name,gateWires,{params:eqParams,condition:qiskitCondition})}),newOptions={comment:"",decompose:!1,versionStr:!1,providerName:!1,backendName:!1,asJupyter:!1,shots:!1,hybrid:null,encoderDecoder:!1},qiskit+=adjustIdentation(equivalentCircuit.exportToQiskit(newOptions,!1,!0,!!exportAsGateName||insideSubmodule),identation))),qiskitReplacement||qiskitEquivalent||(exportAsGateName||insideSubmodule||hybrid||encoderDecoder)&&(qiskit+="  "),!qiskitReplacement&&!qiskitEquivalent){var gateName=gate.name,gateParams=gate.options&&gate.options.params?gate.options.params:{};"statevector_simulator"==backendName&&"measure"==gateName&&hybrid&&(qiskit+="# "),this.basicGates[gateName]&&(qiskit+="qc.");var qcAppend=!1,angleInTurns=!1;"ms"==(gateName=gateDef&&gateDef.exportInfo&&gateDef.exportInfo.qiskit&&gateDef.exportInfo.qiskit.name?gateDef.exportInfo.qiskit.name:gate.name)&&(angleInTurns=qcAppend=!0,gateName="MSGate"),"gpi"==gateName&&isIonqNative&&(angleInTurns=qcAppend=!0,gateName="GPIGate"),"gpi2"==gateName&&isIonqNative&&(angleInTurns=qcAppend=!0,gateName="GPI2Gate"),qcAppend&&(qiskit+="append("),qiskit+=gateName+"(";var gateDef,argCount=0;if(gateParams)if((gateDef=this.basicGates[gate.name])||(gateDef=this.customGates[gate.name],qiskit+="qc",argCount++),gateDef){var paramDef=gateDef.params||[],paramCount=paramDef.length;if(paramCount){for(var p=0;p<paramCount;p++){0<argCount&&(qiskit+=", ");var valueString,paramName=paramDef[p];(gateParams[paramName]||gateParams[paramName].toString())&&(valueString=math.parse(gateParams[paramName]).toString({handler:mathToStringHandler}),angleInTurns&&(valueString="("+valueString+") / (2*np.pi)"),qiskit+=valueString),argCount++}"cu"!=gateName||gateParams.gamma||(qiskit+=", 0",argCount++)}}if(qcAppend){argCount&&(qiskit+="), "),qiskit+="[";for(var w=0;w<gate.wires.length;w++)0<w&&(qiskit+=", "),qiskit+=exportAsGateName||insideSubmodule?qubitLetter(gate.wires[w],circuit.numQubits):gate.wires[w],argCount++;qiskit+="]"}else for(w=0;w<gate.wires.length;w++)0<argCount&&(qiskit+=", "),qiskit+=exportAsGateName||insideSubmodule?qubitLetter(gate.wires[w],circuit.numQubits):"q["+gate.wires[w]+"]",argCount++;"measure"==gateName&&gate.options&&gate.options.creg&&(0<argCount&&(qiskit+=", "),qiskit+=gate.options.creg.name+"["+gate.options.creg.bit+"]",argCount++),qiskit+=")",gate.options&&gate.options.condition&&gate.options.condition.creg&&(qiskit+=".c_if("+gate.options.condition.creg+", "+gate.options.condition.value+")"),qiskit+="\n"}}}if(!circuitReplacement){if(exportAsGateName?qiskit+="\n":(qiskit+="\n",identation=hybrid?"  ":"","statevector_simulator"==backendName&&1<=version&&(qiskit+=identation+"qc.save_statevector()\n\n"),encoderDecoder&&(qiskit+=(identation="  ")+"qc.measure_all(q)\n",qiskit+="\n"),needTranspile&&(qiskit+=identation+"qc = transpile(qc, backend)\n"),"Aer"==providerName&&(execBlock="",execBlock+=1<=version?identation+"job = backend.run(qc":identation+"job = execute(qc, backend=backend",shots&&(execBlock+=", shots=shots"),execBlock+=")\n",execBlock+=identation+"job_result = job.result()\n",hybrid?("statevector_simulator"==backendName?(qiskit+=execBlock,qiskit+=identation+"state = job_result.get_statevector(qc).data\n",qiskit+="\n"):0<=costFunction.indexOf("state")?(qiskit+=identation+"qst = StateTomography(qc)\n",qiskit+=identation+"qst_analysis = qst.run(backend).block_for_results()\n",qiskit+=identation+'density = qst_analysis.analysis_results("state").value\n',qiskit+=identation+"state = np.diag(density)\n"):(qiskit+=execBlock,qiskit+=identation+"counts = Counter(job_result.get_counts(qc))\n",qiskit+="\n"),costFunction.trim()||(costFunction="# CALCULATE COST HERE\ncost = 0"),qiskit+=adjustIdentation(costFunction,identation),qiskit+="\n",qiskit+=identation+"return cost\n"):encoderDecoder?(qiskit+=execBlock,qiskit+=identation+"counts = job_result.get_counts(qc)\n\n",qiskit+=identation+"output_data_row = decode_output(counts, output_decoding, unpack_values=True)\n",qiskit+=identation+"return output_data_row\n"):(qiskit+=execBlock,qiskit+=identation+"print(job_result.get_counts(qc))\n")),"IBMQ"!=providerName&&"IQM"!=providerName||(execBlock="",execBlock+=1<=version?identation+"job = backend.run(qc":identation+"job = execute(qc, backend=backend",shots&&(execBlock+=", shots=shots"),execBlock+=")\n",execBlock+=identation+"job_result = job.result()\n",hybrid?(0<=costFunction.indexOf("state")?(qiskit+=identation+"qst = StateTomography(qc)\n",qiskit+=identation+"qst_analysis = qst.run(backend).block_for_results()\n",qiskit+=identation+'density = qst_analysis.analysis_results("state").value\n',qiskit+=identation+"state = np.diag(density)\n"):(qiskit+=execBlock,qiskit+=identation+"counts = Counter(job_result.get_counts(qc))\n"),qiskit+="\n",costFunction.trim()||(costFunction="# CALCULATE COST HERE\ncost = 0"),qiskit+=adjustIdentation(costFunction,identation),qiskit+="\n",qiskit+=identation+"return cost\n"):encoderDecoder?(qiskit+=execBlock,qiskit+=identation+"counts = job_result.get_counts(qc)\n\n",qiskit+=identation+"output_data_row = decode_output(counts, output_decoding, unpack_values=True)\n",qiskit+=identation+"return output_data_row\n"):(qiskit+=execBlock,qiskit+=identation+"print(job_result.get_counts(qc))\n")),"IONQ"==providerName&&(execBlock="",execBlock+=identation+"job = backend.run(qc",shots&&(execBlock+=", shots=shots"),execBlock+=")\n",execBlock+=identation+"job_result = job.result()\n",hybrid?(0<=costFunction.indexOf("state")?(qiskit+=identation+"qst = StateTomography(qc)\n",qiskit+=identation+"qst_analysis = qst.run(backend).block_for_results()\n",qiskit+=identation+'density = qst_analysis.analysis_results("state").value\n',qiskit+=identation+"state = np.diag(density)\n"):(qiskit+=execBlock,qiskit+=identation+"counts = Counter(job.get_counts())\n",qiskit+="\n"),costFunction.trim()||(costFunction="# CALCULATE COST HERE\ncost = 0"),qiskit+=adjustIdentation(costFunction,identation),qiskit+="\n",qiskit+=identation+"return cost\n"):encoderDecoder?(qiskit+=execBlock,qiskit+=identation+"counts = job_result.get_counts(qc)\n\n",qiskit+=identation+"output_data_row = decode_output(counts, output_decoding, unpack_values=True)\n",qiskit+=identation+"return output_data_row\n"):(qiskit+=execBlock,qiskit+=identation+"print(job.get_counts())\n")),hybrid&&(globalParamList="",this.params.map(function(globalParamName,globalParamIndex){0<globalParamIndex&&(globalParamList+=", "),globalParamList+=globalParamName}),qiskit+="\n",qiskit+="params = np.array(["+globalParamList+"])\n",qiskit+="\n",qiskit+='minimum = minimize(objective_function, params, method="'+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.optimizer?this.options.hybridOptions.optimizer:"Powell")+'", tol=tolerance)\n',qiskit+='print("cost:", minimum.fun, "params:", minimum.x)\n')),asJupyter){var notebook={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:qiskit,metadata:{},outputs:[],execution_count:null}]},packageInstallCode="";return packageList.map(function(packageName,packageIndex){0<packageIndex&&(packageInstallCode+="\n"),packageInstallCode+="!pip install "+packageName}),packageInstallCode&&notebook.cells.unshift({cell_type:"code",source:packageInstallCode,metadata:{},outputs:[],execution_count:null}),JSON.stringify(notebook)}packageInstallCode="";packageList.map(function(packageName,packageIndex){0<packageIndex&&(packageInstallCode+=",\n"),packageInstallCode+='#     "'+packageName+'"'}),packageInstallCode&&(qiskit="# /// script\n# dependencies = [\n"+packageInstallCode+"\n# ]\n# ///\n\n"+qiskit)}return qiskit},QuantumCircuit.prototype.exportToCudaQ=function(options,exportAsGateName,circuitReplacement,insideSubmodule){var self=this,comment=(options=options||{}).comment,decompose=options.decompose,versionStr=options.versionStr,providerName=options.providerName||"",asJupyter=(options.backendName,options.asJupyter),stateVector=options.stateVector,shots=options.shots||1024,hybrid=options.hybrid,encoderDecoder=options.encoderDecoder;void 0===hybrid&&(hybrid=!!this.options&&!!this.options.hybrid),void 0===encoderDecoder&&(encoderDecoder=!!this.options&&!!this.options.encoderDecoder);var costFunction=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"",encoderDecoderOptions=this.options&&this.options.encoderDecoderOptions?this.options.encoderDecoderOptions:{},inputEncoding=encoderDecoderOptions.inputEncoding?encoderDecoderOptions.inputEncoding:{},outputDecoding=encoderDecoderOptions.outputDecoding?encoderDecoderOptions.outputDecoding:{};void 0===stateVector&&(stateVector=!!(hybrid&&0<=costFunction.indexOf("state")));var version=parseFloat(versionStr||"0.9");isNaN(version);var packageList=[],circuit=new QuantumCircuit;circuit.load(this.save(!!decompose));var cudaq="";comment&&(comment||"").split("\n").map(function(cline){1<=cline.length&&"#"!=cline[0]&&(cudaq+="# "),cudaq+=cline,cudaq+="\n"});function mathToStringHandler(node,options){if(node.isSymbolNode){if(0<=["pi","sin","cos","tan","asin","acos","atan"].indexOf(node.name))return"np."+node.name;var nodeName=node.name;if(options.replaceVars&&void 0!==options.replaceVars[nodeName])return nodeName=options.replaceVars[nodeName],0<=self.params.indexOf(nodeName)&&hybrid?"params["+self.params.indexOf(nodeName)+"]":nodeName;if(0<=self.params.indexOf(node.name)&&hybrid)return"params["+self.params.indexOf(node.name)+"]"}}function adjustIdentation(addStr,ident){var str="",cfLines=addStr.split("\n"),minIdent=-1;cfLines.map(function(cfLine){var tmpIdent=cfLine.search(/\S/);0<=tmpIdent&&(minIdent<0||tmpIdent<minIdent)&&(minIdent=tmpIdent)}),minIdent<0&&(minIdent=0);var addIdent="";if(minIdent<ident.length)for(var tmp=0;tmp<ident.length-minIdent;tmp++)addIdent+=" ";return cfLines.map(function(cfLine){str+=addIdent+cfLine+"\n"}),str}var globalParams,identation="";if(exportAsGateName){cudaq+="@cudaq.kernel\n",cudaq+="def "+exportAsGateName+"(";var argc=0;if(circuit.params&&circuit.params.length)for(var pc=0;pc<circuit.params.length;pc++)0<argc&&(cudaq+=", "),argc++,cudaq+=circuit.params[pc]+": float";for(var i=0;i<circuit.numQubits;i++)0<argc&&(cudaq+=", "),argc++,cudaq+="q_"+i+": cudaq.qubit";cudaq+="):\n",identation+="  "}else if(!circuitReplacement){var usedGates=circuit.usedGates();cudaq+="import cudaq\n",packageList.push("cudaq"),hybrid&&(cudaq+="from scipy.optimize import minimize\n",cudaq+="from collections import Counter\n",packageList.push("scipy")),encoderDecoder&&(cudaq+="from quantastica.encoder_decoder import encode_input, decode_output\n",packageList.push("quantastica-encoder-decoder")),cudaq+="import numpy as np\n",cudaq+="\n",packageList.push("numpy");var customEncoder,customDecoder,functionName,inputEncodingCopy,outputDecodingCopy,inputEncodingStr,outputDecodingStr,inputRowStr,usedGates=circuit.usedGates(),gotCustomOps=!1;if(usedGates.map(function(usedGateName){var cudaqInfo,basicGate=circuit.basicGates[usedGateName];basicGate&&basicGate.exportInfo&&basicGate.exportInfo.cudaq&&((cudaqInfo=basicGate.exportInfo.cudaq).matrix&&(cudaq+='cudaq.register_operation("'+(cudaqInfo.name||usedGateName)+'", np.array('+cudaqInfo.matrix+"))\n",gotCustomOps=!0))}),gotCustomOps&&(cudaq+="\n"),providerName&&(cudaq+='cudaq.set_target("'+providerName+'")\n',cudaq+="\n"),shots&&(cudaq+="shots = "+shots+"\n",cudaq+="\n"),globalParams=circuit.options&&circuit.options.params?circuit.options.params:{},circuit.params.length){cudaq+=identation+"params = [\n";for(i=0;i<circuit.params.length;i++){var globalParamName=circuit.params[i],globalParamValue=math.parse(globalParams[globalParamName]+"").toString({handler:mathToStringHandler});cudaq+=identation+"  "+globalParamValue,i<circuit.params.length-1&&(cudaq+=","),cudaq+=" # "+globalParamName+"\n"}cudaq+="]\n",cudaq+="\n"}hybrid&&(cudaq+="tolerance = "+(circuit.options&&circuit.options.hybridOptions&&circuit.options.hybridOptions.tolerance&&circuit.options.hybridOptions.tolerance||"0.001")+"\n",cudaq+="\n"),decompose||usedGates.map(function(usedGateName){var customGate,customCircuit,newOptions;circuit.basicGates[usedGateName]||(customGate=self.customGates[usedGateName])&&((customCircuit=new QuantumCircuit).load(customGate),newOptions={comment:"",decompose:!0,versionStr:versionStr,providerName:"",backendName:!1,asJupyter:!1,shots:null,hybrid:null,encoderDecoder:!1,commentOutUnknownGates:options.commentOutUnknownGates},cudaq+=customCircuit.exportToCudaQ(newOptions,usedGateName,circuitReplacement,insideSubmodule))}),encoderDecoder&&(identation+="  ","custom"==inputEncoding.type&&(customEncoder=inputEncoding.customFunction&&inputEncoding.customFunction.python?inputEncoding.customFunction.python:"def custom_encoder(input_data_row, input_encoding):\n    pass\n",cudaq+=customEncoder+"\n"),"custom"==outputDecoding.type&&(customDecoder=outputDecoding.customFunction&&outputDecoding.customFunction.python?outputDecoding.customFunction.python:"def custom_decoder(counts, output_decoding):\n    pass\n",cudaq+=customDecoder+"\n"),functionName=encoderDecoderOptions.functionName||"my_function",cudaq+="def "+functionName+"(",inputEncoding.colDefs&&inputEncoding.colDefs.map(function(colDef,colDefIndex){0<colDefIndex&&(cudaq+=", "),cudaq+=colDef.name}),cudaq+="):\n",(inputEncodingCopy=JSON.parse(JSON.stringify(inputEncoding))).colDefs&&inputEncodingCopy.colDefs.map(function(colDef){colDef.min&&(colDef.min=math.evaluate(colDef.min)),colDef.max&&(colDef.max=math.evaluate(colDef.max))}),void 0!==inputEncodingCopy.data&&delete inputEncodingCopy.data,"custom"==inputEncodingCopy.type?inputEncodingCopy.customFunction={python:"$custom_encoder$"}:inputEncodingCopy.customFunction&&delete inputEncodingCopy.customFunction,(outputDecodingCopy=JSON.parse(JSON.stringify(outputDecoding))).colDefs&&outputDecodingCopy.colDefs.map(function(colDef){colDef.min&&(colDef.min=math.evaluate(colDef.min)),colDef.max&&(colDef.max=math.evaluate(colDef.max))}),"custom"==outputDecodingCopy.type?outputDecodingCopy.customFunction={python:"$custom_decoder$"}:outputDecodingCopy.customFunction&&delete outputDecodingCopy.customFunction,inputEncodingStr=(inputEncodingStr="input_encoding = "+JSON.stringify(inputEncodingCopy,null,4)).replace('"$custom_encoder$"',"custom_encoder"),cudaq+=adjustIdentation(inputEncodingStr,identation)+"\n",outputDecodingStr=(outputDecodingStr="output_decoding = "+JSON.stringify(outputDecodingCopy,null,4)).replace('"$custom_decoder$"',"custom_decoder"),cudaq+=adjustIdentation(outputDecodingStr,identation)+"\n"),cudaq+=identation+"@cudaq.kernel\n",cudaq+=identation+"def circuit(",!exportAsGateName&&circuit.params&&circuit.params.length&&(cudaq+="params: list[float]"),cudaq+="):\n",cudaq+=(identation+="  ")+"q = cudaq.qvector("+circuit.numQubits+")\n",encoderDecoder&&(inputRowStr="{",inputEncoding.colDefs&&(inputEncoding.colDefs.length&&(inputRowStr+=" "),inputEncoding.colDefs.map(function(colDef,colDefIndex){0<colDefIndex&&(inputRowStr+=", "),inputRowStr+='"'+colDef.name+'": '+colDef.name}),inputEncoding.colDefs.length&&(inputRowStr+=" ")),cudaq+=identation+"input_data_row = "+(inputRowStr+="}")+"\n",cudaq+=identation+"input_qasm = encode_input(input_data_row, input_encoding)\n",cudaq+=identation+"# !!! CREATE KERNEL FROM QASM: NOT SUPPORTED YET.",cudaq+="\n")}for(var execBlock,numCols=circuit.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<circuit.numQubits;wire++){var gate=circuit.getGateAt(column,wire),cudaqReplacement=null,cudaqEquivalent=null;if(gate&&0==gate.connector){var replacementCircuit,equivalentCircuit,newOptions,cudaqCondition=gate.options&&gate.options.condition&&gate.options.condition.creg?gate.options.condition:null;if((gateDef=circuit.getGateDef(gate.name))&&gateDef.exportInfo&&(gateDef.exportInfo.cudaq&&gateDef.exportInfo.cudaq.replacement?(cudaq+="\n"+identation+"# "+gate.name+"\n",replacementCircuit=new QuantumCircuit,(cudaqReplacement=Array.isArray(gateDef.exportInfo.cudaq.replacement)?gateDef.exportInfo.cudaq.replacement:[gateDef.exportInfo.cudaq.replacement]).map(function(replacement){var params,replacementParams;gate.options&&gate.options.params&&(params=Object.keys(gate.options.params),replacementParams=Object.keys(replacement.params),params.map(function(param){-1<replacementParams.indexOf(param)&&(replacement.params[param]=gate.options.params[param])})),replacementCircuit.appendGate(replacement.name,gate.wires,{params:replacement.params,condition:cudaqCondition})}),newOptions={comment:"",decompose:!1,versionStr:versionStr,providerName:"",backendName:"",asJupyter:!1,shots:null,hybrid:!1,encoderDecoder:!1,commentOutUnknownGates:options.commentOutUnknownGates},cudaq+=adjustIdentation(replacementCircuit.exportToCudaQ(newOptions,!1,!0,!!exportAsGateName||insideSubmodule),identation)):gateDef.exportInfo.cudaq&&gateDef.exportInfo.cudaq.equivalent&&(cudaq+="\n"+identation+"# "+gate.name+"\n",equivalentCircuit=new QuantumCircuit,(cudaqEquivalent=Array.isArray(gateDef.exportInfo.cudaq.equivalent)?gateDef.exportInfo.cudaq.equivalent:[gateDef.exportInfo.cudaq.equivalent]).map(function(equivalent){var gateWires=1<equivalent.wires.length?gate.wires:gate.wires[equivalent.wires[0]],eqParams={};if(equivalent.params){var gateParams={};if(gate.options&&gate.options.params)for(var gateParamName in gate.options.params){var valueString=math.parse(gate.options.params[gateParamName]+"").toString({handler:mathToStringHandler});gateParams[gateParamName]=valueString}for(var eqParamName in equivalent.params){valueString=math.parse(equivalent.params[eqParamName]+"").toString({handler:mathToStringHandler,replaceVars:gateParams});eqParams[eqParamName]=valueString}}equivalentCircuit.appendGate(equivalent.name,gateWires,{params:eqParams,condition:cudaqCondition})}),newOptions={comment:"",decompose:!1,versionStr:versionStr,providerName:"",backendName:"",asJupyter:!1,shots:null,hybrid:!1,encoderDecoder:!1,commentOutUnknownGates:options.commentOutUnknownGates},cudaq+=adjustIdentation(equivalentCircuit.exportToCudaQ(newOptions,!1,!0,!!exportAsGateName||insideSubmodule),identation))),!cudaqReplacement&&!cudaqEquivalent){gate.options&&gate.options.condition&&gate.options.condition.creg&&(cudaq+=identation+"if "+gate.options.condition.creg+":\n",cudaq+="  "),cudaq+=identation;var gateName=gate.name,gateParams=gate.options&&gate.options.params?gate.options.params:{};"measure"==gateName&&(stateVector&&hybrid&&(cudaq+="# "),circuit.gotClassicalControl()&&(cudaq+=gate.options.creg.name+" = ")),!circuit.basicGates[gate.name]||gateDef&&gateDef.exportInfo&&gateDef.exportInfo.cudaq||!options.commentOutUnknownGates||(cudaq+="# ");var controlWiresCount=0;gateDef&&gateDef.exportInfo&&gateDef.exportInfo.cudaq&&gateDef.exportInfo.cudaq.name?(gateName=gateDef.exportInfo.cudaq.name,gateDef.exportInfo.cudaq.adjoint&&(gateName+=".adj"),gateDef.exportInfo.cudaq.controlled&&(gateName+=".ctrl",controlWiresCount=gateDef.exportInfo.cudaq.controlWiresCount||1)):gateName=gate.name,cudaq+=gateName+"(";var gateDef,argCount=0;if(gateParams)if(gateDef=(gateDef=circuit.basicGates[gate.name])||circuit.customGates[gate.name]){var paramDef=gateDef.params||[],paramCount=paramDef.length;if(paramCount){for(var p=0;p<paramCount;p++){0<argCount&&(cudaq+=", ");var valueString,globalParamIndex,paramName=paramDef[p];(gateParams[paramName]||gateParams[paramName].toString())&&(valueString=math.parse(gateParams[paramName]+"").toString({handler:mathToStringHandler}),exportAsGateName||0<=(globalParamIndex=circuit.params.indexOf(valueString))&&(valueString="params["+globalParamIndex+"]"),cudaq+=valueString),argCount++}"cu"!=gateName||gateParams.gamma||(cudaq+=", 0",argCount++)}}for(var w=0;w<gate.wires.length;w++)0<argCount&&(cudaq+=", "),0==w&&controlWiresCount&&(cudaq+="["),cudaq+=exportAsGateName||insideSubmodule?"q_"+gate.wires[w]:"q["+gate.wires[w]+"]",w==controlWiresCount-1&&controlWiresCount&&(cudaq+="]"),argCount++;"measure"==gateName&&gate.options&&gate.options.creg&&(0<argCount&&(cudaq+=", "),cudaq+=gate.options.creg.name+"["+gate.options.creg.bit+"]",argCount++),cudaq+=")",cudaq+="\n"}}}if(!circuitReplacement){if(exportAsGateName?cudaq+="\n":(cudaq+="\n",encoderDecoder&&(cudaq+=identation+"mz()\n",cudaq+="\n"),identation="",hybrid&&(identation+="  "),encoderDecoder&&(identation+="  "),execBlock="",stateVector?(execBlock+=identation+"state = cudaq.get_state(circuit",circuit.params&&circuit.params.length&&(execBlock+=", params")):(execBlock+=identation+"counts = cudaq.sample(circuit",circuit.params&&circuit.params.length&&(execBlock+=", params"),shots&&(execBlock+=", shots_count=shots")),execBlock+=")\n",hybrid?(cudaq+="def objective_function(params):\n",cudaq+=execBlock,stateVector||(cudaq+=identation+"counts = Counter(dict(counts.items()))\n"),costFunction.trim()||(costFunction="# CALCULATE COST HERE\ncost = 0"),cudaq+=adjustIdentation(costFunction,identation),cudaq+="\n",cudaq+=identation+"return cost\n"):encoderDecoder?(cudaq+=execBlock,cudaq+=identation+"output_data_row = decode_output(counts, output_decoding, unpack_values=True)\n",cudaq+=identation+"return output_data_row\n"):(cudaq+=execBlock,cudaq+=identation+"print(counts)\n"),hybrid&&(circuit.params.map(function(globalParamName,globalParamIndex){0<globalParamIndex&&0,0}),cudaq+="\n",cudaq+='minimum = minimize(objective_function, params, method="'+(circuit.options&&circuit.options.hybridOptions&&circuit.options.hybridOptions.optimizer?circuit.options.hybridOptions.optimizer:"Powell")+'", tol=tolerance)\n',cudaq+='print("cost:", minimum.fun, "params:", minimum.x)\n')),asJupyter){var notebook={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:cudaq,metadata:{},outputs:[],execution_count:null}]},packageInstallCode="";return packageList.map(function(packageName,packageIndex){0<packageIndex&&(packageInstallCode+="\n"),packageInstallCode+="!pip install "+packageName}),packageInstallCode&&notebook.cells.unshift({cell_type:"code",source:packageInstallCode,metadata:{},outputs:[],execution_count:null}),JSON.stringify(notebook)}packageInstallCode="";packageList.map(function(packageName,packageIndex){0<packageIndex&&(packageInstallCode+=",\n"),packageInstallCode+='#     "'+packageName+'"'}),packageInstallCode&&(cudaq="# /// script\n# dependencies = [\n"+packageInstallCode+"\n# ]\n# ///\n\n"+cudaq)}return cudaq},QuantumCircuit.prototype.exportToQuEST=function(options,exportAsGateName,definedFunc){var comment=(options=options||{}).comment,decompose=options.decompose,self=this;definedFunc=definedFunc||[];var circuit=null,functions=["unitary","controlledUnitary"];(circuit=new QuantumCircuit).load(this.save(decompose));var quest="";comment&&(comment||"").split("\n").map(function(cline){2<=cline.length&&"/"!=cline[0]&&"/"!=cline[1]&&(quest+="// "),quest+=cline,quest+="\n"});for(var i=0;i<this.numQubits;i++)for(var gates=this.gates[i],j=0;j<gates.length;j++){if((gate=gates[j])&&this.basicGates[gate.name]&&(this.basicGates[gate.name].exportInfo&&this.basicGates[gate.name].exportInfo.quest)){var questName=this.basicGates[gate.name].exportInfo.quest.name;if(definedFunc.includes(gate.name))continue;(functions.includes(questName)||this.basicGates[gate.name].exportInfo.quest.func)&&definedFunc.push(gate.name)}}if(exportAsGateName){quest+="Qureg "+exportAsGateName+"(Qureg qubits";for(i=0;i<circuit.numQubits;i++)quest+=", const int q",quest+=i;if(circuit.params&&circuit.params.length)for(i=0;i<circuit.params.length;i++)quest+=", double "+circuit.params[i];quest+=") {\n"}else{quest+='#include <math.h>\n#include "QuEST.h"\n\n',quest+="#ifndef M_PI\n#define M_PI 3.14159265\n#endif\n\n";var customQuEST=[],usedGates=circuit.usedGates();decompose||usedGates.map(function(usedGateName){var customGate,customCircuit;circuit.basicGates[usedGateName]||(customGate=self.customGates[usedGateName])&&((customCircuit=new QuantumCircuit).load(customGate),customQuEST.push(customCircuit.exportToQuEST({comment:"",decompose:!1},usedGateName,definedFunc)))});for(i=0;i<definedFunc.length;i++){var gateName=definedFunc[i];if(this.basicGates[gateName].exportInfo&&this.basicGates[gateName].exportInfo.quest)switch(questName=this.basicGates[gateName].exportInfo.quest.name){case"unitary":case"controlledUnitary":matrix=this.basicGates[gateName].exportInfo.quest.matrix;var questParams=this.basicGates[gateName].exportInfo.quest.params;if(quest+="void "+gateName+"(Qureg qubits, const int q","controlledUnitary"==questName&&(quest+="1, const int q2"),questParams)for(j=0;j<questParams.length;j++)quest+=", double "+questParams[j];quest+=") {\n",quest+="    ComplexMatrix2 u;\n",quest+="    u.r0c0 = (Complex) {.real="+matrix[0][0][0]+", .imag= "+matrix[0][0][1]+"};\n",quest+="    u.r0c1 = (Complex) {.real="+matrix[0][1][0]+", .imag= "+matrix[0][1][1]+"};\n",quest+="    u.r1c0 = (Complex) {.real="+matrix[1][0][0]+", .imag= "+matrix[1][0][1]+"};\n",quest+="    u.r1c1 = (Complex) {.real="+matrix[1][1][0]+", .imag= "+matrix[1][1][1]+"};\n",quest+="    "+questName+"(qubits, q","controlledUnitary"==questName&&(quest+="1, q2"),quest+=", u);\n}\n\n";break;default:quest+=this.basicGates[gateName].exportInfo.quest.func+"\n\n"}}for(i=0;i<customQuEST.length;i++)quest+=customQuEST[i];quest+="int main(int argc, char *argv[]) {\n",quest+="    QuESTEnv env = createQuESTEnv();\n",quest+="    Qureg qubits = createQureg("+circuit.numQubits+", env);\n",quest+="    int measured["+circuit.numQubits+"];\n\n"}quest+="\n";for(var numCols=circuit.numCols(),column=0;column<numCols;column++)for(var gate,wire=0;wire<this.numQubits;wire++){if((gate=circuit.getGateAt(column,wire))&&0==gate.connector){gate.options&&gate.options.condition&&gate.options.condition.creg&&(quest+="if("+gate.options.condition.creg+"=="+gate.options.condition.value+") {\n");var gateName=gate.name,gateParams=gate.options&&gate.options.params?gate.options.params:{},gateDef=this.basicGates[gateName];if("measure"==gateName)quest+="    measured["+gate.wires[0]+"] = measure(qubits, "+gate.wires[0];else if(gateDef){questName=gateDef.exportInfo.quest.name,questParams=gateDef.exportInfo.quest.params;functions.includes(questName)?quest+="    "+gateName+"(qubits":quest+="    "+questName+"(qubits";for(var w=0;w<gate.wires.length;w++)quest+=exportAsGateName?", q"+gate.wires[w]:", "+gate.wires[w];if(questParams)switch(questName){case"compactUnitary":quest+=", "+questParams.alpha,quest+=", "+questParams.beta;break;case"phaseShift":case"controlledPhaseShift":questParams.theta&&(quest+=", "+questParams.theta)}}else{gateDef=this.customGates[gateName],quest+="    qubits = "+gateName+"(qubits";for(w=0;w<gate.wires.length;w++)quest+=", "+gate.wires[w]}if(gateParams)if(gateDef=(gateDef=this.basicGates[gateName])||this.customGates[gateName]){var paramDef=gateDef.params||[],paramCount=paramDef.length;if(paramCount)for(var p=0;p<paramCount;p++){quest+=", "+gateParams[paramDef[p]]}}quest+=");\n",gate.options&&gate.options.condition&&gate.options.condition.creg&&(quest+="}\n")}}return exportAsGateName?quest+="\n    return qubits;\n}\n\n":(quest+="\n    destroyQureg(qubits, env);\n",quest+="    destroyQuESTEnv(env);\n",quest+="    return 0;\n}\n"),quest},QuantumCircuit.prototype.exportToQASM=function(options,exportAsGateName,circuitReplacement,insideSubmodule){function mathToStringHandler(node,options){if(node.isSymbolNode){var nodeName=node.name;if(options.replaceVars&&void 0!==options.replaceVars[nodeName]){nodeName=options.replaceVars[nodeName];return!compatibilityMode&&0<=self.params.indexOf(nodeName)?"("+globalParams[nodeName]+")":"("+nodeName+")"}if(!compatibilityMode&&0<=self.params.indexOf(node.name))return globalParams[node.name]}}var comment=(options=options||{}).comment,decompose=options.decompose,compatibilityMode=options.compatibilityMode,self=this,globalParams=this.options&&this.options.params?this.options.params:{},circuit=null;(circuit=new QuantumCircuit).load(this.save(decompose));var qasm="";if(comment&&(comment||"").split("\n").map(function(cline){(exportAsGateName||insideSubmodule)&&(qasm+="  "),2<=cline.length&&"/"!=cline[0]&&"/"!=cline[1]&&(qasm+="// "),qasm+=cline,qasm+="\n"}),exportAsGateName){if(qasm+="gate "+exportAsGateName,circuit.params&&circuit.params.length){qasm+="(";for(var pc=0;pc<circuit.params.length;pc++)0<pc&&(qasm+=", "),qasm+=circuit.params[pc];qasm+=")"}for(var i=0;i<circuit.numQubits;i++)0==i&&(qasm+=" "),0<i&&(qasm+=", "),qasm+=qubitLetter(i,circuit.numQubits);qasm+="\n{\n"}else if(!circuitReplacement){for(var cregName in qasm+="OPENQASM 2.0;\n",qasm+='include "qelib1.inc";\n',qasm+="qreg q["+circuit.numQubits+"];\n",circuit.cregs)qasm+="creg "+cregName+"["+(circuit.cregs[cregName].length||1)+"];\n";var usedGates=circuit.usedGates();decompose||usedGates.map(function(usedGateName){var customGate,customCircuit,newOptions;circuit.basicGates[usedGateName]||(customGate=self.customGates[usedGateName])&&((customCircuit=new QuantumCircuit).load(customGate),newOptions={comment:"",decompose:!1,compatibilityMode:compatibilityMode},qasm+=customCircuit.exportToQASM(newOptions,usedGateName,!1,!1))})}for(var numCols=circuit.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<circuit.numQubits;wire++){var gate=circuit.getGateAt(column,wire),qasmReplacement=null,qasmEquivalent=null;if(gate&&0==gate.connector){var replacementCircuit,equivalentCircuit,newOptions,qasmName=gate.name;if(compatibilityMode||(gateDef=circuit.getGateDef(gate.name))&&gateDef.exportInfo&&(gateDef.exportInfo.qasm&&gateDef.exportInfo.qasm.name?qasmName=gateDef.exportInfo.qasm.name:gateDef.exportInfo.qasm&&gateDef.exportInfo.qasm.replacement?((replacementCircuit=new QuantumCircuit).cregs=JSON.parse(JSON.stringify(self.cregs)),(qasmReplacement=gateDef.exportInfo.qasm.replacement).map(function(replacement){var params,replacementParams;gate.options&&gate.options.params&&(params=Object.keys(gate.options.params),replacementParams=Object.keys(replacement.params),params.map(function(param){0<=replacementParams.indexOf(param)&&(replacement.params[param]=gate.options.params[param])}));var replacementCondition=gate.options&&gate.options.condition?gate.options.condition:{};replacementCircuit.appendGate(replacement.name,gate.wires,{params:replacement.params,condition:replacementCondition})}),newOptions={comment:gate.name,decompose:!1,compatibilityMode:compatibilityMode},qasm+="\n",qasm+=replacementCircuit.exportToQASM(newOptions,!1,!0,!!exportAsGateName||insideSubmodule),qasm+="\n"):gateDef.exportInfo.qasm&&gateDef.exportInfo.qasm.equivalent&&((equivalentCircuit=new QuantumCircuit).cregs=JSON.parse(JSON.stringify(self.cregs)),(qasmEquivalent=gateDef.exportInfo.qasm.equivalent).map(function(equivalent){var gateWires=1<equivalent.wires.length?gate.wires:gate.wires[equivalent.wires[0]],eqParams={};if(equivalent.params){var gateParams={};if(gate.options&&gate.options.params)for(var gateParamName in gate.options.params){var valueString=math.parse(gate.options.params[gateParamName]).toString({handler:mathToStringHandler});gateParams[gateParamName]=valueString}for(var eqParamName in equivalent.params){valueString=math.parse(equivalent.params[eqParamName]).toString({handler:mathToStringHandler,replaceVars:gateParams});eqParams[eqParamName]=valueString}}var eqCondition=gate.options&&gate.options.condition?gate.options.condition:{};equivalentCircuit.appendGate(equivalent.name,gateWires,{params:eqParams,condition:eqCondition})}),newOptions={comment:gate.name,decompose:!1,compatibilityMode:compatibilityMode},qasm+="\n",qasm+=equivalentCircuit.exportToQASM(newOptions,"",!0,!!exportAsGateName||insideSubmodule),qasm+="\n")),qasmReplacement||qasmEquivalent||((exportAsGateName||insideSubmodule)&&(qasm+="  "),gate.options&&gate.options.condition&&gate.options.condition.creg&&(qasm+="if("+gate.options.condition.creg+"=="+gate.options.condition.value+") ")),!qasmReplacement&&!qasmEquivalent||compatibilityMode){var gateDef,gateName=gate.name,gateParams=gate.options&&gate.options.params?gate.options.params:{};if(qasm+=compatibilityMode?gate.name:qasmName,gateParams)if(gateDef=(gateDef=circuit.basicGates[gateName])||circuit.customGates[gateName]){var paramDef=gateDef.params||[],paramCount=paramDef.length;if(paramCount){qasm+=" (";for(var p=0;p<paramCount;p++){0<p&&(qasm+=", ");var paramName=paramDef[p],paramValue=gateParams[paramName];exportAsGateName||insideSubmodule||compatibilityMode||(paramValue=math.parse(gateParams[paramName]).toString({handler:mathToStringHandler})),qasm+=paramValue}qasm+=")"}}for(var w=0;w<gate.wires.length;w++)0<w&&(qasm+=","),qasm+=exportAsGateName||insideSubmodule?" "+qubitLetter(gate.wires[w],circuit.numQubits):" q["+gate.wires[w]+"]";"measure"==gateName&&gate.options&&gate.options.creg&&(qasm+=" -> ",qasm+=gate.options.creg.name+"["+gate.options.creg.bit+"]"),qasm+=";\n"}}}return exportAsGateName&&(qasm+="}\n\n"),qasm},QuantumCircuit.prototype.exportToPyquil=function(options,exportAsGateName){var comment=(options=options||{}).comment,decompose=options.decompose,versionStr=options.versionStr,lattice=options.lattice,asQVM=options.asQVM,asJupyter=options.asJupyter,shots=options.shots,hybrid=options.hybrid,self=this,version=parseFloat(versionStr||"2.12");isNaN(version)&&(version=2.1);var packageList=[],shots=shots||1024;void 0===hybrid&&(hybrid=!!this.options&&!!this.options.hybrid);var circuit=new QuantumCircuit;circuit.load(this.save(decompose));function mathToStringHandler(node,options){if(node.isSymbolNode){if(0<=["pi","sin","cos","tan","asin","acos","atan"].indexOf(node.name))return"np."+node.name;if(0<=self.params.indexOf(node.name)&&hybrid)return"params["+self.params.indexOf(node.name)+"]"}}function adjustIdentation(addStr,ident){var str="",cfLines=addStr.split("\n"),minIdent=-1;cfLines.map(function(cfLine){var tmpIdent=cfLine.search(/\S/);0<=tmpIdent&&(minIdent<0||tmpIdent<minIdent)&&(minIdent=tmpIdent)}),minIdent<0&&(minIdent=0);var addIdent="";if(minIdent<ident.length)for(var tmp=0;tmp<ident.length-minIdent;tmp++)addIdent+=" ";return cfLines.map(function(cfLine){str+=addIdent+cfLine+"\n"}),str}var importGates="",defParams=[],defGates="",defRun="",defArrays="",usedGates=circuit.usedGates(),gotMeasurement=circuit.gotMeasurement(),defGateNames=[],defCircNames=[];usedGates.map(function(usedGateName){var paramList,quilInfo,importName,bg,basicGate=circuit.basicGates[usedGateName];basicGate&&(basicGate.exportInfo&&basicGate.exportInfo.pyquil?(quilInfo=basicGate.exportInfo.pyquil).array?(paramList="",quilInfo.params&&(paramList+=", [",quilInfo.params.map(function(paramName,paramIndex){0<paramIndex&&(paramList+=", "),paramList+="p_"+paramName;var paramText="p_"+paramName+" = Parameter('"+paramName+"')";defParams.indexOf(paramText)<0&&defParams.push(paramText)}),paramList+="]"),defRun+="p.inst("+quilInfo.name+"_defgate)\n",defArrays+=quilInfo.name+"_array = np.array("+quilInfo.array+")\n",defGates+=quilInfo.name+"_defgate = DefGate('"+quilInfo.name+"', "+quilInfo.name+"_array"+paramList+")\n",defGates+=quilInfo.name+" = "+quilInfo.name+"_defgate.get_constructor()\n",defGateNames.push(quilInfo.name)):(importName="",quilInfo.replacement?(bg=circuit.basicGates[quilInfo.replacement.name])&&bg.exportInfo&&(bg.exportInfo.pyquil?importName=bg.exportInfo.pyquil.name:bg.exportInfo.quil&&(importName=bg.exportInfo.quil.name)):importName=quilInfo.name,importName&&(importGates&&(importGates+=", "),importGates+=importName)):basicGate.exportInfo&&basicGate.exportInfo.quil&&((quilInfo=basicGate.exportInfo.quil).defgate||(importName="",quilInfo.replacement?(bg=circuit.basicGates[quilInfo.replacement.name])&&bg.exportInfo&&(bg.exportInfo.pyquil?importName=bg.exportInfo.pyquil.name:bg.exportInfo.quil&&(importName=bg.exportInfo.quil.name)):importName=quilInfo.name,importName&&(importGates&&(importGates+=", "),importGates+=importName))))});var gotConditions=circuit.gotClassicalControl();gotConditions&&(importGates&&(importGates+=", "),importGates+=version<2?"FALSE, NOT, OR, AND":"MOVE, NOT, IOR, AND");var importsForDefgate="";defGates&&(importsForDefgate=version<2.12?"from pyquil.parameters import Parameter, quil_sin, quil_cos, quil_sqrt, quil_exp, quil_cis\nfrom pyquil.quilbase import DefGate":"from pyquil.quilatom import Parameter, quil_sin, quil_cos, quil_sqrt, quil_exp, quil_cis\nfrom pyquil.quilbase import DefGate");var pyquil="";comment&&(comment||"").split("\n").map(function(cline){1<=cline.length&&"#"!=cline[0]&&(pyquil+="# "),pyquil+=cline,pyquil+="\n"});var totalBits,indent="";if(exportAsGateName){for(var args="",argCount=0,i=0;i<circuit.params.length;i++)0<argCount&&(args+=", "),args+=circuit.params[i],argCount++;for(i=0;i<circuit.numQubits;i++)0<argCount&&(args+=", "),args+="q"+i,argCount++;pyquil+="def "+exportAsGateName+(args?"("+args+")":"")+":\n",indent="  "}else{packageList.push("pyquil"),version<2?(pyquil+="from pyquil.api import QVMConnection\n",pyquil+="from pyquil.quil import Program\n"):pyquil+="from pyquil import Program, get_qc\n",importGates&&(pyquil+="from pyquil.gates import "+importGates+"\n"),importsForDefgate&&(pyquil+=importsForDefgate+"\n"),pyquil+="from functools import reduce\n",hybrid&&(pyquil+="from scipy.optimize import minimize\n",pyquil+="from collections import Counter\n",packageList.push("scipy")),pyquil+="import numpy as np\n",packageList.push("numpy"),shots&&(pyquil+="\n",pyquil+="shots = "+shots+"\n");var globalParams=this.options&&this.options.params?this.options.params:{};if(this.params.length){pyquil+="\n";for(i=0;i<this.params.length;i++){var globalParamName=this.params[i],globalParamValue=(node=math.parse(globalParams[globalParamName])).toString({handler:mathToStringHandler});pyquil+=globalParamName+" = "+globalParamValue+"\n"}pyquil+="\n"}hybrid&&(pyquil+="tolerance = "+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.tolerance&&this.options.hybridOptions.tolerance||"0.001")+"\n",pyquil+="\n"),defGates&&(defParams.map(function(defParamItem,defIndex){0==defIndex&&(pyquil+="\n"),pyquil+=defParamItem+"\n"}),pyquil+="\n",pyquil+=defArrays+"\n",pyquil+="\n",pyquil+=defGates+"\n"),pyquil+="\n";usedGates=circuit.usedGates();decompose||usedGates.map(function(usedGateName){var customGate,customCircuit,newOptions;circuit.basicGates[usedGateName]||(customGate=self.customGates[usedGateName])&&((customCircuit=new QuantumCircuit).load(customGate),newOptions={comment:"",decompose:!1,versionStr:versionStr},pyquil+=customCircuit.exportToPyquil(newOptions,usedGateName),defCircNames.push(usedGateName))})}hybrid&&(indent+="  ",pyquil+="def objective_function(params):\n"),2<=version&&!exportAsGateName?(pyquil+=asQVM||lattice?indent+"p = Program('PRAGMA INITIAL_REWIRING \"PARTIAL\"')\n\n":indent+"p = Program()\n\n",totalBits=circuit.cregTotalBits(),gotConditions&&(totalBits+=1),totalBits&&(pyquil+=indent+"ro = p.declare('ro', memory_type='BIT', memory_size="+totalBits+")\n",pyquil+="\n")):pyquil+=indent+"p = Program()\n\n",pyquil+=defRun?indent+defRun+"\n":"";for(var costFunction,latticeName,globalParamList,column=0;column<circuit.numCols();column++)for(var wire=0;wire<circuit.numQubits;wire++){var gate=circuit.getGateAt(column,wire);if(gate&&0==gate.connector){var gateDef=circuit.getGateDef(gate.name),gateParams=gate.options&&gate.options.params?gate.options.params:{},quilInfo=null;if(gateDef){gateDef.exportInfo&&(gateDef.exportInfo.pyquil&&gateDef.exportInfo.pyquil.replacement?(gateDef.exportInfo.pyquil.replacement.params&&(gateParams=gateDef.exportInfo.pyquil.replacement.params),gateDef=circuit.getGateDef(gateDef.exportInfo.pyquil.replacement.name)):gateDef.exportInfo.quil&&gateDef.exportInfo.quil.replacement&&(gateDef.exportInfo.quil.replacement.params&&(gateParams=gateDef.exportInfo.quil.replacement.params),gateDef=circuit.getGateDef(gateDef.exportInfo.quil.replacement.name)),gateDef&&gateDef.exportInfo&&(gateDef.exportInfo.pyquil?quilInfo=gateDef.exportInfo.pyquil:gateDef.exportInfo.quil&&(quilInfo=gateDef.exportInfo.quil)));var isDefGate=!1,insideControl=(quilInfo?(isDefGate=0<=defGateNames.indexOf(quilInfo.name),defCircNames.indexOf(quilInfo.name)):(isDefGate=0<=defGateNames.indexOf(gate.name),defCircNames.indexOf(gate.name)),!1);if(gate.options&&gate.options.condition&&gate.options.condition.creg){insideControl=!0,pyquil+="\n";var testBit=self.cregTotalBits(),condition=gate.options.condition,conditionValue=condition.value||0,cregBase=self.cregBase(condition.creg);if(0==conditionValue){var cregSize=self.cregs[condition.creg].length;if(version<2){pyquil+=indent+"p.inst(FALSE("+testBit+"))\n";for(var bitIndex=0;bitIndex<cregSize;bitIndex++)pyquil+=indent+"p.inst(OR("+(bitIndex+cregBase)+", "+testBit+"))\n";pyquil+=indent+"p.inst(NOT("+testBit+"))\n",pyquil+=indent+"p.if_then("+testBit+", Program("}else{pyquil+=indent+"p.inst(MOVE(ro["+testBit+"], 0))\n";for(bitIndex=0;bitIndex<cregSize;bitIndex++)pyquil+=indent+"p.inst(IOR(ro["+testBit+"], ro["+(bitIndex+cregBase)+"]))\n";pyquil+=indent+"p.inst(NOT(ro["+testBit+"]))\n",pyquil+=indent+"p.if_then(ro["+testBit+"], Program("}}else{var firstSet,bitStr=conditionValue.toString(2).split("").reverse(),bitCount=0,singleBitIndex=0;bitStr.map(function(bitValue,bitIndex){var bitVal=parseInt(bitValue);(bitStr[bitIndex]=bitVal)&&(bitCount++,singleBitIndex=bitIndex)}),1==bitCount?pyquil+=version<2?indent+"p.if_then("+(singleBitIndex+cregBase)+", Program(":indent+"p.if_then(ro["+(singleBitIndex+cregBase)+"], Program(":version<2?(pyquil+=indent+"p.inst(FALSE("+testBit+"))\n",firstSet=!0,bitStr.map(function(bitValue,bitIndex){bitValue&&(firstSet?(firstSet=!1,pyquil+=indent+"p.inst(OR("+(bitIndex+cregBase)+", "+testBit+"))\n"):pyquil+=indent+"p.inst(AND("+(bitIndex+cregBase)+", "+testBit+"))\n")}),pyquil+=indent+"p.if_then("+testBit+", Program("):(pyquil+=indent+"p.inst(MOVE(ro["+testBit+"], 0))\n",firstSet=!0,bitStr.map(function(bitValue,bitIndex){bitValue&&(firstSet?(firstSet=!1,pyquil+=indent+"p.inst(IOR(ro["+testBit+"], ro["+(bitIndex+cregBase)+"]))\n"):pyquil+=indent+"p.inst(AND(ro["+testBit+"], ro["+(bitIndex+cregBase)+"]))\n")}),pyquil+=indent+"p.if_then(ro["+testBit+"], Program(")}}else pyquil+=indent+"p.inst(";pyquil+=quilInfo?quilInfo.name:gate.name;var gotOpenBrace=!1;if(quilInfo&&quilInfo.params&&quilInfo.params.length){argCount=0;pyquil+="(",gotOpenBrace=!0;for(var p=0;p<quilInfo.params.length;p++){0<argCount&&(pyquil+=", "),void 0!==gateParams[quilInfo.params[p]]&&(node=math.parse(gateParams[quilInfo.params[p]]),pyquil+=node.toString({handler:mathToStringHandler})),argCount++}pyquil+=version<2||isDefGate?")":", "}else if(gateDef&&gateDef.params&&gateDef.params.length){argCount=0;pyquil+="(",gotOpenBrace=!0;for(var node,p=0;p<gateDef.params.length;p++){0<argCount&&(pyquil+=", "),void 0!==gateParams[gateDef.params[p]]&&(node=math.parse(gateParams[gateDef.params[p]]),pyquil+=node.toString({handler:mathToStringHandler})),argCount++}pyquil+=version<2||isDefGate?")":", "}if(gate.wires.length){argCount=0;(version<2||!gotOpenBrace||isDefGate)&&(pyquil+="(",gotOpenBrace=!0);for(var targetBit,w=0;w<gate.wires.length;w++)0<argCount&&(pyquil+=", "),pyquil+=exportAsGateName?"q"+gate.wires[w]:""+gate.wires[w],argCount++;"measure"==gate.name&&gate.options&&gate.options.creg&&(targetBit=parseInt(gate.options.creg.bit)||0,isNaN(targetBit)&&(targetBit=0),0<argCount&&(pyquil+=", "),pyquil+=version<2?targetBit+self.cregBase(gate.options.creg.name):"ro["+(targetBit+self.cregBase(gate.options.creg.name))+"]",argCount++),pyquil+=")"}pyquil+=")",insideControl&&(pyquil+=")\n"),pyquil+="\n"}else pyquil+=indent+'# Export to pyquil WARNING: unknown gate "'+gate.name+'".'}}if(exportAsGateName?(pyquil+=indent+"return p\n",pyquil+="\n"):(pyquil+="\n",version<2?(pyquil+=indent+"qvm = QVMConnection()\n",hybrid?(pyquil+="\n",pyquil+=indent+"# CALCULATE COST HERE\n",(costFunction=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"").trim()||(costFunction="cost = 0"),pyquil+=adjustIdentation(costFunction,indent),pyquil+="\n",pyquil+=indent+"return cost\n"):pyquil+=indent+"print(qvm.run(p))\n"):(shots&&(pyquil+=indent+"p.wrap_in_numshots_loop(shots)\n",pyquil+="\n"),latticeName=(latticeName=lattice)||(version<2.1?this.numQubits+"q-generic-qvm":this.numQubits+"q-qvm"),pyquil+=indent+"qc = get_qc('"+latticeName+"'"+(lattice?", as_qvm="+(asQVM?"True":"False"):"")+")\n",lattice?(pyquil+=indent+"ep = qc.compile(p)\n",gotMeasurement?(pyquil+=indent+'results_list = qc.run(ep).readout_data.get("ro")\n',pyquil+=indent+'results = list(map(lambda arr: reduce(lambda x, y: str(x) + str(y), arr[::-1], ""), results_list))\n',hybrid?(pyquil+=indent+"counts = Counter(dict(zip(results,[results.count(i) for i in results])))\n",pyquil+="\n",pyquil+=indent+"# CALCULATE COST HERE\n",(costFunction=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"").trim()||(costFunction="cost = 0"),pyquil+=adjustIdentation(costFunction,indent),pyquil+="\n",pyquil+=indent+"return cost\n"):(pyquil+=indent+"counts = dict(zip(results,[results.count(i) for i in results]))\n",pyquil+=indent+"print(counts)\n")):hybrid?(pyquil+=indent+"counts = Counter(dict(zip(results,[results.count(i) for i in results])))\n",pyquil+="\n",pyquil+=indent+"# CALCULATE COST HERE\n",(costFunction=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"").trim()||(costFunction="cost = 0"),pyquil+=adjustIdentation(costFunction,indent),pyquil+="\n",pyquil+=indent+"return cost\n"):pyquil+=indent+'print(qc.run(ep).readout_data.get("ro"))\n'):gotMeasurement?(pyquil+=indent+'results_list = qc.run(p).readout_data.get("ro")\n',pyquil+=indent+'results = list(map(lambda arr: reduce(lambda x, y: str(x) + str(y), arr[::-1], ""), results_list))\n',hybrid?(pyquil+=indent+"counts = Counter(dict(zip(results,[results.count(i) for i in results])))\n",pyquil+="\n",pyquil+=indent+"# CALCULATE COST HERE\n",(costFunction=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"").trim()||(costFunction="cost = 0"),pyquil+=adjustIdentation(costFunction,indent),pyquil+="\n",pyquil+=indent+"return cost\n"):(pyquil+=indent+"counts = dict(zip(results,[results.count(i) for i in results]))\n",pyquil+=indent+"print(counts)\n")):(pyquil+=indent+'results_list = qc.run(p).readout_data.get("ro")\n',pyquil+=indent+'results = list(map(lambda arr: reduce(lambda x, y: str(x) + str(y), arr[::-1], ""), results_list))\n',hybrid?(pyquil+=indent+"counts = Counter(dict(zip(results,[results.count(i) for i in results])))\n",pyquil+="\n",pyquil+=indent+"# CALCULATE COST HERE\n",(costFunction=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"").trim()||(costFunction="cost = 0"),pyquil+=adjustIdentation(costFunction,indent),pyquil+="\n",pyquil+=indent+"return cost\n"):pyquil+=indent+"print(results)\n")),hybrid&&(globalParamList="",this.params.map(function(globalParamName,globalParamIndex){0<globalParamIndex&&(globalParamList+=", "),globalParamList+=globalParamName}),pyquil+="\n",pyquil+="params = np.array(["+globalParamList+"])\n",pyquil+="\n",pyquil+='minimum = minimize(objective_function, params, method="'+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.optimizer?this.options.hybridOptions.optimizer:"Powell")+'", tol=tolerance)\n',pyquil+='print("cost:", minimum.fun, "params:", minimum.x)\n')),asJupyter){var notebook={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:pyquil,metadata:{},outputs:[],execution_count:null}]},packageInstallCode="";return packageList.map(function(packageName,packageIndex){0<packageIndex&&(packageInstallCode+="\n"),packageInstallCode+="!pip install "+packageName}),packageInstallCode&&notebook.cells.unshift({cell_type:"code",source:packageInstallCode,metadata:{},outputs:[],execution_count:null}),JSON.stringify(notebook)}packageInstallCode="";return packageList.map(function(packageName,packageIndex){0<packageIndex&&(packageInstallCode+=",\n"),packageInstallCode+='#     "'+packageName+'"'}),packageInstallCode&&(pyquil="# /// script\n# dependencies = [\n"+packageInstallCode+"\n# ]\n# ///\n\n"+pyquil),pyquil},QuantumCircuit.prototype.exportToQuil=function(options,exportAsGateName){var comment=(options=options||{}).comment,versionStr=options.versionStr,self=this,version=parseFloat(versionStr||"2.0");isNaN(version)&&(version=2);var circuit=new QuantumCircuit;circuit.load(this.save(!0));var quil="";comment&&(comment||"").split("\n").map(function(cline){1<=cline.length&&"#"!=cline[0]&&(quil+="# "),quil+=cline,quil+="\n"}),circuit.usedGates().map(function(usedGateName){var basicGate=circuit.basicGates[usedGateName];basicGate&&basicGate.exportInfo&&basicGate.exportInfo.quil&&basicGate.exportInfo.quil.defgate&&(quil+=basicGate.exportInfo.quil.defgate,quil+="\n\n")});var totalBits,gotConditions=this.gotClassicalControl(),indent="";if(exportAsGateName){var params="";if(circuit.params.length){params+="(";for(var i=0;i<circuit.params.length;i++)0<i&&(params+=", "),params+="%"+circuit.params[i];params+=")"}for(var args="",i=0;i<circuit.numQubits;i++)0<i&&(args+=" "),args+="q"+i;quil+="DEFCIRCUIT "+exportAsGateName+(params?" "+params:"")+(args?" "+args:"")+":\n",indent="    "}else{quil+="\n",2<=version&&(totalBits=circuit.cregTotalBits(),gotConditions&&(totalBits+=1),totalBits&&(quil+="DECLARE ro BIT["+totalBits+"]\n"));var globalParams=this.options&&this.options.params?this.options.params:{};if(this.params.length){quil+="\n";for(i=0;i<this.params.length;i++){var globalParamName=this.params[i];(node=math.parse(globalParams[globalParamName])).toString({handler:mathToStringHandler});quil+="DECLARE "+globalParamName+" REAL[1]\n"}quil+="\n"}circuit.usedGates();0}for(var mathToStringHandler=function(node,options){if(node.isSymbolNode&&0<=circuit.params.indexOf(node.name))return"%"+node.name},labelCounter=1,column=0;column<circuit.numCols();column++)for(var wire=0;wire<circuit.numQubits;wire++){var gate=circuit.getGateAt(column,wire);if(gate&&0==gate.connector){var gateDef=circuit.getGateDef(gate.name),gateParams=gate.options&&gate.options.params?gate.options.params:{},quilInfo=null;if(gateDef){gateDef.exportInfo&&(gateDef.exportInfo.quil&&gateDef.exportInfo.quil.replacement&&(gateDef.exportInfo.quil.replacement.params&&(gateParams=gateDef.exportInfo.quil.replacement.params),gateDef=circuit.getGateDef(gateDef.exportInfo.quil.replacement.name)),quilInfo=gateDef&&gateDef.exportInfo&&gateDef.exportInfo.quil?gateDef.exportInfo.quil:null);var insideControl=!1;if(gate.options&&gate.options.condition&&gate.options.condition.creg){insideControl=!0,quil+="\n";var testBit=self.cregTotalBits(),condition=gate.options.condition,conditionValue=condition.value||0,cregBase=self.cregBase(condition.creg);if(0==conditionValue){var cregSize=self.cregs[condition.creg].length;if(version<2){quil+=indent+"FALSE ["+testBit+"]\n";for(var bitIndex=0;bitIndex<cregSize;bitIndex++)quil+=indent+"OR ["+(bitIndex+cregBase)+"] ["+testBit+"]\n";quil+=indent+"NOT ["+testBit+"]\n",quil+="JUMP-WHEN @THEN"+labelCounter+" ["+testBit+"]\n",quil+="JUMP @END"+(labelCounter+1)+"\n",quil+="LABEL @THEN"+labelCounter+"\n"}else{quil+=indent+"FALSE ro["+testBit+"]\n";for(bitIndex=0;bitIndex<cregSize;bitIndex++)quil+=indent+"OR ro["+(bitIndex+cregBase)+"] ro["+testBit+"]\n";quil+=indent+"NOT ro["+testBit+"]\n",quil+="JUMP-WHEN @THEN"+labelCounter+" ro["+testBit+"]\n",quil+="JUMP @END"+(labelCounter+1)+"\n",quil+="LABEL @THEN"+labelCounter+"\n"}}else{var firstSet,bitStr=conditionValue.toString(2).split("").reverse(),bitCount=0,singleBitIndex=0;bitStr.map(function(bitValue,bitIndex){var bitVal=parseInt(bitValue);(bitStr[bitIndex]=bitVal)&&(bitCount++,singleBitIndex=bitIndex)}),1==bitCount?quil+=version<2?"JUMP-WHEN @THEN"+labelCounter+" ["+(singleBitIndex+cregBase)+"]\n":"JUMP-WHEN @THEN"+labelCounter+" ro["+(singleBitIndex+cregBase)+"]\n":version<2?(quil+=indent+"FALSE ["+testBit+"]\n",firstSet=!0,bitStr.map(function(bitValue,bitIndex){bitValue&&(firstSet?(firstSet=!1,quil+=indent+"OR ["+(bitIndex+cregBase)+"] ["+testBit+"]\n"):quil+=indent+"AND ["+(bitIndex+cregBase)+"] ["+testBit+"]\n")}),quil+="JUMP-WHEN @THEN"+labelCounter+" ["+testBit+"]\n"):(quil+=indent+"FALSE ro["+testBit+"]\n",firstSet=!0,bitStr.map(function(bitValue,bitIndex){bitValue&&(firstSet?(firstSet=!1,quil+=indent+"OR ro["+(bitIndex+cregBase)+"] ro["+testBit+"]\n"):quil+=indent+"AND ro["+(bitIndex+cregBase)+"] ro["+testBit+"]\n")}),quil+="JUMP-WHEN @THEN"+labelCounter+" ro["+testBit+"]\n"),quil+="JUMP @END"+(labelCounter+1)+"\n",quil+="LABEL @THEN"+labelCounter+"\n"}}quil+=quilInfo?indent+quilInfo.name:indent+gate.name,quil+=" ";var argCount=0;if(quilInfo&&quilInfo.params&&quilInfo.params.length){quil+="(";for(var p=0;p<quilInfo.params.length;p++){0<argCount&&(quil+=", "),void 0!==gateParams[quilInfo.params[p]]&&(node=math.parse(gateParams[quilInfo.params[p]]),quil+=node.toString({handler:mathToStringHandler})),argCount++}quil+=")"}else if(gateDef&&gateDef.params&&gateDef.params.length){quil+="(";for(var node,p=0;p<gateDef.params.length;p++){0<argCount&&(quil+=", "),void 0!==gateParams[gateDef.params[p]]&&(node=math.parse(gateParams[gateDef.params[p]]),quil+=node.toString({handler:mathToStringHandler})),argCount++}quil+=")"}for(var targetBit,w=0;w<gate.wires.length;w++)0<argCount&&(quil+=" "),quil+=exportAsGateName?"q"+gate.wires[w]:""+gate.wires[w],argCount++;"measure"==gate.name&&gate.options&&gate.options.creg&&(targetBit=parseInt(gate.options.creg.bit)||0,isNaN(targetBit)&&(targetBit=0),0<argCount&&(quil+=" "),quil+=version<2?"["+(targetBit+self.cregBase(gate.options.creg.name))+"]":"ro["+(targetBit+self.cregBase(gate.options.creg.name))+"]",argCount++),quil+="\n",insideControl&&(quil+="LABEL @END"+(labelCounter+1)+"\n",quil+="\n",labelCounter+=2)}else console.log("unknown gate",gate.name)}}return exportAsGateName&&(quil+="\n"),quil},QuantumCircuit.prototype.exportToAQASM=function(options,isExportPyAQASM,exportAsGateName,indentDepth){var self=this,decompose=(options=options||{},options.decompose),asJupyter=options.asJupyter,shots=options.shots,hybrid=!!isExportPyAQASM&&options.hybrid,circuit=null,tempCircuit=null,shots=shots||1024;void 0===hybrid&&(hybrid=!!this.options&&!!this.options.hybrid);var obj=this.save(!!decompose),circuit=new QuantumCircuit,tempCircuit=new QuantumCircuit;circuit.load(obj),tempCircuit.load(obj);function mathToStringHandler(node,options){if(node.isSymbolNode){if(0<=["pi"].indexOf(node.name))return"np."+node.name;var nodeName=node.name;if(options.replaceVars&&void 0!==options.replaceVars[nodeName]){nodeName=options.replaceVars[nodeName];return 0<=self.params.indexOf(nodeName)?"("+globalParams[nodeName]+")":"("+nodeName+")"}if(0<=self.params.indexOf(node.name))return globalParams[node.name]}}function getIndent(depth){for(var indent="",i=0;i<depth;i++)indent+="    ";return indent}indentDepth=indentDepth||0;var gatesToBeAdded=[];if(!isExportPyAQASM){if(!decompose)for(var column=tempCircuit.numCols()-1;0<=column;column--)for(var wire=0;wire<tempCircuit.numQubits;wire++){if((gate=tempCircuit.gates[wire][column])&&0==gate.connector&&!tempCircuit.basicGates[gate.name]){customDecomposedCircuit=tempCircuit.decomposeGateAt(column,wire);for(var decomposedColumn=0;decomposedColumn<customDecomposedCircuit.numCols();decomposedColumn++)for(var decomposedWire=0;decomposedWire<customDecomposedCircuit.numQubits;decomposedWire++){var gateInCustomCircuit=customDecomposedCircuit.getGateAt(decomposedColumn,decomposedWire);gateInCustomCircuit&&0==gateInCustomCircuit.connector&&gatesToBeAdded.push(gateInCustomCircuit),circuit.gates.map(function(circuitGate,index){circuitGate.map(function(gateToRemove){gateToRemove&&gateToRemove.name==gate.name&&circuit.removeGate(gateToRemove.id)})})}}}gatesToBeAdded.map(function(gateToAdd){gateToAdd&&circuit.insertGate(gateToAdd.name,gateToAdd.column,gateToAdd.wires,gateToAdd.options)})}var aqasm="",indent=getIndent(indentDepth),usedGates=circuit.usedGates(),numQubits=circuit.numQubits;if(isExportPyAQASM)if(exportAsGateName){for(var args="",argCount=0,i=0;i<circuit.params.length;i++)0<argCount&&(args+=", "),args+=circuit.params[i],argCount++;for(i=0;i<circuit.numQubits;i++)0<argCount&&(args+=", "),args+=qubitLetter(i,circuit.numQubits),argCount++}else{aqasm+=indent+"from qat.lang.AQASM import *\n",aqasm+=indent+"from qat.qpus import get_default_qpu\n",aqasm+=indent+"from collections import Counter\n",hybrid&&(aqasm+=indent+"from scipy.optimize import minimize\n"),aqasm+=indent+"import numpy as np\n",aqasm+="\n";var unsupportedGateDefinition="",submoduleCount=0;for(var cregName in usedGates.map(function(usedGateName){var argCount,basicGate=circuit.basicGates[usedGateName];if(basicGate){if(!decompose&&circuit.basicGates[usedGateName].exportInfo.aqasm&&circuit.basicGates[usedGateName].exportInfo.aqasm.array){unsupportedAqasmInfo=circuit.basicGates[usedGateName].exportInfo.aqasm,gateUnitary=usedGateName+"_gate",aqasm+=indent+"def "+gateUnitary+"(",unsupportedAqasmInfo.params&&unsupportedAqasmInfo.params.length&&(argCount=0,unsupportedAqasmInfo.params.map(function(paramName){0<argCount&&(aqasm+=", "),aqasm+=indent+"p_"+paramName,argCount++})),aqasm+="):\n",aqasm+=getIndent(indentDepth+1)+"return np.array("+unsupportedAqasmInfo.array+")\n\n",unsupportedGateDefinition+=usedGateName+' = AbstractGate("'+usedGateName+'", [';var count=0;if(unsupportedAqasmInfo.params)for(var i=0;i<unsupportedAqasmInfo.params.length;i++)0<count&&(unsupportedGateDefinition+=", "),unsupportedGateDefinition+="float",count++;basicGate.matrix&&(arity=math.log2(basicGate.matrix.length)),unsupportedGateDefinition+="], matrix_generator="+gateUnitary+", arity="+arity+")\n"}}else{var customCircuit,customGate=self.customGates[usedGateName];customGate&&((customCircuit=new QuantumCircuit).load(customGate),aqasm+=customCircuit.exportToAQASM({comment:"",decompose:!0,asJupyter:!1,shots:null,hybrid:!1},isExportPyAQASM,usedGateName,indentDepth),submoduleCount++)}}),aqasm+=unsupportedGateDefinition,aqasm+="\n",shots&&(aqasm+=indent+"shots = "+shots+"\n",aqasm+="\n"),aqasm+=indent+"program = Program()\n",aqasm+=indent+"qubits_reg = program.qalloc("+circuit.numQubits+")\n",circuit.cregs)aqasm+=indent+cregName+" = program.calloc("+circuit.cregs[cregName].length+")\n";aqasm+="\n";var globalParams=this.options&&this.options.params?this.options.params:{};if(this.params.length){for(i=0;i<this.params.length;i++){var globalParamName=this.params[i],globalParamValue=math.parse(globalParams[globalParamName]).toString({handler:mathToStringHandler});aqasm+=globalParamName+" = "+globalParamValue+"\n"}aqasm+="\n"}hybrid&&(aqasm+=indent+"tolerance = "+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.tolerance&&this.options.hybridOptions.tolerance||"0.001")+"\n",aqasm+="\n")}else if(aqasm+=indent+"BEGIN\n",aqasm+=indent+"qubits "+numQubits+"\n",circuit.cregs){var cregLength=0;for(var creg in circuit.cregs)cregLength+=circuit.cregs[creg].length;aqasm+=indent+"cbits "+cregLength+"\n"}exportAsGateName?(aqasm+="def "+exportAsGateName+(args?"("+args+")":"")+":\n",indent=getIndent(++indentDepth),aqasm+=indent+"circuit = QRoutine()\n"):hybrid&&(aqasm+="def objective_function(params):\n",indent=getIndent(++indentDepth)),exportAsGateName||submoduleCount&&(aqasm+="\n",usedGates.map(function(usedGateName){!circuit.basicGates[usedGateName]&&circuit.customGates[usedGateName]&&(aqasm+=indent+usedGateName+"(")}));for(var costFunction,globalParamList,column=0;column<circuit.numCols();column++)for(var gate,wire=0;wire<circuit.numQubits;wire++){if((gate=circuit.getGateAt(column,wire))&&0==gate.connector){var gateDef=circuit.getGateDef(gate.name),name="";if(gate.options&&gate.options.params&&(gateParams=gate.options.params),"measure"==gate.name&&(name+=isExportPyAQASM?"program.measure":"MEAS"),"reset"==gate.name&&(name+=isExportPyAQASM?"program.reset":"RESET"),gateDef&&gateDef.exportInfo){if(gateDef.exportInfo.aqasm){var aqasmInfo=gateDef.exportInfo.aqasm,aqasmInfoName="";if(aqasmInfo.name)gateDef.params.length?gateDef.params.map(function(param){var paramValue=math.parse(gateParams[param]).toString({handler:mathToStringHandler});aqasmInfoName=aqasmInfo.name,aqasmInfoName+=isExportPyAQASM?"("+paramValue+")":"["+paramValue+"]"}):aqasmInfoName+=aqasmInfo.name,aqasmInfo.controlled&&aqasmInfo.dagger?name+=isExportPyAQASM?aqasmInfoName+".dag().ctrl()":"CTRL(DAG("+aqasmInfoName+"))":aqasmInfo.controlled?name+=isExportPyAQASM?aqasmInfoName+".ctrl()":"CTRL("+aqasmInfoName+")":aqasmInfo.dagger?name+=isExportPyAQASM?aqasmInfoName+".dag()":"DAG("+aqasmInfoName+")":name+=aqasmInfoName;else if(aqasmInfo.matrix)if(isExportPyAQASM){name+=gate.name+"(";var paramCount=0;gateDef.params.map(function(paramName){0<paramCount&&(name+=", ");var paramValue=math.parse(gateParams[paramName]).toString({handler:mathToStringHandler});name+=paramValue,paramCount++}),name+=")"}else{name="[";for(var k=0;k<aqasmInfo.matrix.length;k++){row=aqasmInfo.matrix[k],name+="[";for(i=0;i<row.length;i++)name+="(",row_element=row[i],aqasmInfo.params&&aqasmInfo.params.map(function(paramName){var param=gateParams[paramName];0<row_element.toString().indexOf(paramName)&&(row_element=row_element.replace(paramName,param))}),evaluated_expression=math.evaluate(row_element,self.options.params),matrix_element=math.complex(evaluated_expression),matrix_element_real=matrix_element.re,matrix_element_im=matrix_element.im,name+=matrix_element_real+", "+matrix_element_im+")",i<row.length-1&&(name+=" ");name+="]",k<aqasmInfo.matrix.length-1&&(name+=" ")}name+="]"}}aqasm+=indent+name,aqasm+=isExportPyAQASM?"(":" "}for(var argCount=0,w=0;w<gate.wires.length;w++)0<argCount&&(aqasm+=", "),aqasm+=isExportPyAQASM?exportAsGateName?qubitLetter(gate.wires[w],circuit.numQubits):"qubits_reg["+gate.wires[w]+"]":"q["+gate.wires[w]+"]",argCount+=1;gate.options&&gate.options.creg&&(aqasm+=", "+gate.options.creg.name+"["+gate.options.creg.bit+"]"),isExportPyAQASM&&(aqasm+=")"),aqasm+="\n"}}if(exportAsGateName&&(aqasm+=indent+"return circuit\n\n"),isExportPyAQASM?exportAsGateName||(aqasm+=indent+"\n",aqasm+=indent+"circuit = program.to_circ()\n",aqasm+=indent+"job = circuit.to_job(nbshots=shots, aggregate_data=False)\n",aqasm+=indent+"qpu = get_default_qpu()\n",aqasm+=indent+"job_result = qpu.submit(job)\n",aqasm+=indent+"counts = Counter()\n\n",aqasm+=indent+"for state in job_result:\n",aqasm+=indent+"    string_state = str(state.state)\n",aqasm+=indent+"    string_state = string_state[string_state.find('|') + 1: string_state.find('>')]\n",aqasm+=indent+"    string_state = string_state[::-1]\n",aqasm+=indent+"    counts[string_state] += 1\n\n",hybrid?(aqasm+=indent+"# CALCULATE COST HERE\n",(costFunction=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"").trim()||(costFunction="cost = 0"),aqasm+=function(addStr,ident){var str="",cfLines=addStr.split("\n"),minIdent=-1;cfLines.map(function(cfLine){var tmpIdent=cfLine.search(/\S/);0<=tmpIdent&&(minIdent<0||tmpIdent<minIdent)&&(minIdent=tmpIdent)}),minIdent<0&&(minIdent=0);var addIdent="";if(minIdent<ident.length)for(var tmp=0;tmp<ident.length-minIdent;tmp++)addIdent+=" ";return cfLines.map(function(cfLine){str+=addIdent+cfLine+"\n"}),str}(costFunction,indent),aqasm+="\n",aqasm+=indent+"return cost\n",indent=getIndent(--indentDepth),hybrid&&(globalParamList="",this.params.map(function(globalParamName,globalParamIndex){0<globalParamIndex&&(globalParamList+=", "),globalParamList+=globalParamName}),aqasm+="\n",aqasm+="params = np.array(["+globalParamList+"])\n",aqasm+="\n",aqasm+='minimum = minimize(objective_function, params, method="'+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.optimizer?this.options.hybridOptions.optimizer:"Powell")+'", tol=tolerance)\n',aqasm+='print("cost:", minimum.fun, "params:", minimum.x)\n')):aqasm+=indent+"print(counts)"):aqasm+="END",asJupyter&&isExportPyAQASM){var notebook={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:aqasm,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(notebook)}return aqasm},QuantumCircuit.prototype.exportAQASM=function(comment,decompose,isExportPyAQASM,exportAsGateName,asJupyter,shots,hybrid,encoderDecoder,indentDepth){var options={comment:comment,decompose:decompose,asJupyter:asJupyter,shots:shots,hybrid:hybrid,encoderDecoder:encoderDecoder};return this.exportToAQASM(options,isExportPyAQASM,exportAsGateName,indentDepth)},QuantumCircuit.prototype.exportToPyAQASM=function(options,exportAsGateName){return this.exportToAQASM(options,!0,exportAsGateName)},QuantumCircuit.prototype.exportPyAQASM=function(comment,decompose,exportAsGateName,asJupyter,shots,hybrid,encoderDecoder){var options={comment:comment,decompose:decompose,asJupyter:asJupyter,shots:shots,hybrid:hybrid,encoderDecoder:encoderDecoder};return this.exportToPyAQASM(options,exportAsGateName)},QuantumCircuit.prototype.exportToCirq=function(options,exportAsGateName){var comment=(options=options||{}).comment,decompose=options.decompose,versionStr=options.versionStr,asJupyter=options.asJupyter,shots=options.shots,exportTfq=options.exportTfq,self=this,platform="",platform=exportTfq?"TFQ":"cirq",version=parseFloat(versionStr||"0.7");isNaN(version)&&(version=.7);var packageList=[];void 0===shots&&(shots=1024);var circuit=new QuantumCircuit;circuit.load(this.save(decompose));var cirq="",indent="";comment&&(comment||"").split("\n").map(function(cline){1<=cline.length&&"#"!=cline[0]&&(cirq+="# "),cirq+=cline,cirq+="\n"});function mathToStringHandler(node,options){if(node.isSymbolNode){if(0<=["pi","sin","cos","tan","asin","acos","atan"].indexOf(node.name))return"np."+node.name}}if(exportAsGateName){for(var args="",argCount=0,i=0;i<circuit.params.length;i++)0<argCount&&(args+=", "),args+=circuit.params[i],argCount++;for(i=0;i<circuit.numQubits;i++)0<argCount&&(args+=", "),args+=qubitLetter(i,circuit.numQubits),argCount++;cirq+="def "+exportAsGateName+(args?"("+args+")":"")+":\n",cirq+="    return [\n",indent="        "}else{exportTfq&&(cirq+="import tensorflow_quantum as tfq\n",packageList.push("tensorflow"),packageList.push("tensorflow-quantum")),cirq+="import cirq\n",cirq+="import numpy as np\n",cirq+="from functools import reduce\n",cirq+="\n",packageList.push("cirq"),packageList.push("numpy");var globalParams=this.options&&this.options.params?this.options.params:{};if(this.params.length){for(i=0;i<this.params.length;i++){var globalParamName=this.params[i],globalParamValue=(node=math.parse(globalParams[globalParamName])).toString({handler:mathToStringHandler});cirq+=globalParamName+" = "+globalParamValue+"\n"}cirq+="\n"}var usedGates=circuit.usedGates();decompose||usedGates.map(function(usedGateName){var customGate,customCircuit,newOptions;circuit.basicGates[usedGateName]||(customGate=self.customGates[usedGateName])&&((customCircuit=new QuantumCircuit).load(customGate),newOptions={comment:"",decompose:!0,versionStr:versionStr},cirq+=customCircuit.exportToCirq(newOptions,usedGateName))});var defGates="";(usedGates=circuit.usedGates()).map(function(usedGateName){var basicGate=circuit.basicGates[usedGateName];if(basicGate&&basicGate.exportInfo&&basicGate.exportInfo.cirq){var cirqInfo=basicGate.exportInfo.cirq,isReplaced=!1;if(cirqInfo.replacement&&(cirqInfo=circuit.getGateDef(cirqInfo.replacement.name).exportInfo.cirq,isReplaced=!0),cirqInfo.array&&!exportTfq){var defName=isReplaced?cirqInfo.name:usedGateName;if(defGates.indexOf(defName)<0){defGates+="def "+defName+"(";if(cirqInfo.params&&cirqInfo.params.map(function(paramName,paramIndex){0<paramIndex&&(defGates+=", "),defGates+="p_"+paramName}),defGates+="):\n",basicGate.matrix&&basicGate.matrix.length)if(version<.7)switch(basicGate.matrix.length){case 2:defGates+="    return cirq.SingleQubitMatrixGate(np.array("+cirqInfo.array+"))\n";break;case 4:defGates+="    return cirq.TwoQubitMatrixGate(np.array("+cirqInfo.array+"))\n";break;default:defGates+="    # Export to "+platform+" WARNING: Cannot define "+basicGate.matrix.length+" x "+basicGate.matrix.length+" matrix gate\n"}else defGates+="    return cirq.MatrixGate(np.array("+cirqInfo.array+"))\n";defGates+="\n"}}}}),cirq+=defGates,cirq+=exportTfq?"q = cirq.GridQubit.rect(1, "+circuit.numQubits+")\n":"q = [cirq.NamedQubit('q' + str(i)) for i in range("+circuit.numQubits+")]\n",cirq+="\n",cirq+=version<.7?"circuit = cirq.Circuit.from_ops(\n":"circuit = cirq.Circuit(\n",indent="    "}for(var numCols=circuit.numCols(),gateCounter=0,multishotKeys="",noTfqSupport=!1,column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var gate=circuit.getGateAt(column,wire);if(gate&&0==gate.connector){0<gateCounter&&(cirq+=",",exportTfq&&noTfqSupport&&(cirq+=indent+"# Export to TFQ WARNING: Gate not yet supported by Tensorflow Quantum"),cirq+="\n");var gateDef=circuit.getGateDef(gate.name),gateParams=gate.options&&gate.options.params?gate.options.params:{},cirqInfo=null,isControlledGate=!1,isBasicGate=!!circuit.basicGates[gate.name];if(gateDef){gateDef.exportInfo&&gateDef.exportInfo.cirq&&(noTfqSupport=!!gateDef.exportInfo.cirq.notTfqSupported,gateDef.exportInfo.cirq&&gateDef.exportInfo.cirq.replacement&&(gateDef.exportInfo.cirq.replacement.params&&(gateParams=gateDef.exportInfo.cirq.replacement.params),isControlledGate=!(!gateDef.exportInfo.cirq.replacement.type||"controlled"!=gateDef.exportInfo.cirq.replacement.type),noTfqSupport=!!gateDef.exportInfo.cirq.replacement.notTfqSupported,gateDef=circuit.getGateDef(gateDef.exportInfo.cirq.replacement.name)),cirqInfo=gateDef&&gateDef.exportInfo&&gateDef.exportInfo.cirq?gateDef.exportInfo.cirq:null),gateCounter++,gate.options&&gate.options.condition&&gate.options.condition.creg&&(cirq+=indent+"# Export to "+platform+" WARNING: classical control not implemented yet.\n");var addBraces,tmpParamCount=0,paramString="";if(gateParams){var paramDef=gateDef.params||[];"yy"==gate.name&&(paramDef=[]);var paramCount=paramDef.length;if(paramCount)for(var p=0;p<paramCount;p++){0==tmpParamCount&&(paramString+="("),0<tmpParamCount&&(paramString+=", ");var node,paramName=paramDef[p];if(gateParams[paramName]){if(!(node=math.parse(gateParams[paramName])).args)for(var param in gate.options.params)node=math.parse(gate.options.params[param]);paramString+=node.toString({handler:mathToStringHandler})}tmpParamCount==paramCount-1&&(paramString+=isBasicGate?")":", "),tmpParamCount++}}cirqInfo?(addBraces=0<=cirqInfo.name.indexOf("**"),cirq+=indent,addBraces&&(cirq+="("),cirqInfo.array||(cirq+="cirq."),exportTfq&&cirqInfo.tfqReplacement&&cirqInfo.tfqReplacement.name?cirq+="cirq."+cirqInfo.tfqReplacement.name:cirq+=cirqInfo.name,addBraces&&(cirq+=")")):cirq+=indent+gate.name,cirq+=paramString,isControlledGate?cirq+=".controlled().on(":isBasicGate&&(cirq+="(");for(var argCount=0,w=0;w<gate.wires.length;w++)0<argCount&&(cirq+=", "),cirq+=exportAsGateName?qubitLetter(gate.wires[w],circuit.numQubits):"q["+gate.wires[w]+"]",argCount++;"measure"==gate.name&&gate.options&&gate.options.creg&&(0<argCount&&(cirq+=", key="),cirq+="'"+gate.options.creg.name+gate.options.creg.bit+"'",column==numCols-1&&wire==this.numQubits-1?multishotKeys+="'"+gate.options.creg.name+gate.options.creg.bit+"'":multishotKeys+="'"+gate.options.creg.name+gate.options.creg.bit+"', ",argCount++),cirq+=")"}else cirq+=indent+"# Export to "+platform+' WARNING: unknown gate "'+gate.name+'".'}}if(exportTfq&&noTfqSupport&&(cirq+=indent+"# Export to TFQ WARNING: Gate not yet supported by Tensorflow Quantu"),exportAsGateName)cirq+="\n    ]\n",cirq+="\n";else{if(cirq+="\n)\n",cirq+="\n",exportTfq||(cirq+="simulator = cirq.Simulator()\n",cirq+="result = simulator.run(circuit, repetitions="+shots+")\n",cirq+="result_dict = dict(result.multi_measurement_histogram(keys=["+multishotKeys+"]))\n",cirq+="keys = list(map(lambda arr: reduce(lambda x, y: str(x) + str(y), arr[::-1]), result_dict.keys()))\n",cirq+="counts = dict(zip(keys,[value for value in result_dict.values()]))\n",cirq+="print(counts)"),asJupyter){var notebook={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:cirq,metadata:{},outputs:[],execution_count:null}]},packageInstallCode="";return packageList.map(function(packageName,packageIndex){0<packageIndex&&(packageInstallCode+="\n"),packageInstallCode+="!pip install "+packageName}),packageInstallCode&&notebook.cells.unshift({cell_type:"code",source:packageInstallCode,metadata:{},outputs:[],execution_count:null}),JSON.stringify(notebook)}packageInstallCode="";packageList.map(function(packageName,packageIndex){0<packageIndex&&(packageInstallCode+=",\n"),packageInstallCode+='#     "'+packageName+'"'}),packageInstallCode&&(cirq="# /// script\n# dependencies = [\n"+packageInstallCode+"\n# ]\n# ///\n\n"+cirq)}return cirq},QuantumCircuit.prototype.exportToTFQ=function(options,exportAsGateName){var comment=(options=options||{}).comment,decompose=options.decompose,versionStr=options.versionStr,asJupyter=options.asJupyter,shots=options.shots;void 0===shots&&(shots=1024);var circuit=new QuantumCircuit;circuit.load(this.save(decompose));var tfq="";comment&&(comment||"").split("\n").map(function(cline){1<=cline.length&&"#"!=cline[0]&&(cirq+="# "),cirq+=cline,cirq+="\n"});var newOptions={comment:comment,decompose:decompose,versionStr:versionStr,asJupyter:!1,shots:shots,exportTfq:!0};if(tfq+=circuit.exportToCirq(newOptions,exportAsGateName),tfq+="results_list = tfq.layers.Sample()(circuit, repetitions="+shots+").to_list()[0]\n",tfq+="results = list(map(lambda arr: reduce(lambda x, y: str(x) + str(y), arr[::-1]), results_list))\n",tfq+="counts = dict(zip(results,[results.count(i) for i in results]))\n",tfq+="print(counts)",asJupyter){var notebook={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:tfq,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(notebook)}return tfq},QuantumCircuit.prototype.exportToQSharp=function(options,exportAsGateName){options=options||{};function mathToStringHandler(node,options){if(node.isSymbolNode){var parameterJson={pi:"PI()"};if(parameterJson[node.name])return parameterJson[node.name]}if(node.isConstantNode&&Number.isInteger(node.value))return node.value.toFixed(1)}var decompose=options.decompose,versionStr=options.versionStr,asJupyter=options.asJupyter,circuitName=options.circuitName,indentDepth=options.indentDepth,self=this,operationName=circuitName||"Circuit";function getIndent(depth){for(var indent="",i=0;i<depth;i++)indent+="    ";return indent}indentDepth=indentDepth||0;var circuit=new QuantumCircuit;circuit.load(this.save(decompose));var qsharp="",indent=getIndent(indentDepth);if(exportAsGateName||(asJupyter||(qsharp+="namespace Quantum {\n",indent=getIndent(++indentDepth)),qsharp+=indent+"open Microsoft.Quantum.Intrinsic;\n",qsharp+=indent+"open Microsoft.Quantum.Canon;\n",qsharp+=indent+"open Microsoft.Quantum.Math;\n",qsharp+=indent+"open Microsoft.Quantum.Convert;\n",qsharp+="\n",qsharp+=indent+"function SetBitValue(reg: Int, bit: Int, value: Bool): Int {\n",qsharp+=indent+"    if(value) {\n",qsharp+=indent+"        return reg ||| (1 <<< bit);\n",qsharp+=indent+"    } else {\n",qsharp+=indent+"        return reg &&& ~~~(1 <<< bit);\n",qsharp+=indent+"    }\n",qsharp+=indent+"}\n",qsharp+=indent+"\n"),exportAsGateName){for(var args="",argCount=0,i=0;i<circuit.params.length;i++)0<argCount&&(args+=", "),args+=circuit.params[i],argCount++;for(i=0;i<circuit.numQubits;i++)0<argCount&&(args+=", "),args+=qubitLetter(i,circuit.numQubits)+": Qubit",argCount++;qsharp+=indent+"operation "+exportAsGateName+(args?"("+args+")":"")}else{var usedGates=circuit.usedGates();decompose||usedGates.map(function(usedGateName){var customGate,customCircuit,newOptions;circuit.basicGates[usedGateName]||(customGate=self.customGates[usedGateName])&&((customCircuit=new QuantumCircuit).load(customGate),newOptions={comment:"",decompose:!0,versionStr:versionStr,asJupyter:!1,circuitName:null,indentDepth:indentDepth},qsharp+=customCircuit.exportToQSharp(newOptions,exportAsGateName))}),qsharp+=indent+"operation "+operationName+"()"}indent=getIndent(++indentDepth);var cregCount=0;for(cregName in circuit.cregs)cregCount++;var cregList="";if(cregCount){for(cregName in qsharp+=" : (",circuit.cregs)cregList&&(qsharp+=", ",cregList+=", "),qsharp+="Int",cregList+=cregName;qsharp+=")"}else qsharp+=" : Unit";if(qsharp+=" {\n",cregCount)for(cregName in circuit.cregs)qsharp+=indent+"mutable "+cregName+" = 0;\n";qreg_name="qubits",exportAsGateName||(qsharp+=indent+"using(",qsharp+=qreg_name+" = Qubit["+circuit.numQubits+"]",qsharp+=") {\n",indent=getIndent(++indentDepth));for(var usedGates=circuit.usedGates(),numCols=circuit.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<circuit.numQubits;wire++){var gate=circuit.getGateAt(column,wire);if(gate&&0==gate.connector){var gateDef=(gateDef=circuit.getGateDef(gate.name))||circuit.customGates[gate.name],gateParams=gate.options&&gate.options.params?gate.options.params:{},qsharpInfo=null,isControlledGate=!1,wireIdx=0;if(gateDef){gateDef.exportInfo&&(gateDef.exportInfo.qsharp&&gateDef.exportInfo.qsharp.replacement&&(gateDef.exportInfo.qsharp.replacement.params&&(gateParams=gateDef.exportInfo.qsharp.replacement.params),gateDef=circuit.getGateDef(gateDef.exportInfo.qsharp.replacement.name)),qsharpInfo=gateDef&&gateDef.exportInfo&&gateDef.exportInfo.qsharp?gateDef.exportInfo.qsharp:null),gateDef.drawingInfo&&gateDef.drawingInfo.root&&"cx"!=gate.name&&"ccx"!=gate.name&&(isControlledGate=!0);var tmpParamCount=0,paramString="";if(gateParams){var paramDef=gateDef.params||[],paramCount=paramDef.length;if(paramCount)for(var p=0;p<paramCount;p++){0<tmpParamCount&&(paramString+=", ");var paramName=paramDef[p];gateParams[paramName]&&(paramString+=math.parse(gateParams[paramName]).toString({handler:mathToStringHandler})),tmpParamCount++}}if("measure"==gate.name)gate.options&&gate.options.creg?(qsharp+=indent+"set "+gate.options.creg.name+" = SetBitValue("+gate.options.creg.name+", "+gate.options.creg.bit+", ResultAsBool(M(",qsharp+=exportAsGateName?qubitLetter(gate.wires[0],circuit.numQubits)+")));\n":qreg_name+"["+gate.wires[0]+"])));\n"):qsharp+=indent+"// Export to qsharp WARNING: missing destination register\n";else{qsharp+=indent,gate.options&&gate.options.condition&&gate.options.condition.creg&&(qsharp+="if("+gate.options.condition.creg+" == "+gate.options.condition.value+") {\n",indent=getIndent(++indentDepth),qsharp+=indent),qsharp+=qsharpInfo?qsharpInfo.name+"(":gate.name+"(",wireIdx=isControlledGate?(qsharp+=exportAsGateName?"["+qubitLetter(gate.wires[0],circuit.numQubits)+"], (":"["+qreg_name+"["+gate.wires[0]+"]], (",1):0,paramString&&(qsharp+=paramString+", ");for(var argCount=0,w=wireIdx;w<gate.wires.length;w++)0<argCount&&(qsharp+=", "),qsharp+=exportAsGateName?qubitLetter(gate.wires[w],circuit.numQubits):qreg_name+"["+gate.wires[w]+"]",argCount++;isControlledGate&&(qsharp+=")"),qsharp+=");\n",gate.options&&gate.options.condition&&gate.options.condition.creg&&(indent=getIndent(--indentDepth),qsharp+=indent+"}\n")}}}}if(exportAsGateName||(qsharp+=indent+"ResetAll("+qreg_name+");\n",indent=getIndent(--indentDepth),qsharp+=indent+"}\n"),cregCount&&(qsharp+=indent+"return ("+cregList+");\n"),indent=getIndent(--indentDepth),qsharp+=indent+"}\n",exportAsGateName?qsharp+="\n":asJupyter||(qsharp+="}\n"),asJupyter){var notebook={metadata:{kernelspec:{display_name:"Q#",language:"qsharp",name:"iqsharp"},language_info:{name:""}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:qsharp,metadata:{},outputs:[],execution_count:null},{cell_type:"code",source:"%simulate "+operationName,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(notebook)}return qsharp},QuantumCircuit.prototype.exportToBraket=function(options,exportAsGateName){options=options||{};var decompose=options.decompose,versionStr=options.versionStr,asJupyter=options.asJupyter,shots=options.shots,hybrid=options.hybrid,indentDepth=options.indentDepth,self=this,shots=shots||1024,version=parseFloat(versionStr||"1.0");isNaN(version),void 0===hybrid&&(hybrid=!!this.options&&!!this.options.hybrid);var circuit=new QuantumCircuit;circuit.load(this.save(decompose));function mathToStringHandler(node,options){if(node.isSymbolNode){if(0<=["pi","sin","cos","tan","asin","acos","atan"].indexOf(node.name))return"np."+node.name;if(0<=self.params.indexOf(node.name)&&hybrid)return"params["+self.params.indexOf(node.name)+"]"}}function getIndent(depth){for(var indent="",i=0;i<depth;i++)indent+="    ";return indent}var braket="",indent=getIndent(indentDepth=indentDepth||0),usedGates=circuit.usedGates();usedGates.map(function(usedGateName){circuit.basicGates[usedGateName]});var args="",argCount=0;if(exportAsGateName){for(var i=0;i<circuit.numQubits;i++)0<argCount&&(args+=", "),args+=qubitLetter(i,circuit.numQubits),argCount++;for(i=0;i<circuit.params.length;i++)0<argCount&&(args+=", "),args+=circuit.params[i],argCount++}else{braket+=indent+"import numpy as np\n",braket+=indent+"from braket.devices import LocalSimulator\n",braket+=indent+"from braket.circuits import Circuit\n",braket+=indent+"from collections import Counter\n",hybrid&&(braket+=indent+"from scipy.optimize import minimize\n"),braket+="\n",shots&&(braket+=indent+"shots = "+shots+"\n",braket+="\n");var globalParams=this.options&&this.options.params?this.options.params:{};if(this.params.length){for(i=0;i<this.params.length;i++){var globalParamName=this.params[i],globalParamValue=math.parse(globalParams[globalParamName]).toString({handler:mathToStringHandler});braket+=globalParamName+" = "+globalParamValue+"\n"}braket+="\n"}hybrid&&(braket+=indent+"tolerance = "+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.tolerance&&this.options.hybridOptions.tolerance||"0.001")+"\n",braket+="\n")}var unsupportedBraketInfo=null,submoduleCount=0;usedGates.map(function(usedGateName){var argCount,customGate,customCircuit;circuit.basicGates[usedGateName]?decompose||circuit.basicGates[usedGateName].exportInfo.braket&&circuit.basicGates[usedGateName].exportInfo.braket.array&&("unitary"==(unsupportedBraketInfo=circuit.basicGates[usedGateName].exportInfo.braket).name&&(braket+=indent+"def "+(usedGateName+"_unitary")+"("),unsupportedBraketInfo.params&&unsupportedBraketInfo.params.length&&(argCount=0,unsupportedBraketInfo.params.map(function(paramName){0<argCount&&(braket+=", "),braket+=indent+"p_"+paramName,argCount++})),braket+="):\n",braket+=getIndent(indentDepth+1)+"return np.array("+unsupportedBraketInfo.array+");\n\n"):(customGate=self.customGates[usedGateName])&&((customCircuit=new QuantumCircuit).load(customGate),braket+=customCircuit.exportBraket("",!0,usedGateName,versionStr,!1,null,!1,!1,indentDepth),submoduleCount++)}),exportAsGateName?(braket+="def "+exportAsGateName+(args?"("+args+")":"")+":\n",indent=getIndent(++indentDepth)):hybrid&&(braket+="def objective_function(params):\n",indent=getIndent(++indentDepth)),braket+=indent+"circuit = Circuit()\n",exportAsGateName||submoduleCount&&(braket+="\n",usedGates.map(function(usedGateName){!circuit.basicGates[usedGateName]&&circuit.customGates[usedGateName]&&(braket+=indent+"circuit.register_subroutine("+usedGateName+")\n")}),braket+="\n");for(var costFunction,globalParamList,numCols=circuit.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<circuit.numQubits;wire++){var gate=circuit.getGateAt(column,wire);if(gate&&0==gate.connector){var gateDef=circuit.getGateDef(gate.name),gateParams=gate.options&&gate.options.params?gate.options.params:{},paramDef=gateDef.params||[],braketInfo=null,gateName=gate.name,paramString="",isUnitary=!1;if(gateDef&&gateDef.exportInfo&&gateDef.exportInfo.braket&&((braketInfo=gateDef.exportInfo.braket).params&&(paramDef=Array.isArray(braketInfo.params)?braketInfo.params:(gateParams=braketInfo.params,Object.keys(gateParams))),"unitary"==braketInfo.name?isUnitary=!0:gateName=braketInfo.name),braketInfo||circuit.customGates[gate.name]){var tmpParamCount=0;if(gateParams){var paramCount=paramDef.length;if(paramCount)for(var p=0;p<paramCount;p++){0<tmpParamCount&&(paramString+=", ");var paramName=paramDef[p];void 0!==gateParams[paramName]&&(paramString+=math.parse(gateParams[paramName]).toString({handler:mathToStringHandler})),tmpParamCount++}}braket+=indent+"circuit.",braket+=isUnitary?"unitary(matrix="+gateName+"_unitary("+paramString+"), targets=[":gateName+"(";argCount=0;for(w=0;w<gate.wires.length;w++)0<argCount&&(braket+=", "),braket+=exportAsGateName?qubitLetter(gate.wires[w],circuit.numQubits):gate.wires[w],argCount++;isUnitary?braket+="]":paramString&&(braket+=", ",braket+=paramString),braket+=")",braket+="\n"}else braket+=indent+'# Unsupported gate "'+gate.name+'".\n'}}if(exportAsGateName&&(braket+=indent+"return circuit"),braket+="\n\n",exportAsGateName||(braket+=indent+"local_sim = LocalSimulator()\n",braket+=indent+"result = local_sim.run(circuit, shots=shots).result()\n",braket+=indent+'counts = Counter({ "".join(reversed(k)): v for k, v in result.measurement_counts.items() })\n',braket+="\n",hybrid?(braket+=indent+"# CALCULATE COST HERE\n",(costFunction=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"").trim()||(costFunction="cost = 0"),braket+=function(addStr,ident){var str="",cfLines=addStr.split("\n"),minIdent=-1;cfLines.map(function(cfLine){var tmpIdent=cfLine.search(/\S/);0<=tmpIdent&&(minIdent<0||tmpIdent<minIdent)&&(minIdent=tmpIdent)}),minIdent<0&&(minIdent=0);var addIdent="";if(minIdent<ident.length)for(var tmp=0;tmp<ident.length-minIdent;tmp++)addIdent+=" ";return cfLines.map(function(cfLine){str+=addIdent+cfLine+"\n"}),str}(costFunction,indent),braket+="\n",braket+=indent+"return cost\n",indent=getIndent(--indentDepth),hybrid&&(globalParamList="",this.params.map(function(globalParamName,globalParamIndex){0<globalParamIndex&&(globalParamList+=", "),globalParamList+=globalParamName}),braket+="\n",braket+="params = np.array(["+globalParamList+"])\n",braket+="\n",braket+='minimum = minimize(objective_function, params, method="'+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.optimizer?this.options.hybridOptions.optimizer:"Powell")+'", tol=tolerance)\n',braket+='print("cost:", minimum.fun, "params:", minimum.x)\n')):braket+=indent+"print(counts)"),asJupyter){var notebook={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:braket,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(notebook)}return braket},QuantumCircuit.prototype.exportToQobj=function(options,circuitReplacement){var circuitName=(options=options||{}).circuitName,experimentName=options.experimentName,numShots=options.numShots,self=this,globalParams=this.options&&this.options.params?this.options.params:{},globalParams=JSON.parse(JSON.stringify(globalParams));for(var globalParamName in globalParams)globalParams[globalParamName]=math.evaluate(globalParams[globalParamName]);circuitName=circuitName||"",experimentName=experimentName||"",numShots=numShots||1;var circuit=new QuantumCircuit;circuit.load(this.save(!0));function mathToStringHandler(node,options){if(node.isSymbolNode){var nodeName=node.name;if(options.replaceVars&&void 0!==options.replaceVars[nodeName]){nodeName=options.replaceVars[nodeName];return 0<=self.params.indexOf(nodeName)?"("+globalParams[nodeName]+")":"("+nodeName+")"}if(0<=self.params.indexOf(node.name))return globalParams[node.name]}}var parentQobj={qobj_id:"qobj_"+this.randomString(),type:"QASM",schema_version:"1.0",experiments:[],header:{description:circuitName},config:{shots:numShots,memory_slots:0}},qobj={header:{memory_slots:0,n_qubits:0,qreg_sizes:[],qubit_labels:[],creg_sizes:[],clbit_labels:[],name:"circuit0"},config:{n_qubits:0,memory_slots:0},instructions:[]},cregNames=Object.keys(circuit.cregs);if(!circuitReplacement){for(cregName in experimentName&&(qobj.header.description=experimentName),circuit.cregs){var cregLength=circuit.cregs[cregName].length;parentQobj.config.memory_slots+=cregLength,qobj.header.creg_sizes.push([cregName,cregLength]);for(var i=0;i<cregLength;i++)qobj.header.clbit_labels.push([cregName,i])}qobj.header.memory_slots=parentQobj.config.memory_slots,qobj.header.n_qubits=circuit.numQubits,qobj.config.memory_slots=parentQobj.config.memory_slots,qobj.config.n_qubits=circuit.numQubits,qobj.header.qreg_sizes.push(["q",circuit.numQubits])}var registerSlots=parentQobj.config.memory_slots;circuit.usedGates().map(function(usedGateName){var customGate,newOptions;circuit.basicGates[usedGateName]||(customGate=self.customGates[usedGateName])&&(customCircuit=new QuantumCircuit,customCircuit.load(customGate),newOptions={circuitName:circuitName,experimentName:experimentName,numShots:numShots},parentQobj+=customCircuit.exportToQobj(newOptions,!1))});for(var numCols=circuit.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<circuit.numQubits;wire++){var gate=circuit.getGateAt(column,wire),qobjInstruction={name:"",qubits:[]},qobjReplacement=null,qobjEquivalent=null;if(0==column&&qobj.header.qubit_labels.push(["q",wire]),gate&&0==gate.connector){var gateDef=circuit.getGateDef(gate.name);if(gateDef&&gateDef.exportInfo&&(gateDef.exportInfo.qasm&&gateDef.exportInfo.qasm.replacement?(qobjReplacement=gateDef.exportInfo.qasm.replacement).map(function(replacement){var params,replacementParams,replacementCircuit=new QuantumCircuit;replacementCircuit.cregs=JSON.parse(JSON.stringify(self.cregs)),gate.options&&gate.options.params&&(params=Object.keys(gate.options.params),replacementParams=Object.keys(replacement.params),params.map(function(param){-1<replacementParams.indexOf(param)&&(replacement.params[param]=gate.options.params[param])}));var replacementCondition=gate.options&&gate.options.condition?gate.options.condition:{};replacementCircuit.addGate(replacement.name,column,gate.wires,{params:replacement.params,condition:replacementCondition});qobj.instructions=qobj.instructions.concat(replacementCircuit.exportToQobj({circuitName:"",experimentName:"",numShots:""},!0))}):gateDef.exportInfo.qasm&&gateDef.exportInfo.qasm.equivalent&&(qobjEquivalent=gateDef.exportInfo.qasm.equivalent).map(function(equivalent){var equivalentCircuit=new QuantumCircuit;equivalentCircuit.cregs=JSON.parse(JSON.stringify(self.cregs));var gateWires=1<equivalent.wires.length?gate.wires:gate.wires[equivalent.wires[0]],eqParams={};if(equivalent.params){var gateParams={};if(gate.options&&gate.options.params)for(var gateParamName in gate.options.params){var valueString=math.parse(gate.options.params[gateParamName]).toString({handler:mathToStringHandler});gateParams[gateParamName]=valueString}for(var eqParamName in equivalent.params){valueString=math.parse(equivalent.params[eqParamName]).toString({handler:mathToStringHandler,replaceVars:gateParams});eqParams[eqParamName]=valueString}}var eqCondition=gate.options&&gate.options.condition?gate.options.condition:{};equivalentCircuit.addGate(equivalent.name,column,gateWires,{params:eqParams,condition:eqCondition});qobj.instructions=qobj.instructions.concat(equivalentCircuit.exportToQobj({circuitName:"",experimentName:"",numShots:""},!0))})),!qobjReplacement&&!qobjEquivalent){var gateName=gate.name,gateParams=gate.options&&gate.options.params?gate.options.params:{};if(this.basicGates[gateName]){switch(gateName){case"id":gateName="iden"}if(qobjInstruction.name=gateName,qobjInstruction.qubits=gate.wires,gate.options&&gate.options.condition&&gate.options.condition.creg){for(var booleanInstruction={name:"",register:registerSlots,relation:"==",mask:"",val:""},cregSize=circuit.cregs[gate.options.condition.creg].length,numberOfBitsShift=0,maskValue=0,mask="",indexOfRegister=cregNames.indexOf(gate.options.condition.creg),i=0;i<indexOfRegister;i++)numberOfBitsShift+=circuit.cregs[cregNames[i]].length;var val="0x"+(gate.options.condition.value%Math.pow(2,cregSize)*Math.pow(2,numberOfBitsShift)).toString(16).toUpperCase();if(0<numberOfBitsShift){for(var exponent=Math.pow(2,numberOfBitsShift),bit=0;bit<cregSize;bit++)maskValue+=exponent,exponent*=2;mask="0x"+maskValue.toString(16).toUpperCase()}else mask="0x"+(Math.pow(2,cregSize)-1).toString(16).toUpperCase();booleanInstruction.name="bfunc",qobjInstruction.conditional=registerSlots,booleanInstruction.mask=mask,booleanInstruction.val=val,qobj.instructions.push(booleanInstruction),registerSlots+=1}if("measure"==gateName&&gate.options&&gate.options.creg){qobjInstruction.memory=[],qobjInstruction.register=[];for(var prevRegisterLength=0,indexOfRegister=cregNames.indexOf(gate.options.creg.name),i=0;i<indexOfRegister;i++)prevRegisterLength+=circuit.cregs[cregNames[i]].length;var cregBit=prevRegisterLength+gate.options.creg.bit;qobjInstruction.memory.push(cregBit),qobjInstruction.register.push(cregBit)}if(gateParams&&(gateDef=(gateDef=this.basicGates[gateName])||this.customGates[gateName])&&(paramDef=gateDef.params||[],paramCount=paramDef.length,paramCount)){qobjInstruction.params=[];for(var node,p=0;p<paramCount;p++){paramName=paramDef[p],(gateParams[paramName]||gateParams[paramName].toString())&&(node=math.evaluate(gateParams[paramName],globalParams),qobjInstruction.params.push(node))}}qobj.instructions.push(qobjInstruction)}}}}return circuitReplacement?qobj.instructions:(qobj.instructions.length&&parentQobj.experiments.push(qobj),parentQobj)},QuantumCircuit.prototype.clearPartitions=function(){this.partitionMap=[],this.partitionCount=0,this.partitionInfo={};for(var numCols=this.numCols(),wire=0;wire<this.numQubits;wire++){this.partitionMap.push([]);for(var column=0;column<numCols;column++)this.partitionMap[wire].push(-1)}},QuantumCircuit.prototype.createPartitions=function(){this.clearPartitions();for(var wirePartitions=[],i=0;i<this.numQubits;i++)wirePartitions.push(-1);for(var partitionCounter=0,numCols=this.numCols(),column=0;column<numCols;column++){for(var wire=0;wire<this.numQubits;wire++){var gate=this.getGateAt(column,wire);if(gate&&gate.wires){for(var prevPartitions=[],w=0;w<gate.wires.length;w++){var prevPartition=wirePartitions[wr=gate.wires[w]];prevPartitions.indexOf(prevPartition)<0&&prevPartitions.push(prevPartition)}var partition=-1;partition=1!=prevPartitions.length||-1==prevPartitions[0]?partitionCounter++:prevPartitions[0];for(w=0;w<gate.wires.length;w++){var wr=gate.wires[w];if(oldPartition=wirePartitions[wr],-1==oldPartition)wirePartitions[wr]=partition;else for(i=0;i<this.numQubits;i++)wirePartitions[i]==oldPartition&&(wirePartitions[i]=partition)}}}for(wire=0;wire<this.numQubits;wire++)this.partitionMap[wire][column]=wirePartitions[wire]}this.partitionCount=partitionCounter;for(partition=0;partition<partitionCounter;partition++)this.partitionInfo[partition]=this.partitionBounds(partition)},QuantumCircuit.prototype.printPartitions=function(){for(var numCols=this.numCols(),wire=0;wire<this.numQubits;wire++){for(var row="",column=0;column<numCols;column++){var part=this.partitionMap[wire][column];for(-1==part&&(part=" "),this.getGateAt(column,wire)?part+="*":part+=" ";part.length<4;)part=" "+part;row+=part}for(var w=wire+"";w.length<2;)w="0"+w;row="q"+w+row,console.log(row)}},QuantumCircuit.prototype.partitionBounds=function(partitionIndex){for(var bounds={wire:{top:-1,bottom:-1},column:{left:-1,right:-1},wireMap:{},parents:{}},found=!1,numCols=this.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){this.partitionMap[wire][column]==partitionIndex&&(found=!0,bounds.wire.top<0&&(bounds.wire.top=wire),bounds.wire.bottom<wire&&(bounds.wire.bottom=wire),bounds.column.left<0&&(bounds.column.left=column),bounds.column.right<column&&(bounds.column.right=column))}if(!found)return null;for(var partitionWire=0,wire=bounds.wire.top;wire<=bounds.wire.bottom;wire++){this.partitionMap[wire][bounds.column.left]==partitionIndex&&(bounds.wireMap[wire]=partitionWire,partitionWire++)}if(bounds.numQubits=partitionWire,0<bounds.column.left)for(var wire in bounds.wireMap){var parentPartition=this.partitionMap[wire][bounds.column.left-1];if(0<=parentPartition){bounds.parents[parentPartition]||(bounds.parents[parentPartition]={},bounds.parents[parentPartition].links=[]);var parentBounds=this.partitionInfo[parentPartition];for(var pwire in parentBounds.wireMap)pwire==wire&&bounds.parents[parentPartition].links.push(bounds.wireMap[wire])}}return bounds},QuantumCircuit.prototype.partitionCircuit=function(partitionIndex){var bounds=this.partitionInfo[partitionIndex];if(!bounds)return null;var combineList=[],usedWires=[];for(var parentPartition in bounds.parents){(combineItem={}).circuit=this.partitionCache[parentPartition],combineItem.wires=[],combineItem.wires=bounds.parents[parentPartition].links,usedWires=usedWires.concat(combineItem.wires),combineList.push(combineItem)}var combineItem,circuit=new QuantumCircuit;if(0<combineList.length){if(bounds.numQubits>usedWires.length){(combineItem={}).circuit=new QuantumCircuit(bounds.numQubits-usedWires.length),combineItem.wires=[];for(var i=0;i<bounds.numQubits;i++)usedWires.indexOf(i)<0&&combineItem.wires.push(i);combineList.push(combineItem)}circuit.setCombinedState(combineList)}for(var column=bounds.column.left;column<=bounds.column.right;column++)for(var wire=bounds.wire.top;wire<=bounds.wire.bottom;wire++){if(this.partitionMap[wire][column]==partitionIndex){var gate=this.getGateAt(column,wire);if(gate&&0==gate.connector){for(var gateWires=[],w=0;w<gate.wires.length;w++){var wr=gate.wires[w];gateWires.push(bounds.wireMap[wr])}circuit.addGate(gate.name,column-bounds.column.left,gateWires,gate.options)}}}return circuit},QuantumCircuit.prototype.run=function(initialValues,options){if(this.lastRunArguments={initialValues:initialValues,options:options},void 0!==(options=options||{}).strictMode&&(this.measureResetsQubit=!!options.strictMode),options.continue||(this.initState(),this.stats.duration=0),options.initialState){if(Array.isArray(options.initialState)){this.state={};for(var valIndex=0;valIndex<options.initialState.length;valIndex++){var val=options.initialState[valIndex];Array.isArray(val)&&2==val.length&&(val=math.complex(val[0],val[1])),"string"==typeof val&&(val=this.evalMathString(val)),"number"==typeof val&&(val=math.complex(val,0)),this.state[valIndex+""]=val}}else this.state=options.initialState;for(var aindex in this.stateBits=0,this.state)this.stateBits|=parseInt(aindex)}this.stats.start=new Date;var decomposed=new QuantumCircuit;if(decomposed.load(this.save(!0)),initialValues){decomposed.insertColumn(0);for(var wire=0;wire<decomposed.numQubits;wire++)initialValues[wire]&&decomposed.addGate("x",0,wire,{})}var partitioning=options.partitioning;partitioning&&decomposed.createPartitions();for(var numCols=decomposed.numCols(),gateCounter=0,column=0;column<numCols;column++){for(wire=0;wire<decomposed.numQubits;wire++){var executeGate,pcirc,bounds,pcolumn,pgate,gate=decomposed.getGateAt(column,wire);gate&&0==gate.connector&&(gateCounter++,executeGate=!0,gate.options&&gate.options.condition&&gate.options.condition.creg&&(executeGate=this.getCregValue(gate.options.condition.creg)===gate.options.condition.value),executeGate&&(partitioning?(partition=decomposed.partitionMap[wire][column],decomposed.partitionCache[partition]||(decomposed.partitionCache[partition]=decomposed.partitionCircuit(partition)),pcirc=decomposed.partitionCache[partition],pcolumn=column-(bounds=decomposed.partitionInfo[partition]).column.left,pgate=pcirc.getGateAt(pcolumn,bounds.wireMap[wire]),pcirc.cregs=JSON.parse(JSON.stringify(this.cregs)),pcirc.applyGate(pgate.name,pcolumn,pgate.wires,pgate.options),this.cregs=JSON.parse(JSON.stringify(pcirc.cregs))):this.applyGate(gate.name,column,gate.wires,gate.options)),options&&options.onGate&&options.onGate(column,wire,gateCounter))}options&&options.onColumn&&options.onColumn(column)}if(partitioning){for(var partition,lastPartitions=[],wire=0;wire<decomposed.numQubits;wire++){0<=(partition=decomposed.partitionMap[wire][numCols-1])&&lastPartitions.indexOf(partition)<0&&lastPartitions.push(partition)}if(lastPartitions.length)if(1==lastPartitions.length)this.state=decomposed.partitionCache[lastPartitions[0]].state,this.stateBits=decomposed.partitionCache[lastPartitions[0]].stateBits;else{for(var startTime=this.stats.start,combineList=[],i=0;i<lastPartitions.length;i++){var lastPartition=lastPartitions[i],combineItem={};combineItem.circuit=decomposed.partitionCache[lastPartition],combineItem.wires=[];var lastBounds=decomposed.partitionInfo[lastPartition];for(var wire in lastBounds.wireMap)combineItem.wires.push(parseInt(wire));combineList.push(combineItem)}this.setCombinedState(combineList),this.stats.start=startTime}}this.stats.end=new Date,this.stats.duration+=this.stats.end-this.stats.start},QuantumCircuit.prototype.continue=function(){this.run(null,{continue:!0})},QuantumCircuit.prototype.stateAsArray=function(onlyPossible,skipItems,blockSize,reverseBits){var state=[],numAmplitudes=this.numAmplitudes();skipItems=skipItems||0,blockSize=blockSize||(onlyPossible?this.numAmplitudes(onlyPossible):numAmplitudes);for(var count=0,i=0;i<numAmplitudes;i++){var ampIndex=i;reverseBits&&(ampIndex=reverseBitwise(i,this.numQubits));var amplitude=math.round(this.state[ampIndex]||math.complex(0,0),14);if(!onlyPossible||amplitude.re||amplitude.im){if(skipItems<=count){for(var indexBinStr=i.toString(2);indexBinStr.length<this.numQubits;)indexBinStr="0"+indexBinStr;var amplitudeStr=this.formatComplex(amplitude,{fixedWidth:!0,decimalPlaces:8,iotaChar:"i"}),magnitude=math.pow(math.abs(amplitude),2),chance=100*magnitude,chanceStr=chance.toFixed(5),phase=math.arg(amplitude),phaseStr=phase.toFixed(5);state.push({index:i,indexBinStr:indexBinStr,amplitude:amplitude,amplitudeStr:amplitudeStr,magnitude:magnitude,chance:chance,chanceStr:chanceStr,phase:phase,phaseStr:phaseStr})}if(count++,state.length==blockSize)return state}}return state},QuantumCircuit.prototype.stateAsSimpleArray=function(reverseBits){var numAmplitudes=this.numAmplitudes();if(!this.state)return[];for(var state=[],i=0;i<numAmplitudes;i++){var ampIndex=i;reverseBits&&(ampIndex=reverseBitwise(i,this.numQubits)),state.push(math.round(this.state[ampIndex]||math.complex(0,0),14))}return state},QuantumCircuit.prototype.stateAsString=function(onlyPossible){var numAmplitudes=this.numAmplitudes();if(!this.state)return"Error: circuit is not initialized. Please call initState() or run() method.";for(var s="",i=0;i<numAmplitudes;i++){var state=math.round(this.state[i]||math.complex(0,0),14);if(!onlyPossible||state.re||state.im){for(var m=100*math.pow(math.abs(state),2),bin=i.toString(2);bin.length<this.numQubits;)bin="0"+bin;for(var perc=m.toFixed(5);perc.length<9;)perc=" "+perc;s+=this.formatComplex(state,{fixedWidth:!0,decimalPlaces:8,iotaChar:"i"})+"|"+bin+">\t"+perc+"%\n"}}return s},QuantumCircuit.prototype.print=function(onlyPossible){console.log(this.stateAsString(onlyPossible))},QuantumCircuit.prototype.gotClassicalControl=function(){for(var column=0;column<this.numCols();column++)for(var wire=0;wire<this.numQubits;wire++){var gate=this.getGateAt(column,wire);if(gate&&0==gate.connector&&gate.options&&gate.options.condition&&gate.options.condition.creg)return!0}return!1},QuantumCircuit.prototype.gotMeasurement=function(){for(var column=0;column<this.numCols();column++)for(var wire=0;wire<this.numQubits;wire++){var gate=this.getGateAt(column,wire);if(gate&&0==gate.connector&&"measure"==gate.name)return!0}return!1},QuantumCircuit.prototype.gotMidCircuitMeasurement=function(){for(var gotMeasurement=!1,column=0;column<this.numCols();column++)for(var wire=0;wire<this.numQubits;wire++){var gate=this.getGateAt(column,wire);if(gate&&0==gate.connector)if("measure"==gate.name)gotMeasurement=!0;else if(gotMeasurement)return!0}return!1},QuantumCircuit.prototype.cregCount=function(){var cregCount=0;for(var cregName in this.cregs)cregCount++;return cregCount},QuantumCircuit.prototype.getCregs=function(){var res={};for(var creg in this.cregs)res[creg]=this.getCregValue(creg);return res},QuantumCircuit.prototype.cregsAsString=function(){var s="reg\tbin\tdec\n";for(var creg in this.cregs){for(var value=this.getCregValue(creg),bin=value.toString(2),len=this.cregs[creg]&&this.cregs[creg].length||1;bin.length<len;)bin="0"+bin;s+=creg+"\t"+bin+"\t"+value+"\n"}return s},QuantumCircuit.prototype.createCreg=function(creg,len){for(this.cregs[creg]=[];this.cregs[creg].length<(len||1);)this.cregs[creg].push(0)},QuantumCircuit.prototype.removeCreg=function(creg){for(var numCols=this.numCols(),removeGates=[],column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var gate=this.gates[wire][column];gate&&gate.options&&(gate.options.creg&&gate.options.creg.name&&gate.options.creg.name==creg&&removeGates.indexOf(gate.id)<0&&removeGates.push(gate.id),gate.options.condition&&gate.options.condition.creg&&gate.options.condition.creg==creg&&delete gate.options.condition)}delete this.cregs[creg];for(var i=0;i<removeGates.length;i++)this.removeGate(removeGates[i])},QuantumCircuit.prototype.renameCreg=function(oldName,newName){for(var numCols=this.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var gate=this.gates[wire][column];gate&&gate.options&&(gate.options.creg&&gate.options.creg.name&&gate.options.creg.name==oldName&&(gate.options.creg.name=newName),gate.options.condition&&gate.options.condition.creg&&gate.options.condition.creg==oldName&&(gate.options.condition.creg=newName))}this.cregs[newName]=JSON.parse(JSON.stringify(this.cregs[oldName])),delete this.cregs[oldName]},QuantumCircuit.prototype.minCregSize=function(creg){for(var largestBit=0,numCols=this.numCols(),column=0;column<numCols;column++)for(var wire=0;wire<this.numQubits;wire++){var targetBit,lb,gate=this.gates[wire][column];gate&&gate.options&&(gate.options.creg&&gate.options.creg.name&&gate.options.creg.name==creg&&(targetBit=parseInt(gate.options.creg.bit||0),isNaN(targetBit)&&(targetBit=0),largestBit<targetBit&&(largestBit=targetBit)),gate.options.condition&&gate.options.condition.creg&&gate.options.condition.creg==creg&&(largestBit<(lb=Math.floor(Math.log2(gate.options.condition.value)))&&(largestBit=lb)))}return largestBit+1},QuantumCircuit.prototype.resizeCreg=function(creg,size){if(!(size<this.minCregSize(creg))){for(;this.cregs[creg].length<size;)this.cregs[creg].push(0);for(;this.cregs[creg].length>size;)this.cregs[creg].pop()}},QuantumCircuit.prototype.getCreg=function(creg){return this.cregs[creg]},QuantumCircuit.prototype.setCregBit=function(creg,cbit,value){var bit=parseInt(cbit);if(isNaN(bit))throw'Error: invalid "cbit" argument to "setCregBit" method: expected "integer" got "'+typeof cbit+'".';for(this.cregs[creg]||(this.cregs[creg]=[]);bit>=this.cregs[creg].length;)this.cregs[creg].push(0);this.cregs[creg][bit]=value?1:0},QuantumCircuit.prototype.getCregBit=function(creg,cbit){if(!this.cregs[creg])throw'Error: "getCregBit": unknown register "'+creg+'".';var bit=parseInt(cbit);if(isNaN(bit)||bit>=this.cregs[creg].length)throw'Error: "getCregBit": bit "'+cbit+'" not found.';return this.cregs[creg][bit]},QuantumCircuit.prototype.cregBase=function(creg){if(!this.cregs[creg])throw'Error: "getCregBit": unknown register "'+creg+'".';var base=0;for(var regName in this.cregs){if(regName==creg)return base;base+=this.cregs[regName].length}},QuantumCircuit.prototype.cregTotalBits=function(){var bits=0;for(var regName in this.cregs)bits+=this.cregs[regName].length;return bits},QuantumCircuit.prototype.getCregValue=function(creg){if(!this.cregs[creg])throw'Error: "getCregBit": unknown register "'+creg+'".';for(var len=this.cregs[creg].length,value=0,i=0;i<len;i++)this.cregs[creg][i]&&(value+=math.pow(2,i));return value},QuantumCircuit.prototype.measureAll=function(forceSampling){if(this.collapsed&&this.collapsed.length==this.numQubits&&!forceSampling)return this.collapsed;this.collapsed=[];var randomWeight=Math.random();for(var is in this.state){var state=math.round(this.state[is],14);if(state.re||state.im)if((randomWeight-=math.round(math.pow(math.abs(state),2),14))<=0){var i=parseInt(is);if(this.reverseBitOrder)for(var q=this.numQubits-1;0<=q;q--)this.collapsed.push(1<<q&i?1:0);else for(q=0;q<this.numQubits;q++)this.collapsed.push(1<<q&i?1:0);return this.collapsed}}if(!this.collapsed.length)for(;this.collapsed.length<this.numQubits;)this.collapsed.push(0);return this.collapsed},QuantumCircuit.prototype.measureAllMultishot=function(shots,forceRerun){shots=shots||1;var counts={};if(forceRerun=forceRerun||(this.measureResetsQubit||this.gotClassicalControl()||this.gotMidCircuitMeasurement())){for(var i=0;i<shots;i++){var collapsed=this.measureAll(!0).reverse(),bitstring="";collapsed.map(function(bit){bitstring+=bit}),counts[bitstring]?counts[bitstring]++:counts[bitstring]=1,i<shots-1&&this.run(this.lastRunArguments.initialValues,this.lastRunArguments.options)}return counts}for(var randomWeights=[],i=0;i<shots;i++)randomWeights.push(Math.random());var shotCount=0;do{for(var is in this.state){var state=math.round(this.state[is],14);if(state.re||state.im)for(var chance=math.round(math.pow(math.abs(state),2),14),sh=0;sh<shots;sh++)if(0<randomWeights[sh]&&(randomWeights[sh]-=chance,randomWeights[sh]<=0)){for(var bin=parseInt(is).toString(2);bin.length<this.numQubits;)bin="0"+bin;if(counts[bin]?counts[bin]++:counts[bin]=1,++shotCount==shots)return counts}}}while(shotCount<shots);return counts},QuantumCircuit.prototype.measure=function(wire,creg,cbit,forceSampling){!forceSampling&&this.collapsed&&this.collapsed.length==this.numQubits||this.measureAll(forceSampling);var val=this.collapsed[wire];return creg&&void 0!==cbit&&this.setCregBit(creg,cbit,val),val},QuantumCircuit.prototype.probabilities=function(){this.prob=[];for(var wire=0;wire<this.numQubits;wire++)this.prob.push(0);for(var is in this.state)for(var i=parseInt(is),wire=0;wire<this.numQubits;wire++){var state;i&(this.reverseBitOrder?math.pow(2,this.numQubits-1-wire):math.pow(2,wire))&&(((state=this.state[is]).re||state.im)&&(this.prob[wire]+=math.pow(math.abs(state),2)))}for(wire=0;wire<this.numQubits;wire++)this.prob[wire]=math.round(this.prob[wire],14);return this.prob},QuantumCircuit.prototype.probability=function(wire){return this.prob&&this.prob.length==this.numQubits||this.probabilities(),this.prob[wire]},QuantumCircuit.prototype.densityMatrix=function(){var density=[],numAmplitudes=this.numAmplitudes();for(row=0;row<numAmplitudes;row++){for(var r=[],rowVal=this.state[row]||math.complex(0,0),col=0;col<numAmplitudes;col++){var colVal=this.state[col]||math.complex(0,0);(colVal.re||colVal.im)&&(colVal=math.conj(colVal)),r.push(math.multiply(rowVal,colVal))}density.push(r)}return density},QuantumCircuit.prototype.partialTrace=function(qubit){function insertBit(input,pos,bit){var posBit=1<<pos,out=(out=input<<1)^(out^input)&(2<<pos)-1|posBit;return bit||(out^=posBit),out}for(var trace=[],unusedCount=this.numQubits-1,unusedLen=math.pow(2,unusedCount),qpos=null,qpos=this.reverseBitOrder?this.numQubits-1-qubit:qubit,el=0;el<4;el++){trace.push(math.complex(0,0));for(var base=unusedLen;base--;){var col,row=insertBit(base,qpos,2&el?1:0);this.state[row]&&(col=insertBit(base,qpos,1&el?1:0),this.state[col]&&(trace[el]=math.add(trace[el],math.multiply(this.state[row],math.conj(this.state[col])))))}}return[[trace[0],trace[1]],[trace[2],trace[3]]]},QuantumCircuit.prototype.angles=function(){for(var angles=[],wire=0;wire<this.numQubits;wire++)angles.push({theta:0,phi:0,thetaDeg:0,phiDeg:0,radius:0,x:0,y:0,z:0});for(wire=0;wire<this.numQubits;wire++){var trace=this.partialTrace(wire),x=math.add(math.re(trace[0][1]),math.re(trace[1][0])),y=math.subtract(math.im(trace[1][0]),math.im(trace[0][1])),z=math.subtract(math.re(trace[0][0]),math.re(trace[1][1])),radius=math.sqrt(math.pow(x,2)+math.pow(y,2)+math.pow(z,2)),theta=Math.max(0,math.pi/2-math.atan2(z,math.sqrt(y*y+x*x))),phi=math.atan2(y,x);angles[wire].theta=math.round(theta,12),angles[wire].phi=math.round(phi,12),angles[wire].thetaDeg=math.round(math.multiply(theta,180/math.pi),7),angles[wire].phiDeg=math.round(math.multiply(phi,180/math.pi),7),angles[wire].radius=math.round(radius,7),angles[wire].x=math.round(x,12),angles[wire].y=math.round(y,12),angles[wire].z=math.round(z,12)}return angles},QuantumCircuit.prototype.randomCircuit=function(numQubits,numGates,options){this.init(numQubits);var gates=(options=options||{}).useGates&&options.useGates.length?options.useGates:Object.keys(this.basicGates);options.noMeasure&&0<=gates.indexOf("measure")&&gates.splice(gates.indexOf("measure"),1),options.noReset&&0<=gates.indexOf("reset")&&gates.splice(gates.indexOf("reset"),1),gates.splice(gates.indexOf("barrier"),1);for(var gateCount=0;gateCount<numGates;){var gateName=gates[Math.floor(Math.random()*gates.length)],gate=this.basicGates[gateName];if(gate){var gateQubits=gate.matrix&&gate.matrix.length?math.log2(gate.matrix.length):1;if(gateQubits<=numQubits){for(var gateWires=[];gateWires.length<gateQubits;){for(var gateWire=-1;gateWire=Math.floor(Math.random()*numQubits),0<=gateWires.indexOf(gateWire););gateWires.push(gateWire)}var params,cregBits,opt={};gate.params&&gate.params.length&&(params={},gate.params.map(function(paramName){params[paramName]=2*Math.PI*Math.random(),params[paramName]>Math.PI&&(params[paramName]=Math.PI-params[paramName])}),opt.params=params),"measure"==gateName?opt.creg={name:"c",bit:gateWires[0]}:options.noClassicControl||0!=Math.floor(4*Math.random())||(cregBits=this.cregTotalBits())&&(opt.condition={creg:"c",value:Math.floor(Math.random()*math.pow(2,cregBits))}),this.appendGate(gateName,gateWires,opt),gateCount++}}}},QuantumCircuit.prototype.randomUnitary=function(numQubits){var circ=new QuantumCircuit;return circ.randomCircuit(numQubits||1,8*(numQubits||1),{useGates:["rx","rz","cz"],noMeasure:!0,noReset:!0,noClassicControl:!0}),circ.circuitMatrix()},QuantumCircuit.prototype.eulerAnglesZYZ=function(inputMatrix){var eulerAngles={theta:null,phi:null,lambda:null,phase:null},coeff=math.pow(math.det(inputMatrix),-.5);eulerAngles.phase=-1*math.complex(coeff).toPolar().phi;var su_mat=math.multiply(coeff,inputMatrix);eulerAngles.theta=2*math.atan2(math.abs(su_mat[1][0]),math.abs(su_mat[0][0]));var phiplambda=2*math.complex(su_mat[1][1]).toPolar().phi,phimlamda=2*math.complex(su_mat[1][0]).toPolar().phi;return eulerAngles.phi=(phiplambda+phimlamda)/2,eulerAngles.lambda=(phiplambda-phimlamda)/2,eulerAngles},module.exports=QuantumCircuit},{"./qasm_import/QASMImport.js":1,mathjs:943}],6:[function(require,module,exports){var Token=require("./Token").Token,Lexer=require("./Lexer").Lexer,Interval=require("./IntervalSet").Interval;function TokenStream(){return this}function BufferedTokenStream(tokenSource){return TokenStream.call(this),this.tokenSource=tokenSource,this.tokens=[],this.index=-1,this.fetchedEOF=!1,this}((BufferedTokenStream.prototype=Object.create(TokenStream.prototype)).constructor=BufferedTokenStream).prototype.mark=function(){return 0},BufferedTokenStream.prototype.release=function(marker){},BufferedTokenStream.prototype.reset=function(){this.seek(0)},BufferedTokenStream.prototype.seek=function(index){this.lazyInit(),this.index=this.adjustSeekIndex(index)},BufferedTokenStream.prototype.get=function(index){return this.lazyInit(),this.tokens[index]},BufferedTokenStream.prototype.consume=function(){if(!(0<=this.index&&(this.fetchedEOF?this.index<this.tokens.length-1:this.index<this.tokens.length))&&this.LA(1)===Token.EOF)throw"cannot consume EOF";this.sync(this.index+1)&&(this.index=this.adjustSeekIndex(this.index+1))},BufferedTokenStream.prototype.sync=function(i){var n=i-this.tokens.length+1;return!(0<n)||n<=this.fetch(n)},BufferedTokenStream.prototype.fetch=function(n){if(this.fetchedEOF)return 0;for(var i=0;i<n;i++){var t=this.tokenSource.nextToken();if(t.tokenIndex=this.tokens.length,this.tokens.push(t),t.type===Token.EOF)return this.fetchedEOF=!0,i+1}return n},BufferedTokenStream.prototype.getTokens=function(start,stop,types){if(void 0===types&&(types=null),start<0||stop<0)return null;this.lazyInit();var subset=[];stop>=this.tokens.length&&(stop=this.tokens.length-1);for(var i=start;i<stop;i++){var t=this.tokens[i];if(t.type===Token.EOF)break;null!==types&&!types.contains(t.type)||subset.push(t)}return subset},BufferedTokenStream.prototype.LA=function(i){return this.LT(i).type},BufferedTokenStream.prototype.LB=function(k){return this.index-k<0?null:this.tokens[this.index-k]},BufferedTokenStream.prototype.LT=function(k){if(this.lazyInit(),0===k)return null;if(k<0)return this.LB(-k);var i=this.index+k-1;return this.sync(i),i>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[i]},BufferedTokenStream.prototype.adjustSeekIndex=function(i){return i},BufferedTokenStream.prototype.lazyInit=function(){-1===this.index&&this.setup()},BufferedTokenStream.prototype.setup=function(){this.sync(0),this.index=this.adjustSeekIndex(0)},BufferedTokenStream.prototype.setTokenSource=function(tokenSource){this.tokenSource=tokenSource,this.tokens=[],this.index=-1,this.fetchedEOF=!1},BufferedTokenStream.prototype.nextTokenOnChannel=function(i,channel){if(this.sync(i),i>=this.tokens.length)return-1;for(var token=this.tokens[i];token.channel!==this.channel;){if(token.type===Token.EOF)return-1;i+=1,this.sync(i),token=this.tokens[i]}return i},BufferedTokenStream.prototype.previousTokenOnChannel=function(i,channel){for(;0<=i&&this.tokens[i].channel!==channel;)--i;return i},BufferedTokenStream.prototype.getHiddenTokensToRight=function(tokenIndex,channel){if(void 0===channel&&(channel=-1),this.lazyInit(),tokenIndex<0||tokenIndex>=this.tokens.length)throw tokenIndex+" not in 0.."+this.tokens.length-1;var nextOnChannel=this.nextTokenOnChannel(tokenIndex+1,Lexer.DEFAULT_TOKEN_CHANNEL),from_=tokenIndex+1,to=-1===nextOnChannel?this.tokens.length-1:nextOnChannel;return this.filterForChannel(from_,to,channel)},BufferedTokenStream.prototype.getHiddenTokensToLeft=function(tokenIndex,channel){if(void 0===channel&&(channel=-1),this.lazyInit(),tokenIndex<0||tokenIndex>=this.tokens.length)throw tokenIndex+" not in 0.."+this.tokens.length-1;var prevOnChannel=this.previousTokenOnChannel(tokenIndex-1,Lexer.DEFAULT_TOKEN_CHANNEL);if(prevOnChannel===tokenIndex-1)return null;var from_=prevOnChannel+1,to=tokenIndex-1;return this.filterForChannel(from_,to,channel)},BufferedTokenStream.prototype.filterForChannel=function(left,right,channel){for(var hidden=[],i=left;i<right+1;i++){var t=this.tokens[i];-1===channel?t.channel!==Lexer.DEFAULT_TOKEN_CHANNEL&&hidden.push(t):t.channel===channel&&hidden.push(t)}return 0===hidden.length?null:hidden},BufferedTokenStream.prototype.getSourceName=function(){return this.tokenSource.getSourceName()},BufferedTokenStream.prototype.getText=function(interval){this.lazyInit(),this.fill(),null==interval&&(interval=new Interval(0,this.tokens.length-1));var start=interval.start;start instanceof Token&&(start=start.tokenIndex);var stop=interval.stop;if(stop instanceof Token&&(stop=stop.tokenIndex),null===start||null===stop||start<0||stop<0)return"";stop>=this.tokens.length&&(stop=this.tokens.length-1);for(var s="",i=start;i<stop+1;i++){var t=this.tokens[i];if(t.type===Token.EOF)break;s+=t.text}return s},BufferedTokenStream.prototype.fill=function(){for(this.lazyInit();1e3===this.fetch(1e3););},exports.BufferedTokenStream=BufferedTokenStream},{"./IntervalSet":12,"./Lexer":14,"./Token":20}],7:[function(require,module,exports){var InputStream=require("./InputStream").InputStream,fs="undefined"==typeof window&&"undefined"==typeof importScripts?require("fs"):null,CharStreams={fromString:function(str){return new InputStream(str,!0)},fromBlob:function(blob,encoding,onLoad,onError){var reader=FileReader();reader.onload=function(e){var is=new InputStream(e.target.result,!0);onLoad(is)},reader.onerror=onError,reader.readAsText(blob,encoding)},fromBuffer:function(buffer,encoding){return new InputStream(buffer.toString(encoding),!0)},fromPath:function(path,encoding,callback){fs.readFile(path,encoding,function(err,data){var is=null;null!==data&&(is=new InputStream(data,!0)),callback(err,is)})},fromPathSync:function(path,encoding){var data=fs.readFileSync(path,encoding);return new InputStream(data,!0)}};exports.CharStreams=CharStreams},{"./InputStream":11,fs:53}],8:[function(require,module,exports){var CommonToken=require("./Token").CommonToken;function TokenFactory(){return this}function CommonTokenFactory(copyText){return TokenFactory.call(this),this.copyText=void 0!==copyText&&copyText,this}((CommonTokenFactory.prototype=Object.create(TokenFactory.prototype)).constructor=CommonTokenFactory).DEFAULT=new CommonTokenFactory,CommonTokenFactory.prototype.create=function(source,type,text,channel,start,stop,line,column){var t=new CommonToken(source,type,channel,start,stop);return t.line=line,t.column=column,null!==text?t.text=text:this.copyText&&null!==source[1]&&(t.text=source[1].getText(start,stop)),t},CommonTokenFactory.prototype.createThin=function(type,text){var t=new CommonToken(null,type);return t.text=text,t},exports.CommonTokenFactory=CommonTokenFactory},{"./Token":20}],9:[function(require,module,exports){var Token=require("./Token").Token,BufferedTokenStream=require("./BufferedTokenStream").BufferedTokenStream;function CommonTokenStream(lexer,channel){return BufferedTokenStream.call(this,lexer),this.channel=void 0===channel?Token.DEFAULT_CHANNEL:channel,this}((CommonTokenStream.prototype=Object.create(BufferedTokenStream.prototype)).constructor=CommonTokenStream).prototype.adjustSeekIndex=function(i){return this.nextTokenOnChannel(i,this.channel)},CommonTokenStream.prototype.LB=function(k){if(0===k||this.index-k<0)return null;for(var i=this.index,n=1;n<=k;)i=this.previousTokenOnChannel(i-1,this.channel),n+=1;return i<0?null:this.tokens[i]},CommonTokenStream.prototype.LT=function(k){if(this.lazyInit(),0===k)return null;if(k<0)return this.LB(-k);for(var i=this.index,n=1;n<k;)this.sync(i+1)&&(i=this.nextTokenOnChannel(i+1,this.channel)),n+=1;return this.tokens[i]},CommonTokenStream.prototype.getNumberOfOnChannelTokens=function(){var n=0;this.fill();for(var i=0;i<this.tokens.length;i++){var t=this.tokens[i];if(t.channel===this.channel&&(n+=1),t.type===Token.EOF)break}return n},exports.CommonTokenStream=CommonTokenStream},{"./BufferedTokenStream":6,"./Token":20}],10:[function(require,module,exports){var InputStream=require("./InputStream").InputStream,fs="undefined"==typeof window&&"undefined"==typeof importScripts?require("fs"):null;function FileStream(fileName,decodeToUnicodeCodePoints){var data=fs.readFileSync(fileName,"utf8");return InputStream.call(this,data,decodeToUnicodeCodePoints),this.fileName=fileName,this}(FileStream.prototype=Object.create(InputStream.prototype)).constructor=FileStream,exports.FileStream=FileStream},{"./InputStream":11,fs:53}],11:[function(require,module,exports){var Token=require("./Token").Token;function InputStream(data,decodeToUnicodeCodePoints){return this.name="<empty>",this.strdata=data,this.decodeToUnicodeCodePoints=decodeToUnicodeCodePoints||!1,function(stream){if(stream._index=0,stream.data=[],stream.decodeToUnicodeCodePoints)for(var i=0;i<stream.strdata.length;){var codePoint=stream.strdata.codePointAt(i);stream.data.push(codePoint),i+=codePoint<=65535?1:2}else for(i=0;i<stream.strdata.length;i++){var codeUnit=stream.strdata.charCodeAt(i);stream.data.push(codeUnit)}stream._size=stream.data.length}(this),this}require("./polyfills/codepointat"),require("./polyfills/fromcodepoint"),Object.defineProperty(InputStream.prototype,"index",{get:function(){return this._index}}),Object.defineProperty(InputStream.prototype,"size",{get:function(){return this._size}}),InputStream.prototype.reset=function(){this._index=0},InputStream.prototype.consume=function(){if(this._index>=this._size)throw"cannot consume EOF";this._index+=1},InputStream.prototype.LA=function(offset){if(0===offset)return 0;offset<0&&(offset+=1);var pos=this._index+offset-1;return pos<0||pos>=this._size?Token.EOF:this.data[pos]},InputStream.prototype.LT=function(offset){return this.LA(offset)},InputStream.prototype.mark=function(){return-1},InputStream.prototype.release=function(marker){},InputStream.prototype.seek=function(_index){_index<=this._index?this._index=_index:this._index=Math.min(_index,this._size)},InputStream.prototype.getText=function(start,stop){if(stop>=this._size&&(stop=this._size-1),start>=this._size)return"";if(this.decodeToUnicodeCodePoints){for(var result="",i=start;i<=stop;i++)result+=String.fromCodePoint(this.data[i]);return result}return this.strdata.slice(start,stop+1)},InputStream.prototype.toString=function(){return this.strdata},exports.InputStream=InputStream},{"./Token":20,"./polyfills/codepointat":48,"./polyfills/fromcodepoint":49}],12:[function(require,module,exports){var Token=require("./Token").Token;function Interval(start,stop){return this.start=start,this.stop=stop,this}function IntervalSet(){this.intervals=null,this.readOnly=!1}Interval.prototype.contains=function(item){return item>=this.start&&item<this.stop},Interval.prototype.toString=function(){return this.start===this.stop-1?this.start.toString():this.start.toString()+".."+(this.stop-1).toString()},Object.defineProperty(Interval.prototype,"length",{get:function(){return this.stop-this.start}}),IntervalSet.prototype.first=function(v){return null===this.intervals||0===this.intervals.length?Token.INVALID_TYPE:this.intervals[0].start},IntervalSet.prototype.addOne=function(v){this.addInterval(new Interval(v,v+1))},IntervalSet.prototype.addRange=function(l,h){this.addInterval(new Interval(l,h+1))},IntervalSet.prototype.addInterval=function(v){if(null===this.intervals)this.intervals=[],this.intervals.push(v);else{for(var k=0;k<this.intervals.length;k++){var i=this.intervals[k];if(v.stop<i.start)return void this.intervals.splice(k,0,v);if(v.stop===i.start)return void(this.intervals[k].start=v.start);if(v.start<=i.stop)return this.intervals[k]=new Interval(Math.min(i.start,v.start),Math.max(i.stop,v.stop)),void this.reduce(k)}this.intervals.push(v)}},IntervalSet.prototype.addSet=function(other){if(null!==other.intervals)for(var k=0;k<other.intervals.length;k++){var i=other.intervals[k];this.addInterval(new Interval(i.start,i.stop))}return this},IntervalSet.prototype.reduce=function(k){var l,r;k<this.intervalslength-1&&(l=this.intervals[k],r=this.intervals[k+1],l.stop>=r.stop?(this.intervals.pop(k+1),this.reduce(k)):l.stop>=r.start&&(this.intervals[k]=new Interval(l.start,r.stop),this.intervals.pop(k+1)))},IntervalSet.prototype.complement=function(start,stop){var result=new IntervalSet;result.addInterval(new Interval(start,stop+1));for(var i=0;i<this.intervals.length;i++)result.removeRange(this.intervals[i]);return result},IntervalSet.prototype.contains=function(item){if(null===this.intervals)return!1;for(var k=0;k<this.intervals.length;k++)if(this.intervals[k].contains(item))return!0;return!1},Object.defineProperty(IntervalSet.prototype,"length",{get:function(){var len=0;return this.intervals.map(function(i){len+=i.length}),len}}),IntervalSet.prototype.removeRange=function(v){if(v.start===v.stop-1)this.removeOne(v.start);else if(null!==this.intervals)for(var k=0,n=0;n<this.intervals.length;n++){var i=this.intervals[k];if(v.stop<=i.start)return;if(v.start>i.start&&v.stop<i.stop){this.intervals[k]=new Interval(i.start,v.start);var x=new Interval(v.stop,i.stop);return void this.intervals.splice(k,0,x)}v.start<=i.start&&v.stop>=i.stop?(this.intervals.splice(k,1),--k):v.start<i.stop?this.intervals[k]=new Interval(i.start,v.start):v.stop<i.stop&&(this.intervals[k]=new Interval(v.stop,i.stop)),k+=1}},IntervalSet.prototype.removeOne=function(v){if(null!==this.intervals)for(var k=0;k<this.intervals.length;k++){var i=this.intervals[k];if(v<i.start)return;if(v===i.start&&v===i.stop-1)return void this.intervals.splice(k,1);if(v===i.start)return void(this.intervals[k]=new Interval(i.start+1,i.stop));if(v===i.stop-1)return void(this.intervals[k]=new Interval(i.start,i.stop-1));if(v<i.stop-1){var x=new Interval(i.start,v);return i.start=v+1,void this.intervals.splice(k,0,x)}}},IntervalSet.prototype.toString=function(literalNames,symbolicNames,elemsAreChar){return literalNames=literalNames||null,symbolicNames=symbolicNames||null,elemsAreChar=elemsAreChar||!1,null===this.intervals?"{}":null!==literalNames||null!==symbolicNames?this.toTokenString(literalNames,symbolicNames):elemsAreChar?this.toCharString():this.toIndexString()},IntervalSet.prototype.toCharString=function(){for(var names=[],i=0;i<this.intervals.length;i++){var v=this.intervals[i];v.stop===v.start+1?v.start===Token.EOF?names.push("<EOF>"):names.push("'"+String.fromCharCode(v.start)+"'"):names.push("'"+String.fromCharCode(v.start)+"'..'"+String.fromCharCode(v.stop-1)+"'")}return 1<names.length?"{"+names.join(", ")+"}":names[0]},IntervalSet.prototype.toIndexString=function(){for(var names=[],i=0;i<this.intervals.length;i++){var v=this.intervals[i];v.stop===v.start+1?v.start===Token.EOF?names.push("<EOF>"):names.push(v.start.toString()):names.push(v.start.toString()+".."+(v.stop-1).toString())}return 1<names.length?"{"+names.join(", ")+"}":names[0]},IntervalSet.prototype.toTokenString=function(literalNames,symbolicNames){for(var names=[],i=0;i<this.intervals.length;i++)for(var v=this.intervals[i],j=v.start;j<v.stop;j++)names.push(this.elementName(literalNames,symbolicNames,j));return 1<names.length?"{"+names.join(", ")+"}":names[0]},IntervalSet.prototype.elementName=function(literalNames,symbolicNames,a){return a===Token.EOF?"<EOF>":a===Token.EPSILON?"<EPSILON>":literalNames[a]||symbolicNames[a]},exports.Interval=Interval,exports.IntervalSet=IntervalSet},{"./Token":20}],13:[function(require,module,exports){var Set=require("./Utils").Set,BitSet=require("./Utils").BitSet,Token=require("./Token").Token,ATNConfig=require("./atn/ATNConfig").ATNConfig,IntervalSet=(require("./IntervalSet").Interval,require("./IntervalSet").IntervalSet),RuleStopState=require("./atn/ATNState").RuleStopState,RuleTransition=require("./atn/Transition").RuleTransition,NotSetTransition=require("./atn/Transition").NotSetTransition,WildcardTransition=require("./atn/Transition").WildcardTransition,AbstractPredicateTransition=require("./atn/Transition").AbstractPredicateTransition,pc=require("./PredictionContext"),predictionContextFromRuleContext=pc.predictionContextFromRuleContext,PredictionContext=pc.PredictionContext,SingletonPredictionContext=pc.SingletonPredictionContext;function LL1Analyzer(atn){this.atn=atn}LL1Analyzer.HIT_PRED=Token.INVALID_TYPE,LL1Analyzer.prototype.getDecisionLookahead=function(s){if(null===s)return null;for(var count=s.transitions.length,look=[],alt=0;alt<count;alt++){look[alt]=new IntervalSet;var lookBusy=new Set;this._LOOK(s.transition(alt).target,null,PredictionContext.EMPTY,look[alt],lookBusy,new BitSet,!1,!1),0!==look[alt].length&&!look[alt].contains(LL1Analyzer.HIT_PRED)||(look[alt]=null)}return look},LL1Analyzer.prototype.LOOK=function(s,stopState,ctx){var r=new IntervalSet,lookContext=null!==(ctx=ctx||null)?predictionContextFromRuleContext(s.atn,ctx):null;return this._LOOK(s,stopState,lookContext,r,new Set,new BitSet,!0,!0),r},LL1Analyzer.prototype._LOOK=function(s,stopState,ctx,look,lookBusy,calledRuleStack,seeThruPreds,addEOF){var c=new ATNConfig({state:s,alt:0,context:ctx},null);if(!lookBusy.contains(c)){if(lookBusy.add(c),s===stopState){if(null===ctx)return void look.addOne(Token.EPSILON);if(ctx.isEmpty()&&addEOF)return void look.addOne(Token.EOF)}if(s instanceof RuleStopState){if(null===ctx)return void look.addOne(Token.EPSILON);if(ctx.isEmpty()&&addEOF)return void look.addOne(Token.EOF);if(ctx!==PredictionContext.EMPTY){for(var i=0;i<ctx.length;i++){var returnState=this.atn.states[ctx.getReturnState(i)],removed=calledRuleStack.contains(returnState.ruleIndex);try{calledRuleStack.remove(returnState.ruleIndex),this._LOOK(returnState,stopState,ctx.getParent(i),look,lookBusy,calledRuleStack,seeThruPreds,addEOF)}finally{removed&&calledRuleStack.add(returnState.ruleIndex)}}return}}for(var j=0;j<s.transitions.length;j++){var set,t=s.transitions[j];if(t.constructor===RuleTransition){if(calledRuleStack.contains(t.target.ruleIndex))continue;var newContext=SingletonPredictionContext.create(ctx,t.followState.stateNumber);try{calledRuleStack.add(t.target.ruleIndex),this._LOOK(t.target,stopState,newContext,look,lookBusy,calledRuleStack,seeThruPreds,addEOF)}finally{calledRuleStack.remove(t.target.ruleIndex)}}else{t instanceof AbstractPredicateTransition?seeThruPreds?this._LOOK(t.target,stopState,ctx,look,lookBusy,calledRuleStack,seeThruPreds,addEOF):look.addOne(LL1Analyzer.HIT_PRED):t.isEpsilon?this._LOOK(t.target,stopState,ctx,look,lookBusy,calledRuleStack,seeThruPreds,addEOF):t.constructor===WildcardTransition?look.addRange(Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType):null!==(set=t.label)&&(t instanceof NotSetTransition&&(set=set.complement(Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType)),look.addSet(set))}}}},exports.LL1Analyzer=LL1Analyzer},{"./IntervalSet":12,"./PredictionContext":17,"./Token":20,"./Utils":21,"./atn/ATNConfig":23,"./atn/ATNState":28,"./atn/Transition":36}],14:[function(require,module,exports){var Token=require("./Token").Token,Recognizer=require("./Recognizer").Recognizer,CommonTokenFactory=require("./CommonTokenFactory").CommonTokenFactory,RecognitionException=require("./error/Errors").RecognitionException,LexerNoViableAltException=require("./error/Errors").LexerNoViableAltException;function Lexer(input){return Recognizer.call(this),this._input=input,this._factory=CommonTokenFactory.DEFAULT,this._tokenFactorySourcePair=[this,input],this._interp=null,this._token=null,this._tokenStartCharIndex=-1,this._tokenStartLine=-1,this._tokenStartColumn=-1,this._hitEOF=!1,this._channel=Token.DEFAULT_CHANNEL,this._type=Token.INVALID_TYPE,this._modeStack=[],this._mode=Lexer.DEFAULT_MODE,this._text=null,this}((Lexer.prototype=Object.create(Recognizer.prototype)).constructor=Lexer).DEFAULT_MODE=0,Lexer.MORE=-2,Lexer.SKIP=-3,Lexer.DEFAULT_TOKEN_CHANNEL=Token.DEFAULT_CHANNEL,Lexer.HIDDEN=Token.HIDDEN_CHANNEL,Lexer.MIN_CHAR_VALUE=0,Lexer.MAX_CHAR_VALUE=1114111,Lexer.prototype.reset=function(){null!==this._input&&this._input.seek(0),this._token=null,this._type=Token.INVALID_TYPE,this._channel=Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartColumn=-1,this._tokenStartLine=-1,this._text=null,this._hitEOF=!1,this._mode=Lexer.DEFAULT_MODE,this._modeStack=[],this._interp.reset()},Lexer.prototype.nextToken=function(){if(null===this._input)throw"nextToken requires a non-null input stream.";var tokenStartMarker=this._input.mark();try{for(;;){if(this._hitEOF)return this.emitEOF(),this._token;this._token=null,this._channel=Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartColumn=this._interp.column,this._tokenStartLine=this._interp.line,this._text=null;for(var continueOuter=!1;;){this._type=Token.INVALID_TYPE;var ttype=Lexer.SKIP;try{ttype=this._interp.match(this._input,this._mode)}catch(e){if(!(e instanceof RecognitionException))throw console.log(e.stack),e;this.notifyListeners(e),this.recover(e)}if(this._input.LA(1)===Token.EOF&&(this._hitEOF=!0),this._type===Token.INVALID_TYPE&&(this._type=ttype),this._type===Lexer.SKIP){continueOuter=!0;break}if(this._type!==Lexer.MORE)break}if(!continueOuter)return null===this._token&&this.emit(),this._token}}finally{this._input.release(tokenStartMarker)}},Lexer.prototype.skip=function(){this._type=Lexer.SKIP},Lexer.prototype.more=function(){this._type=Lexer.MORE},Lexer.prototype.mode=function(m){this._mode=m},Lexer.prototype.pushMode=function(m){this._interp.debug&&console.log("pushMode "+m),this._modeStack.push(this._mode),this.mode(m)},Lexer.prototype.popMode=function(){if(0===this._modeStack.length)throw"Empty Stack";return this._interp.debug&&console.log("popMode back to "+this._modeStack.slice(0,-1)),this.mode(this._modeStack.pop()),this._mode},Object.defineProperty(Lexer.prototype,"inputStream",{get:function(){return this._input},set:function(input){this._input=null,this._tokenFactorySourcePair=[this,this._input],this.reset(),this._input=input,this._tokenFactorySourcePair=[this,this._input]}}),Object.defineProperty(Lexer.prototype,"sourceName",{get:function(){return this._input.sourceName}}),Lexer.prototype.emitToken=function(token){this._token=token},Lexer.prototype.emit=function(){var t=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.getCharIndex()-1,this._tokenStartLine,this._tokenStartColumn);return this.emitToken(t),t},Lexer.prototype.emitEOF=function(){var cpos=this.column,lpos=this.line,eof=this._factory.create(this._tokenFactorySourcePair,Token.EOF,null,Token.DEFAULT_CHANNEL,this._input.index,this._input.index-1,lpos,cpos);return this.emitToken(eof),eof},Object.defineProperty(Lexer.prototype,"type",{get:function(){return this.type},set:function(type){this._type=type}}),Object.defineProperty(Lexer.prototype,"line",{get:function(){return this._interp.line},set:function(line){this._interp.line=line}}),Object.defineProperty(Lexer.prototype,"column",{get:function(){return this._interp.column},set:function(column){this._interp.column=column}}),Lexer.prototype.getCharIndex=function(){return this._input.index},Object.defineProperty(Lexer.prototype,"text",{get:function(){return null!==this._text?this._text:this._interp.getText(this._input)},set:function(text){this._text=text}}),Lexer.prototype.getAllTokens=function(){for(var tokens=[],t=this.nextToken();t.type!==Token.EOF;)tokens.push(t),t=this.nextToken();return tokens},Lexer.prototype.notifyListeners=function(e){var start=this._tokenStartCharIndex,stop=this._input.index,text=this._input.getText(start,stop),msg="token recognition error at: '"+this.getErrorDisplay(text)+"'";this.getErrorListenerDispatch().syntaxError(this,null,this._tokenStartLine,this._tokenStartColumn,msg,e)},Lexer.prototype.getErrorDisplay=function(s){for(var d=[],i=0;i<s.length;i++)d.push(s[i]);return d.join("")},Lexer.prototype.getErrorDisplayForChar=function(c){return c.charCodeAt(0)===Token.EOF?"<EOF>":"\n"===c?"\\n":"\t"===c?"\\t":"\r"===c?"\\r":c},Lexer.prototype.getCharErrorDisplay=function(c){return"'"+this.getErrorDisplayForChar(c)+"'"},Lexer.prototype.recover=function(re){this._input.LA(1)!==Token.EOF&&(re instanceof LexerNoViableAltException?this._interp.consume(this._input):this._input.consume())},exports.Lexer=Lexer},{"./CommonTokenFactory":8,"./Recognizer":18,"./Token":20,"./error/Errors":45}],15:[function(require,module,exports){var Token=require("./Token").Token,ParseTreeListener=require("./tree/Tree").ParseTreeListener,Recognizer=require("./Recognizer").Recognizer,DefaultErrorStrategy=require("./error/ErrorStrategy").DefaultErrorStrategy,ATNDeserializer=require("./atn/ATNDeserializer").ATNDeserializer,ATNDeserializationOptions=require("./atn/ATNDeserializationOptions").ATNDeserializationOptions,TerminalNode=require("./tree/Tree").TerminalNode,ErrorNode=require("./tree/Tree").ErrorNode;function TraceListener(parser){return ParseTreeListener.call(this),this.parser=parser,this}function Parser(input){return Recognizer.call(this),this._input=null,this._errHandler=new DefaultErrorStrategy,this._precedenceStack=[],this._precedenceStack.push(0),this._ctx=null,this.buildParseTrees=!0,this._tracer=null,this._parseListeners=null,this._syntaxErrors=0,this.setInputStream(input),this}((TraceListener.prototype=Object.create(ParseTreeListener.prototype)).constructor=TraceListener).prototype.enterEveryRule=function(ctx){console.log("enter   "+this.parser.ruleNames[ctx.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)},TraceListener.prototype.visitTerminal=function(node){console.log("consume "+node.symbol+" rule "+this.parser.ruleNames[this.parser._ctx.ruleIndex])},TraceListener.prototype.exitEveryRule=function(ctx){console.log("exit    "+this.parser.ruleNames[ctx.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)},((Parser.prototype=Object.create(Recognizer.prototype)).contructor=Parser).bypassAltsAtnCache={},Parser.prototype.reset=function(){null!==this._input&&this._input.seek(0),this._errHandler.reset(this),this._ctx=null,this._syntaxErrors=0,this.setTrace(!1),this._precedenceStack=[],this._precedenceStack.push(0),null!==this._interp&&this._interp.reset()},Parser.prototype.match=function(ttype){var t=this.getCurrentToken();return t.type===ttype?(this._errHandler.reportMatch(this),this.consume()):(t=this._errHandler.recoverInline(this),this.buildParseTrees&&-1===t.tokenIndex&&this._ctx.addErrorNode(t)),t},Parser.prototype.matchWildcard=function(){var t=this.getCurrentToken();return 0<t.type?(this._errHandler.reportMatch(this),this.consume()):(t=this._errHandler.recoverInline(this),this._buildParseTrees&&-1===t.tokenIndex&&this._ctx.addErrorNode(t)),t},Parser.prototype.getParseListeners=function(){return this._parseListeners||[]},Parser.prototype.addParseListener=function(listener){if(null===listener)throw"listener";null===this._parseListeners&&(this._parseListeners=[]),this._parseListeners.push(listener)},Parser.prototype.removeParseListener=function(listener){var idx;null!==this._parseListeners&&(0<=(idx=this._parseListeners.indexOf(listener))&&this._parseListeners.splice(idx,1),0===this._parseListeners.length&&(this._parseListeners=null))},Parser.prototype.removeParseListeners=function(){this._parseListeners=null},Parser.prototype.triggerEnterRuleEvent=function(){var ctx;null!==this._parseListeners&&(ctx=this._ctx,this._parseListeners.map(function(listener){listener.enterEveryRule(ctx),ctx.enterRule(listener)}))},Parser.prototype.triggerExitRuleEvent=function(){var ctx;null!==this._parseListeners&&(ctx=this._ctx,this._parseListeners.slice(0).reverse().map(function(listener){ctx.exitRule(listener),listener.exitEveryRule(ctx)}))},Parser.prototype.getTokenFactory=function(){return this._input.tokenSource._factory},Parser.prototype.setTokenFactory=function(factory){this._input.tokenSource._factory=factory},Parser.prototype.getATNWithBypassAlts=function(){var serializedAtn=this.getSerializedATN();if(null===serializedAtn)throw"The current parser does not support an ATN with bypass alternatives.";var deserializationOptions,result=this.bypassAltsAtnCache[serializedAtn];return null===result&&((deserializationOptions=new ATNDeserializationOptions).generateRuleBypassTransitions=!0,result=new ATNDeserializer(deserializationOptions).deserialize(serializedAtn),this.bypassAltsAtnCache[serializedAtn]=result),result};var Lexer=require("./Lexer").Lexer;Parser.prototype.compileParseTreePattern=function(pattern,patternRuleIndex,lexer){var tokenSource;if(null===(lexer=lexer||null)&&(null===this.getTokenStream()||(tokenSource=this.getTokenStream().tokenSource)instanceof Lexer&&(lexer=tokenSource)),null===lexer)throw"Parser can't discover a lexer to use";return new ParseTreePatternMatcher(lexer,this).compile(pattern,patternRuleIndex)},Parser.prototype.getInputStream=function(){return this.getTokenStream()},Parser.prototype.setInputStream=function(input){this.setTokenStream(input)},Parser.prototype.getTokenStream=function(){return this._input},Parser.prototype.setTokenStream=function(input){this._input=null,this.reset(),this._input=input},Parser.prototype.getCurrentToken=function(){return this._input.LT(1)},Parser.prototype.notifyErrorListeners=function(msg,offendingToken,err){err=err||null,null===(offendingToken=offendingToken||null)&&(offendingToken=this.getCurrentToken()),this._syntaxErrors+=1;var line=offendingToken.line,column=offendingToken.column;this.getErrorListenerDispatch().syntaxError(this,offendingToken,line,column,msg,err)},Parser.prototype.consume=function(){var o=this.getCurrentToken();o.type!==Token.EOF&&this.getInputStream().consume();var node,hasListener=null!==this._parseListeners&&0<this._parseListeners.length;return(this.buildParseTrees||hasListener)&&((node=this._errHandler.inErrorRecoveryMode(this)?this._ctx.addErrorNode(o):this._ctx.addTokenNode(o)).invokingState=this.state,hasListener&&this._parseListeners.map(function(listener){node instanceof ErrorNode||void 0!==node.isErrorNode&&node.isErrorNode()?listener.visitErrorNode(node):node instanceof TerminalNode&&listener.visitTerminal(node)})),o},Parser.prototype.addContextToParseTree=function(){null!==this._ctx.parentCtx&&this._ctx.parentCtx.addChild(this._ctx)},Parser.prototype.enterRule=function(localctx,state,ruleIndex){this.state=state,this._ctx=localctx,this._ctx.start=this._input.LT(1),this.buildParseTrees&&this.addContextToParseTree(),null!==this._parseListeners&&this.triggerEnterRuleEvent()},Parser.prototype.exitRule=function(){this._ctx.stop=this._input.LT(-1),null!==this._parseListeners&&this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx.parentCtx},Parser.prototype.enterOuterAlt=function(localctx,altNum){localctx.setAltNumber(altNum),this.buildParseTrees&&this._ctx!==localctx&&null!==this._ctx.parentCtx&&(this._ctx.parentCtx.removeLastChild(),this._ctx.parentCtx.addChild(localctx)),this._ctx=localctx},Parser.prototype.getPrecedence=function(){return 0===this._precedenceStack.length?-1:this._precedenceStack[this._precedenceStack.length-1]},Parser.prototype.enterRecursionRule=function(localctx,state,ruleIndex,precedence){this.state=state,this._precedenceStack.push(precedence),this._ctx=localctx,this._ctx.start=this._input.LT(1),null!==this._parseListeners&&this.triggerEnterRuleEvent()},Parser.prototype.pushNewRecursionContext=function(localctx,state,ruleIndex){var previous=this._ctx;previous.parentCtx=localctx,previous.invokingState=state,previous.stop=this._input.LT(-1),this._ctx=localctx,this._ctx.start=previous.start,this.buildParseTrees&&this._ctx.addChild(previous),null!==this._parseListeners&&this.triggerEnterRuleEvent()},Parser.prototype.unrollRecursionContexts=function(parentCtx){this._precedenceStack.pop(),this._ctx.stop=this._input.LT(-1);var retCtx=this._ctx;if(null!==this._parseListeners)for(;this._ctx!==parentCtx;)this.triggerExitRuleEvent(),this._ctx=this._ctx.parentCtx;else this._ctx=parentCtx;retCtx.parentCtx=parentCtx,this.buildParseTrees&&null!==parentCtx&&parentCtx.addChild(retCtx)},Parser.prototype.getInvokingContext=function(ruleIndex){for(var ctx=this._ctx;null!==ctx;){if(ctx.ruleIndex===ruleIndex)return ctx;ctx=ctx.parentCtx}return null},Parser.prototype.precpred=function(localctx,precedence){return precedence>=this._precedenceStack[this._precedenceStack.length-1]},Parser.prototype.inContext=function(context){return!1},Parser.prototype.isExpectedToken=function(symbol){var atn=this._interp.atn,ctx=this._ctx,s=atn.states[this.state];if((following=atn.nextTokens(s)).contains(symbol))return!0;if(!following.contains(Token.EPSILON))return!1;for(;null!==ctx&&0<=ctx.invokingState&&following.contains(Token.EPSILON);){var following,rt=atn.states[ctx.invokingState].transitions[0];if((following=atn.nextTokens(rt.followState)).contains(symbol))return!0;ctx=ctx.parentCtx}return!(!following.contains(Token.EPSILON)||symbol!==Token.EOF)},Parser.prototype.getExpectedTokens=function(){return this._interp.atn.getExpectedTokens(this.state,this._ctx)},Parser.prototype.getExpectedTokensWithinCurrentRule=function(){var atn=this._interp.atn,s=atn.states[this.state];return atn.nextTokens(s)},Parser.prototype.getRuleIndex=function(ruleName){var ruleIndex=this.getRuleIndexMap()[ruleName];return null!==ruleIndex?ruleIndex:-1},Parser.prototype.getRuleInvocationStack=function(p){null===(p=p||null)&&(p=this._ctx);for(var stack=[];null!==p;){var ruleIndex=p.ruleIndex;ruleIndex<0?stack.push("n/a"):stack.push(this.ruleNames[ruleIndex]),p=p.parentCtx}return stack},Parser.prototype.getDFAStrings=function(){return this._interp.decisionToDFA.toString()},Parser.prototype.dumpDFA=function(){for(var seenOne=!1,i=0;i<this._interp.decisionToDFA.length;i++){var dfa=this._interp.decisionToDFA[i];0<dfa.states.length&&(seenOne&&console.log(),this.printer.println("Decision "+dfa.decision+":"),this.printer.print(dfa.toString(this.literalNames,this.symbolicNames)),seenOne=!0)}},Parser.prototype.getSourceName=function(){return this._input.sourceName},Parser.prototype.setTrace=function(trace){trace?(null!==this._tracer&&this.removeParseListener(this._tracer),this._tracer=new TraceListener(this),this.addParseListener(this._tracer)):(this.removeParseListener(this._tracer),this._tracer=null)},exports.Parser=Parser},{"./Lexer":14,"./Recognizer":18,"./Token":20,"./atn/ATNDeserializationOptions":25,"./atn/ATNDeserializer":26,"./error/ErrorStrategy":44,"./tree/Tree":50}],16:[function(require,module,exports){var RuleContext=require("./RuleContext").RuleContext,Tree=require("./tree/Tree"),INVALID_INTERVAL=Tree.INVALID_INTERVAL,TerminalNode=Tree.TerminalNode,TerminalNodeImpl=Tree.TerminalNodeImpl,ErrorNodeImpl=Tree.ErrorNodeImpl,Interval=require("./IntervalSet").Interval;function ParserRuleContext(parent,invokingStateNumber){parent=parent||null,invokingStateNumber=invokingStateNumber||null,RuleContext.call(this,parent,invokingStateNumber),this.ruleIndex=-1,this.children=null,this.start=null,this.stop=null,this.exception=null}function InterpreterRuleContext(parent,invokingStateNumber,ruleIndex){return ParserRuleContext.call(parent,invokingStateNumber),this.ruleIndex=ruleIndex,this}((ParserRuleContext.prototype=Object.create(RuleContext.prototype)).constructor=ParserRuleContext).prototype.copyFrom=function(ctx){this.parentCtx=ctx.parentCtx,this.invokingState=ctx.invokingState,this.children=null,this.start=ctx.start,this.stop=ctx.stop,ctx.children&&(this.children=[],ctx.children.map(function(child){child instanceof ErrorNodeImpl&&(this.children.push(child),child.parentCtx=this)},this))},ParserRuleContext.prototype.enterRule=function(listener){},ParserRuleContext.prototype.exitRule=function(listener){},ParserRuleContext.prototype.addChild=function(child){return null===this.children&&(this.children=[]),this.children.push(child),child},ParserRuleContext.prototype.removeLastChild=function(){null!==this.children&&this.children.pop()},ParserRuleContext.prototype.addTokenNode=function(token){var node=new TerminalNodeImpl(token);return this.addChild(node),node.parentCtx=this,node},ParserRuleContext.prototype.addErrorNode=function(badToken){var node=new ErrorNodeImpl(badToken);return this.addChild(node),node.parentCtx=this,node},ParserRuleContext.prototype.getChild=function(i,type){if(type=type||null,null===this.children||i<0||i>=this.children.length)return null;if(null===type)return this.children[i];for(var j=0;j<this.children.length;j++){var child=this.children[j];if(child instanceof type){if(0===i)return child;--i}}return null},ParserRuleContext.prototype.getToken=function(ttype,i){if(null===this.children||i<0||i>=this.children.length)return null;for(var j=0;j<this.children.length;j++){var child=this.children[j];if(child instanceof TerminalNode&&child.symbol.type===ttype){if(0===i)return child;--i}}return null},ParserRuleContext.prototype.getTokens=function(ttype){if(null===this.children)return[];for(var tokens=[],j=0;j<this.children.length;j++){var child=this.children[j];child instanceof TerminalNode&&child.symbol.type===ttype&&tokens.push(child)}return tokens},ParserRuleContext.prototype.getTypedRuleContext=function(ctxType,i){return this.getChild(i,ctxType)},ParserRuleContext.prototype.getTypedRuleContexts=function(ctxType){if(null===this.children)return[];for(var contexts=[],j=0;j<this.children.length;j++){var child=this.children[j];child instanceof ctxType&&contexts.push(child)}return contexts},ParserRuleContext.prototype.getChildCount=function(){return null===this.children?0:this.children.length},ParserRuleContext.prototype.getSourceInterval=function(){return null===this.start||null===this.stop?INVALID_INTERVAL:new Interval(this.start.tokenIndex,this.stop.tokenIndex)},RuleContext.EMPTY=new ParserRuleContext,(InterpreterRuleContext.prototype=Object.create(ParserRuleContext.prototype)).constructor=InterpreterRuleContext,exports.ParserRuleContext=ParserRuleContext},{"./IntervalSet":12,"./RuleContext":19,"./tree/Tree":50}],17:[function(require,module,exports){var RuleContext=require("./RuleContext").RuleContext,Hash=require("./Utils").Hash;function PredictionContext(cachedHashCode){this.cachedHashCode=cachedHashCode}function PredictionContextCache(){return this.cache={},this}function SingletonPredictionContext(parent,returnState){var hash,hashCode=0;null!==parent&&((hash=new Hash).update(parent,returnState),hashCode=hash.finish()),PredictionContext.call(this,hashCode),this.parentCtx=parent,this.returnState=returnState}function EmptyPredictionContext(){return SingletonPredictionContext.call(this,null,PredictionContext.EMPTY_RETURN_STATE),this}function ArrayPredictionContext(parents,returnStates){var h=new Hash;h.update(parents,returnStates);var hashCode=h.finish();return PredictionContext.call(this,hashCode),this.parents=parents,this.returnStates=returnStates,this}function merge(a,b,rootIsWildcard,mergeCache){if(a===b)return a;if(a instanceof SingletonPredictionContext&&b instanceof SingletonPredictionContext)return function(a,b,rootIsWildcard,mergeCache){if(null!==mergeCache){var previous=mergeCache.get(a,b);if(null!==previous)return previous;if(null!==(previous=mergeCache.get(b,a)))return previous}var rootMerge=function(a,b,rootIsWildcard){if(rootIsWildcard){if(a===PredictionContext.EMPTY)return PredictionContext.EMPTY;if(b===PredictionContext.EMPTY)return PredictionContext.EMPTY}else{if(a===PredictionContext.EMPTY&&b===PredictionContext.EMPTY)return PredictionContext.EMPTY;if(a===PredictionContext.EMPTY){var payloads=[b.returnState,PredictionContext.EMPTY_RETURN_STATE];return new ArrayPredictionContext([b.parentCtx,null],payloads)}if(b===PredictionContext.EMPTY){payloads=[a.returnState,PredictionContext.EMPTY_RETURN_STATE];return new ArrayPredictionContext([a.parentCtx,null],payloads)}}return null}(a,b,rootIsWildcard);if(null!==rootMerge)return null!==mergeCache&&mergeCache.set(a,b,rootMerge),rootMerge;{if(a.returnState===b.returnState){var parent=merge(a.parentCtx,b.parentCtx,rootIsWildcard,mergeCache);if(parent===a.parentCtx)return a;if(parent===b.parentCtx)return b;var spc=SingletonPredictionContext.create(parent,a.returnState);return null!==mergeCache&&mergeCache.set(a,b,spc),spc}var singleParent=null;if((a===b||null!==a.parentCtx&&a.parentCtx===b.parentCtx)&&(singleParent=a.parentCtx),null!==singleParent){var payloads=[a.returnState,b.returnState];a.returnState>b.returnState&&(payloads[0]=b.returnState,payloads[1]=a.returnState);var apc=new ArrayPredictionContext(parents=[singleParent,singleParent],payloads);return null!==mergeCache&&mergeCache.set(a,b,apc),apc}var payloads=[a.returnState,b.returnState],parents=[a.parentCtx,b.parentCtx];a.returnState>b.returnState&&(payloads[0]=b.returnState,payloads[1]=a.returnState,parents=[b.parentCtx,a.parentCtx]);var a_=new ArrayPredictionContext(parents,payloads);return null!==mergeCache&&mergeCache.set(a,b,a_),a_}}(a,b,rootIsWildcard,mergeCache);if(rootIsWildcard){if(a instanceof EmptyPredictionContext)return a;if(b instanceof EmptyPredictionContext)return b}return a instanceof SingletonPredictionContext&&(a=new ArrayPredictionContext([a.getParent()],[a.returnState])),b instanceof SingletonPredictionContext&&(b=new ArrayPredictionContext([b.getParent()],[b.returnState])),function(a,b,rootIsWildcard,mergeCache){if(null!==mergeCache){var previous=mergeCache.get(a,b);if(null!==previous)return previous;if(null!==(previous=mergeCache.get(b,a)))return previous}var i=0,j=0,k=0,mergedReturnStates=[],mergedParents=[];for(;i<a.returnStates.length&&j<b.returnStates.length;){var payload,ax_ax,mergedParent,a_parent=a.parents[i],b_parent=b.parents[j];a.returnStates[i]===b.returnStates[j]?(payload=a.returnStates[i],ax_ax=null!==a_parent&&null!==b_parent&&a_parent===b_parent,payload===PredictionContext.EMPTY_RETURN_STATE&&null===a_parent&&null===b_parent||ax_ax?mergedParents[k]=a_parent:(mergedParent=merge(a_parent,b_parent,rootIsWildcard,mergeCache),mergedParents[k]=mergedParent),mergedReturnStates[k]=payload,i+=1,j+=1):a.returnStates[i]<b.returnStates[j]?(mergedParents[k]=a_parent,mergedReturnStates[k]=a.returnStates[i],i+=1):(mergedParents[k]=b_parent,mergedReturnStates[k]=b.returnStates[j],j+=1),k+=1}if(i<a.returnStates.length)for(var p=i;p<a.returnStates.length;p++)mergedParents[k]=a.parents[p],mergedReturnStates[k]=a.returnStates[p],k+=1;else for(p=j;p<b.returnStates.length;p++)mergedParents[k]=b.parents[p],mergedReturnStates[k]=b.returnStates[p],k+=1;if(k<mergedParents.length){if(1===k){var a_=SingletonPredictionContext.create(mergedParents[0],mergedReturnStates[0]);return null!==mergeCache&&mergeCache.set(a,b,a_),a_}mergedParents=mergedParents.slice(0,k),mergedReturnStates=mergedReturnStates.slice(0,k)}var M=new ArrayPredictionContext(mergedParents,mergedReturnStates);if(M===a)return null!==mergeCache&&mergeCache.set(a,b,a),a;if(M===b)return null!==mergeCache&&mergeCache.set(a,b,b),b;(function(parents){for(var uniqueParents={},p=0;p<parents.length;p++){var parent=parents[p];parent in uniqueParents||(uniqueParents[parent]=parent)}for(var q=0;q<parents.length;q++)parents[q]=uniqueParents[parents[q]]})(mergedParents),null!==mergeCache&&mergeCache.set(a,b,M);return M}(a,b,rootIsWildcard,mergeCache)}PredictionContext.EMPTY=null,PredictionContext.EMPTY_RETURN_STATE=2147483647,PredictionContext.id=PredictionContext.globalNodeCount=1,PredictionContext.prototype.isEmpty=function(){return this===PredictionContext.EMPTY},PredictionContext.prototype.hasEmptyPath=function(){return this.getReturnState(this.length-1)===PredictionContext.EMPTY_RETURN_STATE},PredictionContext.prototype.hashCode=function(){return this.cachedHashCode},PredictionContext.prototype.updateHashCode=function(hash){hash.update(this.cachedHashCode)},PredictionContextCache.prototype.add=function(ctx){if(ctx===PredictionContext.EMPTY)return PredictionContext.EMPTY;var existing=this.cache[ctx]||null;return null!==existing?existing:this.cache[ctx]=ctx},PredictionContextCache.prototype.get=function(ctx){return this.cache[ctx]||null},Object.defineProperty(PredictionContextCache.prototype,"length",{get:function(){return this.cache.length}}),((SingletonPredictionContext.prototype=Object.create(PredictionContext.prototype)).contructor=SingletonPredictionContext).create=function(parent,returnState){return returnState===PredictionContext.EMPTY_RETURN_STATE&&null===parent?PredictionContext.EMPTY:new SingletonPredictionContext(parent,returnState)},Object.defineProperty(SingletonPredictionContext.prototype,"length",{get:function(){return 1}}),SingletonPredictionContext.prototype.getParent=function(index){return this.parentCtx},SingletonPredictionContext.prototype.getReturnState=function(index){return this.returnState},SingletonPredictionContext.prototype.equals=function(other){return this===other||other instanceof SingletonPredictionContext&&(this.hashCode()===other.hashCode()&&(this.returnState===other.returnState&&(null==this.parentCtx?null==other.parentCtx:this.parentCtx.equals(other.parentCtx))))},SingletonPredictionContext.prototype.toString=function(){var up=null===this.parentCtx?"":this.parentCtx.toString();return 0===up.length?this.returnState===PredictionContext.EMPTY_RETURN_STATE?"$":""+this.returnState:this.returnState+" "+up},((EmptyPredictionContext.prototype=Object.create(SingletonPredictionContext.prototype)).constructor=EmptyPredictionContext).prototype.isEmpty=function(){return!0},EmptyPredictionContext.prototype.getParent=function(index){return null},EmptyPredictionContext.prototype.getReturnState=function(index){return this.returnState},EmptyPredictionContext.prototype.equals=function(other){return this===other},EmptyPredictionContext.prototype.toString=function(){return"$"},PredictionContext.EMPTY=new EmptyPredictionContext,((ArrayPredictionContext.prototype=Object.create(PredictionContext.prototype)).constructor=ArrayPredictionContext).prototype.isEmpty=function(){return this.returnStates[0]===PredictionContext.EMPTY_RETURN_STATE},Object.defineProperty(ArrayPredictionContext.prototype,"length",{get:function(){return this.returnStates.length}}),ArrayPredictionContext.prototype.getParent=function(index){return this.parents[index]},ArrayPredictionContext.prototype.getReturnState=function(index){return this.returnStates[index]},ArrayPredictionContext.prototype.equals=function(other){return this===other||other instanceof ArrayPredictionContext&&(this.hashCode()===other.hashCode()&&(this.returnStates===other.returnStates&&this.parents===other.parents))},ArrayPredictionContext.prototype.toString=function(){if(this.isEmpty())return"[]";for(var s="[",i=0;i<this.returnStates.length;i++)0<i&&(s+=", "),this.returnStates[i]!==PredictionContext.EMPTY_RETURN_STATE?(s+=this.returnStates[i],null!==this.parents[i]?s=s+" "+this.parents[i]:s+="null"):s+="$";return s+"]"},exports.merge=merge,exports.PredictionContext=PredictionContext,exports.PredictionContextCache=PredictionContextCache,exports.SingletonPredictionContext=SingletonPredictionContext,exports.predictionContextFromRuleContext=function predictionContextFromRuleContext(atn,outerContext){if(null==outerContext&&(outerContext=RuleContext.EMPTY),null===outerContext.parentCtx||outerContext===RuleContext.EMPTY)return PredictionContext.EMPTY;var parent=predictionContextFromRuleContext(atn,outerContext.parentCtx),transition=atn.states[outerContext.invokingState].transitions[0];return SingletonPredictionContext.create(parent,transition.followState.stateNumber)},exports.getCachedPredictionContext=function getCachedPredictionContext(context,contextCache,visited){if(context.isEmpty())return context;var existing=visited[context]||null;if(null!==existing)return existing;if(null!==(existing=contextCache.get(context)))return visited[context]=existing;for(var changed=!1,parents=[],i=0;i<parents.length;i++){var parent=getCachedPredictionContext(context.getParent(i),contextCache,visited);if(changed||parent!==context.getParent(i)){if(!changed){parents=[];for(var j=0;j<context.length;j++)parents[j]=context.getParent(j);changed=!0}parents[i]=parent}}if(!changed)return contextCache.add(context),visited[context]=context;var updated=null,updated=0===parents.length?PredictionContext.EMPTY:1===parents.length?SingletonPredictionContext.create(parents[0],context.getReturnState(0)):new ArrayPredictionContext(parents,context.returnStates);return contextCache.add(updated),visited[updated]=updated,visited[context]=updated}},{"./RuleContext":19,"./Utils":21}],18:[function(require,module,exports){var Token=require("./Token").Token,ConsoleErrorListener=require("./error/ErrorListener").ConsoleErrorListener,ProxyErrorListener=require("./error/ErrorListener").ProxyErrorListener;function Recognizer(){return this._listeners=[ConsoleErrorListener.INSTANCE],this._interp=null,this._stateNumber=-1,this}Recognizer.tokenTypeMapCache={},Recognizer.ruleIndexMapCache={},Recognizer.prototype.checkVersion=function(toolVersion){"4.7.2"!==toolVersion&&console.log("ANTLR runtime and generated code versions disagree: 4.7.2!="+toolVersion)},Recognizer.prototype.addErrorListener=function(listener){this._listeners.push(listener)},Recognizer.prototype.removeErrorListeners=function(){this._listeners=[]},Recognizer.prototype.getTokenTypeMap=function(){var tokenNames=this.getTokenNames();if(null===tokenNames)throw"The current recognizer does not provide a list of token names.";var result=this.tokenTypeMapCache[tokenNames];return void 0===result&&((result=tokenNames.reduce(function(o,k,i){o[k]=i})).EOF=Token.EOF,this.tokenTypeMapCache[tokenNames]=result),result},Recognizer.prototype.getRuleIndexMap=function(){var ruleNames=this.ruleNames;if(null===ruleNames)throw"The current recognizer does not provide a list of rule names.";var result=this.ruleIndexMapCache[ruleNames];return void 0===result&&(result=ruleNames.reduce(function(o,k,i){o[k]=i}),this.ruleIndexMapCache[ruleNames]=result),result},Recognizer.prototype.getTokenType=function(tokenName){var ttype=this.getTokenTypeMap()[tokenName];return void 0!==ttype?ttype:Token.INVALID_TYPE},Recognizer.prototype.getErrorHeader=function(e){return"line "+e.getOffendingToken().line+":"+e.getOffendingToken().column},Recognizer.prototype.getTokenErrorDisplay=function(t){if(null===t)return"<no token>";var s=t.text;return null===s&&(s=t.type===Token.EOF?"<EOF>":"<"+t.type+">"),"'"+(s=s.replace("\n","\\n").replace("\r","\\r").replace("\t","\\t"))+"'"},Recognizer.prototype.getErrorListenerDispatch=function(){return new ProxyErrorListener(this._listeners)},Recognizer.prototype.sempred=function(localctx,ruleIndex,actionIndex){return!0},Recognizer.prototype.precpred=function(localctx,precedence){return!0},Object.defineProperty(Recognizer.prototype,"state",{get:function(){return this._stateNumber},set:function(state){this._stateNumber=state}}),exports.Recognizer=Recognizer},{"./Token":20,"./error/ErrorListener":43}],19:[function(require,module,exports){var RuleNode=require("./tree/Tree").RuleNode,INVALID_INTERVAL=require("./tree/Tree").INVALID_INTERVAL,INVALID_ALT_NUMBER=require("./atn/ATN").INVALID_ALT_NUMBER;function RuleContext(parent,invokingState){return RuleNode.call(this),this.parentCtx=parent||null,this.invokingState=invokingState||-1,this}((RuleContext.prototype=Object.create(RuleNode.prototype)).constructor=RuleContext).prototype.depth=function(){for(var n=0,p=this;null!==p;)p=p.parentCtx,n+=1;return n},RuleContext.prototype.isEmpty=function(){return-1===this.invokingState},RuleContext.prototype.getSourceInterval=function(){return INVALID_INTERVAL},RuleContext.prototype.getRuleContext=function(){return this},RuleContext.prototype.getPayload=function(){return this},RuleContext.prototype.getText=function(){return 0===this.getChildCount()?"":this.children.map(function(child){return child.getText()}).join("")},RuleContext.prototype.getAltNumber=function(){return INVALID_ALT_NUMBER},RuleContext.prototype.setAltNumber=function(altNumber){},RuleContext.prototype.getChild=function(i){return null},RuleContext.prototype.getChildCount=function(){return 0},RuleContext.prototype.accept=function(visitor){return visitor.visitChildren(this)},exports.RuleContext=RuleContext;var Trees=require("./tree/Trees").Trees;RuleContext.prototype.toStringTree=function(ruleNames,recog){return Trees.toStringTree(this,ruleNames,recog)},RuleContext.prototype.toString=function(ruleNames,stop){ruleNames=ruleNames||null,stop=stop||null;for(var ri,p=this,s="[";null!==p&&p!==stop;){null===ruleNames?p.isEmpty()||(s+=p.invokingState):s+=0<=(ri=p.ruleIndex)&&ri<ruleNames.length?ruleNames[ri]:""+ri,null===p.parentCtx||null===ruleNames&&p.parentCtx.isEmpty()||(s+=" "),p=p.parentCtx}return s+="]"}},{"./atn/ATN":22,"./tree/Tree":50,"./tree/Trees":51}],20:[function(require,module,exports){function Token(){return this.source=null,this.type=null,this.channel=null,this.start=null,this.stop=null,this.tokenIndex=null,this.line=null,this.column=null,this._text=null,this}function CommonToken(source,type,channel,start,stop){return Token.call(this),this.source=void 0!==source?source:CommonToken.EMPTY_SOURCE,this.type=void 0!==type?type:null,this.channel=void 0!==channel?channel:Token.DEFAULT_CHANNEL,this.start=void 0!==start?start:-1,this.stop=void 0!==stop?stop:-1,this.tokenIndex=-1,null!==this.source[0]?(this.line=source[0].line,this.column=source[0].column):this.column=-1,this}Token.INVALID_TYPE=0,Token.EPSILON=-2,Token.MIN_USER_TOKEN_TYPE=1,Token.EOF=-1,Token.DEFAULT_CHANNEL=0,Token.HIDDEN_CHANNEL=1,Object.defineProperty(Token.prototype,"text",{get:function(){return this._text},set:function(text){this._text=text}}),Token.prototype.getTokenSource=function(){return this.source[0]},Token.prototype.getInputStream=function(){return this.source[1]},((CommonToken.prototype=Object.create(Token.prototype)).constructor=CommonToken).EMPTY_SOURCE=[null,null],CommonToken.prototype.clone=function(){var t=new CommonToken(this.source,this.type,this.channel,this.start,this.stop);return t.tokenIndex=this.tokenIndex,t.line=this.line,t.column=this.column,t.text=this.text,t},Object.defineProperty(CommonToken.prototype,"text",{get:function(){if(null!==this._text)return this._text;var input=this.getInputStream();if(null===input)return null;var n=input.size;return this.start<n&&this.stop<n?input.getText(this.start,this.stop):"<EOF>"},set:function(text){this._text=text}}),CommonToken.prototype.toString=function(){var txt=null!==(txt=this.text)?txt.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"):"<no text>";return"[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+txt+"',<"+this.type+">"+(0<this.channel?",channel="+this.channel:"")+","+this.line+":"+this.column+"]"},exports.Token=Token,exports.CommonToken=CommonToken},{}],21:[function(require,module,exports){function arrayToString(a){return"["+a.join(", ")+"]"}function standardEqualsFunction(a,b){return a.equals(b)}function standardHashCodeFunction(a){return a.hashCode()}function Set(hashFunction,equalsFunction){return this.data={},this.hashFunction=hashFunction||standardHashCodeFunction,this.equalsFunction=equalsFunction||standardEqualsFunction,this}function BitSet(){return this.data=[],this}function Map(hashFunction,equalsFunction){return this.data={},this.hashFunction=hashFunction||standardHashCodeFunction,this.equalsFunction=equalsFunction||standardEqualsFunction,this}function AltDict(){return this.data={},this}function DoubleDict(){return this}function Hash(){return this.count=0,this.hash=0,this}String.prototype.seed=String.prototype.seed||Math.round(Math.random()*Math.pow(2,32)),String.prototype.hashCode=function(){for(var h1b,k1,key=this.toString(),remainder=3&key.length,bytes=key.length-remainder,h1=String.prototype.seed,c1=3432918353,c2=461845907,i=0;i<bytes;)k1=255&key.charCodeAt(i)|(255&key.charCodeAt(++i))<<8|(255&key.charCodeAt(++i))<<16|(255&key.charCodeAt(++i))<<24,++i,h1=27492+(65535&(h1b=5*(65535&(h1=(h1^=k1=(65535&(k1=(k1=(65535&k1)*c1+(((k1>>>16)*c1&65535)<<16)&4294967295)<<15|k1>>>17))*c2+(((k1>>>16)*c2&65535)<<16)&4294967295)<<13|h1>>>19))+((5*(h1>>>16)&65535)<<16)&4294967295))+((58964+(h1b>>>16)&65535)<<16);switch(k1=0,remainder){case 3:k1^=(255&key.charCodeAt(i+2))<<16;case 2:k1^=(255&key.charCodeAt(i+1))<<8;case 1:h1^=k1=(65535&(k1=(k1=(65535&(k1^=255&key.charCodeAt(i)))*c1+(((k1>>>16)*c1&65535)<<16)&4294967295)<<15|k1>>>17))*c2+(((k1>>>16)*c2&65535)<<16)&4294967295}return h1^=key.length,h1=2246822507*(65535&(h1^=h1>>>16))+((2246822507*(h1>>>16)&65535)<<16)&4294967295,h1=3266489909*(65535&(h1^=h1>>>13))+((3266489909*(h1>>>16)&65535)<<16)&4294967295,(h1^=h1>>>16)>>>0},Object.defineProperty(Set.prototype,"length",{get:function(){var l=0;for(var key in this.data)0===key.indexOf("hash_")&&(l+=this.data[key].length);return l}}),Set.prototype.add=function(value){var key="hash_"+this.hashFunction(value);if(key in this.data){for(var values=this.data[key],i=0;i<values.length;i++)if(this.equalsFunction(value,values[i]))return values[i];return values.push(value),value}return this.data[key]=[value],value},Set.prototype.contains=function(value){return null!=this.get(value)},Set.prototype.get=function(value){var key="hash_"+this.hashFunction(value);if(key in this.data)for(var values=this.data[key],i=0;i<values.length;i++)if(this.equalsFunction(value,values[i]))return values[i];return null},Set.prototype.values=function(){var l=[];for(var key in this.data)0===key.indexOf("hash_")&&(l=l.concat(this.data[key]));return l},Set.prototype.toString=function(){return arrayToString(this.values())},BitSet.prototype.add=function(value){this.data[value]=!0},BitSet.prototype.or=function(set){var bits=this;Object.keys(set.data).map(function(alt){bits.add(alt)})},BitSet.prototype.remove=function(value){delete this.data[value]},BitSet.prototype.contains=function(value){return!0===this.data[value]},BitSet.prototype.values=function(){return Object.keys(this.data)},BitSet.prototype.minValue=function(){return Math.min.apply(null,this.values())},BitSet.prototype.hashCode=function(){var hash=new Hash;return hash.update(this.values()),hash.finish()},BitSet.prototype.equals=function(other){return other instanceof BitSet&&this.hashCode()===other.hashCode()},Object.defineProperty(BitSet.prototype,"length",{get:function(){return this.values().length}}),BitSet.prototype.toString=function(){return"{"+this.values().join(", ")+"}"},Object.defineProperty(Map.prototype,"length",{get:function(){var l=0;for(var hashKey in this.data)0===hashKey.indexOf("hash_")&&(l+=this.data[hashKey].length);return l}}),Map.prototype.put=function(key,value){var hashKey="hash_"+this.hashFunction(key);if(hashKey in this.data){for(var entries=this.data[hashKey],i=0;i<entries.length;i++){var entry=entries[i];if(this.equalsFunction(key,entry.key)){var oldValue=entry.value;return entry.value=value,oldValue}}return entries.push({key:key,value:value}),value}return this.data[hashKey]=[{key:key,value:value}],value},Map.prototype.containsKey=function(key){var hashKey="hash_"+this.hashFunction(key);if(hashKey in this.data)for(var entries=this.data[hashKey],i=0;i<entries.length;i++){var entry=entries[i];if(this.equalsFunction(key,entry.key))return!0}return!1},Map.prototype.get=function(key){var hashKey="hash_"+this.hashFunction(key);if(hashKey in this.data)for(var entries=this.data[hashKey],i=0;i<entries.length;i++){var entry=entries[i];if(this.equalsFunction(key,entry.key))return entry.value}return null},Map.prototype.entries=function(){var l=[];for(var key in this.data)0===key.indexOf("hash_")&&(l=l.concat(this.data[key]));return l},Map.prototype.getKeys=function(){return this.entries().map(function(e){return e.key})},Map.prototype.getValues=function(){return this.entries().map(function(e){return e.value})},Map.prototype.toString=function(){return"["+this.entries().map(function(entry){return"{"+entry.key+":"+entry.value+"}"}).join(", ")+"]"},AltDict.prototype.get=function(key){return(key="k-"+key)in this.data?this.data[key]:null},AltDict.prototype.put=function(key,value){key="k-"+key,this.data[key]=value},AltDict.prototype.values=function(){var data=this.data;return Object.keys(this.data).map(function(key){return data[key]})},Hash.prototype.update=function(){for(var i=0;i<arguments.length;i++){var value=arguments[i];if(null!=value)if(Array.isArray(value))this.update.apply(value);else{var k=0;switch(typeof value){case"undefined":case"function":continue;case"number":case"boolean":k=value;break;case"string":k=value.hashCode();break;default:value.updateHashCode(this);continue}k=(k*=3432918353)<<15|k>>>17,k*=461845907,this.count=this.count+1;var hash=this.hash^k;hash=5*(hash=hash<<13|hash>>>19)+3864292196,this.hash=hash}}},Hash.prototype.finish=function(){var hash=this.hash^4*this.count;return hash^=hash>>>16,hash*=2246822507,hash^=hash>>>13,hash*=3266489909,hash^=hash>>>16},DoubleDict.prototype.get=function(a,b){var d=this[a]||null;return null!==d&&d[b]||null},DoubleDict.prototype.set=function(a,b,o){var d=this[a]||null;null===d&&(d={},this[a]=d),d[b]=o},exports.Hash=Hash,exports.Set=Set,exports.Map=Map,exports.BitSet=BitSet,exports.AltDict=AltDict,exports.DoubleDict=DoubleDict,exports.hashStuff=function(){var hash=new Hash;return hash.update.apply(arguments),hash.finish()},exports.escapeWhitespace=function(s,escapeSpaces){return s=s.replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r"),escapeSpaces&&(s=s.replace(/ /g,"\xb7")),s},exports.arrayToString=arrayToString,exports.titleCase=function(str){return str.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1)})},exports.equalArrays=function(a,b){if(!Array.isArray(a)||!Array.isArray(b))return!1;if(a==b)return!0;if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(a[i]!=b[i]&&!a[i].equals(b[i]))return!1;return!0}},{}],22:[function(require,module,exports){var LL1Analyzer=require("./../LL1Analyzer").LL1Analyzer,IntervalSet=require("./../IntervalSet").IntervalSet;function ATN(grammarType,maxTokenType){return this.grammarType=grammarType,this.maxTokenType=maxTokenType,this.states=[],this.decisionToState=[],this.ruleToStartState=[],this.ruleToStopState=null,this.modeNameToStartState={},this.ruleToTokenType=null,this.lexerActions=null,this.modeToStartState=[],this}ATN.prototype.nextTokensInContext=function(s,ctx){return new LL1Analyzer(this).LOOK(s,null,ctx)},ATN.prototype.nextTokensNoContext=function(s){return null!==s.nextTokenWithinRule||(s.nextTokenWithinRule=this.nextTokensInContext(s,null),s.nextTokenWithinRule.readOnly=!0),s.nextTokenWithinRule},ATN.prototype.nextTokens=function(s,ctx){return void 0===ctx?this.nextTokensNoContext(s):this.nextTokensInContext(s,ctx)},ATN.prototype.addState=function(state){null!==state&&(state.atn=this,state.stateNumber=this.states.length),this.states.push(state)},ATN.prototype.removeState=function(state){this.states[state.stateNumber]=null},ATN.prototype.defineDecisionState=function(s){return this.decisionToState.push(s),s.decision=this.decisionToState.length-1,s.decision},ATN.prototype.getDecisionState=function(decision){return 0===this.decisionToState.length?null:this.decisionToState[decision]};var Token=require("./../Token").Token;ATN.prototype.getExpectedTokens=function(stateNumber,ctx){if(stateNumber<0||stateNumber>=this.states.length)throw"Invalid state number.";var s=this.states[stateNumber];if(!(following=this.nextTokens(s)).contains(Token.EPSILON))return following;var expected=new IntervalSet;for(expected.addSet(following),expected.removeOne(Token.EPSILON);null!==ctx&&0<=ctx.invokingState&&following.contains(Token.EPSILON);){var rt=this.states[ctx.invokingState].transitions[0],following=this.nextTokens(rt.followState);expected.addSet(following),expected.removeOne(Token.EPSILON),ctx=ctx.parentCtx}return following.contains(Token.EPSILON)&&expected.addOne(Token.EOF),expected},ATN.INVALID_ALT_NUMBER=0,exports.ATN=ATN},{"./../IntervalSet":12,"./../LL1Analyzer":13,"./../Token":20}],23:[function(require,module,exports){var DecisionState=require("./ATNState").DecisionState,SemanticContext=require("./SemanticContext").SemanticContext,Hash=require("../Utils").Hash;function checkParams(params,isCfg){if(null===params){var result={state:null,alt:null,context:null,semanticContext:null};return isCfg&&(result.reachesIntoOuterContext=0),result}var props={};return props.state=params.state||null,props.alt=void 0===params.alt?null:params.alt,props.context=params.context||null,props.semanticContext=params.semanticContext||null,isCfg&&(props.reachesIntoOuterContext=params.reachesIntoOuterContext||0,props.precedenceFilterSuppressed=params.precedenceFilterSuppressed||!1),props}function ATNConfig(params,config){return this.checkContext(params,config),params=checkParams(params),config=checkParams(config,!0),this.state=null!==params.state?params.state:config.state,this.alt=null!==params.alt?params.alt:config.alt,this.context=null!==params.context?params.context:config.context,this.semanticContext=null!==params.semanticContext?params.semanticContext:null!==config.semanticContext?config.semanticContext:SemanticContext.NONE,this.reachesIntoOuterContext=config.reachesIntoOuterContext,this.precedenceFilterSuppressed=config.precedenceFilterSuppressed,this}function LexerATNConfig(params,config){ATNConfig.call(this,params,config);var lexerActionExecutor=params.lexerActionExecutor||null;return this.lexerActionExecutor=lexerActionExecutor||(null!==config?config.lexerActionExecutor:null),this.passedThroughNonGreedyDecision=null!==config&&this.checkNonGreedyDecision(config,this.state),this}ATNConfig.prototype.checkContext=function(params,config){null!==params.context&&void 0!==params.context||null!==config&&null!==config.context&&void 0!==config.context||(this.context=null)},ATNConfig.prototype.hashCode=function(){var hash=new Hash;return this.updateHashCode(hash),hash.finish()},ATNConfig.prototype.updateHashCode=function(hash){hash.update(this.state.stateNumber,this.alt,this.context,this.semanticContext)},ATNConfig.prototype.equals=function(other){return this===other||other instanceof ATNConfig&&(this.state.stateNumber===other.state.stateNumber&&this.alt===other.alt&&(null===this.context?null===other.context:this.context.equals(other.context))&&this.semanticContext.equals(other.semanticContext)&&this.precedenceFilterSuppressed===other.precedenceFilterSuppressed)},ATNConfig.prototype.hashCodeForConfigSet=function(){var hash=new Hash;return hash.update(this.state.stateNumber,this.alt,this.semanticContext),hash.finish()},ATNConfig.prototype.equalsForConfigSet=function(other){return this===other||other instanceof ATNConfig&&(this.state.stateNumber===other.state.stateNumber&&this.alt===other.alt&&this.semanticContext.equals(other.semanticContext))},ATNConfig.prototype.toString=function(){return"("+this.state+","+this.alt+(null!==this.context?",["+this.context.toString()+"]":"")+(this.semanticContext!==SemanticContext.NONE?","+this.semanticContext.toString():"")+(0<this.reachesIntoOuterContext?",up="+this.reachesIntoOuterContext:"")+")"},((LexerATNConfig.prototype=Object.create(ATNConfig.prototype)).constructor=LexerATNConfig).prototype.updateHashCode=function(hash){hash.update(this.state.stateNumber,this.alt,this.context,this.semanticContext,this.passedThroughNonGreedyDecision,this.lexerActionExecutor)},LexerATNConfig.prototype.equals=function(other){return this===other||other instanceof LexerATNConfig&&this.passedThroughNonGreedyDecision==other.passedThroughNonGreedyDecision&&(this.lexerActionExecutor?this.lexerActionExecutor.equals(other.lexerActionExecutor):!other.lexerActionExecutor)&&ATNConfig.prototype.equals.call(this,other)},LexerATNConfig.prototype.hashCodeForConfigSet=LexerATNConfig.prototype.hashCode,LexerATNConfig.prototype.equalsForConfigSet=LexerATNConfig.prototype.equals,LexerATNConfig.prototype.checkNonGreedyDecision=function(source,target){return source.passedThroughNonGreedyDecision||target instanceof DecisionState&&target.nonGreedy},exports.ATNConfig=ATNConfig,exports.LexerATNConfig=LexerATNConfig},{"../Utils":21,"./ATNState":28,"./SemanticContext":35}],24:[function(require,module,exports){var ATN=require("./ATN").ATN,Utils=require("./../Utils"),Hash=Utils.Hash,Set=Utils.Set,SemanticContext=require("./SemanticContext").SemanticContext,merge=require("./../PredictionContext").merge;function hashATNConfig(c){return c.hashCodeForConfigSet()}function equalATNConfigs(a,b){return a===b||null!==a&&null!==b&&a.equalsForConfigSet(b)}function ATNConfigSet(fullCtx){return this.configLookup=new Set(hashATNConfig,equalATNConfigs),this.fullCtx=void 0===fullCtx||fullCtx,this.readOnly=!1,this.configs=[],this.uniqueAlt=0,this.conflictingAlts=null,this.hasSemanticContext=!1,this.dipsIntoOuterContext=!1,this.cachedHashCode=-1,this}function OrderedATNConfigSet(){return ATNConfigSet.call(this),this.configLookup=new Set,this}ATNConfigSet.prototype.add=function(config,mergeCache){if(void 0===mergeCache&&(mergeCache=null),this.readOnly)throw"This set is readonly";config.semanticContext!==SemanticContext.NONE&&(this.hasSemanticContext=!0),0<config.reachesIntoOuterContext&&(this.dipsIntoOuterContext=!0);var existing=this.configLookup.add(config);if(existing===config)return this.cachedHashCode=-1,this.configs.push(config),!0;var rootIsWildcard=!this.fullCtx,merged=merge(existing.context,config.context,rootIsWildcard,mergeCache);return existing.reachesIntoOuterContext=Math.max(existing.reachesIntoOuterContext,config.reachesIntoOuterContext),config.precedenceFilterSuppressed&&(existing.precedenceFilterSuppressed=!0),existing.context=merged,!0},ATNConfigSet.prototype.getStates=function(){for(var states=new Set,i=0;i<this.configs.length;i++)states.add(this.configs[i].state);return states},ATNConfigSet.prototype.getPredicates=function(){for(var preds=[],i=0;i<this.configs.length;i++){var c=this.configs[i].semanticContext;c!==SemanticContext.NONE&&preds.push(c.semanticContext)}return preds},Object.defineProperty(ATNConfigSet.prototype,"items",{get:function(){return this.configs}}),ATNConfigSet.prototype.optimizeConfigs=function(interpreter){if(this.readOnly)throw"This set is readonly";if(0!==this.configLookup.length)for(var i=0;i<this.configs.length;i++){var config=this.configs[i];config.context=interpreter.getCachedContext(config.context)}},ATNConfigSet.prototype.addAll=function(coll){for(var i=0;i<coll.length;i++)this.add(coll[i]);return!1},ATNConfigSet.prototype.equals=function(other){return this===other||other instanceof ATNConfigSet&&Utils.equalArrays(this.configs,other.configs)&&this.fullCtx===other.fullCtx&&this.uniqueAlt===other.uniqueAlt&&this.conflictingAlts===other.conflictingAlts&&this.hasSemanticContext===other.hasSemanticContext&&this.dipsIntoOuterContext===other.dipsIntoOuterContext},ATNConfigSet.prototype.hashCode=function(){var hash=new Hash;return this.updateHashCode(hash),hash.finish()},ATNConfigSet.prototype.updateHashCode=function(hash){this.readOnly?(-1===this.cachedHashCode&&((hash=new Hash).update(this.configs),this.cachedHashCode=hash.finish()),hash.update(this.cachedHashCode)):hash.update(this.configs)},Object.defineProperty(ATNConfigSet.prototype,"length",{get:function(){return this.configs.length}}),ATNConfigSet.prototype.isEmpty=function(){return 0===this.configs.length},ATNConfigSet.prototype.contains=function(item){if(null===this.configLookup)throw"This method is not implemented for readonly sets.";return this.configLookup.contains(item)},ATNConfigSet.prototype.containsFast=function(item){if(null===this.configLookup)throw"This method is not implemented for readonly sets.";return this.configLookup.containsFast(item)},ATNConfigSet.prototype.clear=function(){if(this.readOnly)throw"This set is readonly";this.configs=[],this.cachedHashCode=-1,this.configLookup=new Set},ATNConfigSet.prototype.setReadonly=function(readOnly){(this.readOnly=readOnly)&&(this.configLookup=null)},ATNConfigSet.prototype.toString=function(){return Utils.arrayToString(this.configs)+(this.hasSemanticContext?",hasSemanticContext="+this.hasSemanticContext:"")+(this.uniqueAlt!==ATN.INVALID_ALT_NUMBER?",uniqueAlt="+this.uniqueAlt:"")+(null!==this.conflictingAlts?",conflictingAlts="+this.conflictingAlts:"")+(this.dipsIntoOuterContext?",dipsIntoOuterContext":"")},(OrderedATNConfigSet.prototype=Object.create(ATNConfigSet.prototype)).constructor=OrderedATNConfigSet,exports.ATNConfigSet=ATNConfigSet,exports.OrderedATNConfigSet=OrderedATNConfigSet},{"./../PredictionContext":17,"./../Utils":21,"./ATN":22,"./SemanticContext":35}],25:[function(require,module,exports){function ATNDeserializationOptions(copyFrom){return void 0===copyFrom&&(copyFrom=null),this.readOnly=!1,this.verifyATN=null===copyFrom||copyFrom.verifyATN,this.generateRuleBypassTransitions=null!==copyFrom&&copyFrom.generateRuleBypassTransitions,this}(ATNDeserializationOptions.defaultOptions=new ATNDeserializationOptions).readOnly=!0,exports.ATNDeserializationOptions=ATNDeserializationOptions},{}],26:[function(require,module,exports){var Token=require("./../Token").Token,ATN=require("./ATN").ATN,ATNType=require("./ATNType").ATNType,ATNStates=require("./ATNState"),ATNState=ATNStates.ATNState,BasicState=ATNStates.BasicState,DecisionState=ATNStates.DecisionState,BlockStartState=ATNStates.BlockStartState,BlockEndState=ATNStates.BlockEndState,LoopEndState=ATNStates.LoopEndState,RuleStartState=ATNStates.RuleStartState,RuleStopState=ATNStates.RuleStopState,TokensStartState=ATNStates.TokensStartState,PlusLoopbackState=ATNStates.PlusLoopbackState,StarLoopbackState=ATNStates.StarLoopbackState,StarLoopEntryState=ATNStates.StarLoopEntryState,PlusBlockStartState=ATNStates.PlusBlockStartState,StarBlockStartState=ATNStates.StarBlockStartState,BasicBlockStartState=ATNStates.BasicBlockStartState,Transitions=require("./Transition"),Transition=Transitions.Transition,AtomTransition=Transitions.AtomTransition,SetTransition=Transitions.SetTransition,NotSetTransition=Transitions.NotSetTransition,RuleTransition=Transitions.RuleTransition,RangeTransition=Transitions.RangeTransition,ActionTransition=Transitions.ActionTransition,EpsilonTransition=Transitions.EpsilonTransition,WildcardTransition=Transitions.WildcardTransition,PredicateTransition=Transitions.PredicateTransition,PrecedencePredicateTransition=Transitions.PrecedencePredicateTransition,IntervalSet=require("./../IntervalSet").IntervalSet,ATNDeserializationOptions=(require("./../IntervalSet").Interval,require("./ATNDeserializationOptions").ATNDeserializationOptions),LexerActions=require("./LexerAction"),LexerActionType=LexerActions.LexerActionType,LexerSkipAction=LexerActions.LexerSkipAction,LexerChannelAction=LexerActions.LexerChannelAction,LexerCustomAction=LexerActions.LexerCustomAction,LexerMoreAction=LexerActions.LexerMoreAction,LexerTypeAction=LexerActions.LexerTypeAction,LexerPushModeAction=LexerActions.LexerPushModeAction,LexerPopModeAction=LexerActions.LexerPopModeAction,LexerModeAction=LexerActions.LexerModeAction,ADDED_UNICODE_SMP="59627784-3BE5-417A-B9EB-8131A7286089",SUPPORTED_UUIDS=["AADB8D7E-AEEF-4415-AD2B-8204D6CF042E",ADDED_UNICODE_SMP];function initArray(length,value){var tmp=[];return tmp[length-1]=value,tmp.map(function(i){return value})}function ATNDeserializer(options){return null==options&&(options=ATNDeserializationOptions.defaultOptions),this.deserializationOptions=options,this.stateFactories=null,this.actionFactories=null,this}ATNDeserializer.prototype.isFeatureSupported=function(feature,actualUuid){var idx1=SUPPORTED_UUIDS.indexOf(feature);return!(idx1<0)&&idx1<=SUPPORTED_UUIDS.indexOf(actualUuid)},ATNDeserializer.prototype.deserialize=function(data){this.reset(data),this.checkVersion(),this.checkUUID();var atn=this.readATN();this.readStates(atn),this.readRules(atn),this.readModes(atn);var sets=[];return this.readSets(atn,sets,this.readInt.bind(this)),this.isFeatureSupported(ADDED_UNICODE_SMP,this.uuid)&&this.readSets(atn,sets,this.readInt32.bind(this)),this.readEdges(atn,sets),this.readDecisions(atn),this.readLexerActions(atn),this.markPrecedenceDecisions(atn),this.verifyATN(atn),this.deserializationOptions.generateRuleBypassTransitions&&atn.grammarType===ATNType.PARSER&&(this.generateRuleBypassTransitions(atn),this.verifyATN(atn)),atn},ATNDeserializer.prototype.reset=function(data){var temp=data.split("").map(function(c){var v=c.charCodeAt(0);return 1<v?v-2:v+65533});temp[0]=data.charCodeAt(0),this.data=temp,this.pos=0},ATNDeserializer.prototype.checkVersion=function(){var version=this.readInt();if(3!==version)throw"Could not deserialize ATN with version "+version+" (expected 3)."},ATNDeserializer.prototype.checkUUID=function(){var uuid=this.readUUID();if(SUPPORTED_UUIDS.indexOf(uuid)<0)throw"59627784-3BE5-417A-B9EB-8131A7286089";this.uuid=uuid},ATNDeserializer.prototype.readATN=function(){var grammarType=this.readInt(),maxTokenType=this.readInt();return new ATN(grammarType,maxTokenType)},ATNDeserializer.prototype.readStates=function(atn){for(var pair,stateNumber,loopBackStateNumbers=[],endStateNumbers=[],nstates=this.readInt(),i=0;i<nstates;i++){var ruleIndex,s,loopBackStateNumber,endStateNumber,stype=this.readInt();stype!==ATNState.INVALID_TYPE?(65535===(ruleIndex=this.readInt())&&(ruleIndex=-1),s=this.stateFactory(stype,ruleIndex),stype===ATNState.LOOP_END?(loopBackStateNumber=this.readInt(),loopBackStateNumbers.push([s,loopBackStateNumber])):s instanceof BlockStartState&&(endStateNumber=this.readInt(),endStateNumbers.push([s,endStateNumber])),atn.addState(s)):atn.addState(null)}for(j=0;j<loopBackStateNumbers.length;j++)(pair=loopBackStateNumbers[j])[0].loopBackState=atn.states[pair[1]];for(j=0;j<endStateNumbers.length;j++)(pair=endStateNumbers[j])[0].endState=atn.states[pair[1]];for(var numNonGreedyStates=this.readInt(),j=0;j<numNonGreedyStates;j++)stateNumber=this.readInt(),atn.states[stateNumber].nonGreedy=!0;var numPrecedenceStates=this.readInt();for(j=0;j<numPrecedenceStates;j++)stateNumber=this.readInt(),atn.states[stateNumber].isPrecedenceRule=!0},ATNDeserializer.prototype.readRules=function(atn){var i,nrules=this.readInt();for(atn.grammarType===ATNType.LEXER&&(atn.ruleToTokenType=initArray(nrules,0)),atn.ruleToStartState=initArray(nrules,0),i=0;i<nrules;i++){var tokenType,s=this.readInt(),startState=atn.states[s];atn.ruleToStartState[i]=startState,atn.grammarType===ATNType.LEXER&&(65535===(tokenType=this.readInt())&&(tokenType=Token.EOF),atn.ruleToTokenType[i]=tokenType)}for(atn.ruleToStopState=initArray(nrules,0),i=0;i<atn.states.length;i++){var state=atn.states[i];state instanceof RuleStopState&&(atn.ruleToStopState[state.ruleIndex]=state,atn.ruleToStartState[state.ruleIndex].stopState=state)}},ATNDeserializer.prototype.readModes=function(atn){for(var nmodes=this.readInt(),i=0;i<nmodes;i++){var s=this.readInt();atn.modeToStartState.push(atn.states[s])}},ATNDeserializer.prototype.readSets=function(atn,sets,readUnicode){for(var m=this.readInt(),i=0;i<m;i++){var iset=new IntervalSet;sets.push(iset);var n=this.readInt();0!==this.readInt()&&iset.addOne(-1);for(var j=0;j<n;j++){var i1=readUnicode(),i2=readUnicode();iset.addRange(i1,i2)}}},ATNDeserializer.prototype.readEdges=function(atn,sets){for(var j,state,target,nedges=this.readInt(),i=0;i<nedges;i++){var src=this.readInt(),trg=this.readInt(),ttype=this.readInt(),arg1=this.readInt(),arg2=this.readInt(),arg3=this.readInt(),trans=this.edgeFactory(atn,ttype,src,trg,arg1,arg2,arg3,sets);atn.states[src].addTransition(trans)}for(i=0;i<atn.states.length;i++)for(state=atn.states[i],j=0;j<state.transitions.length;j++){var outermostPrecedenceReturn,t=state.transitions[j];t instanceof RuleTransition&&(outermostPrecedenceReturn=-1,atn.ruleToStartState[t.target.ruleIndex].isPrecedenceRule&&0===t.precedence&&(outermostPrecedenceReturn=t.target.ruleIndex),trans=new EpsilonTransition(t.followState,outermostPrecedenceReturn),atn.ruleToStopState[t.target.ruleIndex].addTransition(trans))}for(i=0;i<atn.states.length;i++){if((state=atn.states[i])instanceof BlockStartState){if(null===state.endState)throw"IllegalState";if(null!==state.endState.startState)throw"IllegalState";state.endState.startState=state}if(state instanceof PlusLoopbackState)for(j=0;j<state.transitions.length;j++)(target=state.transitions[j].target)instanceof PlusBlockStartState&&(target.loopBackState=state);else if(state instanceof StarLoopbackState)for(j=0;j<state.transitions.length;j++)(target=state.transitions[j].target)instanceof StarLoopEntryState&&(target.loopBackState=state)}},ATNDeserializer.prototype.readDecisions=function(atn){for(var ndecisions=this.readInt(),i=0;i<ndecisions;i++){var s=this.readInt(),decState=atn.states[s];atn.decisionToState.push(decState),decState.decision=i}},ATNDeserializer.prototype.readLexerActions=function(atn){if(atn.grammarType===ATNType.LEXER){var count=this.readInt();atn.lexerActions=initArray(count,null);for(var i=0;i<count;i++){var actionType=this.readInt(),data1=this.readInt();65535===data1&&(data1=-1);var data2=this.readInt();65535===data2&&(data2=-1);var lexerAction=this.lexerActionFactory(actionType,data1,data2);atn.lexerActions[i]=lexerAction}}},ATNDeserializer.prototype.generateRuleBypassTransitions=function(atn){for(var count=atn.ruleToStartState.length,i=0;i<count;i++)atn.ruleToTokenType[i]=atn.maxTokenType+i+1;for(i=0;i<count;i++)this.generateRuleBypassTransition(atn,i)},ATNDeserializer.prototype.generateRuleBypassTransition=function(atn,idx){var i,state,bypassStart=new BasicBlockStartState;bypassStart.ruleIndex=idx,atn.addState(bypassStart);var bypassStop=new BlockEndState;bypassStop.ruleIndex=idx,atn.addState(bypassStop),bypassStart.endState=bypassStop,atn.defineDecisionState(bypassStart),bypassStop.startState=bypassStart;var excludeTransition=null,endState=null;if(atn.ruleToStartState[idx].isPrecedenceRule){for(endState=null,i=0;i<atn.states.length;i++)if(state=atn.states[i],this.stateIsEndStateFor(state,idx)){excludeTransition=(endState=state).loopBackState.transitions[0];break}if(null===excludeTransition)throw"Couldn't identify final state of the precedence rule prefix section."}else endState=atn.ruleToStopState[idx];for(i=0;i<atn.states.length;i++){state=atn.states[i];for(var j=0;j<state.transitions.length;j++){var transition=state.transitions[j];transition!==excludeTransition&&transition.target===endState&&(transition.target=bypassStop)}}for(var ruleToStartState=atn.ruleToStartState[idx],count=ruleToStartState.transitions.length;0<count;)bypassStart.addTransition(ruleToStartState.transitions[count-1]),ruleToStartState.transitions=ruleToStartState.transitions.slice(-1);atn.ruleToStartState[idx].addTransition(new EpsilonTransition(bypassStart)),bypassStop.addTransition(new EpsilonTransition(endState));var matchState=new BasicState;atn.addState(matchState),matchState.addTransition(new AtomTransition(bypassStop,atn.ruleToTokenType[idx])),bypassStart.addTransition(new EpsilonTransition(matchState))},ATNDeserializer.prototype.stateIsEndStateFor=function(state,idx){if(state.ruleIndex!==idx)return null;if(!(state instanceof StarLoopEntryState))return null;var maybeLoopEndState=state.transitions[state.transitions.length-1].target;return maybeLoopEndState instanceof LoopEndState&&maybeLoopEndState.epsilonOnlyTransitions&&maybeLoopEndState.transitions[0].target instanceof RuleStopState?state:null},ATNDeserializer.prototype.markPrecedenceDecisions=function(atn){for(var i=0;i<atn.states.length;i++){var maybeLoopEndState,state=atn.states[i];state instanceof StarLoopEntryState&&(!atn.ruleToStartState[state.ruleIndex].isPrecedenceRule||(maybeLoopEndState=state.transitions[state.transitions.length-1].target)instanceof LoopEndState&&maybeLoopEndState.epsilonOnlyTransitions&&maybeLoopEndState.transitions[0].target instanceof RuleStopState&&(state.isPrecedenceDecision=!0))}},ATNDeserializer.prototype.verifyATN=function(atn){if(this.deserializationOptions.verifyATN)for(var i=0;i<atn.states.length;i++){var state=atn.states[i];if(null!==state)if(this.checkCondition(state.epsilonOnlyTransitions||state.transitions.length<=1),state instanceof PlusBlockStartState)this.checkCondition(null!==state.loopBackState);else if(state instanceof StarLoopEntryState)if(this.checkCondition(null!==state.loopBackState),this.checkCondition(2===state.transitions.length),state.transitions[0].target instanceof StarBlockStartState)this.checkCondition(state.transitions[1].target instanceof LoopEndState),this.checkCondition(!state.nonGreedy);else{if(!(state.transitions[0].target instanceof LoopEndState))throw"IllegalState";this.checkCondition(state.transitions[1].target instanceof StarBlockStartState),this.checkCondition(state.nonGreedy)}else state instanceof StarLoopbackState?(this.checkCondition(1===state.transitions.length),this.checkCondition(state.transitions[0].target instanceof StarLoopEntryState)):state instanceof LoopEndState?this.checkCondition(null!==state.loopBackState):state instanceof RuleStartState?this.checkCondition(null!==state.stopState):state instanceof BlockStartState?this.checkCondition(null!==state.endState):state instanceof BlockEndState?this.checkCondition(null!==state.startState):state instanceof DecisionState?this.checkCondition(state.transitions.length<=1||0<=state.decision):this.checkCondition(state.transitions.length<=1||state instanceof RuleStopState)}},ATNDeserializer.prototype.checkCondition=function(condition,message){if(!condition)throw null==message&&(message="IllegalState"),message},ATNDeserializer.prototype.readInt=function(){return this.data[this.pos++]},ATNDeserializer.prototype.readInt32=function(){return this.readInt()|this.readInt()<<16},ATNDeserializer.prototype.readLong=function(){return 4294967295&this.readInt32()|this.readInt32()<<32};var byteToHex=function(){for(var bth=[],i=0;i<256;i++)bth[i]=(i+256).toString(16).substr(1).toUpperCase();return bth}();ATNDeserializer.prototype.readUUID=function(){for(var bb=[],i=7;0<=i;i--){var int=this.readInt();bb[2*i+1]=255&int,bb[2*i]=int>>8&255}return byteToHex[bb[0]]+byteToHex[bb[1]]+byteToHex[bb[2]]+byteToHex[bb[3]]+"-"+byteToHex[bb[4]]+byteToHex[bb[5]]+"-"+byteToHex[bb[6]]+byteToHex[bb[7]]+"-"+byteToHex[bb[8]]+byteToHex[bb[9]]+"-"+byteToHex[bb[10]]+byteToHex[bb[11]]+byteToHex[bb[12]]+byteToHex[bb[13]]+byteToHex[bb[14]]+byteToHex[bb[15]]},ATNDeserializer.prototype.edgeFactory=function(atn,type,src,trg,arg1,arg2,arg3,sets){var target=atn.states[trg];switch(type){case Transition.EPSILON:return new EpsilonTransition(target);case Transition.RANGE:return new RangeTransition(target,0!==arg3?Token.EOF:arg1,arg2);case Transition.RULE:return new RuleTransition(atn.states[arg1],arg2,arg3,target);case Transition.PREDICATE:return new PredicateTransition(target,arg1,arg2,0!==arg3);case Transition.PRECEDENCE:return new PrecedencePredicateTransition(target,arg1);case Transition.ATOM:return new AtomTransition(target,0!==arg3?Token.EOF:arg1);case Transition.ACTION:return new ActionTransition(target,arg1,arg2,0!==arg3);case Transition.SET:return new SetTransition(target,sets[arg1]);case Transition.NOT_SET:return new NotSetTransition(target,sets[arg1]);case Transition.WILDCARD:return new WildcardTransition(target);default:throw"The specified transition type: "+type+" is not valid."}},ATNDeserializer.prototype.stateFactory=function(type,ruleIndex){var sf;if(null===this.stateFactories&&((sf=[])[ATNState.INVALID_TYPE]=null,sf[ATNState.BASIC]=function(){return new BasicState},sf[ATNState.RULE_START]=function(){return new RuleStartState},sf[ATNState.BLOCK_START]=function(){return new BasicBlockStartState},sf[ATNState.PLUS_BLOCK_START]=function(){return new PlusBlockStartState},sf[ATNState.STAR_BLOCK_START]=function(){return new StarBlockStartState},sf[ATNState.TOKEN_START]=function(){return new TokensStartState},sf[ATNState.RULE_STOP]=function(){return new RuleStopState},sf[ATNState.BLOCK_END]=function(){return new BlockEndState},sf[ATNState.STAR_LOOP_BACK]=function(){return new StarLoopbackState},sf[ATNState.STAR_LOOP_ENTRY]=function(){return new StarLoopEntryState},sf[ATNState.PLUS_LOOP_BACK]=function(){return new PlusLoopbackState},sf[ATNState.LOOP_END]=function(){return new LoopEndState},this.stateFactories=sf),type>this.stateFactories.length||null===this.stateFactories[type])throw"The specified state type "+type+" is not valid.";var s=this.stateFactories[type]();if(null!==s)return s.ruleIndex=ruleIndex,s},ATNDeserializer.prototype.lexerActionFactory=function(type,data1,data2){var af;if(null===this.actionFactories&&((af=[])[LexerActionType.CHANNEL]=function(data1,data2){return new LexerChannelAction(data1)},af[LexerActionType.CUSTOM]=function(data1,data2){return new LexerCustomAction(data1,data2)},af[LexerActionType.MODE]=function(data1,data2){return new LexerModeAction(data1)},af[LexerActionType.MORE]=function(data1,data2){return LexerMoreAction.INSTANCE},af[LexerActionType.POP_MODE]=function(data1,data2){return LexerPopModeAction.INSTANCE},af[LexerActionType.PUSH_MODE]=function(data1,data2){return new LexerPushModeAction(data1)},af[LexerActionType.SKIP]=function(data1,data2){return LexerSkipAction.INSTANCE},af[LexerActionType.TYPE]=function(data1,data2){return new LexerTypeAction(data1)},this.actionFactories=af),type>this.actionFactories.length||null===this.actionFactories[type])throw"The specified lexer action type "+type+" is not valid.";return this.actionFactories[type](data1,data2)},exports.ATNDeserializer=ATNDeserializer},{"./../IntervalSet":12,"./../Token":20,"./ATN":22,"./ATNDeserializationOptions":25,"./ATNState":28,"./ATNType":29,"./LexerAction":31,"./Transition":36}],27:[function(require,module,exports){var DFAState=require("./../dfa/DFAState").DFAState,ATNConfigSet=require("./ATNConfigSet").ATNConfigSet,getCachedPredictionContext=require("./../PredictionContext").getCachedPredictionContext;function ATNSimulator(atn,sharedContextCache){return this.atn=atn,this.sharedContextCache=sharedContextCache,this}ATNSimulator.ERROR=new DFAState(2147483647,new ATNConfigSet),ATNSimulator.prototype.getCachedContext=function(context){if(null===this.sharedContextCache)return context;return getCachedPredictionContext(context,this.sharedContextCache,{})},exports.ATNSimulator=ATNSimulator},{"./../PredictionContext":17,"./../dfa/DFAState":40,"./ATNConfigSet":24}],28:[function(require,module,exports){function ATNState(){return this.atn=null,this.stateNumber=ATNState.INVALID_STATE_NUMBER,this.stateType=null,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.nextTokenWithinRule=null,this}function BasicState(){return ATNState.call(this),this.stateType=ATNState.BASIC,this}function DecisionState(){return ATNState.call(this),this.decision=-1,this.nonGreedy=!1,this}function BlockStartState(){return DecisionState.call(this),this.endState=null,this}function BasicBlockStartState(){return BlockStartState.call(this),this.stateType=ATNState.BLOCK_START,this}function BlockEndState(){return ATNState.call(this),this.stateType=ATNState.BLOCK_END,this.startState=null,this}function RuleStopState(){return ATNState.call(this),this.stateType=ATNState.RULE_STOP,this}function RuleStartState(){return ATNState.call(this),this.stateType=ATNState.RULE_START,this.stopState=null,this.isPrecedenceRule=!1,this}function PlusLoopbackState(){return DecisionState.call(this),this.stateType=ATNState.PLUS_LOOP_BACK,this}function PlusBlockStartState(){return BlockStartState.call(this),this.stateType=ATNState.PLUS_BLOCK_START,this.loopBackState=null,this}function StarBlockStartState(){return BlockStartState.call(this),this.stateType=ATNState.STAR_BLOCK_START,this}function StarLoopbackState(){return ATNState.call(this),this.stateType=ATNState.STAR_LOOP_BACK,this}function StarLoopEntryState(){return DecisionState.call(this),this.stateType=ATNState.STAR_LOOP_ENTRY,this.loopBackState=null,this.isPrecedenceDecision=null,this}function LoopEndState(){return ATNState.call(this),this.stateType=ATNState.LOOP_END,this.loopBackState=null,this}function TokensStartState(){return DecisionState.call(this),this.stateType=ATNState.TOKEN_START,this}ATNState.INVALID_TYPE=0,ATNState.BASIC=1,ATNState.RULE_START=2,ATNState.BLOCK_START=3,ATNState.PLUS_BLOCK_START=4,ATNState.STAR_BLOCK_START=5,ATNState.TOKEN_START=6,ATNState.RULE_STOP=7,ATNState.BLOCK_END=8,ATNState.STAR_LOOP_BACK=9,ATNState.STAR_LOOP_ENTRY=10,ATNState.PLUS_LOOP_BACK=11,ATNState.LOOP_END=12,ATNState.serializationNames=["INVALID","BASIC","RULE_START","BLOCK_START","PLUS_BLOCK_START","STAR_BLOCK_START","TOKEN_START","RULE_STOP","BLOCK_END","STAR_LOOP_BACK","STAR_LOOP_ENTRY","PLUS_LOOP_BACK","LOOP_END"],ATNState.INVALID_STATE_NUMBER=-1,ATNState.prototype.toString=function(){return this.stateNumber},ATNState.prototype.equals=function(other){return other instanceof ATNState&&this.stateNumber===other.stateNumber},ATNState.prototype.isNonGreedyExitState=function(){return!1},ATNState.prototype.addTransition=function(trans,index){void 0===index&&(index=-1),0===this.transitions.length?this.epsilonOnlyTransitions=trans.isEpsilon:this.epsilonOnlyTransitions!==trans.isEpsilon&&(this.epsilonOnlyTransitions=!1),-1===index?this.transitions.push(trans):this.transitions.splice(index,1,trans)},(BasicState.prototype=Object.create(ATNState.prototype)).constructor=BasicState,(DecisionState.prototype=Object.create(ATNState.prototype)).constructor=DecisionState,(BlockStartState.prototype=Object.create(DecisionState.prototype)).constructor=BlockStartState,(BasicBlockStartState.prototype=Object.create(BlockStartState.prototype)).constructor=BasicBlockStartState,(BlockEndState.prototype=Object.create(ATNState.prototype)).constructor=BlockEndState,(RuleStopState.prototype=Object.create(ATNState.prototype)).constructor=RuleStopState,(RuleStartState.prototype=Object.create(ATNState.prototype)).constructor=RuleStartState,(PlusLoopbackState.prototype=Object.create(DecisionState.prototype)).constructor=PlusLoopbackState,(PlusBlockStartState.prototype=Object.create(BlockStartState.prototype)).constructor=PlusBlockStartState,(StarBlockStartState.prototype=Object.create(BlockStartState.prototype)).constructor=StarBlockStartState,(StarLoopbackState.prototype=Object.create(ATNState.prototype)).constructor=StarLoopbackState,(StarLoopEntryState.prototype=Object.create(DecisionState.prototype)).constructor=StarLoopEntryState,(LoopEndState.prototype=Object.create(ATNState.prototype)).constructor=LoopEndState,(TokensStartState.prototype=Object.create(DecisionState.prototype)).constructor=TokensStartState,exports.ATNState=ATNState,exports.BasicState=BasicState,exports.DecisionState=DecisionState,exports.BlockStartState=BlockStartState,exports.BlockEndState=BlockEndState,exports.LoopEndState=LoopEndState,exports.RuleStartState=RuleStartState,exports.RuleStopState=RuleStopState,exports.TokensStartState=TokensStartState,exports.PlusLoopbackState=PlusLoopbackState,exports.StarLoopbackState=StarLoopbackState,exports.StarLoopEntryState=StarLoopEntryState,exports.PlusBlockStartState=PlusBlockStartState,exports.StarBlockStartState=StarBlockStartState,exports.BasicBlockStartState=BasicBlockStartState},{}],29:[function(require,module,exports){function ATNType(){}ATNType.LEXER=0,ATNType.PARSER=1,exports.ATNType=ATNType},{}],30:[function(require,module,exports){var Token=require("./../Token").Token,Lexer=require("./../Lexer").Lexer,ATN=require("./ATN").ATN,ATNSimulator=require("./ATNSimulator").ATNSimulator,DFAState=require("./../dfa/DFAState").DFAState,OrderedATNConfigSet=(require("./ATNConfigSet").ATNConfigSet,require("./ATNConfigSet").OrderedATNConfigSet),PredictionContext=require("./../PredictionContext").PredictionContext,SingletonPredictionContext=require("./../PredictionContext").SingletonPredictionContext,RuleStopState=require("./ATNState").RuleStopState,LexerATNConfig=require("./ATNConfig").LexerATNConfig,Transition=require("./Transition").Transition,LexerActionExecutor=require("./LexerActionExecutor").LexerActionExecutor,LexerNoViableAltException=require("./../error/Errors").LexerNoViableAltException;function resetSimState(sim){sim.index=-1,sim.line=0,sim.column=-1,sim.dfaState=null}function SimState(){return resetSimState(this),this}function LexerATNSimulator(recog,atn,decisionToDFA,sharedContextCache){return ATNSimulator.call(this,atn,sharedContextCache),this.decisionToDFA=decisionToDFA,this.recog=recog,this.startIndex=-1,this.line=1,this.column=0,this.mode=Lexer.DEFAULT_MODE,this.prevAccept=new SimState,this}SimState.prototype.reset=function(){resetSimState(this)},((LexerATNSimulator.prototype=Object.create(ATNSimulator.prototype)).constructor=LexerATNSimulator).debug=!1,LexerATNSimulator.dfa_debug=!1,LexerATNSimulator.MIN_DFA_EDGE=0,LexerATNSimulator.MAX_DFA_EDGE=127,LexerATNSimulator.match_calls=0,LexerATNSimulator.prototype.copyState=function(simulator){this.column=simulator.column,this.line=simulator.line,this.mode=simulator.mode,this.startIndex=simulator.startIndex},LexerATNSimulator.prototype.match=function(input,mode){this.match_calls+=1,this.mode=mode;var mark=input.mark();try{this.startIndex=input.index,this.prevAccept.reset();var dfa=this.decisionToDFA[mode];return null===dfa.s0?this.matchATN(input):this.execATN(input,dfa.s0)}finally{input.release(mark)}},LexerATNSimulator.prototype.reset=function(){this.prevAccept.reset(),this.startIndex=-1,this.line=1,this.column=0,this.mode=Lexer.DEFAULT_MODE},LexerATNSimulator.prototype.matchATN=function(input){var startState=this.atn.modeToStartState[this.mode];LexerATNSimulator.debug&&console.log("matchATN mode "+this.mode+" start: "+startState);var old_mode=this.mode,s0_closure=this.computeStartState(input,startState),suppressEdge=s0_closure.hasSemanticContext;s0_closure.hasSemanticContext=!1;var next=this.addDFAState(s0_closure);suppressEdge||(this.decisionToDFA[this.mode].s0=next);var predict=this.execATN(input,next);return LexerATNSimulator.debug&&console.log("DFA after matchATN: "+this.decisionToDFA[old_mode].toLexerString()),predict},LexerATNSimulator.prototype.execATN=function(input,ds0){LexerATNSimulator.debug&&console.log("start state closure="+ds0.configs),ds0.isAcceptState&&this.captureSimState(this.prevAccept,input,ds0);for(var t=input.LA(1),s=ds0;;){LexerATNSimulator.debug&&console.log("execATN loop starting closure: "+s.configs);var target=this.getExistingTargetState(s,t);if(null===target&&(target=this.computeTargetState(input,s,t)),target===ATNSimulator.ERROR)break;if(t!==Token.EOF&&this.consume(input),target.isAcceptState&&(this.captureSimState(this.prevAccept,input,target),t===Token.EOF))break;t=input.LA(1),s=target}return this.failOrAccept(this.prevAccept,input,s.configs,t)},LexerATNSimulator.prototype.getExistingTargetState=function(s,t){if(null===s.edges||t<LexerATNSimulator.MIN_DFA_EDGE||LexerATNSimulator.MAX_DFA_EDGE<t)return null;var target=s.edges[t-LexerATNSimulator.MIN_DFA_EDGE];return void 0===target&&(target=null),LexerATNSimulator.debug&&null!==target&&console.log("reuse state "+s.stateNumber+" edge to "+target.stateNumber),target},LexerATNSimulator.prototype.computeTargetState=function(input,s,t){var reach=new OrderedATNConfigSet;return this.getReachableConfigSet(input,s.configs,reach,t),0===reach.items.length?(reach.hasSemanticContext||this.addDFAEdge(s,t,ATNSimulator.ERROR),ATNSimulator.ERROR):this.addDFAEdge(s,t,null,reach)},LexerATNSimulator.prototype.failOrAccept=function(prevAccept,input,reach,t){if(null!==this.prevAccept.dfaState){var lexerActionExecutor=prevAccept.dfaState.lexerActionExecutor;return this.accept(input,lexerActionExecutor,this.startIndex,prevAccept.index,prevAccept.line,prevAccept.column),prevAccept.dfaState.prediction}if(t===Token.EOF&&input.index===this.startIndex)return Token.EOF;throw new LexerNoViableAltException(this.recog,input,this.startIndex,reach)},LexerATNSimulator.prototype.getReachableConfigSet=function(input,closure,reach,t){for(var skipAlt=ATN.INVALID_ALT_NUMBER,i=0;i<closure.items.length;i++){var cfg=closure.items[i],currentAltReachedAcceptState=cfg.alt===skipAlt;if(!currentAltReachedAcceptState||!cfg.passedThroughNonGreedyDecision){LexerATNSimulator.debug&&console.log("testing %s at %s\n",this.getTokenName(t),cfg.toString(this.recog,!0));for(var j=0;j<cfg.state.transitions.length;j++){var lexerActionExecutor,treatEofAsEpsilon,config,trans=cfg.state.transitions[j],target=this.getReachableTarget(trans,t);null!==target&&(null!==(lexerActionExecutor=cfg.lexerActionExecutor)&&(lexerActionExecutor=lexerActionExecutor.fixOffsetBeforeMatch(input.index-this.startIndex)),treatEofAsEpsilon=t===Token.EOF,config=new LexerATNConfig({state:target,lexerActionExecutor:lexerActionExecutor},cfg),this.closure(input,config,reach,currentAltReachedAcceptState,!0,treatEofAsEpsilon)&&(skipAlt=cfg.alt))}}}},LexerATNSimulator.prototype.accept=function(input,lexerActionExecutor,startIndex,index,line,charPos){LexerATNSimulator.debug&&console.log("ACTION %s\n",lexerActionExecutor),input.seek(index),this.line=line,this.column=charPos,null!==lexerActionExecutor&&null!==this.recog&&lexerActionExecutor.execute(this.recog,input,startIndex)},LexerATNSimulator.prototype.getReachableTarget=function(trans,t){return trans.matches(t,0,Lexer.MAX_CHAR_VALUE)?trans.target:null},LexerATNSimulator.prototype.computeStartState=function(input,p){for(var initialContext=PredictionContext.EMPTY,configs=new OrderedATNConfigSet,i=0;i<p.transitions.length;i++){var target=p.transitions[i].target,cfg=new LexerATNConfig({state:target,alt:i+1,context:initialContext},null);this.closure(input,cfg,configs,!1,!1,!1)}return configs},LexerATNSimulator.prototype.closure=function(input,config,configs,currentAltReachedAcceptState,speculative,treatEofAsEpsilon){var cfg=null;if(LexerATNSimulator.debug&&console.log("closure("+config.toString(this.recog,!0)+")"),config.state instanceof RuleStopState){if(LexerATNSimulator.debug&&(null!==this.recog?console.log("closure at %s rule stop %s\n",this.recog.ruleNames[config.state.ruleIndex],config):console.log("closure at rule stop %s\n",config)),null===config.context||config.context.hasEmptyPath()){if(null===config.context||config.context.isEmpty())return configs.add(config),!0;configs.add(new LexerATNConfig({state:config.state,context:PredictionContext.EMPTY},config)),currentAltReachedAcceptState=!0}if(null!==config.context&&!config.context.isEmpty())for(var newContext,returnState,i=0;i<config.context.length;i++){config.context.getReturnState(i)!==PredictionContext.EMPTY_RETURN_STATE&&(newContext=config.context.getParent(i),returnState=this.atn.states[config.context.getReturnState(i)],cfg=new LexerATNConfig({state:returnState,context:newContext},config),currentAltReachedAcceptState=this.closure(input,cfg,configs,currentAltReachedAcceptState,speculative,treatEofAsEpsilon))}return currentAltReachedAcceptState}config.state.epsilonOnlyTransitions||currentAltReachedAcceptState&&config.passedThroughNonGreedyDecision||configs.add(config);for(var j=0;j<config.state.transitions.length;j++){var trans=config.state.transitions[j];null!==(cfg=this.getEpsilonTarget(input,config,trans,configs,speculative,treatEofAsEpsilon))&&(currentAltReachedAcceptState=this.closure(input,cfg,configs,currentAltReachedAcceptState,speculative,treatEofAsEpsilon))}return currentAltReachedAcceptState},LexerATNSimulator.prototype.getEpsilonTarget=function(input,config,trans,configs,speculative,treatEofAsEpsilon){var lexerActionExecutor,cfg=null;if(trans.serializationType===Transition.RULE)var newContext=SingletonPredictionContext.create(config.context,trans.followState.stateNumber),cfg=new LexerATNConfig({state:trans.target,context:newContext},config);else{if(trans.serializationType===Transition.PRECEDENCE)throw"Precedence predicates are not supported in lexers.";trans.serializationType===Transition.PREDICATE?(LexerATNSimulator.debug&&console.log("EVAL rule "+trans.ruleIndex+":"+trans.predIndex),configs.hasSemanticContext=!0,this.evaluatePredicate(input,trans.ruleIndex,trans.predIndex,speculative)&&(cfg=new LexerATNConfig({state:trans.target},config))):trans.serializationType===Transition.ACTION?cfg=null===config.context||config.context.hasEmptyPath()?(lexerActionExecutor=LexerActionExecutor.append(config.lexerActionExecutor,this.atn.lexerActions[trans.actionIndex]),new LexerATNConfig({state:trans.target,lexerActionExecutor:lexerActionExecutor},config)):new LexerATNConfig({state:trans.target},config):trans.serializationType===Transition.EPSILON?cfg=new LexerATNConfig({state:trans.target},config):trans.serializationType!==Transition.ATOM&&trans.serializationType!==Transition.RANGE&&trans.serializationType!==Transition.SET||treatEofAsEpsilon&&trans.matches(Token.EOF,0,Lexer.MAX_CHAR_VALUE)&&(cfg=new LexerATNConfig({state:trans.target},config))}return cfg},LexerATNSimulator.prototype.evaluatePredicate=function(input,ruleIndex,predIndex,speculative){if(null===this.recog)return!0;if(!speculative)return this.recog.sempred(null,ruleIndex,predIndex);var savedcolumn=this.column,savedLine=this.line,index=input.index,marker=input.mark();try{return this.consume(input),this.recog.sempred(null,ruleIndex,predIndex)}finally{this.column=savedcolumn,this.line=savedLine,input.seek(index),input.release(marker)}},LexerATNSimulator.prototype.captureSimState=function(settings,input,dfaState){settings.index=input.index,settings.line=this.line,settings.column=this.column,settings.dfaState=dfaState},LexerATNSimulator.prototype.addDFAEdge=function(from_,tk,to,cfgs){if(void 0===to&&(to=null),void 0===cfgs&&(cfgs=null),null===to&&null!==cfgs){var suppressEdge=cfgs.hasSemanticContext;if(cfgs.hasSemanticContext=!1,to=this.addDFAState(cfgs),suppressEdge)return to}return tk<LexerATNSimulator.MIN_DFA_EDGE||LexerATNSimulator.MAX_DFA_EDGE<tk?to:(LexerATNSimulator.debug&&console.log("EDGE "+from_+" -> "+to+" upon "+tk),null===from_.edges&&(from_.edges=[]),from_.edges[tk-LexerATNSimulator.MIN_DFA_EDGE]=to)},LexerATNSimulator.prototype.addDFAState=function(configs){for(var proposed=new DFAState(null,configs),firstConfigWithRuleStopState=null,i=0;i<configs.items.length;i++){var cfg=configs.items[i];if(cfg.state instanceof RuleStopState){firstConfigWithRuleStopState=cfg;break}}null!==firstConfigWithRuleStopState&&(proposed.isAcceptState=!0,proposed.lexerActionExecutor=firstConfigWithRuleStopState.lexerActionExecutor,proposed.prediction=this.atn.ruleToTokenType[firstConfigWithRuleStopState.state.ruleIndex]);var dfa=this.decisionToDFA[this.mode],existing=dfa.states.get(proposed);if(null!==existing)return existing;var newState=proposed;return newState.stateNumber=dfa.states.length,configs.setReadonly(!0),newState.configs=configs,dfa.states.add(newState),newState},LexerATNSimulator.prototype.getDFA=function(mode){return this.decisionToDFA[mode]},LexerATNSimulator.prototype.getText=function(input){return input.getText(this.startIndex,input.index-1)},LexerATNSimulator.prototype.consume=function(input){input.LA(1)==="\n".charCodeAt(0)?(this.line+=1,this.column=0):this.column+=1,input.consume()},LexerATNSimulator.prototype.getTokenName=function(tt){return-1===tt?"EOF":"'"+String.fromCharCode(tt)+"'"},exports.LexerATNSimulator=LexerATNSimulator},{"./../Lexer":14,"./../PredictionContext":17,"./../Token":20,"./../dfa/DFAState":40,"./../error/Errors":45,"./ATN":22,"./ATNConfig":23,"./ATNConfigSet":24,"./ATNSimulator":27,"./ATNState":28,"./LexerActionExecutor":32,"./Transition":36}],31:[function(require,module,exports){function LexerActionType(){}function LexerAction(action){return this.actionType=action,this.isPositionDependent=!1,this}function LexerSkipAction(){return LexerAction.call(this,LexerActionType.SKIP),this}function LexerTypeAction(type){return LexerAction.call(this,LexerActionType.TYPE),this.type=type,this}function LexerPushModeAction(mode){return LexerAction.call(this,LexerActionType.PUSH_MODE),this.mode=mode,this}function LexerPopModeAction(){return LexerAction.call(this,LexerActionType.POP_MODE),this}function LexerMoreAction(){return LexerAction.call(this,LexerActionType.MORE),this}function LexerModeAction(mode){return LexerAction.call(this,LexerActionType.MODE),this.mode=mode,this}function LexerCustomAction(ruleIndex,actionIndex){return LexerAction.call(this,LexerActionType.CUSTOM),this.ruleIndex=ruleIndex,this.actionIndex=actionIndex,this.isPositionDependent=!0,this}function LexerChannelAction(channel){return LexerAction.call(this,LexerActionType.CHANNEL),this.channel=channel,this}function LexerIndexedCustomAction(offset,action){return LexerAction.call(this,action.actionType),this.offset=offset,this.action=action,this.isPositionDependent=!0,this}LexerActionType.CHANNEL=0,LexerActionType.CUSTOM=1,LexerActionType.MODE=2,LexerActionType.MORE=3,LexerActionType.POP_MODE=4,LexerActionType.PUSH_MODE=5,LexerActionType.SKIP=6,LexerActionType.TYPE=7,LexerAction.prototype.hashCode=function(){var hash=new Hash;return this.updateHashCode(hash),hash.finish()},LexerAction.prototype.updateHashCode=function(hash){hash.update(this.actionType)},LexerAction.prototype.equals=function(other){return this===other},((LexerSkipAction.prototype=Object.create(LexerAction.prototype)).constructor=LexerSkipAction).INSTANCE=new LexerSkipAction,LexerSkipAction.prototype.execute=function(lexer){lexer.skip()},LexerSkipAction.prototype.toString=function(){return"skip"},((LexerTypeAction.prototype=Object.create(LexerAction.prototype)).constructor=LexerTypeAction).prototype.execute=function(lexer){lexer.type=this.type},LexerTypeAction.prototype.updateHashCode=function(hash){hash.update(this.actionType,this.type)},LexerTypeAction.prototype.equals=function(other){return this===other||other instanceof LexerTypeAction&&this.type===other.type},LexerTypeAction.prototype.toString=function(){return"type("+this.type+")"},((LexerPushModeAction.prototype=Object.create(LexerAction.prototype)).constructor=LexerPushModeAction).prototype.execute=function(lexer){lexer.pushMode(this.mode)},LexerPushModeAction.prototype.updateHashCode=function(hash){hash.update(this.actionType,this.mode)},LexerPushModeAction.prototype.equals=function(other){return this===other||other instanceof LexerPushModeAction&&this.mode===other.mode},LexerPushModeAction.prototype.toString=function(){return"pushMode("+this.mode+")"},((LexerPopModeAction.prototype=Object.create(LexerAction.prototype)).constructor=LexerPopModeAction).INSTANCE=new LexerPopModeAction,LexerPopModeAction.prototype.execute=function(lexer){lexer.popMode()},LexerPopModeAction.prototype.toString=function(){return"popMode"},((LexerMoreAction.prototype=Object.create(LexerAction.prototype)).constructor=LexerMoreAction).INSTANCE=new LexerMoreAction,LexerMoreAction.prototype.execute=function(lexer){lexer.more()},LexerMoreAction.prototype.toString=function(){return"more"},((LexerModeAction.prototype=Object.create(LexerAction.prototype)).constructor=LexerModeAction).prototype.execute=function(lexer){lexer.mode(this.mode)},LexerModeAction.prototype.updateHashCode=function(hash){hash.update(this.actionType,this.mode)},LexerModeAction.prototype.equals=function(other){return this===other||other instanceof LexerModeAction&&this.mode===other.mode},LexerModeAction.prototype.toString=function(){return"mode("+this.mode+")"},((LexerCustomAction.prototype=Object.create(LexerAction.prototype)).constructor=LexerCustomAction).prototype.execute=function(lexer){lexer.action(null,this.ruleIndex,this.actionIndex)},LexerCustomAction.prototype.updateHashCode=function(hash){hash.update(this.actionType,this.ruleIndex,this.actionIndex)},LexerCustomAction.prototype.equals=function(other){return this===other||other instanceof LexerCustomAction&&(this.ruleIndex===other.ruleIndex&&this.actionIndex===other.actionIndex)},((LexerChannelAction.prototype=Object.create(LexerAction.prototype)).constructor=LexerChannelAction).prototype.execute=function(lexer){lexer._channel=this.channel},LexerChannelAction.prototype.updateHashCode=function(hash){hash.update(this.actionType,this.channel)},LexerChannelAction.prototype.equals=function(other){return this===other||other instanceof LexerChannelAction&&this.channel===other.channel},LexerChannelAction.prototype.toString=function(){return"channel("+this.channel+")"},((LexerIndexedCustomAction.prototype=Object.create(LexerAction.prototype)).constructor=LexerIndexedCustomAction).prototype.execute=function(lexer){this.action.execute(lexer)},LexerIndexedCustomAction.prototype.updateHashCode=function(hash){hash.update(this.actionType,this.offset,this.action)},LexerIndexedCustomAction.prototype.equals=function(other){return this===other||other instanceof LexerIndexedCustomAction&&(this.offset===other.offset&&this.action===other.action)},exports.LexerActionType=LexerActionType,exports.LexerSkipAction=LexerSkipAction,exports.LexerChannelAction=LexerChannelAction,exports.LexerCustomAction=LexerCustomAction,exports.LexerIndexedCustomAction=LexerIndexedCustomAction,exports.LexerMoreAction=LexerMoreAction,exports.LexerTypeAction=LexerTypeAction,exports.LexerPushModeAction=LexerPushModeAction,exports.LexerPopModeAction=LexerPopModeAction,exports.LexerModeAction=LexerModeAction},{}],32:[function(require,module,exports){var hashStuff=require("../Utils").hashStuff,LexerIndexedCustomAction=require("./LexerAction").LexerIndexedCustomAction;function LexerActionExecutor(lexerActions){return this.lexerActions=null===lexerActions?[]:lexerActions,this.cachedHashCode=hashStuff(lexerActions),this}LexerActionExecutor.append=function(lexerActionExecutor,lexerAction){return new LexerActionExecutor(null===lexerActionExecutor?[lexerAction]:lexerActionExecutor.lexerActions.concat([lexerAction]))},LexerActionExecutor.prototype.fixOffsetBeforeMatch=function(offset){for(var updatedLexerActions=null,i=0;i<this.lexerActions.length;i++)!this.lexerActions[i].isPositionDependent||this.lexerActions[i]instanceof LexerIndexedCustomAction||(null===updatedLexerActions&&(updatedLexerActions=this.lexerActions.concat([])),updatedLexerActions[i]=new LexerIndexedCustomAction(offset,this.lexerActions[i]));return null===updatedLexerActions?this:new LexerActionExecutor(updatedLexerActions)},LexerActionExecutor.prototype.execute=function(lexer,input,startIndex){var requiresSeek=!1,stopIndex=input.index;try{for(var i=0;i<this.lexerActions.length;i++){var offset,lexerAction=this.lexerActions[i];lexerAction instanceof LexerIndexedCustomAction?(offset=lexerAction.offset,input.seek(startIndex+offset),lexerAction=lexerAction.action,requiresSeek=startIndex+offset!==stopIndex):lexerAction.isPositionDependent&&(input.seek(stopIndex),requiresSeek=!1),lexerAction.execute(lexer)}}finally{requiresSeek&&input.seek(stopIndex)}},LexerActionExecutor.prototype.hashCode=function(){return this.cachedHashCode},LexerActionExecutor.prototype.updateHashCode=function(hash){hash.update(this.cachedHashCode)},LexerActionExecutor.prototype.equals=function(other){if(this===other)return!0;if(other instanceof LexerActionExecutor){if(this.cachedHashCode!=other.cachedHashCode)return!1;if(this.lexerActions.length!=other.lexerActions.length)return!1;for(var numActions=this.lexerActions.length,idx=0;idx<numActions;++idx)if(!this.lexerActions[idx].equals(other.lexerActions[idx]))return!1;return!0}return!1},exports.LexerActionExecutor=LexerActionExecutor},{"../Utils":21,"./LexerAction":31}],33:[function(require,module,exports){var Utils=require("./../Utils"),Set=Utils.Set,BitSet=Utils.BitSet,DoubleDict=Utils.DoubleDict,ATN=require("./ATN").ATN,ATNState=require("./ATNState").ATNState,ATNConfig=require("./ATNConfig").ATNConfig,ATNConfigSet=require("./ATNConfigSet").ATNConfigSet,Token=require("./../Token").Token,DFAState=require("./../dfa/DFAState").DFAState,PredPrediction=require("./../dfa/DFAState").PredPrediction,ATNSimulator=require("./ATNSimulator").ATNSimulator,PredictionMode=require("./PredictionMode").PredictionMode,RuleContext=require("./../RuleContext").RuleContext,SemanticContext=(require("./../ParserRuleContext").ParserRuleContext,require("./SemanticContext").SemanticContext),RuleStopState=(require("./ATNState").StarLoopEntryState,require("./ATNState").RuleStopState),PredictionContext=require("./../PredictionContext").PredictionContext,Interval=require("./../IntervalSet").Interval,Transitions=require("./Transition"),Transition=Transitions.Transition,SetTransition=Transitions.SetTransition,NotSetTransition=Transitions.NotSetTransition,RuleTransition=Transitions.RuleTransition,ActionTransition=Transitions.ActionTransition,NoViableAltException=require("./../error/Errors").NoViableAltException,SingletonPredictionContext=require("./../PredictionContext").SingletonPredictionContext,predictionContextFromRuleContext=require("./../PredictionContext").predictionContextFromRuleContext;function ParserATNSimulator(parser,atn,decisionToDFA,sharedContextCache){return ATNSimulator.call(this,atn,sharedContextCache),this.parser=parser,this.decisionToDFA=decisionToDFA,this.predictionMode=PredictionMode.LL,this._input=null,this._startIndex=0,this._outerContext=null,this._dfa=null,this.mergeCache=null,this}((ParserATNSimulator.prototype=Object.create(ATNSimulator.prototype)).constructor=ParserATNSimulator).prototype.debug=!1,ParserATNSimulator.prototype.debug_closure=!1,ParserATNSimulator.prototype.debug_add=!1,ParserATNSimulator.prototype.debug_list_atn_decisions=!1,ParserATNSimulator.prototype.dfa_debug=!1,ParserATNSimulator.prototype.retry_debug=!1,ParserATNSimulator.prototype.reset=function(){},ParserATNSimulator.prototype.adaptivePredict=function(input,decision,outerContext){(this.debug||this.debug_list_atn_decisions)&&console.log("adaptivePredict decision "+decision+" exec LA(1)=="+this.getLookaheadName(input)+" line "+input.LT(1).line+":"+input.LT(1).column),this._input=input,this._startIndex=input.index,this._outerContext=outerContext;var dfa=this.decisionToDFA[decision];this._dfa=dfa;var m=input.mark(),index=input.index;try{var s0_closure,s0=dfa.precedenceDfa?dfa.getPrecedenceStartState(this.parser.getPrecedence()):dfa.s0;null===s0&&(null===outerContext&&(outerContext=RuleContext.EMPTY),(this.debug||this.debug_list_atn_decisions)&&console.log("predictATN decision "+dfa.decision+" exec LA(1)=="+this.getLookaheadName(input)+", outerContext="+outerContext.toString(this.parser.ruleNames)),s0_closure=this.computeStartState(dfa.atnStartState,RuleContext.EMPTY,!1),dfa.precedenceDfa?(dfa.s0.configs=s0_closure,s0_closure=this.applyPrecedenceFilter(s0_closure),s0=this.addDFAState(dfa,new DFAState(null,s0_closure)),dfa.setPrecedenceStartState(this.parser.getPrecedence(),s0)):(s0=this.addDFAState(dfa,new DFAState(null,s0_closure)),dfa.s0=s0));var alt=this.execATN(dfa,s0,input,index,outerContext);return this.debug&&console.log("DFA after predictATN: "+dfa.toString(this.parser.literalNames)),alt}finally{this._dfa=null,this.mergeCache=null,input.seek(index),input.release(m)}},ParserATNSimulator.prototype.execATN=function(dfa,s0,input,startIndex,outerContext){var alt;(this.debug||this.debug_list_atn_decisions)&&console.log("execATN decision "+dfa.decision+" exec LA(1)=="+this.getLookaheadName(input)+" line "+input.LT(1).line+":"+input.LT(1).column);var previousD=s0;this.debug&&console.log("s0 = "+s0);for(var t=input.LA(1);;){var D=this.getExistingTargetState(previousD,t);if(null===D&&(D=this.computeTargetState(dfa,previousD,t)),D===ATNSimulator.ERROR){var e=this.noViableAlt(input,outerContext,previousD.configs,startIndex);if(input.seek(startIndex),(alt=this.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(previousD.configs,outerContext))!==ATN.INVALID_ALT_NUMBER)return alt;throw e}if(D.requiresFullContext&&this.predictionMode!==PredictionMode.SLL){var conflictingAlts=null;if(null!==D.predicates){this.debug&&console.log("DFA state has preds in DFA sim LL failover");var conflictIndex=input.index;if(conflictIndex!==startIndex&&input.seek(startIndex),1===(conflictingAlts=this.evalSemanticContext(D.predicates,outerContext,!0)).length)return this.debug&&console.log("Full LL avoided"),conflictingAlts.minValue();conflictIndex!==startIndex&&input.seek(conflictIndex)}this.dfa_debug&&console.log("ctx sensitive state "+outerContext+" in "+D);var s0_closure=this.computeStartState(dfa.atnStartState,outerContext,!0);return this.reportAttemptingFullContext(dfa,conflictingAlts,D.configs,startIndex,input.index),alt=this.execATNWithFullContext(dfa,D,s0_closure,input,startIndex,outerContext)}if(D.isAcceptState){if(null===D.predicates)return D.prediction;var stopIndex=input.index;input.seek(startIndex);var alts=this.evalSemanticContext(D.predicates,outerContext,!0);if(0===alts.length)throw this.noViableAlt(input,outerContext,D.configs,startIndex);return 1===alts.length||this.reportAmbiguity(dfa,D,startIndex,stopIndex,!1,alts,D.configs),alts.minValue()}previousD=D,t!==Token.EOF&&(input.consume(),t=input.LA(1))}},ParserATNSimulator.prototype.getExistingTargetState=function(previousD,t){var edges=previousD.edges;return null!==edges&&edges[t+1]||null},ParserATNSimulator.prototype.computeTargetState=function(dfa,previousD,t){var reach=this.computeReachSet(previousD.configs,t,!1);if(null===reach)return this.addDFAEdge(dfa,previousD,t,ATNSimulator.ERROR),ATNSimulator.ERROR;var altSubSets,D=new DFAState(null,reach),predictedAlt=this.getUniqueAlt(reach);return this.debug&&(altSubSets=PredictionMode.getConflictingAltSubsets(reach),console.log("SLL altSubSets="+Utils.arrayToString(altSubSets)+", previous="+previousD.configs+", configs="+reach+", predict="+predictedAlt+", allSubsetsConflict="+PredictionMode.allSubsetsConflict(altSubSets)+", conflictingAlts="+this.getConflictingAlts(reach))),predictedAlt!==ATN.INVALID_ALT_NUMBER?(D.isAcceptState=!0,D.configs.uniqueAlt=predictedAlt,D.prediction=predictedAlt):PredictionMode.hasSLLConflictTerminatingPrediction(this.predictionMode,reach)&&(D.configs.conflictingAlts=this.getConflictingAlts(reach),D.requiresFullContext=!0,D.isAcceptState=!0,D.prediction=D.configs.conflictingAlts.minValue()),D.isAcceptState&&D.configs.hasSemanticContext&&(this.predicateDFAState(D,this.atn.getDecisionState(dfa.decision)),null!==D.predicates&&(D.prediction=ATN.INVALID_ALT_NUMBER)),D=this.addDFAEdge(dfa,previousD,t,D)},ParserATNSimulator.prototype.predicateDFAState=function(dfaState,decisionState){var nalts=decisionState.transitions.length,altsToCollectPredsFrom=this.getConflictingAltsOrUniqueAlt(dfaState.configs),altToPred=this.getPredsForAmbigAlts(altsToCollectPredsFrom,dfaState.configs,nalts);null!==altToPred?(dfaState.predicates=this.getPredicatePredictions(altsToCollectPredsFrom,altToPred),dfaState.prediction=ATN.INVALID_ALT_NUMBER):dfaState.prediction=altsToCollectPredsFrom.minValue()},ParserATNSimulator.prototype.execATNWithFullContext=function(dfa,D,s0,input,startIndex,outerContext){(this.debug||this.debug_list_atn_decisions)&&console.log("execATNWithFullContext "+s0);var foundExactAmbig=!1,reach=null,previous=s0;input.seek(startIndex);for(var t=input.LA(1),predictedAlt=-1;;){if(null===(reach=this.computeReachSet(previous,t,!0))){var e=this.noViableAlt(input,outerContext,previous,startIndex);input.seek(startIndex);var alt=this.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(previous,outerContext);if(alt!==ATN.INVALID_ALT_NUMBER)return alt;throw e}var altSubSets=PredictionMode.getConflictingAltSubsets(reach);if(this.debug&&console.log("LL altSubSets="+altSubSets+", predict="+PredictionMode.getUniqueAlt(altSubSets)+", resolvesToJustOneViableAlt="+PredictionMode.resolvesToJustOneViableAlt(altSubSets)),reach.uniqueAlt=this.getUniqueAlt(reach),reach.uniqueAlt!==ATN.INVALID_ALT_NUMBER){predictedAlt=reach.uniqueAlt;break}if(this.predictionMode!==PredictionMode.LL_EXACT_AMBIG_DETECTION){if((predictedAlt=PredictionMode.resolvesToJustOneViableAlt(altSubSets))!==ATN.INVALID_ALT_NUMBER)break}else if(PredictionMode.allSubsetsConflict(altSubSets)&&PredictionMode.allSubsetsEqual(altSubSets)){foundExactAmbig=!0,predictedAlt=PredictionMode.getSingleViableAlt(altSubSets);break}previous=reach,t!==Token.EOF&&(input.consume(),t=input.LA(1))}return reach.uniqueAlt!==ATN.INVALID_ALT_NUMBER?this.reportContextSensitivity(dfa,predictedAlt,reach,startIndex,input.index):this.reportAmbiguity(dfa,D,startIndex,input.index,foundExactAmbig,null,reach),predictedAlt},ParserATNSimulator.prototype.computeReachSet=function(closure,t,fullCtx){this.debug&&console.log("in computeReachSet, starting closure: "+closure),null===this.mergeCache&&(this.mergeCache=new DoubleDict);for(var intermediate=new ATNConfigSet(fullCtx),skippedStopStates=null,i=0;i<closure.items.length;i++){var c=closure.items[i];if(this.debug_add&&console.log("testing "+this.getTokenName(t)+" at "+c),c.state instanceof RuleStopState)!fullCtx&&t!==Token.EOF||(null===skippedStopStates&&(skippedStopStates=[]),skippedStopStates.push(c),this.debug_add&&console.log("added "+c+" to skippedStopStates"));else for(var j=0;j<c.state.transitions.length;j++){var cfg,trans=c.state.transitions[j],target=this.getReachableTarget(trans,t);null!==target&&(cfg=new ATNConfig({state:target},c),intermediate.add(cfg,this.mergeCache),this.debug_add&&console.log("added "+cfg+" to intermediate"))}}var reach=null;if(null!==skippedStopStates||t===Token.EOF||1!==intermediate.items.length&&this.getUniqueAlt(intermediate)===ATN.INVALID_ALT_NUMBER||(reach=intermediate),null===reach){reach=new ATNConfigSet(fullCtx);for(var closureBusy=new Set,treatEofAsEpsilon=t===Token.EOF,k=0;k<intermediate.items.length;k++)this.closure(intermediate.items[k],reach,closureBusy,!1,fullCtx,treatEofAsEpsilon)}if(t===Token.EOF&&(reach=this.removeAllConfigsNotInRuleStopState(reach,reach===intermediate)),!(null===skippedStopStates||fullCtx&&PredictionMode.hasConfigInRuleStopState(reach)))for(var l=0;l<skippedStopStates.length;l++)reach.add(skippedStopStates[l],this.mergeCache);return 0===reach.items.length?null:reach},ParserATNSimulator.prototype.removeAllConfigsNotInRuleStopState=function(configs,lookToEndOfRule){if(PredictionMode.allConfigsInRuleStopStates(configs))return configs;for(var result=new ATNConfigSet(configs.fullCtx),i=0;i<configs.items.length;i++){var endOfRuleState,config=configs.items[i];config.state instanceof RuleStopState?result.add(config,this.mergeCache):lookToEndOfRule&&config.state.epsilonOnlyTransitions&&this.atn.nextTokens(config.state).contains(Token.EPSILON)&&(endOfRuleState=this.atn.ruleToStopState[config.state.ruleIndex],result.add(new ATNConfig({state:endOfRuleState},config),this.mergeCache))}return result},ParserATNSimulator.prototype.computeStartState=function(p,ctx,fullCtx){for(var initialContext=predictionContextFromRuleContext(this.atn,ctx),configs=new ATNConfigSet(fullCtx),i=0;i<p.transitions.length;i++){var target=p.transitions[i].target,c=new ATNConfig({state:target,alt:i+1,context:initialContext},null),closureBusy=new Set;this.closure(c,configs,closureBusy,!0,fullCtx,!1)}return configs},ParserATNSimulator.prototype.applyPrecedenceFilter=function(configs){for(var config,updatedContext,statesFromAlt1=[],configSet=new ATNConfigSet(configs.fullCtx),i=0;i<configs.items.length;i++){1===(config=configs.items[i]).alt&&(null!==(updatedContext=config.semanticContext.evalPrecedence(this.parser,this._outerContext))&&(statesFromAlt1[config.state.stateNumber]=config.context,updatedContext!==config.semanticContext?configSet.add(new ATNConfig({semanticContext:updatedContext},config),this.mergeCache):configSet.add(config,this.mergeCache)))}for(i=0;i<configs.items.length;i++)if(1!==(config=configs.items[i]).alt){if(!config.precedenceFilterSuppressed){var context=statesFromAlt1[config.state.stateNumber]||null;if(null!==context&&context.equals(config.context))continue}configSet.add(config,this.mergeCache)}return configSet},ParserATNSimulator.prototype.getReachableTarget=function(trans,ttype){return trans.matches(ttype,0,this.atn.maxTokenType)?trans.target:null},ParserATNSimulator.prototype.getPredsForAmbigAlts=function(ambigAlts,configs,nalts){for(var altToPred=[],i=0;i<configs.items.length;i++){var c=configs.items[i];ambigAlts.contains(c.alt)&&(altToPred[c.alt]=SemanticContext.orContext(altToPred[c.alt]||null,c.semanticContext))}for(var nPredAlts=0,i=1;i<nalts+1;i++){var pred=altToPred[i]||null;null===pred?altToPred[i]=SemanticContext.NONE:pred!==SemanticContext.NONE&&(nPredAlts+=1)}return 0===nPredAlts&&(altToPred=null),this.debug&&console.log("getPredsForAmbigAlts result "+Utils.arrayToString(altToPred)),altToPred},ParserATNSimulator.prototype.getPredicatePredictions=function(ambigAlts,altToPred){for(var pairs=[],containsPredicate=!1,i=1;i<altToPred.length;i++){var pred=altToPred[i];null!==ambigAlts&&ambigAlts.contains(i)&&pairs.push(new PredPrediction(pred,i)),pred!==SemanticContext.NONE&&(containsPredicate=!0)}return containsPredicate?pairs:null},ParserATNSimulator.prototype.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule=function(configs,outerContext){var cfgs=this.splitAccordingToSemanticValidity(configs,outerContext),semValidConfigs=cfgs[0],semInvalidConfigs=cfgs[1],alt=this.getAltThatFinishedDecisionEntryRule(semValidConfigs);return alt!==ATN.INVALID_ALT_NUMBER||0<semInvalidConfigs.items.length&&(alt=this.getAltThatFinishedDecisionEntryRule(semInvalidConfigs))!==ATN.INVALID_ALT_NUMBER?alt:ATN.INVALID_ALT_NUMBER},ParserATNSimulator.prototype.getAltThatFinishedDecisionEntryRule=function(configs){for(var alts=[],i=0;i<configs.items.length;i++){var c=configs.items[i];(0<c.reachesIntoOuterContext||c.state instanceof RuleStopState&&c.context.hasEmptyPath())&&alts.indexOf(c.alt)<0&&alts.push(c.alt)}return 0===alts.length?ATN.INVALID_ALT_NUMBER:Math.min.apply(null,alts)},ParserATNSimulator.prototype.splitAccordingToSemanticValidity=function(configs,outerContext){for(var succeeded=new ATNConfigSet(configs.fullCtx),failed=new ATNConfigSet(configs.fullCtx),i=0;i<configs.items.length;i++){var c=configs.items[i];c.semanticContext===SemanticContext.NONE||c.semanticContext.evaluate(this.parser,outerContext)?succeeded.add(c):failed.add(c)}return[succeeded,failed]},ParserATNSimulator.prototype.evalSemanticContext=function(predPredictions,outerContext,complete){for(var predictions=new BitSet,i=0;i<predPredictions.length;i++){var pair=predPredictions[i];if(pair.pred!==SemanticContext.NONE){var predicateEvaluationResult=pair.pred.evaluate(this.parser,outerContext);if((this.debug||this.dfa_debug)&&console.log("eval pred "+pair+"="+predicateEvaluationResult),predicateEvaluationResult&&((this.debug||this.dfa_debug)&&console.log("PREDICT "+pair.alt),predictions.add(pair.alt),!complete))break}else if(predictions.add(pair.alt),!complete)break}return predictions},ParserATNSimulator.prototype.closure=function(config,configs,closureBusy,collectPredicates,fullCtx,treatEofAsEpsilon){this.closureCheckingStopState(config,configs,closureBusy,collectPredicates,fullCtx,0,treatEofAsEpsilon)},ParserATNSimulator.prototype.closureCheckingStopState=function(config,configs,closureBusy,collectPredicates,fullCtx,depth,treatEofAsEpsilon){if((this.debug||this.debug_closure)&&(console.log("closure("+config.toString(this.parser,!0)+")"),50<config.reachesIntoOuterContext))throw"problem";if(config.state instanceof RuleStopState){if(!config.context.isEmpty()){for(var i=0;i<config.context.length;i++)if(config.context.getReturnState(i)!==PredictionContext.EMPTY_RETURN_STATE){var returnState=this.atn.states[config.context.getReturnState(i)],newContext=config.context.getParent(i),parms={state:returnState,alt:config.alt,context:newContext,semanticContext:config.semanticContext},c=new ATNConfig(parms,null);c.reachesIntoOuterContext=config.reachesIntoOuterContext,this.closureCheckingStopState(c,configs,closureBusy,collectPredicates,fullCtx,depth-1,treatEofAsEpsilon)}else{if(fullCtx){configs.add(new ATNConfig({state:config.state,context:PredictionContext.EMPTY},config),this.mergeCache);continue}this.debug&&console.log("FALLING off rule "+this.getRuleName(config.state.ruleIndex)),this.closure_(config,configs,closureBusy,collectPredicates,fullCtx,depth,treatEofAsEpsilon)}return}if(fullCtx)return void configs.add(config,this.mergeCache);this.debug&&console.log("FALLING off rule "+this.getRuleName(config.state.ruleIndex))}this.closure_(config,configs,closureBusy,collectPredicates,fullCtx,depth,treatEofAsEpsilon)},ParserATNSimulator.prototype.closure_=function(config,configs,closureBusy,collectPredicates,fullCtx,depth,treatEofAsEpsilon){var p=config.state;p.epsilonOnlyTransitions||configs.add(config,this.mergeCache);for(var i=0;i<p.transitions.length;i++)if(0!=i||!this.canDropLoopEntryEdgeInLeftRecursiveRule(config)){var t=p.transitions[i],continueCollecting=collectPredicates&&!(t instanceof ActionTransition),c=this.getEpsilonTarget(config,t,continueCollecting,0===depth,fullCtx,treatEofAsEpsilon);if(null!==c){var newDepth=depth;if(config.state instanceof RuleStopState){if(null!==this._dfa&&this._dfa.precedenceDfa&&t.outermostPrecedenceReturn===this._dfa.atnStartState.ruleIndex&&(c.precedenceFilterSuppressed=!0),c.reachesIntoOuterContext+=1,closureBusy.add(c)!==c)continue;configs.dipsIntoOuterContext=!0,--newDepth,this.debug&&console.log("dips into outer ctx: "+c)}else{if(!t.isEpsilon&&closureBusy.add(c)!==c)continue;t instanceof RuleTransition&&0<=newDepth&&(newDepth+=1)}this.closureCheckingStopState(c,configs,closureBusy,continueCollecting,fullCtx,newDepth,treatEofAsEpsilon)}}},ParserATNSimulator.prototype.canDropLoopEntryEdgeInLeftRecursiveRule=function(config){var p=config.state;if(p.stateType!=ATNState.STAR_LOOP_ENTRY)return!1;if(p.stateType!=ATNState.STAR_LOOP_ENTRY||!p.isPrecedenceDecision||config.context.isEmpty()||config.context.hasEmptyPath())return!1;for(var numCtxs=config.context.length,i=0;i<numCtxs;i++){if((returnState=this.atn.states[config.context.getReturnState(i)]).ruleIndex!=p.ruleIndex)return!1}for(var blockEndStateNum=p.transitions[0].target.endState.stateNumber,blockEndState=this.atn.states[blockEndStateNum],i=0;i<numCtxs;i++){var returnState,returnStateNumber=config.context.getReturnState(i);if(1!=(returnState=this.atn.states[returnStateNumber]).transitions.length||!returnState.transitions[0].isEpsilon)return!1;var returnStateTarget=returnState.transitions[0].target;if((returnState.stateType!=ATNState.BLOCK_END||returnStateTarget!=p)&&(returnState!=blockEndState&&returnStateTarget!=blockEndState&&(returnStateTarget.stateType!=ATNState.BLOCK_END||1!=returnStateTarget.transitions.length||!returnStateTarget.transitions[0].isEpsilon||returnStateTarget.transitions[0].target!=p)))return!1}return!0},ParserATNSimulator.prototype.getRuleName=function(index){return null!==this.parser&&0<=index?this.parser.ruleNames[index]:"<rule "+index+">"},ParserATNSimulator.prototype.getEpsilonTarget=function(config,t,collectPredicates,inContext,fullCtx,treatEofAsEpsilon){switch(t.serializationType){case Transition.RULE:return this.ruleTransition(config,t);case Transition.PRECEDENCE:return this.precedenceTransition(config,t,collectPredicates,inContext,fullCtx);case Transition.PREDICATE:return this.predTransition(config,t,collectPredicates,inContext,fullCtx);case Transition.ACTION:return this.actionTransition(config,t);case Transition.EPSILON:return new ATNConfig({state:t.target},config);case Transition.ATOM:case Transition.RANGE:case Transition.SET:return treatEofAsEpsilon&&t.matches(Token.EOF,0,1)?new ATNConfig({state:t.target},config):null;default:return null}},ParserATNSimulator.prototype.actionTransition=function(config,t){var index;return this.debug&&(index=-1==t.actionIndex?65535:t.actionIndex,console.log("ACTION edge "+t.ruleIndex+":"+index)),new ATNConfig({state:t.target},config)},ParserATNSimulator.prototype.precedenceTransition=function(config,pt,collectPredicates,inContext,fullCtx){this.debug&&(console.log("PRED (collectPredicates="+collectPredicates+") "+pt.precedence+">=_p, ctx dependent=true"),null!==this.parser&&console.log("context surrounding pred is "+Utils.arrayToString(this.parser.getRuleInvocationStack())));var currentPosition,predSucceeds,newSemCtx,c=null;return collectPredicates&&inContext?fullCtx?(currentPosition=this._input.index,this._input.seek(this._startIndex),predSucceeds=pt.getPredicate().evaluate(this.parser,this._outerContext),this._input.seek(currentPosition),predSucceeds&&(c=new ATNConfig({state:pt.target},config))):(newSemCtx=SemanticContext.andContext(config.semanticContext,pt.getPredicate()),c=new ATNConfig({state:pt.target,semanticContext:newSemCtx},config)):c=new ATNConfig({state:pt.target},config),this.debug&&console.log("config from pred transition="+c),c},ParserATNSimulator.prototype.predTransition=function(config,pt,collectPredicates,inContext,fullCtx){this.debug&&(console.log("PRED (collectPredicates="+collectPredicates+") "+pt.ruleIndex+":"+pt.predIndex+", ctx dependent="+pt.isCtxDependent),null!==this.parser&&console.log("context surrounding pred is "+Utils.arrayToString(this.parser.getRuleInvocationStack())));var currentPosition,predSucceeds,newSemCtx,c=null;return collectPredicates&&(pt.isCtxDependent&&inContext||!pt.isCtxDependent)?fullCtx?(currentPosition=this._input.index,this._input.seek(this._startIndex),predSucceeds=pt.getPredicate().evaluate(this.parser,this._outerContext),this._input.seek(currentPosition),predSucceeds&&(c=new ATNConfig({state:pt.target},config))):(newSemCtx=SemanticContext.andContext(config.semanticContext,pt.getPredicate()),c=new ATNConfig({state:pt.target,semanticContext:newSemCtx},config)):c=new ATNConfig({state:pt.target},config),this.debug&&console.log("config from pred transition="+c),c},ParserATNSimulator.prototype.ruleTransition=function(config,t){this.debug&&console.log("CALL rule "+this.getRuleName(t.target.ruleIndex)+", ctx="+config.context);var returnState=t.followState,newContext=SingletonPredictionContext.create(config.context,returnState.stateNumber);return new ATNConfig({state:t.target,context:newContext},config)},ParserATNSimulator.prototype.getConflictingAlts=function(configs){var altsets=PredictionMode.getConflictingAltSubsets(configs);return PredictionMode.getAlts(altsets)},ParserATNSimulator.prototype.getConflictingAltsOrUniqueAlt=function(configs){var conflictingAlts=null;return configs.uniqueAlt!==ATN.INVALID_ALT_NUMBER?(conflictingAlts=new BitSet).add(configs.uniqueAlt):conflictingAlts=configs.conflictingAlts,conflictingAlts},ParserATNSimulator.prototype.getTokenName=function(t){if(t===Token.EOF)return"EOF";if(null!==this.parser&&null!==this.parser.literalNames){if(!(t>=this.parser.literalNames.length&&t>=this.parser.symbolicNames.length))return(this.parser.literalNames[t]||this.parser.symbolicNames[t])+"<"+t+">";console.log(t+" ttype out of range: "+this.parser.literalNames),console.log(""+this.parser.getInputStream().getTokens())}return""+t},ParserATNSimulator.prototype.getLookaheadName=function(input){return this.getTokenName(input.LA(1))},ParserATNSimulator.prototype.dumpDeadEndConfigs=function(nvae){console.log("dead end configs: ");for(var decs=nvae.getDeadEndConfigs(),i=0;i<decs.length;i++){var t,c=decs[i],trans="no edges";0<c.state.transitions.length&&((t=c.state.transitions[0])instanceof AtomTransition?trans="Atom "+this.getTokenName(t.label):t instanceof SetTransition&&(trans=(t instanceof NotSetTransition?"~":"")+"Set "+t.set)),console.error(c.toString(this.parser,!0)+":"+trans)}},ParserATNSimulator.prototype.noViableAlt=function(input,outerContext,configs,startIndex){return new NoViableAltException(this.parser,input,input.get(startIndex),input.LT(1),configs,outerContext)},ParserATNSimulator.prototype.getUniqueAlt=function(configs){for(var alt=ATN.INVALID_ALT_NUMBER,i=0;i<configs.items.length;i++){var c=configs.items[i];if(alt===ATN.INVALID_ALT_NUMBER)alt=c.alt;else if(c.alt!==alt)return ATN.INVALID_ALT_NUMBER}return alt},ParserATNSimulator.prototype.addDFAEdge=function(dfa,from_,t,to){return this.debug&&console.log("EDGE "+from_+" -> "+to+" upon "+this.getTokenName(t)),null===to?null:(to=this.addDFAState(dfa,to),null===from_||t<-1||t>this.atn.maxTokenType||(null===from_.edges&&(from_.edges=[]),from_.edges[t+1]=to,this.debug&&(literalNames=null===this.parser?null:this.parser.literalNames,symbolicNames=null===this.parser?null:this.parser.symbolicNames,console.log("DFA=\n"+dfa.toString(literalNames,symbolicNames)))),to);var literalNames,symbolicNames},ParserATNSimulator.prototype.addDFAState=function(dfa,D){if(D==ATNSimulator.ERROR)return D;var existing=dfa.states.get(D);return null!==existing?existing:(D.stateNumber=dfa.states.length,D.configs.readOnly||(D.configs.optimizeConfigs(this),D.configs.setReadonly(!0)),dfa.states.add(D),this.debug&&console.log("adding new DFA state: "+D),D)},ParserATNSimulator.prototype.reportAttemptingFullContext=function(dfa,conflictingAlts,configs,startIndex,stopIndex){var interval;(this.debug||this.retry_debug)&&(interval=new Interval(startIndex,stopIndex+1),console.log("reportAttemptingFullContext decision="+dfa.decision+":"+configs+", input="+this.parser.getTokenStream().getText(interval))),null!==this.parser&&this.parser.getErrorListenerDispatch().reportAttemptingFullContext(this.parser,dfa,startIndex,stopIndex,conflictingAlts,configs)},ParserATNSimulator.prototype.reportContextSensitivity=function(dfa,prediction,configs,startIndex,stopIndex){var interval;(this.debug||this.retry_debug)&&(interval=new Interval(startIndex,stopIndex+1),console.log("reportContextSensitivity decision="+dfa.decision+":"+configs+", input="+this.parser.getTokenStream().getText(interval))),null!==this.parser&&this.parser.getErrorListenerDispatch().reportContextSensitivity(this.parser,dfa,startIndex,stopIndex,prediction,configs)},ParserATNSimulator.prototype.reportAmbiguity=function(dfa,D,startIndex,stopIndex,exact,ambigAlts,configs){var interval;(this.debug||this.retry_debug)&&(interval=new Interval(startIndex,stopIndex+1),console.log("reportAmbiguity "+ambigAlts+":"+configs+", input="+this.parser.getTokenStream().getText(interval))),null!==this.parser&&this.parser.getErrorListenerDispatch().reportAmbiguity(this.parser,dfa,startIndex,stopIndex,exact,ambigAlts,configs)},exports.ParserATNSimulator=ParserATNSimulator},{"./../IntervalSet":12,"./../ParserRuleContext":16,"./../PredictionContext":17,"./../RuleContext":19,"./../Token":20,"./../Utils":21,"./../dfa/DFAState":40,"./../error/Errors":45,"./ATN":22,"./ATNConfig":23,"./ATNConfigSet":24,"./ATNSimulator":27,"./ATNState":28,"./PredictionMode":34,"./SemanticContext":35,"./Transition":36}],34:[function(require,module,exports){require("./../Utils").Set;var Map=require("./../Utils").Map,BitSet=require("./../Utils").BitSet,AltDict=require("./../Utils").AltDict,ATN=require("./ATN").ATN,RuleStopState=require("./ATNState").RuleStopState,ATNConfigSet=require("./ATNConfigSet").ATNConfigSet,ATNConfig=require("./ATNConfig").ATNConfig,SemanticContext=require("./SemanticContext").SemanticContext,hashStuff=(require("../Utils").Hash,require("./../Utils").hashStuff);require("./../Utils").equalArrays;function PredictionMode(){return this}PredictionMode.SLL=0,PredictionMode.LL=1,PredictionMode.LL_EXACT_AMBIG_DETECTION=2,PredictionMode.hasSLLConflictTerminatingPrediction=function(mode,configs){if(PredictionMode.allConfigsInRuleStopStates(configs))return!0;if(mode===PredictionMode.SLL&&configs.hasSemanticContext){for(var dup=new ATNConfigSet,i=0;i<configs.items.length;i++){var c=configs.items[i],c=new ATNConfig({semanticContext:SemanticContext.NONE},c);dup.add(c)}configs=dup}var altsets=PredictionMode.getConflictingAltSubsets(configs);return PredictionMode.hasConflictingAltSet(altsets)&&!PredictionMode.hasStateAssociatedWithOneAlt(configs)},PredictionMode.hasConfigInRuleStopState=function(configs){for(var i=0;i<configs.items.length;i++){if(configs.items[i].state instanceof RuleStopState)return!0}return!1},PredictionMode.allConfigsInRuleStopStates=function(configs){for(var i=0;i<configs.items.length;i++){if(!(configs.items[i].state instanceof RuleStopState))return!1}return!0},PredictionMode.resolvesToJustOneViableAlt=function(altsets){return PredictionMode.getSingleViableAlt(altsets)},PredictionMode.allSubsetsConflict=function(altsets){return!PredictionMode.hasNonConflictingAltSet(altsets)},PredictionMode.hasNonConflictingAltSet=function(altsets){for(var i=0;i<altsets.length;i++){if(1===altsets[i].length)return!0}return!1},PredictionMode.hasConflictingAltSet=function(altsets){for(var i=0;i<altsets.length;i++){if(1<altsets[i].length)return!0}return!1},PredictionMode.allSubsetsEqual=function(altsets){for(var first=null,i=0;i<altsets.length;i++){var alts=altsets[i];if(null===first)first=alts;else if(alts!==first)return!1}return!0},PredictionMode.getUniqueAlt=function(altsets){var all=PredictionMode.getAlts(altsets);return 1===all.length?all.minValue():ATN.INVALID_ALT_NUMBER},PredictionMode.getAlts=function(altsets){var all=new BitSet;return altsets.map(function(alts){all.or(alts)}),all},PredictionMode.getConflictingAltSubsets=function(configs){var configToAlts=new Map;return configToAlts.hashFunction=function(cfg){hashStuff(cfg.state.stateNumber,cfg.context)},configToAlts.equalsFunction=function(c1,c2){return c1.state.stateNumber==c2.state.stateNumber&&c1.context.equals(c2.context)},configs.items.map(function(cfg){var alts=configToAlts.get(cfg);null===alts&&(alts=new BitSet,configToAlts.put(cfg,alts)),alts.add(cfg.alt)}),configToAlts.getValues()},PredictionMode.getStateToAltMap=function(configs){var m=new AltDict;return configs.items.map(function(c){var alts=m.get(c.state);null===alts&&(alts=new BitSet,m.put(c.state,alts)),alts.add(c.alt)}),m},PredictionMode.hasStateAssociatedWithOneAlt=function(configs){for(var values=PredictionMode.getStateToAltMap(configs).values(),i=0;i<values.length;i++)if(1===values[i].length)return!0;return!1},PredictionMode.getSingleViableAlt=function(altsets){for(var result=null,i=0;i<altsets.length;i++){var minAlt=altsets[i].minValue();if(null===result)result=minAlt;else if(result!==minAlt)return ATN.INVALID_ALT_NUMBER}return result},exports.PredictionMode=PredictionMode},{"../Utils":21,"./../Utils":21,"./ATN":22,"./ATNConfig":23,"./ATNConfigSet":24,"./ATNState":28,"./SemanticContext":35}],35:[function(require,module,exports){var Set=require("./../Utils").Set,Hash=require("./../Utils").Hash;function SemanticContext(){return this}function Predicate(ruleIndex,predIndex,isCtxDependent){return SemanticContext.call(this),this.ruleIndex=void 0===ruleIndex?-1:ruleIndex,this.predIndex=void 0===predIndex?-1:predIndex,this.isCtxDependent=void 0!==isCtxDependent&&isCtxDependent,this}function PrecedencePredicate(precedence){SemanticContext.call(this),this.precedence=void 0===precedence?0:precedence}function AND(a,b){SemanticContext.call(this);var operands=new Set;a instanceof AND?a.opnds.map(function(o){operands.add(o)}):operands.add(a),b instanceof AND?b.opnds.map(function(o){operands.add(o)}):operands.add(b);var reduced,precedencePredicates=PrecedencePredicate.filterPrecedencePredicates(operands);return 0<precedencePredicates.length&&(reduced=null,precedencePredicates.map(function(p){(null===reduced||p.precedence<reduced.precedence)&&(reduced=p)}),operands.add(reduced)),this.opnds=operands.values(),this}function OR(a,b){SemanticContext.call(this);var operands=new Set;a instanceof OR?a.opnds.map(function(o){operands.add(o)}):operands.add(a),b instanceof OR?b.opnds.map(function(o){operands.add(o)}):operands.add(b);var s,reduced,precedencePredicates=PrecedencePredicate.filterPrecedencePredicates(operands);return 0<precedencePredicates.length&&(reduced=(s=precedencePredicates.sort(function(a,b){return a.compareTo(b)}))[s.length-1],operands.add(reduced)),this.opnds=operands.values(),this}SemanticContext.prototype.hashCode=function(){var hash=new Hash;return this.updateHashCode(hash),hash.finish()},SemanticContext.prototype.evaluate=function(parser,outerContext){},SemanticContext.prototype.evalPrecedence=function(parser,outerContext){return this},SemanticContext.andContext=function(a,b){if(null===a||a===SemanticContext.NONE)return b;if(null===b||b===SemanticContext.NONE)return a;var result=new AND(a,b);return 1===result.opnds.length?result.opnds[0]:result},SemanticContext.orContext=function(a,b){if(null===a)return b;if(null===b)return a;if(a===SemanticContext.NONE||b===SemanticContext.NONE)return SemanticContext.NONE;var result=new OR(a,b);return 1===result.opnds.length?result.opnds[0]:result},Predicate.prototype=Object.create(SemanticContext.prototype),SemanticContext.NONE=new(Predicate.prototype.constructor=Predicate),Predicate.prototype.evaluate=function(parser,outerContext){var localctx=this.isCtxDependent?outerContext:null;return parser.sempred(localctx,this.ruleIndex,this.predIndex)},Predicate.prototype.updateHashCode=function(hash){hash.update(this.ruleIndex,this.predIndex,this.isCtxDependent)},Predicate.prototype.equals=function(other){return this===other||other instanceof Predicate&&(this.ruleIndex===other.ruleIndex&&this.predIndex===other.predIndex&&this.isCtxDependent===other.isCtxDependent)},Predicate.prototype.toString=function(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"},((PrecedencePredicate.prototype=Object.create(SemanticContext.prototype)).constructor=PrecedencePredicate).prototype.evaluate=function(parser,outerContext){return parser.precpred(outerContext,this.precedence)},PrecedencePredicate.prototype.evalPrecedence=function(parser,outerContext){return parser.precpred(outerContext,this.precedence)?SemanticContext.NONE:null},PrecedencePredicate.prototype.compareTo=function(other){return this.precedence-other.precedence},PrecedencePredicate.prototype.updateHashCode=function(hash){hash.update(31)},PrecedencePredicate.prototype.equals=function(other){return this===other||other instanceof PrecedencePredicate&&this.precedence===other.precedence},PrecedencePredicate.prototype.toString=function(){return"{"+this.precedence+">=prec}?"},PrecedencePredicate.filterPrecedencePredicates=function(set){var result=[];return set.values().map(function(context){context instanceof PrecedencePredicate&&result.push(context)}),result},((AND.prototype=Object.create(SemanticContext.prototype)).constructor=AND).prototype.equals=function(other){return this===other||other instanceof AND&&this.opnds===other.opnds},AND.prototype.updateHashCode=function(hash){hash.update(this.opnds,"AND")},AND.prototype.evaluate=function(parser,outerContext){for(var i=0;i<this.opnds.length;i++)if(!this.opnds[i].evaluate(parser,outerContext))return!1;return!0},AND.prototype.evalPrecedence=function(parser,outerContext){for(var differs=!1,operands=[],i=0;i<this.opnds.length;i++){var context=this.opnds[i],evaluated=context.evalPrecedence(parser,outerContext);if(differs|=evaluated!==context,null===evaluated)return null;evaluated!==SemanticContext.NONE&&operands.push(evaluated)}if(!differs)return this;if(0===operands.length)return SemanticContext.NONE;var result=null;return operands.map(function(o){result=null===result?o:SemanticContext.andContext(result,o)}),result},AND.prototype.toString=function(){var s="";return this.opnds.map(function(o){s+="&& "+o.toString()}),3<s.length?s.slice(3):s},((OR.prototype=Object.create(SemanticContext.prototype)).constructor=OR).prototype.constructor=function(other){return this===other||other instanceof OR&&this.opnds===other.opnds},OR.prototype.updateHashCode=function(hash){hash.update(this.opnds,"OR")},OR.prototype.evaluate=function(parser,outerContext){for(var i=0;i<this.opnds.length;i++)if(this.opnds[i].evaluate(parser,outerContext))return!0;return!1},OR.prototype.evalPrecedence=function(parser,outerContext){for(var differs=!1,operands=[],i=0;i<this.opnds.length;i++){var context=this.opnds[i],evaluated=context.evalPrecedence(parser,outerContext);if(differs|=evaluated!==context,evaluated===SemanticContext.NONE)return SemanticContext.NONE;null!==evaluated&&operands.push(evaluated)}if(!differs)return this;if(0===operands.length)return null;var result=null;return operands.map(function(o){return o}),result},OR.prototype.toString=function(){var s="";return this.opnds.map(function(o){s+="|| "+o.toString()}),3<s.length?s.slice(3):s},exports.SemanticContext=SemanticContext,exports.PrecedencePredicate=PrecedencePredicate,exports.Predicate=Predicate},{"./../Utils":21}],36:[function(require,module,exports){var Token=require("./../Token").Token,IntervalSet=(require("./../IntervalSet").Interval,require("./../IntervalSet").IntervalSet),Predicate=require("./SemanticContext").Predicate,PrecedencePredicate=require("./SemanticContext").PrecedencePredicate;function Transition(target){if(null==target)throw"target cannot be null.";return this.target=target,this.isEpsilon=!1,this.label=null,this}function AtomTransition(target,label){return Transition.call(this,target),this.label_=label,this.label=this.makeLabel(),this.serializationType=Transition.ATOM,this}function RuleTransition(ruleStart,ruleIndex,precedence,followState){return Transition.call(this,ruleStart),this.ruleIndex=ruleIndex,this.precedence=precedence,this.followState=followState,this.serializationType=Transition.RULE,this.isEpsilon=!0,this}function EpsilonTransition(target,outermostPrecedenceReturn){return Transition.call(this,target),this.serializationType=Transition.EPSILON,this.isEpsilon=!0,this.outermostPrecedenceReturn=outermostPrecedenceReturn,this}function RangeTransition(target,start,stop){return Transition.call(this,target),this.serializationType=Transition.RANGE,this.start=start,this.stop=stop,this.label=this.makeLabel(),this}function AbstractPredicateTransition(target){return Transition.call(this,target),this}function PredicateTransition(target,ruleIndex,predIndex,isCtxDependent){return AbstractPredicateTransition.call(this,target),this.serializationType=Transition.PREDICATE,this.ruleIndex=ruleIndex,this.predIndex=predIndex,this.isCtxDependent=isCtxDependent,this.isEpsilon=!0,this}function ActionTransition(target,ruleIndex,actionIndex,isCtxDependent){return Transition.call(this,target),this.serializationType=Transition.ACTION,this.ruleIndex=ruleIndex,this.actionIndex=void 0===actionIndex?-1:actionIndex,this.isCtxDependent=void 0!==isCtxDependent&&isCtxDependent,this.isEpsilon=!0,this}function SetTransition(target,set){return Transition.call(this,target),this.serializationType=Transition.SET,null!=set?this.label=set:(this.label=new IntervalSet,this.label.addOne(Token.INVALID_TYPE)),this}function NotSetTransition(target,set){return SetTransition.call(this,target,set),this.serializationType=Transition.NOT_SET,this}function WildcardTransition(target){return Transition.call(this,target),this.serializationType=Transition.WILDCARD,this}function PrecedencePredicateTransition(target,precedence){return AbstractPredicateTransition.call(this,target),this.serializationType=Transition.PRECEDENCE,this.precedence=precedence,this.isEpsilon=!0,this}Transition.EPSILON=1,Transition.RANGE=2,Transition.RULE=3,Transition.PREDICATE=4,Transition.ATOM=5,Transition.ACTION=6,Transition.SET=7,Transition.NOT_SET=8,Transition.WILDCARD=9,Transition.PRECEDENCE=10,Transition.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"],Transition.serializationTypes={EpsilonTransition:Transition.EPSILON,RangeTransition:Transition.RANGE,RuleTransition:Transition.RULE,PredicateTransition:Transition.PREDICATE,AtomTransition:Transition.ATOM,ActionTransition:Transition.ACTION,SetTransition:Transition.SET,NotSetTransition:Transition.NOT_SET,WildcardTransition:Transition.WILDCARD,PrecedencePredicateTransition:Transition.PRECEDENCE},((AtomTransition.prototype=Object.create(Transition.prototype)).constructor=AtomTransition).prototype.makeLabel=function(){var s=new IntervalSet;return s.addOne(this.label_),s},AtomTransition.prototype.matches=function(symbol,minVocabSymbol,maxVocabSymbol){return this.label_===symbol},AtomTransition.prototype.toString=function(){return this.label_},((RuleTransition.prototype=Object.create(Transition.prototype)).constructor=RuleTransition).prototype.matches=function(symbol,minVocabSymbol,maxVocabSymbol){return!1},((EpsilonTransition.prototype=Object.create(Transition.prototype)).constructor=EpsilonTransition).prototype.matches=function(symbol,minVocabSymbol,maxVocabSymbol){return!1},EpsilonTransition.prototype.toString=function(){return"epsilon"},((RangeTransition.prototype=Object.create(Transition.prototype)).constructor=RangeTransition).prototype.makeLabel=function(){var s=new IntervalSet;return s.addRange(this.start,this.stop),s},RangeTransition.prototype.matches=function(symbol,minVocabSymbol,maxVocabSymbol){return symbol>=this.start&&symbol<=this.stop},RangeTransition.prototype.toString=function(){return"'"+String.fromCharCode(this.start)+"'..'"+String.fromCharCode(this.stop)+"'"},(AbstractPredicateTransition.prototype=Object.create(Transition.prototype)).constructor=AbstractPredicateTransition,((PredicateTransition.prototype=Object.create(AbstractPredicateTransition.prototype)).constructor=PredicateTransition).prototype.matches=function(symbol,minVocabSymbol,maxVocabSymbol){return!1},PredicateTransition.prototype.getPredicate=function(){return new Predicate(this.ruleIndex,this.predIndex,this.isCtxDependent)},PredicateTransition.prototype.toString=function(){return"pred_"+this.ruleIndex+":"+this.predIndex},((ActionTransition.prototype=Object.create(Transition.prototype)).constructor=ActionTransition).prototype.matches=function(symbol,minVocabSymbol,maxVocabSymbol){return!1},ActionTransition.prototype.toString=function(){return"action_"+this.ruleIndex+":"+this.actionIndex},((SetTransition.prototype=Object.create(Transition.prototype)).constructor=SetTransition).prototype.matches=function(symbol,minVocabSymbol,maxVocabSymbol){return this.label.contains(symbol)},SetTransition.prototype.toString=function(){return this.label.toString()},((NotSetTransition.prototype=Object.create(SetTransition.prototype)).constructor=NotSetTransition).prototype.matches=function(symbol,minVocabSymbol,maxVocabSymbol){return minVocabSymbol<=symbol&&symbol<=maxVocabSymbol&&!SetTransition.prototype.matches.call(this,symbol,minVocabSymbol,maxVocabSymbol)},NotSetTransition.prototype.toString=function(){return"~"+SetTransition.prototype.toString.call(this)},((WildcardTransition.prototype=Object.create(Transition.prototype)).constructor=WildcardTransition).prototype.matches=function(symbol,minVocabSymbol,maxVocabSymbol){return minVocabSymbol<=symbol&&symbol<=maxVocabSymbol},WildcardTransition.prototype.toString=function(){return"."},((PrecedencePredicateTransition.prototype=Object.create(AbstractPredicateTransition.prototype)).constructor=PrecedencePredicateTransition).prototype.matches=function(symbol,minVocabSymbol,maxVocabSymbol){return!1},PrecedencePredicateTransition.prototype.getPredicate=function(){return new PrecedencePredicate(this.precedence)},PrecedencePredicateTransition.prototype.toString=function(){return this.precedence+" >= _p"},exports.Transition=Transition,exports.AtomTransition=AtomTransition,exports.SetTransition=SetTransition,exports.NotSetTransition=NotSetTransition,exports.RuleTransition=RuleTransition,exports.ActionTransition=ActionTransition,exports.EpsilonTransition=EpsilonTransition,exports.RangeTransition=RangeTransition,exports.WildcardTransition=WildcardTransition,exports.PredicateTransition=PredicateTransition,exports.PrecedencePredicateTransition=PrecedencePredicateTransition,exports.AbstractPredicateTransition=AbstractPredicateTransition},{"./../IntervalSet":12,"./../Token":20,"./SemanticContext":35}],37:[function(require,module,exports){exports.ATN=require("./ATN").ATN,exports.ATNDeserializer=require("./ATNDeserializer").ATNDeserializer,exports.LexerATNSimulator=require("./LexerATNSimulator").LexerATNSimulator,exports.ParserATNSimulator=require("./ParserATNSimulator").ParserATNSimulator,exports.PredictionMode=require("./PredictionMode").PredictionMode},{"./ATN":22,"./ATNDeserializer":26,"./LexerATNSimulator":30,"./ParserATNSimulator":33,"./PredictionMode":34}],38:[function(require,module,exports){var Set=require("../Utils").Set,DFAState=require("./DFAState").DFAState,StarLoopEntryState=require("../atn/ATNState").StarLoopEntryState,ATNConfigSet=require("./../atn/ATNConfigSet").ATNConfigSet,DFASerializer=require("./DFASerializer").DFASerializer,LexerDFASerializer=require("./DFASerializer").LexerDFASerializer;function DFA(atnStartState,decision){var precedenceState;return void 0===decision&&(decision=0),this.atnStartState=atnStartState,this.decision=decision,this._states=new Set,this.s0=null,this.precedenceDfa=!1,atnStartState instanceof StarLoopEntryState&&atnStartState.isPrecedenceDecision&&(this.precedenceDfa=!0,(precedenceState=new DFAState(null,new ATNConfigSet)).edges=[],precedenceState.isAcceptState=!1,precedenceState.requiresFullContext=!1,this.s0=precedenceState),this}DFA.prototype.getPrecedenceStartState=function(precedence){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";return!(precedence<0||precedence>=this.s0.edges.length)&&this.s0.edges[precedence]||null},DFA.prototype.setPrecedenceStartState=function(precedence,startState){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";precedence<0||(this.s0.edges[precedence]=startState)},DFA.prototype.setPrecedenceDfa=function(precedenceDfa){var precedenceState;this.precedenceDfa!==precedenceDfa&&(this._states=new DFAStatesSet,precedenceDfa?((precedenceState=new DFAState(null,new ATNConfigSet)).edges=[],precedenceState.isAcceptState=!1,precedenceState.requiresFullContext=!1,this.s0=precedenceState):this.s0=null,this.precedenceDfa=precedenceDfa)},Object.defineProperty(DFA.prototype,"states",{get:function(){return this._states}}),DFA.prototype.sortedStates=function(){return this._states.values().sort(function(a,b){return a.stateNumber-b.stateNumber})},DFA.prototype.toString=function(literalNames,symbolicNames){return literalNames=literalNames||null,symbolicNames=symbolicNames||null,null===this.s0?"":new DFASerializer(this,literalNames,symbolicNames).toString()},DFA.prototype.toLexerString=function(){return null===this.s0?"":new LexerDFASerializer(this).toString()},exports.DFA=DFA},{"../Utils":21,"../atn/ATNState":28,"./../atn/ATNConfigSet":24,"./DFASerializer":39,"./DFAState":40}],39:[function(require,module,exports){function DFASerializer(dfa,literalNames,symbolicNames){return this.dfa=dfa,this.literalNames=literalNames||[],this.symbolicNames=symbolicNames||[],this}function LexerDFASerializer(dfa){return DFASerializer.call(this,dfa,null),this}DFASerializer.prototype.toString=function(){if(null===this.dfa.s0)return null;for(var buf="",states=this.dfa.sortedStates(),i=0;i<states.length;i++){var s=states[i];if(null!==s.edges)for(var n=s.edges.length,j=0;j<n;j++){var t=s.edges[j]||null;null!==t&&2147483647!==t.stateNumber&&(buf=(buf=(buf=(buf=(buf=(buf=buf.concat(this.getStateString(s))).concat("-")).concat(this.getEdgeLabel(j))).concat("->")).concat(this.getStateString(t))).concat("\n"))}}return 0===buf.length?null:buf},DFASerializer.prototype.getEdgeLabel=function(i){return 0===i?"EOF":null!==this.literalNames||null!==this.symbolicNames?this.literalNames[i-1]||this.symbolicNames[i-1]:String.fromCharCode(i-1)},DFASerializer.prototype.getStateString=function(s){var baseStateStr=(s.isAcceptState?":":"")+"s"+s.stateNumber+(s.requiresFullContext?"^":"");return s.isAcceptState?null!==s.predicates?baseStateStr+"=>"+s.predicates.toString():baseStateStr+"=>"+s.prediction.toString():baseStateStr},((LexerDFASerializer.prototype=Object.create(DFASerializer.prototype)).constructor=LexerDFASerializer).prototype.getEdgeLabel=function(i){return"'"+String.fromCharCode(i)+"'"},exports.DFASerializer=DFASerializer,exports.LexerDFASerializer=LexerDFASerializer},{}],40:[function(require,module,exports){var ATNConfigSet=require("./../atn/ATNConfigSet").ATNConfigSet,Utils=require("./../Utils"),Hash=Utils.Hash,Set=Utils.Set;function PredPrediction(pred,alt){return this.alt=alt,this.pred=pred,this}function DFAState(stateNumber,configs){return null===stateNumber&&(stateNumber=-1),null===configs&&(configs=new ATNConfigSet),this.stateNumber=stateNumber,this.configs=configs,this.edges=null,this.isAcceptState=!1,this.prediction=0,this.lexerActionExecutor=null,this.requiresFullContext=!1,this.predicates=null,this}PredPrediction.prototype.toString=function(){return"("+this.pred+", "+this.alt+")"},DFAState.prototype.getAltSet=function(){var alts=new Set;if(null!==this.configs)for(var i=0;i<this.configs.length;i++){var c=this.configs[i];alts.add(c.alt)}return 0===alts.length?null:alts},DFAState.prototype.equals=function(other){return this===other||other instanceof DFAState&&this.configs.equals(other.configs)},DFAState.prototype.toString=function(){var s=this.stateNumber+":"+this.configs;return this.isAcceptState&&(s+="=>",null!==this.predicates?s+=this.predicates:s+=this.prediction),s},DFAState.prototype.hashCode=function(){var hash=new Hash;return hash.update(this.configs),this.isAcceptState&&(null!==this.predicates?hash.update(this.predicates):hash.update(this.prediction)),hash.finish()},exports.DFAState=DFAState,exports.PredPrediction=PredPrediction},{"./../Utils":21,"./../atn/ATNConfigSet":24}],41:[function(require,module,exports){exports.DFA=require("./DFA").DFA,exports.DFASerializer=require("./DFASerializer").DFASerializer,exports.LexerDFASerializer=require("./DFASerializer").LexerDFASerializer,exports.PredPrediction=require("./DFAState").PredPrediction},{"./DFA":38,"./DFASerializer":39,"./DFAState":40}],42:[function(require,module,exports){var BitSet=require("./../Utils").BitSet,ErrorListener=require("./ErrorListener").ErrorListener,Interval=require("./../IntervalSet").Interval;function DiagnosticErrorListener(exactOnly){return ErrorListener.call(this),exactOnly=exactOnly||!0,this.exactOnly=exactOnly,this}((DiagnosticErrorListener.prototype=Object.create(ErrorListener.prototype)).constructor=DiagnosticErrorListener).prototype.reportAmbiguity=function(recognizer,dfa,startIndex,stopIndex,exact,ambigAlts,configs){var msg;this.exactOnly&&!exact||(msg="reportAmbiguity d="+this.getDecisionDescription(recognizer,dfa)+": ambigAlts="+this.getConflictingAlts(ambigAlts,configs)+", input='"+recognizer.getTokenStream().getText(new Interval(startIndex,stopIndex))+"'",recognizer.notifyErrorListeners(msg))},DiagnosticErrorListener.prototype.reportAttemptingFullContext=function(recognizer,dfa,startIndex,stopIndex,conflictingAlts,configs){var msg="reportAttemptingFullContext d="+this.getDecisionDescription(recognizer,dfa)+", input='"+recognizer.getTokenStream().getText(new Interval(startIndex,stopIndex))+"'";recognizer.notifyErrorListeners(msg)},DiagnosticErrorListener.prototype.reportContextSensitivity=function(recognizer,dfa,startIndex,stopIndex,prediction,configs){var msg="reportContextSensitivity d="+this.getDecisionDescription(recognizer,dfa)+", input='"+recognizer.getTokenStream().getText(new Interval(startIndex,stopIndex))+"'";recognizer.notifyErrorListeners(msg)},DiagnosticErrorListener.prototype.getDecisionDescription=function(recognizer,dfa){var decision=dfa.decision,ruleIndex=dfa.atnStartState.ruleIndex,ruleNames=recognizer.ruleNames;if(ruleIndex<0||ruleIndex>=ruleNames.length)return""+decision;var ruleName=ruleNames[ruleIndex]||null;return null===ruleName||0===ruleName.length?""+decision:decision+" ("+ruleName+")"},DiagnosticErrorListener.prototype.getConflictingAlts=function(reportedAlts,configs){if(null!==reportedAlts)return reportedAlts;for(var result=new BitSet,i=0;i<configs.items.length;i++)result.add(configs.items[i].alt);return"{"+result.values().join(", ")+"}"},exports.DiagnosticErrorListener=DiagnosticErrorListener},{"./../IntervalSet":12,"./../Utils":21,"./ErrorListener":43}],43:[function(require,module,exports){function ErrorListener(){return this}function ConsoleErrorListener(){return ErrorListener.call(this),this}function ProxyErrorListener(delegates){if(ErrorListener.call(this),null===delegates)throw"delegates";return this.delegates=delegates,this}ErrorListener.prototype.syntaxError=function(recognizer,offendingSymbol,line,column,msg,e){},ErrorListener.prototype.reportAmbiguity=function(recognizer,dfa,startIndex,stopIndex,exact,ambigAlts,configs){},ErrorListener.prototype.reportAttemptingFullContext=function(recognizer,dfa,startIndex,stopIndex,conflictingAlts,configs){},ErrorListener.prototype.reportContextSensitivity=function(recognizer,dfa,startIndex,stopIndex,prediction,configs){},((ConsoleErrorListener.prototype=Object.create(ErrorListener.prototype)).constructor=ConsoleErrorListener).INSTANCE=new ConsoleErrorListener,ConsoleErrorListener.prototype.syntaxError=function(recognizer,offendingSymbol,line,column,msg,e){console.error("line "+line+":"+column+" "+msg)},((ProxyErrorListener.prototype=Object.create(ErrorListener.prototype)).constructor=ProxyErrorListener).prototype.syntaxError=function(recognizer,offendingSymbol,line,column,msg,e){this.delegates.map(function(d){d.syntaxError(recognizer,offendingSymbol,line,column,msg,e)})},ProxyErrorListener.prototype.reportAmbiguity=function(recognizer,dfa,startIndex,stopIndex,exact,ambigAlts,configs){this.delegates.map(function(d){d.reportAmbiguity(recognizer,dfa,startIndex,stopIndex,exact,ambigAlts,configs)})},ProxyErrorListener.prototype.reportAttemptingFullContext=function(recognizer,dfa,startIndex,stopIndex,conflictingAlts,configs){this.delegates.map(function(d){d.reportAttemptingFullContext(recognizer,dfa,startIndex,stopIndex,conflictingAlts,configs)})},ProxyErrorListener.prototype.reportContextSensitivity=function(recognizer,dfa,startIndex,stopIndex,prediction,configs){this.delegates.map(function(d){d.reportContextSensitivity(recognizer,dfa,startIndex,stopIndex,prediction,configs)})},exports.ErrorListener=ErrorListener,exports.ConsoleErrorListener=ConsoleErrorListener,exports.ProxyErrorListener=ProxyErrorListener},{}],44:[function(require,module,exports){var Token=require("./../Token").Token,Errors=require("./Errors"),NoViableAltException=Errors.NoViableAltException,InputMismatchException=Errors.InputMismatchException,FailedPredicateException=Errors.FailedPredicateException,ParseCancellationException=Errors.ParseCancellationException,ATNState=require("./../atn/ATNState").ATNState,Interval=require("./../IntervalSet").Interval,IntervalSet=require("./../IntervalSet").IntervalSet;function ErrorStrategy(){}function DefaultErrorStrategy(){return ErrorStrategy.call(this),this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.lastErrorStates=null,this}function BailErrorStrategy(){return DefaultErrorStrategy.call(this),this}ErrorStrategy.prototype.reset=function(recognizer){},ErrorStrategy.prototype.recoverInline=function(recognizer){},ErrorStrategy.prototype.recover=function(recognizer,e){},ErrorStrategy.prototype.sync=function(recognizer){},ErrorStrategy.prototype.inErrorRecoveryMode=function(recognizer){},ErrorStrategy.prototype.reportError=function(recognizer){},((DefaultErrorStrategy.prototype=Object.create(ErrorStrategy.prototype)).constructor=DefaultErrorStrategy).prototype.reset=function(recognizer){this.endErrorCondition(recognizer)},DefaultErrorStrategy.prototype.beginErrorCondition=function(recognizer){this.errorRecoveryMode=!0},DefaultErrorStrategy.prototype.inErrorRecoveryMode=function(recognizer){return this.errorRecoveryMode},DefaultErrorStrategy.prototype.endErrorCondition=function(recognizer){this.errorRecoveryMode=!1,this.lastErrorStates=null,this.lastErrorIndex=-1},DefaultErrorStrategy.prototype.reportMatch=function(recognizer){this.endErrorCondition(recognizer)},DefaultErrorStrategy.prototype.reportError=function(recognizer,e){this.inErrorRecoveryMode(recognizer)||(this.beginErrorCondition(recognizer),e instanceof NoViableAltException?this.reportNoViableAlternative(recognizer,e):e instanceof InputMismatchException?this.reportInputMismatch(recognizer,e):e instanceof FailedPredicateException?this.reportFailedPredicate(recognizer,e):(console.log("unknown recognition error type: "+e.constructor.name),console.log(e.stack),recognizer.notifyErrorListeners(e.getOffendingToken(),e.getMessage(),e)))},DefaultErrorStrategy.prototype.recover=function(recognizer,e){this.lastErrorIndex===recognizer.getInputStream().index&&null!==this.lastErrorStates&&0<=this.lastErrorStates.indexOf(recognizer.state)&&recognizer.consume(),this.lastErrorIndex=recognizer._input.index,null===this.lastErrorStates&&(this.lastErrorStates=[]),this.lastErrorStates.push(recognizer.state);var followSet=this.getErrorRecoverySet(recognizer);this.consumeUntil(recognizer,followSet)},DefaultErrorStrategy.prototype.sync=function(recognizer){if(!this.inErrorRecoveryMode(recognizer)){var s=recognizer._interp.atn.states[recognizer.state],la=recognizer.getTokenStream().LA(1),nextTokens=recognizer.atn.nextTokens(s);if(!nextTokens.contains(Token.EPSILON)&&!nextTokens.contains(la))switch(s.stateType){case ATNState.BLOCK_START:case ATNState.STAR_BLOCK_START:case ATNState.PLUS_BLOCK_START:case ATNState.STAR_LOOP_ENTRY:if(null!==this.singleTokenDeletion(recognizer))return;throw new InputMismatchException(recognizer);case ATNState.PLUS_LOOP_BACK:case ATNState.STAR_LOOP_BACK:this.reportUnwantedToken(recognizer);var expecting=new IntervalSet;expecting.addSet(recognizer.getExpectedTokens());var whatFollowsLoopIterationOrRule=expecting.addSet(this.getErrorRecoverySet(recognizer));this.consumeUntil(recognizer,whatFollowsLoopIterationOrRule)}}},DefaultErrorStrategy.prototype.reportNoViableAlternative=function(recognizer,e){var tokens=recognizer.getTokenStream(),input=null!==tokens?e.startToken.type===Token.EOF?"<EOF>":tokens.getText(new Interval(e.startToken.tokenIndex,e.offendingToken.tokenIndex)):"<unknown input>",msg="no viable alternative at input "+this.escapeWSAndQuote(input);recognizer.notifyErrorListeners(msg,e.offendingToken,e)},DefaultErrorStrategy.prototype.reportInputMismatch=function(recognizer,e){var msg="mismatched input "+this.getTokenErrorDisplay(e.offendingToken)+" expecting "+e.getExpectedTokens().toString(recognizer.literalNames,recognizer.symbolicNames);recognizer.notifyErrorListeners(msg,e.offendingToken,e)},DefaultErrorStrategy.prototype.reportFailedPredicate=function(recognizer,e){var msg="rule "+recognizer.ruleNames[recognizer._ctx.ruleIndex]+" "+e.message;recognizer.notifyErrorListeners(msg,e.offendingToken,e)},DefaultErrorStrategy.prototype.reportUnwantedToken=function(recognizer){var t,msg;this.inErrorRecoveryMode(recognizer)||(this.beginErrorCondition(recognizer),t=recognizer.getCurrentToken(),msg="extraneous input "+this.getTokenErrorDisplay(t)+" expecting "+this.getExpectedTokens(recognizer).toString(recognizer.literalNames,recognizer.symbolicNames),recognizer.notifyErrorListeners(msg,t,null))},DefaultErrorStrategy.prototype.reportMissingToken=function(recognizer){var t,msg;this.inErrorRecoveryMode(recognizer)||(this.beginErrorCondition(recognizer),t=recognizer.getCurrentToken(),msg="missing "+this.getExpectedTokens(recognizer).toString(recognizer.literalNames,recognizer.symbolicNames)+" at "+this.getTokenErrorDisplay(t),recognizer.notifyErrorListeners(msg,t,null))},DefaultErrorStrategy.prototype.recoverInline=function(recognizer){var matchedSymbol=this.singleTokenDeletion(recognizer);if(null!==matchedSymbol)return recognizer.consume(),matchedSymbol;if(this.singleTokenInsertion(recognizer))return this.getMissingSymbol(recognizer);throw new InputMismatchException(recognizer)},DefaultErrorStrategy.prototype.singleTokenInsertion=function(recognizer){var currentSymbolType=recognizer.getTokenStream().LA(1),atn=recognizer._interp.atn,next=atn.states[recognizer.state].transitions[0].target;return!!atn.nextTokens(next,recognizer._ctx).contains(currentSymbolType)&&(this.reportMissingToken(recognizer),!0)},DefaultErrorStrategy.prototype.singleTokenDeletion=function(recognizer){var nextTokenType=recognizer.getTokenStream().LA(2);if(this.getExpectedTokens(recognizer).contains(nextTokenType)){this.reportUnwantedToken(recognizer),recognizer.consume();var matchedSymbol=recognizer.getCurrentToken();return this.reportMatch(recognizer),matchedSymbol}return null},DefaultErrorStrategy.prototype.getMissingSymbol=function(recognizer){var currentSymbol=recognizer.getCurrentToken(),expectedTokenType=this.getExpectedTokens(recognizer).first(),tokenText=expectedTokenType===Token.EOF?"<missing EOF>":"<missing "+recognizer.literalNames[expectedTokenType]+">",current=currentSymbol,lookback=recognizer.getTokenStream().LT(-1);return current.type===Token.EOF&&null!==lookback&&(current=lookback),recognizer.getTokenFactory().create(current.source,expectedTokenType,tokenText,Token.DEFAULT_CHANNEL,-1,-1,current.line,current.column)},DefaultErrorStrategy.prototype.getExpectedTokens=function(recognizer){return recognizer.getExpectedTokens()},DefaultErrorStrategy.prototype.getTokenErrorDisplay=function(t){if(null===t)return"<no token>";var s=t.text;return null===s&&(s=t.type===Token.EOF?"<EOF>":"<"+t.type+">"),this.escapeWSAndQuote(s)},DefaultErrorStrategy.prototype.escapeWSAndQuote=function(s){return"'"+(s=(s=(s=s.replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/\t/g,"\\t"))+"'"},DefaultErrorStrategy.prototype.getErrorRecoverySet=function(recognizer){for(var atn=recognizer._interp.atn,ctx=recognizer._ctx,recoverSet=new IntervalSet;null!==ctx&&0<=ctx.invokingState;){var rt=atn.states[ctx.invokingState].transitions[0],follow=atn.nextTokens(rt.followState);recoverSet.addSet(follow),ctx=ctx.parentCtx}return recoverSet.removeOne(Token.EPSILON),recoverSet},DefaultErrorStrategy.prototype.consumeUntil=function(recognizer,set){for(var ttype=recognizer.getTokenStream().LA(1);ttype!==Token.EOF&&!set.contains(ttype);)recognizer.consume(),ttype=recognizer.getTokenStream().LA(1)},((BailErrorStrategy.prototype=Object.create(DefaultErrorStrategy.prototype)).constructor=BailErrorStrategy).prototype.recover=function(recognizer,e){for(var context=recognizer._ctx;null!==context;)context.exception=e,context=context.parentCtx;throw new ParseCancellationException(e)},BailErrorStrategy.prototype.recoverInline=function(recognizer){this.recover(recognizer,new InputMismatchException(recognizer))},BailErrorStrategy.prototype.sync=function(recognizer){},exports.BailErrorStrategy=BailErrorStrategy,exports.DefaultErrorStrategy=DefaultErrorStrategy},{"./../IntervalSet":12,"./../Token":20,"./../atn/ATNState":28,"./Errors":45}],45:[function(require,module,exports){var PredicateTransition=require("./../atn/Transition").PredicateTransition;function RecognitionException(params){return Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,RecognitionException):(new Error).stack,this.message=params.message,this.recognizer=params.recognizer,this.input=params.input,this.ctx=params.ctx,this.offendingToken=null,this.offendingState=-1,null!==this.recognizer&&(this.offendingState=this.recognizer.state),this}function LexerNoViableAltException(lexer,input,startIndex,deadEndConfigs){return RecognitionException.call(this,{message:"",recognizer:lexer,input:input,ctx:null}),this.startIndex=startIndex,this.deadEndConfigs=deadEndConfigs,this}function NoViableAltException(recognizer,input,startToken,offendingToken,deadEndConfigs,ctx){ctx=ctx||recognizer._ctx,offendingToken=offendingToken||recognizer.getCurrentToken(),startToken=startToken||recognizer.getCurrentToken(),input=input||recognizer.getInputStream(),RecognitionException.call(this,{message:"",recognizer:recognizer,input:input,ctx:ctx}),this.deadEndConfigs=deadEndConfigs,this.startToken=startToken,this.offendingToken=offendingToken}function InputMismatchException(recognizer){RecognitionException.call(this,{message:"",recognizer:recognizer,input:recognizer.getInputStream(),ctx:recognizer._ctx}),this.offendingToken=recognizer.getCurrentToken()}function FailedPredicateException(recognizer,predicate,message){RecognitionException.call(this,{message:this.formatMessage(predicate,message||null),recognizer:recognizer,input:recognizer.getInputStream(),ctx:recognizer._ctx});var trans=recognizer._interp.atn.states[recognizer.state].transitions[0];return trans instanceof PredicateTransition?(this.ruleIndex=trans.ruleIndex,this.predicateIndex=trans.predIndex):(this.ruleIndex=0,this.predicateIndex=0),this.predicate=predicate,this.offendingToken=recognizer.getCurrentToken(),this}function ParseCancellationException(){return Error.call(this),Error.captureStackTrace(this,ParseCancellationException),this}((RecognitionException.prototype=Object.create(Error.prototype)).constructor=RecognitionException).prototype.getExpectedTokens=function(){return null!==this.recognizer?this.recognizer.atn.getExpectedTokens(this.offendingState,this.ctx):null},RecognitionException.prototype.toString=function(){return this.message},((LexerNoViableAltException.prototype=Object.create(RecognitionException.prototype)).constructor=LexerNoViableAltException).prototype.toString=function(){var symbol="";return 0<=this.startIndex&&this.startIndex<this.input.size&&(symbol=this.input.getText((this.startIndex,this.startIndex))),"LexerNoViableAltException"+symbol},(NoViableAltException.prototype=Object.create(RecognitionException.prototype)).constructor=NoViableAltException,(InputMismatchException.prototype=Object.create(RecognitionException.prototype)).constructor=InputMismatchException,((FailedPredicateException.prototype=Object.create(RecognitionException.prototype)).constructor=FailedPredicateException).prototype.formatMessage=function(predicate,message){return null!==message?message:"failed predicate: {"+predicate+"}?"},(ParseCancellationException.prototype=Object.create(Error.prototype)).constructor=ParseCancellationException,exports.RecognitionException=RecognitionException,exports.NoViableAltException=NoViableAltException,exports.LexerNoViableAltException=LexerNoViableAltException,exports.InputMismatchException=InputMismatchException,exports.FailedPredicateException=FailedPredicateException,exports.ParseCancellationException=ParseCancellationException},{"./../atn/Transition":36}],46:[function(require,module,exports){exports.RecognitionException=require("./Errors").RecognitionException,exports.NoViableAltException=require("./Errors").NoViableAltException,exports.LexerNoViableAltException=require("./Errors").LexerNoViableAltException,exports.InputMismatchException=require("./Errors").InputMismatchException,exports.FailedPredicateException=require("./Errors").FailedPredicateException,exports.DiagnosticErrorListener=require("./DiagnosticErrorListener").DiagnosticErrorListener,exports.BailErrorStrategy=require("./ErrorStrategy").BailErrorStrategy,exports.ErrorListener=require("./ErrorListener").ErrorListener},{"./DiagnosticErrorListener":42,"./ErrorListener":43,"./ErrorStrategy":44,"./Errors":45}],47:[function(require,module,exports){exports.atn=require("./atn/index"),exports.codepointat=require("./polyfills/codepointat"),exports.dfa=require("./dfa/index"),exports.fromcodepoint=require("./polyfills/fromcodepoint"),exports.tree=require("./tree/index"),exports.error=require("./error/index"),exports.Token=require("./Token").Token,exports.CharStreams=require("./CharStreams").CharStreams,exports.CommonToken=require("./Token").CommonToken,exports.InputStream=require("./InputStream").InputStream,exports.FileStream=require("./FileStream").FileStream,exports.CommonTokenStream=require("./CommonTokenStream").CommonTokenStream,exports.Lexer=require("./Lexer").Lexer,exports.Parser=require("./Parser").Parser;var pc=require("./PredictionContext");exports.PredictionContextCache=pc.PredictionContextCache,exports.ParserRuleContext=require("./ParserRuleContext").ParserRuleContext,exports.Interval=require("./IntervalSet").Interval,exports.Utils=require("./Utils")},{"./CharStreams":7,"./CommonTokenStream":9,"./FileStream":10,"./InputStream":11,"./IntervalSet":12,"./Lexer":14,"./Parser":15,"./ParserRuleContext":16,"./PredictionContext":17,"./Token":20,"./Utils":21,"./atn/index":37,"./dfa/index":41,"./error/index":46,"./polyfills/codepointat":48,"./polyfills/fromcodepoint":49,"./tree/index":52}],48:[function(require,module,exports){String.prototype.codePointAt||function(){"use strict";function codePointAt(position){if(null==this)throw TypeError();var string=String(this),size=string.length,index=position?Number(position):0;if(index!=index&&(index=0),!(index<0||size<=index)){var second,first=string.charCodeAt(index);return 55296<=first&&first<=56319&&index+1<size&&56320<=(second=string.charCodeAt(index+1))&&second<=57343?1024*(first-55296)+second-56320+65536:first}}var defineProperty=function(){try{var object={},$defineProperty=Object.defineProperty,result=$defineProperty(object,object,object)&&$defineProperty}catch(error){}return result}();defineProperty?defineProperty(String.prototype,"codePointAt",{value:codePointAt,configurable:!0,writable:!0}):String.prototype.codePointAt=codePointAt}()},{}],49:[function(require,module,exports){function fromCodePoint(_){var highSurrogate,lowSurrogate,codeUnits=[],index=-1,length=arguments.length;if(!length)return"";for(var result="";++index<length;){var codePoint=Number(arguments[index]);if(!isFinite(codePoint)||codePoint<0||1114111<codePoint||floor(codePoint)!=codePoint)throw RangeError("Invalid code point: "+codePoint);codePoint<=65535?codeUnits.push(codePoint):(highSurrogate=55296+((codePoint-=65536)>>10),lowSurrogate=codePoint%1024+56320,codeUnits.push(highSurrogate,lowSurrogate)),(index+1==length||16384<codeUnits.length)&&(result+=stringFromCharCode.apply(null,codeUnits),codeUnits.length=0)}return result}var defineProperty,stringFromCharCode,floor;String.fromCodePoint||(defineProperty=function(){try{var object={},$defineProperty=Object.defineProperty,result=$defineProperty(object,object,object)&&$defineProperty}catch(error){}return result}(),stringFromCharCode=String.fromCharCode,floor=Math.floor,defineProperty?defineProperty(String,"fromCodePoint",{value:fromCodePoint,configurable:!0,writable:!0}):String.fromCodePoint=fromCodePoint)},{}],50:[function(require,module,exports){var Token=require("./../Token").Token,Interval=require("./../IntervalSet").Interval,INVALID_INTERVAL=new Interval(-1,-2);require("../Utils.js");function Tree(){return this}function SyntaxTree(){return Tree.call(this),this}function ParseTree(){return SyntaxTree.call(this),this}function RuleNode(){return ParseTree.call(this),this}function TerminalNode(){return ParseTree.call(this),this}function ErrorNode(){return TerminalNode.call(this),this}function ParseTreeVisitor(){return this}function ParseTreeListener(){return this}function TerminalNodeImpl(symbol){return TerminalNode.call(this),this.parentCtx=null,this.symbol=symbol,this}function ErrorNodeImpl(token){return TerminalNodeImpl.call(this,token),this}function ParseTreeWalker(){return this}(SyntaxTree.prototype=Object.create(Tree.prototype)).constructor=SyntaxTree,(ParseTree.prototype=Object.create(SyntaxTree.prototype)).constructor=ParseTree,(RuleNode.prototype=Object.create(ParseTree.prototype)).constructor=RuleNode,(TerminalNode.prototype=Object.create(ParseTree.prototype)).constructor=TerminalNode,(ErrorNode.prototype=Object.create(TerminalNode.prototype)).constructor=ErrorNode,ParseTreeVisitor.prototype.visit=function(ctx){return Array.isArray(ctx)?ctx.map(function(child){return child.accept(this)},this):ctx.accept(this)},ParseTreeVisitor.prototype.visitChildren=function(ctx){return ctx.children?this.visit(ctx.children):null},ParseTreeVisitor.prototype.visitTerminal=function(node){},ParseTreeVisitor.prototype.visitErrorNode=function(node){},ParseTreeListener.prototype.visitTerminal=function(node){},ParseTreeListener.prototype.visitErrorNode=function(node){},ParseTreeListener.prototype.enterEveryRule=function(node){},ParseTreeListener.prototype.exitEveryRule=function(node){},((TerminalNodeImpl.prototype=Object.create(TerminalNode.prototype)).constructor=TerminalNodeImpl).prototype.getChild=function(i){return null},TerminalNodeImpl.prototype.getSymbol=function(){return this.symbol},TerminalNodeImpl.prototype.getParent=function(){return this.parentCtx},TerminalNodeImpl.prototype.getPayload=function(){return this.symbol},TerminalNodeImpl.prototype.getSourceInterval=function(){if(null===this.symbol)return INVALID_INTERVAL;var tokenIndex=this.symbol.tokenIndex;return new Interval(tokenIndex,tokenIndex)},TerminalNodeImpl.prototype.getChildCount=function(){return 0},TerminalNodeImpl.prototype.accept=function(visitor){return visitor.visitTerminal(this)},TerminalNodeImpl.prototype.getText=function(){return this.symbol.text},TerminalNodeImpl.prototype.toString=function(){return this.symbol.type===Token.EOF?"<EOF>":this.symbol.text},((ErrorNodeImpl.prototype=Object.create(TerminalNodeImpl.prototype)).constructor=ErrorNodeImpl).prototype.isErrorNode=function(){return!0},ErrorNodeImpl.prototype.accept=function(visitor){return visitor.visitErrorNode(this)},ParseTreeWalker.prototype.walk=function(listener,t){if(t instanceof ErrorNode||void 0!==t.isErrorNode&&t.isErrorNode())listener.visitErrorNode(t);else if(t instanceof TerminalNode)listener.visitTerminal(t);else{this.enterRule(listener,t);for(var i=0;i<t.getChildCount();i++){var child=t.getChild(i);this.walk(listener,child)}this.exitRule(listener,t)}},ParseTreeWalker.prototype.enterRule=function(listener,r){var ctx=r.getRuleContext();listener.enterEveryRule(ctx),ctx.enterRule(listener)},ParseTreeWalker.prototype.exitRule=function(listener,r){var ctx=r.getRuleContext();ctx.exitRule(listener),listener.exitEveryRule(ctx)},ParseTreeWalker.DEFAULT=new ParseTreeWalker,exports.RuleNode=RuleNode,exports.ErrorNode=ErrorNode,exports.TerminalNode=TerminalNode,exports.ErrorNodeImpl=ErrorNodeImpl,exports.TerminalNodeImpl=TerminalNodeImpl,exports.ParseTreeListener=ParseTreeListener,exports.ParseTreeVisitor=ParseTreeVisitor,exports.ParseTreeWalker=ParseTreeWalker,exports.INVALID_INTERVAL=INVALID_INTERVAL},{"../Utils.js":21,"./../IntervalSet":12,"./../Token":20}],51:[function(require,module,exports){var Utils=require("./../Utils"),Token=require("./../Token").Token,ErrorNode=(require("./Tree").RuleNode,require("./Tree").ErrorNode),TerminalNode=require("./Tree").TerminalNode,ParserRuleContext=require("./../ParserRuleContext").ParserRuleContext,RuleContext=require("./../RuleContext").RuleContext,INVALID_ALT_NUMBER=require("./../atn/ATN").INVALID_ALT_NUMBER;function Trees(){}Trees.toStringTree=function(tree,ruleNames,recog){ruleNames=ruleNames||null,null!==(recog=recog||null)&&(ruleNames=recog.ruleNames);var s=Trees.getNodeText(tree,ruleNames),s=Utils.escapeWhitespace(s,!1),c=tree.getChildCount();if(0===c)return s;var res="("+s+" ";0<c&&(s=Trees.toStringTree(tree.getChild(0),ruleNames),res=res.concat(s));for(var i=1;i<c;i++)s=Trees.toStringTree(tree.getChild(i),ruleNames),res=res.concat(" "+s);return res=res.concat(")")},Trees.getNodeText=function(t,ruleNames,recog){if(ruleNames=ruleNames||null,null!==(recog=recog||null)&&(ruleNames=recog.ruleNames),null!==ruleNames){if(t instanceof RuleContext){var altNumber=t.getAltNumber();return altNumber!=INVALID_ALT_NUMBER?ruleNames[t.ruleIndex]+":"+altNumber:ruleNames[t.ruleIndex]}if(t instanceof ErrorNode)return t.toString();if(t instanceof TerminalNode&&null!==t.symbol)return t.symbol.text}var payload=t.getPayload();return payload instanceof Token?payload.text:t.getPayload().toString()},Trees.getChildren=function(t){for(var list=[],i=0;i<t.getChildCount();i++)list.push(t.getChild(i));return list},Trees.getAncestors=function(t){var ancestors=[];for(t=t.getParent();null!==t;)ancestors=[t].concat(ancestors),t=t.getParent();return ancestors},Trees.findAllTokenNodes=function(t,ttype){return Trees.findAllNodes(t,ttype,!0)},Trees.findAllRuleNodes=function(t,ruleIndex){return Trees.findAllNodes(t,ruleIndex,!1)},Trees.findAllNodes=function(t,index,findTokens){var nodes=[];return Trees._findAllNodes(t,index,findTokens,nodes),nodes},Trees._findAllNodes=function(t,index,findTokens,nodes){findTokens&&t instanceof TerminalNode?t.symbol.type===index&&nodes.push(t):!findTokens&&t instanceof ParserRuleContext&&t.ruleIndex===index&&nodes.push(t);for(var i=0;i<t.getChildCount();i++)Trees._findAllNodes(t.getChild(i),index,findTokens,nodes)},Trees.descendants=function(t){for(var nodes=[t],i=0;i<t.getChildCount();i++)nodes=nodes.concat(Trees.descendants(t.getChild(i)));return nodes},exports.Trees=Trees},{"./../ParserRuleContext":16,"./../RuleContext":19,"./../Token":20,"./../Utils":21,"./../atn/ATN":22,"./Tree":50}],52:[function(require,module,exports){var Tree=require("./Tree");exports.Trees=require("./Trees").Trees,exports.RuleNode=Tree.RuleNode,exports.ParseTreeListener=Tree.ParseTreeListener,exports.ParseTreeVisitor=Tree.ParseTreeVisitor,exports.ParseTreeWalker=Tree.ParseTreeWalker},{"./Tree":50,"./Trees":51}],53:[function(require,module,exports){},{}],54:[function(require,module,exports){!function(root){"use strict";function cosh(x){return.5*(Math.exp(x)+Math.exp(-x))}function sinh(x){return.5*(Math.exp(x)-Math.exp(-x))}function parser_exit(){throw SyntaxError("Invalid Param")}function logHypot(a,b){var _a=Math.abs(a),_b=Math.abs(b);return 0===a?Math.log(_b):0===b?Math.log(_a):_a<3e3&&_b<3e3?.5*Math.log(a*a+b*b):Math.log(a/Math.cos(Math.atan2(b,a)))}var parse=function(a,b){var z={re:0,im:0};if(null==a)z.re=z.im=0;else if(void 0!==b)z.re=a,z.im=b;else switch(typeof a){case"object":if("im"in a&&"re"in a)z.re=a.re,z.im=a.im;else if("abs"in a&&"arg"in a){if(!Number.isFinite(a.abs)&&Number.isFinite(a.arg))return Complex.INFINITY;z.re=a.abs*Math.cos(a.arg),z.im=a.abs*Math.sin(a.arg)}else if("r"in a&&"phi"in a){if(!Number.isFinite(a.r)&&Number.isFinite(a.phi))return Complex.INFINITY;z.re=a.r*Math.cos(a.phi),z.im=a.r*Math.sin(a.phi)}else 2===a.length?(z.re=a[0],z.im=a[1]):parser_exit();break;case"string":z.im=z.re=0;var tokens=a.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),plus=1,minus=0;null===tokens&&parser_exit();for(var i=0;i<tokens.length;i++){var c=tokens[i];" "===c||"\t"===c||"\n"===c||("+"===c?plus++:"-"===c?minus++:plus=minus=("i"===c||"I"===c?(plus+minus===0&&parser_exit()," "===tokens[i+1]||isNaN(tokens[i+1])?z.im+=parseFloat((minus%2?"-":"")+"1"):(z.im+=parseFloat((minus%2?"-":"")+tokens[i+1]),i++)):(plus+minus!==0&&!isNaN(c)||parser_exit(),"i"===tokens[i+1]||"I"===tokens[i+1]?(z.im+=parseFloat((minus%2?"-":"")+c),i++):z.re+=parseFloat((minus%2?"-":"")+c)),0))}0<plus+minus&&parser_exit();break;case"number":z.im=0,z.re=a;break;default:parser_exit()}return isNaN(z.re)||isNaN(z.im),z};function Complex(a,b){if(!(this instanceof Complex))return new Complex(a,b);var z=parse(a,b);this.re=z.re,this.im=z.im}Complex.prototype={re:0,im:0,sign:function(){var abs=this.abs();return new Complex(this.re/abs,this.im/abs)},add:function(a,b){var z=new Complex(a,b);return this.isInfinite()&&z.isInfinite()?Complex.NAN:this.isInfinite()||z.isInfinite()?Complex.INFINITY:new Complex(this.re+z.re,this.im+z.im)},sub:function(a,b){var z=new Complex(a,b);return this.isInfinite()&&z.isInfinite()?Complex.NAN:this.isInfinite()||z.isInfinite()?Complex.INFINITY:new Complex(this.re-z.re,this.im-z.im)},mul:function(a,b){var z=new Complex(a,b);return this.isInfinite()&&z.isZero()||this.isZero()&&z.isInfinite()?Complex.NAN:this.isInfinite()||z.isInfinite()?Complex.INFINITY:0===z.im&&0===this.im?new Complex(this.re*z.re,0):new Complex(this.re*z.re-this.im*z.im,this.re*z.im+this.im*z.re)},div:function(a,b){var z=new Complex(a,b);if(this.isZero()&&z.isZero()||this.isInfinite()&&z.isInfinite())return Complex.NAN;if(this.isInfinite()||z.isZero())return Complex.INFINITY;if(this.isZero()||z.isInfinite())return Complex.ZERO;a=this.re,b=this.im;var t,x,c=z.re,d=z.im;return 0===d?new Complex(a/c,b/c):Math.abs(c)<Math.abs(d)?new Complex((a*(x=c/d)+b)/(t=c*x+d),(b*x-a)/t):new Complex((a+b*(x=d/c))/(t=d*x+c),(b-a*x)/t)},pow:function(a,b){var z=new Complex(a,b);if(a=this.re,b=this.im,z.isZero())return Complex.ONE;if(0===z.im){if(0===b&&0<a)return new Complex(Math.pow(a,z.re),0);if(0===a)switch((z.re%4+4)%4){case 0:return new Complex(Math.pow(b,z.re),0);case 1:return new Complex(0,Math.pow(b,z.re));case 2:return new Complex(-Math.pow(b,z.re),0);case 3:return new Complex(0,-Math.pow(b,z.re))}}if(0===a&&0===b&&0<z.re&&0<=z.im)return Complex.ZERO;var arg=Math.atan2(b,a),loh=logHypot(a,b);return a=Math.exp(z.re*loh-z.im*arg),b=z.im*loh+z.re*arg,new Complex(a*Math.cos(b),a*Math.sin(b))},sqrt:function(){var re,im,a=this.re,b=this.im,r=this.abs();if(0<=a){if(0===b)return new Complex(Math.sqrt(a),0);re=.5*Math.sqrt(2*(r+a))}else re=Math.abs(b)/Math.sqrt(2*(r-a));return im=a<=0?.5*Math.sqrt(2*(r-a)):Math.abs(b)/Math.sqrt(2*(r+a)),new Complex(re,b<0?-im:im)},exp:function(){var tmp=Math.exp(this.re);return this.im,new Complex(tmp*Math.cos(this.im),tmp*Math.sin(this.im))},expm1:function(){var a=this.re,b=this.im;return new Complex(Math.expm1(a)*Math.cos(b)+function(x){var b=Math.PI/4;if(x<-b||b<x)return Math.cos(x)-1;var xx=x*x;return xx*(xx*(xx*(xx*(xx*(xx*(xx*(xx/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(b),Math.exp(a)*Math.sin(b))},log:function(){var a=this.re,b=this.im;return new Complex(logHypot(a,b),Math.atan2(b,a))},abs:function(){return x=this.re,y=this.im,a=Math.abs(x),b=Math.abs(y),a<3e3&&b<3e3?Math.sqrt(a*a+b*b):(b=a<b?(a=b,x/y):y/x,a*Math.sqrt(1+b*b));var x,y,a,b},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var a=this.re,b=this.im;return new Complex(Math.sin(a)*cosh(b),Math.cos(a)*sinh(b))},cos:function(){var a=this.re,b=this.im;return new Complex(Math.cos(a)*cosh(b),-Math.sin(a)*sinh(b))},tan:function(){var a=2*this.re,b=2*this.im,d=Math.cos(a)+cosh(b);return new Complex(Math.sin(a)/d,sinh(b)/d)},cot:function(){var a=2*this.re,b=2*this.im,d=Math.cos(a)-cosh(b);return new Complex(-Math.sin(a)/d,sinh(b)/d)},sec:function(){var a=this.re,b=this.im,d=.5*cosh(2*b)+.5*Math.cos(2*a);return new Complex(Math.cos(a)*cosh(b)/d,Math.sin(a)*sinh(b)/d)},csc:function(){var a=this.re,b=this.im,d=.5*cosh(2*b)-.5*Math.cos(2*a);return new Complex(Math.sin(a)*cosh(b)/d,-Math.cos(a)*sinh(b)/d)},asin:function(){var a=this.re,b=this.im,t1=new Complex(b*b-a*a+1,-2*a*b).sqrt(),t2=new Complex(t1.re-b,t1.im+a).log();return new Complex(t2.im,-t2.re)},acos:function(){var a=this.re,b=this.im,t1=new Complex(b*b-a*a+1,-2*a*b).sqrt(),t2=new Complex(t1.re-b,t1.im+a).log();return new Complex(Math.PI/2-t2.im,t2.re)},atan:function(){var a=this.re,b=this.im;if(0===a){if(1===b)return new Complex(0,1/0);if(-1===b)return new Complex(0,-1/0)}var d=a*a+(1-b)*(1-b),t1=new Complex((1-b*b-a*a)/d,-2*a/d).log();return new Complex(-.5*t1.im,.5*t1.re)},acot:function(){var a=this.re,b=this.im;if(0===b)return new Complex(Math.atan2(1,a),0);var d=a*a+b*b;return 0!=d?new Complex(a/d,-b/d).atan():new Complex(0!==a?a/0:0,0!==b?-b/0:0).atan()},asec:function(){var a=this.re,b=this.im;if(0===a&&0===b)return new Complex(0,1/0);var d=a*a+b*b;return 0!=d?new Complex(a/d,-b/d).acos():new Complex(0!==a?a/0:0,0!==b?-b/0:0).acos()},acsc:function(){var a=this.re,b=this.im;if(0===a&&0===b)return new Complex(Math.PI/2,1/0);var d=a*a+b*b;return 0!=d?new Complex(a/d,-b/d).asin():new Complex(0!==a?a/0:0,0!==b?-b/0:0).asin()},sinh:function(){var a=this.re,b=this.im;return new Complex(sinh(a)*Math.cos(b),cosh(a)*Math.sin(b))},cosh:function(){var a=this.re,b=this.im;return new Complex(cosh(a)*Math.cos(b),sinh(a)*Math.sin(b))},tanh:function(){var a=2*this.re,b=2*this.im,d=cosh(a)+Math.cos(b);return new Complex(sinh(a)/d,Math.sin(b)/d)},coth:function(){var a=2*this.re,b=2*this.im,d=cosh(a)-Math.cos(b);return new Complex(sinh(a)/d,-Math.sin(b)/d)},csch:function(){var a=this.re,b=this.im,d=Math.cos(2*b)-cosh(2*a);return new Complex(-2*sinh(a)*Math.cos(b)/d,2*cosh(a)*Math.sin(b)/d)},sech:function(){var a=this.re,b=this.im,d=Math.cos(2*b)+cosh(2*a);return new Complex(2*cosh(a)*Math.cos(b)/d,-2*sinh(a)*Math.sin(b)/d)},asinh:function(){var tmp=this.im;this.im=-this.re,this.re=tmp;var res=this.asin();return this.re=-this.im,this.im=tmp,tmp=res.re,res.re=-res.im,res.im=tmp,res},acosh:function(){var tmp,res=this.acos();return res.im<=0?(tmp=res.re,res.re=-res.im,res.im=tmp):(tmp=res.im,res.im=-res.re,res.re=tmp),res},atanh:function(){var a=this.re,b=this.im,noIM=1<a&&0===b,oneMinus=1-a,onePlus=1+a,d=oneMinus*oneMinus+b*b,x=0!=d?new Complex((onePlus*oneMinus-b*b)/d,(b*oneMinus+onePlus*b)/d):new Complex(-1!==a?a/0:0,0!==b?b/0:0),temp=x.re;return x.re=logHypot(x.re,x.im)/2,x.im=Math.atan2(x.im,temp)/2,noIM&&(x.im=-x.im),x},acoth:function(){var a=this.re,b=this.im;if(0===a&&0===b)return new Complex(0,Math.PI/2);var d=a*a+b*b;return 0!=d?new Complex(a/d,-b/d).atanh():new Complex(0!==a?a/0:0,0!==b?-b/0:0).atanh()},acsch:function(){var a=this.re,b=this.im;if(0===b)return new Complex(0!==a?Math.log(a+Math.sqrt(a*a+1)):1/0,0);var d=a*a+b*b;return 0!=d?new Complex(a/d,-b/d).asinh():new Complex(0!==a?a/0:0,0!==b?-b/0:0).asinh()},asech:function(){var a=this.re,b=this.im;if(this.isZero())return Complex.INFINITY;var d=a*a+b*b;return 0!=d?new Complex(a/d,-b/d).acosh():new Complex(0!==a?a/0:0,0!==b?-b/0:0).acosh()},inverse:function(){if(this.isZero())return Complex.INFINITY;if(this.isInfinite())return Complex.ZERO;var a=this.re,b=this.im,d=a*a+b*b;return new Complex(a/d,-b/d)},conjugate:function(){return new Complex(this.re,-this.im)},neg:function(){return new Complex(-this.re,-this.im)},ceil:function(places){return places=Math.pow(10,places||0),new Complex(Math.ceil(this.re*places)/places,Math.ceil(this.im*places)/places)},floor:function(places){return places=Math.pow(10,places||0),new Complex(Math.floor(this.re*places)/places,Math.floor(this.im*places)/places)},round:function(places){return places=Math.pow(10,places||0),new Complex(Math.round(this.re*places)/places,Math.round(this.im*places)/places)},equals:function(a,b){var z=new Complex(a,b);return Math.abs(z.re-this.re)<=Complex.EPSILON&&Math.abs(z.im-this.im)<=Complex.EPSILON},clone:function(){return new Complex(this.re,this.im)},toString:function(){var a=this.re,b=this.im,ret="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(a)<Complex.EPSILON&&(a=0),Math.abs(b)<Complex.EPSILON&&(b=0),0===b?ret+a:(0!==a?(ret+=a,ret+=" ",b<0?(b=-b,ret+="-"):ret+="+",ret+=" "):b<0&&(b=-b,ret+="-"),1!==b&&(ret+=b),ret+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},Complex.ZERO=new Complex(0,0),Complex.ONE=new Complex(1,0),Complex.I=new Complex(0,1),Complex.PI=new Complex(Math.PI,0),Complex.E=new Complex(Math.E,0),Complex.INFINITY=new Complex(1/0,1/0),Complex.NAN=new Complex(NaN,NaN),Complex.EPSILON=1e-15,"object"==typeof exports?(Object.defineProperty(Complex,"__esModule",{value:!0}),(Complex.default=Complex).Complex=Complex,module.exports=Complex):root.Complex=Complex}(this)},{}],55:[function(require,module,exports){!function(globalScope){"use strict";var Decimal,inexact,noConflict,quadrant,EXP_LIMIT=9e15,MAX_DIGITS=1e9,NUMERALS="0123456789abcdef",LN10="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",PI="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",DEFAULTS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-EXP_LIMIT,maxE:EXP_LIMIT,crypto:!1},external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",precisionLimitExceeded=decimalError+"Precision limit exceeded",cryptoUnavailable=decimalError+"crypto unavailable",tag="[object Decimal]",mathfloor=Math.floor,mathpow=Math.pow,isBinary=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,isHex=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,isOctal=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BASE=1e7,LOG_BASE=7,LN10_PRECISION=LN10.length-1,PI_PRECISION=PI.length-1,P={toStringTag:tag};function digitsToString(d){var i,k,ws,indexOfLastWord=d.length-1,str="",w=d[0];if(0<indexOfLastWord){for(str+=w,i=1;i<indexOfLastWord;i++)ws=d[i]+"",(k=LOG_BASE-ws.length)&&(str+=getZeroString(k)),str+=ws;w=d[i],(k=LOG_BASE-(ws=w+"").length)&&(str+=getZeroString(k))}else if(0===w)return"0";for(;w%10==0;)w/=10;return str+w}function checkInt32(i,min,max){if(i!==~~i||i<min||max<i)throw Error(invalidArgument+i)}function checkRoundingDigits(d,i,rm,repeating){for(var di,rd,k=d[0];10<=k;k/=10)--i;return--i<0?(i+=LOG_BASE,di=0):(di=Math.ceil((i+1)/LOG_BASE),i%=LOG_BASE),k=mathpow(10,LOG_BASE-i),rd=d[di]%k|0,null==repeating?i<3?(0==i?rd=rd/100|0:1==i&&(rd=rd/10|0),rm<4&&99999==rd||3<rm&&49999==rd||5e4==rd||0==rd):(rm<4&&rd+1==k||3<rm&&rd+1==k/2)&&(d[di+1]/k/100|0)==mathpow(10,i-2)-1||(rd==k/2||0==rd)&&0==(d[di+1]/k/100|0):i<4?(0==i?rd=rd/1e3|0:1==i?rd=rd/100|0:2==i&&(rd=rd/10|0),(repeating||rm<4)&&9999==rd||!repeating&&3<rm&&4999==rd):((repeating||rm<4)&&rd+1==k||!repeating&&3<rm&&rd+1==k/2)&&(d[di+1]/k/1e3|0)==mathpow(10,i-3)-1}function convertBase(str,baseIn,baseOut){for(var j,arrL,arr=[0],i=0,strL=str.length;i<strL;){for(arrL=arr.length;arrL--;)arr[arrL]*=baseIn;for(arr[0]+=NUMERALS.indexOf(str.charAt(i++)),j=0;j<arr.length;j++)arr[j]>baseOut-1&&(void 0===arr[j+1]&&(arr[j+1]=0),arr[j+1]+=arr[j]/baseOut|0,arr[j]%=baseOut)}return arr.reverse()}P.absoluteValue=P.abs=function(){var x=new this.constructor(this);return x.s<0&&(x.s=1),finalise(x)},P.ceil=function(){return finalise(new this.constructor(this),this.e+1,2)},P.clampedTo=P.clamp=function(min,max){var x=this,Ctor=x.constructor;if(min=new Ctor(min),max=new Ctor(max),!min.s||!max.s)return new Ctor(NaN);if(min.gt(max))throw Error(invalidArgument+max);return x.cmp(min)<0?min:0<x.cmp(max)?max:new Ctor(x)},P.comparedTo=P.cmp=function(y){var i,j,xdL,ydL,x=this,xd=x.d,yd=(y=new x.constructor(y)).d,xs=x.s,ys=y.s;if(!xd||!yd)return xs&&ys?xs!==ys?xs:xd===yd?0:!xd^xs<0?1:-1:NaN;if(!xd[0]||!yd[0])return xd[0]?xs:yd[0]?-ys:0;if(xs!==ys)return xs;if(x.e!==y.e)return x.e>y.e^xs<0?1:-1;for(i=0,j=(xdL=xd.length)<(ydL=yd.length)?xdL:ydL;i<j;++i)if(xd[i]!==yd[i])return xd[i]>yd[i]^xs<0?1:-1;return xdL===ydL?0:ydL<xdL^xs<0?1:-1},P.cosine=P.cos=function(){var pr,rm,x=this,Ctor=x.constructor;return x.d?x.d[0]?(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x.e,x.sd())+LOG_BASE,Ctor.rounding=1,x=function(Ctor,x){var k,len,y;if(x.isZero())return x;y=(len=x.d.length)<32?(k=Math.ceil(len/3),(1/tinyPow(4,k)).toString()):(k=16,"2.3283064365386962890625e-10");Ctor.precision+=k,x=taylorSeries(Ctor,1,x.times(y),new Ctor(1));for(var i=k;i--;){var cos2x=x.times(x);x=cos2x.times(cos2x).minus(cos2x).times(8).plus(1)}return Ctor.precision-=k,x}(Ctor,toLessThanHalfPi(Ctor,x)),Ctor.precision=pr,Ctor.rounding=rm,finalise(2==quadrant||3==quadrant?x.neg():x,pr,rm,!0)):new Ctor(1):new Ctor(NaN)},P.cubeRoot=P.cbrt=function(){var e,m,n,r,rep,s,sd,t,t3,t3plusx,x=this,Ctor=x.constructor;if(!x.isFinite()||x.isZero())return new Ctor(x);for(external=!1,(s=x.s*mathpow(x.s*x,1/3))&&Math.abs(s)!=1/0?r=new Ctor(s.toString()):(n=digitsToString(x.d),(s=((e=x.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=mathpow(n,1/3),e=mathfloor((e+1)/3)-(e%3==(e<0?-1:2)),(r=new Ctor(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=x.s),sd=(e=Ctor.precision)+3;;)if(t3plusx=(t3=(t=r).times(t).times(t)).plus(x),r=divide(t3plusx.plus(x).times(t),t3plusx.plus(t3),sd+2,1),digitsToString(t.d).slice(0,sd)===(n=digitsToString(r.d)).slice(0,sd)){if("9999"!=(n=n.slice(sd-3,sd+1))&&(rep||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(finalise(r,e+1,1),m=!r.times(r).times(r).eq(x));break}if(!rep&&(finalise(t,e+1,0),t.times(t).times(t).eq(x))){r=t;break}sd+=4,rep=1}return external=!0,finalise(r,e,Ctor.rounding,m)},P.decimalPlaces=P.dp=function(){var w,d=this.d,n=NaN;if(d){if(n=((w=d.length-1)-mathfloor(this.e/LOG_BASE))*LOG_BASE,w=d[w])for(;w%10==0;w/=10)n--;n<0&&(n=0)}return n},P.dividedBy=P.div=function(y){return divide(this,new this.constructor(y))},P.dividedToIntegerBy=P.divToInt=function(y){var Ctor=this.constructor;return finalise(divide(this,new Ctor(y),0,1,1),Ctor.precision,Ctor.rounding)},P.equals=P.eq=function(y){return 0===this.cmp(y)},P.floor=function(){return finalise(new this.constructor(this),this.e+1,3)},P.greaterThan=P.gt=function(y){return 0<this.cmp(y)},P.greaterThanOrEqualTo=P.gte=function(y){var k=this.cmp(y);return 1==k||0===k},P.hyperbolicCosine=P.cosh=function(){var k,n,pr,rm,len,x=this,Ctor=x.constructor,one=new Ctor(1);if(!x.isFinite())return new Ctor(x.s?1/0:NaN);if(x.isZero())return one;pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x.e,x.sd())+4,Ctor.rounding=1,n=(len=x.d.length)<32?(1/tinyPow(4,k=Math.ceil(len/3))).toString():(k=16,"2.3283064365386962890625e-10"),x=taylorSeries(Ctor,1,x.times(n),new Ctor(1),!0);for(var cosh2_x,i=k,d8=new Ctor(8);i--;)cosh2_x=x.times(x),x=one.minus(cosh2_x.times(d8.minus(cosh2_x.times(d8))));return finalise(x,Ctor.precision=pr,Ctor.rounding=rm,!0)},P.hyperbolicSine=P.sinh=function(){var k,pr,rm,len,x=this,Ctor=x.constructor;if(!x.isFinite()||x.isZero())return new Ctor(x);if(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x.e,x.sd())+4,Ctor.rounding=1,(len=x.d.length)<3)x=taylorSeries(Ctor,2,x,x,!0);else{k=16<(k=1.4*Math.sqrt(len))?16:0|k,x=taylorSeries(Ctor,2,x=x.times(1/tinyPow(5,k)),x,!0);for(var sinh2_x,d5=new Ctor(5),d16=new Ctor(16),d20=new Ctor(20);k--;)sinh2_x=x.times(x),x=x.times(d5.plus(sinh2_x.times(d16.times(sinh2_x).plus(d20))))}return finalise(x,Ctor.precision=pr,Ctor.rounding=rm,!0)},P.hyperbolicTangent=P.tanh=function(){var pr,rm,x=this,Ctor=x.constructor;return x.isFinite()?x.isZero()?new Ctor(x):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+7,Ctor.rounding=1,divide(x.sinh(),x.cosh(),Ctor.precision=pr,Ctor.rounding=rm)):new Ctor(x.s)},P.inverseCosine=P.acos=function(){var halfPi,x=this,Ctor=x.constructor,k=x.abs().cmp(1),pr=Ctor.precision,rm=Ctor.rounding;return-1!==k?0===k?x.isNeg()?getPi(Ctor,pr,rm):new Ctor(0):new Ctor(NaN):x.isZero()?getPi(Ctor,pr+4,rm).times(.5):(Ctor.precision=pr+6,Ctor.rounding=1,x=x.asin(),halfPi=getPi(Ctor,pr+4,rm).times(.5),Ctor.precision=pr,Ctor.rounding=rm,halfPi.minus(x))},P.inverseHyperbolicCosine=P.acosh=function(){var pr,rm,x=this,Ctor=x.constructor;return x.lte(1)?new Ctor(x.eq(1)?0:NaN):x.isFinite()?(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(Math.abs(x.e),x.sd())+4,Ctor.rounding=1,external=!1,x=x.times(x).minus(1).sqrt().plus(x),external=!0,Ctor.precision=pr,Ctor.rounding=rm,x.ln()):new Ctor(x)},P.inverseHyperbolicSine=P.asinh=function(){var pr,rm,x=this,Ctor=x.constructor;return!x.isFinite()||x.isZero()?new Ctor(x):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+2*Math.max(Math.abs(x.e),x.sd())+6,Ctor.rounding=1,external=!1,x=x.times(x).plus(1).sqrt().plus(x),external=!0,Ctor.precision=pr,Ctor.rounding=rm,x.ln())},P.inverseHyperbolicTangent=P.atanh=function(){var pr,rm,wpr,xsd,x=this,Ctor=x.constructor;return x.isFinite()?0<=x.e?new Ctor(x.abs().eq(1)?x.s/0:x.isZero()?x:NaN):(pr=Ctor.precision,rm=Ctor.rounding,xsd=x.sd(),Math.max(xsd,pr)<2*-x.e-1?finalise(new Ctor(x),pr,rm,!0):(Ctor.precision=wpr=xsd-x.e,x=divide(x.plus(1),new Ctor(1).minus(x),wpr+pr,1),Ctor.precision=pr+4,Ctor.rounding=1,x=x.ln(),Ctor.precision=pr,Ctor.rounding=rm,x.times(.5))):new Ctor(NaN)},P.inverseSine=P.asin=function(){var halfPi,k,pr,rm,x=this,Ctor=x.constructor;return x.isZero()?new Ctor(x):(k=x.abs().cmp(1),pr=Ctor.precision,rm=Ctor.rounding,-1!==k?0===k?((halfPi=getPi(Ctor,pr+4,rm).times(.5)).s=x.s,halfPi):new Ctor(NaN):(Ctor.precision=pr+6,Ctor.rounding=1,x=x.div(new Ctor(1).minus(x.times(x)).sqrt().plus(1)).atan(),Ctor.precision=pr,Ctor.rounding=rm,x.times(2)))},P.inverseTangent=P.atan=function(){var i,j,k,n,px,t,r,wpr,x2,x=this,Ctor=x.constructor,pr=Ctor.precision,rm=Ctor.rounding;if(x.isFinite()){if(x.isZero())return new Ctor(x);if(x.abs().eq(1)&&pr+4<=PI_PRECISION)return(r=getPi(Ctor,pr+4,rm).times(.25)).s=x.s,r}else{if(!x.s)return new Ctor(NaN);if(pr+4<=PI_PRECISION)return(r=getPi(Ctor,pr+4,rm).times(.5)).s=x.s,r}for(Ctor.precision=wpr=pr+10,Ctor.rounding=1,i=k=Math.min(28,wpr/LOG_BASE+2|0);i;--i)x=x.div(x.times(x).plus(1).sqrt().plus(1));for(external=!1,j=Math.ceil(wpr/LOG_BASE),n=1,x2=x.times(x),r=new Ctor(x),px=x;-1!==i;)if(px=px.times(x2),t=r.minus(px.div(n+=2)),px=px.times(x2),void 0!==(r=t.plus(px.div(n+=2))).d[j])for(i=j;r.d[i]===t.d[i]&&i--;);return k&&(r=r.times(2<<k-1)),external=!0,finalise(r,Ctor.precision=pr,Ctor.rounding=rm,!0)},P.isFinite=function(){return!!this.d},P.isInteger=P.isInt=function(){return!!this.d&&mathfloor(this.e/LOG_BASE)>this.d.length-2},P.isNaN=function(){return!this.s},P.isNegative=P.isNeg=function(){return this.s<0},P.isPositive=P.isPos=function(){return 0<this.s},P.isZero=function(){return!!this.d&&0===this.d[0]},P.lessThan=P.lt=function(y){return this.cmp(y)<0},P.lessThanOrEqualTo=P.lte=function(y){return this.cmp(y)<1},P.logarithm=P.log=function(base){var isBase10,d,denominator,k,inf,num,sd,r,Ctor=this.constructor,pr=Ctor.precision,rm=Ctor.rounding;if(null==base)base=new Ctor(10),isBase10=!0;else{if(d=(base=new Ctor(base)).d,base.s<0||!d||!d[0]||base.eq(1))return new Ctor(NaN);isBase10=base.eq(10)}if(d=this.d,this.s<0||!d||!d[0]||this.eq(1))return new Ctor(d&&!d[0]?-1/0:1!=this.s?NaN:d?0:1/0);if(isBase10)if(1<d.length)inf=!0;else{for(k=d[0];k%10==0;)k/=10;inf=1!==k}if(external=!1,num=naturalLogarithm(this,sd=pr+5),denominator=isBase10?getLn10(Ctor,sd+10):naturalLogarithm(base,sd),checkRoundingDigits((r=divide(num,denominator,sd,1)).d,k=pr,rm))do{if(num=naturalLogarithm(this,sd+=10),denominator=isBase10?getLn10(Ctor,sd+10):naturalLogarithm(base,sd),r=divide(num,denominator,sd,1),!inf){+digitsToString(r.d).slice(k+1,k+15)+1==1e14&&(r=finalise(r,pr+1,0));break}}while(checkRoundingDigits(r.d,k+=10,rm));return external=!0,finalise(r,pr,rm)},P.minus=P.sub=function(y){var d,e,i,j,k,len,pr,rm,xd,xe,xLTy,yd,x=this,Ctor=x.constructor;if(y=new Ctor(y),!x.d||!y.d)return x.s&&y.s?x.d?y.s=-y.s:y=new Ctor(y.d||x.s!==y.s?x:NaN):y=new Ctor(NaN),y;if(x.s!=y.s)return y.s=-y.s,x.plus(y);if(xd=x.d,yd=y.d,pr=Ctor.precision,rm=Ctor.rounding,!xd[0]||!yd[0]){if(yd[0])y.s=-y.s;else{if(!xd[0])return new Ctor(3===rm?-0:0);y=new Ctor(x)}return external?finalise(y,pr,rm):y}if(e=mathfloor(y.e/LOG_BASE),xe=mathfloor(x.e/LOG_BASE),xd=xd.slice(),k=xe-e){for(len=(xLTy=k<0)?(d=xd,k=-k,yd.length):(d=yd,e=xe,xd.length),(i=Math.max(Math.ceil(pr/LOG_BASE),len)+2)<k&&(k=i,d.length=1),d.reverse(),i=k;i--;)d.push(0);d.reverse()}else{for((xLTy=(i=xd.length)<(len=yd.length))&&(len=i),i=0;i<len;i++)if(xd[i]!=yd[i]){xLTy=xd[i]<yd[i];break}k=0}for(xLTy&&(d=xd,xd=yd,yd=d,y.s=-y.s),len=xd.length,i=yd.length-len;0<i;--i)xd[len++]=0;for(i=yd.length;k<i;){if(xd[--i]<yd[i]){for(j=i;j&&0===xd[--j];)xd[j]=BASE-1;--xd[j],xd[i]+=BASE}xd[i]-=yd[i]}for(;0===xd[--len];)xd.pop();for(;0===xd[0];xd.shift())--e;return xd[0]?(y.d=xd,y.e=getBase10Exponent(xd,e),external?finalise(y,pr,rm):y):new Ctor(3===rm?-0:0)},P.modulo=P.mod=function(y){var q,x=this,Ctor=x.constructor;return y=new Ctor(y),!x.d||!y.s||y.d&&!y.d[0]?new Ctor(NaN):!y.d||x.d&&!x.d[0]?finalise(new Ctor(x),Ctor.precision,Ctor.rounding):(external=!1,9==Ctor.modulo?(q=divide(x,y.abs(),0,3,1)).s*=y.s:q=divide(x,y,0,Ctor.modulo,1),q=q.times(y),external=!0,x.minus(q))},P.naturalExponential=P.exp=function(){return naturalExponential(this)},P.naturalLogarithm=P.ln=function(){return naturalLogarithm(this)},P.negated=P.neg=function(){var x=new this.constructor(this);return x.s=-x.s,finalise(x)},P.plus=P.add=function(y){var carry,d,e,i,k,len,pr,rm,xd,yd,x=this,Ctor=x.constructor;if(y=new Ctor(y),!x.d||!y.d)return x.s&&y.s?x.d||(y=new Ctor(y.d||x.s===y.s?x:NaN)):y=new Ctor(NaN),y;if(x.s!=y.s)return y.s=-y.s,x.minus(y);if(xd=x.d,yd=y.d,pr=Ctor.precision,rm=Ctor.rounding,!xd[0]||!yd[0])return yd[0]||(y=new Ctor(x)),external?finalise(y,pr,rm):y;if(k=mathfloor(x.e/LOG_BASE),e=mathfloor(y.e/LOG_BASE),xd=xd.slice(),i=k-e){for((len=(len=i<0?(d=xd,i=-i,yd.length):(d=yd,e=k,xd.length))<(k=Math.ceil(pr/LOG_BASE))?k+1:len+1)<i&&(i=len,d.length=1),d.reverse();i--;)d.push(0);d.reverse()}for((len=xd.length)-(i=yd.length)<0&&(i=len,d=yd,yd=xd,xd=d),carry=0;i;)carry=(xd[--i]=xd[i]+yd[i]+carry)/BASE|0,xd[i]%=BASE;for(carry&&(xd.unshift(carry),++e),len=xd.length;0==xd[--len];)xd.pop();return y.d=xd,y.e=getBase10Exponent(xd,e),external?finalise(y,pr,rm):y},P.precision=P.sd=function(z){var k,x=this;if(void 0!==z&&z!==!!z&&1!==z&&0!==z)throw Error(invalidArgument+z);return x.d?(k=getPrecision(x.d),z&&x.e+1>k&&(k=x.e+1)):k=NaN,k},P.round=function(){var x=this,Ctor=x.constructor;return finalise(new Ctor(x),x.e+1,Ctor.rounding)},P.sine=P.sin=function(){var pr,rm,x=this,Ctor=x.constructor;return x.isFinite()?x.isZero()?new Ctor(x):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x.e,x.sd())+LOG_BASE,Ctor.rounding=1,x=function(Ctor,x){var k,len=x.d.length;if(len<3)return x.isZero()?x:taylorSeries(Ctor,2,x,x);k=16<(k=1.4*Math.sqrt(len))?16:0|k,x=x.times(1/tinyPow(5,k)),x=taylorSeries(Ctor,2,x,x);for(var sin2_x,d5=new Ctor(5),d16=new Ctor(16),d20=new Ctor(20);k--;)sin2_x=x.times(x),x=x.times(d5.plus(sin2_x.times(d16.times(sin2_x).minus(d20))));return x}(Ctor,toLessThanHalfPi(Ctor,x)),Ctor.precision=pr,Ctor.rounding=rm,finalise(2<quadrant?x.neg():x,pr,rm,!0)):new Ctor(NaN)},P.squareRoot=P.sqrt=function(){var m,n,sd,r,rep,t,x=this,d=x.d,e=x.e,s=x.s,Ctor=x.constructor;if(1!==s||!d||!d[0])return new Ctor(!s||s<0&&(!d||d[0])?NaN:d?x:1/0);for(external=!1,r=0==(s=Math.sqrt(+x))||s==1/0?(((n=digitsToString(d)).length+e)%2==0&&(n+="0"),s=Math.sqrt(n),e=mathfloor((e+1)/2)-(e<0||e%2),new Ctor(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)):new Ctor(s.toString()),sd=(e=Ctor.precision)+3;;)if(r=(t=r).plus(divide(x,t,sd+2,1)).times(.5),digitsToString(t.d).slice(0,sd)===(n=digitsToString(r.d)).slice(0,sd)){if("9999"!=(n=n.slice(sd-3,sd+1))&&(rep||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(finalise(r,e+1,1),m=!r.times(r).eq(x));break}if(!rep&&(finalise(t,e+1,0),t.times(t).eq(x))){r=t;break}sd+=4,rep=1}return external=!0,finalise(r,e,Ctor.rounding,m)},P.tangent=P.tan=function(){var pr,rm,x=this,Ctor=x.constructor;return x.isFinite()?x.isZero()?new Ctor(x):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+10,Ctor.rounding=1,(x=x.sin()).s=1,x=divide(x,new Ctor(1).minus(x.times(x)).sqrt(),pr+10,0),Ctor.precision=pr,Ctor.rounding=rm,finalise(2==quadrant||4==quadrant?x.neg():x,pr,rm,!0)):new Ctor(NaN)},P.times=P.mul=function(y){var carry,e,i,k,r,rL,t,xdL,ydL,x=this,Ctor=x.constructor,xd=x.d,yd=(y=new Ctor(y)).d;if(y.s*=x.s,!(xd&&xd[0]&&yd&&yd[0]))return new Ctor(!y.s||xd&&!xd[0]&&!yd||yd&&!yd[0]&&!xd?NaN:xd&&yd?0*y.s:y.s/0);for(e=mathfloor(x.e/LOG_BASE)+mathfloor(y.e/LOG_BASE),(xdL=xd.length)<(ydL=yd.length)&&(r=xd,xd=yd,yd=r,rL=xdL,xdL=ydL,ydL=rL),r=[],i=rL=xdL+ydL;i--;)r.push(0);for(i=ydL;0<=--i;){for(carry=0,k=xdL+i;i<k;)t=r[k]+yd[i]*xd[k-i-1]+carry,r[k--]=t%BASE|0,carry=t/BASE|0;r[k]=(r[k]+carry)%BASE|0}for(;!r[--rL];)r.pop();return carry?++e:r.shift(),y.d=r,y.e=getBase10Exponent(r,e),external?finalise(y,Ctor.precision,Ctor.rounding):y},P.toBinary=function(sd,rm){return toStringBinary(this,2,sd,rm)},P.toDecimalPlaces=P.toDP=function(dp,rm){var Ctor=this.constructor,x=new Ctor(this);return void 0===dp?x:(checkInt32(dp,0,MAX_DIGITS),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),finalise(x,dp+x.e+1,rm))},P.toExponential=function(dp,rm){var x=this,Ctor=x.constructor,str=void 0===dp?finiteToString(x,!0):(checkInt32(dp,0,MAX_DIGITS),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),finiteToString(x=finalise(new Ctor(x),dp+1,rm),!0,dp+1));return x.isNeg()&&!x.isZero()?"-"+str:str},P.toFixed=function(dp,rm){var y,x=this,Ctor=x.constructor,str=void 0===dp?finiteToString(x):(checkInt32(dp,0,MAX_DIGITS),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),finiteToString(y=finalise(new Ctor(x),dp+x.e+1,rm),!1,dp+y.e+1));return x.isNeg()&&!x.isZero()?"-"+str:str},P.toFraction=function(maxD){var d,d0,d1,d2,e,k,n,n0,n1,pr,q,r,x=this,xd=x.d,Ctor=x.constructor;if(!xd)return new Ctor(x);if(n1=d0=new Ctor(1),d1=n0=new Ctor(0),k=(e=(d=new Ctor(d1)).e=getPrecision(xd)-x.e-1)%LOG_BASE,d.d[0]=mathpow(10,k<0?LOG_BASE+k:k),null==maxD)maxD=0<e?d:n1;else{if(!(n=new Ctor(maxD)).isInt()||n.lt(n1))throw Error(invalidArgument+n);maxD=n.gt(d)?0<e?d:n1:n}for(external=!1,n=new Ctor(digitsToString(xd)),pr=Ctor.precision,Ctor.precision=e=xd.length*LOG_BASE*2;q=divide(n,d,0,1,1),1!=(d2=d0.plus(q.times(d1))).cmp(maxD);)d0=d1,d1=d2,d2=n1,n1=n0.plus(q.times(d2)),n0=d2,d2=d,d=n.minus(q.times(d2)),n=d2;return d2=divide(maxD.minus(d0),d1,0,1,1),n0=n0.plus(d2.times(n1)),d0=d0.plus(d2.times(d1)),n0.s=n1.s=x.s,r=divide(n1,d1,e,1).minus(x).abs().cmp(divide(n0,d0,e,1).minus(x).abs())<1?[n1,d1]:[n0,d0],Ctor.precision=pr,external=!0,r},P.toHexadecimal=P.toHex=function(sd,rm){return toStringBinary(this,16,sd,rm)},P.toNearest=function(y,rm){var Ctor=(x=this).constructor,x=new Ctor(x);if(null==y){if(!x.d)return x;y=new Ctor(1),rm=Ctor.rounding}else{if(y=new Ctor(y),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),!x.d)return y.s?x:y;if(!y.d)return y.s&&(y.s=x.s),y}return y.d[0]?(external=!1,x=divide(x,y,0,rm,1).times(y),external=!0,finalise(x)):(y.s=x.s,x=y),x},P.toNumber=function(){return+this},P.toOctal=function(sd,rm){return toStringBinary(this,8,sd,rm)},P.toPower=P.pow=function(y){var e,k,pr,r,rm,s,x=this,Ctor=x.constructor,yn=+(y=new Ctor(y));if(!(x.d&&y.d&&x.d[0]&&y.d[0]))return new Ctor(mathpow(+x,yn));if((x=new Ctor(x)).eq(1))return x;if(pr=Ctor.precision,rm=Ctor.rounding,y.eq(1))return finalise(x,pr,rm);if((e=mathfloor(y.e/LOG_BASE))>=y.d.length-1&&(k=yn<0?-yn:yn)<=9007199254740991)return r=intPow(Ctor,x,k,pr),y.s<0?new Ctor(1).div(r):finalise(r,pr,rm);if((s=x.s)<0){if(e<y.d.length-1)return new Ctor(NaN);if(0==(1&y.d[e])&&(s=1),0==x.e&&1==x.d[0]&&1==x.d.length)return x.s=s,x}return(e=0!=(k=mathpow(+x,yn))&&isFinite(k)?new Ctor(k+"").e:mathfloor(yn*(Math.log("0."+digitsToString(x.d))/Math.LN10+x.e+1)))>Ctor.maxE+1||e<Ctor.minE-1?new Ctor(0<e?s/0:0):(external=!1,Ctor.rounding=x.s=1,k=Math.min(12,(e+"").length),(r=naturalExponential(y.times(naturalLogarithm(x,pr+k)),pr)).d&&checkRoundingDigits((r=finalise(r,pr+5,1)).d,pr,rm)&&(e=pr+10,+digitsToString((r=finalise(naturalExponential(y.times(naturalLogarithm(x,e+k)),e),e+5,1)).d).slice(pr+1,pr+15)+1==1e14&&(r=finalise(r,pr+1,0))),r.s=s,external=!0,finalise(r,pr,Ctor.rounding=rm))},P.toPrecision=function(sd,rm){var x=this,Ctor=x.constructor,str=void 0===sd?finiteToString(x,x.e<=Ctor.toExpNeg||x.e>=Ctor.toExpPos):(checkInt32(sd,1,MAX_DIGITS),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),finiteToString(x=finalise(new Ctor(x),sd,rm),sd<=x.e||x.e<=Ctor.toExpNeg,sd));return x.isNeg()&&!x.isZero()?"-"+str:str},P.toSignificantDigits=P.toSD=function(sd,rm){var Ctor=this.constructor;return void 0===sd?(sd=Ctor.precision,rm=Ctor.rounding):(checkInt32(sd,1,MAX_DIGITS),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8)),finalise(new Ctor(this),sd,rm)},P.toString=function(){var x=this,Ctor=x.constructor,str=finiteToString(x,x.e<=Ctor.toExpNeg||x.e>=Ctor.toExpPos);return x.isNeg()&&!x.isZero()?"-"+str:str},P.truncated=P.trunc=function(){return finalise(new this.constructor(this),this.e+1,1)},P.valueOf=P.toJSON=function(){var x=this,Ctor=x.constructor,str=finiteToString(x,x.e<=Ctor.toExpNeg||x.e>=Ctor.toExpPos);return x.isNeg()?"-"+str:str};var divide=function(x,y,pr,rm,dp,base){var cmp,e,i,k,logBase,more,prod,prodL,q,qd,rem,remL,rem0,sd,t,xi,xL,yd0,yL,yz,Ctor=x.constructor,sign=x.s==y.s?1:-1,xd=x.d,yd=y.d;if(!(xd&&xd[0]&&yd&&yd[0]))return new Ctor(x.s&&y.s&&(xd?!yd||xd[0]!=yd[0]:yd)?xd&&0==xd[0]||!yd?0*sign:sign/0:NaN);for(e=base?(logBase=1,x.e-y.e):(base=BASE,logBase=LOG_BASE,mathfloor(x.e/logBase)-mathfloor(y.e/logBase)),yL=yd.length,xL=xd.length,qd=(q=new Ctor(sign)).d=[],i=0;yd[i]==(xd[i]||0);i++);if(yd[i]>(xd[i]||0)&&e--,null==pr?(sd=pr=Ctor.precision,rm=Ctor.rounding):sd=dp?pr+(x.e-y.e)+1:pr,sd<0)qd.push(1),more=!0;else{if(sd=sd/logBase+2|0,i=0,1==yL){for(yd=yd[k=0],sd++;(i<xL||k)&&sd--;i++)t=k*base+(xd[i]||0),qd[i]=t/yd|0,k=t%yd|0;more=k||i<xL}else{for(1<(k=base/(yd[0]+1)|0)&&(yd=multiplyInteger(yd,k,base),xd=multiplyInteger(xd,k,base),yL=yd.length,xL=xd.length),xi=yL,remL=(rem=xd.slice(0,yL)).length;remL<yL;)rem[remL++]=0;for((yz=yd.slice()).unshift(0),yd0=yd[0],yd[1]>=base/2&&++yd0;k=0,(cmp=compare(yd,rem,yL,remL))<0?(rem0=rem[0],yL!=remL&&(rem0=rem0*base+(rem[1]||0)),1<(k=rem0/yd0|0)?(base<=k&&(k=base-1),1==(cmp=compare(prod=multiplyInteger(yd,k,base),rem,prodL=prod.length,remL=rem.length))&&(k--,subtract(prod,yL<prodL?yz:yd,prodL,base))):(0==k&&(cmp=k=1),prod=yd.slice()),(prodL=prod.length)<remL&&prod.unshift(0),subtract(rem,prod,remL,base),-1==cmp&&(cmp=compare(yd,rem,yL,remL=rem.length))<1&&(k++,subtract(rem,yL<remL?yz:yd,remL,base)),remL=rem.length):0===cmp&&(k++,rem=[0]),qd[i++]=k,cmp&&rem[0]?rem[remL++]=xd[xi]||0:(rem=[xd[xi]],remL=1),(xi++<xL||void 0!==rem[0])&&sd--;);more=void 0!==rem[0]}qd[0]||qd.shift()}if(1==logBase)q.e=e,inexact=more;else{for(i=1,k=qd[0];10<=k;k/=10)i++;q.e=i+e*logBase-1,finalise(q,dp?pr+q.e+1:pr,rm,more)}return q};function multiplyInteger(x,k,base){var temp,carry=0,i=x.length;for(x=x.slice();i--;)temp=x[i]*k+carry,x[i]=temp%base|0,carry=temp/base|0;return carry&&x.unshift(carry),x}function compare(a,b,aL,bL){var i,r;if(aL!=bL)r=bL<aL?1:-1;else for(i=r=0;i<aL;i++)if(a[i]!=b[i]){r=a[i]>b[i]?1:-1;break}return r}function subtract(a,b,aL,base){for(var i=0;aL--;)a[aL]-=i,i=a[aL]<b[aL]?1:0,a[aL]=i*base+a[aL]-b[aL];for(;!a[0]&&1<a.length;)a.shift()}function finalise(x,sd,rm,isTruncated){var digits,i,j,k,rd,roundUp,w,xd,xdi,Ctor=x.constructor;out:if(null!=sd){if(!(xd=x.d))return x;for(digits=1,k=xd[0];10<=k;k/=10)digits++;if((i=sd-digits)<0)i+=LOG_BASE,j=sd,rd=(w=xd[xdi=0])/mathpow(10,digits-j-1)%10|0;else if(xdi=Math.ceil((i+1)/LOG_BASE),(k=xd.length)<=xdi){if(!isTruncated)break out;for(;k++<=xdi;)xd.push(0);w=rd=0,j=(i%=LOG_BASE)-LOG_BASE+(digits=1)}else{for(w=k=xd[xdi],digits=1;10<=k;k/=10)digits++;rd=(j=(i%=LOG_BASE)-LOG_BASE+digits)<0?0:w/mathpow(10,digits-j-1)%10|0}if(isTruncated=isTruncated||sd<0||void 0!==xd[xdi+1]||(j<0?w:w%mathpow(10,digits-j-1)),roundUp=rm<4?(rd||isTruncated)&&(0==rm||rm==(x.s<0?3:2)):5<rd||5==rd&&(4==rm||isTruncated||6==rm&&(0<i?0<j?w/mathpow(10,digits-j):0:xd[xdi-1])%10&1||rm==(x.s<0?8:7)),sd<1||!xd[0])return xd.length=0,roundUp?(sd-=x.e+1,xd[0]=mathpow(10,(LOG_BASE-sd%LOG_BASE)%LOG_BASE),x.e=-sd||0):xd[0]=x.e=0,x;if(0==i?(xd.length=xdi,k=1,xdi--):(xd.length=xdi+1,k=mathpow(10,LOG_BASE-i),xd[xdi]=0<j?(w/mathpow(10,digits-j)%mathpow(10,j)|0)*k:0),roundUp)for(;;){if(0==xdi){for(i=1,j=xd[0];10<=j;j/=10)i++;for(j=xd[0]+=k,k=1;10<=j;j/=10)k++;i!=k&&(x.e++,xd[0]==BASE&&(xd[0]=1));break}if(xd[xdi]+=k,xd[xdi]!=BASE)break;xd[xdi--]=0,k=1}for(i=xd.length;0===xd[--i];)xd.pop()}return external&&(x.e>Ctor.maxE?(x.d=null,x.e=NaN):x.e<Ctor.minE&&(x.e=0,x.d=[0])),x}function finiteToString(x,isExp,sd){if(!x.isFinite())return nonFiniteToString(x);var k,e=x.e,str=digitsToString(x.d),len=str.length;return isExp?(sd&&0<(k=sd-len)?str=str.charAt(0)+"."+str.slice(1)+getZeroString(k):1<len&&(str=str.charAt(0)+"."+str.slice(1)),str=str+(x.e<0?"e":"e+")+x.e):e<0?(str="0."+getZeroString(-e-1)+str,sd&&0<(k=sd-len)&&(str+=getZeroString(k))):len<=e?(str+=getZeroString(e+1-len),sd&&0<(k=sd-e-1)&&(str=str+"."+getZeroString(k))):((k=e+1)<len&&(str=str.slice(0,k)+"."+str.slice(k)),sd&&0<(k=sd-len)&&(e+1===len&&(str+="."),str+=getZeroString(k))),str}function getBase10Exponent(digits,e){var w=digits[0];for(e*=LOG_BASE;10<=w;w/=10)e++;return e}function getLn10(Ctor,sd,pr){if(LN10_PRECISION<sd)throw external=!0,pr&&(Ctor.precision=pr),Error(precisionLimitExceeded);return finalise(new Ctor(LN10),sd,1,!0)}function getPi(Ctor,sd,rm){if(PI_PRECISION<sd)throw Error(precisionLimitExceeded);return finalise(new Ctor(PI),sd,rm,!0)}function getPrecision(digits){var w=digits.length-1,len=w*LOG_BASE+1;if(w=digits[w]){for(;w%10==0;w/=10)len--;for(w=digits[0];10<=w;w/=10)len++}return len}function getZeroString(k){for(var zs="";k--;)zs+="0";return zs}function intPow(Ctor,x,n,pr){var isTruncated,r=new Ctor(1),k=Math.ceil(pr/LOG_BASE+4);for(external=!1;;){if(n%2&&truncate((r=r.times(x)).d,k)&&(isTruncated=!0),0===(n=mathfloor(n/2))){n=r.d.length-1,isTruncated&&0===r.d[n]&&++r.d[n];break}truncate((x=x.times(x)).d,k)}return external=!0,r}function isOdd(n){return 1&n.d[n.d.length-1]}function maxOrMin(Ctor,args,ltgt){for(var y,x=new Ctor(args[0]),i=0;++i<args.length;){if(!(y=new Ctor(args[i])).s){x=y;break}x[ltgt](y)&&(x=y)}return x}function naturalExponential(x,sd){var denominator,guard,j,pow,sum,t,wpr,rep=0,i=0,k=0,Ctor=x.constructor,rm=Ctor.rounding,pr=Ctor.precision;if(!x.d||!x.d[0]||17<x.e)return new Ctor(x.d?x.d[0]?x.s<0?0:1/0:1:x.s?x.s<0?0:x:NaN);for(wpr=null==sd?(external=!1,pr):sd,t=new Ctor(.03125);-2<x.e;)x=x.times(t),k+=5;for(wpr+=guard=Math.log(mathpow(2,k))/Math.LN10*2+5|0,denominator=pow=sum=new Ctor(1),Ctor.precision=wpr;;){if(pow=finalise(pow.times(x),wpr,1),denominator=denominator.times(++i),digitsToString((t=sum.plus(divide(pow,denominator,wpr,1))).d).slice(0,wpr)===digitsToString(sum.d).slice(0,wpr)){for(j=k;j--;)sum=finalise(sum.times(sum),wpr,1);if(null!=sd)return Ctor.precision=pr,sum;if(!(rep<3&&checkRoundingDigits(sum.d,wpr-guard,rm,rep)))return finalise(sum,Ctor.precision=pr,rm,external=!0);Ctor.precision=wpr+=10,denominator=pow=t=new Ctor(1),i=0,rep++}sum=t}}function naturalLogarithm(y,sd){var c,c0,denominator,e,numerator,rep,sum,t,wpr,x1,x2,n=1,x=y,xd=x.d,Ctor=x.constructor,rm=Ctor.rounding,pr=Ctor.precision;if(x.s<0||!xd||!xd[0]||!x.e&&1==xd[0]&&1==xd.length)return new Ctor(xd&&!xd[0]?-1/0:1!=x.s?NaN:xd?0:x);if(wpr=null==sd?(external=!1,pr):sd,Ctor.precision=wpr+=10,c0=(c=digitsToString(xd)).charAt(0),!(Math.abs(e=x.e)<15e14))return t=getLn10(Ctor,wpr+2,pr).times(e+""),x=naturalLogarithm(new Ctor(c0+"."+c.slice(1)),wpr-10).plus(t),Ctor.precision=pr,null==sd?finalise(x,pr,rm,external=!0):x;for(;c0<7&&1!=c0||1==c0&&3<c.charAt(1);)c0=(c=digitsToString((x=x.times(y)).d)).charAt(0),n++;for(e=x.e,1<c0?(x=new Ctor("0."+c),e++):x=new Ctor(c0+"."+c.slice(1)),sum=numerator=x=divide((x1=x).minus(1),x.plus(1),wpr,1),x2=finalise(x.times(x),wpr,1),denominator=3;;){if(numerator=finalise(numerator.times(x2),wpr,1),digitsToString((t=sum.plus(divide(numerator,new Ctor(denominator),wpr,1))).d).slice(0,wpr)===digitsToString(sum.d).slice(0,wpr)){if(sum=sum.times(2),0!==e&&(sum=sum.plus(getLn10(Ctor,wpr+2,pr).times(e+""))),sum=divide(sum,new Ctor(n),wpr,1),null!=sd)return Ctor.precision=pr,sum;if(!checkRoundingDigits(sum.d,wpr-10,rm,rep))return finalise(sum,Ctor.precision=pr,rm,external=!0);Ctor.precision=wpr+=10,t=numerator=x=divide(x1.minus(1),x1.plus(1),wpr,1),x2=finalise(x.times(x),wpr,1),denominator=rep=1}sum=t,denominator+=2}}function nonFiniteToString(x){return String(x.s*x.s/0)}function parseDecimal(x,str){var e,i,len;for(-1<(e=str.indexOf("."))&&(str=str.replace(".","")),0<(i=str.search(/e/i))?(e<0&&(e=i),e+=+str.slice(i+1),str=str.substring(0,i)):e<0&&(e=str.length),i=0;48===str.charCodeAt(i);i++);for(len=str.length;48===str.charCodeAt(len-1);--len);if(str=str.slice(i,len)){if(len-=i,x.e=e=e-i-1,x.d=[],i=(e+1)%LOG_BASE,e<0&&(i+=LOG_BASE),i<len){for(i&&x.d.push(+str.slice(0,i)),len-=LOG_BASE;i<len;)x.d.push(+str.slice(i,i+=LOG_BASE));str=str.slice(i),i=LOG_BASE-str.length}else i-=len;for(;i--;)str+="0";x.d.push(+str),external&&(x.e>x.constructor.maxE?(x.d=null,x.e=NaN):x.e<x.constructor.minE&&(x.e=0,x.d=[0]))}else x.e=0,x.d=[0];return x}function parseOther(x,str){var base,Ctor,divisor,i,isFloat,len,p,xd,xe;if(-1<str.indexOf("_")){if(str=str.replace(/(\d)_(?=\d)/g,"$1"),isDecimal.test(str))return parseDecimal(x,str)}else if("Infinity"===str||"NaN"===str)return+str||(x.s=NaN),x.e=NaN,x.d=null,x;if(isHex.test(str))base=16,str=str.toLowerCase();else if(isBinary.test(str))base=2;else{if(!isOctal.test(str))throw Error(invalidArgument+str);base=8}for(isFloat=0<=(i=(str=0<(i=str.search(/p/i))?(p=+str.slice(i+1),str.substring(2,i)):str.slice(2)).indexOf(".")),Ctor=x.constructor,isFloat&&(i=(len=(str=str.replace(".","")).length)-i,divisor=intPow(Ctor,new Ctor(base),i,2*i)),i=xe=(xd=convertBase(str,base,BASE)).length-1;0===xd[i];--i)xd.pop();return i<0?new Ctor(0*x.s):(x.e=getBase10Exponent(xd,xe),x.d=xd,external=!1,isFloat&&(x=divide(x,divisor,4*len)),p&&(x=x.times(Math.abs(p)<54?mathpow(2,p):Decimal.pow(2,p))),external=!0,x)}function taylorSeries(Ctor,n,x,y,isHyperbolic){var j,t,u,x2,pr=Ctor.precision,k=Math.ceil(pr/LOG_BASE);for(external=!1,x2=x.times(x),u=new Ctor(y);;){if(t=divide(u.times(x2),new Ctor(n++*n++),pr,1),u=isHyperbolic?y.plus(t):y.minus(t),y=divide(t.times(x2),new Ctor(n++*n++),pr,1),void 0!==(t=u.plus(y)).d[k]){for(j=k;t.d[j]===u.d[j]&&j--;);if(-1==j)break}j=u,u=y,y=t,t=j,0}return external=!0,t.d.length=k+1,t}function tinyPow(b,e){for(var n=b;--e;)n*=b;return n}function toLessThanHalfPi(Ctor,x){var t,isNeg=x.s<0,pi=getPi(Ctor,Ctor.precision,1),halfPi=pi.times(.5);if((x=x.abs()).lte(halfPi))return quadrant=isNeg?4:1,x;if((t=x.divToInt(pi)).isZero())quadrant=isNeg?3:2;else{if((x=x.minus(t.times(pi))).lte(halfPi))return quadrant=isOdd(t)?isNeg?2:3:isNeg?4:1,x;quadrant=isOdd(t)?isNeg?1:4:isNeg?3:2}return x.minus(pi).abs()}function toStringBinary(x,baseOut,sd,rm){var base,e,i,k,len,roundUp,str,xd,y,Ctor=x.constructor,isExp=void 0!==sd;if(isExp?(checkInt32(sd,1,MAX_DIGITS),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8)):(sd=Ctor.precision,rm=Ctor.rounding),x.isFinite()){for(isExp?(base=2,16==baseOut?sd=4*sd-3:8==baseOut&&(sd=3*sd-2)):base=baseOut,0<=(i=(str=finiteToString(x)).indexOf("."))&&(str=str.replace(".",""),(y=new Ctor(1)).e=str.length-i,y.d=convertBase(finiteToString(y),10,base),y.e=y.d.length),e=len=(xd=convertBase(str,10,base)).length;0==xd[--len];)xd.pop();if(xd[0]){if(i<0?e--:((x=new Ctor(x)).d=xd,x.e=e,xd=(x=divide(x,y,sd,rm,0,base)).d,e=x.e,roundUp=inexact),i=xd[sd],k=base/2,roundUp=roundUp||void 0!==xd[sd+1],roundUp=rm<4?(void 0!==i||roundUp)&&(0===rm||rm===(x.s<0?3:2)):k<i||i===k&&(4===rm||roundUp||6===rm&&1&xd[sd-1]||rm===(x.s<0?8:7)),xd.length=sd,roundUp)for(;++xd[--sd]>base-1;)xd[sd]=0,sd||(++e,xd.unshift(1));for(len=xd.length;!xd[len-1];--len);for(i=0,str="";i<len;i++)str+=NUMERALS.charAt(xd[i]);if(isExp){if(1<len)if(16==baseOut||8==baseOut){for(i=16==baseOut?4:3,--len;len%i;len++)str+="0";for(len=(xd=convertBase(str,base,baseOut)).length;!xd[len-1];--len);for(i=1,str="1.";i<len;i++)str+=NUMERALS.charAt(xd[i])}else str=str.charAt(0)+"."+str.slice(1);str=str+(e<0?"p":"p+")+e}else if(e<0){for(;++e;)str="0"+str;str="0."+str}else if(++e>len)for(e-=len;e--;)str+="0";else e<len&&(str=str.slice(0,e)+"."+str.slice(e))}else str=isExp?"0p+0":"0";str=(16==baseOut?"0x":2==baseOut?"0b":8==baseOut?"0o":"")+str}else str=nonFiniteToString(x);return x.s<0?"-"+str:str}function truncate(arr,len){return arr.length>len&&(arr.length=len,1)}function abs(x){return new this(x).abs()}function acos(x){return new this(x).acos()}function acosh(x){return new this(x).acosh()}function add(x,y){return new this(x).plus(y)}function asin(x){return new this(x).asin()}function asinh(x){return new this(x).asinh()}function atan(x){return new this(x).atan()}function atanh(x){return new this(x).atanh()}function atan2(y,x){y=new this(y),x=new this(x);var r,pr=this.precision,rm=this.rounding,wpr=pr+4;return y.s&&x.s?y.d||x.d?!x.d||y.isZero()?(r=x.s<0?getPi(this,pr,rm):new this(0)).s=y.s:!y.d||x.isZero()?(r=getPi(this,wpr,1).times(.5)).s=y.s:r=x.s<0?(this.precision=wpr,this.rounding=1,r=this.atan(divide(y,x,wpr,1)),x=getPi(this,wpr,1),this.precision=pr,this.rounding=rm,y.s<0?r.minus(x):r.plus(x)):this.atan(divide(y,x,wpr,1)):(r=getPi(this,wpr,1).times(0<x.s?.25:.75)).s=y.s:r=new this(NaN),r}function cbrt(x){return new this(x).cbrt()}function ceil(x){return finalise(x=new this(x),x.e+1,2)}function clamp(x,min,max){return new this(x).clamp(min,max)}function config(obj){if(!obj||"object"!=typeof obj)throw Error(decimalError+"Object expected");for(var p,v,useDefaults=!0===obj.defaults,ps=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-EXP_LIMIT,0,"toExpPos",0,EXP_LIMIT,"maxE",0,EXP_LIMIT,"minE",-EXP_LIMIT,0,"modulo",0,9],i=0;i<ps.length;i+=3)if(p=ps[i],useDefaults&&(this[p]=DEFAULTS[p]),void 0!==(v=obj[p])){if(!(mathfloor(v)===v&&ps[i+1]<=v&&v<=ps[i+2]))throw Error(invalidArgument+p+": "+v);this[p]=v}if(p="crypto",useDefaults&&(this[p]=DEFAULTS[p]),void 0!==(v=obj[p])){if(!0!==v&&!1!==v&&0!==v&&1!==v)throw Error(invalidArgument+p+": "+v);if(v){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(cryptoUnavailable);this[p]=!0}else this[p]=!1}return this}function cos(x){return new this(x).cos()}function cosh(x){return new this(x).cosh()}function div(x,y){return new this(x).div(y)}function exp(x){return new this(x).exp()}function floor(x){return finalise(x=new this(x),x.e+1,3)}function hypot(){var i,n,t=new this(0);for(external=!1,i=0;i<arguments.length;)if((n=new this(arguments[i++])).d)t.d&&(t=t.plus(n.times(n)));else{if(n.s)return external=!0,new this(1/0);t=n}return external=!0,t.sqrt()}function isDecimalInstance(obj){return obj instanceof Decimal||obj&&obj.toStringTag===tag||!1}function ln(x){return new this(x).ln()}function log(x,y){return new this(x).log(y)}function log2(x){return new this(x).log(2)}function log10(x){return new this(x).log(10)}function max(){return maxOrMin(this,arguments,"lt")}function min(){return maxOrMin(this,arguments,"gt")}function mod(x,y){return new this(x).mod(y)}function mul(x,y){return new this(x).mul(y)}function pow(x,y){return new this(x).pow(y)}function random(sd){var d,e,k,n,i=0,r=new this(1),rd=[];if(void 0===sd?sd=this.precision:checkInt32(sd,1,MAX_DIGITS),k=Math.ceil(sd/LOG_BASE),this.crypto)if(crypto.getRandomValues)for(d=crypto.getRandomValues(new Uint32Array(k));i<k;)429e7<=(n=d[i])?d[i]=crypto.getRandomValues(new Uint32Array(1))[0]:rd[i++]=n%1e7;else{if(!crypto.randomBytes)throw Error(cryptoUnavailable);for(d=crypto.randomBytes(k*=4);i<k;)214e7<=(n=d[i]+(d[i+1]<<8)+(d[i+2]<<16)+((127&d[i+3])<<24))?crypto.randomBytes(4).copy(d,i):(rd.push(n%1e7),i+=4);i=k/4}else for(;i<k;)rd[i++]=1e7*Math.random()|0;for(k=rd[--i],sd%=LOG_BASE,k&&sd&&(n=mathpow(10,LOG_BASE-sd),rd[i]=(k/n|0)*n);0===rd[i];i--)rd.pop();if(i<0)rd=[e=0];else{for(e=-1;0===rd[0];e-=LOG_BASE)rd.shift();for(k=1,n=rd[0];10<=n;n/=10)k++;k<LOG_BASE&&(e-=LOG_BASE-k)}return r.e=e,r.d=rd,r}function round(x){return finalise(x=new this(x),x.e+1,this.rounding)}function sign(x){return(x=new this(x)).d?x.d[0]?x.s:0*x.s:x.s||NaN}function sin(x){return new this(x).sin()}function sinh(x){return new this(x).sinh()}function sqrt(x){return new this(x).sqrt()}function sub(x,y){return new this(x).sub(y)}function sum(){var i=0,args=arguments,x=new this(args[i]);for(external=!1;x.s&&++i<args.length;)x=x.plus(args[i]);return external=!0,finalise(x,this.precision,this.rounding)}function tan(x){return new this(x).tan()}function tanh(x){return new this(x).tanh()}function trunc(x){return finalise(x=new this(x),x.e+1,1)}((Decimal=function clone(obj){var i,p,ps;function Decimal(v){var e,i,t,x=this;if(!(x instanceof Decimal))return new Decimal(v);if(x.constructor=Decimal,isDecimalInstance(v))return x.s=v.s,void(external?!v.d||v.e>Decimal.maxE?(x.e=NaN,x.d=null):v.e<Decimal.minE?(x.e=0,x.d=[0]):(x.e=v.e,x.d=v.d.slice()):(x.e=v.e,x.d=v.d?v.d.slice():v.d));if("number"==(t=typeof v)){if(0===v)return x.s=1/v<0?-1:1,x.e=0,void(x.d=[0]);if(v<0?(v=-v,x.s=-1):x.s=1,v===~~v&&v<1e7){for(e=0,i=v;10<=i;i/=10)e++;return void(external?Decimal.maxE<e?(x.e=NaN,x.d=null):e<Decimal.minE?(x.e=0,x.d=[0]):(x.e=e,x.d=[v]):(x.e=e,x.d=[v]))}return 0*v!=0?(v||(x.s=NaN),x.e=NaN,void(x.d=null)):parseDecimal(x,v.toString())}if("string"!=t)throw Error(invalidArgument+v);return 45===(i=v.charCodeAt(0))?(v=v.slice(1),x.s=-1):(43===i&&(v=v.slice(1)),x.s=1),(isDecimal.test(v)?parseDecimal:parseOther)(x,v)}if(Decimal.prototype=P,Decimal.ROUND_UP=0,Decimal.ROUND_DOWN=1,Decimal.ROUND_CEIL=2,Decimal.ROUND_FLOOR=3,Decimal.ROUND_HALF_UP=4,Decimal.ROUND_HALF_DOWN=5,Decimal.ROUND_HALF_EVEN=6,Decimal.ROUND_HALF_CEIL=7,Decimal.ROUND_HALF_FLOOR=8,Decimal.EUCLID=9,Decimal.config=Decimal.set=config,Decimal.clone=clone,Decimal.isDecimal=isDecimalInstance,Decimal.abs=abs,Decimal.acos=acos,Decimal.acosh=acosh,Decimal.add=add,Decimal.asin=asin,Decimal.asinh=asinh,Decimal.atan=atan,Decimal.atanh=atanh,Decimal.atan2=atan2,Decimal.cbrt=cbrt,Decimal.ceil=ceil,Decimal.clamp=clamp,Decimal.cos=cos,Decimal.cosh=cosh,Decimal.div=div,Decimal.exp=exp,Decimal.floor=floor,Decimal.hypot=hypot,Decimal.ln=ln,Decimal.log=log,Decimal.log10=log10,Decimal.log2=log2,Decimal.max=max,Decimal.min=min,Decimal.mod=mod,Decimal.mul=mul,Decimal.pow=pow,Decimal.random=random,Decimal.round=round,Decimal.sign=sign,Decimal.sin=sin,Decimal.sinh=sinh,Decimal.sqrt=sqrt,Decimal.sub=sub,Decimal.sum=sum,Decimal.tan=tan,Decimal.tanh=tanh,Decimal.trunc=trunc,void 0===obj&&(obj={}),obj&&!0!==obj.defaults)for(ps=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],i=0;i<ps.length;)obj.hasOwnProperty(p=ps[i++])||(obj[p]=this[p]);return Decimal.config(obj),Decimal}(DEFAULTS)).prototype.constructor=Decimal).default=Decimal.Decimal=Decimal,LN10=new Decimal(LN10),PI=new Decimal(PI),void 0!==module&&module.exports?("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(P[Symbol.for("nodejs.util.inspect.custom")]=P.toString,P[Symbol.toStringTag]="Decimal"),module.exports=Decimal):(globalScope=globalScope||("undefined"!=typeof self&&self&&self.self==self?self:window),noConflict=globalScope.Decimal,Decimal.noConflict=function(){return globalScope.Decimal=noConflict,Decimal},globalScope.Decimal=Decimal)}(this)},{}],56:[function(require,module,exports){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},defaultEscapes={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},formatEscapes={"\u2013":"\\--","\u2014":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},defaultEscapeMapFn=function(defaultEscapes,formatEscapes){return _extends({},defaultEscapes,formatEscapes)};module.exports=function(str){for(var _ref=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_ref$preserveFormatti=_ref.preserveFormatting,preserveFormatting=void 0!==_ref$preserveFormatti&&_ref$preserveFormatti,_ref$escapeMapFn=_ref.escapeMapFn,escapeMapFn=void 0===_ref$escapeMapFn?defaultEscapeMapFn:_ref$escapeMapFn,runningStr=String(str),result="",escapes=escapeMapFn(_extends({},defaultEscapes),preserveFormatting?_extends({},formatEscapes):{}),escapeKeys=Object.keys(escapes);runningStr;)!function(){var specialCharFound=!1;escapeKeys.forEach(function(key,index){specialCharFound||runningStr.length>=key.length&&runningStr.slice(0,key.length)===key&&(result+=escapes[escapeKeys[index]],runningStr=runningStr.slice(key.length,runningStr.length),specialCharFound=!0)}),specialCharFound||(result+=runningStr.slice(0,1),runningStr=runningStr.slice(1,runningStr.length))}();return result}},{}],57:[function(require,module,exports){!function(root){"use strict";var P={s:1,n:0,d:1};function createError(name){function errorConstructor(){var temp=Error.apply(this,arguments);temp.name=this.name=name,this.stack=temp.stack,this.message=temp.message}function IntermediateInheritor(){}return IntermediateInheritor.prototype=Error.prototype,errorConstructor.prototype=new IntermediateInheritor,errorConstructor}var DivisionByZero=Fraction.DivisionByZero=createError("DivisionByZero"),InvalidParameter=Fraction.InvalidParameter=createError("InvalidParameter");function assign(n,s){return isNaN(n=parseInt(n,10))&&throwInvalidParam(),n*s}function throwInvalidParam(){throw new InvalidParameter}function factorize(num){for(var factors={},n=num,i=2,s=4;s<=n;){for(;n%i==0;)n/=i,factors[i]=(factors[i]||0)+1;s+=1+2*i++}return n!==num?1<n&&(factors[n]=(factors[n]||0)+1):factors[num]=(factors[num]||0)+1,factors}var parse=function(p1,p2){var M,n=0,d=1,s=1,v=0,w=0,x=0,y=1,z=1,A=0,B=1,C=1,D=1,N=1e7;if(null!=p1)if(void 0!==p2)s=(n=p1)*(d=p2);else switch(typeof p1){case"object":"d"in p1&&"n"in p1?(n=p1.n,d=p1.d,"s"in p1&&(n*=p1.s)):0 in p1?(n=p1[0],1 in p1&&(d=p1[1])):throwInvalidParam(),s=n*d;break;case"number":if(p1<0&&(p1=-(s=p1)),p1%1==0)n=p1;else if(0<p1){for(1<=p1&&(p1/=z=Math.pow(10,Math.floor(1+Math.log(p1)/Math.LN10)));B<=N&&D<=N;){if(p1===(M=(A+C)/(B+D))){d=B+D<=N?(n=A+C,B+D):B<D?(n=C,D):(n=A,B);break}M<p1?(A+=C,B+=D):(C+=A,D+=B),d=N<B?(n=C,D):(n=A,B)}n*=z}else(isNaN(p1)||isNaN(p2))&&(d=n=NaN);break;case"string":if(null===(B=p1.match(/\d+|./g))&&throwInvalidParam(),"-"===B[A]?(s=-1,A++):"+"===B[A]&&A++,B.length===A+1?w=assign(B[A++],s):"."===B[A+1]||"."===B[A]?("."!==B[A]&&(v=assign(B[A++],s)),(++A+1===B.length||"("===B[A+1]&&")"===B[A+3]||"'"===B[A+1]&&"'"===B[A+3])&&(w=assign(B[A],s),y=Math.pow(10,B[A].length),A++),("("===B[A]&&")"===B[A+2]||"'"===B[A]&&"'"===B[A+2])&&(x=assign(B[A+1],s),z=Math.pow(10,B[A+1].length)-1,A+=3)):"/"===B[A+1]||":"===B[A+1]?(w=assign(B[A],s),y=assign(B[A+2],1),A+=3):"/"===B[A+3]&&" "===B[A+1]&&(v=assign(B[A],s),w=assign(B[A+2],s),y=assign(B[A+4],1),A+=5),B.length<=A){s=n=x+(d=y*z)*v+z*w;break}default:throwInvalidParam()}if(0===d)throw new DivisionByZero;P.s=s<0?-1:1,P.n=Math.abs(n),P.d=Math.abs(d)};function cycleStart(n,d,len){for(var rem1=1,rem2=function(b,e,m){for(var r=1;0<e;b=b*b%m,e>>=1)1&e&&(r=r*b%m);return r}(10,len,d),t=0;t<300;t++){if(rem1===rem2)return t;rem1=10*rem1%d,rem2=10*rem2%d}return 0}function gcd(a,b){if(!a)return b;if(!b)return a;for(;;){if(!(a%=b))return b;if(!(b%=a))return a}}function Fraction(a,b){if(!(this instanceof Fraction))return new Fraction(a,b);parse(a,b),a=gcd(P.d,P.n),this.s=P.s,this.n=P.n/a,this.d=P.d/a}Fraction.prototype={s:1,n:0,d:1,abs:function(){return new Fraction(this.n,this.d)},neg:function(){return new Fraction(-this.s*this.n,this.d)},add:function(a,b){return parse(a,b),new Fraction(this.s*this.n*P.d+P.s*this.d*P.n,this.d*P.d)},sub:function(a,b){return parse(a,b),new Fraction(this.s*this.n*P.d-P.s*this.d*P.n,this.d*P.d)},mul:function(a,b){return parse(a,b),new Fraction(this.s*P.s*this.n*P.n,this.d*P.d)},div:function(a,b){return parse(a,b),new Fraction(this.s*P.s*this.n*P.d,this.d*P.n)},clone:function(){return new Fraction(this)},mod:function(a,b){return isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):void 0===a?new Fraction(this.s*this.n%this.d,1):(parse(a,b),0===P.n&&0===this.d&&Fraction(0,0),new Fraction(this.s*(P.d*this.n)%(P.n*this.d),P.d*this.d))},gcd:function(a,b){return parse(a,b),new Fraction(gcd(P.n,this.n)*gcd(P.d,this.d),P.d*this.d)},lcm:function(a,b){return parse(a,b),0===P.n&&0===this.n?new Fraction:new Fraction(P.n*this.n,gcd(P.n,this.n)*gcd(P.d,this.d))},ceil:function(places){return places=Math.pow(10,places||0),isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):new Fraction(Math.ceil(places*this.s*this.n/this.d),places)},floor:function(places){return places=Math.pow(10,places||0),isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):new Fraction(Math.floor(places*this.s*this.n/this.d),places)},round:function(places){return places=Math.pow(10,places||0),isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):new Fraction(Math.round(places*this.s*this.n/this.d),places)},inverse:function(){return new Fraction(this.s*this.d,this.n)},pow:function(a,b){if(parse(a,b),1===P.d)return P.s<0?new Fraction(Math.pow(this.s*this.d,P.n),Math.pow(this.n,P.n)):new Fraction(Math.pow(this.s*this.n,P.n),Math.pow(this.d,P.n));if(this.s<0)return null;var N=factorize(this.n),D=factorize(this.d),n=1,d=1;for(var k in N)if("1"!==k){if("0"===k){n=0;break}if(N[k]*=P.n,N[k]%P.d!=0)return null;N[k]/=P.d,n*=Math.pow(k,N[k])}for(var k in D)if("1"!==k){if(D[k]*=P.n,D[k]%P.d!=0)return null;D[k]/=P.d,d*=Math.pow(k,D[k])}return P.s<0?new Fraction(d,n):new Fraction(n,d)},equals:function(a,b){return parse(a,b),this.s*this.n*P.d==P.s*P.n*this.d},compare:function(a,b){parse(a,b);var t=this.s*this.n*P.d-P.s*P.n*this.d;return(0<t)-(t<0)},simplify:function(eps){if(isNaN(this.n)||isNaN(this.d))return this;var cont=this.abs().toContinued();eps=eps||.001;for(var i=0;i<cont.length;i++){var tmp=function rec(a){return 1===a.length?new Fraction(a[0]):rec(a.slice(1)).inverse().add(a[0])}(cont.slice(0,i+1));if(tmp.sub(this.abs()).abs().valueOf()<eps)return tmp.mul(this.s)}return this},divisible:function(a,b){return parse(a,b),!(!(P.n*this.d)||this.n*P.d%(P.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(excludeWhole){var whole,str="",n=this.n,d=this.d;return this.s<0&&(str+="-"),1===d?str+=n:(excludeWhole&&0<(whole=Math.floor(n/d))&&(str+=whole,str+=" ",n%=d),str+=n,str+="/",str+=d),str},toLatex:function(excludeWhole){var whole,str="",n=this.n,d=this.d;return this.s<0&&(str+="-"),1===d?str+=n:(excludeWhole&&0<(whole=Math.floor(n/d))&&(str+=whole,n%=d),str+="\\frac{",str+=n,str+="}{",str+=d,str+="}"),str},toContinued:function(){var t,a=this.n,b=this.d,res=[];if(isNaN(a)||isNaN(b))return res;for(;res.push(Math.floor(a/b)),t=a%b,a=b,b=t,1!==a;);return res},toString:function(dec){var N=this.n,D=this.d;if(isNaN(N)||isNaN(D))return"NaN";dec=dec||15;var cycLen=function(d){for(;d%2==0;d/=2);for(;d%5==0;d/=5);if(1===d)return 0;for(var rem=10%d,t=1;1!==rem;t++)if(rem=10*rem%d,2e3<t)return 0;return t}(D),cycOff=cycleStart(0,D,cycLen),str=-1===this.s?"-":"";if(str+=N/D|0,N%=D,(N*=10)&&(str+="."),cycLen){for(var i=cycOff;i--;)str+=N/D|0,N%=D,N*=10;str+="(";for(i=cycLen;i--;)str+=N/D|0,N%=D,N*=10;str+=")"}else for(i=dec;N&&i--;)str+=N/D|0,N%=D,N*=10;return str}},"object"==typeof exports?(Object.defineProperty(Fraction,"__esModule",{value:!0}),(Fraction.default=Fraction).Fraction=Fraction,module.exports=Fraction):root.Fraction=Fraction}(this)},{}],58:[function(require,module,exports){module.exports=function naturalSort(a,b){"use strict";function i(s){return naturalSort.insensitive&&(""+s).toLowerCase()||""+s}var oFxNcL,oFyNcL,re=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,sre=/(^[ ]*|[ ]*$)/g,dre=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,hre=/^0x[0-9a-f]+$/i,ore=/^0/,x=i(a).replace(sre,"")||"",y=i(b).replace(sre,"")||"",xN=x.replace(re,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),yN=y.replace(re,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),xD=parseInt(x.match(hre),16)||1!==xN.length&&x.match(dre)&&Date.parse(x),yD=parseInt(y.match(hre),16)||xD&&y.match(dre)&&Date.parse(y)||null;if(yD){if(xD<yD)return-1;if(yD<xD)return 1}for(var cLoc=0,numS=Math.max(xN.length,yN.length);cLoc<numS;cLoc++){if(oFxNcL=!(xN[cLoc]||"").match(ore)&&parseFloat(xN[cLoc])||xN[cLoc]||0,oFyNcL=!(yN[cLoc]||"").match(ore)&&parseFloat(yN[cLoc])||yN[cLoc]||0,isNaN(oFxNcL)!==isNaN(oFyNcL))return isNaN(oFxNcL)?1:-1;if(typeof oFxNcL!=typeof oFyNcL&&(oFxNcL+="",oFyNcL+=""),oFxNcL<oFyNcL)return-1;if(oFyNcL<oFxNcL)return 1}return 0}},{}],59:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createVersion=exports.createUppercaseE=exports.createUppercasePi=exports.createI=exports.createSQRT2=exports.createSQRT1_2=exports.createLOG10E=exports.createLOG2E=exports.createLN10=exports.createLN2=exports.createPhi=exports.createE=exports.createTau=exports.createPi=exports.createNaN=exports.createInfinity=exports.createNull=exports.createFalse=exports.createTrue=void 0;var _factory=require("./utils/factory"),_version=require("./version"),_constants=require("./utils/bignumber/constants"),_number=require("./plain/number"),createTrue=(0,_factory.factory)("true",[],function(){return!0});exports.createTrue=createTrue;var createFalse=(0,_factory.factory)("false",[],function(){return!1});exports.createFalse=createFalse;var createNull=(0,_factory.factory)("null",[],function(){return null});exports.createNull=createNull;var createInfinity=recreateFactory("Infinity",["config","?BigNumber"],function(_ref){var config=_ref.config,BigNumber=_ref.BigNumber;return"BigNumber"===config.number?new BigNumber(1/0):1/0});exports.createInfinity=createInfinity;var createNaN=recreateFactory("NaN",["config","?BigNumber"],function(_ref2){var config=_ref2.config,BigNumber=_ref2.BigNumber;return"BigNumber"===config.number?new BigNumber(NaN):NaN});exports.createNaN=createNaN;var createPi=recreateFactory("pi",["config","?BigNumber"],function(_ref3){var config=_ref3.config,BigNumber=_ref3.BigNumber;return"BigNumber"===config.number?(0,_constants.createBigNumberPi)(BigNumber):_number.pi});exports.createPi=createPi;var createTau=recreateFactory("tau",["config","?BigNumber"],function(_ref4){var config=_ref4.config,BigNumber=_ref4.BigNumber;return"BigNumber"===config.number?(0,_constants.createBigNumberTau)(BigNumber):_number.tau});exports.createTau=createTau;var createE=recreateFactory("e",["config","?BigNumber"],function(_ref5){var config=_ref5.config,BigNumber=_ref5.BigNumber;return"BigNumber"===config.number?(0,_constants.createBigNumberE)(BigNumber):_number.e});exports.createE=createE;var createPhi=recreateFactory("phi",["config","?BigNumber"],function(_ref6){var config=_ref6.config,BigNumber=_ref6.BigNumber;return"BigNumber"===config.number?(0,_constants.createBigNumberPhi)(BigNumber):_number.phi});exports.createPhi=createPhi;var createLN2=recreateFactory("LN2",["config","?BigNumber"],function(_ref7){var config=_ref7.config,BigNumber=_ref7.BigNumber;return"BigNumber"===config.number?new BigNumber(2).ln():Math.LN2});exports.createLN2=createLN2;var createLN10=recreateFactory("LN10",["config","?BigNumber"],function(_ref8){var config=_ref8.config,BigNumber=_ref8.BigNumber;return"BigNumber"===config.number?new BigNumber(10).ln():Math.LN10});exports.createLN10=createLN10;var createLOG2E=recreateFactory("LOG2E",["config","?BigNumber"],function(_ref9){var config=_ref9.config,BigNumber=_ref9.BigNumber;return"BigNumber"===config.number?new BigNumber(1).div(new BigNumber(2).ln()):Math.LOG2E});exports.createLOG2E=createLOG2E;var createLOG10E=recreateFactory("LOG10E",["config","?BigNumber"],function(_ref10){var config=_ref10.config,BigNumber=_ref10.BigNumber;return"BigNumber"===config.number?new BigNumber(1).div(new BigNumber(10).ln()):Math.LOG10E});exports.createLOG10E=createLOG10E;var createSQRT1_2=recreateFactory("SQRT1_2",["config","?BigNumber"],function(_ref11){var config=_ref11.config,BigNumber=_ref11.BigNumber;return"BigNumber"===config.number?new BigNumber("0.5").sqrt():Math.SQRT1_2});exports.createSQRT1_2=createSQRT1_2;var createSQRT2=recreateFactory("SQRT2",["config","?BigNumber"],function(_ref12){var config=_ref12.config,BigNumber=_ref12.BigNumber;return"BigNumber"===config.number?new BigNumber(2).sqrt():Math.SQRT2});exports.createSQRT2=createSQRT2;var createI=recreateFactory("i",["Complex"],function(_ref13){return _ref13.Complex.I});exports.createI=createI;var createUppercasePi=(0,_factory.factory)("PI",["pi"],function(_ref14){return _ref14.pi});exports.createUppercasePi=createUppercasePi;var createUppercaseE=(0,_factory.factory)("E",["e"],function(_ref15){return _ref15.e});exports.createUppercaseE=createUppercaseE;var createVersion=(0,_factory.factory)("version",[],function(){return _version.version});function recreateFactory(name,dependencies,create){return(0,_factory.factory)(name,dependencies,create,{recreateOnConfigChange:!0})}exports.createVersion=createVersion},{"./plain/number":874,"./utils/bignumber/constants":924,"./utils/factory":931,"./version":942}],60:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_CONFIG=void 0;exports.DEFAULT_CONFIG={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null}},{}],61:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=create,require("./../utils/polyfills");var _object=require("./../utils/object"),emitter=function(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){var desc;Object.prototype.hasOwnProperty.call(obj,key)&&((desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null)&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key])}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(require("./../utils/emitter")),_import=require("./function/import"),_config=require("./function/config"),_factory=require("../utils/factory"),_is=require("../utils/is"),_array=require("../utils/array"),_log=require("../utils/log"),_ArgumentsError=require("../error/ArgumentsError"),_DimensionError=require("../error/DimensionError"),_IndexError=require("../error/IndexError"),_config2=require("./config");function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function create(factories,config){var configInternal=_extends({},_config2.DEFAULT_CONFIG,config);if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var math=emitter.mixin({isNumber:_is.isNumber,isComplex:_is.isComplex,isBigNumber:_is.isBigNumber,isFraction:_is.isFraction,isUnit:_is.isUnit,isString:_is.isString,isArray:_is.isArray,isMatrix:_is.isMatrix,isCollection:_is.isCollection,isDenseMatrix:_is.isDenseMatrix,isSparseMatrix:_is.isSparseMatrix,isRange:_is.isRange,isIndex:_is.isIndex,isBoolean:_is.isBoolean,isResultSet:_is.isResultSet,isHelp:_is.isHelp,isFunction:_is.isFunction,isDate:_is.isDate,isRegExp:_is.isRegExp,isObject:_is.isObject,isNull:_is.isNull,isUndefined:_is.isUndefined,isAccessorNode:_is.isAccessorNode,isArrayNode:_is.isArrayNode,isAssignmentNode:_is.isAssignmentNode,isBlockNode:_is.isBlockNode,isConditionalNode:_is.isConditionalNode,isConstantNode:_is.isConstantNode,isFunctionAssignmentNode:_is.isFunctionAssignmentNode,isFunctionNode:_is.isFunctionNode,isIndexNode:_is.isIndexNode,isNode:_is.isNode,isObjectNode:_is.isObjectNode,isOperatorNode:_is.isOperatorNode,isParenthesisNode:_is.isParenthesisNode,isRangeNode:_is.isRangeNode,isSymbolNode:_is.isSymbolNode,isChain:_is.isChain});math.config=(0,_config.configFactory)(configInternal,math.emit),math.expression={transform:{},mathWithTransform:{config:math.config}};var legacyFactories=[],legacyInstances=[];var importedFactories={};var internalImport=(0,_import.importFactory)(function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return math.typed.apply(math.typed,args)},function load(factory){if((0,_factory.isFactory)(factory))return factory(math);var firstProperty=factory[Object.keys(factory)[0]];if((0,_factory.isFactory)(firstProperty))return firstProperty(math);if(!(0,_object.isLegacyFactory)(factory))throw console.warn("Factory object with properties `type`, `name`, and `factory` expected",factory),new Error("Factory object with properties `type`, `name`, and `factory` expected");var instance,index=legacyFactories.indexOf(factory);return-1===index?(instance=!0===factory.math?factory.factory(math.type,configInternal,load,math.typed,math):factory.factory(math.type,configInternal,load,math.typed),legacyFactories.push(factory),legacyInstances.push(instance)):instance=legacyInstances[index],instance},math,importedFactories);math.import=internalImport,math.on("config",function(){(0,_object.values)(importedFactories).forEach(function(factory){factory&&factory.meta&&factory.meta.recreateOnConfigChange&&internalImport(factory,{override:!0})})}),math.create=create.bind(null,factories),math.factory=_factory.factory,math.import((0,_object.values)((0,_object.deepFlatten)(factories)));return["type.isNumber","type.isComplex","type.isBigNumber","type.isFraction","type.isUnit","type.isString","type.isArray","type.isMatrix","type.isDenseMatrix","type.isSparseMatrix","type.isCollection","type.isRange","type.isIndex","type.isBoolean","type.isResultSet","type.isHelp","type.isFunction","type.isDate","type.isRegExp","type.isObject","type.isNull","type.isUndefined","type.isAccessorNode","type.isArrayNode","type.isAssignmentNode","type.isBlockNode","type.isConditionalNode","type.isConstantNode","type.isFunctionAssignmentNode","type.isFunctionNode","type.isIndexNode","type.isNode","type.isObjectNode","type.isOperatorNode","type.isParenthesisNode","type.isRangeNode","type.isSymbolNode","type.isChain","type.BigNumber","type.Chain","type.Complex","type.Fraction","type.Matrix","type.DenseMatrix","type.SparseMatrix","type.Spa","type.FibonacciHeap","type.ImmutableDenseMatrix","type.Index","type.Range","type.ResultSet","type.Unit","type.Help","type.Parser","expression.parse","expression.Parser","expression.node.AccessorNode","expression.node.ArrayNode","expression.node.AssignmentNode","expression.node.BlockNode","expression.node.ConditionalNode","expression.node.ConstantNode","expression.node.IndexNode","expression.node.FunctionAssignmentNode","expression.node.FunctionNode","expression.node.Node","expression.node.ObjectNode","expression.node.OperatorNode","expression.node.ParenthesisNode","expression.node.RangeNode","expression.node.RelationalNode","expression.node.SymbolNode","json.reviver","error.ArgumentsError","error.DimensionError","error.IndexError"].forEach(function(fullName){var parts=fullName.split("."),path=(0,_array.initial)(parts),name=(0,_array.last)(parts),obj=(0,_object.traverse)(math,path);(0,_object.lazy)(obj,name,function(){return(0,_log.warnOnce)("math.".concat(fullName," is moved to math.").concat(name," in v6.0.0. ")+"Please use the new location instead."),math[name]})}),(0,_object.lazy)(math.expression,"docs",function(){throw new Error("math.expression.docs has been moved. Please import via \"import { docs } from 'mathjs'\"")}),math.ArgumentsError=_ArgumentsError.ArgumentsError,math.DimensionError=_DimensionError.DimensionError,math.IndexError=_IndexError.IndexError,math}},{"../error/ArgumentsError":398,"../error/DimensionError":399,"../error/IndexError":400,"../utils/array":922,"../utils/factory":931,"../utils/is":933,"../utils/log":935,"./../utils/emitter":930,"./../utils/object":938,"./../utils/polyfills":939,"./config":60,"./function/config":62,"./function/import":64}],62:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.configFactory=function(config,emit){function _config(options){if(options){var prev=(0,_object.mapObject)(config,_object.clone);validateOption(options,"matrix",MATRIX_OPTIONS),validateOption(options,"number",NUMBER_OPTIONS),(0,_object.deepExtend)(config,options);var curr=(0,_object.mapObject)(config,_object.clone),changes=(0,_object.mapObject)(options,_object.clone);return emit("config",curr,prev,changes),curr}return(0,_object.mapObject)(config,_object.clone)}return _config.MATRIX_OPTIONS=MATRIX_OPTIONS,_config.NUMBER_OPTIONS=NUMBER_OPTIONS,Object.keys(_config2.DEFAULT_CONFIG).forEach(function(key){Object.defineProperty(_config,key,{get:function(){return config[key]},enumerable:!0,configurable:!0})}),_config},exports.NUMBER_OPTIONS=exports.MATRIX_OPTIONS=void 0;var _object=require("../../utils/object"),_config2=require("../config"),MATRIX_OPTIONS=["Matrix","Array"];exports.MATRIX_OPTIONS=MATRIX_OPTIONS;var NUMBER_OPTIONS=["number","BigNumber","Fraction"];function validateOption(options,name,values){var index,array,item;void 0!==options[name]&&(array=values,item=options[name],-1===array.indexOf(item))&&(-1!==(index=function(array,item){return array.map(function(i){return i.toLowerCase()}).indexOf(item.toLowerCase())}(values,options[name]))?(console.warn('Warning: Wrong casing for configuration option "'+name+'", should be "'+values[index]+'" instead of "'+options[name]+'".'),options[name]=values[index]):console.warn('Warning: Unknown value "'+options[name]+'" for configuration option "'+name+'". Available options: '+values.map(JSON.stringify).join(", ")+"."))}exports.NUMBER_OPTIONS=NUMBER_OPTIONS},{"../../utils/object":938,"../config":60}],63:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDeprecatedImport=function(){return function(){throw new Error("The global import function is not available anymore in v6.0.0. \nPlease create a mathjs instance if you want to import functions. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.import(...);\n")}}},{}],64:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.importFactory=function(typed,load,math,importedFactories){function _importTransform(name,value){value&&"function"==typeof value.transform?(math.expression.transform[name]=value.transform,allowedInExpressions(name)&&(math.expression.mathWithTransform[name]=value.transform)):(delete math.expression.transform[name],allowedInExpressions(name)&&(math.expression.mathWithTransform[name]=value))}function _deleteTransform(name){delete math.expression.transform[name],allowedInExpressions(name)?math.expression.mathWithTransform[name]=math[name]:delete math.expression.mathWithTransform[name]}function isTypedFunction(fn){return"function"==typeof fn&&"object"===_typeof(fn.signatures)}function allowedInExpressions(name){return!(0,_object.hasOwnProperty)(unsafe,name)}function legacyFactoryAllowedInExpressions(factory){return void 0===factory.path&&!(0,_object.hasOwnProperty)(unsafe,factory.name)}function factoryAllowedInExpressions(factory){return!(-1!==factory.fn.indexOf(".")||(0,_object.hasOwnProperty)(unsafe,factory.fn)||factory.meta&&factory.meta.isClass)}function isTransformFunctionFactory(factory){return void 0!==factory&&void 0!==factory.meta&&!0===factory.meta.isTransformFunction}var unsafe={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function(functions,options){var num=arguments.length;if(1!==num&&2!==num)throw new _ArgumentsError.ArgumentsError("import",num,1,2);options=options||{};var object,flatValues={};for(var name in!function flattenImports(flatValues,value,name){if((0,_object.isLegacyFactory)(value))!function(factory,options){var name,existingTransform,namespace,existing,resolver,key;(0,_log.warnOnce)("Factories of type { name, factory } are deprecated since v6. Please create your factory functions using the math.factory function."),"string"==typeof factory.name?(name=factory.name,existingTransform=name in math.expression.transform,namespace=factory.path?(0,_object.traverse)(math,factory.path):math,existing=(0,_object.hasOwnProperty)(namespace,name)?namespace[name]:void 0,!(resolver=function(){var instance=load(factory);if(instance&&"function"==typeof instance.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(isTypedFunction(existing)&&isTypedFunction(instance))return options.override||(instance=typed(existing,instance)),instance;if(void 0===existing||options.override)return instance;if(options.silent)return existing;throw new Error('Cannot import "'+name+'": already exists')})!==factory.lazy?((0,_object.lazy)(namespace,name,resolver),existingTransform?_deleteTransform(name):"expression.transform"!==factory.path&&!legacyFactoryAllowedInExpressions(factory)||(0,_object.lazy)(math.expression.mathWithTransform,name,resolver)):(namespace[name]=resolver(),existingTransform?_deleteTransform(name):"expression.transform"!==factory.path&&!legacyFactoryAllowedInExpressions(factory)||(math.expression.mathWithTransform[name]=resolver())),key=factory.path?factory.path+"."+factory.name:factory.name,importedFactories[key]=factory,math.emit("import",name,resolver,factory.path)):load(factory)}(value,options);else if(Array.isArray(value))value.forEach(function(item){return flattenImports(flatValues,item)});else if("object"===_typeof(value))for(var _name in value)(0,_object.hasOwnProperty)(value,_name)&&flattenImports(flatValues,value[_name],_name);else if((0,_factory.isFactory)(value)||void 0!==name){var flatName=(0,_factory.isFactory)(value)?isTransformFunctionFactory(value)?value.fn+".transform":value.fn:name;if((0,_object.hasOwnProperty)(flatValues,flatName)&&flatValues[flatName]!==value&&!options.silent)throw new Error('Cannot import "'+flatName+'" twice');flatValues[flatName]=value}else if(!options.silent)throw new TypeError("Factory, Object, or Array expected")}(flatValues,functions),flatValues)if((0,_object.hasOwnProperty)(flatValues,name)){var value=flatValues[name];if((0,_factory.isFactory)(value))!function(factory,options){var name=2<arguments.length&&void 0!==arguments[2]?arguments[2]:factory.fn;if((0,_array.contains)(name,"."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(name));var namespace=isTransformFunctionFactory(factory)?math.expression.transform:math,existingTransform=name in math.expression.transform,existing=(0,_object.hasOwnProperty)(namespace,name)?namespace[name]:void 0,resolver=function(){var dependencies={};factory.dependencies.map(_factory.stripOptionalNotation).forEach(function(dependency){if((0,_array.contains)(dependency,"."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(dependency));"math"===dependency?dependencies.math=math:"mathWithTransform"===dependency?dependencies.mathWithTransform=math.expression.mathWithTransform:"classes"===dependency?dependencies.classes=math:dependencies[dependency]=math[dependency]});var instance=factory(dependencies);if(instance&&"function"==typeof instance.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(void 0===existing||options.override)return instance;if(isTypedFunction(existing)&&isTypedFunction(instance))return typed(existing,instance);if(options.silent)return existing;throw new Error('Cannot import "'+name+'": already exists')};factory.meta&&!1===factory.meta.lazy?namespace[name]=resolver():(0,_object.lazy)(namespace,name,resolver),existing&&existingTransform?_deleteTransform(name):(isTransformFunctionFactory(factory)||factoryAllowedInExpressions(factory))&&(0,_object.lazy)(math.expression.mathWithTransform,name,function(){return namespace[name]});importedFactories[name]=factory,math.emit("import",name,resolver)}(value,options);else if("function"==typeof(object=value)||"number"==typeof object||"string"==typeof object||"boolean"==typeof object||null===object||(0,_is.isUnit)(object)||(0,_is.isComplex)(object)||(0,_is.isBigNumber)(object)||(0,_is.isFraction)(object)||(0,_is.isMatrix)(object)||Array.isArray(object))!function(name,value,options){options.wrap&&"function"==typeof value&&(value=function(fn){var wrapper=function(){for(var args=[],i=0,len=arguments.length;i<len;i++){var arg=arguments[i];args[i]=arg&&arg.valueOf()}return fn.apply(math,args)};fn.transform&&(wrapper.transform=fn.transform);return wrapper}(value));!function(fn){return"function"==typeof fn&&"string"==typeof fn.signature}(value)||(value=typed(name,function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}({},value.signature,value)));if(isTypedFunction(math[name])&&isTypedFunction(value))return value=options.override?typed(name,value.signatures):typed(math[name],value),math[name]=value,delete importedFactories[name],_importTransform(name,value),math.emit("import",name,function(){return value});if(void 0===math[name]||options.override)return math[name]=value,delete importedFactories[name],_importTransform(name,value),math.emit("import",name,function(){return value});if(!options.silent)throw new Error('Cannot import "'+name+'": already exists')}(name,value,options);else if(!options.silent)throw new TypeError("Factory, Object, or Array expected")}}};var _is=require("../../utils/is"),_factory=require("../../utils/factory"),_object=require("../../utils/object"),_array=require("../../utils/array"),_ArgumentsError=require("../../error/ArgumentsError"),_log=require("../../utils/log");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}},{"../../error/ArgumentsError":398,"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/log":935,"../../utils/object":938}],65:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTyped=void 0;var obj,_is=require("../../utils/is"),_typedFunction=(obj=require("typed-function"))&&obj.__esModule?obj:{default:obj},_number=require("../../utils/number"),_factory=require("../../utils/factory");var _createTyped2=function(){return _createTyped2=_typedFunction.default.create,_typedFunction.default},dependencies=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],createTyped=(0,_factory.factory)("typed",dependencies,function(_ref){var BigNumber=_ref.BigNumber,Complex=_ref.Complex,DenseMatrix=_ref.DenseMatrix,Fraction=_ref.Fraction,typed=_createTyped2();return typed.types=[{name:"number",test:_is.isNumber},{name:"Complex",test:_is.isComplex},{name:"BigNumber",test:_is.isBigNumber},{name:"Fraction",test:_is.isFraction},{name:"Unit",test:_is.isUnit},{name:"string",test:_is.isString},{name:"Chain",test:_is.isChain},{name:"Array",test:_is.isArray},{name:"Matrix",test:_is.isMatrix},{name:"DenseMatrix",test:_is.isDenseMatrix},{name:"SparseMatrix",test:_is.isSparseMatrix},{name:"Range",test:_is.isRange},{name:"Index",test:_is.isIndex},{name:"boolean",test:_is.isBoolean},{name:"ResultSet",test:_is.isResultSet},{name:"Help",test:_is.isHelp},{name:"function",test:_is.isFunction},{name:"Date",test:_is.isDate},{name:"RegExp",test:_is.isRegExp},{name:"null",test:_is.isNull},{name:"undefined",test:_is.isUndefined},{name:"AccessorNode",test:_is.isAccessorNode},{name:"ArrayNode",test:_is.isArrayNode},{name:"AssignmentNode",test:_is.isAssignmentNode},{name:"BlockNode",test:_is.isBlockNode},{name:"ConditionalNode",test:_is.isConditionalNode},{name:"ConstantNode",test:_is.isConstantNode},{name:"FunctionNode",test:_is.isFunctionNode},{name:"FunctionAssignmentNode",test:_is.isFunctionAssignmentNode},{name:"IndexNode",test:_is.isIndexNode},{name:"Node",test:_is.isNode},{name:"ObjectNode",test:_is.isObjectNode},{name:"OperatorNode",test:_is.isOperatorNode},{name:"ParenthesisNode",test:_is.isParenthesisNode},{name:"RangeNode",test:_is.isRangeNode},{name:"SymbolNode",test:_is.isSymbolNode},{name:"Object",test:_is.isObject}],typed.conversions=[{from:"number",to:"BigNumber",convert:function(x){if(BigNumber||throwNoBignumber(x),15<(0,_number.digits)(x))throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+x+"). Use function bignumber(x) to convert to BigNumber.");return new BigNumber(x)}},{from:"number",to:"Complex",convert:function(x){return Complex||throwNoComplex(x),new Complex(x,0)}},{from:"number",to:"string",convert:function(x){return x+""}},{from:"BigNumber",to:"Complex",convert:function(x){return Complex||throwNoComplex(x),new Complex(x.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(x){return Complex||throwNoComplex(x),new Complex(x.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(x){Fraction||throwNoFraction(x);var f=new Fraction(x);if(f.valueOf()!==x)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+x+"). Use function fraction(x) to convert to Fraction.");return f}},{from:"string",to:"number",convert:function(x){var n=Number(x);if(isNaN(n))throw new Error('Cannot convert "'+x+'" to a number');return n}},{from:"string",to:"BigNumber",convert:function(x){BigNumber||throwNoBignumber(x);try{return new BigNumber(x)}catch(err){throw new Error('Cannot convert "'+x+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(x){Fraction||throwNoFraction(x);try{return new Fraction(x)}catch(err){throw new Error('Cannot convert "'+x+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(x){Complex||throwNoComplex(x);try{return new Complex(x)}catch(err){throw new Error('Cannot convert "'+x+'" to Complex')}}},{from:"boolean",to:"number",convert:function(x){return+x}},{from:"boolean",to:"BigNumber",convert:function(x){return BigNumber||throwNoBignumber(x),new BigNumber(+x)}},{from:"boolean",to:"Fraction",convert:function(x){return Fraction||throwNoFraction(x),new Fraction(+x)}},{from:"boolean",to:"string",convert:function(x){return String(x)}},{from:"Array",to:"Matrix",convert:function(array){return DenseMatrix||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new DenseMatrix(array)}},{from:"Matrix",to:"Array",convert:function(matrix){return matrix.valueOf()}}],typed});function throwNoBignumber(x){throw new Error("Cannot convert value ".concat(x," into a BigNumber: no class 'BigNumber' provided"))}function throwNoComplex(x){throw new Error("Cannot convert value ".concat(x," into a Complex number: no class 'Complex' provided"))}function throwNoFraction(x){throw new Error("Cannot convert value ".concat(x," into a Fraction, no class 'Fraction' provided."))}exports.createTyped=createTyped},{"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937,"typed-function":946}],66:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=void 0;var allFactories=function(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){var desc;Object.prototype.hasOwnProperty.call(obj,key)&&((desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null)&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key])}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(require("../factoriesAny"));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}exports.all=allFactories},{"../factoriesAny":658}],67:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _config=require("../core/config"),_config2=require("../core/function/config");function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var config=function(options){if(options)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(_config.DEFAULT_CONFIG)};_extends(exports.config=config,_config.DEFAULT_CONFIG,{MATRIX_OPTIONS:_config2.MATRIX_OPTIONS,NUMBER_OPTIONS:_config2.NUMBER_OPTIONS})},{"../core/config":60,"../core/function/config":62}],68:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"typedDependencies",{enumerable:!0,get:function(){return _dependenciesTyped.typedDependencies}}),Object.defineProperty(exports,"ResultSetDependencies",{enumerable:!0,get:function(){return _dependenciesResultSet.ResultSetDependencies}}),Object.defineProperty(exports,"BigNumberDependencies",{enumerable:!0,get:function(){return _dependenciesBigNumberClass.BigNumberDependencies}}),Object.defineProperty(exports,"ComplexDependencies",{enumerable:!0,get:function(){return _dependenciesComplexClass.ComplexDependencies}}),Object.defineProperty(exports,"FractionDependencies",{enumerable:!0,get:function(){return _dependenciesFractionClass.FractionDependencies}}),Object.defineProperty(exports,"RangeDependencies",{enumerable:!0,get:function(){return _dependenciesRangeClass.RangeDependencies}}),Object.defineProperty(exports,"MatrixDependencies",{enumerable:!0,get:function(){return _dependenciesMatrixClass.MatrixDependencies}}),Object.defineProperty(exports,"DenseMatrixDependencies",{enumerable:!0,get:function(){return _dependenciesDenseMatrixClass.DenseMatrixDependencies}}),Object.defineProperty(exports,"cloneDependencies",{enumerable:!0,get:function(){return _dependenciesClone.cloneDependencies}}),Object.defineProperty(exports,"isIntegerDependencies",{enumerable:!0,get:function(){return _dependenciesIsInteger.isIntegerDependencies}}),Object.defineProperty(exports,"isNegativeDependencies",{enumerable:!0,get:function(){return _dependenciesIsNegative.isNegativeDependencies}}),Object.defineProperty(exports,"isNumericDependencies",{enumerable:!0,get:function(){return _dependenciesIsNumeric.isNumericDependencies}}),Object.defineProperty(exports,"hasNumericValueDependencies",{enumerable:!0,get:function(){return _dependenciesHasNumericValue.hasNumericValueDependencies}}),Object.defineProperty(exports,"isPositiveDependencies",{enumerable:!0,get:function(){return _dependenciesIsPositive.isPositiveDependencies}}),Object.defineProperty(exports,"isZeroDependencies",{enumerable:!0,get:function(){return _dependenciesIsZero.isZeroDependencies}}),Object.defineProperty(exports,"isNaNDependencies",{enumerable:!0,get:function(){return _dependenciesIsNaN.isNaNDependencies}}),Object.defineProperty(exports,"typeOfDependencies",{enumerable:!0,get:function(){return _dependenciesTypeOf.typeOfDependencies}}),Object.defineProperty(exports,"typeofDependencies",{enumerable:!0,get:function(){return _dependenciesDeprecatedTypeof.typeofDependencies}}),Object.defineProperty(exports,"equalScalarDependencies",{enumerable:!0,get:function(){return _dependenciesEqualScalar.equalScalarDependencies}}),Object.defineProperty(exports,"SparseMatrixDependencies",{enumerable:!0,get:function(){return _dependenciesSparseMatrixClass.SparseMatrixDependencies}}),Object.defineProperty(exports,"numberDependencies",{enumerable:!0,get:function(){return _dependenciesNumber.numberDependencies}}),Object.defineProperty(exports,"stringDependencies",{enumerable:!0,get:function(){return _dependenciesString.stringDependencies}}),Object.defineProperty(exports,"booleanDependencies",{enumerable:!0,get:function(){return _dependenciesBoolean.booleanDependencies}}),Object.defineProperty(exports,"bignumberDependencies",{enumerable:!0,get:function(){return _dependenciesBignumber.bignumberDependencies}}),Object.defineProperty(exports,"complexDependencies",{enumerable:!0,get:function(){return _dependenciesComplex.complexDependencies}}),Object.defineProperty(exports,"fractionDependencies",{enumerable:!0,get:function(){return _dependenciesFraction.fractionDependencies}}),Object.defineProperty(exports,"matrixDependencies",{enumerable:!0,get:function(){return _dependenciesMatrix.matrixDependencies}}),Object.defineProperty(exports,"splitUnitDependencies",{enumerable:!0,get:function(){return _dependenciesSplitUnit.splitUnitDependencies}}),Object.defineProperty(exports,"unaryMinusDependencies",{enumerable:!0,get:function(){return _dependenciesUnaryMinus.unaryMinusDependencies}}),Object.defineProperty(exports,"unaryPlusDependencies",{enumerable:!0,get:function(){return _dependenciesUnaryPlus.unaryPlusDependencies}}),Object.defineProperty(exports,"absDependencies",{enumerable:!0,get:function(){return _dependenciesAbs.absDependencies}}),Object.defineProperty(exports,"applyDependencies",{enumerable:!0,get:function(){return _dependenciesApply.applyDependencies}}),Object.defineProperty(exports,"addScalarDependencies",{enumerable:!0,get:function(){return _dependenciesAddScalar.addScalarDependencies}}),Object.defineProperty(exports,"cbrtDependencies",{enumerable:!0,get:function(){return _dependenciesCbrt.cbrtDependencies}}),Object.defineProperty(exports,"ceilDependencies",{enumerable:!0,get:function(){return _dependenciesCeil.ceilDependencies}}),Object.defineProperty(exports,"cubeDependencies",{enumerable:!0,get:function(){return _dependenciesCube.cubeDependencies}}),Object.defineProperty(exports,"expDependencies",{enumerable:!0,get:function(){return _dependenciesExp.expDependencies}}),Object.defineProperty(exports,"expm1Dependencies",{enumerable:!0,get:function(){return _dependenciesExpm.expm1Dependencies}}),Object.defineProperty(exports,"fixDependencies",{enumerable:!0,get:function(){return _dependenciesFix.fixDependencies}}),Object.defineProperty(exports,"floorDependencies",{enumerable:!0,get:function(){return _dependenciesFloor.floorDependencies}}),Object.defineProperty(exports,"gcdDependencies",{enumerable:!0,get:function(){return _dependenciesGcd.gcdDependencies}}),Object.defineProperty(exports,"lcmDependencies",{enumerable:!0,get:function(){return _dependenciesLcm.lcmDependencies}}),Object.defineProperty(exports,"log10Dependencies",{enumerable:!0,get:function(){return _dependenciesLog.log10Dependencies}}),Object.defineProperty(exports,"log2Dependencies",{enumerable:!0,get:function(){return _dependenciesLog2.log2Dependencies}}),Object.defineProperty(exports,"modDependencies",{enumerable:!0,get:function(){return _dependenciesMod.modDependencies}}),Object.defineProperty(exports,"multiplyScalarDependencies",{enumerable:!0,get:function(){return _dependenciesMultiplyScalar.multiplyScalarDependencies}}),Object.defineProperty(exports,"multiplyDependencies",{enumerable:!0,get:function(){return _dependenciesMultiply.multiplyDependencies}}),Object.defineProperty(exports,"nthRootDependencies",{enumerable:!0,get:function(){return _dependenciesNthRoot.nthRootDependencies}}),Object.defineProperty(exports,"signDependencies",{enumerable:!0,get:function(){return _dependenciesSign.signDependencies}}),Object.defineProperty(exports,"sqrtDependencies",{enumerable:!0,get:function(){return _dependenciesSqrt.sqrtDependencies}}),Object.defineProperty(exports,"squareDependencies",{enumerable:!0,get:function(){return _dependenciesSquare.squareDependencies}}),Object.defineProperty(exports,"subtractDependencies",{enumerable:!0,get:function(){return _dependenciesSubtract.subtractDependencies}}),Object.defineProperty(exports,"xgcdDependencies",{enumerable:!0,get:function(){return _dependenciesXgcd.xgcdDependencies}}),Object.defineProperty(exports,"dotMultiplyDependencies",{enumerable:!0,get:function(){return _dependenciesDotMultiply.dotMultiplyDependencies}}),Object.defineProperty(exports,"bitAndDependencies",{enumerable:!0,get:function(){return _dependenciesBitAnd.bitAndDependencies}}),Object.defineProperty(exports,"bitNotDependencies",{enumerable:!0,get:function(){return _dependenciesBitNot.bitNotDependencies}}),Object.defineProperty(exports,"bitOrDependencies",{enumerable:!0,get:function(){return _dependenciesBitOr.bitOrDependencies}}),Object.defineProperty(exports,"bitXorDependencies",{enumerable:!0,get:function(){return _dependenciesBitXor.bitXorDependencies}}),Object.defineProperty(exports,"argDependencies",{enumerable:!0,get:function(){return _dependenciesArg.argDependencies}}),Object.defineProperty(exports,"conjDependencies",{enumerable:!0,get:function(){return _dependenciesConj.conjDependencies}}),Object.defineProperty(exports,"imDependencies",{enumerable:!0,get:function(){return _dependenciesIm.imDependencies}}),Object.defineProperty(exports,"reDependencies",{enumerable:!0,get:function(){return _dependenciesRe.reDependencies}}),Object.defineProperty(exports,"notDependencies",{enumerable:!0,get:function(){return _dependenciesNot.notDependencies}}),Object.defineProperty(exports,"orDependencies",{enumerable:!0,get:function(){return _dependenciesOr.orDependencies}}),Object.defineProperty(exports,"xorDependencies",{enumerable:!0,get:function(){return _dependenciesXor.xorDependencies}}),Object.defineProperty(exports,"concatDependencies",{enumerable:!0,get:function(){return _dependenciesConcat.concatDependencies}}),Object.defineProperty(exports,"columnDependencies",{enumerable:!0,get:function(){return _dependenciesColumn.columnDependencies}}),Object.defineProperty(exports,"crossDependencies",{enumerable:!0,get:function(){return _dependenciesCross.crossDependencies}}),Object.defineProperty(exports,"diagDependencies",{enumerable:!0,get:function(){return _dependenciesDiag.diagDependencies}}),Object.defineProperty(exports,"eyeDependencies",{enumerable:!0,get:function(){return _dependenciesEye.eyeDependencies}}),Object.defineProperty(exports,"filterDependencies",{enumerable:!0,get:function(){return _dependenciesFilter.filterDependencies}}),Object.defineProperty(exports,"flattenDependencies",{enumerable:!0,get:function(){return _dependenciesFlatten.flattenDependencies}}),Object.defineProperty(exports,"forEachDependencies",{enumerable:!0,get:function(){return _dependenciesForEach.forEachDependencies}}),Object.defineProperty(exports,"getMatrixDataTypeDependencies",{enumerable:!0,get:function(){return _dependenciesGetMatrixDataType.getMatrixDataTypeDependencies}}),Object.defineProperty(exports,"identityDependencies",{enumerable:!0,get:function(){return _dependenciesIdentity.identityDependencies}}),Object.defineProperty(exports,"kronDependencies",{enumerable:!0,get:function(){return _dependenciesKron.kronDependencies}}),Object.defineProperty(exports,"mapDependencies",{enumerable:!0,get:function(){return _dependenciesMap.mapDependencies}}),Object.defineProperty(exports,"onesDependencies",{enumerable:!0,get:function(){return _dependenciesOnes.onesDependencies}}),Object.defineProperty(exports,"rangeDependencies",{enumerable:!0,get:function(){return _dependenciesRange.rangeDependencies}}),Object.defineProperty(exports,"reshapeDependencies",{enumerable:!0,get:function(){return _dependenciesReshape.reshapeDependencies}}),Object.defineProperty(exports,"resizeDependencies",{enumerable:!0,get:function(){return _dependenciesResize.resizeDependencies}}),Object.defineProperty(exports,"rowDependencies",{enumerable:!0,get:function(){return _dependenciesRow.rowDependencies}}),Object.defineProperty(exports,"sizeDependencies",{enumerable:!0,get:function(){return _dependenciesSize.sizeDependencies}}),Object.defineProperty(exports,"squeezeDependencies",{enumerable:!0,get:function(){return _dependenciesSqueeze.squeezeDependencies}}),Object.defineProperty(exports,"subsetDependencies",{enumerable:!0,get:function(){return _dependenciesSubset.subsetDependencies}}),Object.defineProperty(exports,"transposeDependencies",{enumerable:!0,get:function(){return _dependenciesTranspose.transposeDependencies}}),Object.defineProperty(exports,"ctransposeDependencies",{enumerable:!0,get:function(){return _dependenciesCtranspose.ctransposeDependencies}}),Object.defineProperty(exports,"zerosDependencies",{enumerable:!0,get:function(){return _dependenciesZeros.zerosDependencies}}),Object.defineProperty(exports,"erfDependencies",{enumerable:!0,get:function(){return _dependenciesErf.erfDependencies}}),Object.defineProperty(exports,"modeDependencies",{enumerable:!0,get:function(){return _dependenciesMode.modeDependencies}}),Object.defineProperty(exports,"prodDependencies",{enumerable:!0,get:function(){return _dependenciesProd.prodDependencies}}),Object.defineProperty(exports,"formatDependencies",{enumerable:!0,get:function(){return _dependenciesFormat.formatDependencies}}),Object.defineProperty(exports,"printDependencies",{enumerable:!0,get:function(){return _dependenciesPrint.printDependencies}}),Object.defineProperty(exports,"toDependencies",{enumerable:!0,get:function(){return _dependenciesTo.toDependencies}}),Object.defineProperty(exports,"isPrimeDependencies",{enumerable:!0,get:function(){return _dependenciesIsPrime.isPrimeDependencies}}),Object.defineProperty(exports,"numericDependencies",{enumerable:!0,get:function(){return _dependenciesNumeric.numericDependencies}}),Object.defineProperty(exports,"divideScalarDependencies",{enumerable:!0,get:function(){return _dependenciesDivideScalar.divideScalarDependencies}}),Object.defineProperty(exports,"powDependencies",{enumerable:!0,get:function(){return _dependenciesPow.powDependencies}}),Object.defineProperty(exports,"roundDependencies",{enumerable:!0,get:function(){return _dependenciesRound.roundDependencies}}),Object.defineProperty(exports,"logDependencies",{enumerable:!0,get:function(){return _dependenciesLog3.logDependencies}}),Object.defineProperty(exports,"log1pDependencies",{enumerable:!0,get:function(){return _dependenciesLog1p.log1pDependencies}}),Object.defineProperty(exports,"nthRootsDependencies",{enumerable:!0,get:function(){return _dependenciesNthRoots.nthRootsDependencies}}),Object.defineProperty(exports,"dotPowDependencies",{enumerable:!0,get:function(){return _dependenciesDotPow.dotPowDependencies}}),Object.defineProperty(exports,"dotDivideDependencies",{enumerable:!0,get:function(){return _dependenciesDotDivide.dotDivideDependencies}}),Object.defineProperty(exports,"lsolveDependencies",{enumerable:!0,get:function(){return _dependenciesLsolve.lsolveDependencies}}),Object.defineProperty(exports,"usolveDependencies",{enumerable:!0,get:function(){return _dependenciesUsolve.usolveDependencies}}),Object.defineProperty(exports,"leftShiftDependencies",{enumerable:!0,get:function(){return _dependenciesLeftShift.leftShiftDependencies}}),Object.defineProperty(exports,"rightArithShiftDependencies",{enumerable:!0,get:function(){return _dependenciesRightArithShift.rightArithShiftDependencies}}),Object.defineProperty(exports,"rightLogShiftDependencies",{enumerable:!0,get:function(){return _dependenciesRightLogShift.rightLogShiftDependencies}}),Object.defineProperty(exports,"andDependencies",{enumerable:!0,get:function(){return _dependenciesAnd.andDependencies}}),Object.defineProperty(exports,"compareDependencies",{enumerable:!0,get:function(){return _dependenciesCompare.compareDependencies}}),Object.defineProperty(exports,"compareNaturalDependencies",{enumerable:!0,get:function(){return _dependenciesCompareNatural.compareNaturalDependencies}}),Object.defineProperty(exports,"compareTextDependencies",{enumerable:!0,get:function(){return _dependenciesCompareText.compareTextDependencies}}),Object.defineProperty(exports,"equalDependencies",{enumerable:!0,get:function(){return _dependenciesEqual.equalDependencies}}),Object.defineProperty(exports,"equalTextDependencies",{enumerable:!0,get:function(){return _dependenciesEqualText.equalTextDependencies}}),Object.defineProperty(exports,"smallerDependencies",{enumerable:!0,get:function(){return _dependenciesSmaller.smallerDependencies}}),Object.defineProperty(exports,"smallerEqDependencies",{enumerable:!0,get:function(){return _dependenciesSmallerEq.smallerEqDependencies}}),Object.defineProperty(exports,"largerDependencies",{enumerable:!0,get:function(){return _dependenciesLarger.largerDependencies}}),Object.defineProperty(exports,"largerEqDependencies",{enumerable:!0,get:function(){return _dependenciesLargerEq.largerEqDependencies}}),Object.defineProperty(exports,"deepEqualDependencies",{enumerable:!0,get:function(){return _dependenciesDeepEqual.deepEqualDependencies}}),Object.defineProperty(exports,"unequalDependencies",{enumerable:!0,get:function(){return _dependenciesUnequal.unequalDependencies}}),Object.defineProperty(exports,"partitionSelectDependencies",{enumerable:!0,get:function(){return _dependenciesPartitionSelect.partitionSelectDependencies}}),Object.defineProperty(exports,"sortDependencies",{enumerable:!0,get:function(){return _dependenciesSort.sortDependencies}}),Object.defineProperty(exports,"maxDependencies",{enumerable:!0,get:function(){return _dependenciesMax.maxDependencies}}),Object.defineProperty(exports,"minDependencies",{enumerable:!0,get:function(){return _dependenciesMin.minDependencies}}),Object.defineProperty(exports,"ImmutableDenseMatrixDependencies",{enumerable:!0,get:function(){return _dependenciesImmutableDenseMatrixClass.ImmutableDenseMatrixDependencies}}),Object.defineProperty(exports,"IndexDependencies",{enumerable:!0,get:function(){return _dependenciesIndexClass.IndexDependencies}}),Object.defineProperty(exports,"FibonacciHeapDependencies",{enumerable:!0,get:function(){return _dependenciesFibonacciHeapClass.FibonacciHeapDependencies}}),Object.defineProperty(exports,"SpaDependencies",{enumerable:!0,get:function(){return _dependenciesSpaClass.SpaDependencies}}),Object.defineProperty(exports,"UnitDependencies",{enumerable:!0,get:function(){return _dependenciesUnitClass.UnitDependencies}}),Object.defineProperty(exports,"unitDependencies",{enumerable:!0,get:function(){return _dependenciesUnitFunction.unitDependencies}}),Object.defineProperty(exports,"sparseDependencies",{enumerable:!0,get:function(){return _dependenciesSparse.sparseDependencies}}),Object.defineProperty(exports,"createUnitDependencies",{enumerable:!0,get:function(){return _dependenciesCreateUnit.createUnitDependencies}}),Object.defineProperty(exports,"acosDependencies",{enumerable:!0,get:function(){return _dependenciesAcos.acosDependencies}}),Object.defineProperty(exports,"acoshDependencies",{enumerable:!0,get:function(){return _dependenciesAcosh.acoshDependencies}}),Object.defineProperty(exports,"acotDependencies",{enumerable:!0,get:function(){return _dependenciesAcot.acotDependencies}}),Object.defineProperty(exports,"acothDependencies",{enumerable:!0,get:function(){return _dependenciesAcoth.acothDependencies}}),Object.defineProperty(exports,"acscDependencies",{enumerable:!0,get:function(){return _dependenciesAcsc.acscDependencies}}),Object.defineProperty(exports,"acschDependencies",{enumerable:!0,get:function(){return _dependenciesAcsch.acschDependencies}}),Object.defineProperty(exports,"asecDependencies",{enumerable:!0,get:function(){return _dependenciesAsec.asecDependencies}}),Object.defineProperty(exports,"asechDependencies",{enumerable:!0,get:function(){return _dependenciesAsech.asechDependencies}}),Object.defineProperty(exports,"asinDependencies",{enumerable:!0,get:function(){return _dependenciesAsin.asinDependencies}}),Object.defineProperty(exports,"asinhDependencies",{enumerable:!0,get:function(){return _dependenciesAsinh.asinhDependencies}}),Object.defineProperty(exports,"atanDependencies",{enumerable:!0,get:function(){return _dependenciesAtan.atanDependencies}}),Object.defineProperty(exports,"atan2Dependencies",{enumerable:!0,get:function(){return _dependenciesAtan2.atan2Dependencies}}),Object.defineProperty(exports,"atanhDependencies",{enumerable:!0,get:function(){return _dependenciesAtanh.atanhDependencies}}),Object.defineProperty(exports,"cosDependencies",{enumerable:!0,get:function(){return _dependenciesCos.cosDependencies}}),Object.defineProperty(exports,"coshDependencies",{enumerable:!0,get:function(){return _dependenciesCosh.coshDependencies}}),Object.defineProperty(exports,"cotDependencies",{enumerable:!0,get:function(){return _dependenciesCot.cotDependencies}}),Object.defineProperty(exports,"cothDependencies",{enumerable:!0,get:function(){return _dependenciesCoth.cothDependencies}}),Object.defineProperty(exports,"cscDependencies",{enumerable:!0,get:function(){return _dependenciesCsc.cscDependencies}}),Object.defineProperty(exports,"cschDependencies",{enumerable:!0,get:function(){return _dependenciesCsch.cschDependencies}}),Object.defineProperty(exports,"secDependencies",{enumerable:!0,get:function(){return _dependenciesSec.secDependencies}}),Object.defineProperty(exports,"sechDependencies",{enumerable:!0,get:function(){return _dependenciesSech.sechDependencies}}),Object.defineProperty(exports,"sinDependencies",{enumerable:!0,get:function(){return _dependenciesSin.sinDependencies}}),Object.defineProperty(exports,"sinhDependencies",{enumerable:!0,get:function(){return _dependenciesSinh.sinhDependencies}}),Object.defineProperty(exports,"tanDependencies",{enumerable:!0,get:function(){return _dependenciesTan.tanDependencies}}),Object.defineProperty(exports,"tanhDependencies",{enumerable:!0,get:function(){return _dependenciesTanh.tanhDependencies}}),Object.defineProperty(exports,"setCartesianDependencies",{enumerable:!0,get:function(){return _dependenciesSetCartesian.setCartesianDependencies}}),Object.defineProperty(exports,"setDifferenceDependencies",{enumerable:!0,get:function(){return _dependenciesSetDifference.setDifferenceDependencies}}),Object.defineProperty(exports,"setDistinctDependencies",{enumerable:!0,get:function(){return _dependenciesSetDistinct.setDistinctDependencies}}),Object.defineProperty(exports,"setIntersectDependencies",{enumerable:!0,get:function(){return _dependenciesSetIntersect.setIntersectDependencies}}),Object.defineProperty(exports,"setIsSubsetDependencies",{enumerable:!0,get:function(){return _dependenciesSetIsSubset.setIsSubsetDependencies}}),Object.defineProperty(exports,"setMultiplicityDependencies",{enumerable:!0,get:function(){return _dependenciesSetMultiplicity.setMultiplicityDependencies}}),Object.defineProperty(exports,"setPowersetDependencies",{enumerable:!0,get:function(){return _dependenciesSetPowerset.setPowersetDependencies}}),Object.defineProperty(exports,"setSizeDependencies",{enumerable:!0,get:function(){return _dependenciesSetSize.setSizeDependencies}}),Object.defineProperty(exports,"setSymDifferenceDependencies",{enumerable:!0,get:function(){return _dependenciesSetSymDifference.setSymDifferenceDependencies}}),Object.defineProperty(exports,"setUnionDependencies",{enumerable:!0,get:function(){return _dependenciesSetUnion.setUnionDependencies}}),Object.defineProperty(exports,"addDependencies",{enumerable:!0,get:function(){return _dependenciesAdd.addDependencies}}),Object.defineProperty(exports,"hypotDependencies",{enumerable:!0,get:function(){return _dependenciesHypot.hypotDependencies}}),Object.defineProperty(exports,"normDependencies",{enumerable:!0,get:function(){return _dependenciesNorm.normDependencies}}),Object.defineProperty(exports,"dotDependencies",{enumerable:!0,get:function(){return _dependenciesDot.dotDependencies}}),Object.defineProperty(exports,"traceDependencies",{enumerable:!0,get:function(){return _dependenciesTrace.traceDependencies}}),Object.defineProperty(exports,"indexDependencies",{enumerable:!0,get:function(){return _dependenciesIndex.indexDependencies}}),Object.defineProperty(exports,"NodeDependencies",{enumerable:!0,get:function(){return _dependenciesNode.NodeDependencies}}),Object.defineProperty(exports,"AccessorNodeDependencies",{enumerable:!0,get:function(){return _dependenciesAccessorNode.AccessorNodeDependencies}}),Object.defineProperty(exports,"ArrayNodeDependencies",{enumerable:!0,get:function(){return _dependenciesArrayNode.ArrayNodeDependencies}}),Object.defineProperty(exports,"AssignmentNodeDependencies",{enumerable:!0,get:function(){return _dependenciesAssignmentNode.AssignmentNodeDependencies}}),Object.defineProperty(exports,"BlockNodeDependencies",{enumerable:!0,get:function(){return _dependenciesBlockNode.BlockNodeDependencies}}),Object.defineProperty(exports,"ConditionalNodeDependencies",{enumerable:!0,get:function(){return _dependenciesConditionalNode.ConditionalNodeDependencies}}),Object.defineProperty(exports,"ConstantNodeDependencies",{enumerable:!0,get:function(){return _dependenciesConstantNode.ConstantNodeDependencies}}),Object.defineProperty(exports,"FunctionAssignmentNodeDependencies",{enumerable:!0,get:function(){return _dependenciesFunctionAssignmentNode.FunctionAssignmentNodeDependencies}}),Object.defineProperty(exports,"IndexNodeDependencies",{enumerable:!0,get:function(){return _dependenciesIndexNode.IndexNodeDependencies}}),Object.defineProperty(exports,"ObjectNodeDependencies",{enumerable:!0,get:function(){return _dependenciesObjectNode.ObjectNodeDependencies}}),Object.defineProperty(exports,"OperatorNodeDependencies",{enumerable:!0,get:function(){return _dependenciesOperatorNode.OperatorNodeDependencies}}),Object.defineProperty(exports,"ParenthesisNodeDependencies",{enumerable:!0,get:function(){return _dependenciesParenthesisNode.ParenthesisNodeDependencies}}),Object.defineProperty(exports,"RangeNodeDependencies",{enumerable:!0,get:function(){return _dependenciesRangeNode.RangeNodeDependencies}}),Object.defineProperty(exports,"RelationalNodeDependencies",{enumerable:!0,get:function(){return _dependenciesRelationalNode.RelationalNodeDependencies}}),Object.defineProperty(exports,"SymbolNodeDependencies",{enumerable:!0,get:function(){return _dependenciesSymbolNode.SymbolNodeDependencies}}),Object.defineProperty(exports,"FunctionNodeDependencies",{enumerable:!0,get:function(){return _dependenciesFunctionNode.FunctionNodeDependencies}}),Object.defineProperty(exports,"parseDependencies",{enumerable:!0,get:function(){return _dependenciesParse.parseDependencies}}),Object.defineProperty(exports,"compileDependencies",{enumerable:!0,get:function(){return _dependenciesCompile.compileDependencies}}),Object.defineProperty(exports,"evaluateDependencies",{enumerable:!0,get:function(){return _dependenciesEvaluate.evaluateDependencies}}),Object.defineProperty(exports,"evalDependencies",{enumerable:!0,get:function(){return _dependenciesDeprecatedEval.evalDependencies}}),Object.defineProperty(exports,"ParserDependencies",{enumerable:!0,get:function(){return _dependenciesParserClass.ParserDependencies}}),Object.defineProperty(exports,"parserDependencies",{enumerable:!0,get:function(){return _dependenciesParser.parserDependencies}}),Object.defineProperty(exports,"lupDependencies",{enumerable:!0,get:function(){return _dependenciesLup.lupDependencies}}),Object.defineProperty(exports,"qrDependencies",{enumerable:!0,get:function(){return _dependenciesQr.qrDependencies}}),Object.defineProperty(exports,"sluDependencies",{enumerable:!0,get:function(){return _dependenciesSlu.sluDependencies}}),Object.defineProperty(exports,"lusolveDependencies",{enumerable:!0,get:function(){return _dependenciesLusolve.lusolveDependencies}}),Object.defineProperty(exports,"HelpDependencies",{enumerable:!0,get:function(){return _dependenciesHelpClass.HelpDependencies}}),Object.defineProperty(exports,"ChainDependencies",{enumerable:!0,get:function(){return _dependenciesChainClass.ChainDependencies}}),Object.defineProperty(exports,"helpDependencies",{enumerable:!0,get:function(){return _dependenciesHelp.helpDependencies}}),Object.defineProperty(exports,"chainDependencies",{enumerable:!0,get:function(){return _dependenciesChain.chainDependencies}}),Object.defineProperty(exports,"detDependencies",{enumerable:!0,get:function(){return _dependenciesDet.detDependencies}}),Object.defineProperty(exports,"invDependencies",{enumerable:!0,get:function(){return _dependenciesInv.invDependencies}}),Object.defineProperty(exports,"eigsDependencies",{enumerable:!0,get:function(){return _dependenciesEigs.eigsDependencies}}),Object.defineProperty(exports,"expmDependencies",{enumerable:!0,get:function(){return _dependenciesExpm2.expmDependencies}}),Object.defineProperty(exports,"sqrtmDependencies",{enumerable:!0,get:function(){return _dependenciesSqrtm.sqrtmDependencies}}),Object.defineProperty(exports,"divideDependencies",{enumerable:!0,get:function(){return _dependenciesDivide.divideDependencies}}),Object.defineProperty(exports,"distanceDependencies",{enumerable:!0,get:function(){return _dependenciesDistance.distanceDependencies}}),Object.defineProperty(exports,"intersectDependencies",{enumerable:!0,get:function(){return _dependenciesIntersect.intersectDependencies}}),Object.defineProperty(exports,"sumDependencies",{enumerable:!0,get:function(){return _dependenciesSum.sumDependencies}}),Object.defineProperty(exports,"meanDependencies",{enumerable:!0,get:function(){return _dependenciesMean.meanDependencies}}),Object.defineProperty(exports,"medianDependencies",{enumerable:!0,get:function(){return _dependenciesMedian.medianDependencies}}),Object.defineProperty(exports,"madDependencies",{enumerable:!0,get:function(){return _dependenciesMad.madDependencies}}),Object.defineProperty(exports,"varianceDependencies",{enumerable:!0,get:function(){return _dependenciesVariance.varianceDependencies}}),Object.defineProperty(exports,"varDependencies",{enumerable:!0,get:function(){return _dependenciesDeprecatedVar.varDependencies}}),Object.defineProperty(exports,"quantileSeqDependencies",{enumerable:!0,get:function(){return _dependenciesQuantileSeq.quantileSeqDependencies}}),Object.defineProperty(exports,"stdDependencies",{enumerable:!0,get:function(){return _dependenciesStd.stdDependencies}}),Object.defineProperty(exports,"combinationsDependencies",{enumerable:!0,get:function(){return _dependenciesCombinations.combinationsDependencies}}),Object.defineProperty(exports,"combinationsWithRepDependencies",{enumerable:!0,get:function(){return _dependenciesCombinationsWithRep.combinationsWithRepDependencies}}),Object.defineProperty(exports,"gammaDependencies",{enumerable:!0,get:function(){return _dependenciesGamma.gammaDependencies}}),Object.defineProperty(exports,"factorialDependencies",{enumerable:!0,get:function(){return _dependenciesFactorial.factorialDependencies}}),Object.defineProperty(exports,"kldivergenceDependencies",{enumerable:!0,get:function(){return _dependenciesKldivergence.kldivergenceDependencies}}),Object.defineProperty(exports,"multinomialDependencies",{enumerable:!0,get:function(){return _dependenciesMultinomial.multinomialDependencies}}),Object.defineProperty(exports,"permutationsDependencies",{enumerable:!0,get:function(){return _dependenciesPermutations.permutationsDependencies}}),Object.defineProperty(exports,"pickRandomDependencies",{enumerable:!0,get:function(){return _dependenciesPickRandom.pickRandomDependencies}}),Object.defineProperty(exports,"randomDependencies",{enumerable:!0,get:function(){return _dependenciesRandom.randomDependencies}}),Object.defineProperty(exports,"randomIntDependencies",{enumerable:!0,get:function(){return _dependenciesRandomInt.randomIntDependencies}}),Object.defineProperty(exports,"stirlingS2Dependencies",{enumerable:!0,get:function(){return _dependenciesStirlingS.stirlingS2Dependencies}}),Object.defineProperty(exports,"bellNumbersDependencies",{enumerable:!0,get:function(){return _dependenciesBellNumbers.bellNumbersDependencies}}),Object.defineProperty(exports,"catalanDependencies",{enumerable:!0,get:function(){return _dependenciesCatalan.catalanDependencies}}),Object.defineProperty(exports,"compositionDependencies",{enumerable:!0,get:function(){return _dependenciesComposition.compositionDependencies}}),Object.defineProperty(exports,"simplifyDependencies",{enumerable:!0,get:function(){return _dependenciesSimplify.simplifyDependencies}}),Object.defineProperty(exports,"derivativeDependencies",{enumerable:!0,get:function(){return _dependenciesDerivative.derivativeDependencies}}),Object.defineProperty(exports,"rationalizeDependencies",{enumerable:!0,get:function(){return _dependenciesRationalize.rationalizeDependencies}}),Object.defineProperty(exports,"reviverDependencies",{enumerable:!0,get:function(){return _dependenciesReviver.reviverDependencies}}),Object.defineProperty(exports,"replacerDependencies",{enumerable:!0,get:function(){return _dependenciesReplacer.replacerDependencies}}),Object.defineProperty(exports,"eDependencies",{enumerable:!0,get:function(){return _dependenciesE.eDependencies}}),Object.defineProperty(exports,"EDependencies",{enumerable:!0,get:function(){return _dependenciesUppercaseE.EDependencies}}),Object.defineProperty(exports,"falseDependencies",{enumerable:!0,get:function(){return _dependenciesFalse.falseDependencies}}),Object.defineProperty(exports,"iDependencies",{enumerable:!0,get:function(){return _dependenciesI.iDependencies}}),Object.defineProperty(exports,"InfinityDependencies",{enumerable:!0,get:function(){return _dependenciesInfinity.InfinityDependencies}}),Object.defineProperty(exports,"LN10Dependencies",{enumerable:!0,get:function(){return _dependenciesLN.LN10Dependencies}}),Object.defineProperty(exports,"LN2Dependencies",{enumerable:!0,get:function(){return _dependenciesLN2.LN2Dependencies}}),Object.defineProperty(exports,"LOG10EDependencies",{enumerable:!0,get:function(){return _dependenciesLOG10E.LOG10EDependencies}}),Object.defineProperty(exports,"LOG2EDependencies",{enumerable:!0,get:function(){return _dependenciesLOG2E.LOG2EDependencies}}),Object.defineProperty(exports,"NaNDependencies",{enumerable:!0,get:function(){return _dependenciesNaN.NaNDependencies}}),Object.defineProperty(exports,"nullDependencies",{enumerable:!0,get:function(){return _dependenciesNull.nullDependencies}}),Object.defineProperty(exports,"phiDependencies",{enumerable:!0,get:function(){return _dependenciesPhi.phiDependencies}}),Object.defineProperty(exports,"piDependencies",{enumerable:!0,get:function(){return _dependenciesPi.piDependencies}}),Object.defineProperty(exports,"PIDependencies",{enumerable:!0,get:function(){return _dependenciesUppercasePi.PIDependencies}}),Object.defineProperty(exports,"SQRT1_2Dependencies",{enumerable:!0,get:function(){return _dependenciesSQRT1_.SQRT1_2Dependencies}}),Object.defineProperty(exports,"SQRT2Dependencies",{enumerable:!0,get:function(){return _dependenciesSQRT.SQRT2Dependencies}}),Object.defineProperty(exports,"tauDependencies",{enumerable:!0,get:function(){return _dependenciesTau.tauDependencies}}),Object.defineProperty(exports,"trueDependencies",{enumerable:!0,get:function(){return _dependenciesTrue.trueDependencies}}),Object.defineProperty(exports,"versionDependencies",{enumerable:!0,get:function(){return _dependenciesVersion.versionDependencies}}),Object.defineProperty(exports,"atomicMassDependencies",{enumerable:!0,get:function(){return _dependenciesAtomicMass.atomicMassDependencies}}),Object.defineProperty(exports,"avogadroDependencies",{enumerable:!0,get:function(){return _dependenciesAvogadro.avogadroDependencies}}),Object.defineProperty(exports,"bohrMagnetonDependencies",{enumerable:!0,get:function(){return _dependenciesBohrMagneton.bohrMagnetonDependencies}}),Object.defineProperty(exports,"bohrRadiusDependencies",{enumerable:!0,get:function(){return _dependenciesBohrRadius.bohrRadiusDependencies}}),Object.defineProperty(exports,"boltzmannDependencies",{enumerable:!0,get:function(){return _dependenciesBoltzmann.boltzmannDependencies}}),Object.defineProperty(exports,"classicalElectronRadiusDependencies",{enumerable:!0,get:function(){return _dependenciesClassicalElectronRadius.classicalElectronRadiusDependencies}}),Object.defineProperty(exports,"conductanceQuantumDependencies",{enumerable:!0,get:function(){return _dependenciesConductanceQuantum.conductanceQuantumDependencies}}),Object.defineProperty(exports,"coulombDependencies",{enumerable:!0,get:function(){return _dependenciesCoulomb.coulombDependencies}}),Object.defineProperty(exports,"deuteronMassDependencies",{enumerable:!0,get:function(){return _dependenciesDeuteronMass.deuteronMassDependencies}}),Object.defineProperty(exports,"efimovFactorDependencies",{enumerable:!0,get:function(){return _dependenciesEfimovFactor.efimovFactorDependencies}}),Object.defineProperty(exports,"electricConstantDependencies",{enumerable:!0,get:function(){return _dependenciesElectricConstant.electricConstantDependencies}}),Object.defineProperty(exports,"electronMassDependencies",{enumerable:!0,get:function(){return _dependenciesElectronMass.electronMassDependencies}}),Object.defineProperty(exports,"elementaryChargeDependencies",{enumerable:!0,get:function(){return _dependenciesElementaryCharge.elementaryChargeDependencies}}),Object.defineProperty(exports,"faradayDependencies",{enumerable:!0,get:function(){return _dependenciesFaraday.faradayDependencies}}),Object.defineProperty(exports,"fermiCouplingDependencies",{enumerable:!0,get:function(){return _dependenciesFermiCoupling.fermiCouplingDependencies}}),Object.defineProperty(exports,"fineStructureDependencies",{enumerable:!0,get:function(){return _dependenciesFineStructure.fineStructureDependencies}}),Object.defineProperty(exports,"firstRadiationDependencies",{enumerable:!0,get:function(){return _dependenciesFirstRadiation.firstRadiationDependencies}}),Object.defineProperty(exports,"gasConstantDependencies",{enumerable:!0,get:function(){return _dependenciesGasConstant.gasConstantDependencies}}),Object.defineProperty(exports,"gravitationConstantDependencies",{enumerable:!0,get:function(){return _dependenciesGravitationConstant.gravitationConstantDependencies}}),Object.defineProperty(exports,"gravityDependencies",{enumerable:!0,get:function(){return _dependenciesGravity.gravityDependencies}}),Object.defineProperty(exports,"hartreeEnergyDependencies",{enumerable:!0,get:function(){return _dependenciesHartreeEnergy.hartreeEnergyDependencies}}),Object.defineProperty(exports,"inverseConductanceQuantumDependencies",{enumerable:!0,get:function(){return _dependenciesInverseConductanceQuantum.inverseConductanceQuantumDependencies}}),Object.defineProperty(exports,"klitzingDependencies",{enumerable:!0,get:function(){return _dependenciesKlitzing.klitzingDependencies}}),Object.defineProperty(exports,"loschmidtDependencies",{enumerable:!0,get:function(){return _dependenciesLoschmidt.loschmidtDependencies}}),Object.defineProperty(exports,"magneticConstantDependencies",{enumerable:!0,get:function(){return _dependenciesMagneticConstant.magneticConstantDependencies}}),Object.defineProperty(exports,"magneticFluxQuantumDependencies",{enumerable:!0,get:function(){return _dependenciesMagneticFluxQuantum.magneticFluxQuantumDependencies}}),Object.defineProperty(exports,"molarMassDependencies",{enumerable:!0,get:function(){return _dependenciesMolarMass.molarMassDependencies}}),Object.defineProperty(exports,"molarMassC12Dependencies",{enumerable:!0,get:function(){return _dependenciesMolarMassC.molarMassC12Dependencies}}),Object.defineProperty(exports,"molarPlanckConstantDependencies",{enumerable:!0,get:function(){return _dependenciesMolarPlanckConstant.molarPlanckConstantDependencies}}),Object.defineProperty(exports,"molarVolumeDependencies",{enumerable:!0,get:function(){return _dependenciesMolarVolume.molarVolumeDependencies}}),Object.defineProperty(exports,"neutronMassDependencies",{enumerable:!0,get:function(){return _dependenciesNeutronMass.neutronMassDependencies}}),Object.defineProperty(exports,"nuclearMagnetonDependencies",{enumerable:!0,get:function(){return _dependenciesNuclearMagneton.nuclearMagnetonDependencies}}),Object.defineProperty(exports,"planckChargeDependencies",{enumerable:!0,get:function(){return _dependenciesPlanckCharge.planckChargeDependencies}}),Object.defineProperty(exports,"planckConstantDependencies",{enumerable:!0,get:function(){return _dependenciesPlanckConstant.planckConstantDependencies}}),Object.defineProperty(exports,"planckLengthDependencies",{enumerable:!0,get:function(){return _dependenciesPlanckLength.planckLengthDependencies}}),Object.defineProperty(exports,"planckMassDependencies",{enumerable:!0,get:function(){return _dependenciesPlanckMass.planckMassDependencies}}),Object.defineProperty(exports,"planckTemperatureDependencies",{enumerable:!0,get:function(){return _dependenciesPlanckTemperature.planckTemperatureDependencies}}),Object.defineProperty(exports,"planckTimeDependencies",{enumerable:!0,get:function(){return _dependenciesPlanckTime.planckTimeDependencies}}),Object.defineProperty(exports,"protonMassDependencies",{enumerable:!0,get:function(){return _dependenciesProtonMass.protonMassDependencies}}),Object.defineProperty(exports,"quantumOfCirculationDependencies",{enumerable:!0,get:function(){return _dependenciesQuantumOfCirculation.quantumOfCirculationDependencies}}),Object.defineProperty(exports,"reducedPlanckConstantDependencies",{enumerable:!0,get:function(){return _dependenciesReducedPlanckConstant.reducedPlanckConstantDependencies}}),Object.defineProperty(exports,"rydbergDependencies",{enumerable:!0,get:function(){return _dependenciesRydberg.rydbergDependencies}}),Object.defineProperty(exports,"sackurTetrodeDependencies",{enumerable:!0,get:function(){return _dependenciesSackurTetrode.sackurTetrodeDependencies}}),Object.defineProperty(exports,"secondRadiationDependencies",{enumerable:!0,get:function(){return _dependenciesSecondRadiation.secondRadiationDependencies}}),Object.defineProperty(exports,"speedOfLightDependencies",{enumerable:!0,get:function(){return _dependenciesSpeedOfLight.speedOfLightDependencies}}),Object.defineProperty(exports,"stefanBoltzmannDependencies",{enumerable:!0,get:function(){return _dependenciesStefanBoltzmann.stefanBoltzmannDependencies}}),Object.defineProperty(exports,"thomsonCrossSectionDependencies",{enumerable:!0,get:function(){return _dependenciesThomsonCrossSection.thomsonCrossSectionDependencies}}),Object.defineProperty(exports,"vacuumImpedanceDependencies",{enumerable:!0,get:function(){return _dependenciesVacuumImpedance.vacuumImpedanceDependencies}}),Object.defineProperty(exports,"weakMixingAngleDependencies",{enumerable:!0,get:function(){return _dependenciesWeakMixingAngle.weakMixingAngleDependencies}}),Object.defineProperty(exports,"wienDisplacementDependencies",{enumerable:!0,get:function(){return _dependenciesWienDisplacement.wienDisplacementDependencies}}),Object.defineProperty(exports,"applyTransformDependencies",{enumerable:!0,get:function(){return _dependenciesApplyTransform.applyTransformDependencies}}),Object.defineProperty(exports,"columnTransformDependencies",{enumerable:!0,get:function(){return _dependenciesColumnTransform.columnTransformDependencies}}),Object.defineProperty(exports,"filterTransformDependencies",{enumerable:!0,get:function(){return _dependenciesFilterTransform.filterTransformDependencies}}),Object.defineProperty(exports,"forEachTransformDependencies",{enumerable:!0,get:function(){return _dependenciesForEachTransform.forEachTransformDependencies}}),Object.defineProperty(exports,"indexTransformDependencies",{enumerable:!0,get:function(){return _dependenciesIndexTransform.indexTransformDependencies}}),Object.defineProperty(exports,"mapTransformDependencies",{enumerable:!0,get:function(){return _dependenciesMapTransform.mapTransformDependencies}}),Object.defineProperty(exports,"maxTransformDependencies",{enumerable:!0,get:function(){return _dependenciesMaxTransform.maxTransformDependencies}}),Object.defineProperty(exports,"meanTransformDependencies",{enumerable:!0,get:function(){return _dependenciesMeanTransform.meanTransformDependencies}}),Object.defineProperty(exports,"minTransformDependencies",{enumerable:!0,get:function(){return _dependenciesMinTransform.minTransformDependencies}}),Object.defineProperty(exports,"rangeTransformDependencies",{enumerable:!0,get:function(){return _dependenciesRangeTransform.rangeTransformDependencies}}),Object.defineProperty(exports,"rowTransformDependencies",{enumerable:!0,get:function(){return _dependenciesRowTransform.rowTransformDependencies}}),Object.defineProperty(exports,"subsetTransformDependencies",{enumerable:!0,get:function(){return _dependenciesSubsetTransform.subsetTransformDependencies}}),Object.defineProperty(exports,"concatTransformDependencies",{enumerable:!0,get:function(){return _dependenciesConcatTransform.concatTransformDependencies}}),Object.defineProperty(exports,"stdTransformDependencies",{enumerable:!0,get:function(){return _dependenciesStdTransform.stdTransformDependencies}}),Object.defineProperty(exports,"sumTransformDependencies",{enumerable:!0,get:function(){return _dependenciesSumTransform.sumTransformDependencies}}),Object.defineProperty(exports,"varianceTransformDependencies",{enumerable:!0,get:function(){return _dependenciesVarianceTransform.varianceTransformDependencies}}),Object.defineProperty(exports,"all",{enumerable:!0,get:function(){return _allFactoriesAny.all}});var _dependenciesTyped=require("./dependenciesAny/dependenciesTyped.generated"),_dependenciesResultSet=require("./dependenciesAny/dependenciesResultSet.generated"),_dependenciesBigNumberClass=require("./dependenciesAny/dependenciesBigNumberClass.generated"),_dependenciesComplexClass=require("./dependenciesAny/dependenciesComplexClass.generated"),_dependenciesFractionClass=require("./dependenciesAny/dependenciesFractionClass.generated"),_dependenciesRangeClass=require("./dependenciesAny/dependenciesRangeClass.generated"),_dependenciesMatrixClass=require("./dependenciesAny/dependenciesMatrixClass.generated"),_dependenciesDenseMatrixClass=require("./dependenciesAny/dependenciesDenseMatrixClass.generated"),_dependenciesClone=require("./dependenciesAny/dependenciesClone.generated"),_dependenciesIsInteger=require("./dependenciesAny/dependenciesIsInteger.generated"),_dependenciesIsNegative=require("./dependenciesAny/dependenciesIsNegative.generated"),_dependenciesIsNumeric=require("./dependenciesAny/dependenciesIsNumeric.generated"),_dependenciesHasNumericValue=require("./dependenciesAny/dependenciesHasNumericValue.generated"),_dependenciesIsPositive=require("./dependenciesAny/dependenciesIsPositive.generated"),_dependenciesIsZero=require("./dependenciesAny/dependenciesIsZero.generated"),_dependenciesIsNaN=require("./dependenciesAny/dependenciesIsNaN.generated"),_dependenciesTypeOf=require("./dependenciesAny/dependenciesTypeOf.generated"),_dependenciesDeprecatedTypeof=require("./dependenciesAny/dependenciesDeprecatedTypeof.generated"),_dependenciesEqualScalar=require("./dependenciesAny/dependenciesEqualScalar.generated"),_dependenciesSparseMatrixClass=require("./dependenciesAny/dependenciesSparseMatrixClass.generated"),_dependenciesNumber=require("./dependenciesAny/dependenciesNumber.generated"),_dependenciesString=require("./dependenciesAny/dependenciesString.generated"),_dependenciesBoolean=require("./dependenciesAny/dependenciesBoolean.generated"),_dependenciesBignumber=require("./dependenciesAny/dependenciesBignumber.generated"),_dependenciesComplex=require("./dependenciesAny/dependenciesComplex.generated"),_dependenciesFraction=require("./dependenciesAny/dependenciesFraction.generated"),_dependenciesMatrix=require("./dependenciesAny/dependenciesMatrix.generated"),_dependenciesSplitUnit=require("./dependenciesAny/dependenciesSplitUnit.generated"),_dependenciesUnaryMinus=require("./dependenciesAny/dependenciesUnaryMinus.generated"),_dependenciesUnaryPlus=require("./dependenciesAny/dependenciesUnaryPlus.generated"),_dependenciesAbs=require("./dependenciesAny/dependenciesAbs.generated"),_dependenciesApply=require("./dependenciesAny/dependenciesApply.generated"),_dependenciesAddScalar=require("./dependenciesAny/dependenciesAddScalar.generated"),_dependenciesCbrt=require("./dependenciesAny/dependenciesCbrt.generated"),_dependenciesCeil=require("./dependenciesAny/dependenciesCeil.generated"),_dependenciesCube=require("./dependenciesAny/dependenciesCube.generated"),_dependenciesExp=require("./dependenciesAny/dependenciesExp.generated"),_dependenciesExpm=require("./dependenciesAny/dependenciesExpm1.generated"),_dependenciesFix=require("./dependenciesAny/dependenciesFix.generated"),_dependenciesFloor=require("./dependenciesAny/dependenciesFloor.generated"),_dependenciesGcd=require("./dependenciesAny/dependenciesGcd.generated"),_dependenciesLcm=require("./dependenciesAny/dependenciesLcm.generated"),_dependenciesLog=require("./dependenciesAny/dependenciesLog10.generated"),_dependenciesLog2=require("./dependenciesAny/dependenciesLog2.generated"),_dependenciesMod=require("./dependenciesAny/dependenciesMod.generated"),_dependenciesMultiplyScalar=require("./dependenciesAny/dependenciesMultiplyScalar.generated"),_dependenciesMultiply=require("./dependenciesAny/dependenciesMultiply.generated"),_dependenciesNthRoot=require("./dependenciesAny/dependenciesNthRoot.generated"),_dependenciesSign=require("./dependenciesAny/dependenciesSign.generated"),_dependenciesSqrt=require("./dependenciesAny/dependenciesSqrt.generated"),_dependenciesSquare=require("./dependenciesAny/dependenciesSquare.generated"),_dependenciesSubtract=require("./dependenciesAny/dependenciesSubtract.generated"),_dependenciesXgcd=require("./dependenciesAny/dependenciesXgcd.generated"),_dependenciesDotMultiply=require("./dependenciesAny/dependenciesDotMultiply.generated"),_dependenciesBitAnd=require("./dependenciesAny/dependenciesBitAnd.generated"),_dependenciesBitNot=require("./dependenciesAny/dependenciesBitNot.generated"),_dependenciesBitOr=require("./dependenciesAny/dependenciesBitOr.generated"),_dependenciesBitXor=require("./dependenciesAny/dependenciesBitXor.generated"),_dependenciesArg=require("./dependenciesAny/dependenciesArg.generated"),_dependenciesConj=require("./dependenciesAny/dependenciesConj.generated"),_dependenciesIm=require("./dependenciesAny/dependenciesIm.generated"),_dependenciesRe=require("./dependenciesAny/dependenciesRe.generated"),_dependenciesNot=require("./dependenciesAny/dependenciesNot.generated"),_dependenciesOr=require("./dependenciesAny/dependenciesOr.generated"),_dependenciesXor=require("./dependenciesAny/dependenciesXor.generated"),_dependenciesConcat=require("./dependenciesAny/dependenciesConcat.generated"),_dependenciesColumn=require("./dependenciesAny/dependenciesColumn.generated"),_dependenciesCross=require("./dependenciesAny/dependenciesCross.generated"),_dependenciesDiag=require("./dependenciesAny/dependenciesDiag.generated"),_dependenciesEye=require("./dependenciesAny/dependenciesEye.generated"),_dependenciesFilter=require("./dependenciesAny/dependenciesFilter.generated"),_dependenciesFlatten=require("./dependenciesAny/dependenciesFlatten.generated"),_dependenciesForEach=require("./dependenciesAny/dependenciesForEach.generated"),_dependenciesGetMatrixDataType=require("./dependenciesAny/dependenciesGetMatrixDataType.generated"),_dependenciesIdentity=require("./dependenciesAny/dependenciesIdentity.generated"),_dependenciesKron=require("./dependenciesAny/dependenciesKron.generated"),_dependenciesMap=require("./dependenciesAny/dependenciesMap.generated"),_dependenciesOnes=require("./dependenciesAny/dependenciesOnes.generated"),_dependenciesRange=require("./dependenciesAny/dependenciesRange.generated"),_dependenciesReshape=require("./dependenciesAny/dependenciesReshape.generated"),_dependenciesResize=require("./dependenciesAny/dependenciesResize.generated"),_dependenciesRow=require("./dependenciesAny/dependenciesRow.generated"),_dependenciesSize=require("./dependenciesAny/dependenciesSize.generated"),_dependenciesSqueeze=require("./dependenciesAny/dependenciesSqueeze.generated"),_dependenciesSubset=require("./dependenciesAny/dependenciesSubset.generated"),_dependenciesTranspose=require("./dependenciesAny/dependenciesTranspose.generated"),_dependenciesCtranspose=require("./dependenciesAny/dependenciesCtranspose.generated"),_dependenciesZeros=require("./dependenciesAny/dependenciesZeros.generated"),_dependenciesErf=require("./dependenciesAny/dependenciesErf.generated"),_dependenciesMode=require("./dependenciesAny/dependenciesMode.generated"),_dependenciesProd=require("./dependenciesAny/dependenciesProd.generated"),_dependenciesFormat=require("./dependenciesAny/dependenciesFormat.generated"),_dependenciesPrint=require("./dependenciesAny/dependenciesPrint.generated"),_dependenciesTo=require("./dependenciesAny/dependenciesTo.generated"),_dependenciesIsPrime=require("./dependenciesAny/dependenciesIsPrime.generated"),_dependenciesNumeric=require("./dependenciesAny/dependenciesNumeric.generated"),_dependenciesDivideScalar=require("./dependenciesAny/dependenciesDivideScalar.generated"),_dependenciesPow=require("./dependenciesAny/dependenciesPow.generated"),_dependenciesRound=require("./dependenciesAny/dependenciesRound.generated"),_dependenciesLog3=require("./dependenciesAny/dependenciesLog.generated"),_dependenciesLog1p=require("./dependenciesAny/dependenciesLog1p.generated"),_dependenciesNthRoots=require("./dependenciesAny/dependenciesNthRoots.generated"),_dependenciesDotPow=require("./dependenciesAny/dependenciesDotPow.generated"),_dependenciesDotDivide=require("./dependenciesAny/dependenciesDotDivide.generated"),_dependenciesLsolve=require("./dependenciesAny/dependenciesLsolve.generated"),_dependenciesUsolve=require("./dependenciesAny/dependenciesUsolve.generated"),_dependenciesLeftShift=require("./dependenciesAny/dependenciesLeftShift.generated"),_dependenciesRightArithShift=require("./dependenciesAny/dependenciesRightArithShift.generated"),_dependenciesRightLogShift=require("./dependenciesAny/dependenciesRightLogShift.generated"),_dependenciesAnd=require("./dependenciesAny/dependenciesAnd.generated"),_dependenciesCompare=require("./dependenciesAny/dependenciesCompare.generated"),_dependenciesCompareNatural=require("./dependenciesAny/dependenciesCompareNatural.generated"),_dependenciesCompareText=require("./dependenciesAny/dependenciesCompareText.generated"),_dependenciesEqual=require("./dependenciesAny/dependenciesEqual.generated"),_dependenciesEqualText=require("./dependenciesAny/dependenciesEqualText.generated"),_dependenciesSmaller=require("./dependenciesAny/dependenciesSmaller.generated"),_dependenciesSmallerEq=require("./dependenciesAny/dependenciesSmallerEq.generated"),_dependenciesLarger=require("./dependenciesAny/dependenciesLarger.generated"),_dependenciesLargerEq=require("./dependenciesAny/dependenciesLargerEq.generated"),_dependenciesDeepEqual=require("./dependenciesAny/dependenciesDeepEqual.generated"),_dependenciesUnequal=require("./dependenciesAny/dependenciesUnequal.generated"),_dependenciesPartitionSelect=require("./dependenciesAny/dependenciesPartitionSelect.generated"),_dependenciesSort=require("./dependenciesAny/dependenciesSort.generated"),_dependenciesMax=require("./dependenciesAny/dependenciesMax.generated"),_dependenciesMin=require("./dependenciesAny/dependenciesMin.generated"),_dependenciesImmutableDenseMatrixClass=require("./dependenciesAny/dependenciesImmutableDenseMatrixClass.generated"),_dependenciesIndexClass=require("./dependenciesAny/dependenciesIndexClass.generated"),_dependenciesFibonacciHeapClass=require("./dependenciesAny/dependenciesFibonacciHeapClass.generated"),_dependenciesSpaClass=require("./dependenciesAny/dependenciesSpaClass.generated"),_dependenciesUnitClass=require("./dependenciesAny/dependenciesUnitClass.generated"),_dependenciesUnitFunction=require("./dependenciesAny/dependenciesUnitFunction.generated"),_dependenciesSparse=require("./dependenciesAny/dependenciesSparse.generated"),_dependenciesCreateUnit=require("./dependenciesAny/dependenciesCreateUnit.generated"),_dependenciesAcos=require("./dependenciesAny/dependenciesAcos.generated"),_dependenciesAcosh=require("./dependenciesAny/dependenciesAcosh.generated"),_dependenciesAcot=require("./dependenciesAny/dependenciesAcot.generated"),_dependenciesAcoth=require("./dependenciesAny/dependenciesAcoth.generated"),_dependenciesAcsc=require("./dependenciesAny/dependenciesAcsc.generated"),_dependenciesAcsch=require("./dependenciesAny/dependenciesAcsch.generated"),_dependenciesAsec=require("./dependenciesAny/dependenciesAsec.generated"),_dependenciesAsech=require("./dependenciesAny/dependenciesAsech.generated"),_dependenciesAsin=require("./dependenciesAny/dependenciesAsin.generated"),_dependenciesAsinh=require("./dependenciesAny/dependenciesAsinh.generated"),_dependenciesAtan=require("./dependenciesAny/dependenciesAtan.generated"),_dependenciesAtan2=require("./dependenciesAny/dependenciesAtan2.generated"),_dependenciesAtanh=require("./dependenciesAny/dependenciesAtanh.generated"),_dependenciesCos=require("./dependenciesAny/dependenciesCos.generated"),_dependenciesCosh=require("./dependenciesAny/dependenciesCosh.generated"),_dependenciesCot=require("./dependenciesAny/dependenciesCot.generated"),_dependenciesCoth=require("./dependenciesAny/dependenciesCoth.generated"),_dependenciesCsc=require("./dependenciesAny/dependenciesCsc.generated"),_dependenciesCsch=require("./dependenciesAny/dependenciesCsch.generated"),_dependenciesSec=require("./dependenciesAny/dependenciesSec.generated"),_dependenciesSech=require("./dependenciesAny/dependenciesSech.generated"),_dependenciesSin=require("./dependenciesAny/dependenciesSin.generated"),_dependenciesSinh=require("./dependenciesAny/dependenciesSinh.generated"),_dependenciesTan=require("./dependenciesAny/dependenciesTan.generated"),_dependenciesTanh=require("./dependenciesAny/dependenciesTanh.generated"),_dependenciesSetCartesian=require("./dependenciesAny/dependenciesSetCartesian.generated"),_dependenciesSetDifference=require("./dependenciesAny/dependenciesSetDifference.generated"),_dependenciesSetDistinct=require("./dependenciesAny/dependenciesSetDistinct.generated"),_dependenciesSetIntersect=require("./dependenciesAny/dependenciesSetIntersect.generated"),_dependenciesSetIsSubset=require("./dependenciesAny/dependenciesSetIsSubset.generated"),_dependenciesSetMultiplicity=require("./dependenciesAny/dependenciesSetMultiplicity.generated"),_dependenciesSetPowerset=require("./dependenciesAny/dependenciesSetPowerset.generated"),_dependenciesSetSize=require("./dependenciesAny/dependenciesSetSize.generated"),_dependenciesSetSymDifference=require("./dependenciesAny/dependenciesSetSymDifference.generated"),_dependenciesSetUnion=require("./dependenciesAny/dependenciesSetUnion.generated"),_dependenciesAdd=require("./dependenciesAny/dependenciesAdd.generated"),_dependenciesHypot=require("./dependenciesAny/dependenciesHypot.generated"),_dependenciesNorm=require("./dependenciesAny/dependenciesNorm.generated"),_dependenciesDot=require("./dependenciesAny/dependenciesDot.generated"),_dependenciesTrace=require("./dependenciesAny/dependenciesTrace.generated"),_dependenciesIndex=require("./dependenciesAny/dependenciesIndex.generated"),_dependenciesNode=require("./dependenciesAny/dependenciesNode.generated"),_dependenciesAccessorNode=require("./dependenciesAny/dependenciesAccessorNode.generated"),_dependenciesArrayNode=require("./dependenciesAny/dependenciesArrayNode.generated"),_dependenciesAssignmentNode=require("./dependenciesAny/dependenciesAssignmentNode.generated"),_dependenciesBlockNode=require("./dependenciesAny/dependenciesBlockNode.generated"),_dependenciesConditionalNode=require("./dependenciesAny/dependenciesConditionalNode.generated"),_dependenciesConstantNode=require("./dependenciesAny/dependenciesConstantNode.generated"),_dependenciesFunctionAssignmentNode=require("./dependenciesAny/dependenciesFunctionAssignmentNode.generated"),_dependenciesIndexNode=require("./dependenciesAny/dependenciesIndexNode.generated"),_dependenciesObjectNode=require("./dependenciesAny/dependenciesObjectNode.generated"),_dependenciesOperatorNode=require("./dependenciesAny/dependenciesOperatorNode.generated"),_dependenciesParenthesisNode=require("./dependenciesAny/dependenciesParenthesisNode.generated"),_dependenciesRangeNode=require("./dependenciesAny/dependenciesRangeNode.generated"),_dependenciesRelationalNode=require("./dependenciesAny/dependenciesRelationalNode.generated"),_dependenciesSymbolNode=require("./dependenciesAny/dependenciesSymbolNode.generated"),_dependenciesFunctionNode=require("./dependenciesAny/dependenciesFunctionNode.generated"),_dependenciesParse=require("./dependenciesAny/dependenciesParse.generated"),_dependenciesCompile=require("./dependenciesAny/dependenciesCompile.generated"),_dependenciesEvaluate=require("./dependenciesAny/dependenciesEvaluate.generated"),_dependenciesDeprecatedEval=require("./dependenciesAny/dependenciesDeprecatedEval.generated"),_dependenciesParserClass=require("./dependenciesAny/dependenciesParserClass.generated"),_dependenciesParser=require("./dependenciesAny/dependenciesParser.generated"),_dependenciesLup=require("./dependenciesAny/dependenciesLup.generated"),_dependenciesQr=require("./dependenciesAny/dependenciesQr.generated"),_dependenciesSlu=require("./dependenciesAny/dependenciesSlu.generated"),_dependenciesLusolve=require("./dependenciesAny/dependenciesLusolve.generated"),_dependenciesHelpClass=require("./dependenciesAny/dependenciesHelpClass.generated"),_dependenciesChainClass=require("./dependenciesAny/dependenciesChainClass.generated"),_dependenciesHelp=require("./dependenciesAny/dependenciesHelp.generated"),_dependenciesChain=require("./dependenciesAny/dependenciesChain.generated"),_dependenciesDet=require("./dependenciesAny/dependenciesDet.generated"),_dependenciesInv=require("./dependenciesAny/dependenciesInv.generated"),_dependenciesEigs=require("./dependenciesAny/dependenciesEigs.generated"),_dependenciesExpm2=require("./dependenciesAny/dependenciesExpm.generated"),_dependenciesSqrtm=require("./dependenciesAny/dependenciesSqrtm.generated"),_dependenciesDivide=require("./dependenciesAny/dependenciesDivide.generated"),_dependenciesDistance=require("./dependenciesAny/dependenciesDistance.generated"),_dependenciesIntersect=require("./dependenciesAny/dependenciesIntersect.generated"),_dependenciesSum=require("./dependenciesAny/dependenciesSum.generated"),_dependenciesMean=require("./dependenciesAny/dependenciesMean.generated"),_dependenciesMedian=require("./dependenciesAny/dependenciesMedian.generated"),_dependenciesMad=require("./dependenciesAny/dependenciesMad.generated"),_dependenciesVariance=require("./dependenciesAny/dependenciesVariance.generated"),_dependenciesDeprecatedVar=require("./dependenciesAny/dependenciesDeprecatedVar.generated"),_dependenciesQuantileSeq=require("./dependenciesAny/dependenciesQuantileSeq.generated"),_dependenciesStd=require("./dependenciesAny/dependenciesStd.generated"),_dependenciesCombinations=require("./dependenciesAny/dependenciesCombinations.generated"),_dependenciesCombinationsWithRep=require("./dependenciesAny/dependenciesCombinationsWithRep.generated"),_dependenciesGamma=require("./dependenciesAny/dependenciesGamma.generated"),_dependenciesFactorial=require("./dependenciesAny/dependenciesFactorial.generated"),_dependenciesKldivergence=require("./dependenciesAny/dependenciesKldivergence.generated"),_dependenciesMultinomial=require("./dependenciesAny/dependenciesMultinomial.generated"),_dependenciesPermutations=require("./dependenciesAny/dependenciesPermutations.generated"),_dependenciesPickRandom=require("./dependenciesAny/dependenciesPickRandom.generated"),_dependenciesRandom=require("./dependenciesAny/dependenciesRandom.generated"),_dependenciesRandomInt=require("./dependenciesAny/dependenciesRandomInt.generated"),_dependenciesStirlingS=require("./dependenciesAny/dependenciesStirlingS2.generated"),_dependenciesBellNumbers=require("./dependenciesAny/dependenciesBellNumbers.generated"),_dependenciesCatalan=require("./dependenciesAny/dependenciesCatalan.generated"),_dependenciesComposition=require("./dependenciesAny/dependenciesComposition.generated"),_dependenciesSimplify=require("./dependenciesAny/dependenciesSimplify.generated"),_dependenciesDerivative=require("./dependenciesAny/dependenciesDerivative.generated"),_dependenciesRationalize=require("./dependenciesAny/dependenciesRationalize.generated"),_dependenciesReviver=require("./dependenciesAny/dependenciesReviver.generated"),_dependenciesReplacer=require("./dependenciesAny/dependenciesReplacer.generated"),_dependenciesE=require("./dependenciesAny/dependenciesE.generated"),_dependenciesUppercaseE=require("./dependenciesAny/dependenciesUppercaseE.generated"),_dependenciesFalse=require("./dependenciesAny/dependenciesFalse.generated"),_dependenciesI=require("./dependenciesAny/dependenciesI.generated"),_dependenciesInfinity=require("./dependenciesAny/dependenciesInfinity.generated"),_dependenciesLN=require("./dependenciesAny/dependenciesLN10.generated"),_dependenciesLN2=require("./dependenciesAny/dependenciesLN2.generated"),_dependenciesLOG10E=require("./dependenciesAny/dependenciesLOG10E.generated"),_dependenciesLOG2E=require("./dependenciesAny/dependenciesLOG2E.generated"),_dependenciesNaN=require("./dependenciesAny/dependenciesNaN.generated"),_dependenciesNull=require("./dependenciesAny/dependenciesNull.generated"),_dependenciesPhi=require("./dependenciesAny/dependenciesPhi.generated"),_dependenciesPi=require("./dependenciesAny/dependenciesPi.generated"),_dependenciesUppercasePi=require("./dependenciesAny/dependenciesUppercasePi.generated"),_dependenciesSQRT1_=require("./dependenciesAny/dependenciesSQRT1_2.generated"),_dependenciesSQRT=require("./dependenciesAny/dependenciesSQRT2.generated"),_dependenciesTau=require("./dependenciesAny/dependenciesTau.generated"),_dependenciesTrue=require("./dependenciesAny/dependenciesTrue.generated"),_dependenciesVersion=require("./dependenciesAny/dependenciesVersion.generated"),_dependenciesAtomicMass=require("./dependenciesAny/dependenciesAtomicMass.generated"),_dependenciesAvogadro=require("./dependenciesAny/dependenciesAvogadro.generated"),_dependenciesBohrMagneton=require("./dependenciesAny/dependenciesBohrMagneton.generated"),_dependenciesBohrRadius=require("./dependenciesAny/dependenciesBohrRadius.generated"),_dependenciesBoltzmann=require("./dependenciesAny/dependenciesBoltzmann.generated"),_dependenciesClassicalElectronRadius=require("./dependenciesAny/dependenciesClassicalElectronRadius.generated"),_dependenciesConductanceQuantum=require("./dependenciesAny/dependenciesConductanceQuantum.generated"),_dependenciesCoulomb=require("./dependenciesAny/dependenciesCoulomb.generated"),_dependenciesDeuteronMass=require("./dependenciesAny/dependenciesDeuteronMass.generated"),_dependenciesEfimovFactor=require("./dependenciesAny/dependenciesEfimovFactor.generated"),_dependenciesElectricConstant=require("./dependenciesAny/dependenciesElectricConstant.generated"),_dependenciesElectronMass=require("./dependenciesAny/dependenciesElectronMass.generated"),_dependenciesElementaryCharge=require("./dependenciesAny/dependenciesElementaryCharge.generated"),_dependenciesFaraday=require("./dependenciesAny/dependenciesFaraday.generated"),_dependenciesFermiCoupling=require("./dependenciesAny/dependenciesFermiCoupling.generated"),_dependenciesFineStructure=require("./dependenciesAny/dependenciesFineStructure.generated"),_dependenciesFirstRadiation=require("./dependenciesAny/dependenciesFirstRadiation.generated"),_dependenciesGasConstant=require("./dependenciesAny/dependenciesGasConstant.generated"),_dependenciesGravitationConstant=require("./dependenciesAny/dependenciesGravitationConstant.generated"),_dependenciesGravity=require("./dependenciesAny/dependenciesGravity.generated"),_dependenciesHartreeEnergy=require("./dependenciesAny/dependenciesHartreeEnergy.generated"),_dependenciesInverseConductanceQuantum=require("./dependenciesAny/dependenciesInverseConductanceQuantum.generated"),_dependenciesKlitzing=require("./dependenciesAny/dependenciesKlitzing.generated"),_dependenciesLoschmidt=require("./dependenciesAny/dependenciesLoschmidt.generated"),_dependenciesMagneticConstant=require("./dependenciesAny/dependenciesMagneticConstant.generated"),_dependenciesMagneticFluxQuantum=require("./dependenciesAny/dependenciesMagneticFluxQuantum.generated"),_dependenciesMolarMass=require("./dependenciesAny/dependenciesMolarMass.generated"),_dependenciesMolarMassC=require("./dependenciesAny/dependenciesMolarMassC12.generated"),_dependenciesMolarPlanckConstant=require("./dependenciesAny/dependenciesMolarPlanckConstant.generated"),_dependenciesMolarVolume=require("./dependenciesAny/dependenciesMolarVolume.generated"),_dependenciesNeutronMass=require("./dependenciesAny/dependenciesNeutronMass.generated"),_dependenciesNuclearMagneton=require("./dependenciesAny/dependenciesNuclearMagneton.generated"),_dependenciesPlanckCharge=require("./dependenciesAny/dependenciesPlanckCharge.generated"),_dependenciesPlanckConstant=require("./dependenciesAny/dependenciesPlanckConstant.generated"),_dependenciesPlanckLength=require("./dependenciesAny/dependenciesPlanckLength.generated"),_dependenciesPlanckMass=require("./dependenciesAny/dependenciesPlanckMass.generated"),_dependenciesPlanckTemperature=require("./dependenciesAny/dependenciesPlanckTemperature.generated"),_dependenciesPlanckTime=require("./dependenciesAny/dependenciesPlanckTime.generated"),_dependenciesProtonMass=require("./dependenciesAny/dependenciesProtonMass.generated"),_dependenciesQuantumOfCirculation=require("./dependenciesAny/dependenciesQuantumOfCirculation.generated"),_dependenciesReducedPlanckConstant=require("./dependenciesAny/dependenciesReducedPlanckConstant.generated"),_dependenciesRydberg=require("./dependenciesAny/dependenciesRydberg.generated"),_dependenciesSackurTetrode=require("./dependenciesAny/dependenciesSackurTetrode.generated"),_dependenciesSecondRadiation=require("./dependenciesAny/dependenciesSecondRadiation.generated"),_dependenciesSpeedOfLight=require("./dependenciesAny/dependenciesSpeedOfLight.generated"),_dependenciesStefanBoltzmann=require("./dependenciesAny/dependenciesStefanBoltzmann.generated"),_dependenciesThomsonCrossSection=require("./dependenciesAny/dependenciesThomsonCrossSection.generated"),_dependenciesVacuumImpedance=require("./dependenciesAny/dependenciesVacuumImpedance.generated"),_dependenciesWeakMixingAngle=require("./dependenciesAny/dependenciesWeakMixingAngle.generated"),_dependenciesWienDisplacement=require("./dependenciesAny/dependenciesWienDisplacement.generated"),_dependenciesApplyTransform=require("./dependenciesAny/dependenciesApplyTransform.generated"),_dependenciesColumnTransform=require("./dependenciesAny/dependenciesColumnTransform.generated"),_dependenciesFilterTransform=require("./dependenciesAny/dependenciesFilterTransform.generated"),_dependenciesForEachTransform=require("./dependenciesAny/dependenciesForEachTransform.generated"),_dependenciesIndexTransform=require("./dependenciesAny/dependenciesIndexTransform.generated"),_dependenciesMapTransform=require("./dependenciesAny/dependenciesMapTransform.generated"),_dependenciesMaxTransform=require("./dependenciesAny/dependenciesMaxTransform.generated"),_dependenciesMeanTransform=require("./dependenciesAny/dependenciesMeanTransform.generated"),_dependenciesMinTransform=require("./dependenciesAny/dependenciesMinTransform.generated"),_dependenciesRangeTransform=require("./dependenciesAny/dependenciesRangeTransform.generated"),_dependenciesRowTransform=require("./dependenciesAny/dependenciesRowTransform.generated"),_dependenciesSubsetTransform=require("./dependenciesAny/dependenciesSubsetTransform.generated"),_dependenciesConcatTransform=require("./dependenciesAny/dependenciesConcatTransform.generated"),_dependenciesStdTransform=require("./dependenciesAny/dependenciesStdTransform.generated"),_dependenciesSumTransform=require("./dependenciesAny/dependenciesSumTransform.generated"),_dependenciesVarianceTransform=require("./dependenciesAny/dependenciesVarianceTransform.generated"),_allFactoriesAny=require("./allFactoriesAny.js")},{"./allFactoriesAny.js":66,"./dependenciesAny/dependenciesAbs.generated":69,"./dependenciesAny/dependenciesAccessorNode.generated":70,"./dependenciesAny/dependenciesAcos.generated":71,"./dependenciesAny/dependenciesAcosh.generated":72,"./dependenciesAny/dependenciesAcot.generated":73,"./dependenciesAny/dependenciesAcoth.generated":74,"./dependenciesAny/dependenciesAcsc.generated":75,"./dependenciesAny/dependenciesAcsch.generated":76,"./dependenciesAny/dependenciesAdd.generated":77,"./dependenciesAny/dependenciesAddScalar.generated":78,"./dependenciesAny/dependenciesAnd.generated":79,"./dependenciesAny/dependenciesApply.generated":80,"./dependenciesAny/dependenciesApplyTransform.generated":81,"./dependenciesAny/dependenciesArg.generated":82,"./dependenciesAny/dependenciesArrayNode.generated":83,"./dependenciesAny/dependenciesAsec.generated":84,"./dependenciesAny/dependenciesAsech.generated":85,"./dependenciesAny/dependenciesAsin.generated":86,"./dependenciesAny/dependenciesAsinh.generated":87,"./dependenciesAny/dependenciesAssignmentNode.generated":88,"./dependenciesAny/dependenciesAtan.generated":89,"./dependenciesAny/dependenciesAtan2.generated":90,"./dependenciesAny/dependenciesAtanh.generated":91,"./dependenciesAny/dependenciesAtomicMass.generated":92,"./dependenciesAny/dependenciesAvogadro.generated":93,"./dependenciesAny/dependenciesBellNumbers.generated":94,"./dependenciesAny/dependenciesBigNumberClass.generated":95,"./dependenciesAny/dependenciesBignumber.generated":96,"./dependenciesAny/dependenciesBitAnd.generated":97,"./dependenciesAny/dependenciesBitNot.generated":98,"./dependenciesAny/dependenciesBitOr.generated":99,"./dependenciesAny/dependenciesBitXor.generated":100,"./dependenciesAny/dependenciesBlockNode.generated":101,"./dependenciesAny/dependenciesBohrMagneton.generated":102,"./dependenciesAny/dependenciesBohrRadius.generated":103,"./dependenciesAny/dependenciesBoltzmann.generated":104,"./dependenciesAny/dependenciesBoolean.generated":105,"./dependenciesAny/dependenciesCatalan.generated":106,"./dependenciesAny/dependenciesCbrt.generated":107,"./dependenciesAny/dependenciesCeil.generated":108,"./dependenciesAny/dependenciesChain.generated":109,"./dependenciesAny/dependenciesChainClass.generated":110,"./dependenciesAny/dependenciesClassicalElectronRadius.generated":111,"./dependenciesAny/dependenciesClone.generated":112,"./dependenciesAny/dependenciesColumn.generated":113,"./dependenciesAny/dependenciesColumnTransform.generated":114,"./dependenciesAny/dependenciesCombinations.generated":115,"./dependenciesAny/dependenciesCombinationsWithRep.generated":116,"./dependenciesAny/dependenciesCompare.generated":117,"./dependenciesAny/dependenciesCompareNatural.generated":118,"./dependenciesAny/dependenciesCompareText.generated":119,"./dependenciesAny/dependenciesCompile.generated":120,"./dependenciesAny/dependenciesComplex.generated":121,"./dependenciesAny/dependenciesComplexClass.generated":122,"./dependenciesAny/dependenciesComposition.generated":123,"./dependenciesAny/dependenciesConcat.generated":124,"./dependenciesAny/dependenciesConcatTransform.generated":125,"./dependenciesAny/dependenciesConditionalNode.generated":126,"./dependenciesAny/dependenciesConductanceQuantum.generated":127,"./dependenciesAny/dependenciesConj.generated":128,"./dependenciesAny/dependenciesConstantNode.generated":129,"./dependenciesAny/dependenciesCos.generated":130,"./dependenciesAny/dependenciesCosh.generated":131,"./dependenciesAny/dependenciesCot.generated":132,"./dependenciesAny/dependenciesCoth.generated":133,"./dependenciesAny/dependenciesCoulomb.generated":134,"./dependenciesAny/dependenciesCreateUnit.generated":135,"./dependenciesAny/dependenciesCross.generated":136,"./dependenciesAny/dependenciesCsc.generated":137,"./dependenciesAny/dependenciesCsch.generated":138,"./dependenciesAny/dependenciesCtranspose.generated":139,"./dependenciesAny/dependenciesCube.generated":140,"./dependenciesAny/dependenciesDeepEqual.generated":141,"./dependenciesAny/dependenciesDenseMatrixClass.generated":142,"./dependenciesAny/dependenciesDeprecatedEval.generated":143,"./dependenciesAny/dependenciesDeprecatedTypeof.generated":144,"./dependenciesAny/dependenciesDeprecatedVar.generated":145,"./dependenciesAny/dependenciesDerivative.generated":146,"./dependenciesAny/dependenciesDet.generated":147,"./dependenciesAny/dependenciesDeuteronMass.generated":148,"./dependenciesAny/dependenciesDiag.generated":149,"./dependenciesAny/dependenciesDistance.generated":150,"./dependenciesAny/dependenciesDivide.generated":151,"./dependenciesAny/dependenciesDivideScalar.generated":152,"./dependenciesAny/dependenciesDot.generated":153,"./dependenciesAny/dependenciesDotDivide.generated":154,"./dependenciesAny/dependenciesDotMultiply.generated":155,"./dependenciesAny/dependenciesDotPow.generated":156,"./dependenciesAny/dependenciesE.generated":157,"./dependenciesAny/dependenciesEfimovFactor.generated":158,"./dependenciesAny/dependenciesEigs.generated":159,"./dependenciesAny/dependenciesElectricConstant.generated":160,"./dependenciesAny/dependenciesElectronMass.generated":161,"./dependenciesAny/dependenciesElementaryCharge.generated":162,"./dependenciesAny/dependenciesEqual.generated":163,"./dependenciesAny/dependenciesEqualScalar.generated":164,"./dependenciesAny/dependenciesEqualText.generated":165,"./dependenciesAny/dependenciesErf.generated":166,"./dependenciesAny/dependenciesEvaluate.generated":167,"./dependenciesAny/dependenciesExp.generated":168,"./dependenciesAny/dependenciesExpm.generated":169,"./dependenciesAny/dependenciesExpm1.generated":170,"./dependenciesAny/dependenciesEye.generated":171,"./dependenciesAny/dependenciesFactorial.generated":172,"./dependenciesAny/dependenciesFalse.generated":173,"./dependenciesAny/dependenciesFaraday.generated":174,"./dependenciesAny/dependenciesFermiCoupling.generated":175,"./dependenciesAny/dependenciesFibonacciHeapClass.generated":176,"./dependenciesAny/dependenciesFilter.generated":177,"./dependenciesAny/dependenciesFilterTransform.generated":178,"./dependenciesAny/dependenciesFineStructure.generated":179,"./dependenciesAny/dependenciesFirstRadiation.generated":180,"./dependenciesAny/dependenciesFix.generated":181,"./dependenciesAny/dependenciesFlatten.generated":182,"./dependenciesAny/dependenciesFloor.generated":183,"./dependenciesAny/dependenciesForEach.generated":184,"./dependenciesAny/dependenciesForEachTransform.generated":185,"./dependenciesAny/dependenciesFormat.generated":186,"./dependenciesAny/dependenciesFraction.generated":187,"./dependenciesAny/dependenciesFractionClass.generated":188,"./dependenciesAny/dependenciesFunctionAssignmentNode.generated":189,"./dependenciesAny/dependenciesFunctionNode.generated":190,"./dependenciesAny/dependenciesGamma.generated":191,"./dependenciesAny/dependenciesGasConstant.generated":192,"./dependenciesAny/dependenciesGcd.generated":193,"./dependenciesAny/dependenciesGetMatrixDataType.generated":194,"./dependenciesAny/dependenciesGravitationConstant.generated":195,"./dependenciesAny/dependenciesGravity.generated":196,"./dependenciesAny/dependenciesHartreeEnergy.generated":197,"./dependenciesAny/dependenciesHasNumericValue.generated":198,"./dependenciesAny/dependenciesHelp.generated":199,"./dependenciesAny/dependenciesHelpClass.generated":200,"./dependenciesAny/dependenciesHypot.generated":201,"./dependenciesAny/dependenciesI.generated":202,"./dependenciesAny/dependenciesIdentity.generated":203,"./dependenciesAny/dependenciesIm.generated":204,"./dependenciesAny/dependenciesImmutableDenseMatrixClass.generated":205,"./dependenciesAny/dependenciesIndex.generated":206,"./dependenciesAny/dependenciesIndexClass.generated":207,"./dependenciesAny/dependenciesIndexNode.generated":208,"./dependenciesAny/dependenciesIndexTransform.generated":209,"./dependenciesAny/dependenciesInfinity.generated":210,"./dependenciesAny/dependenciesIntersect.generated":211,"./dependenciesAny/dependenciesInv.generated":212,"./dependenciesAny/dependenciesInverseConductanceQuantum.generated":213,"./dependenciesAny/dependenciesIsInteger.generated":214,"./dependenciesAny/dependenciesIsNaN.generated":215,"./dependenciesAny/dependenciesIsNegative.generated":216,"./dependenciesAny/dependenciesIsNumeric.generated":217,"./dependenciesAny/dependenciesIsPositive.generated":218,"./dependenciesAny/dependenciesIsPrime.generated":219,"./dependenciesAny/dependenciesIsZero.generated":220,"./dependenciesAny/dependenciesKldivergence.generated":221,"./dependenciesAny/dependenciesKlitzing.generated":222,"./dependenciesAny/dependenciesKron.generated":223,"./dependenciesAny/dependenciesLN10.generated":224,"./dependenciesAny/dependenciesLN2.generated":225,"./dependenciesAny/dependenciesLOG10E.generated":226,"./dependenciesAny/dependenciesLOG2E.generated":227,"./dependenciesAny/dependenciesLarger.generated":228,"./dependenciesAny/dependenciesLargerEq.generated":229,"./dependenciesAny/dependenciesLcm.generated":230,"./dependenciesAny/dependenciesLeftShift.generated":231,"./dependenciesAny/dependenciesLog.generated":232,"./dependenciesAny/dependenciesLog10.generated":233,"./dependenciesAny/dependenciesLog1p.generated":234,"./dependenciesAny/dependenciesLog2.generated":235,"./dependenciesAny/dependenciesLoschmidt.generated":236,"./dependenciesAny/dependenciesLsolve.generated":237,"./dependenciesAny/dependenciesLup.generated":238,"./dependenciesAny/dependenciesLusolve.generated":239,"./dependenciesAny/dependenciesMad.generated":240,"./dependenciesAny/dependenciesMagneticConstant.generated":241,"./dependenciesAny/dependenciesMagneticFluxQuantum.generated":242,"./dependenciesAny/dependenciesMap.generated":243,"./dependenciesAny/dependenciesMapTransform.generated":244,"./dependenciesAny/dependenciesMatrix.generated":245,"./dependenciesAny/dependenciesMatrixClass.generated":246,"./dependenciesAny/dependenciesMax.generated":247,"./dependenciesAny/dependenciesMaxTransform.generated":248,"./dependenciesAny/dependenciesMean.generated":249,"./dependenciesAny/dependenciesMeanTransform.generated":250,"./dependenciesAny/dependenciesMedian.generated":251,"./dependenciesAny/dependenciesMin.generated":252,"./dependenciesAny/dependenciesMinTransform.generated":253,"./dependenciesAny/dependenciesMod.generated":254,"./dependenciesAny/dependenciesMode.generated":255,"./dependenciesAny/dependenciesMolarMass.generated":256,"./dependenciesAny/dependenciesMolarMassC12.generated":257,"./dependenciesAny/dependenciesMolarPlanckConstant.generated":258,"./dependenciesAny/dependenciesMolarVolume.generated":259,"./dependenciesAny/dependenciesMultinomial.generated":260,"./dependenciesAny/dependenciesMultiply.generated":261,"./dependenciesAny/dependenciesMultiplyScalar.generated":262,"./dependenciesAny/dependenciesNaN.generated":263,"./dependenciesAny/dependenciesNeutronMass.generated":264,"./dependenciesAny/dependenciesNode.generated":265,"./dependenciesAny/dependenciesNorm.generated":266,"./dependenciesAny/dependenciesNot.generated":267,"./dependenciesAny/dependenciesNthRoot.generated":268,"./dependenciesAny/dependenciesNthRoots.generated":269,"./dependenciesAny/dependenciesNuclearMagneton.generated":270,"./dependenciesAny/dependenciesNull.generated":271,"./dependenciesAny/dependenciesNumber.generated":272,"./dependenciesAny/dependenciesNumeric.generated":273,"./dependenciesAny/dependenciesObjectNode.generated":274,"./dependenciesAny/dependenciesOnes.generated":275,"./dependenciesAny/dependenciesOperatorNode.generated":276,"./dependenciesAny/dependenciesOr.generated":277,"./dependenciesAny/dependenciesParenthesisNode.generated":278,"./dependenciesAny/dependenciesParse.generated":279,"./dependenciesAny/dependenciesParser.generated":280,"./dependenciesAny/dependenciesParserClass.generated":281,"./dependenciesAny/dependenciesPartitionSelect.generated":282,"./dependenciesAny/dependenciesPermutations.generated":283,"./dependenciesAny/dependenciesPhi.generated":284,"./dependenciesAny/dependenciesPi.generated":285,"./dependenciesAny/dependenciesPickRandom.generated":286,"./dependenciesAny/dependenciesPlanckCharge.generated":287,"./dependenciesAny/dependenciesPlanckConstant.generated":288,"./dependenciesAny/dependenciesPlanckLength.generated":289,"./dependenciesAny/dependenciesPlanckMass.generated":290,"./dependenciesAny/dependenciesPlanckTemperature.generated":291,"./dependenciesAny/dependenciesPlanckTime.generated":292,"./dependenciesAny/dependenciesPow.generated":293,"./dependenciesAny/dependenciesPrint.generated":294,"./dependenciesAny/dependenciesProd.generated":295,"./dependenciesAny/dependenciesProtonMass.generated":296,"./dependenciesAny/dependenciesQr.generated":297,"./dependenciesAny/dependenciesQuantileSeq.generated":298,"./dependenciesAny/dependenciesQuantumOfCirculation.generated":299,"./dependenciesAny/dependenciesRandom.generated":300,"./dependenciesAny/dependenciesRandomInt.generated":301,"./dependenciesAny/dependenciesRange.generated":302,"./dependenciesAny/dependenciesRangeClass.generated":303,"./dependenciesAny/dependenciesRangeNode.generated":304,"./dependenciesAny/dependenciesRangeTransform.generated":305,"./dependenciesAny/dependenciesRationalize.generated":306,"./dependenciesAny/dependenciesRe.generated":307,"./dependenciesAny/dependenciesReducedPlanckConstant.generated":308,"./dependenciesAny/dependenciesRelationalNode.generated":309,"./dependenciesAny/dependenciesReplacer.generated":310,"./dependenciesAny/dependenciesReshape.generated":311,"./dependenciesAny/dependenciesResize.generated":312,"./dependenciesAny/dependenciesResultSet.generated":313,"./dependenciesAny/dependenciesReviver.generated":314,"./dependenciesAny/dependenciesRightArithShift.generated":315,"./dependenciesAny/dependenciesRightLogShift.generated":316,"./dependenciesAny/dependenciesRound.generated":317,"./dependenciesAny/dependenciesRow.generated":318,"./dependenciesAny/dependenciesRowTransform.generated":319,"./dependenciesAny/dependenciesRydberg.generated":320,"./dependenciesAny/dependenciesSQRT1_2.generated":321,"./dependenciesAny/dependenciesSQRT2.generated":322,"./dependenciesAny/dependenciesSackurTetrode.generated":323,"./dependenciesAny/dependenciesSec.generated":324,"./dependenciesAny/dependenciesSech.generated":325,"./dependenciesAny/dependenciesSecondRadiation.generated":326,"./dependenciesAny/dependenciesSetCartesian.generated":327,"./dependenciesAny/dependenciesSetDifference.generated":328,"./dependenciesAny/dependenciesSetDistinct.generated":329,"./dependenciesAny/dependenciesSetIntersect.generated":330,"./dependenciesAny/dependenciesSetIsSubset.generated":331,"./dependenciesAny/dependenciesSetMultiplicity.generated":332,"./dependenciesAny/dependenciesSetPowerset.generated":333,"./dependenciesAny/dependenciesSetSize.generated":334,"./dependenciesAny/dependenciesSetSymDifference.generated":335,"./dependenciesAny/dependenciesSetUnion.generated":336,"./dependenciesAny/dependenciesSign.generated":337,"./dependenciesAny/dependenciesSimplify.generated":338,"./dependenciesAny/dependenciesSin.generated":339,"./dependenciesAny/dependenciesSinh.generated":340,"./dependenciesAny/dependenciesSize.generated":341,"./dependenciesAny/dependenciesSlu.generated":342,"./dependenciesAny/dependenciesSmaller.generated":343,"./dependenciesAny/dependenciesSmallerEq.generated":344,"./dependenciesAny/dependenciesSort.generated":345,"./dependenciesAny/dependenciesSpaClass.generated":346,"./dependenciesAny/dependenciesSparse.generated":347,"./dependenciesAny/dependenciesSparseMatrixClass.generated":348,"./dependenciesAny/dependenciesSpeedOfLight.generated":349,"./dependenciesAny/dependenciesSplitUnit.generated":350,"./dependenciesAny/dependenciesSqrt.generated":351,"./dependenciesAny/dependenciesSqrtm.generated":352,"./dependenciesAny/dependenciesSquare.generated":353,"./dependenciesAny/dependenciesSqueeze.generated":354,"./dependenciesAny/dependenciesStd.generated":355,"./dependenciesAny/dependenciesStdTransform.generated":356,"./dependenciesAny/dependenciesStefanBoltzmann.generated":357,"./dependenciesAny/dependenciesStirlingS2.generated":358,"./dependenciesAny/dependenciesString.generated":359,"./dependenciesAny/dependenciesSubset.generated":360,"./dependenciesAny/dependenciesSubsetTransform.generated":361,"./dependenciesAny/dependenciesSubtract.generated":362,"./dependenciesAny/dependenciesSum.generated":363,"./dependenciesAny/dependenciesSumTransform.generated":364,"./dependenciesAny/dependenciesSymbolNode.generated":365,"./dependenciesAny/dependenciesTan.generated":366,"./dependenciesAny/dependenciesTanh.generated":367,"./dependenciesAny/dependenciesTau.generated":368,"./dependenciesAny/dependenciesThomsonCrossSection.generated":369,"./dependenciesAny/dependenciesTo.generated":370,"./dependenciesAny/dependenciesTrace.generated":371,"./dependenciesAny/dependenciesTranspose.generated":372,"./dependenciesAny/dependenciesTrue.generated":373,"./dependenciesAny/dependenciesTypeOf.generated":374,"./dependenciesAny/dependenciesTyped.generated":375,"./dependenciesAny/dependenciesUnaryMinus.generated":376,"./dependenciesAny/dependenciesUnaryPlus.generated":377,"./dependenciesAny/dependenciesUnequal.generated":378,"./dependenciesAny/dependenciesUnitClass.generated":379,"./dependenciesAny/dependenciesUnitFunction.generated":380,"./dependenciesAny/dependenciesUppercaseE.generated":381,"./dependenciesAny/dependenciesUppercasePi.generated":382,"./dependenciesAny/dependenciesUsolve.generated":383,"./dependenciesAny/dependenciesVacuumImpedance.generated":384,"./dependenciesAny/dependenciesVariance.generated":385,"./dependenciesAny/dependenciesVarianceTransform.generated":386,"./dependenciesAny/dependenciesVersion.generated":387,"./dependenciesAny/dependenciesWeakMixingAngle.generated":388,"./dependenciesAny/dependenciesWienDisplacement.generated":389,"./dependenciesAny/dependenciesXgcd.generated":390,"./dependenciesAny/dependenciesXor.generated":391,"./dependenciesAny/dependenciesZeros.generated":392}],69:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),absDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createAbs:_factoriesAny.createAbs};exports.absDependencies=absDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],70:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AccessorNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_dependenciesSubset=require("./dependenciesSubset.generated"),_factoriesAny=require("../../factoriesAny.js"),AccessorNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,subsetDependencies:_dependenciesSubset.subsetDependencies,createAccessorNode:_factoriesAny.createAccessorNode};exports.AccessorNodeDependencies=AccessorNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265,"./dependenciesSubset.generated":360}],71:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosDependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),acosDependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createAcos:_factoriesAny.createAcos};exports.acosDependencies=acosDependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],72:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acoshDependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),acoshDependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createAcosh:_factoriesAny.createAcosh};exports.acoshDependencies=acoshDependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],73:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acotDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),acotDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createAcot:_factoriesAny.createAcot};exports.acotDependencies=acotDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesTyped.generated":375}],74:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acothDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),acothDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createAcoth:_factoriesAny.createAcoth};exports.acothDependencies=acothDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],75:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acscDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),acscDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createAcsc:_factoriesAny.createAcsc};exports.acscDependencies=acscDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],76:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acschDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),acschDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createAcsch:_factoriesAny.createAcsch};exports.acschDependencies=acschDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesTyped.generated":375}],77:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesSparseMatrixClass=require("./dependenciesSparseMatrixClass.generated"),_dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),addDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,SparseMatrixDependencies:_dependenciesSparseMatrixClass.SparseMatrixDependencies,addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createAdd:_factoriesAny.createAdd};exports.addDependencies=addDependencies},{"../../factoriesAny.js":658,"./dependenciesAddScalar.generated":78,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesSparseMatrixClass.generated":348,"./dependenciesTyped.generated":375}],78:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addScalarDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),addScalarDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createAddScalar:_factoriesAny.createAddScalar};exports.addScalarDependencies=addScalarDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],79:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.andDependencies=void 0;var _dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesNot=require("./dependenciesNot.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesZeros=require("./dependenciesZeros.generated"),_factoriesAny=require("../../factoriesAny.js"),andDependencies={equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,notDependencies:_dependenciesNot.notDependencies,typedDependencies:_dependenciesTyped.typedDependencies,zerosDependencies:_dependenciesZeros.zerosDependencies,createAnd:_factoriesAny.createAnd};exports.andDependencies=andDependencies},{"../../factoriesAny.js":658,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesNot.generated":267,"./dependenciesTyped.generated":375,"./dependenciesZeros.generated":392}],80:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyDependencies=void 0;var _dependenciesIsInteger=require("./dependenciesIsInteger.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),applyDependencies={isIntegerDependencies:_dependenciesIsInteger.isIntegerDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createApply:_factoriesAny.createApply};exports.applyDependencies=applyDependencies},{"../../factoriesAny.js":658,"./dependenciesIsInteger.generated":214,"./dependenciesTyped.generated":375}],81:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyTransformDependencies=void 0;var _dependenciesIsInteger=require("./dependenciesIsInteger.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),applyTransformDependencies={isIntegerDependencies:_dependenciesIsInteger.isIntegerDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createApplyTransform:_factoriesAny.createApplyTransform};exports.applyTransformDependencies=applyTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesIsInteger.generated":214,"./dependenciesTyped.generated":375}],82:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),argDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createArg:_factoriesAny.createArg};exports.argDependencies=argDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],83:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArrayNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_factoriesAny=require("../../factoriesAny.js"),ArrayNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,createArrayNode:_factoriesAny.createArrayNode};exports.ArrayNodeDependencies=ArrayNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265}],84:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asecDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),asecDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createAsec:_factoriesAny.createAsec};exports.asecDependencies=asecDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],85:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asechDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),asechDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createAsech:_factoriesAny.createAsech};exports.asechDependencies=asechDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],86:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinDependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),asinDependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createAsin:_factoriesAny.createAsin};exports.asinDependencies=asinDependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],87:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinhDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),asinhDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createAsinh:_factoriesAny.createAsinh};exports.asinhDependencies=asinhDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],88:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AssignmentNodeDependencies=void 0;var _dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesNode=require("./dependenciesNode.generated"),_dependenciesSubset=require("./dependenciesSubset.generated"),_factoriesAny=require("../../factoriesAny.js"),AssignmentNodeDependencies={matrixDependencies:_dependenciesMatrix.matrixDependencies,NodeDependencies:_dependenciesNode.NodeDependencies,subsetDependencies:_dependenciesSubset.subsetDependencies,createAssignmentNode:_factoriesAny.createAssignmentNode};exports.AssignmentNodeDependencies=AssignmentNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrix.generated":245,"./dependenciesNode.generated":265,"./dependenciesSubset.generated":360}],89:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),atanDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createAtan:_factoriesAny.createAtan};exports.atanDependencies=atanDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],90:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2Dependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),atan2Dependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createAtan2:_factoriesAny.createAtan2};exports.atan2Dependencies=atan2Dependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],91:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanhDependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),atanhDependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createAtanh:_factoriesAny.createAtanh};exports.atanhDependencies=atanhDependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],92:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atomicMassDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),atomicMassDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createAtomicMass:_factoriesAny.createAtomicMass};exports.atomicMassDependencies=atomicMassDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],93:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avogadroDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),avogadroDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createAvogadro:_factoriesAny.createAvogadro};exports.avogadroDependencies=avogadroDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],94:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bellNumbersDependencies=void 0;var _dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesIsInteger=require("./dependenciesIsInteger.generated"),_dependenciesIsNegative=require("./dependenciesIsNegative.generated"),_dependenciesStirlingS=require("./dependenciesStirlingS2.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),bellNumbersDependencies={addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,isIntegerDependencies:_dependenciesIsInteger.isIntegerDependencies,isNegativeDependencies:_dependenciesIsNegative.isNegativeDependencies,stirlingS2Dependencies:_dependenciesStirlingS.stirlingS2Dependencies,typedDependencies:_dependenciesTyped.typedDependencies,createBellNumbers:_factoriesAny.createBellNumbers};exports.bellNumbersDependencies=bellNumbersDependencies},{"../../factoriesAny.js":658,"./dependenciesAddScalar.generated":78,"./dependenciesIsInteger.generated":214,"./dependenciesIsNegative.generated":216,"./dependenciesStirlingS2.generated":358,"./dependenciesTyped.generated":375}],95:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BigNumberDependencies=void 0;var BigNumberDependencies={createBigNumberClass:require("../../factoriesAny.js").createBigNumberClass};exports.BigNumberDependencies=BigNumberDependencies},{"../../factoriesAny.js":658}],96:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bignumberDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),bignumberDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createBignumber:_factoriesAny.createBignumber};exports.bignumberDependencies=bignumberDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesTyped.generated":375}],97:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bitAndDependencies=void 0;var _dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),bitAndDependencies={equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createBitAnd:_factoriesAny.createBitAnd};exports.bitAndDependencies=bitAndDependencies},{"../../factoriesAny.js":658,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],98:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bitNotDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),bitNotDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createBitNot:_factoriesAny.createBitNot};exports.bitNotDependencies=bitNotDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],99:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bitOrDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),bitOrDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createBitOr:_factoriesAny.createBitOr};exports.bitOrDependencies=bitOrDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],100:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bitXorDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),bitXorDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createBitXor:_factoriesAny.createBitXor};exports.bitXorDependencies=bitXorDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],101:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlockNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_dependenciesResultSet=require("./dependenciesResultSet.generated"),_factoriesAny=require("../../factoriesAny.js"),BlockNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,ResultSetDependencies:_dependenciesResultSet.ResultSetDependencies,createBlockNode:_factoriesAny.createBlockNode};exports.BlockNodeDependencies=BlockNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265,"./dependenciesResultSet.generated":313}],102:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bohrMagnetonDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),bohrMagnetonDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createBohrMagneton:_factoriesAny.createBohrMagneton};exports.bohrMagnetonDependencies=bohrMagnetonDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],103:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bohrRadiusDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),bohrRadiusDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createBohrRadius:_factoriesAny.createBohrRadius};exports.bohrRadiusDependencies=bohrRadiusDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],104:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.boltzmannDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),boltzmannDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createBoltzmann:_factoriesAny.createBoltzmann};exports.boltzmannDependencies=boltzmannDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],105:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.booleanDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),booleanDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createBoolean:_factoriesAny.createBoolean};exports.booleanDependencies=booleanDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],106:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.catalanDependencies=void 0;var _dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesCombinations=require("./dependenciesCombinations.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesIsInteger=require("./dependenciesIsInteger.generated"),_dependenciesIsNegative=require("./dependenciesIsNegative.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),catalanDependencies={addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,combinationsDependencies:_dependenciesCombinations.combinationsDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,isIntegerDependencies:_dependenciesIsInteger.isIntegerDependencies,isNegativeDependencies:_dependenciesIsNegative.isNegativeDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCatalan:_factoriesAny.createCatalan};exports.catalanDependencies=catalanDependencies},{"../../factoriesAny.js":658,"./dependenciesAddScalar.generated":78,"./dependenciesCombinations.generated":115,"./dependenciesDivideScalar.generated":152,"./dependenciesIsInteger.generated":214,"./dependenciesIsNegative.generated":216,"./dependenciesMultiplyScalar.generated":262,"./dependenciesTyped.generated":375}],107:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cbrtDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesFractionClass=require("./dependenciesFractionClass.generated"),_dependenciesIsNegative=require("./dependenciesIsNegative.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesUnaryMinus=require("./dependenciesUnaryMinus.generated"),_factoriesAny=require("../../factoriesAny.js"),cbrtDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,FractionDependencies:_dependenciesFractionClass.FractionDependencies,isNegativeDependencies:_dependenciesIsNegative.isNegativeDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,unaryMinusDependencies:_dependenciesUnaryMinus.unaryMinusDependencies,createCbrt:_factoriesAny.createCbrt};exports.cbrtDependencies=cbrtDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesComplexClass.generated":122,"./dependenciesFractionClass.generated":188,"./dependenciesIsNegative.generated":216,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375,"./dependenciesUnaryMinus.generated":376}],108:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilDependencies=void 0;var _dependenciesRound=require("./dependenciesRound.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),ceilDependencies={roundDependencies:_dependenciesRound.roundDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCeil:_factoriesAny.createCeil};exports.ceilDependencies=ceilDependencies},{"../../factoriesAny.js":658,"./dependenciesRound.generated":317,"./dependenciesTyped.generated":375}],109:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chainDependencies=void 0;var _dependenciesChainClass=require("./dependenciesChainClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),chainDependencies={ChainDependencies:_dependenciesChainClass.ChainDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createChain:_factoriesAny.createChain};exports.chainDependencies=chainDependencies},{"../../factoriesAny.js":658,"./dependenciesChainClass.generated":110,"./dependenciesTyped.generated":375}],110:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChainDependencies=void 0;var ChainDependencies={createChainClass:require("../../factoriesAny.js").createChainClass};exports.ChainDependencies=ChainDependencies},{"../../factoriesAny.js":658}],111:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.classicalElectronRadiusDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),classicalElectronRadiusDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createClassicalElectronRadius:_factoriesAny.createClassicalElectronRadius};exports.classicalElectronRadiusDependencies=classicalElectronRadiusDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],112:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),cloneDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createClone:_factoriesAny.createClone};exports.cloneDependencies=cloneDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],113:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.columnDependencies=void 0;var _dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesRange=require("./dependenciesRange.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),columnDependencies={IndexDependencies:_dependenciesIndexClass.IndexDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,rangeDependencies:_dependenciesRange.rangeDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createColumn:_factoriesAny.createColumn};exports.columnDependencies=columnDependencies},{"../../factoriesAny.js":658,"./dependenciesIndexClass.generated":207,"./dependenciesMatrix.generated":245,"./dependenciesRange.generated":302,"./dependenciesTyped.generated":375}],114:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.columnTransformDependencies=void 0;var _dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesRange=require("./dependenciesRange.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),columnTransformDependencies={IndexDependencies:_dependenciesIndexClass.IndexDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,rangeDependencies:_dependenciesRange.rangeDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createColumnTransform:_factoriesAny.createColumnTransform};exports.columnTransformDependencies=columnTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesIndexClass.generated":207,"./dependenciesMatrix.generated":245,"./dependenciesRange.generated":302,"./dependenciesTyped.generated":375}],115:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.combinationsDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),combinationsDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createCombinations:_factoriesAny.createCombinations};exports.combinationsDependencies=combinationsDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],116:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.combinationsWithRepDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),combinationsWithRepDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createCombinationsWithRep:_factoriesAny.createCombinationsWithRep};exports.combinationsWithRepDependencies=combinationsWithRepDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],117:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compareDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesFractionClass=require("./dependenciesFractionClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),compareDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,FractionDependencies:_dependenciesFractionClass.FractionDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCompare:_factoriesAny.createCompare};exports.compareDependencies=compareDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesFractionClass.generated":188,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],118:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compareNaturalDependencies=void 0;var _dependenciesCompare=require("./dependenciesCompare.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),compareNaturalDependencies={compareDependencies:_dependenciesCompare.compareDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCompareNatural:_factoriesAny.createCompareNatural};exports.compareNaturalDependencies=compareNaturalDependencies},{"../../factoriesAny.js":658,"./dependenciesCompare.generated":117,"./dependenciesTyped.generated":375}],119:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compareTextDependencies=void 0;var _dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),compareTextDependencies={matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCompareText:_factoriesAny.createCompareText};exports.compareTextDependencies=compareTextDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],120:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compileDependencies=void 0;var _dependenciesParse=require("./dependenciesParse.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),compileDependencies={parseDependencies:_dependenciesParse.parseDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCompile:_factoriesAny.createCompile};exports.compileDependencies=compileDependencies},{"../../factoriesAny.js":658,"./dependenciesParse.generated":279,"./dependenciesTyped.generated":375}],121:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complexDependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),complexDependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createComplex:_factoriesAny.createComplex};exports.complexDependencies=complexDependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],122:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComplexDependencies=void 0;var ComplexDependencies={createComplexClass:require("../../factoriesAny.js").createComplexClass};exports.ComplexDependencies=ComplexDependencies},{"../../factoriesAny.js":658}],123:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compositionDependencies=void 0;var _dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesCombinations=require("./dependenciesCombinations.generated"),_dependenciesIsInteger=require("./dependenciesIsInteger.generated"),_dependenciesIsNegative=require("./dependenciesIsNegative.generated"),_dependenciesIsPositive=require("./dependenciesIsPositive.generated"),_dependenciesLarger=require("./dependenciesLarger.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),compositionDependencies={addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,combinationsDependencies:_dependenciesCombinations.combinationsDependencies,isIntegerDependencies:_dependenciesIsInteger.isIntegerDependencies,isNegativeDependencies:_dependenciesIsNegative.isNegativeDependencies,isPositiveDependencies:_dependenciesIsPositive.isPositiveDependencies,largerDependencies:_dependenciesLarger.largerDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createComposition:_factoriesAny.createComposition};exports.compositionDependencies=compositionDependencies},{"../../factoriesAny.js":658,"./dependenciesAddScalar.generated":78,"./dependenciesCombinations.generated":115,"./dependenciesIsInteger.generated":214,"./dependenciesIsNegative.generated":216,"./dependenciesIsPositive.generated":218,"./dependenciesLarger.generated":228,"./dependenciesTyped.generated":375}],124:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatDependencies=void 0;var _dependenciesIsInteger=require("./dependenciesIsInteger.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),concatDependencies={isIntegerDependencies:_dependenciesIsInteger.isIntegerDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createConcat:_factoriesAny.createConcat};exports.concatDependencies=concatDependencies},{"../../factoriesAny.js":658,"./dependenciesIsInteger.generated":214,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],125:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatTransformDependencies=void 0;var _dependenciesIsInteger=require("./dependenciesIsInteger.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),concatTransformDependencies={isIntegerDependencies:_dependenciesIsInteger.isIntegerDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createConcatTransform:_factoriesAny.createConcatTransform};exports.concatTransformDependencies=concatTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesIsInteger.generated":214,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],126:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConditionalNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_factoriesAny=require("../../factoriesAny.js"),ConditionalNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,createConditionalNode:_factoriesAny.createConditionalNode};exports.ConditionalNodeDependencies=ConditionalNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265}],127:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conductanceQuantumDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),conductanceQuantumDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createConductanceQuantum:_factoriesAny.createConductanceQuantum};exports.conductanceQuantumDependencies=conductanceQuantumDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],128:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conjDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),conjDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createConj:_factoriesAny.createConj};exports.conjDependencies=conjDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],129:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConstantNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_factoriesAny=require("../../factoriesAny.js"),ConstantNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,createConstantNode:_factoriesAny.createConstantNode};exports.ConstantNodeDependencies=ConstantNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265}],130:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),cosDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createCos:_factoriesAny.createCos};exports.cosDependencies=cosDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],131:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),coshDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createCosh:_factoriesAny.createCosh};exports.coshDependencies=coshDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],132:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cotDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),cotDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCot:_factoriesAny.createCot};exports.cotDependencies=cotDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesTyped.generated":375}],133:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cothDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),cothDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCoth:_factoriesAny.createCoth};exports.cothDependencies=cothDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesTyped.generated":375}],134:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coulombDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),coulombDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createCoulomb:_factoriesAny.createCoulomb};exports.coulombDependencies=coulombDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],135:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUnitDependencies=void 0;var _dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),createUnitDependencies={UnitDependencies:_dependenciesUnitClass.UnitDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCreateUnit:_factoriesAny.createCreateUnit};exports.createUnitDependencies=createUnitDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375,"./dependenciesUnitClass.generated":379}],136:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.crossDependencies=void 0;var _dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),crossDependencies={matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCross:_factoriesAny.createCross};exports.crossDependencies=crossDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrix.generated":245,"./dependenciesMultiply.generated":261,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375}],137:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cscDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),cscDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCsc:_factoriesAny.createCsc};exports.cscDependencies=cscDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesTyped.generated":375}],138:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cschDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),cschDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCsch:_factoriesAny.createCsch};exports.cschDependencies=cschDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesTyped.generated":375}],139:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ctransposeDependencies=void 0;var _dependenciesConj=require("./dependenciesConj.generated"),_dependenciesTranspose=require("./dependenciesTranspose.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),ctransposeDependencies={conjDependencies:_dependenciesConj.conjDependencies,transposeDependencies:_dependenciesTranspose.transposeDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createCtranspose:_factoriesAny.createCtranspose};exports.ctransposeDependencies=ctransposeDependencies},{"../../factoriesAny.js":658,"./dependenciesConj.generated":128,"./dependenciesTranspose.generated":372,"./dependenciesTyped.generated":375}],140:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubeDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),cubeDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createCube:_factoriesAny.createCube};exports.cubeDependencies=cubeDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],141:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepEqualDependencies=void 0;var _dependenciesEqual=require("./dependenciesEqual.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),deepEqualDependencies={equalDependencies:_dependenciesEqual.equalDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createDeepEqual:_factoriesAny.createDeepEqual};exports.deepEqualDependencies=deepEqualDependencies},{"../../factoriesAny.js":658,"./dependenciesEqual.generated":163,"./dependenciesTyped.generated":375}],142:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DenseMatrixDependencies=void 0;var _dependenciesMatrixClass=require("./dependenciesMatrixClass.generated"),_factoriesAny=require("../../factoriesAny.js"),DenseMatrixDependencies={MatrixDependencies:_dependenciesMatrixClass.MatrixDependencies,createDenseMatrixClass:_factoriesAny.createDenseMatrixClass};exports.DenseMatrixDependencies=DenseMatrixDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrixClass.generated":246}],143:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.evalDependencies=void 0;var _dependenciesEvaluate=require("./dependenciesEvaluate.generated"),_factoriesAny=require("../../factoriesAny.js"),evalDependencies={evaluateDependencies:_dependenciesEvaluate.evaluateDependencies,createDeprecatedEval:_factoriesAny.createDeprecatedEval};exports.evalDependencies=evalDependencies},{"../../factoriesAny.js":658,"./dependenciesEvaluate.generated":167}],144:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.typeofDependencies=void 0;var typeofDependencies={createDeprecatedTypeof:require("../../factoriesAny.js").createDeprecatedTypeof};exports.typeofDependencies=typeofDependencies},{"../../factoriesAny.js":658}],145:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.varDependencies=void 0;var _dependenciesVariance=require("./dependenciesVariance.generated"),_factoriesAny=require("../../factoriesAny.js"),varDependencies={varianceDependencies:_dependenciesVariance.varianceDependencies,createDeprecatedVar:_factoriesAny.createDeprecatedVar};exports.varDependencies=varDependencies},{"../../factoriesAny.js":658,"./dependenciesVariance.generated":385}],146:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.derivativeDependencies=void 0;var _dependenciesConstantNode=require("./dependenciesConstantNode.generated"),_dependenciesFunctionNode=require("./dependenciesFunctionNode.generated"),_dependenciesOperatorNode=require("./dependenciesOperatorNode.generated"),_dependenciesParenthesisNode=require("./dependenciesParenthesisNode.generated"),_dependenciesSymbolNode=require("./dependenciesSymbolNode.generated"),_dependenciesEqual=require("./dependenciesEqual.generated"),_dependenciesIsZero=require("./dependenciesIsZero.generated"),_dependenciesNumeric=require("./dependenciesNumeric.generated"),_dependenciesParse=require("./dependenciesParse.generated"),_dependenciesSimplify=require("./dependenciesSimplify.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),derivativeDependencies={ConstantNodeDependencies:_dependenciesConstantNode.ConstantNodeDependencies,FunctionNodeDependencies:_dependenciesFunctionNode.FunctionNodeDependencies,OperatorNodeDependencies:_dependenciesOperatorNode.OperatorNodeDependencies,ParenthesisNodeDependencies:_dependenciesParenthesisNode.ParenthesisNodeDependencies,SymbolNodeDependencies:_dependenciesSymbolNode.SymbolNodeDependencies,equalDependencies:_dependenciesEqual.equalDependencies,isZeroDependencies:_dependenciesIsZero.isZeroDependencies,numericDependencies:_dependenciesNumeric.numericDependencies,parseDependencies:_dependenciesParse.parseDependencies,simplifyDependencies:_dependenciesSimplify.simplifyDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createDerivative:_factoriesAny.createDerivative};exports.derivativeDependencies=derivativeDependencies},{"../../factoriesAny.js":658,"./dependenciesConstantNode.generated":129,"./dependenciesEqual.generated":163,"./dependenciesFunctionNode.generated":190,"./dependenciesIsZero.generated":220,"./dependenciesNumeric.generated":273,"./dependenciesOperatorNode.generated":276,"./dependenciesParenthesisNode.generated":278,"./dependenciesParse.generated":279,"./dependenciesSimplify.generated":338,"./dependenciesSymbolNode.generated":365,"./dependenciesTyped.generated":375}],147:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.detDependencies=void 0;var _dependenciesLup=require("./dependenciesLup.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesUnaryMinus=require("./dependenciesUnaryMinus.generated"),_factoriesAny=require("../../factoriesAny.js"),detDependencies={lupDependencies:_dependenciesLup.lupDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,unaryMinusDependencies:_dependenciesUnaryMinus.unaryMinusDependencies,createDet:_factoriesAny.createDet};exports.detDependencies=detDependencies},{"../../factoriesAny.js":658,"./dependenciesLup.generated":238,"./dependenciesMatrix.generated":245,"./dependenciesMultiply.generated":261,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375,"./dependenciesUnaryMinus.generated":376}],148:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deuteronMassDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),deuteronMassDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createDeuteronMass:_factoriesAny.createDeuteronMass};exports.deuteronMassDependencies=deuteronMassDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],149:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diagDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesSparseMatrixClass=require("./dependenciesSparseMatrixClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),diagDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,SparseMatrixDependencies:_dependenciesSparseMatrixClass.SparseMatrixDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createDiag:_factoriesAny.createDiag};exports.diagDependencies=diagDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesMatrix.generated":245,"./dependenciesSparseMatrixClass.generated":348,"./dependenciesTyped.generated":375}],150:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.distanceDependencies=void 0;var _dependenciesAbs=require("./dependenciesAbs.generated"),_dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesSqrt=require("./dependenciesSqrt.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesUnaryMinus=require("./dependenciesUnaryMinus.generated"),_factoriesAny=require("../../factoriesAny.js"),distanceDependencies={absDependencies:_dependenciesAbs.absDependencies,addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,sqrtDependencies:_dependenciesSqrt.sqrtDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,unaryMinusDependencies:_dependenciesUnaryMinus.unaryMinusDependencies,createDistance:_factoriesAny.createDistance};exports.distanceDependencies=distanceDependencies},{"../../factoriesAny.js":658,"./dependenciesAbs.generated":69,"./dependenciesAddScalar.generated":78,"./dependenciesDivideScalar.generated":152,"./dependenciesMultiplyScalar.generated":262,"./dependenciesSqrt.generated":351,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375,"./dependenciesUnaryMinus.generated":376}],151:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divideDependencies=void 0;var _dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesInv=require("./dependenciesInv.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),divideDependencies={divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,invDependencies:_dependenciesInv.invDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createDivide:_factoriesAny.createDivide};exports.divideDependencies=divideDependencies},{"../../factoriesAny.js":658,"./dependenciesDivideScalar.generated":152,"./dependenciesEqualScalar.generated":164,"./dependenciesInv.generated":212,"./dependenciesMatrix.generated":245,"./dependenciesMultiply.generated":261,"./dependenciesTyped.generated":375}],152:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divideScalarDependencies=void 0;var _dependenciesNumeric=require("./dependenciesNumeric.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),divideScalarDependencies={numericDependencies:_dependenciesNumeric.numericDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createDivideScalar:_factoriesAny.createDivideScalar};exports.divideScalarDependencies=divideScalarDependencies},{"../../factoriesAny.js":658,"./dependenciesNumeric.generated":273,"./dependenciesTyped.generated":375}],153:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dotDependencies=void 0;var _dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),dotDependencies={addDependencies:_dependenciesAdd.addDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createDot:_factoriesAny.createDot};exports.dotDependencies=dotDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesMultiply.generated":261,"./dependenciesTyped.generated":375}],154:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dotDivideDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),dotDivideDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createDotDivide:_factoriesAny.createDotDivide};exports.dotDivideDependencies=dotDivideDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesDivideScalar.generated":152,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],155:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dotMultiplyDependencies=void 0;var _dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),dotMultiplyDependencies={equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createDotMultiply:_factoriesAny.createDotMultiply};exports.dotMultiplyDependencies=dotMultiplyDependencies},{"../../factoriesAny.js":658,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesMultiplyScalar.generated":262,"./dependenciesTyped.generated":375}],156:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dotPowDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesPow=require("./dependenciesPow.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),dotPowDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,powDependencies:_dependenciesPow.powDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createDotPow:_factoriesAny.createDotPow};exports.dotPowDependencies=dotPowDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesPow.generated":293,"./dependenciesTyped.generated":375}],157:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),eDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createE:_factoriesAny.createE};exports.eDependencies=eDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],158:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.efimovFactorDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),efimovFactorDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createEfimovFactor:_factoriesAny.createEfimovFactor};exports.efimovFactorDependencies=efimovFactorDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],159:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eigsDependencies=void 0;var _dependenciesAbs=require("./dependenciesAbs.generated"),_dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesAtan=require("./dependenciesAtan.generated"),_dependenciesBignumber=require("./dependenciesBignumber.generated"),_dependenciesCos=require("./dependenciesCos.generated"),_dependenciesEqual=require("./dependenciesEqual.generated"),_dependenciesInv=require("./dependenciesInv.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesSin=require("./dependenciesSin.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),eigsDependencies={absDependencies:_dependenciesAbs.absDependencies,addDependencies:_dependenciesAdd.addDependencies,addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,atanDependencies:_dependenciesAtan.atanDependencies,bignumberDependencies:_dependenciesBignumber.bignumberDependencies,cosDependencies:_dependenciesCos.cosDependencies,equalDependencies:_dependenciesEqual.equalDependencies,invDependencies:_dependenciesInv.invDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,sinDependencies:_dependenciesSin.sinDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createEigs:_factoriesAny.createEigs};exports.eigsDependencies=eigsDependencies},{"../../factoriesAny.js":658,"./dependenciesAbs.generated":69,"./dependenciesAdd.generated":77,"./dependenciesAddScalar.generated":78,"./dependenciesAtan.generated":89,"./dependenciesBignumber.generated":96,"./dependenciesCos.generated":130,"./dependenciesEqual.generated":163,"./dependenciesInv.generated":212,"./dependenciesMatrix.generated":245,"./dependenciesMultiply.generated":261,"./dependenciesMultiplyScalar.generated":262,"./dependenciesSin.generated":339,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375}],160:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.electricConstantDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),electricConstantDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createElectricConstant:_factoriesAny.createElectricConstant};exports.electricConstantDependencies=electricConstantDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],161:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.electronMassDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),electronMassDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createElectronMass:_factoriesAny.createElectronMass};exports.electronMassDependencies=electronMassDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],162:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elementaryChargeDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),elementaryChargeDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createElementaryCharge:_factoriesAny.createElementaryCharge};exports.elementaryChargeDependencies=elementaryChargeDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],163:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),equalDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createEqual:_factoriesAny.createEqual};exports.equalDependencies=equalDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],164:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalScalarDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),equalScalarDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createEqualScalar:_factoriesAny.createEqualScalar};exports.equalScalarDependencies=equalScalarDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],165:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalTextDependencies=void 0;var _dependenciesCompareText=require("./dependenciesCompareText.generated"),_dependenciesIsZero=require("./dependenciesIsZero.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),equalTextDependencies={compareTextDependencies:_dependenciesCompareText.compareTextDependencies,isZeroDependencies:_dependenciesIsZero.isZeroDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createEqualText:_factoriesAny.createEqualText};exports.equalTextDependencies=equalTextDependencies},{"../../factoriesAny.js":658,"./dependenciesCompareText.generated":119,"./dependenciesIsZero.generated":220,"./dependenciesTyped.generated":375}],166:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erfDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),erfDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createErf:_factoriesAny.createErf};exports.erfDependencies=erfDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],167:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.evaluateDependencies=void 0;var _dependenciesParse=require("./dependenciesParse.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),evaluateDependencies={parseDependencies:_dependenciesParse.parseDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createEvaluate:_factoriesAny.createEvaluate};exports.evaluateDependencies=evaluateDependencies},{"../../factoriesAny.js":658,"./dependenciesParse.generated":279,"./dependenciesTyped.generated":375}],168:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),expDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createExp:_factoriesAny.createExp};exports.expDependencies=expDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],169:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expmDependencies=void 0;var _dependenciesAbs=require("./dependenciesAbs.generated"),_dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesIdentity=require("./dependenciesIdentity.generated"),_dependenciesInv=require("./dependenciesInv.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),expmDependencies={absDependencies:_dependenciesAbs.absDependencies,addDependencies:_dependenciesAdd.addDependencies,identityDependencies:_dependenciesIdentity.identityDependencies,invDependencies:_dependenciesInv.invDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createExpm:_factoriesAny.createExpm};exports.expmDependencies=expmDependencies},{"../../factoriesAny.js":658,"./dependenciesAbs.generated":69,"./dependenciesAdd.generated":77,"./dependenciesIdentity.generated":203,"./dependenciesInv.generated":212,"./dependenciesMultiply.generated":261,"./dependenciesTyped.generated":375}],170:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1Dependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),expm1Dependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createExpm1:_factoriesAny.createExpm1};exports.expm1Dependencies=expm1Dependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],171:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eyeDependencies=void 0;var eyeDependencies={createEye:require("../../factoriesAny.js").createEye};exports.eyeDependencies=eyeDependencies},{"../../factoriesAny.js":658}],172:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.factorialDependencies=void 0;var _dependenciesGamma=require("./dependenciesGamma.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),factorialDependencies={gammaDependencies:_dependenciesGamma.gammaDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createFactorial:_factoriesAny.createFactorial};exports.factorialDependencies=factorialDependencies},{"../../factoriesAny.js":658,"./dependenciesGamma.generated":191,"./dependenciesTyped.generated":375}],173:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.falseDependencies=void 0;var falseDependencies={createFalse:require("../../factoriesAny.js").createFalse};exports.falseDependencies=falseDependencies},{"../../factoriesAny.js":658}],174:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.faradayDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),faradayDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createFaraday:_factoriesAny.createFaraday};exports.faradayDependencies=faradayDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],175:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fermiCouplingDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),fermiCouplingDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createFermiCoupling:_factoriesAny.createFermiCoupling};exports.fermiCouplingDependencies=fermiCouplingDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],176:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FibonacciHeapDependencies=void 0;var _dependenciesLarger=require("./dependenciesLarger.generated"),_dependenciesSmaller=require("./dependenciesSmaller.generated"),_factoriesAny=require("../../factoriesAny.js"),FibonacciHeapDependencies={largerDependencies:_dependenciesLarger.largerDependencies,smallerDependencies:_dependenciesSmaller.smallerDependencies,createFibonacciHeapClass:_factoriesAny.createFibonacciHeapClass};exports.FibonacciHeapDependencies=FibonacciHeapDependencies},{"../../factoriesAny.js":658,"./dependenciesLarger.generated":228,"./dependenciesSmaller.generated":343}],177:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),filterDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createFilter:_factoriesAny.createFilter};exports.filterDependencies=filterDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],178:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterTransformDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),filterTransformDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createFilterTransform:_factoriesAny.createFilterTransform};exports.filterTransformDependencies=filterTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],179:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fineStructureDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),fineStructureDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createFineStructure:_factoriesAny.createFineStructure};exports.fineStructureDependencies=fineStructureDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],180:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.firstRadiationDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),firstRadiationDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createFirstRadiation:_factoriesAny.createFirstRadiation};exports.firstRadiationDependencies=firstRadiationDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],181:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fixDependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesCeil=require("./dependenciesCeil.generated"),_dependenciesFloor=require("./dependenciesFloor.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),fixDependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,ceilDependencies:_dependenciesCeil.ceilDependencies,floorDependencies:_dependenciesFloor.floorDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createFix:_factoriesAny.createFix};exports.fixDependencies=fixDependencies},{"../../factoriesAny.js":658,"./dependenciesCeil.generated":108,"./dependenciesComplexClass.generated":122,"./dependenciesFloor.generated":183,"./dependenciesTyped.generated":375}],182:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flattenDependencies=void 0;var _dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),flattenDependencies={matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createFlatten:_factoriesAny.createFlatten};exports.flattenDependencies=flattenDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],183:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDependencies=void 0;var _dependenciesRound=require("./dependenciesRound.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),floorDependencies={roundDependencies:_dependenciesRound.roundDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createFloor:_factoriesAny.createFloor};exports.floorDependencies=floorDependencies},{"../../factoriesAny.js":658,"./dependenciesRound.generated":317,"./dependenciesTyped.generated":375}],184:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEachDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),forEachDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createForEach:_factoriesAny.createForEach};exports.forEachDependencies=forEachDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],185:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEachTransformDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),forEachTransformDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createForEachTransform:_factoriesAny.createForEachTransform};exports.forEachTransformDependencies=forEachTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],186:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),formatDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createFormat:_factoriesAny.createFormat};exports.formatDependencies=formatDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],187:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fractionDependencies=void 0;var _dependenciesFractionClass=require("./dependenciesFractionClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),fractionDependencies={FractionDependencies:_dependenciesFractionClass.FractionDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createFraction:_factoriesAny.createFraction};exports.fractionDependencies=fractionDependencies},{"../../factoriesAny.js":658,"./dependenciesFractionClass.generated":188,"./dependenciesTyped.generated":375}],188:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FractionDependencies=void 0;var FractionDependencies={createFractionClass:require("../../factoriesAny.js").createFractionClass};exports.FractionDependencies=FractionDependencies},{"../../factoriesAny.js":658}],189:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FunctionAssignmentNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),FunctionAssignmentNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createFunctionAssignmentNode:_factoriesAny.createFunctionAssignmentNode};exports.FunctionAssignmentNodeDependencies=FunctionAssignmentNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265,"./dependenciesTyped.generated":375}],190:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FunctionNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_dependenciesSymbolNode=require("./dependenciesSymbolNode.generated"),_factoriesAny=require("../../factoriesAny.js"),FunctionNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,SymbolNodeDependencies:_dependenciesSymbolNode.SymbolNodeDependencies,createFunctionNode:_factoriesAny.createFunctionNode};exports.FunctionNodeDependencies=FunctionNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265,"./dependenciesSymbolNode.generated":365}],191:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gammaDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesPow=require("./dependenciesPow.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),gammaDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,powDependencies:_dependenciesPow.powDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createGamma:_factoriesAny.createGamma};exports.gammaDependencies=gammaDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesComplexClass.generated":122,"./dependenciesMultiplyScalar.generated":262,"./dependenciesPow.generated":293,"./dependenciesTyped.generated":375}],192:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gasConstantDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),gasConstantDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createGasConstant:_factoriesAny.createGasConstant};exports.gasConstantDependencies=gasConstantDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],193:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gcdDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),gcdDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createGcd:_factoriesAny.createGcd};exports.gcdDependencies=gcdDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],194:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMatrixDataTypeDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),getMatrixDataTypeDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createGetMatrixDataType:_factoriesAny.createGetMatrixDataType};exports.getMatrixDataTypeDependencies=getMatrixDataTypeDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],195:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gravitationConstantDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),gravitationConstantDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createGravitationConstant:_factoriesAny.createGravitationConstant};exports.gravitationConstantDependencies=gravitationConstantDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],196:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gravityDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),gravityDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createGravity:_factoriesAny.createGravity};exports.gravityDependencies=gravityDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],197:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hartreeEnergyDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),hartreeEnergyDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createHartreeEnergy:_factoriesAny.createHartreeEnergy};exports.hartreeEnergyDependencies=hartreeEnergyDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],198:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasNumericValueDependencies=void 0;var _dependenciesIsNumeric=require("./dependenciesIsNumeric.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),hasNumericValueDependencies={isNumericDependencies:_dependenciesIsNumeric.isNumericDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createHasNumericValue:_factoriesAny.createHasNumericValue};exports.hasNumericValueDependencies=hasNumericValueDependencies},{"../../factoriesAny.js":658,"./dependenciesIsNumeric.generated":217,"./dependenciesTyped.generated":375}],199:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.helpDependencies=void 0;var _dependenciesHelpClass=require("./dependenciesHelpClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),helpDependencies={HelpDependencies:_dependenciesHelpClass.HelpDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createHelp:_factoriesAny.createHelp};exports.helpDependencies=helpDependencies},{"../../factoriesAny.js":658,"./dependenciesHelpClass.generated":200,"./dependenciesTyped.generated":375}],200:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HelpDependencies=void 0;var _dependenciesParse=require("./dependenciesParse.generated"),_factoriesAny=require("../../factoriesAny.js"),HelpDependencies={parseDependencies:_dependenciesParse.parseDependencies,createHelpClass:_factoriesAny.createHelpClass};exports.HelpDependencies=HelpDependencies},{"../../factoriesAny.js":658,"./dependenciesParse.generated":279}],201:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hypotDependencies=void 0;var _dependenciesAbs=require("./dependenciesAbs.generated"),_dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesIsPositive=require("./dependenciesIsPositive.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesSmaller=require("./dependenciesSmaller.generated"),_dependenciesSqrt=require("./dependenciesSqrt.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),hypotDependencies={absDependencies:_dependenciesAbs.absDependencies,addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,isPositiveDependencies:_dependenciesIsPositive.isPositiveDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,smallerDependencies:_dependenciesSmaller.smallerDependencies,sqrtDependencies:_dependenciesSqrt.sqrtDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createHypot:_factoriesAny.createHypot};exports.hypotDependencies=hypotDependencies},{"../../factoriesAny.js":658,"./dependenciesAbs.generated":69,"./dependenciesAddScalar.generated":78,"./dependenciesDivideScalar.generated":152,"./dependenciesIsPositive.generated":218,"./dependenciesMultiplyScalar.generated":262,"./dependenciesSmaller.generated":343,"./dependenciesSqrt.generated":351,"./dependenciesTyped.generated":375}],202:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.iDependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_factoriesAny=require("../../factoriesAny.js"),iDependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,createI:_factoriesAny.createI};exports.iDependencies=iDependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122}],203:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identityDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesSparseMatrixClass=require("./dependenciesSparseMatrixClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),identityDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,SparseMatrixDependencies:_dependenciesSparseMatrixClass.SparseMatrixDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createIdentity:_factoriesAny.createIdentity};exports.identityDependencies=identityDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesMatrix.generated":245,"./dependenciesSparseMatrixClass.generated":348,"./dependenciesTyped.generated":375}],204:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),imDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createIm:_factoriesAny.createIm};exports.imDependencies=imDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],205:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImmutableDenseMatrixDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesSmaller=require("./dependenciesSmaller.generated"),_factoriesAny=require("../../factoriesAny.js"),ImmutableDenseMatrixDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,smallerDependencies:_dependenciesSmaller.smallerDependencies,createImmutableDenseMatrixClass:_factoriesAny.createImmutableDenseMatrixClass};exports.ImmutableDenseMatrixDependencies=ImmutableDenseMatrixDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesSmaller.generated":343}],206:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.indexDependencies=void 0;var _dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),indexDependencies={IndexDependencies:_dependenciesIndexClass.IndexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createIndex:_factoriesAny.createIndex};exports.indexDependencies=indexDependencies},{"../../factoriesAny.js":658,"./dependenciesIndexClass.generated":207,"./dependenciesTyped.generated":375}],207:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IndexDependencies=void 0;var _dependenciesImmutableDenseMatrixClass=require("./dependenciesImmutableDenseMatrixClass.generated"),_factoriesAny=require("../../factoriesAny.js"),IndexDependencies={ImmutableDenseMatrixDependencies:_dependenciesImmutableDenseMatrixClass.ImmutableDenseMatrixDependencies,createIndexClass:_factoriesAny.createIndexClass};exports.IndexDependencies=IndexDependencies},{"../../factoriesAny.js":658,"./dependenciesImmutableDenseMatrixClass.generated":205}],208:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IndexNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_dependenciesRangeClass=require("./dependenciesRangeClass.generated"),_dependenciesSize=require("./dependenciesSize.generated"),_factoriesAny=require("../../factoriesAny.js"),IndexNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,RangeDependencies:_dependenciesRangeClass.RangeDependencies,sizeDependencies:_dependenciesSize.sizeDependencies,createIndexNode:_factoriesAny.createIndexNode};exports.IndexNodeDependencies=IndexNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265,"./dependenciesRangeClass.generated":303,"./dependenciesSize.generated":341}],209:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.indexTransformDependencies=void 0;var _dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_factoriesAny=require("../../factoriesAny.js"),indexTransformDependencies={IndexDependencies:_dependenciesIndexClass.IndexDependencies,createIndexTransform:_factoriesAny.createIndexTransform};exports.indexTransformDependencies=indexTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesIndexClass.generated":207}],210:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InfinityDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),InfinityDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createInfinity:_factoriesAny.createInfinity};exports.InfinityDependencies=InfinityDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],211:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectDependencies=void 0;var _dependenciesAbs=require("./dependenciesAbs.generated"),_dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesSmaller=require("./dependenciesSmaller.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),intersectDependencies={absDependencies:_dependenciesAbs.absDependencies,addDependencies:_dependenciesAdd.addDependencies,addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,smallerDependencies:_dependenciesSmaller.smallerDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createIntersect:_factoriesAny.createIntersect};exports.intersectDependencies=intersectDependencies},{"../../factoriesAny.js":658,"./dependenciesAbs.generated":69,"./dependenciesAdd.generated":77,"./dependenciesAddScalar.generated":78,"./dependenciesDivideScalar.generated":152,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesMultiply.generated":261,"./dependenciesMultiplyScalar.generated":262,"./dependenciesSmaller.generated":343,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375}],212:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.invDependencies=void 0;var _dependenciesAbs=require("./dependenciesAbs.generated"),_dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesDet=require("./dependenciesDet.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesIdentity=require("./dependenciesIdentity.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesUnaryMinus=require("./dependenciesUnaryMinus.generated"),_factoriesAny=require("../../factoriesAny.js"),invDependencies={absDependencies:_dependenciesAbs.absDependencies,addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,detDependencies:_dependenciesDet.detDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,identityDependencies:_dependenciesIdentity.identityDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,typedDependencies:_dependenciesTyped.typedDependencies,unaryMinusDependencies:_dependenciesUnaryMinus.unaryMinusDependencies,createInv:_factoriesAny.createInv};exports.invDependencies=invDependencies},{"../../factoriesAny.js":658,"./dependenciesAbs.generated":69,"./dependenciesAddScalar.generated":78,"./dependenciesDet.generated":147,"./dependenciesDivideScalar.generated":152,"./dependenciesIdentity.generated":203,"./dependenciesMatrix.generated":245,"./dependenciesMultiply.generated":261,"./dependenciesTyped.generated":375,"./dependenciesUnaryMinus.generated":376}],213:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inverseConductanceQuantumDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),inverseConductanceQuantumDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createInverseConductanceQuantum:_factoriesAny.createInverseConductanceQuantum};exports.inverseConductanceQuantumDependencies=inverseConductanceQuantumDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],214:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isIntegerDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),isIntegerDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createIsInteger:_factoriesAny.createIsInteger};exports.isIntegerDependencies=isIntegerDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],215:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaNDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),isNaNDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createIsNaN:_factoriesAny.createIsNaN};exports.isNaNDependencies=isNaNDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],216:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNegativeDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),isNegativeDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createIsNegative:_factoriesAny.createIsNegative};exports.isNegativeDependencies=isNegativeDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],217:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNumericDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),isNumericDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createIsNumeric:_factoriesAny.createIsNumeric};exports.isNumericDependencies=isNumericDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],218:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPositiveDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),isPositiveDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createIsPositive:_factoriesAny.createIsPositive};exports.isPositiveDependencies=isPositiveDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],219:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPrimeDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),isPrimeDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createIsPrime:_factoriesAny.createIsPrime};exports.isPrimeDependencies=isPrimeDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],220:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isZeroDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),isZeroDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createIsZero:_factoriesAny.createIsZero};exports.isZeroDependencies=isZeroDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],221:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.kldivergenceDependencies=void 0;var _dependenciesDivide=require("./dependenciesDivide.generated"),_dependenciesDotDivide=require("./dependenciesDotDivide.generated"),_dependenciesIsNumeric=require("./dependenciesIsNumeric.generated"),_dependenciesLog=require("./dependenciesLog.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesSum=require("./dependenciesSum.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),kldivergenceDependencies={divideDependencies:_dependenciesDivide.divideDependencies,dotDivideDependencies:_dependenciesDotDivide.dotDivideDependencies,isNumericDependencies:_dependenciesIsNumeric.isNumericDependencies,logDependencies:_dependenciesLog.logDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,sumDependencies:_dependenciesSum.sumDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createKldivergence:_factoriesAny.createKldivergence};exports.kldivergenceDependencies=kldivergenceDependencies},{"../../factoriesAny.js":658,"./dependenciesDivide.generated":151,"./dependenciesDotDivide.generated":154,"./dependenciesIsNumeric.generated":217,"./dependenciesLog.generated":232,"./dependenciesMatrix.generated":245,"./dependenciesMultiply.generated":261,"./dependenciesSum.generated":363,"./dependenciesTyped.generated":375}],222:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.klitzingDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),klitzingDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createKlitzing:_factoriesAny.createKlitzing};exports.klitzingDependencies=klitzingDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],223:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.kronDependencies=void 0;var _dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),kronDependencies={matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createKron:_factoriesAny.createKron};exports.kronDependencies=kronDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrix.generated":245,"./dependenciesMultiplyScalar.generated":262,"./dependenciesTyped.generated":375}],224:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LN10Dependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),LN10Dependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createLN10:_factoriesAny.createLN10};exports.LN10Dependencies=LN10Dependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],225:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LN2Dependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),LN2Dependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createLN2:_factoriesAny.createLN2};exports.LN2Dependencies=LN2Dependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],226:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LOG10EDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),LOG10EDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createLOG10E:_factoriesAny.createLOG10E};exports.LOG10EDependencies=LOG10EDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],227:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LOG2EDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),LOG2EDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createLOG2E:_factoriesAny.createLOG2E};exports.LOG2EDependencies=LOG2EDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],228:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.largerDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),largerDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createLarger:_factoriesAny.createLarger};exports.largerDependencies=largerDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],229:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.largerEqDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),largerEqDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createLargerEq:_factoriesAny.createLargerEq};exports.largerEqDependencies=largerEqDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],230:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lcmDependencies=void 0;var _dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),lcmDependencies={equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createLcm:_factoriesAny.createLcm};exports.lcmDependencies=lcmDependencies},{"../../factoriesAny.js":658,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],231:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leftShiftDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesZeros=require("./dependenciesZeros.generated"),_factoriesAny=require("../../factoriesAny.js"),leftShiftDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,zerosDependencies:_dependenciesZeros.zerosDependencies,createLeftShift:_factoriesAny.createLeftShift};exports.leftShiftDependencies=leftShiftDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375,"./dependenciesZeros.generated":392}],232:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logDependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),logDependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createLog:_factoriesAny.createLog};exports.logDependencies=logDependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesDivideScalar.generated":152,"./dependenciesTyped.generated":375}],233:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log10Dependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),log10Dependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createLog10:_factoriesAny.createLog10};exports.log10Dependencies=log10Dependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],234:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1pDependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesLog=require("./dependenciesLog.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),log1pDependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,logDependencies:_dependenciesLog.logDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createLog1p:_factoriesAny.createLog1p};exports.log1pDependencies=log1pDependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesDivideScalar.generated":152,"./dependenciesLog.generated":232,"./dependenciesTyped.generated":375}],235:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log2Dependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),log2Dependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createLog2:_factoriesAny.createLog2};exports.log2Dependencies=log2Dependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],236:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loschmidtDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),loschmidtDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createLoschmidt:_factoriesAny.createLoschmidt};exports.loschmidtDependencies=loschmidtDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],237:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lsolveDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),lsolveDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createLsolve:_factoriesAny.createLsolve};exports.lsolveDependencies=lsolveDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesDivideScalar.generated":152,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesMultiplyScalar.generated":262,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375}],238:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lupDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesSpaClass=require("./dependenciesSpaClass.generated"),_dependenciesSparseMatrixClass=require("./dependenciesSparseMatrixClass.generated"),_dependenciesAbs=require("./dependenciesAbs.generated"),_dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesLarger=require("./dependenciesLarger.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesUnaryMinus=require("./dependenciesUnaryMinus.generated"),_factoriesAny=require("../../factoriesAny.js"),lupDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,SpaDependencies:_dependenciesSpaClass.SpaDependencies,SparseMatrixDependencies:_dependenciesSparseMatrixClass.SparseMatrixDependencies,absDependencies:_dependenciesAbs.absDependencies,addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,largerDependencies:_dependenciesLarger.largerDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,unaryMinusDependencies:_dependenciesUnaryMinus.unaryMinusDependencies,createLup:_factoriesAny.createLup};exports.lupDependencies=lupDependencies},{"../../factoriesAny.js":658,"./dependenciesAbs.generated":69,"./dependenciesAddScalar.generated":78,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesDivideScalar.generated":152,"./dependenciesEqualScalar.generated":164,"./dependenciesLarger.generated":228,"./dependenciesMatrix.generated":245,"./dependenciesMultiplyScalar.generated":262,"./dependenciesSpaClass.generated":346,"./dependenciesSparseMatrixClass.generated":348,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375,"./dependenciesUnaryMinus.generated":376}],239:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lusolveDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesLsolve=require("./dependenciesLsolve.generated"),_dependenciesLup=require("./dependenciesLup.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesSlu=require("./dependenciesSlu.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesUsolve=require("./dependenciesUsolve.generated"),_factoriesAny=require("../../factoriesAny.js"),lusolveDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,lsolveDependencies:_dependenciesLsolve.lsolveDependencies,lupDependencies:_dependenciesLup.lupDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,sluDependencies:_dependenciesSlu.sluDependencies,typedDependencies:_dependenciesTyped.typedDependencies,usolveDependencies:_dependenciesUsolve.usolveDependencies,createLusolve:_factoriesAny.createLusolve};exports.lusolveDependencies=lusolveDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesLsolve.generated":237,"./dependenciesLup.generated":238,"./dependenciesMatrix.generated":245,"./dependenciesSlu.generated":342,"./dependenciesTyped.generated":375,"./dependenciesUsolve.generated":383}],240:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.madDependencies=void 0;var _dependenciesAbs=require("./dependenciesAbs.generated"),_dependenciesMap=require("./dependenciesMap.generated"),_dependenciesMedian=require("./dependenciesMedian.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),madDependencies={absDependencies:_dependenciesAbs.absDependencies,mapDependencies:_dependenciesMap.mapDependencies,medianDependencies:_dependenciesMedian.medianDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMad:_factoriesAny.createMad};exports.madDependencies=madDependencies},{"../../factoriesAny.js":658,"./dependenciesAbs.generated":69,"./dependenciesMap.generated":243,"./dependenciesMedian.generated":251,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375}],241:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.magneticConstantDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),magneticConstantDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createMagneticConstant:_factoriesAny.createMagneticConstant};exports.magneticConstantDependencies=magneticConstantDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],242:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.magneticFluxQuantumDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),magneticFluxQuantumDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createMagneticFluxQuantum:_factoriesAny.createMagneticFluxQuantum};exports.magneticFluxQuantumDependencies=magneticFluxQuantumDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],243:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),mapDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createMap:_factoriesAny.createMap};exports.mapDependencies=mapDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],244:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapTransformDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),mapTransformDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createMapTransform:_factoriesAny.createMapTransform};exports.mapTransformDependencies=mapTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],245:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matrixDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesMatrixClass=require("./dependenciesMatrixClass.generated"),_dependenciesSparseMatrixClass=require("./dependenciesSparseMatrixClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),matrixDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,MatrixDependencies:_dependenciesMatrixClass.MatrixDependencies,SparseMatrixDependencies:_dependenciesSparseMatrixClass.SparseMatrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMatrix:_factoriesAny.createMatrix};exports.matrixDependencies=matrixDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesMatrixClass.generated":246,"./dependenciesSparseMatrixClass.generated":348,"./dependenciesTyped.generated":375}],246:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MatrixDependencies=void 0;var MatrixDependencies={createMatrixClass:require("../../factoriesAny.js").createMatrixClass};exports.MatrixDependencies=MatrixDependencies},{"../../factoriesAny.js":658}],247:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxDependencies=void 0;var _dependenciesLarger=require("./dependenciesLarger.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),maxDependencies={largerDependencies:_dependenciesLarger.largerDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMax:_factoriesAny.createMax};exports.maxDependencies=maxDependencies},{"../../factoriesAny.js":658,"./dependenciesLarger.generated":228,"./dependenciesTyped.generated":375}],248:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxTransformDependencies=void 0;var _dependenciesLarger=require("./dependenciesLarger.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),maxTransformDependencies={largerDependencies:_dependenciesLarger.largerDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMaxTransform:_factoriesAny.createMaxTransform};exports.maxTransformDependencies=maxTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesLarger.generated":228,"./dependenciesTyped.generated":375}],249:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanDependencies=void 0;var _dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesDivide=require("./dependenciesDivide.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),meanDependencies={addDependencies:_dependenciesAdd.addDependencies,divideDependencies:_dependenciesDivide.divideDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMean:_factoriesAny.createMean};exports.meanDependencies=meanDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesDivide.generated":151,"./dependenciesTyped.generated":375}],250:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanTransformDependencies=void 0;var _dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesDivide=require("./dependenciesDivide.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),meanTransformDependencies={addDependencies:_dependenciesAdd.addDependencies,divideDependencies:_dependenciesDivide.divideDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMeanTransform:_factoriesAny.createMeanTransform};exports.meanTransformDependencies=meanTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesDivide.generated":151,"./dependenciesTyped.generated":375}],251:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.medianDependencies=void 0;var _dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesCompare=require("./dependenciesCompare.generated"),_dependenciesDivide=require("./dependenciesDivide.generated"),_dependenciesPartitionSelect=require("./dependenciesPartitionSelect.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),medianDependencies={addDependencies:_dependenciesAdd.addDependencies,compareDependencies:_dependenciesCompare.compareDependencies,divideDependencies:_dependenciesDivide.divideDependencies,partitionSelectDependencies:_dependenciesPartitionSelect.partitionSelectDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMedian:_factoriesAny.createMedian};exports.medianDependencies=medianDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesCompare.generated":117,"./dependenciesDivide.generated":151,"./dependenciesPartitionSelect.generated":282,"./dependenciesTyped.generated":375}],252:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minDependencies=void 0;var _dependenciesSmaller=require("./dependenciesSmaller.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),minDependencies={smallerDependencies:_dependenciesSmaller.smallerDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMin:_factoriesAny.createMin};exports.minDependencies=minDependencies},{"../../factoriesAny.js":658,"./dependenciesSmaller.generated":343,"./dependenciesTyped.generated":375}],253:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minTransformDependencies=void 0;var _dependenciesSmaller=require("./dependenciesSmaller.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),minTransformDependencies={smallerDependencies:_dependenciesSmaller.smallerDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMinTransform:_factoriesAny.createMinTransform};exports.minTransformDependencies=minTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesSmaller.generated":343,"./dependenciesTyped.generated":375}],254:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),modDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMod:_factoriesAny.createMod};exports.modDependencies=modDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],255:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modeDependencies=void 0;var _dependenciesIsNaN=require("./dependenciesIsNaN.generated"),_dependenciesIsNumeric=require("./dependenciesIsNumeric.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),modeDependencies={isNaNDependencies:_dependenciesIsNaN.isNaNDependencies,isNumericDependencies:_dependenciesIsNumeric.isNumericDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMode:_factoriesAny.createMode};exports.modeDependencies=modeDependencies},{"../../factoriesAny.js":658,"./dependenciesIsNaN.generated":215,"./dependenciesIsNumeric.generated":217,"./dependenciesTyped.generated":375}],256:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.molarMassDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),molarMassDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createMolarMass:_factoriesAny.createMolarMass};exports.molarMassDependencies=molarMassDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],257:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.molarMassC12Dependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),molarMassC12Dependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createMolarMassC12:_factoriesAny.createMolarMassC12};exports.molarMassC12Dependencies=molarMassC12Dependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],258:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.molarPlanckConstantDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),molarPlanckConstantDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createMolarPlanckConstant:_factoriesAny.createMolarPlanckConstant};exports.molarPlanckConstantDependencies=molarPlanckConstantDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],259:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.molarVolumeDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),molarVolumeDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createMolarVolume:_factoriesAny.createMolarVolume};exports.molarVolumeDependencies=molarVolumeDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],260:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multinomialDependencies=void 0;var _dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesDivide=require("./dependenciesDivide.generated"),_dependenciesFactorial=require("./dependenciesFactorial.generated"),_dependenciesIsInteger=require("./dependenciesIsInteger.generated"),_dependenciesIsPositive=require("./dependenciesIsPositive.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),multinomialDependencies={addDependencies:_dependenciesAdd.addDependencies,divideDependencies:_dependenciesDivide.divideDependencies,factorialDependencies:_dependenciesFactorial.factorialDependencies,isIntegerDependencies:_dependenciesIsInteger.isIntegerDependencies,isPositiveDependencies:_dependenciesIsPositive.isPositiveDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMultinomial:_factoriesAny.createMultinomial};exports.multinomialDependencies=multinomialDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesDivide.generated":151,"./dependenciesFactorial.generated":172,"./dependenciesIsInteger.generated":214,"./dependenciesIsPositive.generated":218,"./dependenciesMultiply.generated":261,"./dependenciesTyped.generated":375}],261:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiplyDependencies=void 0;var _dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),multiplyDependencies={addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createMultiply:_factoriesAny.createMultiply};exports.multiplyDependencies=multiplyDependencies},{"../../factoriesAny.js":658,"./dependenciesAddScalar.generated":78,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesMultiplyScalar.generated":262,"./dependenciesTyped.generated":375}],262:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiplyScalarDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),multiplyScalarDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createMultiplyScalar:_factoriesAny.createMultiplyScalar};exports.multiplyScalarDependencies=multiplyScalarDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],263:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NaNDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),NaNDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createNaN:_factoriesAny.createNaN};exports.NaNDependencies=NaNDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],264:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.neutronMassDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),neutronMassDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createNeutronMass:_factoriesAny.createNeutronMass};exports.neutronMassDependencies=neutronMassDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],265:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeDependencies=void 0;var NodeDependencies={createNode:require("../../factoriesAny.js").createNode};exports.NodeDependencies=NodeDependencies},{"../../factoriesAny.js":658}],266:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normDependencies=void 0;var _dependenciesAbs=require("./dependenciesAbs.generated"),_dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesConj=require("./dependenciesConj.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesLarger=require("./dependenciesLarger.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesPow=require("./dependenciesPow.generated"),_dependenciesSmaller=require("./dependenciesSmaller.generated"),_dependenciesSqrt=require("./dependenciesSqrt.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),normDependencies={absDependencies:_dependenciesAbs.absDependencies,addDependencies:_dependenciesAdd.addDependencies,conjDependencies:_dependenciesConj.conjDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,largerDependencies:_dependenciesLarger.largerDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,powDependencies:_dependenciesPow.powDependencies,smallerDependencies:_dependenciesSmaller.smallerDependencies,sqrtDependencies:_dependenciesSqrt.sqrtDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createNorm:_factoriesAny.createNorm};exports.normDependencies=normDependencies},{"../../factoriesAny.js":658,"./dependenciesAbs.generated":69,"./dependenciesAdd.generated":77,"./dependenciesConj.generated":128,"./dependenciesEqualScalar.generated":164,"./dependenciesLarger.generated":228,"./dependenciesMatrix.generated":245,"./dependenciesMultiply.generated":261,"./dependenciesPow.generated":293,"./dependenciesSmaller.generated":343,"./dependenciesSqrt.generated":351,"./dependenciesTyped.generated":375}],267:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),notDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createNot:_factoriesAny.createNot};exports.notDependencies=notDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],268:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nthRootDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),nthRootDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createNthRoot:_factoriesAny.createNthRoot};exports.nthRootDependencies=nthRootDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],269:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nthRootsDependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),nthRootsDependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createNthRoots:_factoriesAny.createNthRoots};exports.nthRootsDependencies=nthRootsDependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesDivideScalar.generated":152,"./dependenciesTyped.generated":375}],270:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nuclearMagnetonDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),nuclearMagnetonDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createNuclearMagneton:_factoriesAny.createNuclearMagneton};exports.nuclearMagnetonDependencies=nuclearMagnetonDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],271:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nullDependencies=void 0;var nullDependencies={createNull:require("../../factoriesAny.js").createNull};exports.nullDependencies=nullDependencies},{"../../factoriesAny.js":658}],272:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.numberDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),numberDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createNumber:_factoriesAny.createNumber};exports.numberDependencies=numberDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],273:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.numericDependencies=void 0;var _dependenciesBignumber=require("./dependenciesBignumber.generated"),_dependenciesFraction=require("./dependenciesFraction.generated"),_dependenciesNumber=require("./dependenciesNumber.generated"),_factoriesAny=require("../../factoriesAny.js"),numericDependencies={bignumberDependencies:_dependenciesBignumber.bignumberDependencies,fractionDependencies:_dependenciesFraction.fractionDependencies,numberDependencies:_dependenciesNumber.numberDependencies,createNumeric:_factoriesAny.createNumeric};exports.numericDependencies=numericDependencies},{"../../factoriesAny.js":658,"./dependenciesBignumber.generated":96,"./dependenciesFraction.generated":187,"./dependenciesNumber.generated":272}],274:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ObjectNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_factoriesAny=require("../../factoriesAny.js"),ObjectNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,createObjectNode:_factoriesAny.createObjectNode};exports.ObjectNodeDependencies=ObjectNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265}],275:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),onesDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createOnes:_factoriesAny.createOnes};exports.onesDependencies=onesDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],276:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OperatorNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_factoriesAny=require("../../factoriesAny.js"),OperatorNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,createOperatorNode:_factoriesAny.createOperatorNode};exports.OperatorNodeDependencies=OperatorNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265}],277:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.orDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),orDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createOr:_factoriesAny.createOr};exports.orDependencies=orDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],278:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ParenthesisNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_factoriesAny=require("../../factoriesAny.js"),ParenthesisNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,createParenthesisNode:_factoriesAny.createParenthesisNode};exports.ParenthesisNodeDependencies=ParenthesisNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265}],279:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseDependencies=void 0;var _dependenciesAccessorNode=require("./dependenciesAccessorNode.generated"),_dependenciesArrayNode=require("./dependenciesArrayNode.generated"),_dependenciesAssignmentNode=require("./dependenciesAssignmentNode.generated"),_dependenciesBlockNode=require("./dependenciesBlockNode.generated"),_dependenciesConditionalNode=require("./dependenciesConditionalNode.generated"),_dependenciesConstantNode=require("./dependenciesConstantNode.generated"),_dependenciesFunctionAssignmentNode=require("./dependenciesFunctionAssignmentNode.generated"),_dependenciesFunctionNode=require("./dependenciesFunctionNode.generated"),_dependenciesIndexNode=require("./dependenciesIndexNode.generated"),_dependenciesObjectNode=require("./dependenciesObjectNode.generated"),_dependenciesOperatorNode=require("./dependenciesOperatorNode.generated"),_dependenciesParenthesisNode=require("./dependenciesParenthesisNode.generated"),_dependenciesRangeNode=require("./dependenciesRangeNode.generated"),_dependenciesRelationalNode=require("./dependenciesRelationalNode.generated"),_dependenciesSymbolNode=require("./dependenciesSymbolNode.generated"),_dependenciesNumeric=require("./dependenciesNumeric.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),parseDependencies={AccessorNodeDependencies:_dependenciesAccessorNode.AccessorNodeDependencies,ArrayNodeDependencies:_dependenciesArrayNode.ArrayNodeDependencies,AssignmentNodeDependencies:_dependenciesAssignmentNode.AssignmentNodeDependencies,BlockNodeDependencies:_dependenciesBlockNode.BlockNodeDependencies,ConditionalNodeDependencies:_dependenciesConditionalNode.ConditionalNodeDependencies,ConstantNodeDependencies:_dependenciesConstantNode.ConstantNodeDependencies,FunctionAssignmentNodeDependencies:_dependenciesFunctionAssignmentNode.FunctionAssignmentNodeDependencies,FunctionNodeDependencies:_dependenciesFunctionNode.FunctionNodeDependencies,IndexNodeDependencies:_dependenciesIndexNode.IndexNodeDependencies,ObjectNodeDependencies:_dependenciesObjectNode.ObjectNodeDependencies,OperatorNodeDependencies:_dependenciesOperatorNode.OperatorNodeDependencies,ParenthesisNodeDependencies:_dependenciesParenthesisNode.ParenthesisNodeDependencies,RangeNodeDependencies:_dependenciesRangeNode.RangeNodeDependencies,RelationalNodeDependencies:_dependenciesRelationalNode.RelationalNodeDependencies,SymbolNodeDependencies:_dependenciesSymbolNode.SymbolNodeDependencies,numericDependencies:_dependenciesNumeric.numericDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createParse:_factoriesAny.createParse};exports.parseDependencies=parseDependencies},{"../../factoriesAny.js":658,"./dependenciesAccessorNode.generated":70,"./dependenciesArrayNode.generated":83,"./dependenciesAssignmentNode.generated":88,"./dependenciesBlockNode.generated":101,"./dependenciesConditionalNode.generated":126,"./dependenciesConstantNode.generated":129,"./dependenciesFunctionAssignmentNode.generated":189,"./dependenciesFunctionNode.generated":190,"./dependenciesIndexNode.generated":208,"./dependenciesNumeric.generated":273,"./dependenciesObjectNode.generated":274,"./dependenciesOperatorNode.generated":276,"./dependenciesParenthesisNode.generated":278,"./dependenciesRangeNode.generated":304,"./dependenciesRelationalNode.generated":309,"./dependenciesSymbolNode.generated":365,"./dependenciesTyped.generated":375}],280:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parserDependencies=void 0;var _dependenciesParserClass=require("./dependenciesParserClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),parserDependencies={ParserDependencies:_dependenciesParserClass.ParserDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createParser:_factoriesAny.createParser};exports.parserDependencies=parserDependencies},{"../../factoriesAny.js":658,"./dependenciesParserClass.generated":281,"./dependenciesTyped.generated":375}],281:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ParserDependencies=void 0;var _dependenciesParse=require("./dependenciesParse.generated"),_factoriesAny=require("../../factoriesAny.js"),ParserDependencies={parseDependencies:_dependenciesParse.parseDependencies,createParserClass:_factoriesAny.createParserClass};exports.ParserDependencies=ParserDependencies},{"../../factoriesAny.js":658,"./dependenciesParse.generated":279}],282:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.partitionSelectDependencies=void 0;var _dependenciesCompare=require("./dependenciesCompare.generated"),_dependenciesIsNaN=require("./dependenciesIsNaN.generated"),_dependenciesIsNumeric=require("./dependenciesIsNumeric.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),partitionSelectDependencies={compareDependencies:_dependenciesCompare.compareDependencies,isNaNDependencies:_dependenciesIsNaN.isNaNDependencies,isNumericDependencies:_dependenciesIsNumeric.isNumericDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createPartitionSelect:_factoriesAny.createPartitionSelect};exports.partitionSelectDependencies=partitionSelectDependencies},{"../../factoriesAny.js":658,"./dependenciesCompare.generated":117,"./dependenciesIsNaN.generated":215,"./dependenciesIsNumeric.generated":217,"./dependenciesTyped.generated":375}],283:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.permutationsDependencies=void 0;var _dependenciesFactorial=require("./dependenciesFactorial.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),permutationsDependencies={factorialDependencies:_dependenciesFactorial.factorialDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createPermutations:_factoriesAny.createPermutations};exports.permutationsDependencies=permutationsDependencies},{"../../factoriesAny.js":658,"./dependenciesFactorial.generated":172,"./dependenciesTyped.generated":375}],284:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.phiDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),phiDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createPhi:_factoriesAny.createPhi};exports.phiDependencies=phiDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],285:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.piDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),piDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createPi:_factoriesAny.createPi};exports.piDependencies=piDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],286:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pickRandomDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),pickRandomDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createPickRandom:_factoriesAny.createPickRandom};exports.pickRandomDependencies=pickRandomDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],287:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.planckChargeDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),planckChargeDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createPlanckCharge:_factoriesAny.createPlanckCharge};exports.planckChargeDependencies=planckChargeDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],288:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.planckConstantDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),planckConstantDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createPlanckConstant:_factoriesAny.createPlanckConstant};exports.planckConstantDependencies=planckConstantDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],289:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.planckLengthDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),planckLengthDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createPlanckLength:_factoriesAny.createPlanckLength};exports.planckLengthDependencies=planckLengthDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],290:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.planckMassDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),planckMassDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createPlanckMass:_factoriesAny.createPlanckMass};exports.planckMassDependencies=planckMassDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],291:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.planckTemperatureDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),planckTemperatureDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createPlanckTemperature:_factoriesAny.createPlanckTemperature};exports.planckTemperatureDependencies=planckTemperatureDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],292:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.planckTimeDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),planckTimeDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createPlanckTime:_factoriesAny.createPlanckTime};exports.planckTimeDependencies=planckTimeDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],293:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powDependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesFraction=require("./dependenciesFraction.generated"),_dependenciesIdentity=require("./dependenciesIdentity.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesNumber=require("./dependenciesNumber.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),powDependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,fractionDependencies:_dependenciesFraction.fractionDependencies,identityDependencies:_dependenciesIdentity.identityDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,numberDependencies:_dependenciesNumber.numberDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createPow:_factoriesAny.createPow};exports.powDependencies=powDependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesFraction.generated":187,"./dependenciesIdentity.generated":203,"./dependenciesMatrix.generated":245,"./dependenciesMultiply.generated":261,"./dependenciesNumber.generated":272,"./dependenciesTyped.generated":375}],294:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.printDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),printDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createPrint:_factoriesAny.createPrint};exports.printDependencies=printDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],295:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prodDependencies=void 0;var _dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),prodDependencies={multiplyDependencies:_dependenciesMultiply.multiplyDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createProd:_factoriesAny.createProd};exports.prodDependencies=prodDependencies},{"../../factoriesAny.js":658,"./dependenciesMultiply.generated":261,"./dependenciesTyped.generated":375}],296:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.protonMassDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),protonMassDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createProtonMass:_factoriesAny.createProtonMass};exports.protonMassDependencies=protonMassDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],297:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.qrDependencies=void 0;var _dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesComplex=require("./dependenciesComplex.generated"),_dependenciesConj=require("./dependenciesConj.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesEqual=require("./dependenciesEqual.generated"),_dependenciesIdentity=require("./dependenciesIdentity.generated"),_dependenciesIsZero=require("./dependenciesIsZero.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesSign=require("./dependenciesSign.generated"),_dependenciesSqrt=require("./dependenciesSqrt.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesUnaryMinus=require("./dependenciesUnaryMinus.generated"),_dependenciesZeros=require("./dependenciesZeros.generated"),_factoriesAny=require("../../factoriesAny.js"),qrDependencies={addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,complexDependencies:_dependenciesComplex.complexDependencies,conjDependencies:_dependenciesConj.conjDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,equalDependencies:_dependenciesEqual.equalDependencies,identityDependencies:_dependenciesIdentity.identityDependencies,isZeroDependencies:_dependenciesIsZero.isZeroDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,signDependencies:_dependenciesSign.signDependencies,sqrtDependencies:_dependenciesSqrt.sqrtDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,unaryMinusDependencies:_dependenciesUnaryMinus.unaryMinusDependencies,zerosDependencies:_dependenciesZeros.zerosDependencies,createQr:_factoriesAny.createQr};exports.qrDependencies=qrDependencies},{"../../factoriesAny.js":658,"./dependenciesAddScalar.generated":78,"./dependenciesComplex.generated":121,"./dependenciesConj.generated":128,"./dependenciesDivideScalar.generated":152,"./dependenciesEqual.generated":163,"./dependenciesIdentity.generated":203,"./dependenciesIsZero.generated":220,"./dependenciesMatrix.generated":245,"./dependenciesMultiplyScalar.generated":262,"./dependenciesSign.generated":337,"./dependenciesSqrt.generated":351,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375,"./dependenciesUnaryMinus.generated":376,"./dependenciesZeros.generated":392}],298:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.quantileSeqDependencies=void 0;var _dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesCompare=require("./dependenciesCompare.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesPartitionSelect=require("./dependenciesPartitionSelect.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),quantileSeqDependencies={addDependencies:_dependenciesAdd.addDependencies,compareDependencies:_dependenciesCompare.compareDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,partitionSelectDependencies:_dependenciesPartitionSelect.partitionSelectDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createQuantileSeq:_factoriesAny.createQuantileSeq};exports.quantileSeqDependencies=quantileSeqDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesCompare.generated":117,"./dependenciesMultiply.generated":261,"./dependenciesPartitionSelect.generated":282,"./dependenciesTyped.generated":375}],299:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.quantumOfCirculationDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),quantumOfCirculationDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createQuantumOfCirculation:_factoriesAny.createQuantumOfCirculation};exports.quantumOfCirculationDependencies=quantumOfCirculationDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],300:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),randomDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createRandom:_factoriesAny.createRandom};exports.randomDependencies=randomDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],301:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomIntDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),randomIntDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createRandomInt:_factoriesAny.createRandomInt};exports.randomIntDependencies=randomIntDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],302:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rangeDependencies=void 0;var _dependenciesBignumber=require("./dependenciesBignumber.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesLarger=require("./dependenciesLarger.generated"),_dependenciesLargerEq=require("./dependenciesLargerEq.generated"),_dependenciesSmaller=require("./dependenciesSmaller.generated"),_dependenciesSmallerEq=require("./dependenciesSmallerEq.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),rangeDependencies={bignumberDependencies:_dependenciesBignumber.bignumberDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,largerDependencies:_dependenciesLarger.largerDependencies,largerEqDependencies:_dependenciesLargerEq.largerEqDependencies,smallerDependencies:_dependenciesSmaller.smallerDependencies,smallerEqDependencies:_dependenciesSmallerEq.smallerEqDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createRange:_factoriesAny.createRange};exports.rangeDependencies=rangeDependencies},{"../../factoriesAny.js":658,"./dependenciesBignumber.generated":96,"./dependenciesLarger.generated":228,"./dependenciesLargerEq.generated":229,"./dependenciesMatrix.generated":245,"./dependenciesSmaller.generated":343,"./dependenciesSmallerEq.generated":344,"./dependenciesTyped.generated":375}],303:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RangeDependencies=void 0;var RangeDependencies={createRangeClass:require("../../factoriesAny.js").createRangeClass};exports.RangeDependencies=RangeDependencies},{"../../factoriesAny.js":658}],304:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RangeNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_factoriesAny=require("../../factoriesAny.js"),RangeNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,createRangeNode:_factoriesAny.createRangeNode};exports.RangeNodeDependencies=RangeNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265}],305:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rangeTransformDependencies=void 0;var _dependenciesBignumber=require("./dependenciesBignumber.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesLarger=require("./dependenciesLarger.generated"),_dependenciesLargerEq=require("./dependenciesLargerEq.generated"),_dependenciesSmaller=require("./dependenciesSmaller.generated"),_dependenciesSmallerEq=require("./dependenciesSmallerEq.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),rangeTransformDependencies={bignumberDependencies:_dependenciesBignumber.bignumberDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,largerDependencies:_dependenciesLarger.largerDependencies,largerEqDependencies:_dependenciesLargerEq.largerEqDependencies,smallerDependencies:_dependenciesSmaller.smallerDependencies,smallerEqDependencies:_dependenciesSmallerEq.smallerEqDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createRangeTransform:_factoriesAny.createRangeTransform};exports.rangeTransformDependencies=rangeTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesBignumber.generated":96,"./dependenciesLarger.generated":228,"./dependenciesLargerEq.generated":229,"./dependenciesMatrix.generated":245,"./dependenciesSmaller.generated":343,"./dependenciesSmallerEq.generated":344,"./dependenciesTyped.generated":375}],306:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rationalizeDependencies=void 0;var _dependenciesBignumber=require("./dependenciesBignumber.generated"),_dependenciesFraction=require("./dependenciesFraction.generated"),_dependenciesConstantNode=require("./dependenciesConstantNode.generated"),_dependenciesFunctionNode=require("./dependenciesFunctionNode.generated"),_dependenciesOperatorNode=require("./dependenciesOperatorNode.generated"),_dependenciesParenthesisNode=require("./dependenciesParenthesisNode.generated"),_dependenciesSymbolNode=require("./dependenciesSymbolNode.generated"),_dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesDivide=require("./dependenciesDivide.generated"),_dependenciesEqual=require("./dependenciesEqual.generated"),_dependenciesIsZero=require("./dependenciesIsZero.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesParse=require("./dependenciesParse.generated"),_dependenciesPow=require("./dependenciesPow.generated"),_dependenciesSimplify=require("./dependenciesSimplify.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),rationalizeDependencies={bignumberDependencies:_dependenciesBignumber.bignumberDependencies,fractionDependencies:_dependenciesFraction.fractionDependencies,ConstantNodeDependencies:_dependenciesConstantNode.ConstantNodeDependencies,FunctionNodeDependencies:_dependenciesFunctionNode.FunctionNodeDependencies,OperatorNodeDependencies:_dependenciesOperatorNode.OperatorNodeDependencies,ParenthesisNodeDependencies:_dependenciesParenthesisNode.ParenthesisNodeDependencies,SymbolNodeDependencies:_dependenciesSymbolNode.SymbolNodeDependencies,addDependencies:_dependenciesAdd.addDependencies,divideDependencies:_dependenciesDivide.divideDependencies,equalDependencies:_dependenciesEqual.equalDependencies,isZeroDependencies:_dependenciesIsZero.isZeroDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,parseDependencies:_dependenciesParse.parseDependencies,powDependencies:_dependenciesPow.powDependencies,simplifyDependencies:_dependenciesSimplify.simplifyDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createRationalize:_factoriesAny.createRationalize};exports.rationalizeDependencies=rationalizeDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesBignumber.generated":96,"./dependenciesConstantNode.generated":129,"./dependenciesDivide.generated":151,"./dependenciesEqual.generated":163,"./dependenciesFraction.generated":187,"./dependenciesFunctionNode.generated":190,"./dependenciesIsZero.generated":220,"./dependenciesMultiply.generated":261,"./dependenciesOperatorNode.generated":276,"./dependenciesParenthesisNode.generated":278,"./dependenciesParse.generated":279,"./dependenciesPow.generated":293,"./dependenciesSimplify.generated":338,"./dependenciesSubtract.generated":362,"./dependenciesSymbolNode.generated":365,"./dependenciesTyped.generated":375}],307:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),reDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createRe:_factoriesAny.createRe};exports.reDependencies=reDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],308:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reducedPlanckConstantDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),reducedPlanckConstantDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createReducedPlanckConstant:_factoriesAny.createReducedPlanckConstant};exports.reducedPlanckConstantDependencies=reducedPlanckConstantDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],309:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RelationalNodeDependencies=void 0;var _dependenciesNode=require("./dependenciesNode.generated"),_factoriesAny=require("../../factoriesAny.js"),RelationalNodeDependencies={NodeDependencies:_dependenciesNode.NodeDependencies,createRelationalNode:_factoriesAny.createRelationalNode};exports.RelationalNodeDependencies=RelationalNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265}],310:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.replacerDependencies=void 0;var replacerDependencies={createReplacer:require("../../factoriesAny.js").createReplacer};exports.replacerDependencies=replacerDependencies},{"../../factoriesAny.js":658}],311:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshapeDependencies=void 0;var _dependenciesIsInteger=require("./dependenciesIsInteger.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),reshapeDependencies={isIntegerDependencies:_dependenciesIsInteger.isIntegerDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createReshape:_factoriesAny.createReshape};exports.reshapeDependencies=reshapeDependencies},{"../../factoriesAny.js":658,"./dependenciesIsInteger.generated":214,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],312:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeDependencies=void 0;var _dependenciesMatrix=require("./dependenciesMatrix.generated"),_factoriesAny=require("../../factoriesAny.js"),resizeDependencies={matrixDependencies:_dependenciesMatrix.matrixDependencies,createResize:_factoriesAny.createResize};exports.resizeDependencies=resizeDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrix.generated":245}],313:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResultSetDependencies=void 0;var ResultSetDependencies={createResultSet:require("../../factoriesAny.js").createResultSet};exports.ResultSetDependencies=ResultSetDependencies},{"../../factoriesAny.js":658}],314:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reviverDependencies=void 0;var reviverDependencies={createReviver:require("../../factoriesAny.js").createReviver};exports.reviverDependencies=reviverDependencies},{"../../factoriesAny.js":658}],315:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rightArithShiftDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesZeros=require("./dependenciesZeros.generated"),_factoriesAny=require("../../factoriesAny.js"),rightArithShiftDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,zerosDependencies:_dependenciesZeros.zerosDependencies,createRightArithShift:_factoriesAny.createRightArithShift};exports.rightArithShiftDependencies=rightArithShiftDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375,"./dependenciesZeros.generated":392}],316:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rightLogShiftDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesZeros=require("./dependenciesZeros.generated"),_factoriesAny=require("../../factoriesAny.js"),rightLogShiftDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,zerosDependencies:_dependenciesZeros.zerosDependencies,createRightLogShift:_factoriesAny.createRightLogShift};exports.rightLogShiftDependencies=rightLogShiftDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375,"./dependenciesZeros.generated":392}],317:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.roundDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesZeros=require("./dependenciesZeros.generated"),_factoriesAny=require("../../factoriesAny.js"),roundDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,zerosDependencies:_dependenciesZeros.zerosDependencies,createRound:_factoriesAny.createRound};exports.roundDependencies=roundDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375,"./dependenciesZeros.generated":392}],318:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rowDependencies=void 0;var _dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesRange=require("./dependenciesRange.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),rowDependencies={IndexDependencies:_dependenciesIndexClass.IndexDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,rangeDependencies:_dependenciesRange.rangeDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createRow:_factoriesAny.createRow};exports.rowDependencies=rowDependencies},{"../../factoriesAny.js":658,"./dependenciesIndexClass.generated":207,"./dependenciesMatrix.generated":245,"./dependenciesRange.generated":302,"./dependenciesTyped.generated":375}],319:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rowTransformDependencies=void 0;var _dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesRange=require("./dependenciesRange.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),rowTransformDependencies={IndexDependencies:_dependenciesIndexClass.IndexDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,rangeDependencies:_dependenciesRange.rangeDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createRowTransform:_factoriesAny.createRowTransform};exports.rowTransformDependencies=rowTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesIndexClass.generated":207,"./dependenciesMatrix.generated":245,"./dependenciesRange.generated":302,"./dependenciesTyped.generated":375}],320:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rydbergDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),rydbergDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createRydberg:_factoriesAny.createRydberg};exports.rydbergDependencies=rydbergDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],321:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SQRT1_2Dependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),SQRT1_2Dependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createSQRT1_2:_factoriesAny.createSQRT1_2};exports.SQRT1_2Dependencies=SQRT1_2Dependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],322:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SQRT2Dependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),SQRT2Dependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createSQRT2:_factoriesAny.createSQRT2};exports.SQRT2Dependencies=SQRT2Dependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],323:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sackurTetrodeDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),sackurTetrodeDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createSackurTetrode:_factoriesAny.createSackurTetrode};exports.sackurTetrodeDependencies=sackurTetrodeDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],324:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.secDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),secDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSec:_factoriesAny.createSec};exports.secDependencies=secDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesTyped.generated":375}],325:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sechDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),sechDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSech:_factoriesAny.createSech};exports.sechDependencies=sechDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesTyped.generated":375}],326:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.secondRadiationDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),secondRadiationDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createSecondRadiation:_factoriesAny.createSecondRadiation};exports.secondRadiationDependencies=secondRadiationDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],327:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setCartesianDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesCompareNatural=require("./dependenciesCompareNatural.generated"),_dependenciesSize=require("./dependenciesSize.generated"),_dependenciesSubset=require("./dependenciesSubset.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),setCartesianDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,IndexDependencies:_dependenciesIndexClass.IndexDependencies,compareNaturalDependencies:_dependenciesCompareNatural.compareNaturalDependencies,sizeDependencies:_dependenciesSize.sizeDependencies,subsetDependencies:_dependenciesSubset.subsetDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSetCartesian:_factoriesAny.createSetCartesian};exports.setCartesianDependencies=setCartesianDependencies},{"../../factoriesAny.js":658,"./dependenciesCompareNatural.generated":118,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesIndexClass.generated":207,"./dependenciesSize.generated":341,"./dependenciesSubset.generated":360,"./dependenciesTyped.generated":375}],328:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setDifferenceDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesCompareNatural=require("./dependenciesCompareNatural.generated"),_dependenciesSize=require("./dependenciesSize.generated"),_dependenciesSubset=require("./dependenciesSubset.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),setDifferenceDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,IndexDependencies:_dependenciesIndexClass.IndexDependencies,compareNaturalDependencies:_dependenciesCompareNatural.compareNaturalDependencies,sizeDependencies:_dependenciesSize.sizeDependencies,subsetDependencies:_dependenciesSubset.subsetDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSetDifference:_factoriesAny.createSetDifference};exports.setDifferenceDependencies=setDifferenceDependencies},{"../../factoriesAny.js":658,"./dependenciesCompareNatural.generated":118,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesIndexClass.generated":207,"./dependenciesSize.generated":341,"./dependenciesSubset.generated":360,"./dependenciesTyped.generated":375}],329:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setDistinctDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesCompareNatural=require("./dependenciesCompareNatural.generated"),_dependenciesSize=require("./dependenciesSize.generated"),_dependenciesSubset=require("./dependenciesSubset.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),setDistinctDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,IndexDependencies:_dependenciesIndexClass.IndexDependencies,compareNaturalDependencies:_dependenciesCompareNatural.compareNaturalDependencies,sizeDependencies:_dependenciesSize.sizeDependencies,subsetDependencies:_dependenciesSubset.subsetDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSetDistinct:_factoriesAny.createSetDistinct};exports.setDistinctDependencies=setDistinctDependencies},{"../../factoriesAny.js":658,"./dependenciesCompareNatural.generated":118,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesIndexClass.generated":207,"./dependenciesSize.generated":341,"./dependenciesSubset.generated":360,"./dependenciesTyped.generated":375}],330:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setIntersectDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesCompareNatural=require("./dependenciesCompareNatural.generated"),_dependenciesSize=require("./dependenciesSize.generated"),_dependenciesSubset=require("./dependenciesSubset.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),setIntersectDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,IndexDependencies:_dependenciesIndexClass.IndexDependencies,compareNaturalDependencies:_dependenciesCompareNatural.compareNaturalDependencies,sizeDependencies:_dependenciesSize.sizeDependencies,subsetDependencies:_dependenciesSubset.subsetDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSetIntersect:_factoriesAny.createSetIntersect};exports.setIntersectDependencies=setIntersectDependencies},{"../../factoriesAny.js":658,"./dependenciesCompareNatural.generated":118,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesIndexClass.generated":207,"./dependenciesSize.generated":341,"./dependenciesSubset.generated":360,"./dependenciesTyped.generated":375}],331:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setIsSubsetDependencies=void 0;var _dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesCompareNatural=require("./dependenciesCompareNatural.generated"),_dependenciesSize=require("./dependenciesSize.generated"),_dependenciesSubset=require("./dependenciesSubset.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),setIsSubsetDependencies={IndexDependencies:_dependenciesIndexClass.IndexDependencies,compareNaturalDependencies:_dependenciesCompareNatural.compareNaturalDependencies,sizeDependencies:_dependenciesSize.sizeDependencies,subsetDependencies:_dependenciesSubset.subsetDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSetIsSubset:_factoriesAny.createSetIsSubset};exports.setIsSubsetDependencies=setIsSubsetDependencies},{"../../factoriesAny.js":658,"./dependenciesCompareNatural.generated":118,"./dependenciesIndexClass.generated":207,"./dependenciesSize.generated":341,"./dependenciesSubset.generated":360,"./dependenciesTyped.generated":375}],332:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMultiplicityDependencies=void 0;var _dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesCompareNatural=require("./dependenciesCompareNatural.generated"),_dependenciesSize=require("./dependenciesSize.generated"),_dependenciesSubset=require("./dependenciesSubset.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),setMultiplicityDependencies={IndexDependencies:_dependenciesIndexClass.IndexDependencies,compareNaturalDependencies:_dependenciesCompareNatural.compareNaturalDependencies,sizeDependencies:_dependenciesSize.sizeDependencies,subsetDependencies:_dependenciesSubset.subsetDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSetMultiplicity:_factoriesAny.createSetMultiplicity};exports.setMultiplicityDependencies=setMultiplicityDependencies},{"../../factoriesAny.js":658,"./dependenciesCompareNatural.generated":118,"./dependenciesIndexClass.generated":207,"./dependenciesSize.generated":341,"./dependenciesSubset.generated":360,"./dependenciesTyped.generated":375}],333:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setPowersetDependencies=void 0;var _dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesCompareNatural=require("./dependenciesCompareNatural.generated"),_dependenciesSize=require("./dependenciesSize.generated"),_dependenciesSubset=require("./dependenciesSubset.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),setPowersetDependencies={IndexDependencies:_dependenciesIndexClass.IndexDependencies,compareNaturalDependencies:_dependenciesCompareNatural.compareNaturalDependencies,sizeDependencies:_dependenciesSize.sizeDependencies,subsetDependencies:_dependenciesSubset.subsetDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSetPowerset:_factoriesAny.createSetPowerset};exports.setPowersetDependencies=setPowersetDependencies},{"../../factoriesAny.js":658,"./dependenciesCompareNatural.generated":118,"./dependenciesIndexClass.generated":207,"./dependenciesSize.generated":341,"./dependenciesSubset.generated":360,"./dependenciesTyped.generated":375}],334:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setSizeDependencies=void 0;var _dependenciesCompareNatural=require("./dependenciesCompareNatural.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),setSizeDependencies={compareNaturalDependencies:_dependenciesCompareNatural.compareNaturalDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSetSize:_factoriesAny.createSetSize};exports.setSizeDependencies=setSizeDependencies},{"../../factoriesAny.js":658,"./dependenciesCompareNatural.generated":118,"./dependenciesTyped.generated":375}],335:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setSymDifferenceDependencies=void 0;var _dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesConcat=require("./dependenciesConcat.generated"),_dependenciesSetDifference=require("./dependenciesSetDifference.generated"),_dependenciesSize=require("./dependenciesSize.generated"),_dependenciesSubset=require("./dependenciesSubset.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),setSymDifferenceDependencies={IndexDependencies:_dependenciesIndexClass.IndexDependencies,concatDependencies:_dependenciesConcat.concatDependencies,setDifferenceDependencies:_dependenciesSetDifference.setDifferenceDependencies,sizeDependencies:_dependenciesSize.sizeDependencies,subsetDependencies:_dependenciesSubset.subsetDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSetSymDifference:_factoriesAny.createSetSymDifference};exports.setSymDifferenceDependencies=setSymDifferenceDependencies},{"../../factoriesAny.js":658,"./dependenciesConcat.generated":124,"./dependenciesIndexClass.generated":207,"./dependenciesSetDifference.generated":328,"./dependenciesSize.generated":341,"./dependenciesSubset.generated":360,"./dependenciesTyped.generated":375}],336:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setUnionDependencies=void 0;var _dependenciesIndexClass=require("./dependenciesIndexClass.generated"),_dependenciesConcat=require("./dependenciesConcat.generated"),_dependenciesSetIntersect=require("./dependenciesSetIntersect.generated"),_dependenciesSetSymDifference=require("./dependenciesSetSymDifference.generated"),_dependenciesSize=require("./dependenciesSize.generated"),_dependenciesSubset=require("./dependenciesSubset.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),setUnionDependencies={IndexDependencies:_dependenciesIndexClass.IndexDependencies,concatDependencies:_dependenciesConcat.concatDependencies,setIntersectDependencies:_dependenciesSetIntersect.setIntersectDependencies,setSymDifferenceDependencies:_dependenciesSetSymDifference.setSymDifferenceDependencies,sizeDependencies:_dependenciesSize.sizeDependencies,subsetDependencies:_dependenciesSubset.subsetDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSetUnion:_factoriesAny.createSetUnion};exports.setUnionDependencies=setUnionDependencies},{"../../factoriesAny.js":658,"./dependenciesConcat.generated":124,"./dependenciesIndexClass.generated":207,"./dependenciesSetIntersect.generated":330,"./dependenciesSetSymDifference.generated":335,"./dependenciesSize.generated":341,"./dependenciesSubset.generated":360,"./dependenciesTyped.generated":375}],337:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.signDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesFractionClass=require("./dependenciesFractionClass.generated"),_dependenciesComplex=require("./dependenciesComplex.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),signDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,FractionDependencies:_dependenciesFractionClass.FractionDependencies,complexDependencies:_dependenciesComplex.complexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSign:_factoriesAny.createSign};exports.signDependencies=signDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesComplex.generated":121,"./dependenciesFractionClass.generated":188,"./dependenciesTyped.generated":375}],338:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simplifyDependencies=void 0;var _dependenciesBignumber=require("./dependenciesBignumber.generated"),_dependenciesFraction=require("./dependenciesFraction.generated"),_dependenciesConstantNode=require("./dependenciesConstantNode.generated"),_dependenciesFunctionNode=require("./dependenciesFunctionNode.generated"),_dependenciesOperatorNode=require("./dependenciesOperatorNode.generated"),_dependenciesParenthesisNode=require("./dependenciesParenthesisNode.generated"),_dependenciesSymbolNode=require("./dependenciesSymbolNode.generated"),_dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesDivide=require("./dependenciesDivide.generated"),_dependenciesEqual=require("./dependenciesEqual.generated"),_dependenciesIsZero=require("./dependenciesIsZero.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesParse=require("./dependenciesParse.generated"),_dependenciesPow=require("./dependenciesPow.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),simplifyDependencies={bignumberDependencies:_dependenciesBignumber.bignumberDependencies,fractionDependencies:_dependenciesFraction.fractionDependencies,ConstantNodeDependencies:_dependenciesConstantNode.ConstantNodeDependencies,FunctionNodeDependencies:_dependenciesFunctionNode.FunctionNodeDependencies,OperatorNodeDependencies:_dependenciesOperatorNode.OperatorNodeDependencies,ParenthesisNodeDependencies:_dependenciesParenthesisNode.ParenthesisNodeDependencies,SymbolNodeDependencies:_dependenciesSymbolNode.SymbolNodeDependencies,addDependencies:_dependenciesAdd.addDependencies,divideDependencies:_dependenciesDivide.divideDependencies,equalDependencies:_dependenciesEqual.equalDependencies,isZeroDependencies:_dependenciesIsZero.isZeroDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,parseDependencies:_dependenciesParse.parseDependencies,powDependencies:_dependenciesPow.powDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSimplify:_factoriesAny.createSimplify};exports.simplifyDependencies=simplifyDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesBignumber.generated":96,"./dependenciesConstantNode.generated":129,"./dependenciesDivide.generated":151,"./dependenciesEqual.generated":163,"./dependenciesFraction.generated":187,"./dependenciesFunctionNode.generated":190,"./dependenciesIsZero.generated":220,"./dependenciesMultiply.generated":261,"./dependenciesOperatorNode.generated":276,"./dependenciesParenthesisNode.generated":278,"./dependenciesParse.generated":279,"./dependenciesPow.generated":293,"./dependenciesSubtract.generated":362,"./dependenciesSymbolNode.generated":365,"./dependenciesTyped.generated":375}],339:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),sinDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createSin:_factoriesAny.createSin};exports.sinDependencies=sinDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],340:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinhDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),sinhDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createSinh:_factoriesAny.createSinh};exports.sinhDependencies=sinhDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],341:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sizeDependencies=void 0;var _dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),sizeDependencies={matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSize:_factoriesAny.createSize};exports.sizeDependencies=sizeDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],342:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sluDependencies=void 0;var _dependenciesSparseMatrixClass=require("./dependenciesSparseMatrixClass.generated"),_dependenciesAbs=require("./dependenciesAbs.generated"),_dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesLarger=require("./dependenciesLarger.generated"),_dependenciesLargerEq=require("./dependenciesLargerEq.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTranspose=require("./dependenciesTranspose.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),sluDependencies={SparseMatrixDependencies:_dependenciesSparseMatrixClass.SparseMatrixDependencies,absDependencies:_dependenciesAbs.absDependencies,addDependencies:_dependenciesAdd.addDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,largerDependencies:_dependenciesLarger.largerDependencies,largerEqDependencies:_dependenciesLargerEq.largerEqDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,transposeDependencies:_dependenciesTranspose.transposeDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSlu:_factoriesAny.createSlu};exports.sluDependencies=sluDependencies},{"../../factoriesAny.js":658,"./dependenciesAbs.generated":69,"./dependenciesAdd.generated":77,"./dependenciesDivideScalar.generated":152,"./dependenciesLarger.generated":228,"./dependenciesLargerEq.generated":229,"./dependenciesMultiply.generated":261,"./dependenciesSparseMatrixClass.generated":348,"./dependenciesSubtract.generated":362,"./dependenciesTranspose.generated":372,"./dependenciesTyped.generated":375}],343:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.smallerDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),smallerDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSmaller:_factoriesAny.createSmaller};exports.smallerDependencies=smallerDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],344:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.smallerEqDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),smallerEqDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSmallerEq:_factoriesAny.createSmallerEq};exports.smallerEqDependencies=smallerEqDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],345:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sortDependencies=void 0;var _dependenciesCompare=require("./dependenciesCompare.generated"),_dependenciesCompareNatural=require("./dependenciesCompareNatural.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),sortDependencies={compareDependencies:_dependenciesCompare.compareDependencies,compareNaturalDependencies:_dependenciesCompareNatural.compareNaturalDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSort:_factoriesAny.createSort};exports.sortDependencies=sortDependencies},{"../../factoriesAny.js":658,"./dependenciesCompare.generated":117,"./dependenciesCompareNatural.generated":118,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],346:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpaDependencies=void 0;var _dependenciesFibonacciHeapClass=require("./dependenciesFibonacciHeapClass.generated"),_dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_factoriesAny=require("../../factoriesAny.js"),SpaDependencies={FibonacciHeapDependencies:_dependenciesFibonacciHeapClass.FibonacciHeapDependencies,addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,createSpaClass:_factoriesAny.createSpaClass};exports.SpaDependencies=SpaDependencies},{"../../factoriesAny.js":658,"./dependenciesAddScalar.generated":78,"./dependenciesEqualScalar.generated":164,"./dependenciesFibonacciHeapClass.generated":176}],347:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseDependencies=void 0;var _dependenciesSparseMatrixClass=require("./dependenciesSparseMatrixClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),sparseDependencies={SparseMatrixDependencies:_dependenciesSparseMatrixClass.SparseMatrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSparse:_factoriesAny.createSparse};exports.sparseDependencies=sparseDependencies},{"../../factoriesAny.js":658,"./dependenciesSparseMatrixClass.generated":348,"./dependenciesTyped.generated":375}],348:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SparseMatrixDependencies=void 0;var _dependenciesMatrixClass=require("./dependenciesMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),SparseMatrixDependencies={MatrixDependencies:_dependenciesMatrixClass.MatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSparseMatrixClass:_factoriesAny.createSparseMatrixClass};exports.SparseMatrixDependencies=SparseMatrixDependencies},{"../../factoriesAny.js":658,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrixClass.generated":246,"./dependenciesTyped.generated":375}],349:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.speedOfLightDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),speedOfLightDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createSpeedOfLight:_factoriesAny.createSpeedOfLight};exports.speedOfLightDependencies=speedOfLightDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],350:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitUnitDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),splitUnitDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createSplitUnit:_factoriesAny.createSplitUnit};exports.splitUnitDependencies=splitUnitDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],351:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtDependencies=void 0;var _dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),sqrtDependencies={ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSqrt:_factoriesAny.createSqrt};exports.sqrtDependencies=sqrtDependencies},{"../../factoriesAny.js":658,"./dependenciesComplexClass.generated":122,"./dependenciesTyped.generated":375}],352:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtmDependencies=void 0;var _dependenciesAbs=require("./dependenciesAbs.generated"),_dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesIdentity=require("./dependenciesIdentity.generated"),_dependenciesInv=require("./dependenciesInv.generated"),_dependenciesMax=require("./dependenciesMax.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesSize=require("./dependenciesSize.generated"),_dependenciesSqrt=require("./dependenciesSqrt.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),sqrtmDependencies={absDependencies:_dependenciesAbs.absDependencies,addDependencies:_dependenciesAdd.addDependencies,identityDependencies:_dependenciesIdentity.identityDependencies,invDependencies:_dependenciesInv.invDependencies,maxDependencies:_dependenciesMax.maxDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,sizeDependencies:_dependenciesSize.sizeDependencies,sqrtDependencies:_dependenciesSqrt.sqrtDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSqrtm:_factoriesAny.createSqrtm};exports.sqrtmDependencies=sqrtmDependencies},{"../../factoriesAny.js":658,"./dependenciesAbs.generated":69,"./dependenciesAdd.generated":77,"./dependenciesIdentity.generated":203,"./dependenciesInv.generated":212,"./dependenciesMax.generated":247,"./dependenciesMultiply.generated":261,"./dependenciesSize.generated":341,"./dependenciesSqrt.generated":351,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375}],353:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),squareDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createSquare:_factoriesAny.createSquare};exports.squareDependencies=squareDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],354:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squeezeDependencies=void 0;var _dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),squeezeDependencies={matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSqueeze:_factoriesAny.createSqueeze};exports.squeezeDependencies=squeezeDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],355:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stdDependencies=void 0;var _dependenciesSqrt=require("./dependenciesSqrt.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesVariance=require("./dependenciesVariance.generated"),_factoriesAny=require("../../factoriesAny.js"),stdDependencies={sqrtDependencies:_dependenciesSqrt.sqrtDependencies,typedDependencies:_dependenciesTyped.typedDependencies,varianceDependencies:_dependenciesVariance.varianceDependencies,createStd:_factoriesAny.createStd};exports.stdDependencies=stdDependencies},{"../../factoriesAny.js":658,"./dependenciesSqrt.generated":351,"./dependenciesTyped.generated":375,"./dependenciesVariance.generated":385}],356:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stdTransformDependencies=void 0;var _dependenciesSqrt=require("./dependenciesSqrt.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesVariance=require("./dependenciesVariance.generated"),_factoriesAny=require("../../factoriesAny.js"),stdTransformDependencies={sqrtDependencies:_dependenciesSqrt.sqrtDependencies,typedDependencies:_dependenciesTyped.typedDependencies,varianceDependencies:_dependenciesVariance.varianceDependencies,createStdTransform:_factoriesAny.createStdTransform};exports.stdTransformDependencies=stdTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesSqrt.generated":351,"./dependenciesTyped.generated":375,"./dependenciesVariance.generated":385}],357:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stefanBoltzmannDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),stefanBoltzmannDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createStefanBoltzmann:_factoriesAny.createStefanBoltzmann};exports.stefanBoltzmannDependencies=stefanBoltzmannDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],358:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stirlingS2Dependencies=void 0;var _dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesCombinations=require("./dependenciesCombinations.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesFactorial=require("./dependenciesFactorial.generated"),_dependenciesIsInteger=require("./dependenciesIsInteger.generated"),_dependenciesIsNegative=require("./dependenciesIsNegative.generated"),_dependenciesLarger=require("./dependenciesLarger.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesPow=require("./dependenciesPow.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),stirlingS2Dependencies={addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,combinationsDependencies:_dependenciesCombinations.combinationsDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,factorialDependencies:_dependenciesFactorial.factorialDependencies,isIntegerDependencies:_dependenciesIsInteger.isIntegerDependencies,isNegativeDependencies:_dependenciesIsNegative.isNegativeDependencies,largerDependencies:_dependenciesLarger.largerDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,powDependencies:_dependenciesPow.powDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createStirlingS2:_factoriesAny.createStirlingS2};exports.stirlingS2Dependencies=stirlingS2Dependencies},{"../../factoriesAny.js":658,"./dependenciesAddScalar.generated":78,"./dependenciesCombinations.generated":115,"./dependenciesDivideScalar.generated":152,"./dependenciesFactorial.generated":172,"./dependenciesIsInteger.generated":214,"./dependenciesIsNegative.generated":216,"./dependenciesLarger.generated":228,"./dependenciesMultiplyScalar.generated":262,"./dependenciesPow.generated":293,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375}],359:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),stringDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createString:_factoriesAny.createString};exports.stringDependencies=stringDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],360:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subsetDependencies=void 0;var _dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),subsetDependencies={matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSubset:_factoriesAny.createSubset};exports.subsetDependencies=subsetDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],361:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subsetTransformDependencies=void 0;var _dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),subsetTransformDependencies={matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSubsetTransform:_factoriesAny.createSubsetTransform};exports.subsetTransformDependencies=subsetTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],362:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subtractDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_dependenciesUnaryMinus=require("./dependenciesUnaryMinus.generated"),_factoriesAny=require("../../factoriesAny.js"),subtractDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,unaryMinusDependencies:_dependenciesUnaryMinus.unaryMinusDependencies,createSubtract:_factoriesAny.createSubtract};exports.subtractDependencies=subtractDependencies},{"../../factoriesAny.js":658,"./dependenciesAddScalar.generated":78,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375,"./dependenciesUnaryMinus.generated":376}],363:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sumDependencies=void 0;var _dependenciesBignumber=require("./dependenciesBignumber.generated"),_dependenciesFraction=require("./dependenciesFraction.generated"),_dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),sumDependencies={bignumberDependencies:_dependenciesBignumber.bignumberDependencies,fractionDependencies:_dependenciesFraction.fractionDependencies,addDependencies:_dependenciesAdd.addDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSum:_factoriesAny.createSum};exports.sumDependencies=sumDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesBignumber.generated":96,"./dependenciesFraction.generated":187,"./dependenciesTyped.generated":375}],364:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sumTransformDependencies=void 0;var _dependenciesBignumber=require("./dependenciesBignumber.generated"),_dependenciesFraction=require("./dependenciesFraction.generated"),_dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),sumTransformDependencies={bignumberDependencies:_dependenciesBignumber.bignumberDependencies,fractionDependencies:_dependenciesFraction.fractionDependencies,addDependencies:_dependenciesAdd.addDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createSumTransform:_factoriesAny.createSumTransform};exports.sumTransformDependencies=sumTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesBignumber.generated":96,"./dependenciesFraction.generated":187,"./dependenciesTyped.generated":375}],365:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SymbolNodeDependencies=void 0;var _dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_dependenciesNode=require("./dependenciesNode.generated"),_factoriesAny=require("../../factoriesAny.js"),SymbolNodeDependencies={UnitDependencies:_dependenciesUnitClass.UnitDependencies,NodeDependencies:_dependenciesNode.NodeDependencies,createSymbolNode:_factoriesAny.createSymbolNode};exports.SymbolNodeDependencies=SymbolNodeDependencies},{"../../factoriesAny.js":658,"./dependenciesNode.generated":265,"./dependenciesUnitClass.generated":379}],366:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),tanDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createTan:_factoriesAny.createTan};exports.tanDependencies=tanDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],367:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanhDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),tanhDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createTanh:_factoriesAny.createTanh};exports.tanhDependencies=tanhDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],368:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tauDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),tauDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createTau:_factoriesAny.createTau};exports.tauDependencies=tauDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],369:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.thomsonCrossSectionDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),thomsonCrossSectionDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createThomsonCrossSection:_factoriesAny.createThomsonCrossSection};exports.thomsonCrossSectionDependencies=thomsonCrossSectionDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],370:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toDependencies=void 0;var _dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),toDependencies={matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createTo:_factoriesAny.createTo};exports.toDependencies=toDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],371:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.traceDependencies=void 0;var _dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),traceDependencies={addDependencies:_dependenciesAdd.addDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createTrace:_factoriesAny.createTrace};exports.traceDependencies=traceDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],372:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeDependencies=void 0;var _dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),transposeDependencies={matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createTranspose:_factoriesAny.createTranspose};exports.transposeDependencies=transposeDependencies},{"../../factoriesAny.js":658,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],373:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trueDependencies=void 0;var trueDependencies={createTrue:require("../../factoriesAny.js").createTrue};exports.trueDependencies=trueDependencies},{"../../factoriesAny.js":658}],374:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.typeOfDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),typeOfDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createTypeOf:_factoriesAny.createTypeOf};exports.typeOfDependencies=typeOfDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],375:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.typedDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesFractionClass=require("./dependenciesFractionClass.generated"),_factoriesAny=require("../../factoriesAny.js"),typedDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,FractionDependencies:_dependenciesFractionClass.FractionDependencies,createTyped:_factoriesAny.createTyped};exports.typedDependencies=typedDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesComplexClass.generated":122,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesFractionClass.generated":188}],376:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unaryMinusDependencies=void 0;var _dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),unaryMinusDependencies={typedDependencies:_dependenciesTyped.typedDependencies,createUnaryMinus:_factoriesAny.createUnaryMinus};exports.unaryMinusDependencies=unaryMinusDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375}],377:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unaryPlusDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),unaryPlusDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createUnaryPlus:_factoriesAny.createUnaryPlus};exports.unaryPlusDependencies=unaryPlusDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesTyped.generated":375}],378:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unequalDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),unequalDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createUnequal:_factoriesAny.createUnequal};exports.unequalDependencies=unequalDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],379:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnitDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesComplexClass=require("./dependenciesComplexClass.generated"),_dependenciesFractionClass=require("./dependenciesFractionClass.generated"),_dependenciesAbs=require("./dependenciesAbs.generated"),_dependenciesAddScalar=require("./dependenciesAddScalar.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesEqual=require("./dependenciesEqual.generated"),_dependenciesFix=require("./dependenciesFix.generated"),_dependenciesFormat=require("./dependenciesFormat.generated"),_dependenciesIsNumeric=require("./dependenciesIsNumeric.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesNumber=require("./dependenciesNumber.generated"),_dependenciesPow=require("./dependenciesPow.generated"),_dependenciesRound=require("./dependenciesRound.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_factoriesAny=require("../../factoriesAny.js"),UnitDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,ComplexDependencies:_dependenciesComplexClass.ComplexDependencies,FractionDependencies:_dependenciesFractionClass.FractionDependencies,absDependencies:_dependenciesAbs.absDependencies,addScalarDependencies:_dependenciesAddScalar.addScalarDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,equalDependencies:_dependenciesEqual.equalDependencies,fixDependencies:_dependenciesFix.fixDependencies,formatDependencies:_dependenciesFormat.formatDependencies,isNumericDependencies:_dependenciesIsNumeric.isNumericDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,numberDependencies:_dependenciesNumber.numberDependencies,powDependencies:_dependenciesPow.powDependencies,roundDependencies:_dependenciesRound.roundDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,createUnitClass:_factoriesAny.createUnitClass};exports.UnitDependencies=UnitDependencies},{"../../factoriesAny.js":658,"./dependenciesAbs.generated":69,"./dependenciesAddScalar.generated":78,"./dependenciesBigNumberClass.generated":95,"./dependenciesComplexClass.generated":122,"./dependenciesDivideScalar.generated":152,"./dependenciesEqual.generated":163,"./dependenciesFix.generated":181,"./dependenciesFormat.generated":186,"./dependenciesFractionClass.generated":188,"./dependenciesIsNumeric.generated":217,"./dependenciesMultiplyScalar.generated":262,"./dependenciesNumber.generated":272,"./dependenciesPow.generated":293,"./dependenciesRound.generated":317,"./dependenciesSubtract.generated":362}],380:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unitDependencies=void 0;var _dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),unitDependencies={UnitDependencies:_dependenciesUnitClass.UnitDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createUnitFunction:_factoriesAny.createUnitFunction};exports.unitDependencies=unitDependencies},{"../../factoriesAny.js":658,"./dependenciesTyped.generated":375,"./dependenciesUnitClass.generated":379}],381:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EDependencies=void 0;var _dependenciesE=require("./dependenciesE.generated"),_factoriesAny=require("../../factoriesAny.js"),EDependencies={eDependencies:_dependenciesE.eDependencies,createUppercaseE:_factoriesAny.createUppercaseE};exports.EDependencies=EDependencies},{"../../factoriesAny.js":658,"./dependenciesE.generated":157}],382:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PIDependencies=void 0;var _dependenciesPi=require("./dependenciesPi.generated"),_factoriesAny=require("../../factoriesAny.js"),PIDependencies={piDependencies:_dependenciesPi.piDependencies,createUppercasePi:_factoriesAny.createUppercasePi};exports.PIDependencies=PIDependencies},{"../../factoriesAny.js":658,"./dependenciesPi.generated":285}],383:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.usolveDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesDivideScalar=require("./dependenciesDivideScalar.generated"),_dependenciesEqualScalar=require("./dependenciesEqualScalar.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesMultiplyScalar=require("./dependenciesMultiplyScalar.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),usolveDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,divideScalarDependencies:_dependenciesDivideScalar.divideScalarDependencies,equalScalarDependencies:_dependenciesEqualScalar.equalScalarDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,multiplyScalarDependencies:_dependenciesMultiplyScalar.multiplyScalarDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createUsolve:_factoriesAny.createUsolve};exports.usolveDependencies=usolveDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesDivideScalar.generated":152,"./dependenciesEqualScalar.generated":164,"./dependenciesMatrix.generated":245,"./dependenciesMultiplyScalar.generated":262,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375}],384:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vacuumImpedanceDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),vacuumImpedanceDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createVacuumImpedance:_factoriesAny.createVacuumImpedance};exports.vacuumImpedanceDependencies=vacuumImpedanceDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],385:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.varianceDependencies=void 0;var _dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesApply=require("./dependenciesApply.generated"),_dependenciesDivide=require("./dependenciesDivide.generated"),_dependenciesIsNaN=require("./dependenciesIsNaN.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),varianceDependencies={addDependencies:_dependenciesAdd.addDependencies,applyDependencies:_dependenciesApply.applyDependencies,divideDependencies:_dependenciesDivide.divideDependencies,isNaNDependencies:_dependenciesIsNaN.isNaNDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createVariance:_factoriesAny.createVariance};exports.varianceDependencies=varianceDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesApply.generated":80,"./dependenciesDivide.generated":151,"./dependenciesIsNaN.generated":215,"./dependenciesMultiply.generated":261,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375}],386:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.varianceTransformDependencies=void 0;var _dependenciesAdd=require("./dependenciesAdd.generated"),_dependenciesApply=require("./dependenciesApply.generated"),_dependenciesDivide=require("./dependenciesDivide.generated"),_dependenciesIsNaN=require("./dependenciesIsNaN.generated"),_dependenciesMultiply=require("./dependenciesMultiply.generated"),_dependenciesSubtract=require("./dependenciesSubtract.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),varianceTransformDependencies={addDependencies:_dependenciesAdd.addDependencies,applyDependencies:_dependenciesApply.applyDependencies,divideDependencies:_dependenciesDivide.divideDependencies,isNaNDependencies:_dependenciesIsNaN.isNaNDependencies,multiplyDependencies:_dependenciesMultiply.multiplyDependencies,subtractDependencies:_dependenciesSubtract.subtractDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createVarianceTransform:_factoriesAny.createVarianceTransform};exports.varianceTransformDependencies=varianceTransformDependencies},{"../../factoriesAny.js":658,"./dependenciesAdd.generated":77,"./dependenciesApply.generated":80,"./dependenciesDivide.generated":151,"./dependenciesIsNaN.generated":215,"./dependenciesMultiply.generated":261,"./dependenciesSubtract.generated":362,"./dependenciesTyped.generated":375}],387:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.versionDependencies=void 0;var versionDependencies={createVersion:require("../../factoriesAny.js").createVersion};exports.versionDependencies=versionDependencies},{"../../factoriesAny.js":658}],388:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.weakMixingAngleDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_factoriesAny=require("../../factoriesAny.js"),weakMixingAngleDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,createWeakMixingAngle:_factoriesAny.createWeakMixingAngle};exports.weakMixingAngleDependencies=weakMixingAngleDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95}],389:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wienDisplacementDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesUnitClass=require("./dependenciesUnitClass.generated"),_factoriesAny=require("../../factoriesAny.js"),wienDisplacementDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,UnitDependencies:_dependenciesUnitClass.UnitDependencies,createWienDisplacement:_factoriesAny.createWienDisplacement};exports.wienDisplacementDependencies=wienDisplacementDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesUnitClass.generated":379}],390:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xgcdDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),xgcdDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createXgcd:_factoriesAny.createXgcd};exports.xgcdDependencies=xgcdDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],391:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xorDependencies=void 0;var _dependenciesDenseMatrixClass=require("./dependenciesDenseMatrixClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),xorDependencies={DenseMatrixDependencies:_dependenciesDenseMatrixClass.DenseMatrixDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createXor:_factoriesAny.createXor};exports.xorDependencies=xorDependencies},{"../../factoriesAny.js":658,"./dependenciesDenseMatrixClass.generated":142,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],392:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosDependencies=void 0;var _dependenciesBigNumberClass=require("./dependenciesBigNumberClass.generated"),_dependenciesMatrix=require("./dependenciesMatrix.generated"),_dependenciesTyped=require("./dependenciesTyped.generated"),_factoriesAny=require("../../factoriesAny.js"),zerosDependencies={BigNumberDependencies:_dependenciesBigNumberClass.BigNumberDependencies,matrixDependencies:_dependenciesMatrix.matrixDependencies,typedDependencies:_dependenciesTyped.typedDependencies,createZeros:_factoriesAny.createZeros};exports.zerosDependencies=zerosDependencies},{"../../factoriesAny.js":658,"./dependenciesBigNumberClass.generated":95,"./dependenciesMatrix.generated":245,"./dependenciesTyped.generated":375}],393:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.error=exports.json=exports.expression=exports.type=exports.deprecatedTypeof=exports.deprecatedVar=exports.deprecatedImport=exports.deprecatedEval=void 0;var _eval=require("../expression/function/eval"),_deprecatedImport=require("../core/function/deprecatedImport"),_variance=require("../function/statistics/variance"),_typeOf=require("../function/utils/typeOf"),_is=require("../utils/is"),_ArgumentsError=require("../error/ArgumentsError"),_DimensionError=require("../error/DimensionError"),_IndexError=require("../error/IndexError"),_object=require("../utils/object"),_log=require("../utils/log"),_pureFunctionsAny=require("./pureFunctionsAny.generated"),_impureFunctionsAny=require("./impureFunctionsAny.generated"),deprecatedEval=(0,_eval.createDeprecatedEval)({evaluate:_impureFunctionsAny.evaluate});exports.deprecatedEval=deprecatedEval;var deprecatedImport=(0,_deprecatedImport.createDeprecatedImport)({});exports.deprecatedImport=deprecatedImport;var deprecatedVar=(0,_variance.createDeprecatedVar)({variance:_pureFunctionsAny.variance});exports.deprecatedVar=deprecatedVar;var deprecatedTypeof=(0,_typeOf.createDeprecatedTypeof)({typeOf:_pureFunctionsAny.typeOf});exports.deprecatedTypeof=deprecatedTypeof;var type=createDeprecatedProperties("type",{isNumber:_is.isNumber,isComplex:_is.isComplex,isBigNumber:_is.isBigNumber,isFraction:_is.isFraction,isUnit:_is.isUnit,isString:_is.isString,isArray:_is.isArray,isMatrix:_is.isMatrix,isCollection:_is.isCollection,isDenseMatrix:_is.isDenseMatrix,isSparseMatrix:_is.isSparseMatrix,isRange:_is.isRange,isIndex:_is.isIndex,isBoolean:_is.isBoolean,isResultSet:_is.isResultSet,isHelp:_is.isHelp,isFunction:_is.isFunction,isDate:_is.isDate,isRegExp:_is.isRegExp,isObject:_is.isObject,isNull:_is.isNull,isUndefined:_is.isUndefined,isAccessorNode:_is.isAccessorNode,isArrayNode:_is.isArrayNode,isAssignmentNode:_is.isAssignmentNode,isBlockNode:_is.isBlockNode,isConditionalNode:_is.isConditionalNode,isConstantNode:_is.isConstantNode,isFunctionAssignmentNode:_is.isFunctionAssignmentNode,isFunctionNode:_is.isFunctionNode,isIndexNode:_is.isIndexNode,isNode:_is.isNode,isObjectNode:_is.isObjectNode,isOperatorNode:_is.isOperatorNode,isParenthesisNode:_is.isParenthesisNode,isRangeNode:_is.isRangeNode,isSymbolNode:_is.isSymbolNode,isChain:_is.isChain,BigNumber:_pureFunctionsAny.BigNumber,Chain:_impureFunctionsAny.Chain,Complex:_pureFunctionsAny.Complex,Fraction:_pureFunctionsAny.Fraction,Matrix:_pureFunctionsAny.Matrix,DenseMatrix:_pureFunctionsAny.DenseMatrix,SparseMatrix:_pureFunctionsAny.SparseMatrix,Spa:_pureFunctionsAny.Spa,FibonacciHeap:_pureFunctionsAny.FibonacciHeap,ImmutableDenseMatrix:_pureFunctionsAny.ImmutableDenseMatrix,Index:_pureFunctionsAny.Index,Range:_pureFunctionsAny.Range,ResultSet:_pureFunctionsAny.ResultSet,Unit:_pureFunctionsAny.Unit,Help:_impureFunctionsAny.Help,Parser:_impureFunctionsAny.Parser});exports.type=type;var expression=createDeprecatedProperties("expression",{parse:_impureFunctionsAny.parse,Parser:_impureFunctionsAny.Parser,node:createDeprecatedProperties("expression.node",{AccessorNode:_impureFunctionsAny.AccessorNode,ArrayNode:_impureFunctionsAny.ArrayNode,AssignmentNode:_impureFunctionsAny.AssignmentNode,BlockNode:_impureFunctionsAny.BlockNode,ConditionalNode:_impureFunctionsAny.ConditionalNode,ConstantNode:_impureFunctionsAny.ConstantNode,IndexNode:_impureFunctionsAny.IndexNode,FunctionAssignmentNode:_impureFunctionsAny.FunctionAssignmentNode,FunctionNode:_impureFunctionsAny.FunctionNode,Node:_impureFunctionsAny.Node,ObjectNode:_impureFunctionsAny.ObjectNode,OperatorNode:_impureFunctionsAny.OperatorNode,ParenthesisNode:_impureFunctionsAny.ParenthesisNode,RangeNode:_impureFunctionsAny.RangeNode,RelationalNode:_impureFunctionsAny.RelationalNode,SymbolNode:_impureFunctionsAny.SymbolNode})});exports.expression=expression;var json=createDeprecatedProperties("json",{reviver:_impureFunctionsAny.reviver});exports.json=json;var error=createDeprecatedProperties("error",{ArgumentsError:_ArgumentsError.ArgumentsError,DimensionError:_DimensionError.DimensionError,IndexError:_IndexError.IndexError});function createDeprecatedProperties(path,props){var obj={};return Object.keys(props).forEach(function(name){(0,_object.lazy)(obj,name,function(){return(0,_log.warnOnce)("math.".concat(path,".").concat(name," is moved to math.").concat(name," in v6.0.0. ")+"Please use the new location instead."),props[name]})}),obj}exports.error=error},{"../core/function/deprecatedImport":63,"../error/ArgumentsError":398,"../error/DimensionError":399,"../error/IndexError":400,"../expression/function/eval":615,"../function/statistics/variance":828,"../function/utils/typeOf":867,"../utils/is":933,"../utils/log":935,"../utils/object":938,"./impureFunctionsAny.generated":394,"./pureFunctionsAny.generated":396}],394:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"docs",{enumerable:!0,get:function(){return _embeddedDocs.embeddedDocs}}),exports.derivative=exports.help=exports.rationalize=exports.simplify=exports.parser=exports.compile=exports.Help=exports.Parser=exports.evaluate=exports.parse=exports.FunctionNode=exports.SymbolNode=exports.AssignmentNode=exports.IndexNode=exports.AccessorNode=exports.chain=exports.FunctionAssignmentNode=exports.RangeNode=exports.OperatorNode=exports.ConditionalNode=exports.reviver=exports.Chain=exports.RelationalNode=exports.ParenthesisNode=exports.ObjectNode=exports.ConstantNode=exports.BlockNode=exports.ArrayNode=exports.Node=void 0;var _configReadonly=require("./configReadonly"),_factoriesAny=require("../factoriesAny"),_pureFunctionsAny=require("./pureFunctionsAny.generated"),_embeddedDocs=require("../expression/embeddedDocs/embeddedDocs");function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var math={},mathWithTransform={},classes={},Node=(0,_factoriesAny.createNode)({mathWithTransform:mathWithTransform});exports.Node=Node;var ArrayNode=(0,_factoriesAny.createArrayNode)({Node:Node});exports.ArrayNode=ArrayNode;var BlockNode=(0,_factoriesAny.createBlockNode)({Node:Node,ResultSet:_pureFunctionsAny.ResultSet});exports.BlockNode=BlockNode;var ConstantNode=(0,_factoriesAny.createConstantNode)({Node:Node});exports.ConstantNode=ConstantNode;var ObjectNode=(0,_factoriesAny.createObjectNode)({Node:Node});exports.ObjectNode=ObjectNode;var ParenthesisNode=(0,_factoriesAny.createParenthesisNode)({Node:Node});exports.ParenthesisNode=ParenthesisNode;var RelationalNode=(0,_factoriesAny.createRelationalNode)({Node:Node});exports.RelationalNode=RelationalNode;var Chain=(0,_factoriesAny.createChainClass)({math:math});exports.Chain=Chain;var reviver=(0,_factoriesAny.createReviver)({classes:classes});exports.reviver=reviver;var ConditionalNode=(0,_factoriesAny.createConditionalNode)({Node:Node});exports.ConditionalNode=ConditionalNode;var OperatorNode=(0,_factoriesAny.createOperatorNode)({Node:Node});exports.OperatorNode=OperatorNode;var RangeNode=(0,_factoriesAny.createRangeNode)({Node:Node});exports.RangeNode=RangeNode;var FunctionAssignmentNode=(0,_factoriesAny.createFunctionAssignmentNode)({Node:Node,typed:_pureFunctionsAny.typed});exports.FunctionAssignmentNode=FunctionAssignmentNode;var chain=(0,_factoriesAny.createChain)({Chain:Chain,typed:_pureFunctionsAny.typed});exports.chain=chain;var AccessorNode=(0,_factoriesAny.createAccessorNode)({Node:Node,subset:_pureFunctionsAny.subset});exports.AccessorNode=AccessorNode;var IndexNode=(0,_factoriesAny.createIndexNode)({Node:Node,Range:_pureFunctionsAny.Range,size:_pureFunctionsAny.size});exports.IndexNode=IndexNode;var AssignmentNode=(0,_factoriesAny.createAssignmentNode)({matrix:_pureFunctionsAny.matrix,Node:Node,subset:_pureFunctionsAny.subset});exports.AssignmentNode=AssignmentNode;var SymbolNode=(0,_factoriesAny.createSymbolNode)({Unit:_pureFunctionsAny.Unit,Node:Node,math:math});exports.SymbolNode=SymbolNode;var FunctionNode=(0,_factoriesAny.createFunctionNode)({Node:Node,SymbolNode:SymbolNode,math:math});exports.FunctionNode=FunctionNode;var parse=(0,_factoriesAny.createParse)({AccessorNode:AccessorNode,ArrayNode:ArrayNode,AssignmentNode:AssignmentNode,BlockNode:BlockNode,ConditionalNode:ConditionalNode,ConstantNode:ConstantNode,FunctionAssignmentNode:FunctionAssignmentNode,FunctionNode:FunctionNode,IndexNode:IndexNode,ObjectNode:ObjectNode,OperatorNode:OperatorNode,ParenthesisNode:ParenthesisNode,RangeNode:RangeNode,RelationalNode:RelationalNode,SymbolNode:SymbolNode,config:_configReadonly.config,numeric:_pureFunctionsAny.numeric,typed:_pureFunctionsAny.typed});exports.parse=parse;var evaluate=(0,_factoriesAny.createEvaluate)({parse:parse,typed:_pureFunctionsAny.typed});exports.evaluate=evaluate;var Parser=(0,_factoriesAny.createParserClass)({parse:parse});exports.Parser=Parser;var Help=(0,_factoriesAny.createHelpClass)({parse:parse});exports.Help=Help;var compile=(0,_factoriesAny.createCompile)({parse:parse,typed:_pureFunctionsAny.typed});exports.compile=compile;var parser=(0,_factoriesAny.createParser)({Parser:Parser,typed:_pureFunctionsAny.typed});exports.parser=parser;var simplify=(0,_factoriesAny.createSimplify)({bignumber:_pureFunctionsAny.bignumber,fraction:_pureFunctionsAny.fraction,ConstantNode:ConstantNode,FunctionNode:FunctionNode,OperatorNode:OperatorNode,ParenthesisNode:ParenthesisNode,SymbolNode:SymbolNode,add:_pureFunctionsAny.add,config:_configReadonly.config,divide:_pureFunctionsAny.divide,equal:_pureFunctionsAny.equal,isZero:_pureFunctionsAny.isZero,mathWithTransform:mathWithTransform,multiply:_pureFunctionsAny.multiply,parse:parse,pow:_pureFunctionsAny.pow,subtract:_pureFunctionsAny.subtract,typed:_pureFunctionsAny.typed});exports.simplify=simplify;var rationalize=(0,_factoriesAny.createRationalize)({bignumber:_pureFunctionsAny.bignumber,fraction:_pureFunctionsAny.fraction,ConstantNode:ConstantNode,FunctionNode:FunctionNode,OperatorNode:OperatorNode,ParenthesisNode:ParenthesisNode,SymbolNode:SymbolNode,add:_pureFunctionsAny.add,config:_configReadonly.config,divide:_pureFunctionsAny.divide,equal:_pureFunctionsAny.equal,isZero:_pureFunctionsAny.isZero,mathWithTransform:mathWithTransform,multiply:_pureFunctionsAny.multiply,parse:parse,pow:_pureFunctionsAny.pow,simplify:simplify,subtract:_pureFunctionsAny.subtract,typed:_pureFunctionsAny.typed});exports.rationalize=rationalize;var help=(0,_factoriesAny.createHelp)({Help:Help,mathWithTransform:mathWithTransform,typed:_pureFunctionsAny.typed});exports.help=help;var derivative=(0,_factoriesAny.createDerivative)({ConstantNode:ConstantNode,FunctionNode:FunctionNode,OperatorNode:OperatorNode,ParenthesisNode:ParenthesisNode,SymbolNode:SymbolNode,config:_configReadonly.config,equal:_pureFunctionsAny.equal,isZero:_pureFunctionsAny.isZero,numeric:_pureFunctionsAny.numeric,parse:parse,simplify:simplify,typed:_pureFunctionsAny.typed});exports.derivative=derivative,_extends(math,{typeof:_pureFunctionsAny.typeOf,eye:_pureFunctionsAny.eye,reviver:reviver,false:_pureFunctionsAny._false,null:_pureFunctionsAny._null,true:_pureFunctionsAny._true,replacer:_pureFunctionsAny.replacer,i:_pureFunctionsAny.i,LN10:_pureFunctionsAny.LN10,LOG10E:_pureFunctionsAny.LOG10E,NaN:_pureFunctionsAny._NaN,pi:_pureFunctionsAny.pi,SQRT1_2:_pureFunctionsAny.SQRT1_2,tau:_pureFunctionsAny.tau,efimovFactor:_pureFunctionsAny.efimovFactor,fineStructure:_pureFunctionsAny.fineStructure,sackurTetrode:_pureFunctionsAny.sackurTetrode,weakMixingAngle:_pureFunctionsAny.weakMixingAngle,e:_pureFunctionsAny.e,Infinity:_pureFunctionsAny._Infinity,LOG2E:_pureFunctionsAny.LOG2E,PI:_pureFunctionsAny.pi,version:_pureFunctionsAny.version,E:_pureFunctionsAny.e,phi:_pureFunctionsAny.phi,typed:_pureFunctionsAny.typed,isInteger:_pureFunctionsAny.isInteger,isNumeric:_pureFunctionsAny.isNumeric,isPositive:_pureFunctionsAny.isPositive,isNaN:_pureFunctionsAny.isNaN,equalScalar:_pureFunctionsAny.equalScalar,number:_pureFunctionsAny.number,boolean:_pureFunctionsAny.boolean,complex:_pureFunctionsAny.complex,splitUnit:_pureFunctionsAny.splitUnit,unaryPlus:_pureFunctionsAny.unaryPlus,apply:_pureFunctionsAny.apply,cube:_pureFunctionsAny.cube,expm1:_pureFunctionsAny.expm1,log10:_pureFunctionsAny.log10,multiplyScalar:_pureFunctionsAny.multiplyScalar,sign:_pureFunctionsAny.sign,square:_pureFunctionsAny.square,bitNot:_pureFunctionsAny.bitNot,arg:_pureFunctionsAny.arg,im:_pureFunctionsAny.im,not:_pureFunctionsAny.not,filter:_pureFunctionsAny.filter,forEach:_pureFunctionsAny.forEach,map:_pureFunctionsAny.map,erf:_pureFunctionsAny.erf,format:_pureFunctionsAny.format,isPrime:_pureFunctionsAny.isPrime,acos:_pureFunctionsAny.acos,acot:_pureFunctionsAny.acot,acsc:_pureFunctionsAny.acsc,asec:_pureFunctionsAny.asec,asin:_pureFunctionsAny.asin,atan:_pureFunctionsAny.atan,atanh:_pureFunctionsAny.atanh,cosh:_pureFunctionsAny.cosh,coth:_pureFunctionsAny.coth,csch:_pureFunctionsAny.csch,sech:_pureFunctionsAny.sech,sinh:_pureFunctionsAny.sinh,tanh:_pureFunctionsAny.tanh,chain:chain,combinations:_pureFunctionsAny.combinations,pickRandom:_pureFunctionsAny.pickRandom,randomInt:_pureFunctionsAny.randomInt,LN2:_pureFunctionsAny.LN2,clone:_pureFunctionsAny.clone,hasNumericValue:_pureFunctionsAny.hasNumericValue,typeOf:_pureFunctionsAny.typeOf,string:_pureFunctionsAny.string,fraction:_pureFunctionsAny.fraction,unaryMinus:_pureFunctionsAny.unaryMinus,addScalar:_pureFunctionsAny.addScalar,exp:_pureFunctionsAny.exp,log2:_pureFunctionsAny.log2,sqrt:_pureFunctionsAny.sqrt,conj:_pureFunctionsAny.conj,getMatrixDataType:_pureFunctionsAny.getMatrixDataType,mode:_pureFunctionsAny.mode,print:_pureFunctionsAny.print,acosh:_pureFunctionsAny.acosh,acsch:_pureFunctionsAny.acsch,asinh:_pureFunctionsAny.asinh,cos:_pureFunctionsAny.cos,csc:_pureFunctionsAny.csc,sin:_pureFunctionsAny.sin,combinationsWithRep:_pureFunctionsAny.combinationsWithRep,random:_pureFunctionsAny.random,SQRT2:_pureFunctionsAny.SQRT2,isNegative:_pureFunctionsAny.isNegative,matrix:_pureFunctionsAny.matrix,cbrt:_pureFunctionsAny.cbrt,gcd:_pureFunctionsAny.gcd,mod:_pureFunctionsAny.mod,nthRoot:_pureFunctionsAny.nthRoot,xgcd:_pureFunctionsAny.xgcd,bitAnd:_pureFunctionsAny.bitAnd,bitXor:_pureFunctionsAny.bitXor,or:_pureFunctionsAny.or,concat:_pureFunctionsAny.concat,diag:_pureFunctionsAny.diag,identity:_pureFunctionsAny.identity,ones:_pureFunctionsAny.ones,reshape:_pureFunctionsAny.reshape,size:_pureFunctionsAny.size,subset:_pureFunctionsAny.subset,zeros:_pureFunctionsAny.zeros,to:_pureFunctionsAny.to,round:_pureFunctionsAny.round,leftShift:_pureFunctionsAny.leftShift,rightLogShift:_pureFunctionsAny.rightLogShift,compare:_pureFunctionsAny.compare,compareText:_pureFunctionsAny.compareText,smaller:_pureFunctionsAny.smaller,larger:_pureFunctionsAny.larger,unequal:_pureFunctionsAny.unequal,max:_pureFunctionsAny.max,sparse:_pureFunctionsAny.sparse,acoth:_pureFunctionsAny.acoth,atan2:_pureFunctionsAny.atan2,sec:_pureFunctionsAny.sec,add:_pureFunctionsAny.add,trace:_pureFunctionsAny.trace,composition:_pureFunctionsAny.composition,isZero:_pureFunctionsAny.isZero,abs:_pureFunctionsAny.abs,floor:_pureFunctionsAny.floor,multiply:_pureFunctionsAny.multiply,dotMultiply:_pureFunctionsAny.dotMultiply,re:_pureFunctionsAny.re,flatten:_pureFunctionsAny.flatten,resize:_pureFunctionsAny.resize,squeeze:_pureFunctionsAny.squeeze,prod:_pureFunctionsAny.prod,pow:_pureFunctionsAny.pow,dotPow:_pureFunctionsAny.dotPow,rightArithShift:_pureFunctionsAny.rightArithShift,compareNatural:_pureFunctionsAny.compareNatural,equalText:_pureFunctionsAny.equalText,largerEq:_pureFunctionsAny.largerEq,partitionSelect:_pureFunctionsAny.partitionSelect,min:_pureFunctionsAny.min,asech:_pureFunctionsAny.asech,tan:_pureFunctionsAny.tan,setSize:_pureFunctionsAny.setSize,norm:_pureFunctionsAny.norm,quantileSeq:_pureFunctionsAny.quantileSeq,gamma:_pureFunctionsAny.gamma,bignumber:_pureFunctionsAny.bignumber,lcm:_pureFunctionsAny.lcm,bitOr:_pureFunctionsAny.bitOr,kron:_pureFunctionsAny.kron,transpose:_pureFunctionsAny.transpose,numeric:_pureFunctionsAny.numeric,and:_pureFunctionsAny.and,smallerEq:_pureFunctionsAny.smallerEq,sort:_pureFunctionsAny.sort,cot:_pureFunctionsAny.cot,dot:_pureFunctionsAny.dot,sum:_pureFunctionsAny.sum,factorial:_pureFunctionsAny.factorial,permutations:_pureFunctionsAny.permutations,ceil:_pureFunctionsAny.ceil,subtract:_pureFunctionsAny.subtract,cross:_pureFunctionsAny.cross,ctranspose:_pureFunctionsAny.ctranspose,equal:_pureFunctionsAny.equal,setCartesian:_pureFunctionsAny.setCartesian,setDistinct:_pureFunctionsAny.setDistinct,setIsSubset:_pureFunctionsAny.setIsSubset,setPowerset:_pureFunctionsAny.setPowerset,index:_pureFunctionsAny.index,fix:_pureFunctionsAny.fix,range:_pureFunctionsAny.range,divideScalar:_pureFunctionsAny.divideScalar,nthRoots:_pureFunctionsAny.nthRoots,lsolve:_pureFunctionsAny.lsolve,deepEqual:_pureFunctionsAny.deepEqual,setDifference:_pureFunctionsAny.setDifference,setMultiplicity:_pureFunctionsAny.setMultiplicity,hypot:_pureFunctionsAny.hypot,lup:_pureFunctionsAny.lup,slu:_pureFunctionsAny.slu,det:_pureFunctionsAny.det,distance:_pureFunctionsAny.distance,stirlingS2:_pureFunctionsAny.stirlingS2,catalan:_pureFunctionsAny.catalan,xor:_pureFunctionsAny.xor,row:_pureFunctionsAny.row,dotDivide:_pureFunctionsAny.dotDivide,createUnit:_pureFunctionsAny.createUnit,setSymDifference:_pureFunctionsAny.setSymDifference,qr:_pureFunctionsAny.qr,inv:_pureFunctionsAny.inv,expm:_pureFunctionsAny.expm,divide:_pureFunctionsAny.divide,mean:_pureFunctionsAny.mean,variance:_pureFunctionsAny.variance,std:_pureFunctionsAny.std,multinomial:_pureFunctionsAny.multinomial,atomicMass:_pureFunctionsAny.atomicMass,bohrMagneton:_pureFunctionsAny.bohrMagneton,boltzmann:_pureFunctionsAny.boltzmann,conductanceQuantum:_pureFunctionsAny.conductanceQuantum,deuteronMass:_pureFunctionsAny.deuteronMass,electronMass:_pureFunctionsAny.electronMass,faraday:_pureFunctionsAny.faraday,firstRadiation:_pureFunctionsAny.firstRadiation,gravitationConstant:_pureFunctionsAny.gravitationConstant,hartreeEnergy:_pureFunctionsAny.hartreeEnergy,klitzing:_pureFunctionsAny.klitzing,magneticConstant:_pureFunctionsAny.magneticConstant,molarMass:_pureFunctionsAny.molarMass,molarPlanckConstant:_pureFunctionsAny.molarPlanckConstant,neutronMass:_pureFunctionsAny.neutronMass,planckCharge:_pureFunctionsAny.planckCharge,planckLength:_pureFunctionsAny.planckLength,planckTemperature:_pureFunctionsAny.planckTemperature,protonMass:_pureFunctionsAny.protonMass,reducedPlanckConstant:_pureFunctionsAny.reducedPlanckConstant,secondRadiation:_pureFunctionsAny.secondRadiation,stefanBoltzmann:_pureFunctionsAny.stefanBoltzmann,vacuumImpedance:_pureFunctionsAny.vacuumImpedance,column:_pureFunctionsAny.column,usolve:_pureFunctionsAny.usolve,setIntersect:_pureFunctionsAny.setIntersect,lusolve:_pureFunctionsAny.lusolve,eigs:_pureFunctionsAny.eigs,intersect:_pureFunctionsAny.intersect,var:_pureFunctionsAny.variance,bellNumbers:_pureFunctionsAny.bellNumbers,avogadro:_pureFunctionsAny.avogadro,classicalElectronRadius:_pureFunctionsAny.classicalElectronRadius,electricConstant:_pureFunctionsAny.electricConstant,fermiCoupling:_pureFunctionsAny.fermiCoupling,gravity:_pureFunctionsAny.gravity,loschmidt:_pureFunctionsAny.loschmidt,molarMassC12:_pureFunctionsAny.molarMassC12,nuclearMagneton:_pureFunctionsAny.nuclearMagneton,planckMass:_pureFunctionsAny.planckMass,quantumOfCirculation:_pureFunctionsAny.quantumOfCirculation,speedOfLight:_pureFunctionsAny.speedOfLight,wienDisplacement:_pureFunctionsAny.wienDisplacement,log:_pureFunctionsAny.log,unit:_pureFunctionsAny.unit,parse:parse,evaluate:evaluate,sqrtm:_pureFunctionsAny.sqrtm,kldivergence:_pureFunctionsAny.kldivergence,bohrRadius:_pureFunctionsAny.bohrRadius,elementaryCharge:_pureFunctionsAny.elementaryCharge,inverseConductanceQuantum:_pureFunctionsAny.inverseConductanceQuantum,molarVolume:_pureFunctionsAny.molarVolume,planckTime:_pureFunctionsAny.planckTime,thomsonCrossSection:_pureFunctionsAny.thomsonCrossSection,log1p:_pureFunctionsAny.log1p,compile:compile,parser:parser,median:_pureFunctionsAny.median,simplify:simplify,rationalize:rationalize,gasConstant:_pureFunctionsAny.gasConstant,planckConstant:_pureFunctionsAny.planckConstant,setUnion:_pureFunctionsAny.setUnion,help:help,derivative:derivative,magneticFluxQuantum:_pureFunctionsAny.magneticFluxQuantum,eval:evaluate,coulomb:_pureFunctionsAny.coulomb,mad:_pureFunctionsAny.mad,rydberg:_pureFunctionsAny.rydberg,config:_configReadonly.config}),_extends(mathWithTransform,math,{apply:(0,_factoriesAny.createApplyTransform)({isInteger:_pureFunctionsAny.isInteger,typed:_pureFunctionsAny.typed}),filter:(0,_factoriesAny.createFilterTransform)({typed:_pureFunctionsAny.typed}),map:(0,_factoriesAny.createMapTransform)({typed:_pureFunctionsAny.typed}),forEach:(0,_factoriesAny.createForEachTransform)({typed:_pureFunctionsAny.typed}),max:(0,_factoriesAny.createMaxTransform)({larger:_pureFunctionsAny.larger,typed:_pureFunctionsAny.typed}),min:(0,_factoriesAny.createMinTransform)({smaller:_pureFunctionsAny.smaller,typed:_pureFunctionsAny.typed}),subset:(0,_factoriesAny.createSubsetTransform)({matrix:_pureFunctionsAny.matrix,typed:_pureFunctionsAny.typed}),concat:(0,_factoriesAny.createConcatTransform)({isInteger:_pureFunctionsAny.isInteger,matrix:_pureFunctionsAny.matrix,typed:_pureFunctionsAny.typed}),range:(0,_factoriesAny.createRangeTransform)({bignumber:_pureFunctionsAny.bignumber,matrix:_pureFunctionsAny.matrix,config:_configReadonly.config,larger:_pureFunctionsAny.larger,largerEq:_pureFunctionsAny.largerEq,smaller:_pureFunctionsAny.smaller,smallerEq:_pureFunctionsAny.smallerEq,typed:_pureFunctionsAny.typed}),sum:(0,_factoriesAny.createSumTransform)({bignumber:_pureFunctionsAny.bignumber,fraction:_pureFunctionsAny.fraction,add:_pureFunctionsAny.add,config:_configReadonly.config,typed:_pureFunctionsAny.typed}),index:(0,_factoriesAny.createIndexTransform)({Index:_pureFunctionsAny.Index}),column:(0,_factoriesAny.createColumnTransform)({Index:_pureFunctionsAny.Index,matrix:_pureFunctionsAny.matrix,range:_pureFunctionsAny.range,typed:_pureFunctionsAny.typed}),row:(0,_factoriesAny.createRowTransform)({Index:_pureFunctionsAny.Index,matrix:_pureFunctionsAny.matrix,range:_pureFunctionsAny.range,typed:_pureFunctionsAny.typed}),mean:(0,_factoriesAny.createMeanTransform)({add:_pureFunctionsAny.add,divide:_pureFunctionsAny.divide,typed:_pureFunctionsAny.typed}),variance:(0,_factoriesAny.createVarianceTransform)({add:_pureFunctionsAny.add,apply:_pureFunctionsAny.apply,divide:_pureFunctionsAny.divide,isNaN:_pureFunctionsAny.isNaN,multiply:_pureFunctionsAny.multiply,subtract:_pureFunctionsAny.subtract,typed:_pureFunctionsAny.typed}),std:(0,_factoriesAny.createStdTransform)({sqrt:_pureFunctionsAny.sqrt,typed:_pureFunctionsAny.typed,variance:_pureFunctionsAny.variance})}),_extends(classes,{ResultSet:_pureFunctionsAny.ResultSet,Complex:_pureFunctionsAny.Complex,Range:_pureFunctionsAny.Range,Node:Node,ArrayNode:ArrayNode,BlockNode:BlockNode,ConstantNode:ConstantNode,ObjectNode:ObjectNode,ParenthesisNode:ParenthesisNode,RelationalNode:RelationalNode,Chain:Chain,BigNumber:_pureFunctionsAny.BigNumber,Matrix:_pureFunctionsAny.Matrix,ConditionalNode:ConditionalNode,OperatorNode:OperatorNode,Fraction:_pureFunctionsAny.Fraction,RangeNode:RangeNode,DenseMatrix:_pureFunctionsAny.DenseMatrix,FunctionAssignmentNode:FunctionAssignmentNode,SparseMatrix:_pureFunctionsAny.SparseMatrix,ImmutableDenseMatrix:_pureFunctionsAny.ImmutableDenseMatrix,FibonacciHeap:_pureFunctionsAny.FibonacciHeap,AccessorNode:AccessorNode,IndexNode:IndexNode,Spa:_pureFunctionsAny.Spa,AssignmentNode:AssignmentNode,Index:_pureFunctionsAny.Index,Unit:_pureFunctionsAny.Unit,SymbolNode:SymbolNode,FunctionNode:FunctionNode,Parser:Parser,Help:Help}),Chain.createProxy(math)},{"../expression/embeddedDocs/embeddedDocs":435,"../factoriesAny":658,"./configReadonly":67,"./pureFunctionsAny.generated":396}],395:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={config:!0,IndexError:!0,DimensionError:!0,ArgumentsError:!0,create:!0,factory:!0};Object.defineProperty(exports,"config",{enumerable:!0,get:function(){return _configReadonly.config}}),Object.defineProperty(exports,"IndexError",{enumerable:!0,get:function(){return _IndexError.IndexError}}),Object.defineProperty(exports,"DimensionError",{enumerable:!0,get:function(){return _DimensionError.DimensionError}}),Object.defineProperty(exports,"ArgumentsError",{enumerable:!0,get:function(){return _ArgumentsError.ArgumentsError}}),Object.defineProperty(exports,"create",{enumerable:!0,get:function(){return _create.create}}),Object.defineProperty(exports,"factory",{enumerable:!0,get:function(){return _factory.factory}});var _configReadonly=require("./configReadonly"),_pureFunctionsAny=require("./pureFunctionsAny.generated");Object.keys(_pureFunctionsAny).forEach(function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _pureFunctionsAny[key]}}))});var _impureFunctionsAny=require("./impureFunctionsAny.generated");Object.keys(_impureFunctionsAny).forEach(function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _impureFunctionsAny[key]}}))});var _typeChecks=require("./typeChecks");Object.keys(_typeChecks).forEach(function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _typeChecks[key]}}))});var _IndexError=require("../error/IndexError"),_DimensionError=require("../error/DimensionError"),_ArgumentsError=require("../error/ArgumentsError"),_dependenciesAny=require("./dependenciesAny.generated");Object.keys(_dependenciesAny).forEach(function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _dependenciesAny[key]}}))});var _factoriesAny=require("../factoriesAny");Object.keys(_factoriesAny).forEach(function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _factoriesAny[key]}}))});var _create=require("../core/create"),_factory=require("../utils/factory"),_deprecatedAny=require("./deprecatedAny");Object.keys(_deprecatedAny).forEach(function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _deprecatedAny[key]}}))}),exports.var=exports.deprecatedVar,exports.typeof=exports.deprecatedTypeof,exports.eval=exports.deprecatedEval,exports.import=exports.deprecatedImport},{"../core/create":61,"../error/ArgumentsError":398,"../error/DimensionError":399,"../error/IndexError":400,"../factoriesAny":658,"../utils/factory":931,"./configReadonly":67,"./dependenciesAny.generated":68,"./deprecatedAny":393,"./impureFunctionsAny.generated":394,"./pureFunctionsAny.generated":396,"./typeChecks":397}],396:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cbrt=exports.matrix=exports.SparseMatrix=exports.isNegative=exports.SQRT2=exports.random=exports.combinationsWithRep=exports.sin=exports.csc=exports.cos=exports.asinh=exports.acsch=exports.acosh=exports.print=exports.mode=exports.getMatrixDataType=exports.conj=exports.sqrt=exports.log2=exports.exp=exports.addScalar=exports.unaryMinus=exports.fraction=exports.string=exports.typeOf=exports.hasNumericValue=exports.clone=exports.LN2=exports.randomInt=exports.pickRandom=exports.combinations=exports.tanh=exports.sinh=exports.sech=exports.csch=exports.coth=exports.cosh=exports.atanh=exports.atan=exports.asin=exports.asec=exports.acsc=exports.acot=exports.acos=exports.isPrime=exports.format=exports.erf=exports.map=exports.forEach=exports.filter=exports.not=exports.im=exports.arg=exports.bitNot=exports.square=exports.sign=exports.multiplyScalar=exports.log10=exports.expm1=exports.cube=exports.apply=exports.unaryPlus=exports.splitUnit=exports.complex=exports.boolean=exports.number=exports.equalScalar=exports.isNaN=exports.isPositive=exports.isNumeric=exports.isInteger=exports.typed=exports.phi=exports.DenseMatrix=exports.version=exports.LOG2E=exports._Infinity=exports.e=exports.Fraction=exports.weakMixingAngle=exports.sackurTetrode=exports.fineStructure=exports.efimovFactor=exports.tau=exports.SQRT1_2=exports.pi=exports._NaN=exports.LOG10E=exports.LN10=exports.i=exports.replacer=exports.Matrix=exports.BigNumber=exports._true=exports._null=exports._false=exports.eye=exports.Range=exports.Complex=exports.ResultSet=void 0,exports.xor=exports.catalan=exports.stirlingS2=exports.distance=exports.det=exports.slu=exports.lup=exports.hypot=exports.setMultiplicity=exports.setDifference=exports.deepEqual=exports.lsolve=exports.nthRoots=exports.divideScalar=exports.range=exports.fix=exports.index=exports.setPowerset=exports.setIsSubset=exports.setDistinct=exports.setCartesian=exports.Index=exports.equal=exports.ctranspose=exports.cross=exports.subtract=exports.ceil=exports.permutations=exports.factorial=exports.sum=exports.dot=exports.cot=exports.sort=exports.smallerEq=exports.and=exports.numeric=exports.transpose=exports.kron=exports.bitOr=exports.lcm=exports.bignumber=exports.gamma=exports.quantileSeq=exports.norm=exports.setSize=exports.tan=exports.asech=exports.Spa=exports.min=exports.partitionSelect=exports.largerEq=exports.equalText=exports.compareNatural=exports.rightArithShift=exports.dotPow=exports.pow=exports.prod=exports.squeeze=exports.resize=exports.flatten=exports.re=exports.dotMultiply=exports.multiply=exports.floor=exports.abs=exports.isZero=exports.composition=exports.trace=exports.add=exports.sec=exports.atan2=exports.acoth=exports.sparse=exports.FibonacciHeap=exports.ImmutableDenseMatrix=exports.max=exports.unequal=exports.larger=exports.smaller=exports.compareText=exports.compare=exports.rightLogShift=exports.leftShift=exports.round=exports.to=exports.zeros=exports.subset=exports.size=exports.reshape=exports.ones=exports.identity=exports.diag=exports.concat=exports.or=exports.bitXor=exports.bitAnd=exports.xgcd=exports.nthRoot=exports.mod=exports.gcd=void 0,exports.rydberg=exports.mad=exports.coulomb=exports.magneticFluxQuantum=exports.setUnion=exports.planckConstant=exports.gasConstant=exports.median=exports.log1p=exports.thomsonCrossSection=exports.planckTime=exports.molarVolume=exports.inverseConductanceQuantum=exports.elementaryCharge=exports.bohrRadius=exports.kldivergence=exports.sqrtm=exports.unit=exports.log=exports.wienDisplacement=exports.speedOfLight=exports.quantumOfCirculation=exports.planckMass=exports.nuclearMagneton=exports.molarMassC12=exports.loschmidt=exports.gravity=exports.fermiCoupling=exports.electricConstant=exports.classicalElectronRadius=exports.avogadro=exports.bellNumbers=exports.intersect=exports.eigs=exports.lusolve=exports.setIntersect=exports.usolve=exports.column=exports.vacuumImpedance=exports.stefanBoltzmann=exports.secondRadiation=exports.reducedPlanckConstant=exports.protonMass=exports.planckTemperature=exports.planckLength=exports.planckCharge=exports.neutronMass=exports.molarPlanckConstant=exports.molarMass=exports.magneticConstant=exports.klitzing=exports.hartreeEnergy=exports.gravitationConstant=exports.firstRadiation=exports.faraday=exports.electronMass=exports.deuteronMass=exports.conductanceQuantum=exports.boltzmann=exports.bohrMagneton=exports.atomicMass=exports.multinomial=exports.std=exports.variance=exports.mean=exports.divide=exports.expm=exports.inv=exports.qr=exports.setSymDifference=exports.createUnit=exports.Unit=exports.dotDivide=exports.row=void 0;var _configReadonly=require("./configReadonly"),_factoriesAny=require("../factoriesAny"),ResultSet=(0,_factoriesAny.createResultSet)({});exports.ResultSet=ResultSet;var Complex=(0,_factoriesAny.createComplexClass)({});exports.Complex=Complex;var Range=(0,_factoriesAny.createRangeClass)({});exports.Range=Range;var eye=(0,_factoriesAny.createEye)({});exports.eye=eye;var _false=(0,_factoriesAny.createFalse)({});exports._false=_false;var _null=(0,_factoriesAny.createNull)({});exports._null=_null;var _true=(0,_factoriesAny.createTrue)({});exports._true=_true;var BigNumber=(0,_factoriesAny.createBigNumberClass)({config:_configReadonly.config});exports.BigNumber=BigNumber;var Matrix=(0,_factoriesAny.createMatrixClass)({});exports.Matrix=Matrix;var replacer=(0,_factoriesAny.createReplacer)({});exports.replacer=replacer;var i=(0,_factoriesAny.createI)({Complex:Complex});exports.i=i;var LN10=(0,_factoriesAny.createLN10)({BigNumber:BigNumber,config:_configReadonly.config});exports.LN10=LN10;var LOG10E=(0,_factoriesAny.createLOG10E)({BigNumber:BigNumber,config:_configReadonly.config});exports.LOG10E=LOG10E;var _NaN=(0,_factoriesAny.createNaN)({BigNumber:BigNumber,config:_configReadonly.config});exports._NaN=_NaN;var pi=(0,_factoriesAny.createPi)({BigNumber:BigNumber,config:_configReadonly.config});exports.pi=pi;var SQRT1_2=(0,_factoriesAny.createSQRT1_2)({BigNumber:BigNumber,config:_configReadonly.config});exports.SQRT1_2=SQRT1_2;var tau=(0,_factoriesAny.createTau)({BigNumber:BigNumber,config:_configReadonly.config});exports.tau=tau;var efimovFactor=(0,_factoriesAny.createEfimovFactor)({BigNumber:BigNumber,config:_configReadonly.config});exports.efimovFactor=efimovFactor;var fineStructure=(0,_factoriesAny.createFineStructure)({BigNumber:BigNumber,config:_configReadonly.config});exports.fineStructure=fineStructure;var sackurTetrode=(0,_factoriesAny.createSackurTetrode)({BigNumber:BigNumber,config:_configReadonly.config});exports.sackurTetrode=sackurTetrode;var weakMixingAngle=(0,_factoriesAny.createWeakMixingAngle)({BigNumber:BigNumber,config:_configReadonly.config});exports.weakMixingAngle=weakMixingAngle;var Fraction=(0,_factoriesAny.createFractionClass)({});exports.Fraction=Fraction;var e=(0,_factoriesAny.createE)({BigNumber:BigNumber,config:_configReadonly.config});exports.e=e;var _Infinity=(0,_factoriesAny.createInfinity)({BigNumber:BigNumber,config:_configReadonly.config});exports._Infinity=_Infinity;var LOG2E=(0,_factoriesAny.createLOG2E)({BigNumber:BigNumber,config:_configReadonly.config});exports.LOG2E=LOG2E;var version=(0,_factoriesAny.createVersion)({});exports.version=version;var DenseMatrix=(0,_factoriesAny.createDenseMatrixClass)({Matrix:Matrix});exports.DenseMatrix=DenseMatrix;var phi=(0,_factoriesAny.createPhi)({BigNumber:BigNumber,config:_configReadonly.config});exports.phi=phi;var typed=(0,_factoriesAny.createTyped)({BigNumber:BigNumber,Complex:Complex,DenseMatrix:DenseMatrix,Fraction:Fraction});exports.typed=typed;var isInteger=(0,_factoriesAny.createIsInteger)({typed:typed});exports.isInteger=isInteger;var isNumeric=(0,_factoriesAny.createIsNumeric)({typed:typed});exports.isNumeric=isNumeric;var isPositive=(0,_factoriesAny.createIsPositive)({typed:typed});exports.isPositive=isPositive;var isNaN=(0,_factoriesAny.createIsNaN)({typed:typed});exports.isNaN=isNaN;var equalScalar=(0,_factoriesAny.createEqualScalar)({config:_configReadonly.config,typed:typed});exports.equalScalar=equalScalar;var number=(0,_factoriesAny.createNumber)({typed:typed});exports.number=number;var _boolean=(0,_factoriesAny.createBoolean)({typed:typed});exports.boolean=_boolean;var complex=(0,_factoriesAny.createComplex)({Complex:Complex,typed:typed});exports.complex=complex;var splitUnit=(0,_factoriesAny.createSplitUnit)({typed:typed});exports.splitUnit=splitUnit;var unaryPlus=(0,_factoriesAny.createUnaryPlus)({BigNumber:BigNumber,config:_configReadonly.config,typed:typed});exports.unaryPlus=unaryPlus;var apply=(0,_factoriesAny.createApply)({isInteger:isInteger,typed:typed});exports.apply=apply;var cube=(0,_factoriesAny.createCube)({typed:typed});exports.cube=cube;var expm1=(0,_factoriesAny.createExpm1)({Complex:Complex,typed:typed});exports.expm1=expm1;var log10=(0,_factoriesAny.createLog10)({Complex:Complex,config:_configReadonly.config,typed:typed});exports.log10=log10;var multiplyScalar=(0,_factoriesAny.createMultiplyScalar)({typed:typed});exports.multiplyScalar=multiplyScalar;var sign=(0,_factoriesAny.createSign)({BigNumber:BigNumber,Fraction:Fraction,complex:complex,typed:typed});exports.sign=sign;var square=(0,_factoriesAny.createSquare)({typed:typed});exports.square=square;var bitNot=(0,_factoriesAny.createBitNot)({typed:typed});exports.bitNot=bitNot;var arg=(0,_factoriesAny.createArg)({typed:typed});exports.arg=arg;var im=(0,_factoriesAny.createIm)({typed:typed});exports.im=im;var not=(0,_factoriesAny.createNot)({typed:typed});exports.not=not;var filter=(0,_factoriesAny.createFilter)({typed:typed});exports.filter=filter;var forEach=(0,_factoriesAny.createForEach)({typed:typed});exports.forEach=forEach;var map=(0,_factoriesAny.createMap)({typed:typed});exports.map=map;var erf=(0,_factoriesAny.createErf)({typed:typed});exports.erf=erf;var format=(0,_factoriesAny.createFormat)({typed:typed});exports.format=format;var isPrime=(0,_factoriesAny.createIsPrime)({typed:typed});exports.isPrime=isPrime;var acos=(0,_factoriesAny.createAcos)({Complex:Complex,config:_configReadonly.config,typed:typed});exports.acos=acos;var acot=(0,_factoriesAny.createAcot)({BigNumber:BigNumber,typed:typed});exports.acot=acot;var acsc=(0,_factoriesAny.createAcsc)({BigNumber:BigNumber,Complex:Complex,config:_configReadonly.config,typed:typed});exports.acsc=acsc;var asec=(0,_factoriesAny.createAsec)({BigNumber:BigNumber,Complex:Complex,config:_configReadonly.config,typed:typed});exports.asec=asec;var asin=(0,_factoriesAny.createAsin)({Complex:Complex,config:_configReadonly.config,typed:typed});exports.asin=asin;var atan=(0,_factoriesAny.createAtan)({typed:typed});exports.atan=atan;var atanh=(0,_factoriesAny.createAtanh)({Complex:Complex,config:_configReadonly.config,typed:typed});exports.atanh=atanh;var cosh=(0,_factoriesAny.createCosh)({typed:typed});exports.cosh=cosh;var coth=(0,_factoriesAny.createCoth)({BigNumber:BigNumber,typed:typed});exports.coth=coth;var csch=(0,_factoriesAny.createCsch)({BigNumber:BigNumber,typed:typed});exports.csch=csch;var sech=(0,_factoriesAny.createSech)({BigNumber:BigNumber,typed:typed});exports.sech=sech;var sinh=(0,_factoriesAny.createSinh)({typed:typed});exports.sinh=sinh;var tanh=(0,_factoriesAny.createTanh)({typed:typed});exports.tanh=tanh;var combinations=(0,_factoriesAny.createCombinations)({typed:typed});exports.combinations=combinations;var pickRandom=(0,_factoriesAny.createPickRandom)({config:_configReadonly.config,typed:typed});exports.pickRandom=pickRandom;var randomInt=(0,_factoriesAny.createRandomInt)({config:_configReadonly.config,typed:typed});exports.randomInt=randomInt;var LN2=(0,_factoriesAny.createLN2)({BigNumber:BigNumber,config:_configReadonly.config});exports.LN2=LN2;var clone=(0,_factoriesAny.createClone)({typed:typed});exports.clone=clone;var hasNumericValue=(0,_factoriesAny.createHasNumericValue)({isNumeric:isNumeric,typed:typed});exports.hasNumericValue=hasNumericValue;var typeOf=(0,_factoriesAny.createTypeOf)({typed:typed});exports.typeOf=typeOf;var string=(0,_factoriesAny.createString)({typed:typed});exports.string=string;var fraction=(0,_factoriesAny.createFraction)({Fraction:Fraction,typed:typed});exports.fraction=fraction;var unaryMinus=(0,_factoriesAny.createUnaryMinus)({typed:typed});exports.unaryMinus=unaryMinus;var addScalar=(0,_factoriesAny.createAddScalar)({typed:typed});exports.addScalar=addScalar;var exp=(0,_factoriesAny.createExp)({typed:typed});exports.exp=exp;var log2=(0,_factoriesAny.createLog2)({Complex:Complex,config:_configReadonly.config,typed:typed});exports.log2=log2;var sqrt=(0,_factoriesAny.createSqrt)({Complex:Complex,config:_configReadonly.config,typed:typed});exports.sqrt=sqrt;var conj=(0,_factoriesAny.createConj)({typed:typed});exports.conj=conj;var getMatrixDataType=(0,_factoriesAny.createGetMatrixDataType)({typed:typed});exports.getMatrixDataType=getMatrixDataType;var mode=(0,_factoriesAny.createMode)({isNaN:isNaN,isNumeric:isNumeric,typed:typed});exports.mode=mode;var print=(0,_factoriesAny.createPrint)({typed:typed});exports.print=print;var acosh=(0,_factoriesAny.createAcosh)({Complex:Complex,config:_configReadonly.config,typed:typed});exports.acosh=acosh;var acsch=(0,_factoriesAny.createAcsch)({BigNumber:BigNumber,typed:typed});exports.acsch=acsch;var asinh=(0,_factoriesAny.createAsinh)({typed:typed});exports.asinh=asinh;var cos=(0,_factoriesAny.createCos)({typed:typed});exports.cos=cos;var csc=(0,_factoriesAny.createCsc)({BigNumber:BigNumber,typed:typed});exports.csc=csc;var sin=(0,_factoriesAny.createSin)({typed:typed});exports.sin=sin;var combinationsWithRep=(0,_factoriesAny.createCombinationsWithRep)({typed:typed});exports.combinationsWithRep=combinationsWithRep;var random=(0,_factoriesAny.createRandom)({config:_configReadonly.config,typed:typed});exports.random=random;var SQRT2=(0,_factoriesAny.createSQRT2)({BigNumber:BigNumber,config:_configReadonly.config});exports.SQRT2=SQRT2;var isNegative=(0,_factoriesAny.createIsNegative)({typed:typed});exports.isNegative=isNegative;var SparseMatrix=(0,_factoriesAny.createSparseMatrixClass)({Matrix:Matrix,equalScalar:equalScalar,typed:typed});exports.SparseMatrix=SparseMatrix;var matrix=(0,_factoriesAny.createMatrix)({DenseMatrix:DenseMatrix,Matrix:Matrix,SparseMatrix:SparseMatrix,typed:typed});exports.matrix=matrix;var cbrt=(0,_factoriesAny.createCbrt)({BigNumber:BigNumber,Complex:Complex,Fraction:Fraction,config:_configReadonly.config,isNegative:isNegative,matrix:matrix,typed:typed,unaryMinus:unaryMinus});exports.cbrt=cbrt;var gcd=(0,_factoriesAny.createGcd)({BigNumber:BigNumber,DenseMatrix:DenseMatrix,equalScalar:equalScalar,matrix:matrix,typed:typed});exports.gcd=gcd;var mod=(0,_factoriesAny.createMod)({DenseMatrix:DenseMatrix,equalScalar:equalScalar,matrix:matrix,typed:typed});exports.mod=mod;var nthRoot=(0,_factoriesAny.createNthRoot)({BigNumber:BigNumber,equalScalar:equalScalar,matrix:matrix,typed:typed});exports.nthRoot=nthRoot;var xgcd=(0,_factoriesAny.createXgcd)({BigNumber:BigNumber,config:_configReadonly.config,matrix:matrix,typed:typed});exports.xgcd=xgcd;var bitAnd=(0,_factoriesAny.createBitAnd)({equalScalar:equalScalar,matrix:matrix,typed:typed});exports.bitAnd=bitAnd;var bitXor=(0,_factoriesAny.createBitXor)({DenseMatrix:DenseMatrix,matrix:matrix,typed:typed});exports.bitXor=bitXor;var or=(0,_factoriesAny.createOr)({DenseMatrix:DenseMatrix,equalScalar:equalScalar,matrix:matrix,typed:typed});exports.or=or;var concat=(0,_factoriesAny.createConcat)({isInteger:isInteger,matrix:matrix,typed:typed});exports.concat=concat;var diag=(0,_factoriesAny.createDiag)({DenseMatrix:DenseMatrix,SparseMatrix:SparseMatrix,matrix:matrix,typed:typed});exports.diag=diag;var identity=(0,_factoriesAny.createIdentity)({BigNumber:BigNumber,DenseMatrix:DenseMatrix,SparseMatrix:SparseMatrix,config:_configReadonly.config,matrix:matrix,typed:typed});exports.identity=identity;var ones=(0,_factoriesAny.createOnes)({BigNumber:BigNumber,config:_configReadonly.config,matrix:matrix,typed:typed});exports.ones=ones;var reshape=(0,_factoriesAny.createReshape)({isInteger:isInteger,matrix:matrix,typed:typed});exports.reshape=reshape;var size=(0,_factoriesAny.createSize)({matrix:matrix,config:_configReadonly.config,typed:typed});exports.size=size;var subset=(0,_factoriesAny.createSubset)({matrix:matrix,typed:typed});exports.subset=subset;var zeros=(0,_factoriesAny.createZeros)({BigNumber:BigNumber,config:_configReadonly.config,matrix:matrix,typed:typed});exports.zeros=zeros;var to=(0,_factoriesAny.createTo)({matrix:matrix,typed:typed});exports.to=to;var round=(0,_factoriesAny.createRound)({BigNumber:BigNumber,DenseMatrix:DenseMatrix,equalScalar:equalScalar,matrix:matrix,typed:typed,zeros:zeros});exports.round=round;var leftShift=(0,_factoriesAny.createLeftShift)({DenseMatrix:DenseMatrix,equalScalar:equalScalar,matrix:matrix,typed:typed,zeros:zeros});exports.leftShift=leftShift;var rightLogShift=(0,_factoriesAny.createRightLogShift)({DenseMatrix:DenseMatrix,equalScalar:equalScalar,matrix:matrix,typed:typed,zeros:zeros});exports.rightLogShift=rightLogShift;var compare=(0,_factoriesAny.createCompare)({BigNumber:BigNumber,DenseMatrix:DenseMatrix,Fraction:Fraction,config:_configReadonly.config,equalScalar:equalScalar,matrix:matrix,typed:typed});exports.compare=compare;var compareText=(0,_factoriesAny.createCompareText)({matrix:matrix,typed:typed});exports.compareText=compareText;var smaller=(0,_factoriesAny.createSmaller)({DenseMatrix:DenseMatrix,config:_configReadonly.config,matrix:matrix,typed:typed});exports.smaller=smaller;var larger=(0,_factoriesAny.createLarger)({DenseMatrix:DenseMatrix,config:_configReadonly.config,matrix:matrix,typed:typed});exports.larger=larger;var unequal=(0,_factoriesAny.createUnequal)({DenseMatrix:DenseMatrix,config:_configReadonly.config,equalScalar:equalScalar,matrix:matrix,typed:typed});exports.unequal=unequal;var max=(0,_factoriesAny.createMax)({larger:larger,typed:typed});exports.max=max;var ImmutableDenseMatrix=(0,_factoriesAny.createImmutableDenseMatrixClass)({DenseMatrix:DenseMatrix,smaller:smaller});exports.ImmutableDenseMatrix=ImmutableDenseMatrix;var FibonacciHeap=(0,_factoriesAny.createFibonacciHeapClass)({larger:larger,smaller:smaller});exports.FibonacciHeap=FibonacciHeap;var sparse=(0,_factoriesAny.createSparse)({SparseMatrix:SparseMatrix,typed:typed});exports.sparse=sparse;var acoth=(0,_factoriesAny.createAcoth)({BigNumber:BigNumber,Complex:Complex,config:_configReadonly.config,typed:typed});exports.acoth=acoth;var atan2=(0,_factoriesAny.createAtan2)({BigNumber:BigNumber,DenseMatrix:DenseMatrix,equalScalar:equalScalar,matrix:matrix,typed:typed});exports.atan2=atan2;var sec=(0,_factoriesAny.createSec)({BigNumber:BigNumber,typed:typed});exports.sec=sec;var add=(0,_factoriesAny.createAdd)({DenseMatrix:DenseMatrix,SparseMatrix:SparseMatrix,addScalar:addScalar,equalScalar:equalScalar,matrix:matrix,typed:typed});exports.add=add;var trace=(0,_factoriesAny.createTrace)({add:add,matrix:matrix,typed:typed});exports.trace=trace;var composition=(0,_factoriesAny.createComposition)({addScalar:addScalar,combinations:combinations,isInteger:isInteger,isNegative:isNegative,isPositive:isPositive,larger:larger,typed:typed});exports.composition=composition;var isZero=(0,_factoriesAny.createIsZero)({typed:typed});exports.isZero=isZero;var abs=(0,_factoriesAny.createAbs)({typed:typed});exports.abs=abs;var floor=(0,_factoriesAny.createFloor)({config:_configReadonly.config,round:round,typed:typed});exports.floor=floor;var multiply=(0,_factoriesAny.createMultiply)({addScalar:addScalar,equalScalar:equalScalar,matrix:matrix,multiplyScalar:multiplyScalar,typed:typed});exports.multiply=multiply;var dotMultiply=(0,_factoriesAny.createDotMultiply)({equalScalar:equalScalar,matrix:matrix,multiplyScalar:multiplyScalar,typed:typed});exports.dotMultiply=dotMultiply;var re=(0,_factoriesAny.createRe)({typed:typed});exports.re=re;var flatten=(0,_factoriesAny.createFlatten)({matrix:matrix,typed:typed});exports.flatten=flatten;var resize=(0,_factoriesAny.createResize)({config:_configReadonly.config,matrix:matrix});exports.resize=resize;var squeeze=(0,_factoriesAny.createSqueeze)({matrix:matrix,typed:typed});exports.squeeze=squeeze;var prod=(0,_factoriesAny.createProd)({multiply:multiply,typed:typed});exports.prod=prod;var pow=(0,_factoriesAny.createPow)({Complex:Complex,config:_configReadonly.config,fraction:fraction,identity:identity,matrix:matrix,multiply:multiply,number:number,typed:typed});exports.pow=pow;var dotPow=(0,_factoriesAny.createDotPow)({DenseMatrix:DenseMatrix,equalScalar:equalScalar,matrix:matrix,pow:pow,typed:typed});exports.dotPow=dotPow;var rightArithShift=(0,_factoriesAny.createRightArithShift)({DenseMatrix:DenseMatrix,equalScalar:equalScalar,matrix:matrix,typed:typed,zeros:zeros});exports.rightArithShift=rightArithShift;var compareNatural=(0,_factoriesAny.createCompareNatural)({compare:compare,typed:typed});exports.compareNatural=compareNatural;var equalText=(0,_factoriesAny.createEqualText)({compareText:compareText,isZero:isZero,typed:typed});exports.equalText=equalText;var largerEq=(0,_factoriesAny.createLargerEq)({DenseMatrix:DenseMatrix,config:_configReadonly.config,matrix:matrix,typed:typed});exports.largerEq=largerEq;var partitionSelect=(0,_factoriesAny.createPartitionSelect)({compare:compare,isNaN:isNaN,isNumeric:isNumeric,typed:typed});exports.partitionSelect=partitionSelect;var min=(0,_factoriesAny.createMin)({smaller:smaller,typed:typed});exports.min=min;var Spa=(0,_factoriesAny.createSpaClass)({FibonacciHeap:FibonacciHeap,addScalar:addScalar,equalScalar:equalScalar});exports.Spa=Spa;var asech=(0,_factoriesAny.createAsech)({BigNumber:BigNumber,Complex:Complex,config:_configReadonly.config,typed:typed});exports.asech=asech;var tan=(0,_factoriesAny.createTan)({typed:typed});exports.tan=tan;var setSize=(0,_factoriesAny.createSetSize)({compareNatural:compareNatural,typed:typed});exports.setSize=setSize;var norm=(0,_factoriesAny.createNorm)({abs:abs,add:add,conj:conj,equalScalar:equalScalar,larger:larger,matrix:matrix,multiply:multiply,pow:pow,smaller:smaller,sqrt:sqrt,typed:typed});exports.norm=norm;var quantileSeq=(0,_factoriesAny.createQuantileSeq)({add:add,compare:compare,multiply:multiply,partitionSelect:partitionSelect,typed:typed});exports.quantileSeq=quantileSeq;var gamma=(0,_factoriesAny.createGamma)({BigNumber:BigNumber,Complex:Complex,config:_configReadonly.config,multiplyScalar:multiplyScalar,pow:pow,typed:typed});exports.gamma=gamma;var bignumber=(0,_factoriesAny.createBignumber)({BigNumber:BigNumber,typed:typed});exports.bignumber=bignumber;var lcm=(0,_factoriesAny.createLcm)({equalScalar:equalScalar,matrix:matrix,typed:typed});exports.lcm=lcm;var bitOr=(0,_factoriesAny.createBitOr)({DenseMatrix:DenseMatrix,equalScalar:equalScalar,matrix:matrix,typed:typed});exports.bitOr=bitOr;var kron=(0,_factoriesAny.createKron)({matrix:matrix,multiplyScalar:multiplyScalar,typed:typed});exports.kron=kron;var transpose=(0,_factoriesAny.createTranspose)({matrix:matrix,typed:typed});exports.transpose=transpose;var numeric=(0,_factoriesAny.createNumeric)({bignumber:bignumber,fraction:fraction,number:number});exports.numeric=numeric;var and=(0,_factoriesAny.createAnd)({equalScalar:equalScalar,matrix:matrix,not:not,typed:typed,zeros:zeros});exports.and=and;var smallerEq=(0,_factoriesAny.createSmallerEq)({DenseMatrix:DenseMatrix,config:_configReadonly.config,matrix:matrix,typed:typed});exports.smallerEq=smallerEq;var sort=(0,_factoriesAny.createSort)({compare:compare,compareNatural:compareNatural,matrix:matrix,typed:typed});exports.sort=sort;var cot=(0,_factoriesAny.createCot)({BigNumber:BigNumber,typed:typed});exports.cot=cot;var dot=(0,_factoriesAny.createDot)({add:add,multiply:multiply,typed:typed});exports.dot=dot;var sum=(0,_factoriesAny.createSum)({bignumber:bignumber,fraction:fraction,add:add,config:_configReadonly.config,typed:typed});exports.sum=sum;var factorial=(0,_factoriesAny.createFactorial)({gamma:gamma,typed:typed});exports.factorial=factorial;var permutations=(0,_factoriesAny.createPermutations)({factorial:factorial,typed:typed});exports.permutations=permutations;var ceil=(0,_factoriesAny.createCeil)({config:_configReadonly.config,round:round,typed:typed});exports.ceil=ceil;var subtract=(0,_factoriesAny.createSubtract)({DenseMatrix:DenseMatrix,addScalar:addScalar,equalScalar:equalScalar,matrix:matrix,typed:typed,unaryMinus:unaryMinus});exports.subtract=subtract;var cross=(0,_factoriesAny.createCross)({matrix:matrix,multiply:multiply,subtract:subtract,typed:typed});exports.cross=cross;var ctranspose=(0,_factoriesAny.createCtranspose)({conj:conj,transpose:transpose,typed:typed});exports.ctranspose=ctranspose;var equal=(0,_factoriesAny.createEqual)({DenseMatrix:DenseMatrix,equalScalar:equalScalar,matrix:matrix,typed:typed});exports.equal=equal;var Index=(0,_factoriesAny.createIndexClass)({ImmutableDenseMatrix:ImmutableDenseMatrix});exports.Index=Index;var setCartesian=(0,_factoriesAny.createSetCartesian)({DenseMatrix:DenseMatrix,Index:Index,compareNatural:compareNatural,size:size,subset:subset,typed:typed});exports.setCartesian=setCartesian;var setDistinct=(0,_factoriesAny.createSetDistinct)({DenseMatrix:DenseMatrix,Index:Index,compareNatural:compareNatural,size:size,subset:subset,typed:typed});exports.setDistinct=setDistinct;var setIsSubset=(0,_factoriesAny.createSetIsSubset)({Index:Index,compareNatural:compareNatural,size:size,subset:subset,typed:typed});exports.setIsSubset=setIsSubset;var setPowerset=(0,_factoriesAny.createSetPowerset)({Index:Index,compareNatural:compareNatural,size:size,subset:subset,typed:typed});exports.setPowerset=setPowerset;var index=(0,_factoriesAny.createIndex)({Index:Index,typed:typed});exports.index=index;var fix=(0,_factoriesAny.createFix)({Complex:Complex,ceil:ceil,floor:floor,typed:typed});exports.fix=fix;var range=(0,_factoriesAny.createRange)({bignumber:bignumber,matrix:matrix,config:_configReadonly.config,larger:larger,largerEq:largerEq,smaller:smaller,smallerEq:smallerEq,typed:typed});exports.range=range;var divideScalar=(0,_factoriesAny.createDivideScalar)({numeric:numeric,typed:typed});exports.divideScalar=divideScalar;var nthRoots=(0,_factoriesAny.createNthRoots)({Complex:Complex,config:_configReadonly.config,divideScalar:divideScalar,typed:typed});exports.nthRoots=nthRoots;var lsolve=(0,_factoriesAny.createLsolve)({DenseMatrix:DenseMatrix,divideScalar:divideScalar,equalScalar:equalScalar,matrix:matrix,multiplyScalar:multiplyScalar,subtract:subtract,typed:typed});exports.lsolve=lsolve;var deepEqual=(0,_factoriesAny.createDeepEqual)({equal:equal,typed:typed});exports.deepEqual=deepEqual;var setDifference=(0,_factoriesAny.createSetDifference)({DenseMatrix:DenseMatrix,Index:Index,compareNatural:compareNatural,size:size,subset:subset,typed:typed});exports.setDifference=setDifference;var setMultiplicity=(0,_factoriesAny.createSetMultiplicity)({Index:Index,compareNatural:compareNatural,size:size,subset:subset,typed:typed});exports.setMultiplicity=setMultiplicity;var hypot=(0,_factoriesAny.createHypot)({abs:abs,addScalar:addScalar,divideScalar:divideScalar,isPositive:isPositive,multiplyScalar:multiplyScalar,smaller:smaller,sqrt:sqrt,typed:typed});exports.hypot=hypot;var lup=(0,_factoriesAny.createLup)({DenseMatrix:DenseMatrix,Spa:Spa,SparseMatrix:SparseMatrix,abs:abs,addScalar:addScalar,divideScalar:divideScalar,equalScalar:equalScalar,larger:larger,matrix:matrix,multiplyScalar:multiplyScalar,subtract:subtract,typed:typed,unaryMinus:unaryMinus});exports.lup=lup;var slu=(0,_factoriesAny.createSlu)({SparseMatrix:SparseMatrix,abs:abs,add:add,divideScalar:divideScalar,larger:larger,largerEq:largerEq,multiply:multiply,subtract:subtract,transpose:transpose,typed:typed});exports.slu=slu;var det=(0,_factoriesAny.createDet)({lup:lup,matrix:matrix,multiply:multiply,subtract:subtract,typed:typed,unaryMinus:unaryMinus});exports.det=det;var distance=(0,_factoriesAny.createDistance)({abs:abs,addScalar:addScalar,divideScalar:divideScalar,multiplyScalar:multiplyScalar,sqrt:sqrt,subtract:subtract,typed:typed,unaryMinus:unaryMinus});exports.distance=distance;var stirlingS2=(0,_factoriesAny.createStirlingS2)({addScalar:addScalar,combinations:combinations,divideScalar:divideScalar,factorial:factorial,isInteger:isInteger,isNegative:isNegative,larger:larger,multiplyScalar:multiplyScalar,pow:pow,subtract:subtract,typed:typed});exports.stirlingS2=stirlingS2;var catalan=(0,_factoriesAny.createCatalan)({addScalar:addScalar,combinations:combinations,divideScalar:divideScalar,isInteger:isInteger,isNegative:isNegative,multiplyScalar:multiplyScalar,typed:typed});exports.catalan=catalan;var xor=(0,_factoriesAny.createXor)({DenseMatrix:DenseMatrix,matrix:matrix,typed:typed});exports.xor=xor;var row=(0,_factoriesAny.createRow)({Index:Index,matrix:matrix,range:range,typed:typed});exports.row=row;var dotDivide=(0,_factoriesAny.createDotDivide)({DenseMatrix:DenseMatrix,divideScalar:divideScalar,equalScalar:equalScalar,matrix:matrix,typed:typed});exports.dotDivide=dotDivide;var Unit=(0,_factoriesAny.createUnitClass)({BigNumber:BigNumber,Complex:Complex,Fraction:Fraction,abs:abs,addScalar:addScalar,config:_configReadonly.config,divideScalar:divideScalar,equal:equal,fix:fix,format:format,isNumeric:isNumeric,multiplyScalar:multiplyScalar,number:number,pow:pow,round:round,subtract:subtract});exports.Unit=Unit;var createUnit=(0,_factoriesAny.createCreateUnit)({Unit:Unit,typed:typed});exports.createUnit=createUnit;var setSymDifference=(0,_factoriesAny.createSetSymDifference)({Index:Index,concat:concat,setDifference:setDifference,size:size,subset:subset,typed:typed});exports.setSymDifference=setSymDifference;var qr=(0,_factoriesAny.createQr)({addScalar:addScalar,complex:complex,conj:conj,divideScalar:divideScalar,equal:equal,identity:identity,isZero:isZero,matrix:matrix,multiplyScalar:multiplyScalar,sign:sign,sqrt:sqrt,subtract:subtract,typed:typed,unaryMinus:unaryMinus,zeros:zeros});exports.qr=qr;var inv=(0,_factoriesAny.createInv)({abs:abs,addScalar:addScalar,det:det,divideScalar:divideScalar,identity:identity,matrix:matrix,multiply:multiply,typed:typed,unaryMinus:unaryMinus});exports.inv=inv;var expm=(0,_factoriesAny.createExpm)({abs:abs,add:add,identity:identity,inv:inv,multiply:multiply,typed:typed});exports.expm=expm;var divide=(0,_factoriesAny.createDivide)({divideScalar:divideScalar,equalScalar:equalScalar,inv:inv,matrix:matrix,multiply:multiply,typed:typed});exports.divide=divide;var mean=(0,_factoriesAny.createMean)({add:add,divide:divide,typed:typed});exports.mean=mean;var variance=(0,_factoriesAny.createVariance)({add:add,apply:apply,divide:divide,isNaN:isNaN,multiply:multiply,subtract:subtract,typed:typed});exports.variance=variance;var std=(0,_factoriesAny.createStd)({sqrt:sqrt,typed:typed,variance:variance});exports.std=std;var multinomial=(0,_factoriesAny.createMultinomial)({add:add,divide:divide,factorial:factorial,isInteger:isInteger,isPositive:isPositive,multiply:multiply,typed:typed});exports.multinomial=multinomial;var atomicMass=(0,_factoriesAny.createAtomicMass)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.atomicMass=atomicMass;var bohrMagneton=(0,_factoriesAny.createBohrMagneton)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.bohrMagneton=bohrMagneton;var boltzmann=(0,_factoriesAny.createBoltzmann)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.boltzmann=boltzmann;var conductanceQuantum=(0,_factoriesAny.createConductanceQuantum)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.conductanceQuantum=conductanceQuantum;var deuteronMass=(0,_factoriesAny.createDeuteronMass)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.deuteronMass=deuteronMass;var electronMass=(0,_factoriesAny.createElectronMass)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.electronMass=electronMass;var faraday=(0,_factoriesAny.createFaraday)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.faraday=faraday;var firstRadiation=(0,_factoriesAny.createFirstRadiation)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.firstRadiation=firstRadiation;var gravitationConstant=(0,_factoriesAny.createGravitationConstant)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.gravitationConstant=gravitationConstant;var hartreeEnergy=(0,_factoriesAny.createHartreeEnergy)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.hartreeEnergy=hartreeEnergy;var klitzing=(0,_factoriesAny.createKlitzing)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.klitzing=klitzing;var magneticConstant=(0,_factoriesAny.createMagneticConstant)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.magneticConstant=magneticConstant;var molarMass=(0,_factoriesAny.createMolarMass)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.molarMass=molarMass;var molarPlanckConstant=(0,_factoriesAny.createMolarPlanckConstant)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.molarPlanckConstant=molarPlanckConstant;var neutronMass=(0,_factoriesAny.createNeutronMass)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.neutronMass=neutronMass;var planckCharge=(0,_factoriesAny.createPlanckCharge)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.planckCharge=planckCharge;var planckLength=(0,_factoriesAny.createPlanckLength)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.planckLength=planckLength;var planckTemperature=(0,_factoriesAny.createPlanckTemperature)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.planckTemperature=planckTemperature;var protonMass=(0,_factoriesAny.createProtonMass)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.protonMass=protonMass;var reducedPlanckConstant=(0,_factoriesAny.createReducedPlanckConstant)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.reducedPlanckConstant=reducedPlanckConstant;var secondRadiation=(0,_factoriesAny.createSecondRadiation)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.secondRadiation=secondRadiation;var stefanBoltzmann=(0,_factoriesAny.createStefanBoltzmann)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.stefanBoltzmann=stefanBoltzmann;var vacuumImpedance=(0,_factoriesAny.createVacuumImpedance)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.vacuumImpedance=vacuumImpedance;var column=(0,_factoriesAny.createColumn)({Index:Index,matrix:matrix,range:range,typed:typed});exports.column=column;var usolve=(0,_factoriesAny.createUsolve)({DenseMatrix:DenseMatrix,divideScalar:divideScalar,equalScalar:equalScalar,matrix:matrix,multiplyScalar:multiplyScalar,subtract:subtract,typed:typed});exports.usolve=usolve;var setIntersect=(0,_factoriesAny.createSetIntersect)({DenseMatrix:DenseMatrix,Index:Index,compareNatural:compareNatural,size:size,subset:subset,typed:typed});exports.setIntersect=setIntersect;var lusolve=(0,_factoriesAny.createLusolve)({DenseMatrix:DenseMatrix,lsolve:lsolve,lup:lup,matrix:matrix,slu:slu,typed:typed,usolve:usolve});exports.lusolve=lusolve;var eigs=(0,_factoriesAny.createEigs)({abs:abs,add:add,addScalar:addScalar,atan:atan,bignumber:bignumber,config:_configReadonly.config,cos:cos,equal:equal,inv:inv,matrix:matrix,multiply:multiply,multiplyScalar:multiplyScalar,sin:sin,subtract:subtract,typed:typed});exports.eigs=eigs;var intersect=(0,_factoriesAny.createIntersect)({abs:abs,add:add,addScalar:addScalar,config:_configReadonly.config,divideScalar:divideScalar,equalScalar:equalScalar,matrix:matrix,multiply:multiply,multiplyScalar:multiplyScalar,smaller:smaller,subtract:subtract,typed:typed});exports.intersect=intersect;var bellNumbers=(0,_factoriesAny.createBellNumbers)({addScalar:addScalar,isInteger:isInteger,isNegative:isNegative,stirlingS2:stirlingS2,typed:typed});exports.bellNumbers=bellNumbers;var avogadro=(0,_factoriesAny.createAvogadro)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.avogadro=avogadro;var classicalElectronRadius=(0,_factoriesAny.createClassicalElectronRadius)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.classicalElectronRadius=classicalElectronRadius;var electricConstant=(0,_factoriesAny.createElectricConstant)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.electricConstant=electricConstant;var fermiCoupling=(0,_factoriesAny.createFermiCoupling)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.fermiCoupling=fermiCoupling;var gravity=(0,_factoriesAny.createGravity)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.gravity=gravity;var loschmidt=(0,_factoriesAny.createLoschmidt)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.loschmidt=loschmidt;var molarMassC12=(0,_factoriesAny.createMolarMassC12)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.molarMassC12=molarMassC12;var nuclearMagneton=(0,_factoriesAny.createNuclearMagneton)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.nuclearMagneton=nuclearMagneton;var planckMass=(0,_factoriesAny.createPlanckMass)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.planckMass=planckMass;var quantumOfCirculation=(0,_factoriesAny.createQuantumOfCirculation)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.quantumOfCirculation=quantumOfCirculation;var speedOfLight=(0,_factoriesAny.createSpeedOfLight)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.speedOfLight=speedOfLight;var wienDisplacement=(0,_factoriesAny.createWienDisplacement)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.wienDisplacement=wienDisplacement;var log=(0,_factoriesAny.createLog)({Complex:Complex,config:_configReadonly.config,divideScalar:divideScalar,typed:typed});exports.log=log;var unit=(0,_factoriesAny.createUnitFunction)({Unit:Unit,typed:typed});exports.unit=unit;var sqrtm=(0,_factoriesAny.createSqrtm)({abs:abs,add:add,identity:identity,inv:inv,max:max,multiply:multiply,size:size,sqrt:sqrt,subtract:subtract,typed:typed});exports.sqrtm=sqrtm;var kldivergence=(0,_factoriesAny.createKldivergence)({divide:divide,dotDivide:dotDivide,isNumeric:isNumeric,log:log,matrix:matrix,multiply:multiply,sum:sum,typed:typed});exports.kldivergence=kldivergence;var bohrRadius=(0,_factoriesAny.createBohrRadius)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.bohrRadius=bohrRadius;var elementaryCharge=(0,_factoriesAny.createElementaryCharge)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.elementaryCharge=elementaryCharge;var inverseConductanceQuantum=(0,_factoriesAny.createInverseConductanceQuantum)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.inverseConductanceQuantum=inverseConductanceQuantum;var molarVolume=(0,_factoriesAny.createMolarVolume)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.molarVolume=molarVolume;var planckTime=(0,_factoriesAny.createPlanckTime)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.planckTime=planckTime;var thomsonCrossSection=(0,_factoriesAny.createThomsonCrossSection)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.thomsonCrossSection=thomsonCrossSection;var log1p=(0,_factoriesAny.createLog1p)({Complex:Complex,config:_configReadonly.config,divideScalar:divideScalar,log:log,typed:typed});exports.log1p=log1p;var median=(0,_factoriesAny.createMedian)({add:add,compare:compare,divide:divide,partitionSelect:partitionSelect,typed:typed});exports.median=median;var gasConstant=(0,_factoriesAny.createGasConstant)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.gasConstant=gasConstant;var planckConstant=(0,_factoriesAny.createPlanckConstant)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.planckConstant=planckConstant;var setUnion=(0,_factoriesAny.createSetUnion)({Index:Index,concat:concat,setIntersect:setIntersect,setSymDifference:setSymDifference,size:size,subset:subset,typed:typed});exports.setUnion=setUnion;var magneticFluxQuantum=(0,_factoriesAny.createMagneticFluxQuantum)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.magneticFluxQuantum=magneticFluxQuantum;var coulomb=(0,_factoriesAny.createCoulomb)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.coulomb=coulomb;var mad=(0,_factoriesAny.createMad)({abs:abs,map:map,median:median,subtract:subtract,typed:typed});exports.mad=mad;var rydberg=(0,_factoriesAny.createRydberg)({BigNumber:BigNumber,Unit:Unit,config:_configReadonly.config});exports.rydberg=rydberg},{"../factoriesAny":658,"./configReadonly":67}],397:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"isAccessorNode",{enumerable:!0,get:function(){return _is.isAccessorNode}}),Object.defineProperty(exports,"isArray",{enumerable:!0,get:function(){return _is.isArray}}),Object.defineProperty(exports,"isArrayNode",{enumerable:!0,get:function(){return _is.isArrayNode}}),Object.defineProperty(exports,"isAssignmentNode",{enumerable:!0,get:function(){return _is.isAssignmentNode}}),Object.defineProperty(exports,"isBigNumber",{enumerable:!0,get:function(){return _is.isBigNumber}}),Object.defineProperty(exports,"isBlockNode",{enumerable:!0,get:function(){return _is.isBlockNode}}),Object.defineProperty(exports,"isBoolean",{enumerable:!0,get:function(){return _is.isBoolean}}),Object.defineProperty(exports,"isChain",{enumerable:!0,get:function(){return _is.isChain}}),Object.defineProperty(exports,"isCollection",{enumerable:!0,get:function(){return _is.isCollection}}),Object.defineProperty(exports,"isComplex",{enumerable:!0,get:function(){return _is.isComplex}}),Object.defineProperty(exports,"isConditionalNode",{enumerable:!0,get:function(){return _is.isConditionalNode}}),Object.defineProperty(exports,"isConstantNode",{enumerable:!0,get:function(){return _is.isConstantNode}}),Object.defineProperty(exports,"isDate",{enumerable:!0,get:function(){return _is.isDate}}),Object.defineProperty(exports,"isDenseMatrix",{enumerable:!0,get:function(){return _is.isDenseMatrix}}),Object.defineProperty(exports,"isFraction",{enumerable:!0,get:function(){return _is.isFraction}}),Object.defineProperty(exports,"isFunction",{enumerable:!0,get:function(){return _is.isFunction}}),Object.defineProperty(exports,"isFunctionAssignmentNode",{enumerable:!0,get:function(){return _is.isFunctionAssignmentNode}}),Object.defineProperty(exports,"isFunctionNode",{enumerable:!0,get:function(){return _is.isFunctionNode}}),Object.defineProperty(exports,"isHelp",{enumerable:!0,get:function(){return _is.isHelp}}),Object.defineProperty(exports,"isIndex",{enumerable:!0,get:function(){return _is.isIndex}}),Object.defineProperty(exports,"isIndexNode",{enumerable:!0,get:function(){return _is.isIndexNode}}),Object.defineProperty(exports,"isMatrix",{enumerable:!0,get:function(){return _is.isMatrix}}),Object.defineProperty(exports,"isNode",{enumerable:!0,get:function(){return _is.isNode}}),Object.defineProperty(exports,"isNull",{enumerable:!0,get:function(){return _is.isNull}}),Object.defineProperty(exports,"isNumber",{enumerable:!0,get:function(){return _is.isNumber}}),Object.defineProperty(exports,"isString",{enumerable:!0,get:function(){return _is.isString}}),Object.defineProperty(exports,"isUndefined",{enumerable:!0,get:function(){return _is.isUndefined}}),Object.defineProperty(exports,"isObject",{enumerable:!0,get:function(){return _is.isObject}}),Object.defineProperty(exports,"isObjectNode",{enumerable:!0,get:function(){return _is.isObjectNode}}),Object.defineProperty(exports,"isOperatorNode",{enumerable:!0,get:function(){return _is.isOperatorNode}}),Object.defineProperty(exports,"isParenthesisNode",{enumerable:!0,get:function(){return _is.isParenthesisNode}}),Object.defineProperty(exports,"isRange",{enumerable:!0,get:function(){return _is.isRange}}),Object.defineProperty(exports,"isRangeNode",{enumerable:!0,get:function(){return _is.isRangeNode}}),Object.defineProperty(exports,"isRegExp",{enumerable:!0,get:function(){return _is.isRegExp}}),Object.defineProperty(exports,"isResultSet",{enumerable:!0,get:function(){return _is.isResultSet}}),Object.defineProperty(exports,"isSparseMatrix",{enumerable:!0,get:function(){return _is.isSparseMatrix}}),Object.defineProperty(exports,"isSymbolNode",{enumerable:!0,get:function(){return _is.isSymbolNode}}),Object.defineProperty(exports,"isUnit",{enumerable:!0,get:function(){return _is.isUnit}});var _is=require("../utils/is")},{"../utils/is":933}],398:[function(require,module,exports){"use strict";function ArgumentsError(fn,count,min,max){if(!(this instanceof ArgumentsError))throw new SyntaxError("Constructor must be called with the new operator");this.fn=fn,this.count=count,this.min=min,this.max=max,this.message="Wrong number of arguments in function "+fn+" ("+count+" provided, "+min+(null!=max?"-"+max:"")+" expected)",this.stack=(new Error).stack}Object.defineProperty(exports,"__esModule",{value:!0}),((exports.ArgumentsError=ArgumentsError).prototype=new Error).constructor=Error,ArgumentsError.prototype.name="ArgumentsError",ArgumentsError.prototype.isArgumentsError=!0},{}],399:[function(require,module,exports){"use strict";function DimensionError(actual,expected,relation){if(!(this instanceof DimensionError))throw new SyntaxError("Constructor must be called with the new operator");this.actual=actual,this.expected=expected,this.relation=relation,this.message="Dimension mismatch ("+(Array.isArray(actual)?"["+actual.join(", ")+"]":actual)+" "+(this.relation||"!=")+" "+(Array.isArray(expected)?"["+expected.join(", ")+"]":expected)+")",this.stack=(new Error).stack}Object.defineProperty(exports,"__esModule",{value:!0}),((exports.DimensionError=DimensionError).prototype=new RangeError).constructor=RangeError,DimensionError.prototype.name="DimensionError",DimensionError.prototype.isDimensionError=!0},{}],400:[function(require,module,exports){"use strict";function IndexError(index,min,max){if(!(this instanceof IndexError))throw new SyntaxError("Constructor must be called with the new operator");this.index=index,arguments.length<3?(this.min=0,this.max=min):(this.min=min,this.max=max),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}Object.defineProperty(exports,"__esModule",{value:!0}),((exports.IndexError=IndexError).prototype=new RangeError).constructor=RangeError,IndexError.prototype.name="IndexError",IndexError.prototype.isIndexError=!0},{}],401:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHelpClass=void 0;var _is=require("../utils/is"),_object=require("../utils/object"),_string=require("../utils/string"),dependencies=["parse"],createHelpClass=(0,require("../utils/factory").factory)("Help",dependencies,function(_ref){var parse=_ref.parse;function Help(doc){if(!(this instanceof Help))throw new SyntaxError("Constructor must be called with the new operator");if(!doc)throw new Error('Argument "doc" missing');this.doc=doc}return Help.prototype.type="Help",Help.prototype.isHelp=!0,Help.prototype.toString=function(){var doc=this.doc||{},desc="\n";if(doc.name&&(desc+="Name: "+doc.name+"\n\n"),doc.category&&(desc+="Category: "+doc.category+"\n\n"),doc.description&&(desc+="Description:\n    "+doc.description+"\n\n"),doc.syntax&&(desc+="Syntax:\n    "+doc.syntax.join("\n    ")+"\n\n"),doc.examples){desc+="Examples:\n";for(var scope={},i=0;i<doc.examples.length;i++){var expr=doc.examples[i];desc+="    "+expr+"\n";var res=void 0;try{res=parse(expr).compile().evaluate(scope)}catch(e){res=e}void 0===res||(0,_is.isHelp)(res)||(desc+="        "+(0,_string.format)(res,{precision:14})+"\n")}desc+="\n"}return doc.seealso&&doc.seealso.length&&(desc+="See also: "+doc.seealso.join(", ")+"\n"),desc},Help.prototype.toJSON=function(){var obj=(0,_object.clone)(this.doc);return obj.mathjs="Help",obj},Help.fromJSON=function(json){var doc={};for(var prop in json)"mathjs"!==prop&&(doc[prop]=json[prop]);return new Help(doc)},Help.prototype.valueOf=Help.prototype.toString,Help},{isClass:!0});exports.createHelpClass=createHelpClass},{"../utils/factory":931,"../utils/is":933,"../utils/object":938,"../utils/string":941}],402:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createParserClass=void 0;var _factory=require("../utils/factory"),_object=require("../utils/object"),_customs=require("../utils/customs"),_log=require("../utils/log"),dependencies=["parse"],createParserClass=(0,_factory.factory)("Parser",dependencies,function(_ref){var parse=_ref.parse;function Parser(){if(!(this instanceof Parser))throw new SyntaxError("Constructor must be called with the new operator");this.scope={}}return Parser.prototype.type="Parser",Parser.prototype.isParser=!0,Parser.prototype.parse=function(expr){throw new Error("Parser.parse is deprecated. Use math.parse instead.")},Parser.prototype.compile=function(expr){throw new Error("Parser.compile is deprecated. Use math.compile instead.")},Parser.prototype.evaluate=function(expr){return parse(expr).compile().evaluate(this.scope)},Parser.prototype.eval=function(expr){return(0,_log.warnOnce)("Method Parser.eval is renamed to Parser.evaluate. Please use the new method name."),this.evaluate(expr)},Parser.prototype.get=function(name){return name in this.scope?(0,_customs.getSafeProperty)(this.scope,name):void 0},Parser.prototype.getAll=function(){return(0,_object.extend)({},this.scope)},Parser.prototype.set=function(name,value){return(0,_customs.setSafeProperty)(this.scope,name,value)},Parser.prototype.remove=function(name){delete this.scope[name]},Parser.prototype.clear=function(){for(var _name in this.scope)(0,_object.hasOwnProperty)(this.scope,_name)&&delete this.scope[_name]},Parser},{isClass:!0});exports.createParserClass=createParserClass},{"../utils/customs":929,"../utils/factory":931,"../utils/log":935,"../utils/object":938}],403:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InfinityDocs=void 0;exports.InfinityDocs={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]}},{}],404:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LN10Docs=void 0;exports.LN10Docs={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]}},{}],405:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LN2Docs=void 0;exports.LN2Docs={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]}},{}],406:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LOG10EDocs=void 0;exports.LOG10EDocs={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]}},{}],407:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LOG2EDocs=void 0;exports.LOG2EDocs={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]}},{}],408:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NaNDocs=void 0;exports.NaNDocs={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]}},{}],409:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SQRT12Docs=void 0;exports.SQRT12Docs={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]}},{}],410:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SQRT2Docs=void 0;exports.SQRT2Docs={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]}},{}],411:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eDocs=void 0;exports.eDocs={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]}},{}],412:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.falseDocs=void 0;exports.falseDocs={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]}},{}],413:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.iDocs=void 0;exports.iDocs={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]}},{}],414:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nullDocs=void 0;exports.nullDocs={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]}},{}],415:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.phiDocs=void 0;exports.phiDocs={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]}},{}],416:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.piDocs=void 0;exports.piDocs={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]}},{}],417:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tauDocs=void 0;exports.tauDocs={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]}},{}],418:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trueDocs=void 0;exports.trueDocs={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]}},{}],419:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.versionDocs=void 0;exports.versionDocs={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]}},{}],420:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bignumberDocs=void 0;exports.bignumberDocs={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]}},{}],421:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.booleanDocs=void 0;exports.booleanDocs={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]}},{}],422:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complexDocs=void 0;exports.complexDocs={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]}},{}],423:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUnitDocs=void 0;exports.createUnitDocs={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]}},{}],424:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fractionDocs=void 0;exports.fractionDocs={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(num,den)"],description:"Create a fraction from a number or from a numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]}},{}],425:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.indexDocs=void 0;exports.indexDocs={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[]","[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[0:2, 0:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]}},{}],426:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matrixDocs=void 0;exports.matrixDocs={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]}},{}],427:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.numberDocs=void 0;exports.numberDocs={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]}},{}],428:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseDocs=void 0;exports.sparseDocs={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]}},{}],429:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitUnitDocs=void 0;exports.splitUnitDocs={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]}},{}],430:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringDocs=void 0;exports.stringDocs={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]}},{}],431:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unitDocs=void 0;exports.unitDocs={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]}},{}],432:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.configDocs=void 0;exports.configDocs={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]}},{}],433:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.importDocs=void 0;exports.importDocs={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]}},{}],434:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.typedDocs=void 0;exports.typedDocs={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number, number": f(x)=x+x })',"double(2)",'double("hello")'],seealso:[]}},{}],435:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.embeddedDocs=void 0;var _bignumber=require("./construction/bignumber"),_typeOf=require("./function/utils/typeOf"),_isZero=require("./function/utils/isZero"),_isPrime=require("./function/utils/isPrime"),_isPositive=require("./function/utils/isPositive"),_isNumeric=require("./function/utils/isNumeric"),_hasNumericValue=require("./function/utils/hasNumericValue"),_isNegative=require("./function/utils/isNegative"),_isInteger=require("./function/utils/isInteger"),_isNaN=require("./function/utils/isNaN"),_format=require("./function/utils/format"),_clone=require("./function/utils/clone"),_to=require("./function/units/to"),_tanh=require("./function/trigonometry/tanh"),_tan=require("./function/trigonometry/tan"),_sinh=require("./function/trigonometry/sinh"),_sech=require("./function/trigonometry/sech"),_sec=require("./function/trigonometry/sec"),_csch=require("./function/trigonometry/csch"),_csc=require("./function/trigonometry/csc"),_coth=require("./function/trigonometry/coth"),_cot=require("./function/trigonometry/cot"),_cosh=require("./function/trigonometry/cosh"),_cos=require("./function/trigonometry/cos"),_atan=require("./function/trigonometry/atan2"),_atanh=require("./function/trigonometry/atanh"),_atan2=require("./function/trigonometry/atan"),_asinh=require("./function/trigonometry/asinh"),_asin=require("./function/trigonometry/asin"),_asech=require("./function/trigonometry/asech"),_asec=require("./function/trigonometry/asec"),_acsch=require("./function/trigonometry/acsch"),_acsc=require("./function/trigonometry/acsc"),_acoth=require("./function/trigonometry/acoth"),_acot=require("./function/trigonometry/acot"),_acosh=require("./function/trigonometry/acosh"),_acos=require("./function/trigonometry/acos"),_sum=require("./function/statistics/sum"),_std=require("./function/statistics/std"),_quantileSeq=require("./function/statistics/quantileSeq"),_prod=require("./function/statistics/prod"),_mode=require("./function/statistics/mode"),_min=require("./function/statistics/min"),_median=require("./function/statistics/median"),_mean=require("./function/statistics/mean"),_max=require("./function/statistics/max"),_mad=require("./function/statistics/mad"),_erf=require("./function/special/erf"),_setUnion=require("./function/set/setUnion"),_setSymDifference=require("./function/set/setSymDifference"),_setSize=require("./function/set/setSize"),_setPowerset=require("./function/set/setPowerset"),_setMultiplicity=require("./function/set/setMultiplicity"),_setIsSubset=require("./function/set/setIsSubset"),_setIntersect=require("./function/set/setIntersect"),_setDistinct=require("./function/set/setDistinct"),_setDifference=require("./function/set/setDifference"),_setCartesian=require("./function/set/setCartesian"),_unequal=require("./function/relational/unequal"),_smallerEq=require("./function/relational/smallerEq"),_smaller=require("./function/relational/smaller"),_largerEq=require("./function/relational/largerEq"),_larger=require("./function/relational/larger"),_equalText=require("./function/relational/equalText"),_equal=require("./function/relational/equal"),_deepEqual=require("./function/relational/deepEqual"),_compareText=require("./function/relational/compareText"),_compareNatural=require("./function/relational/compareNatural"),_compare=require("./function/relational/compare"),_randomInt=require("./function/probability/randomInt"),_random=require("./function/probability/random"),_pickRandom=require("./function/probability/pickRandom"),_permutations=require("./function/probability/permutations"),_multinomial=require("./function/probability/multinomial"),_kldivergence=require("./function/probability/kldivergence"),_gamma=require("./function/probability/gamma"),_factorial=require("./function/probability/factorial"),_combinations=require("./function/probability/combinations"),_combinationsWithRep=require("./function/probability/combinationsWithRep"),_zeros=require("./function/matrix/zeros"),_transpose=require("./function/matrix/transpose"),_trace=require("./function/matrix/trace"),_subset=require("./function/matrix/subset"),_squeeze=require("./function/matrix/squeeze"),_sort=require("./function/matrix/sort"),_size=require("./function/matrix/size"),_reshape=require("./function/matrix/reshape"),_resize=require("./function/matrix/resize"),_range=require("./function/matrix/range"),_partitionSelect=require("./function/matrix/partitionSelect"),_ones=require("./function/matrix/ones"),_map=require("./function/matrix/map"),_kron=require("./function/matrix/kron"),_inv=require("./function/matrix/inv"),_forEach=require("./function/matrix/forEach"),_flatten=require("./function/matrix/flatten"),_filter=require("./function/matrix/filter"),_identity=require("./function/matrix/identity"),_getMatrixDataType=require("./function/matrix/getMatrixDataType"),_dot=require("./function/matrix/dot"),_diag=require("./function/matrix/diag"),_det=require("./function/matrix/det"),_ctranspose=require("./function/matrix/ctranspose"),_cross=require("./function/matrix/cross"),_concat=require("./function/matrix/concat"),_xor=require("./function/logical/xor"),_or=require("./function/logical/or"),_not=require("./function/logical/not"),_and=require("./function/logical/and"),_intersect=require("./function/geometry/intersect"),_distance=require("./function/geometry/distance"),_help=require("./function/expression/help"),_evaluate=require("./function/expression/evaluate"),_im=require("./function/complex/im"),_re=require("./function/complex/re"),_conj=require("./function/complex/conj"),_arg=require("./function/complex/arg"),_typed=require("./core/typed"),_import=require("./core/import"),_config=require("./core/config"),_stirlingS=require("./function/combinatorics/stirlingS2"),_composition=require("./function/combinatorics/composition"),_catalan=require("./function/combinatorics/catalan"),_bellNumbers=require("./function/combinatorics/bellNumbers"),_rightLogShift=require("./function/bitwise/rightLogShift"),_rightArithShift=require("./function/bitwise/rightArithShift"),_leftShift=require("./function/bitwise/leftShift"),_bitXor=require("./function/bitwise/bitXor"),_bitOr=require("./function/bitwise/bitOr"),_bitNot=require("./function/bitwise/bitNot"),_bitAnd=require("./function/bitwise/bitAnd"),_xgcd=require("./function/arithmetic/xgcd"),_unaryPlus=require("./function/arithmetic/unaryPlus"),_unaryMinus=require("./function/arithmetic/unaryMinus"),_square=require("./function/arithmetic/square"),_sqrtm=require("./function/arithmetic/sqrtm"),_sqrt=require("./function/arithmetic/sqrt"),_sign=require("./function/arithmetic/sign"),_round=require("./function/arithmetic/round"),_pow=require("./function/arithmetic/pow"),_nthRoots=require("./function/arithmetic/nthRoots"),_nthRoot=require("./function/arithmetic/nthRoot"),_norm=require("./function/arithmetic/norm"),_multiply=require("./function/arithmetic/multiply"),_mod=require("./function/arithmetic/mod"),_log=require("./function/arithmetic/log10"),_log1p=require("./function/arithmetic/log1p"),_log2=require("./function/arithmetic/log2"),_log3=require("./function/arithmetic/log"),_lcm=require("./function/arithmetic/lcm"),_hypot=require("./function/arithmetic/hypot"),_gcd=require("./function/arithmetic/gcd"),_floor=require("./function/arithmetic/floor"),_fix=require("./function/arithmetic/fix"),_expm=require("./function/arithmetic/expm1"),_expm2=require("./function/arithmetic/expm"),_eigs=require("./function/matrix/eigs"),_exp=require("./function/arithmetic/exp"),_dotMultiply=require("./function/arithmetic/dotMultiply"),_dotDivide=require("./function/arithmetic/dotDivide"),_divide=require("./function/arithmetic/divide"),_cube=require("./function/arithmetic/cube"),_ceil=require("./function/arithmetic/ceil"),_cbrt=require("./function/arithmetic/cbrt"),_add=require("./function/arithmetic/add"),_abs=require("./function/arithmetic/abs"),_qr=require("./function/algebra/qr"),_usolve=require("./function/algebra/usolve"),_slu=require("./function/algebra/slu"),_rationalize=require("./function/algebra/rationalize"),_simplify=require("./function/algebra/simplify"),_lup=require("./function/algebra/lup"),_lsolve=require("./function/algebra/lsolve"),_derivative=require("./function/algebra/derivative"),_version=require("./constants/version"),_true=require("./constants/true"),_tau=require("./constants/tau"),_SQRT=require("./constants/SQRT2"),_SQRT1_=require("./constants/SQRT1_2"),_phi=require("./constants/phi"),_pi=require("./constants/pi"),_null=require("./constants/null"),_NaN=require("./constants/NaN"),_LOG10E=require("./constants/LOG10E"),_LOG2E=require("./constants/LOG2E"),_LN=require("./constants/LN10"),_LN2=require("./constants/LN2"),_Infinity=require("./constants/Infinity"),_i=require("./constants/i"),_false=require("./constants/false"),_e=require("./constants/e"),_unit=require("./construction/unit"),_string=require("./construction/string"),_splitUnit=require("./construction/splitUnit"),_sparse=require("./construction/sparse"),_number=require("./construction/number"),_matrix=require("./construction/matrix"),_construction=require("./construction"),_fraction=require("./construction/fraction"),_createUnit=require("./construction/createUnit"),_complex=require("./construction/complex"),_boolean=require("./construction/boolean"),_dotPow=require("./function/arithmetic/dotPow"),_lusolve=require("./function/algebra/lusolve"),_subtract=require("./function/arithmetic/subtract"),_variance=require("./function/statistics/variance"),_sin=require("./function/trigonometry/sin"),_numeric=require("./function/utils/numeric"),_column=require("./function/matrix/column"),_row=require("./function/matrix/row"),embeddedDocs={bignumber:_bignumber.bignumberDocs,boolean:_boolean.booleanDocs,complex:_complex.complexDocs,createUnit:_createUnit.createUnitDocs,fraction:_fraction.fractionDocs,index:_construction.indexDocs,matrix:_matrix.matrixDocs,number:_number.numberDocs,sparse:_sparse.sparseDocs,splitUnit:_splitUnit.splitUnitDocs,string:_string.stringDocs,unit:_unit.unitDocs,e:_e.eDocs,E:_e.eDocs,false:_false.falseDocs,i:_i.iDocs,Infinity:_Infinity.InfinityDocs,LN2:_LN2.LN2Docs,LN10:_LN.LN10Docs,LOG2E:_LOG2E.LOG2EDocs,LOG10E:_LOG10E.LOG10EDocs,NaN:_NaN.NaNDocs,null:_null.nullDocs,pi:_pi.piDocs,PI:_pi.piDocs,phi:_phi.phiDocs,SQRT1_2:_SQRT1_.SQRT12Docs,SQRT2:_SQRT.SQRT2Docs,tau:_tau.tauDocs,true:_true.trueDocs,version:_version.versionDocs,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:_derivative.derivativeDocs,lsolve:_lsolve.lsolveDocs,lup:_lup.lupDocs,lusolve:_lusolve.lusolveDocs,simplify:_simplify.simplifyDocs,rationalize:_rationalize.rationalizeDocs,slu:_slu.sluDocs,usolve:_usolve.usolveDocs,qr:_qr.qrDocs,abs:_abs.absDocs,add:_add.addDocs,cbrt:_cbrt.cbrtDocs,ceil:_ceil.ceilDocs,cube:_cube.cubeDocs,divide:_divide.divideDocs,dotDivide:_dotDivide.dotDivideDocs,dotMultiply:_dotMultiply.dotMultiplyDocs,dotPow:_dotPow.dotPowDocs,exp:_exp.expDocs,expm:_expm2.expmDocs,expm1:_expm.expm1Docs,fix:_fix.fixDocs,floor:_floor.floorDocs,gcd:_gcd.gcdDocs,hypot:_hypot.hypotDocs,lcm:_lcm.lcmDocs,log:_log3.logDocs,log2:_log2.log2Docs,log1p:_log1p.log1pDocs,log10:_log.log10Docs,mod:_mod.modDocs,multiply:_multiply.multiplyDocs,norm:_norm.normDocs,nthRoot:_nthRoot.nthRootDocs,nthRoots:_nthRoots.nthRootsDocs,pow:_pow.powDocs,round:_round.roundDocs,sign:_sign.signDocs,sqrt:_sqrt.sqrtDocs,sqrtm:_sqrtm.sqrtmDocs,square:_square.squareDocs,subtract:_subtract.subtractDocs,unaryMinus:_unaryMinus.unaryMinusDocs,unaryPlus:_unaryPlus.unaryPlusDocs,xgcd:_xgcd.xgcdDocs,bitAnd:_bitAnd.bitAndDocs,bitNot:_bitNot.bitNotDocs,bitOr:_bitOr.bitOrDocs,bitXor:_bitXor.bitXorDocs,leftShift:_leftShift.leftShiftDocs,rightArithShift:_rightArithShift.rightArithShiftDocs,rightLogShift:_rightLogShift.rightLogShiftDocs,bellNumbers:_bellNumbers.bellNumbersDocs,catalan:_catalan.catalanDocs,composition:_composition.compositionDocs,stirlingS2:_stirlingS.stirlingS2Docs,config:_config.configDocs,import:_import.importDocs,typed:_typed.typedDocs,arg:_arg.argDocs,conj:_conj.conjDocs,re:_re.reDocs,im:_im.imDocs,evaluate:_evaluate.evaluateDocs,eval:_evaluate.evaluateDocs,help:_help.helpDocs,distance:_distance.distanceDocs,intersect:_intersect.intersectDocs,and:_and.andDocs,not:_not.notDocs,or:_or.orDocs,xor:_xor.xorDocs,concat:_concat.concatDocs,cross:_cross.crossDocs,column:_column.columnDocs,ctranspose:_ctranspose.ctransposeDocs,det:_det.detDocs,diag:_diag.diagDocs,dot:_dot.dotDocs,getMatrixDataType:_getMatrixDataType.getMatrixDataTypeDocs,identity:_identity.identityDocs,filter:_filter.filterDocs,flatten:_flatten.flattenDocs,forEach:_forEach.forEachDocs,inv:_inv.invDocs,eigs:_eigs.eigsDocs,kron:_kron.kronDocs,map:_map.mapDocs,ones:_ones.onesDocs,partitionSelect:_partitionSelect.partitionSelectDocs,range:_range.rangeDocs,resize:_resize.resizeDocs,reshape:_reshape.reshapeDocs,row:_row.rowDocs,size:_size.sizeDocs,sort:_sort.sortDocs,squeeze:_squeeze.squeezeDocs,subset:_subset.subsetDocs,trace:_trace.traceDocs,transpose:_transpose.transposeDocs,zeros:_zeros.zerosDocs,combinations:_combinations.combinationsDocs,combinationsWithRep:_combinationsWithRep.combinationsWithRepDocs,factorial:_factorial.factorialDocs,gamma:_gamma.gammaDocs,kldivergence:_kldivergence.kldivergenceDocs,multinomial:_multinomial.multinomialDocs,permutations:_permutations.permutationsDocs,pickRandom:_pickRandom.pickRandomDocs,random:_random.randomDocs,randomInt:_randomInt.randomIntDocs,compare:_compare.compareDocs,compareNatural:_compareNatural.compareNaturalDocs,compareText:_compareText.compareTextDocs,deepEqual:_deepEqual.deepEqualDocs,equal:_equal.equalDocs,equalText:_equalText.equalTextDocs,larger:_larger.largerDocs,largerEq:_largerEq.largerEqDocs,smaller:_smaller.smallerDocs,smallerEq:_smallerEq.smallerEqDocs,unequal:_unequal.unequalDocs,setCartesian:_setCartesian.setCartesianDocs,setDifference:_setDifference.setDifferenceDocs,setDistinct:_setDistinct.setDistinctDocs,setIntersect:_setIntersect.setIntersectDocs,setIsSubset:_setIsSubset.setIsSubsetDocs,setMultiplicity:_setMultiplicity.setMultiplicityDocs,setPowerset:_setPowerset.setPowersetDocs,setSize:_setSize.setSizeDocs,setSymDifference:_setSymDifference.setSymDifferenceDocs,setUnion:_setUnion.setUnionDocs,erf:_erf.erfDocs,mad:_mad.madDocs,max:_max.maxDocs,mean:_mean.meanDocs,median:_median.medianDocs,min:_min.minDocs,mode:_mode.modeDocs,prod:_prod.prodDocs,quantileSeq:_quantileSeq.quantileSeqDocs,std:_std.stdDocs,sum:_sum.sumDocs,variance:_variance.varianceDocs,var:_variance.varianceDocs,acos:_acos.acosDocs,acosh:_acosh.acoshDocs,acot:_acot.acotDocs,acoth:_acoth.acothDocs,acsc:_acsc.acscDocs,acsch:_acsch.acschDocs,asec:_asec.asecDocs,asech:_asech.asechDocs,asin:_asin.asinDocs,asinh:_asinh.asinhDocs,atan:_atan2.atanDocs,atanh:_atanh.atanhDocs,atan2:_atan.atan2Docs,cos:_cos.cosDocs,cosh:_cosh.coshDocs,cot:_cot.cotDocs,coth:_coth.cothDocs,csc:_csc.cscDocs,csch:_csch.cschDocs,sec:_sec.secDocs,sech:_sech.sechDocs,sin:_sin.sinDocs,sinh:_sinh.sinhDocs,tan:_tan.tanDocs,tanh:_tanh.tanhDocs,to:_to.toDocs,clone:_clone.cloneDocs,format:_format.formatDocs,isNaN:_isNaN.isNaNDocs,isInteger:_isInteger.isIntegerDocs,isNegative:_isNegative.isNegativeDocs,isNumeric:_isNumeric.isNumericDocs,hasNumericValue:_hasNumericValue.hasNumericValueDocs,isPositive:_isPositive.isPositiveDocs,isPrime:_isPrime.isPrimeDocs,isZero:_isZero.isZeroDocs,typeOf:_typeOf.typeOfDocs,typeof:_typeOf.typeOfDocs,numeric:_numeric.numericDocs};exports.embeddedDocs=embeddedDocs},{"./constants/Infinity":403,"./constants/LN10":404,"./constants/LN2":405,"./constants/LOG10E":406,"./constants/LOG2E":407,"./constants/NaN":408,"./constants/SQRT1_2":409,"./constants/SQRT2":410,"./constants/e":411,"./constants/false":412,"./constants/i":413,"./constants/null":414,"./constants/phi":415,"./constants/pi":416,"./constants/tau":417,"./constants/true":418,"./constants/version":419,"./construction":425,"./construction/bignumber":420,"./construction/boolean":421,"./construction/complex":422,"./construction/createUnit":423,"./construction/fraction":424,"./construction/matrix":426,"./construction/number":427,"./construction/sparse":428,"./construction/splitUnit":429,"./construction/string":430,"./construction/unit":431,"./core/config":432,"./core/import":433,"./core/typed":434,"./function/algebra/derivative":436,"./function/algebra/lsolve":437,"./function/algebra/lup":438,"./function/algebra/lusolve":439,"./function/algebra/qr":440,"./function/algebra/rationalize":441,"./function/algebra/simplify":442,"./function/algebra/slu":443,"./function/algebra/usolve":444,"./function/arithmetic/abs":445,"./function/arithmetic/add":446,"./function/arithmetic/cbrt":447,"./function/arithmetic/ceil":448,"./function/arithmetic/cube":449,"./function/arithmetic/divide":450,"./function/arithmetic/dotDivide":451,"./function/arithmetic/dotMultiply":452,"./function/arithmetic/dotPow":453,"./function/arithmetic/exp":454,"./function/arithmetic/expm":455,"./function/arithmetic/expm1":456,"./function/arithmetic/fix":457,"./function/arithmetic/floor":458,"./function/arithmetic/gcd":459,"./function/arithmetic/hypot":460,"./function/arithmetic/lcm":461,"./function/arithmetic/log":462,"./function/arithmetic/log10":463,"./function/arithmetic/log1p":464,"./function/arithmetic/log2":465,"./function/arithmetic/mod":466,"./function/arithmetic/multiply":467,"./function/arithmetic/norm":468,"./function/arithmetic/nthRoot":469,"./function/arithmetic/nthRoots":470,"./function/arithmetic/pow":471,"./function/arithmetic/round":472,"./function/arithmetic/sign":473,"./function/arithmetic/sqrt":474,"./function/arithmetic/sqrtm":475,"./function/arithmetic/square":476,"./function/arithmetic/subtract":477,"./function/arithmetic/unaryMinus":478,"./function/arithmetic/unaryPlus":479,"./function/arithmetic/xgcd":480,"./function/bitwise/bitAnd":481,"./function/bitwise/bitNot":482,"./function/bitwise/bitOr":483,"./function/bitwise/bitXor":484,"./function/bitwise/leftShift":485,"./function/bitwise/rightArithShift":486,"./function/bitwise/rightLogShift":487,"./function/combinatorics/bellNumbers":488,"./function/combinatorics/catalan":489,"./function/combinatorics/composition":490,"./function/combinatorics/stirlingS2":491,"./function/complex/arg":492,"./function/complex/conj":493,"./function/complex/im":494,"./function/complex/re":495,"./function/expression/evaluate":496,"./function/expression/help":497,"./function/geometry/distance":498,"./function/geometry/intersect":499,"./function/logical/and":500,"./function/logical/not":501,"./function/logical/or":502,"./function/logical/xor":503,"./function/matrix/column":504,"./function/matrix/concat":505,"./function/matrix/cross":506,"./function/matrix/ctranspose":507,"./function/matrix/det":508,"./function/matrix/diag":509,"./function/matrix/dot":510,"./function/matrix/eigs":511,"./function/matrix/filter":512,"./function/matrix/flatten":513,"./function/matrix/forEach":514,"./function/matrix/getMatrixDataType":515,"./function/matrix/identity":516,"./function/matrix/inv":517,"./function/matrix/kron":518,"./function/matrix/map":519,"./function/matrix/ones":520,"./function/matrix/partitionSelect":521,"./function/matrix/range":522,"./function/matrix/reshape":523,"./function/matrix/resize":524,"./function/matrix/row":525,"./function/matrix/size":526,"./function/matrix/sort":527,"./function/matrix/squeeze":528,"./function/matrix/subset":529,"./function/matrix/trace":530,"./function/matrix/transpose":531,"./function/matrix/zeros":532,"./function/probability/combinations":533,"./function/probability/combinationsWithRep":534,"./function/probability/factorial":535,"./function/probability/gamma":536,"./function/probability/kldivergence":537,"./function/probability/multinomial":538,"./function/probability/permutations":539,"./function/probability/pickRandom":540,"./function/probability/random":541,"./function/probability/randomInt":542,"./function/relational/compare":543,"./function/relational/compareNatural":544,"./function/relational/compareText":545,"./function/relational/deepEqual":546,"./function/relational/equal":547,"./function/relational/equalText":548,"./function/relational/larger":549,"./function/relational/largerEq":550,"./function/relational/smaller":551,"./function/relational/smallerEq":552,"./function/relational/unequal":553,"./function/set/setCartesian":554,"./function/set/setDifference":555,"./function/set/setDistinct":556,"./function/set/setIntersect":557,"./function/set/setIsSubset":558,"./function/set/setMultiplicity":559,"./function/set/setPowerset":560,"./function/set/setSize":561,"./function/set/setSymDifference":562,"./function/set/setUnion":563,"./function/special/erf":564,"./function/statistics/mad":565,"./function/statistics/max":566,"./function/statistics/mean":567,"./function/statistics/median":568,"./function/statistics/min":569,"./function/statistics/mode":570,"./function/statistics/prod":571,"./function/statistics/quantileSeq":572,"./function/statistics/std":573,"./function/statistics/sum":574,"./function/statistics/variance":575,"./function/trigonometry/acos":576,"./function/trigonometry/acosh":577,"./function/trigonometry/acot":578,"./function/trigonometry/acoth":579,"./function/trigonometry/acsc":580,"./function/trigonometry/acsch":581,"./function/trigonometry/asec":582,"./function/trigonometry/asech":583,"./function/trigonometry/asin":584,"./function/trigonometry/asinh":585,"./function/trigonometry/atan":586,"./function/trigonometry/atan2":587,"./function/trigonometry/atanh":588,"./function/trigonometry/cos":589,"./function/trigonometry/cosh":590,"./function/trigonometry/cot":591,"./function/trigonometry/coth":592,"./function/trigonometry/csc":593,"./function/trigonometry/csch":594,"./function/trigonometry/sec":595,"./function/trigonometry/sech":596,"./function/trigonometry/sin":597,"./function/trigonometry/sinh":598,"./function/trigonometry/tan":599,"./function/trigonometry/tanh":600,"./function/units/to":601,"./function/utils/clone":602,"./function/utils/format":603,"./function/utils/hasNumericValue":604,"./function/utils/isInteger":605,"./function/utils/isNaN":606,"./function/utils/isNegative":607,"./function/utils/isNumeric":608,"./function/utils/isPositive":609,"./function/utils/isPrime":610,"./function/utils/isZero":611,"./function/utils/numeric":612,"./function/utils/typeOf":613}],436:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.derivativeDocs=void 0;exports.derivativeDocs={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]}},{}],437:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lsolveDocs=void 0;exports.lsolveDocs={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Solves the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lup","lusolve","usolve","matrix","sparse"]}},{}],438:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lupDocs=void 0;exports.lupDocs={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]}},{}],439:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lusolveDocs=void 0;exports.lusolveDocs={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]}},{}],440:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.qrDocs=void 0;exports.qrDocs={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]}},{}],441:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rationalizeDocs=void 0;exports.rationalizeDocs={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]}},{}],442:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simplifyDocs=void 0;exports.simplifyDocs={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["derivative","parse","evaluate"]}},{}],443:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sluDocs=void 0;exports.sluDocs={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]}},{}],444:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.usolveDocs=void 0;exports.usolveDocs={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Solves the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["lup","lusolve","lsolve","matrix","sparse"]}},{}],445:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absDocs=void 0;exports.absDocs={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]}},{}],446:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addDocs=void 0;exports.addDocs={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]}},{}],447:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cbrtDocs=void 0;exports.cbrtDocs={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]}},{}],448:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilDocs=void 0;exports.ceilDocs={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]}},{}],449:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubeDocs=void 0;exports.cubeDocs={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]}},{}],450:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divideDocs=void 0;exports.divideDocs={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]}},{}],451:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dotDivideDocs=void 0;exports.dotDivideDocs={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]}},{}],452:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dotMultiplyDocs=void 0;exports.dotMultiplyDocs={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]}},{}],453:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dotPowDocs=void 0;exports.dotPowDocs={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]}},{}],454:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expDocs=void 0;exports.expDocs={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]}},{}],455:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expmDocs=void 0;exports.expmDocs={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]}},{}],456:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1Docs=void 0;exports.expm1Docs={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]}},{}],457:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fixDocs=void 0;exports.fixDocs={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]}},{}],458:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDocs=void 0;exports.floorDocs={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]}},{}],459:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gcdDocs=void 0;exports.gcdDocs={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]}},{}],460:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hypotDocs=void 0;exports.hypotDocs={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]}},{}],461:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lcmDocs=void 0;exports.lcmDocs={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]}},{}],462:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logDocs=void 0;exports.logDocs={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]}},{}],463:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log10Docs=void 0;exports.log10Docs={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]}},{}],464:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1pDocs=void 0;exports.log1pDocs={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]}},{}],465:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log2Docs=void 0;exports.log2Docs={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]}},{}],466:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modDocs=void 0;exports.modDocs={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]}},{}],467:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiplyDocs=void 0;exports.multiplyDocs={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]}},{}],468:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normDocs=void 0;exports.normDocs={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']}},{}],469:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nthRootDocs=void 0;exports.nthRootDocs={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]}},{}],470:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nthRootsDocs=void 0;exports.nthRootsDocs={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]}},{}],471:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powDocs=void 0;exports.powDocs={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]}},{}],472:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.roundDocs=void 0;exports.roundDocs={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]}},{}],473:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.signDocs=void 0;exports.signDocs={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]}},{}],474:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtDocs=void 0;exports.sqrtDocs={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]}},{}],475:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtmDocs=void 0;exports.sqrtmDocs={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[1, 2], [3, 4]])"],seealso:["sqrt","abs","square","multiply"]}},{}],476:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareDocs=void 0;exports.squareDocs={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]}},{}],477:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subtractDocs=void 0;exports.subtractDocs={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]}},{}],478:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unaryMinusDocs=void 0;exports.unaryMinusDocs={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]}},{}],479:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unaryPlusDocs=void 0;exports.unaryPlusDocs={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]}},{}],480:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xgcdDocs=void 0;exports.xgcdDocs={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]}},{}],481:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bitAndDocs=void 0;exports.bitAndDocs={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]}},{}],482:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bitNotDocs=void 0;exports.bitNotDocs={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]}},{}],483:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bitOrDocs=void 0;exports.bitOrDocs={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]}},{}],484:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bitXorDocs=void 0;exports.bitXorDocs={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]}},{}],485:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leftShiftDocs=void 0;exports.leftShiftDocs={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]}},{}],486:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rightArithShiftDocs=void 0;exports.rightArithShiftDocs={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]}},{}],487:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rightLogShiftDocs=void 0;exports.rightLogShiftDocs={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]}},{}],488:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bellNumbersDocs=void 0;exports.bellNumbersDocs={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]}},{}],489:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.catalanDocs=void 0;exports.catalanDocs={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]}},{}],490:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compositionDocs=void 0;exports.compositionDocs={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]}},{}],491:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stirlingS2Docs=void 0;exports.stirlingS2Docs={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]}},{}],492:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argDocs=void 0;exports.argDocs={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]}},{}],493:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conjDocs=void 0;exports.conjDocs={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]}},{}],494:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imDocs=void 0;exports.imDocs={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]}},{}],495:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reDocs=void 0;exports.reDocs={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]}},{}],496:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.evaluateDocs=void 0;exports.evaluateDocs={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(" + 4 + ")")'],seealso:[]}},{}],497:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.helpDocs=void 0;exports.helpDocs={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]}},{}],498:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.distanceDocs=void 0;exports.distanceDocs={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]}},{}],499:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectDocs=void 0;exports.intersectDocs={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]}},{}],500:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.andDocs=void 0;exports.andDocs={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]}},{}],501:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notDocs=void 0;exports.notDocs={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]}},{}],502:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.orDocs=void 0;exports.orDocs={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]}},{}],503:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xorDocs=void 0;exports.xorDocs={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]}},{}],504:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.columnDocs=void 0;exports.columnDocs={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row"]}},{}],505:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatDocs=void 0;exports.concatDocs={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},{}],506:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.crossDocs=void 0;exports.crossDocs={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]}},{}],507:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ctransposeDocs=void 0;exports.ctransposeDocs={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]}},{}],508:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.detDocs=void 0;exports.detDocs={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},{}],509:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diagDocs=void 0;exports.diagDocs={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},{}],510:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dotDocs=void 0;exports.dotDocs={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]}},{}],511:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eigsDocs=void 0;exports.eigsDocs={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and eigenvectors of a real symmetric matrix",examples:["eigs([[5, 2.3], [2.3, 1]])"],seealso:["inv"]}},{}],512:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterDocs=void 0;exports.filterDocs={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]}},{}],513:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flattenDocs=void 0;exports.flattenDocs={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]}},{}],514:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEachDocs=void 0;exports.forEachDocs={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["forEach([1, 2, 3], function(val) { console.log(val) })"],seealso:["map","sort","filter"]}},{}],515:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMatrixDataTypeDocs=void 0;exports.getMatrixDataTypeDocs={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]}},{}],516:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identityDocs=void 0;exports.identityDocs={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},{}],517:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.invDocs=void 0;exports.invDocs={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},{}],518:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.kronDocs=void 0;exports.kronDocs={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]}},{}],519:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapDocs=void 0;exports.mapDocs={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]}},{}],520:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesDocs=void 0;exports.onesDocs={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]}},{}],521:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.partitionSelectDocs=void 0;exports.partitionSelectDocs={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1)'],seealso:["sort"]}},{}],522:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rangeDocs=void 0;exports.rangeDocs={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]}},{}],523:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshapeDocs=void 0;exports.reshapeDocs={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])"],seealso:["size","squeeze","resize"]}},{}],524:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeDocs=void 0;exports.resizeDocs={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]}},{}],525:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rowDocs=void 0;exports.rowDocs={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column"]}},{}],526:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sizeDocs=void 0;exports.sizeDocs={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]}},{}],527:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sortDocs=void 0;exports.sortDocs={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]}},{}],528:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squeezeDocs=void 0;exports.squeezeDocs={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]}},{}],529:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subsetDocs=void 0;exports.subsetDocs={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]}},{}],530:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.traceDocs=void 0;exports.traceDocs={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]}},{}],531:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeDocs=void 0;exports.transposeDocs={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]}},{}],532:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosDocs=void 0;exports.zerosDocs={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]}},{}],533:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.combinationsDocs=void 0;exports.combinationsDocs={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]}},{}],534:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.combinationsWithRepDocs=void 0;exports.combinationsWithRepDocs={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]}},{}],535:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.factorialDocs=void 0;exports.factorialDocs={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]}},{}],536:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gammaDocs=void 0;exports.gammaDocs={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]}},{}],537:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.kldivergenceDocs=void 0;exports.kldivergenceDocs={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]}},{}],538:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multinomialDocs=void 0;exports.multinomialDocs={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]}},{}],539:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.permutationsDocs=void 0;exports.permutationsDocs={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]}},{}],540:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pickRandomDocs=void 0;exports.pickRandomDocs={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]}},{}],541:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomDocs=void 0;exports.randomDocs={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]}},{}],542:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomIntDocs=void 0;exports.randomIntDocs={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]}},{}],543:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compareDocs=void 0;exports.compareDocs={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]}},{}],544:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compareNaturalDocs=void 0;exports.compareNaturalDocs={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]}},{}],545:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compareTextDocs=void 0;exports.compareTextDocs={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]}},{}],546:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepEqualDocs=void 0;exports.deepEqualDocs={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]}},{}],547:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalDocs=void 0;exports.equalDocs={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]}},{}],548:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalTextDocs=void 0;exports.equalTextDocs={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]}},{}],549:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.largerDocs=void 0;exports.largerDocs={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]}},{}],550:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.largerEqDocs=void 0;exports.largerEqDocs={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]}},{}],551:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.smallerDocs=void 0;exports.smallerDocs={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]}},{}],552:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.smallerEqDocs=void 0;exports.smallerEqDocs={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]}},{}],553:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unequalDocs=void 0;exports.unequalDocs={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]}},{}],554:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setCartesianDocs=void 0;exports.setCartesianDocs={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]}},{}],555:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setDifferenceDocs=void 0;exports.setDifferenceDocs={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]}},{}],556:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setDistinctDocs=void 0;exports.setDistinctDocs={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]}},{}],557:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setIntersectDocs=void 0;exports.setIntersectDocs={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]}},{}],558:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setIsSubsetDocs=void 0;exports.setIsSubsetDocs={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]}},{}],559:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMultiplicityDocs=void 0;exports.setMultiplicityDocs={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]}},{}],560:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setPowersetDocs=void 0;exports.setPowersetDocs={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]}},{}],561:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setSizeDocs=void 0;exports.setSizeDocs={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]}},{}],562:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setSymDifferenceDocs=void 0;exports.setSymDifferenceDocs={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]}},{}],563:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setUnionDocs=void 0;exports.setUnionDocs={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]}},{}],564:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erfDocs=void 0;exports.erfDocs={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]}},{}],565:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.madDocs=void 0;exports.madDocs={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]}},{}],566:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxDocs=void 0;exports.maxDocs={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]}},{}],567:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanDocs=void 0;exports.meanDocs={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]}},{}],568:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.medianDocs=void 0;exports.medianDocs={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]}},{}],569:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minDocs=void 0;exports.minDocs={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]}},{}],570:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modeDocs=void 0;exports.modeDocs={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]}},{}],571:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prodDocs=void 0;exports.prodDocs={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]}},{}],572:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.quantileSeqDocs=void 0;exports.quantileSeqDocs={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]}},{}],573:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stdDocs=void 0;exports.stdDocs={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]}},{}],574:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sumDocs=void 0;exports.sumDocs={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]}},{}],575:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.varianceDocs=void 0;exports.varianceDocs={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]}},{}],576:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosDocs=void 0;exports.acosDocs={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]}},{}],577:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acoshDocs=void 0;exports.acoshDocs={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]}},{}],578:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acotDocs=void 0;exports.acotDocs={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]}},{}],579:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acothDocs=void 0;exports.acothDocs={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]}},{}],580:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acscDocs=void 0;exports.acscDocs={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]}},{}],581:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acschDocs=void 0;exports.acschDocs={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]}},{}],582:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asecDocs=void 0;exports.asecDocs={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]}},{}],583:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asechDocs=void 0;exports.asechDocs={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]}},{}],584:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinDocs=void 0;exports.asinDocs={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]}},{}],585:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinhDocs=void 0;exports.asinhDocs={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]}},{}],586:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanDocs=void 0;exports.atanDocs={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]}},{}],587:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2Docs=void 0;exports.atan2Docs={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]}},{}],588:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanhDocs=void 0;exports.atanhDocs={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]}},{}],589:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosDocs=void 0;exports.cosDocs={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]}},{}],590:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshDocs=void 0;exports.coshDocs={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]}},{}],591:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cotDocs=void 0;exports.cotDocs={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]}},{}],592:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cothDocs=void 0;exports.cothDocs={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]}},{}],593:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cscDocs=void 0;exports.cscDocs={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]}},{}],594:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cschDocs=void 0;exports.cschDocs={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]}},{}],595:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.secDocs=void 0;exports.secDocs={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]}},{}],596:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sechDocs=void 0;exports.sechDocs={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]}},{}],597:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinDocs=void 0;exports.sinDocs={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]}},{}],598:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinhDocs=void 0;exports.sinhDocs={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]}},{}],599:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanDocs=void 0;exports.tanDocs={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]}},{}],600:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanhDocs=void 0;exports.tanhDocs={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]}},{}],601:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toDocs=void 0;exports.toDocs={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]}},{}],602:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneDocs=void 0;exports.cloneDocs={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]}},{}],603:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatDocs=void 0;exports.formatDocs={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]}},{}],604:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasNumericValueDocs=void 0;exports.hasNumericValueDocs={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]}},{}],605:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isIntegerDocs=void 0;exports.isIntegerDocs={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]}},{}],606:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaNDocs=void 0;exports.isNaNDocs={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]}},{}],607:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNegativeDocs=void 0;exports.isNegativeDocs={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]}},{}],608:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNumericDocs=void 0;exports.isNumericDocs={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]}},{}],609:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPositiveDocs=void 0;exports.isPositiveDocs={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]}},{}],610:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPrimeDocs=void 0;exports.isPrimeDocs={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]}},{}],611:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isZeroDocs=void 0;exports.isZeroDocs={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]}},{}],612:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.numericDocs=void 0;exports.numericDocs={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction)','numeric(4, "Fraction")','numeric(fraction(2, 5), "number)'],seealso:["number","fraction","bignumber","string","format"]}},{}],613:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.typeOfDocs=void 0;exports.typeOfDocs={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]}},{}],614:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCompile=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),dependencies=["typed","parse"],createCompile=(0,_factory.factory)("compile",dependencies,function(_ref){var typed=_ref.typed,parse=_ref.parse;return typed("compile",{string:function(expr){return parse(expr).compile()},"Array | Matrix":function(expr){return(0,_collection.deepMap)(expr,function(entry){return parse(entry).compile()})}})});exports.createCompile=createCompile},{"../../utils/collection":927,"../../utils/factory":931}],615:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDeprecatedEval=void 0;var _factory=require("../../utils/factory"),_log=require("../../utils/log"),createDeprecatedEval=(0,_factory.factory)("eval",["evaluate"],function(_ref){var evaluate=_ref.evaluate;return function(){(0,_log.warnOnce)('Function "eval" has been renamed to "evaluate" in v6.0.0, please use the new function instead.');for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return evaluate.apply(evaluate,args)}});exports.createDeprecatedEval=createDeprecatedEval},{"../../utils/factory":931,"../../utils/log":935}],616:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEvaluate=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),dependencies=["typed","parse"],createEvaluate=(0,_factory.factory)("evaluate",dependencies,function(_ref){var typed=_ref.typed,parse=_ref.parse;return typed("evaluate",{string:function(expr){return parse(expr).compile().evaluate({})},"string, Object":function(expr,scope){return parse(expr).compile().evaluate(scope)},"Array | Matrix":function(expr){var scope={};return(0,_collection.deepMap)(expr,function(entry){return parse(entry).compile().evaluate(scope)})},"Array | Matrix, Object":function(expr,scope){return(0,_collection.deepMap)(expr,function(entry){return parse(entry).compile().evaluate(scope)})}})});exports.createEvaluate=createEvaluate},{"../../utils/collection":927,"../../utils/factory":931}],617:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHelp=void 0;var _factory=require("../../utils/factory"),_customs=require("../../utils/customs"),_embeddedDocs=require("../embeddedDocs/embeddedDocs"),_object=require("../../utils/object"),dependencies=["typed","mathWithTransform","Help"],createHelp=(0,_factory.factory)("help",dependencies,function(_ref){var typed=_ref.typed,mathWithTransform=_ref.mathWithTransform,Help=_ref.Help;return typed("help",{any:function(search){var prop,searchName=search;if("string"!=typeof search)for(prop in mathWithTransform)if((0,_object.hasOwnProperty)(mathWithTransform,prop)&&search===mathWithTransform[prop]){searchName=prop;break}var doc=(0,_customs.getSafeProperty)(_embeddedDocs.embeddedDocs,searchName);if(doc)return new Help(doc);var searchText="function"==typeof searchName?searchName.name:searchName;throw new Error('No documentation found on "'+searchText+'"')}})});exports.createHelp=createHelp},{"../../utils/customs":929,"../../utils/factory":931,"../../utils/object":938,"../embeddedDocs/embeddedDocs":435}],618:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createParser=void 0;var _factory=require("../../utils/factory"),dependencies=["typed","Parser"],createParser=(0,_factory.factory)("parser",dependencies,function(_ref){var typed=_ref.typed,Parser=_ref.Parser;return typed("parser",{"":function(){return new Parser}})});exports.createParser=createParser},{"../../utils/factory":931}],619:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.keywords=void 0;exports.keywords={end:!0}},{}],620:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAccessorNode=void 0;var _is=require("../../utils/is"),_customs=require("../../utils/customs"),_factory=require("../../utils/factory"),_access=require("./utils/access"),dependencies=["subset","Node"],createAccessorNode=(0,_factory.factory)("AccessorNode",dependencies,function(_ref){var subset=_ref.subset,Node=_ref.Node,access=(0,_access.accessFactory)({subset:subset});function AccessorNode(object,index){if(!(this instanceof AccessorNode))throw new SyntaxError("Constructor must be called with the new operator");if(!(0,_is.isNode)(object))throw new TypeError('Node expected for parameter "object"');if(!(0,_is.isIndexNode)(index))throw new TypeError('IndexNode expected for parameter "index"');this.object=object||null,this.index=index,Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function needParenthesis(node){return!((0,_is.isAccessorNode)(node)||(0,_is.isArrayNode)(node)||(0,_is.isConstantNode)(node)||(0,_is.isFunctionNode)(node)||(0,_is.isObjectNode)(node)||(0,_is.isParenthesisNode)(node)||(0,_is.isSymbolNode)(node))}return(AccessorNode.prototype=new Node).type="AccessorNode",AccessorNode.prototype.isAccessorNode=!0,AccessorNode.prototype._compile=function(math,argNames){var evalObject=this.object._compile(math,argNames),evalIndex=this.index._compile(math,argNames);if(this.index.isObjectProperty()){var prop=this.index.getObjectProperty();return function(scope,args,context){return(0,_customs.getSafeProperty)(evalObject(scope,args,context),prop)}}return function(scope,args,context){var object=evalObject(scope,args,context),index=evalIndex(scope,args,object);return access(object,index)}},AccessorNode.prototype.forEach=function(callback){callback(this.object,"object",this),callback(this.index,"index",this)},AccessorNode.prototype.map=function(callback){return new AccessorNode(this._ifNode(callback(this.object,"object",this)),this._ifNode(callback(this.index,"index",this)))},AccessorNode.prototype.clone=function(){return new AccessorNode(this.object,this.index)},AccessorNode.prototype._toString=function(options){var object=this.object.toString(options);return needParenthesis(this.object)&&(object="("+object+")"),object+this.index.toString(options)},AccessorNode.prototype.toHTML=function(options){var object=this.object.toHTML(options);return needParenthesis(this.object)&&(object='<span class="math-parenthesis math-round-parenthesis">(</span>'+object+'<span class="math-parenthesis math-round-parenthesis">)</span>'),object+this.index.toHTML(options)},AccessorNode.prototype._toTex=function(options){var object=this.object.toTex(options);return needParenthesis(this.object)&&(object="\\left(' + object + '\\right)"),object+this.index.toTex(options)},AccessorNode.prototype.toJSON=function(){return{mathjs:"AccessorNode",object:this.object,index:this.index}},AccessorNode.fromJSON=function(json){return new AccessorNode(json.object,json.index)},AccessorNode},{isClass:!0,isNode:!0});exports.createAccessorNode=createAccessorNode},{"../../utils/customs":929,"../../utils/factory":931,"../../utils/is":933,"./utils/access":636}],621:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createArrayNode=void 0;var _is=require("../../utils/is"),_array=require("../../utils/array"),dependencies=["Node"],createArrayNode=(0,require("../../utils/factory").factory)("ArrayNode",dependencies,function(_ref){var Node=_ref.Node;function ArrayNode(items){if(!(this instanceof ArrayNode))throw new SyntaxError("Constructor must be called with the new operator");if(this.items=items||[],!Array.isArray(this.items)||!this.items.every(_is.isNode))throw new TypeError("Array containing Nodes expected");var deprecated=function(){throw new Error("Property `ArrayNode.nodes` is deprecated, use `ArrayNode.items` instead")};Object.defineProperty(this,"nodes",{get:deprecated,set:deprecated})}return(ArrayNode.prototype=new Node).type="ArrayNode",ArrayNode.prototype.isArrayNode=!0,ArrayNode.prototype._compile=function(math,argNames){var evalItems=(0,_array.map)(this.items,function(item){return item._compile(math,argNames)});if("Array"===math.config.matrix)return function(scope,args,context){return(0,_array.map)(evalItems,function(evalItem){return evalItem(scope,args,context)})};var matrix=math.matrix;return function(scope,args,context){return matrix((0,_array.map)(evalItems,function(evalItem){return evalItem(scope,args,context)}))}},ArrayNode.prototype.forEach=function(callback){for(var i=0;i<this.items.length;i++){callback(this.items[i],"items["+i+"]",this)}},ArrayNode.prototype.map=function(callback){for(var items=[],i=0;i<this.items.length;i++)items[i]=this._ifNode(callback(this.items[i],"items["+i+"]",this));return new ArrayNode(items)},ArrayNode.prototype.clone=function(){return new ArrayNode(this.items.slice(0))},ArrayNode.prototype._toString=function(options){return"["+this.items.map(function(node){return node.toString(options)}).join(", ")+"]"},ArrayNode.prototype.toJSON=function(){return{mathjs:"ArrayNode",items:this.items}},ArrayNode.fromJSON=function(json){return new ArrayNode(json.items)},ArrayNode.prototype.toHTML=function(options){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map(function(node){return node.toHTML(options)}).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},ArrayNode.prototype._toTex=function(options){var s="\\begin{bmatrix}";return this.items.forEach(function(node){node.items?s+=node.items.map(function(childNode){return childNode.toTex(options)}).join("&"):s+=node.toTex(options),s+="\\\\"}),s+="\\end{bmatrix}"},ArrayNode},{isClass:!0,isNode:!0});exports.createArrayNode=createArrayNode},{"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933}],622:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAssignmentNode=void 0;var _is=require("../../utils/is"),_customs=require("../../utils/customs"),_factory=require("../../utils/factory"),_access=require("./utils/access"),_assign=require("./utils/assign"),_operators=require("../operators"),dependencies=["subset","?matrix","Node"],createAssignmentNode=(0,_factory.factory)("AssignmentNode",dependencies,function(_ref){var subset=_ref.subset,matrix=_ref.matrix,Node=_ref.Node,access=(0,_access.accessFactory)({subset:subset}),assign=(0,_assign.assignFactory)({subset:subset,matrix:matrix});function AssignmentNode(object,index,value){if(!(this instanceof AssignmentNode))throw new SyntaxError("Constructor must be called with the new operator");if(this.object=object,this.index=value?index:null,this.value=value||index,!(0,_is.isSymbolNode)(object)&&!(0,_is.isAccessorNode)(object))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if((0,_is.isSymbolNode)(object)&&"end"===object.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!(0,_is.isIndexNode)(this.index))throw new TypeError('IndexNode expected as "index"');if(!(0,_is.isNode)(this.value))throw new TypeError('Node expected as "value"');Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function needParenthesis(node,parenthesis){parenthesis=parenthesis||"keep";var precedence=(0,_operators.getPrecedence)(node,parenthesis),exprPrecedence=(0,_operators.getPrecedence)(node.value,parenthesis);return"all"===parenthesis||null!==exprPrecedence&&exprPrecedence<=precedence}return(AssignmentNode.prototype=new Node).type="AssignmentNode",AssignmentNode.prototype.isAssignmentNode=!0,AssignmentNode.prototype._compile=function(math,argNames){var evalObject=this.object._compile(math,argNames),evalIndex=this.index?this.index._compile(math,argNames):null,evalValue=this.value._compile(math,argNames),name=this.object.name;if(this.index){if(this.index.isObjectProperty()){var prop=this.index.getObjectProperty();return function(scope,args,context){var object=evalObject(scope,args,context),value=evalValue(scope,args,context);return(0,_customs.setSafeProperty)(object,prop,value)}}if((0,_is.isSymbolNode)(this.object))return function(scope,args,context){var childObject=evalObject(scope,args,context),value=evalValue(scope,args,context),index=evalIndex(scope,args,childObject);return(0,_customs.setSafeProperty)(scope,name,assign(childObject,index,value)),value};var evalParentObject=this.object.object._compile(math,argNames);if(this.object.index.isObjectProperty()){var parentProp=this.object.index.getObjectProperty();return function(scope,args,context){var parent=evalParentObject(scope,args,context),childObject=(0,_customs.getSafeProperty)(parent,parentProp),index=evalIndex(scope,args,childObject),value=evalValue(scope,args,context);return(0,_customs.setSafeProperty)(parent,parentProp,assign(childObject,index,value)),value}}var evalParentIndex=this.object.index._compile(math,argNames);return function(scope,args,context){var parent=evalParentObject(scope,args,context),parentIndex=evalParentIndex(scope,args,parent),childObject=access(parent,parentIndex),index=evalIndex(scope,args,childObject),value=evalValue(scope,args,context);return assign(parent,parentIndex,assign(childObject,index,value)),value}}if(!(0,_is.isSymbolNode)(this.object))throw new TypeError("SymbolNode expected as object");return function(scope,args,context){return(0,_customs.setSafeProperty)(scope,name,evalValue(scope,args,context))}},AssignmentNode.prototype.forEach=function(callback){callback(this.object,"object",this),this.index&&callback(this.index,"index",this),callback(this.value,"value",this)},AssignmentNode.prototype.map=function(callback){return new AssignmentNode(this._ifNode(callback(this.object,"object",this)),this.index?this._ifNode(callback(this.index,"index",this)):null,this._ifNode(callback(this.value,"value",this)))},AssignmentNode.prototype.clone=function(){return new AssignmentNode(this.object,this.index,this.value)},AssignmentNode.prototype._toString=function(options){var object=this.object.toString(options),index=this.index?this.index.toString(options):"",value=this.value.toString(options);return needParenthesis(this,options&&options.parenthesis)&&(value="("+value+")"),object+index+" = "+value},AssignmentNode.prototype.toJSON=function(){return{mathjs:"AssignmentNode",object:this.object,index:this.index,value:this.value}},AssignmentNode.fromJSON=function(json){return new AssignmentNode(json.object,json.index,json.value)},AssignmentNode.prototype.toHTML=function(options){var object=this.object.toHTML(options),index=this.index?this.index.toHTML(options):"",value=this.value.toHTML(options);return needParenthesis(this,options&&options.parenthesis)&&(value='<span class="math-paranthesis math-round-parenthesis">(</span>'+value+'<span class="math-paranthesis math-round-parenthesis">)</span>'),object+index+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+value},AssignmentNode.prototype._toTex=function(options){var object=this.object.toTex(options),index=this.index?this.index.toTex(options):"",value=this.value.toTex(options);return needParenthesis(this,options&&options.parenthesis)&&(value="\\left(".concat(value,"\\right)")),object+index+":="+value},AssignmentNode},{isClass:!0,isNode:!0});exports.createAssignmentNode=createAssignmentNode},{"../../utils/customs":929,"../../utils/factory":931,"../../utils/is":933,"../operators":638,"./utils/access":636,"./utils/assign":637}],623:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBlockNode=void 0;var _is=require("../../utils/is"),_array=require("../../utils/array"),dependencies=["ResultSet","Node"],createBlockNode=(0,require("../../utils/factory").factory)("BlockNode",dependencies,function(_ref){var ResultSet=_ref.ResultSet,Node=_ref.Node;function BlockNode(blocks){if(!(this instanceof BlockNode))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(blocks))throw new Error("Array expected");this.blocks=blocks.map(function(block){var node=block&&block.node,visible=!block||void 0===block.visible||block.visible;if(!(0,_is.isNode)(node))throw new TypeError('Property "node" must be a Node');if("boolean"!=typeof visible)throw new TypeError('Property "visible" must be a boolean');return{node:node,visible:visible}})}return(BlockNode.prototype=new Node).type="BlockNode",BlockNode.prototype.isBlockNode=!0,BlockNode.prototype._compile=function(math,argNames){var evalBlocks=(0,_array.map)(this.blocks,function(block){return{evaluate:block.node._compile(math,argNames),visible:block.visible}});return function(scope,args,context){var results=[];return(0,_array.forEach)(evalBlocks,function(block){var result=block.evaluate(scope,args,context);block.visible&&results.push(result)}),new ResultSet(results)}},BlockNode.prototype.forEach=function(callback){for(var i=0;i<this.blocks.length;i++)callback(this.blocks[i].node,"blocks["+i+"].node",this)},BlockNode.prototype.map=function(callback){for(var blocks=[],i=0;i<this.blocks.length;i++){var block=this.blocks[i],node=this._ifNode(callback(block.node,"blocks["+i+"].node",this));blocks[i]={node:node,visible:block.visible}}return new BlockNode(blocks)},BlockNode.prototype.clone=function(){return new BlockNode(this.blocks.map(function(block){return{node:block.node,visible:block.visible}}))},BlockNode.prototype._toString=function(options){return this.blocks.map(function(param){return param.node.toString(options)+(param.visible?"":";")}).join("\n")},BlockNode.prototype.toJSON=function(){return{mathjs:"BlockNode",blocks:this.blocks}},BlockNode.fromJSON=function(json){return new BlockNode(json.blocks)},BlockNode.prototype.toHTML=function(options){return this.blocks.map(function(param){return param.node.toHTML(options)+(param.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')},BlockNode.prototype._toTex=function(options){return this.blocks.map(function(param){return param.node.toTex(options)+(param.visible?"":";")}).join("\\;\\;\n")},BlockNode},{isClass:!0,isNode:!0});exports.createBlockNode=createBlockNode},{"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933}],624:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConditionalNode=void 0;var _is=require("../../utils/is"),_factory=require("../../utils/factory"),_operators=require("../operators"),dependencies=["Node"],createConditionalNode=(0,_factory.factory)("ConditionalNode",dependencies,function(_ref){var Node=_ref.Node;function ConditionalNode(condition,trueExpr,falseExpr){if(!(this instanceof ConditionalNode))throw new SyntaxError("Constructor must be called with the new operator");if(!(0,_is.isNode)(condition))throw new TypeError("Parameter condition must be a Node");if(!(0,_is.isNode)(trueExpr))throw new TypeError("Parameter trueExpr must be a Node");if(!(0,_is.isNode)(falseExpr))throw new TypeError("Parameter falseExpr must be a Node");this.condition=condition,this.trueExpr=trueExpr,this.falseExpr=falseExpr}return(ConditionalNode.prototype=new Node).type="ConditionalNode",ConditionalNode.prototype.isConditionalNode=!0,ConditionalNode.prototype._compile=function(math,argNames){var evalCondition=this.condition._compile(math,argNames),evalTrueExpr=this.trueExpr._compile(math,argNames),evalFalseExpr=this.falseExpr._compile(math,argNames);return function(scope,args,context){return(function(condition){if("number"==typeof condition||"boolean"==typeof condition||"string"==typeof condition)return!!condition;if(condition){if((0,_is.isBigNumber)(condition))return!condition.isZero();if((0,_is.isComplex)(condition))return!(!condition.re&&!condition.im);if((0,_is.isUnit)(condition))return!!condition.value}if(null!=condition)throw new TypeError('Unsupported type of condition "'+(0,_is.typeOf)(condition)+'"');return!1}(evalCondition(scope,args,context))?evalTrueExpr:evalFalseExpr)(scope,args,context)}},ConditionalNode.prototype.forEach=function(callback){callback(this.condition,"condition",this),callback(this.trueExpr,"trueExpr",this),callback(this.falseExpr,"falseExpr",this)},ConditionalNode.prototype.map=function(callback){return new ConditionalNode(this._ifNode(callback(this.condition,"condition",this)),this._ifNode(callback(this.trueExpr,"trueExpr",this)),this._ifNode(callback(this.falseExpr,"falseExpr",this)))},ConditionalNode.prototype.clone=function(){return new ConditionalNode(this.condition,this.trueExpr,this.falseExpr)},ConditionalNode.prototype._toString=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",precedence=(0,_operators.getPrecedence)(this,parenthesis),condition=this.condition.toString(options),conditionPrecedence=(0,_operators.getPrecedence)(this.condition,parenthesis);("all"===parenthesis||"OperatorNode"===this.condition.type||null!==conditionPrecedence&&conditionPrecedence<=precedence)&&(condition="("+condition+")");var trueExpr=this.trueExpr.toString(options),truePrecedence=(0,_operators.getPrecedence)(this.trueExpr,parenthesis);("all"===parenthesis||"OperatorNode"===this.trueExpr.type||null!==truePrecedence&&truePrecedence<=precedence)&&(trueExpr="("+trueExpr+")");var falseExpr=this.falseExpr.toString(options),falsePrecedence=(0,_operators.getPrecedence)(this.falseExpr,parenthesis);return("all"===parenthesis||"OperatorNode"===this.falseExpr.type||null!==falsePrecedence&&falsePrecedence<=precedence)&&(falseExpr="("+falseExpr+")"),condition+" ? "+trueExpr+" : "+falseExpr},ConditionalNode.prototype.toJSON=function(){return{mathjs:"ConditionalNode",condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}},ConditionalNode.fromJSON=function(json){return new ConditionalNode(json.condition,json.trueExpr,json.falseExpr)},ConditionalNode.prototype.toHTML=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",precedence=(0,_operators.getPrecedence)(this,parenthesis),condition=this.condition.toHTML(options),conditionPrecedence=(0,_operators.getPrecedence)(this.condition,parenthesis);("all"===parenthesis||"OperatorNode"===this.condition.type||null!==conditionPrecedence&&conditionPrecedence<=precedence)&&(condition='<span class="math-parenthesis math-round-parenthesis">(</span>'+condition+'<span class="math-parenthesis math-round-parenthesis">)</span>');var trueExpr=this.trueExpr.toHTML(options),truePrecedence=(0,_operators.getPrecedence)(this.trueExpr,parenthesis);("all"===parenthesis||"OperatorNode"===this.trueExpr.type||null!==truePrecedence&&truePrecedence<=precedence)&&(trueExpr='<span class="math-parenthesis math-round-parenthesis">(</span>'+trueExpr+'<span class="math-parenthesis math-round-parenthesis">)</span>');var falseExpr=this.falseExpr.toHTML(options),falsePrecedence=(0,_operators.getPrecedence)(this.falseExpr,parenthesis);return("all"===parenthesis||"OperatorNode"===this.falseExpr.type||null!==falsePrecedence&&falsePrecedence<=precedence)&&(falseExpr='<span class="math-parenthesis math-round-parenthesis">(</span>'+falseExpr+'<span class="math-parenthesis math-round-parenthesis">)</span>'),condition+'<span class="math-operator math-conditional-operator">?</span>'+trueExpr+'<span class="math-operator math-conditional-operator">:</span>'+falseExpr},ConditionalNode.prototype._toTex=function(options){return"\\begin{cases} {"+this.trueExpr.toTex(options)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(options)+"}\\\\{"+this.falseExpr.toTex(options)+"}, &\\quad{\\text{otherwise}}\\end{cases}"},ConditionalNode},{isClass:!0,isNode:!0});exports.createConditionalNode=createConditionalNode},{"../../utils/factory":931,"../../utils/is":933,"../operators":638}],625:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConstantNode=void 0;var _string=require("../../utils/string"),_is=require("../../utils/is"),_latex=require("../../utils/latex"),dependencies=["Node"],createConstantNode=(0,require("../../utils/factory").factory)("ConstantNode",dependencies,function(_ref){var Node=_ref.Node;function ConstantNode(value){if(!(this instanceof ConstantNode))throw new SyntaxError("Constructor must be called with the new operator");if(2===arguments.length)throw new SyntaxError("new ConstantNode(valueStr, valueType) is not supported anymore since math v4.0.0. Use new ConstantNode(value) instead, where value is a non-stringified value.");this.value=value}return(ConstantNode.prototype=new Node).type="ConstantNode",ConstantNode.prototype.isConstantNode=!0,ConstantNode.prototype._compile=function(math,argNames){var value=this.value;return function(){return value}},ConstantNode.prototype.forEach=function(callback){},ConstantNode.prototype.map=function(callback){return this.clone()},ConstantNode.prototype.clone=function(){return new ConstantNode(this.value)},ConstantNode.prototype._toString=function(options){return(0,_string.format)(this.value,options)},ConstantNode.prototype.toHTML=function(options){var value=this._toString(options);switch((0,_is.typeOf)(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+value+"</span>";case"string":return'<span class="math-string">'+value+"</span>";case"boolean":return'<span class="math-boolean">'+value+"</span>";case"null":return'<span class="math-null-symbol">'+value+"</span>";case"undefined":return'<span class="math-undefined">'+value+"</span>";default:return'<span class="math-symbol">'+value+"</span>"}},ConstantNode.prototype.toJSON=function(){return{mathjs:"ConstantNode",value:this.value}},ConstantNode.fromJSON=function(json){return new ConstantNode(json.value)},ConstantNode.prototype._toTex=function(options){var value=this._toString(options);switch((0,_is.typeOf)(this.value)){case"string":return"\\mathtt{"+(0,_latex.escapeLatex)(value)+"}";case"number":case"BigNumber":if(!isFinite(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var index=value.toLowerCase().indexOf("e");return-1!==index?value.substring(0,index)+"\\cdot10^{"+value.substring(index+1)+"}":value;case"Fraction":return this.value.toLatex();default:return value}},ConstantNode},{isClass:!0,isNode:!0});exports.createConstantNode=createConstantNode},{"../../utils/factory":931,"../../utils/is":933,"../../utils/latex":934,"../../utils/string":941}],626:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFunctionAssignmentNode=void 0;var _is=require("../../utils/is"),_keywords=require("../keywords"),_string=require("../../utils/string"),_array=require("../../utils/array"),_latex=require("../../utils/latex"),_operators=require("../operators"),_customs=require("../../utils/customs"),dependencies=["typed","Node"],createFunctionAssignmentNode=(0,require("../../utils/factory").factory)("FunctionAssignmentNode",dependencies,function(_ref){var typed=_ref.typed,Node=_ref.Node;function FunctionAssignmentNode(name,params,expr){if(!(this instanceof FunctionAssignmentNode))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof name)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(params))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!(0,_is.isNode)(expr))throw new TypeError('Node expected for parameter "expr"');if(name in _keywords.keywords)throw new Error('Illegal function name, "'+name+'" is a reserved keyword');this.name=name,this.params=params.map(function(param){return param&&param.name||param}),this.types=params.map(function(param){return param&&param.type||"any"}),this.expr=expr}function needParenthesis(node,parenthesis){var precedence=(0,_operators.getPrecedence)(node,parenthesis),exprPrecedence=(0,_operators.getPrecedence)(node.expr,parenthesis);return"all"===parenthesis||null!==exprPrecedence&&exprPrecedence<=precedence}return(FunctionAssignmentNode.prototype=new Node).type="FunctionAssignmentNode",FunctionAssignmentNode.prototype.isFunctionAssignmentNode=!0,FunctionAssignmentNode.prototype._compile=function(math,argNames){var childArgNames=Object.create(argNames);(0,_array.forEach)(this.params,function(param){childArgNames[param]=!0});var evalExpr=this.expr._compile(math,childArgNames),name=this.name,params=this.params,signature=(0,_array.join)(this.types,","),syntax=name+"("+(0,_array.join)(this.params,", ")+")";return function(scope,args,context){var signatures={};signatures[signature]=function(){for(var childArgs=Object.create(args),i=0;i<params.length;i++)childArgs[params[i]]=arguments[i];return evalExpr(scope,childArgs,context)};var fn=typed(name,signatures);return fn.syntax=syntax,(0,_customs.setSafeProperty)(scope,name,fn),fn}},FunctionAssignmentNode.prototype.forEach=function(callback){callback(this.expr,"expr",this)},FunctionAssignmentNode.prototype.map=function(callback){var expr=this._ifNode(callback(this.expr,"expr",this));return new FunctionAssignmentNode(this.name,this.params.slice(0),expr)},FunctionAssignmentNode.prototype.clone=function(){return new FunctionAssignmentNode(this.name,this.params.slice(0),this.expr)},FunctionAssignmentNode.prototype._toString=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",expr=this.expr.toString(options);return needParenthesis(this,parenthesis)&&(expr="("+expr+")"),this.name+"("+this.params.join(", ")+") = "+expr},FunctionAssignmentNode.prototype.toJSON=function(){var types=this.types;return{mathjs:"FunctionAssignmentNode",name:this.name,params:this.params.map(function(param,index){return{name:param,type:types[index]}}),expr:this.expr}},FunctionAssignmentNode.fromJSON=function(json){return new FunctionAssignmentNode(json.name,json.params,json.expr)},FunctionAssignmentNode.prototype.toHTML=function(options){for(var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",params=[],i=0;i<this.params.length;i++)params.push('<span class="math-symbol math-parameter">'+(0,_string.escape)(this.params[i])+"</span>");var expr=this.expr.toHTML(options);return needParenthesis(this,parenthesis)&&(expr='<span class="math-parenthesis math-round-parenthesis">(</span>'+expr+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+(0,_string.escape)(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+params.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+expr},FunctionAssignmentNode.prototype._toTex=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",expr=this.expr.toTex(options);return needParenthesis(this,parenthesis)&&(expr="\\left(".concat(expr,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(_latex.toSymbol).join(",")+"\\right):="+expr},FunctionAssignmentNode},{isClass:!0,isNode:!0});exports.createFunctionAssignmentNode=createFunctionAssignmentNode},{"../../utils/array":922,"../../utils/customs":929,"../../utils/factory":931,"../../utils/is":933,"../../utils/latex":934,"../../utils/string":941,"../keywords":619,"../operators":638}],627:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFunctionNode=void 0;var _is=require("../../utils/is"),_string=require("../../utils/string"),_object=require("../../utils/object"),_array=require("../../utils/array"),_customs=require("../../utils/customs"),_factory=require("../../utils/factory"),_latex=require("../../utils/latex");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var dependencies=["math","Node","SymbolNode"],createFunctionNode=(0,_factory.factory)("FunctionNode",dependencies,function(_ref){var math=_ref.math,Node=_ref.Node,SymbolNode=_ref.SymbolNode;function FunctionNode(fn,args){if(!(this instanceof FunctionNode))throw new SyntaxError("Constructor must be called with the new operator");if("string"==typeof fn&&(fn=new SymbolNode(fn)),!(0,_is.isNode)(fn))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(args)||!args.every(_is.isNode))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=fn,this.args=args||[],Object.defineProperty(this,"name",{get:function(){return this.fn.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}});var deprecated=function(){throw new Error("Property `FunctionNode.object` is deprecated, use `FunctionNode.fn` instead")};Object.defineProperty(this,"object",{get:deprecated,set:deprecated})}(FunctionNode.prototype=new Node).type="FunctionNode",FunctionNode.prototype.isFunctionNode=!0,FunctionNode.prototype._compile=function(math,argNames){if(!(this instanceof FunctionNode))throw new TypeError("No valid FunctionNode");var evalArgs=(0,_array.map)(this.args,function(arg){return arg._compile(math,argNames)});if((0,_is.isSymbolNode)(this.fn)){var _name=this.fn.name,fn=_name in math?(0,_customs.getSafeProperty)(math,_name):void 0;if("function"==typeof fn&&!0===fn.rawArgs){var rawArgs=this.args;return function(scope,args){return(_name in scope?(0,_customs.getSafeProperty)(scope,_name):fn)(rawArgs,math,_extends({},scope,args))}}if(1===evalArgs.length){var evalArg0=evalArgs[0];return function(scope,args,context){return(_name in scope?(0,_customs.getSafeProperty)(scope,_name):fn)(evalArg0(scope,args,context))}}if(2!==evalArgs.length)return function(scope,args,context){return(_name in scope?(0,_customs.getSafeProperty)(scope,_name):fn).apply(null,(0,_array.map)(evalArgs,function(evalArg){return evalArg(scope,args,context)}))};var _evalArg=evalArgs[0],evalArg1=evalArgs[1];return function(scope,args,context){return(_name in scope?(0,_customs.getSafeProperty)(scope,_name):fn)(_evalArg(scope,args,context),evalArg1(scope,args,context))}}if((0,_is.isAccessorNode)(this.fn)&&(0,_is.isIndexNode)(this.fn.index)&&this.fn.index.isObjectProperty()){var evalObject=this.fn.object._compile(math,argNames),prop=this.fn.index.getObjectProperty(),_rawArgs=this.args;return function(scope,args,context){var object=evalObject(scope,args,context);return(0,_customs.validateSafeMethod)(object,prop),object[prop]&&object[prop].rawArgs?object[prop](_rawArgs,math,_extends({},scope,args)):object[prop].apply(object,(0,_array.map)(evalArgs,function(evalArg){return evalArg(scope,args,context)}))}}var evalFn=this.fn._compile(math,argNames),_rawArgs2=this.args;return function(scope,args,context){var fn=evalFn(scope,args,context);return fn&&fn.rawArgs?fn(_rawArgs2,math,_extends({},scope,args)):fn.apply(fn,(0,_array.map)(evalArgs,function(evalArg){return evalArg(scope,args,context)}))}},FunctionNode.prototype.forEach=function(callback){callback(this.fn,"fn",this);for(var i=0;i<this.args.length;i++)callback(this.args[i],"args["+i+"]",this)},FunctionNode.prototype.map=function(callback){for(var fn=this._ifNode(callback(this.fn,"fn",this)),args=[],i=0;i<this.args.length;i++)args[i]=this._ifNode(callback(this.args[i],"args["+i+"]",this));return new FunctionNode(fn,args)},FunctionNode.prototype.clone=function(){return new FunctionNode(this.fn,this.args.slice(0))};var nodeToString=FunctionNode.prototype.toString;function expandTemplate(template,node,options){for(var match,latex="",regex=new RegExp("\\$(?:\\{([a-z_][a-z_0-9]*)(?:\\[([0-9]+)\\])?\\}|\\$)","ig"),inputPos=0;null!==(match=regex.exec(template));)if(latex+=template.substring(inputPos,match.index),inputPos=match.index,"$$"===match[0])latex+="$",inputPos++;else{inputPos+=match[0].length;var property=node[match[1]];if(!property)throw new ReferenceError("Template: Property "+match[1]+" does not exist.");if(void 0===match[2])switch(_typeof(property)){case"string":latex+=property;break;case"object":if((0,_is.isNode)(property))latex+=property.toTex(options);else{if(!Array.isArray(property))throw new TypeError("Template: "+match[1]+" has to be a Node, String or array of Nodes");latex+=property.map(function(arg,index){if((0,_is.isNode)(arg))return arg.toTex(options);throw new TypeError("Template: "+match[1]+"["+index+"] is not a Node.")}).join(",")}break;default:throw new TypeError("Template: "+match[1]+" has to be a Node, String or array of Nodes")}else{if(!(0,_is.isNode)(property[match[2]]&&property[match[2]]))throw new TypeError("Template: "+match[1]+"["+match[2]+"] is not a Node.");latex+=property[match[2]].toTex(options)}}return latex+=template.slice(inputPos)}FunctionNode.prototype.toString=function(options){var customString,name=this.fn.toString(options);return options&&"object"===_typeof(options.handler)&&(0,_object.hasOwnProperty)(options.handler,name)&&(customString=options.handler[name](this,options)),void 0!==customString?customString:nodeToString.call(this,options)},FunctionNode.prototype._toString=function(options){var args=this.args.map(function(arg){return arg.toString(options)});return((0,_is.isFunctionAssignmentNode)(this.fn)?"("+this.fn.toString(options)+")":this.fn.toString(options))+"("+args.join(", ")+")"},FunctionNode.prototype.toJSON=function(){return{mathjs:"FunctionNode",fn:this.fn,args:this.args}},FunctionNode.fromJSON=function(json){return new FunctionNode(json.fn,json.args)},FunctionNode.prototype.toHTML=function(options){var args=this.args.map(function(arg){return arg.toHTML(options)});return'<span class="math-function">'+(0,_string.escape)(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+args.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'};var nodeToTex=FunctionNode.prototype.toTex;return FunctionNode.prototype.toTex=function(options){var customTex;return options&&"object"===_typeof(options.handler)&&(0,_object.hasOwnProperty)(options.handler,this.name)&&(customTex=options.handler[this.name](this,options)),void 0!==customTex?customTex:nodeToTex.call(this,options)},FunctionNode.prototype._toTex=function(options){var latexConverter,customToTex,args=this.args.map(function(arg){return arg.toTex(options)});switch(_latex.latexFunctions[this.name]&&(latexConverter=_latex.latexFunctions[this.name]),!math[this.name]||"function"!=typeof math[this.name].toTex&&"object"!==_typeof(math[this.name].toTex)&&"string"!=typeof math[this.name].toTex||(latexConverter=math[this.name].toTex),_typeof(latexConverter)){case"function":customToTex=latexConverter(this,options);break;case"string":customToTex=expandTemplate(latexConverter,this,options);break;case"object":switch(_typeof(latexConverter[args.length])){case"function":customToTex=latexConverter[args.length](this,options);break;case"string":customToTex=expandTemplate(latexConverter[args.length],this,options)}}return void 0!==customToTex?customToTex:expandTemplate(_latex.defaultTemplate,this,options)},FunctionNode.prototype.getIdentifier=function(){return this.type+":"+this.name},FunctionNode},{isClass:!0,isNode:!0});exports.createFunctionNode=createFunctionNode},{"../../utils/array":922,"../../utils/customs":929,"../../utils/factory":931,"../../utils/is":933,"../../utils/latex":934,"../../utils/object":938,"../../utils/string":941}],628:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIndexNode=void 0;var _is=require("../../utils/is"),_array=require("../../utils/array"),_string=require("../../utils/string"),_factory=require("../../utils/factory"),_customs=require("../../utils/customs");function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var dependencies=["Range","Node","size"],createIndexNode=(0,_factory.factory)("IndexNode",dependencies,function(_ref){var Range=_ref.Range,Node=_ref.Node,size=_ref.size;function IndexNode(dimensions,dotNotation){if(!(this instanceof IndexNode))throw new SyntaxError("Constructor must be called with the new operator");if(this.dimensions=dimensions,this.dotNotation=dotNotation||!1,!Array.isArray(dimensions)||!dimensions.every(_is.isNode))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties");var deprecated=function(){throw new Error("Property `IndexNode.object` is deprecated, use `IndexNode.fn` instead")};Object.defineProperty(this,"object",{get:deprecated,set:deprecated})}function createRange(start,end,step){return new Range((0,_is.isBigNumber)(start)?start.toNumber():start,(0,_is.isBigNumber)(end)?end.toNumber():end,(0,_is.isBigNumber)(step)?step.toNumber():step)}return(IndexNode.prototype=new Node).type="IndexNode",IndexNode.prototype.isIndexNode=!0,IndexNode.prototype._compile=function(math,argNames){var evalDimensions=(0,_array.map)(this.dimensions,function(range,i){if((0,_is.isRangeNode)(range)){if(range.needsEnd()){var childArgNames=Object.create(argNames);childArgNames.end=!0;var evalStart=range.start._compile(math,childArgNames),evalEnd=range.end._compile(math,childArgNames),evalStep=range.step?range.step._compile(math,childArgNames):function(){return 1};return function(scope,args,context){var s=size(context).valueOf(),childArgs=Object.create(args);return childArgs.end=s[i],createRange(evalStart(scope,childArgs,context),evalEnd(scope,childArgs,context),evalStep(scope,childArgs,context))}}var _evalStart=range.start._compile(math,argNames),_evalEnd=range.end._compile(math,argNames),_evalStep=range.step?range.step._compile(math,argNames):function(){return 1};return function(scope,args,context){return createRange(_evalStart(scope,args,context),_evalEnd(scope,args,context),_evalStep(scope,args,context))}}if((0,_is.isSymbolNode)(range)&&"end"===range.name){var _childArgNames=Object.create(argNames);_childArgNames.end=!0;var evalRange=range._compile(math,_childArgNames);return function(scope,args,context){var s=size(context).valueOf(),childArgs=Object.create(args);return childArgs.end=s[i],evalRange(scope,childArgs,context)}}var _evalRange=range._compile(math,argNames);return function(scope,args,context){return _evalRange(scope,args,context)}}),index=(0,_customs.getSafeProperty)(math,"index");return function(scope,args,context){var dimensions=(0,_array.map)(evalDimensions,function(evalDimension){return evalDimension(scope,args,context)});return index.apply(void 0,_toConsumableArray(dimensions))}},IndexNode.prototype.forEach=function(callback){for(var i=0;i<this.dimensions.length;i++)callback(this.dimensions[i],"dimensions["+i+"]",this)},IndexNode.prototype.map=function(callback){for(var dimensions=[],i=0;i<this.dimensions.length;i++)dimensions[i]=this._ifNode(callback(this.dimensions[i],"dimensions["+i+"]",this));return new IndexNode(dimensions,this.dotNotation)},IndexNode.prototype.clone=function(){return new IndexNode(this.dimensions.slice(0),this.dotNotation)},IndexNode.prototype.isObjectProperty=function(){return 1===this.dimensions.length&&(0,_is.isConstantNode)(this.dimensions[0])&&"string"==typeof this.dimensions[0].value},IndexNode.prototype.getObjectProperty=function(){return this.isObjectProperty()?this.dimensions[0].value:null},IndexNode.prototype._toString=function(options){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"},IndexNode.prototype.toJSON=function(){return{mathjs:"IndexNode",dimensions:this.dimensions,dotNotation:this.dotNotation}},IndexNode.fromJSON=function(json){return new IndexNode(json.dimensions,json.dotNotation)},IndexNode.prototype.toHTML=function(options){for(var dimensions=[],i=0;i<this.dimensions.length;i++)dimensions[i]=this.dimensions[i].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+(0,_string.escape)(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+dimensions.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},IndexNode.prototype._toTex=function(options){var dimensions=this.dimensions.map(function(range){return range.toTex(options)});return this.dotNotation?"."+this.getObjectProperty():"_{"+dimensions.join(",")+"}"},IndexNode},{isClass:!0,isNode:!0});exports.createIndexNode=createIndexNode},{"../../utils/array":922,"../../utils/customs":929,"../../utils/factory":931,"../../utils/is":933,"../../utils/string":941}],629:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNode=void 0;var _is=require("../../utils/is"),_keywords=require("../keywords"),_object=require("../../utils/object"),_factory=require("../../utils/factory"),_log=require("../../utils/log");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var dependencies=["mathWithTransform"],createNode=(0,_factory.factory)("Node",dependencies,function(_ref){var mathWithTransform=_ref.mathWithTransform;function Node(){if(!(this instanceof Node))throw new SyntaxError("Constructor must be called with the new operator")}return Node.prototype.evaluate=function(scope){return this.compile().evaluate(scope)},Node.prototype.eval=function(scope){return(0,_log.warnOnce)("Method Node.eval is renamed to Node.evaluate. Please use the new method name."),this.evaluate(scope)},Node.prototype.type="Node",Node.prototype.isNode=!0,Node.prototype.comment="",Node.prototype.compile=function(){var expr=this._compile(mathWithTransform,{}),args={},context=null;function evaluate(scope){var s=scope||{};return function(scope){for(var symbol in scope)if((0,_object.hasOwnProperty)(scope,symbol)&&symbol in _keywords.keywords)throw new Error('Scope contains an illegal symbol, "'+symbol+'" is a reserved keyword')}(s),expr(s,args,context)}return{evaluate:evaluate,eval:function(scope){return(0,_log.warnOnce)("Method eval is renamed to evaluate. Please use the new method."),evaluate(scope)}}},Node.prototype._compile=function(math,argNames){throw new Error("Method _compile should be implemented by type "+this.type)},Node.prototype.forEach=function(callback){throw new Error("Cannot run forEach on a Node interface")},Node.prototype.map=function(callback){throw new Error("Cannot run map on a Node interface")},Node.prototype._ifNode=function(node){if(!(0,_is.isNode)(node))throw new TypeError("Callback function must return a Node");return node},Node.prototype.traverse=function(callback){callback(this,null,null),function _traverse(node,callback){node.forEach(function(child,path,parent){callback(child,path,parent),_traverse(child,callback)})}(this,callback)},Node.prototype.transform=function(callback){return function _transform(child,path,parent){var replacement=callback(child,path,parent);return replacement!==child?replacement:child.map(_transform)}(this,null,null)},Node.prototype.filter=function(callback){var nodes=[];return this.traverse(function(node,path,parent){callback(node,path,parent)&&nodes.push(node)}),nodes},Node.prototype.find=function(){throw new Error("Function Node.find is deprecated. Use Node.filter instead.")},Node.prototype.match=function(){throw new Error("Function Node.match is deprecated. See functions Node.filter, Node.transform, Node.traverse.")},Node.prototype.clone=function(){throw new Error("Cannot clone a Node interface")},Node.prototype.cloneDeep=function(){return this.map(function(node){return node.cloneDeep()})},Node.prototype.equals=function(other){return!!other&&(0,_object.deepStrictEqual)(this,other)},Node.prototype.toString=function(options){var customString;if(options&&"object"===_typeof(options))switch(_typeof(options.handler)){case"object":case"undefined":break;case"function":customString=options.handler(this,options);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==customString?customString:this._toString(options)},Node.prototype.toJSON=function(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)},Node.prototype.toHTML=function(options){var customString;if(options&&"object"===_typeof(options))switch(_typeof(options.handler)){case"object":case"undefined":break;case"function":customString=options.handler(this,options);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==customString?customString:this.toHTML(options)},Node.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type)},Node.prototype.toTex=function(options){var customTex;if(options&&"object"===_typeof(options))switch(_typeof(options.handler)){case"object":case"undefined":break;case"function":customTex=options.handler(this,options);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==customTex?customTex:this._toTex(options)},Node.prototype._toTex=function(options){throw new Error("_toTex not implemented for "+this.type)},Node.prototype.getIdentifier=function(){return this.type},Node.prototype.getContent=function(){return this},Node},{isClass:!0,isNode:!0});exports.createNode=createNode},{"../../utils/factory":931,"../../utils/is":933,"../../utils/log":935,"../../utils/object":938,"../keywords":619}],630:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createObjectNode=void 0;var _is=require("../../utils/is"),_string=require("../../utils/string"),_customs=require("../../utils/customs"),_object=require("../../utils/object");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var dependencies=["Node"],createObjectNode=(0,require("../../utils/factory").factory)("ObjectNode",dependencies,function(_ref){var Node=_ref.Node;function ObjectNode(properties){if(!(this instanceof ObjectNode))throw new SyntaxError("Constructor must be called with the new operator");if(this.properties=properties||{},properties&&("object"!==_typeof(properties)||!Object.keys(properties).every(function(key){return(0,_is.isNode)(properties[key])})))throw new TypeError("Object containing Nodes expected")}return(ObjectNode.prototype=new Node).type="ObjectNode",ObjectNode.prototype.isObjectNode=!0,ObjectNode.prototype._compile=function(math,argNames){var evalEntries={};for(var key in this.properties)if((0,_object.hasOwnProperty)(this.properties,key)){var stringifiedKey=(0,_string.stringify)(key),parsedKey=JSON.parse(stringifiedKey);if(!(0,_customs.isSafeProperty)(this.properties,parsedKey))throw new Error('No access to property "'+parsedKey+'"');evalEntries[parsedKey]=this.properties[key]._compile(math,argNames)}return function(scope,args,context){var obj={};for(var _key in evalEntries)(0,_object.hasOwnProperty)(evalEntries,_key)&&(obj[_key]=evalEntries[_key](scope,args,context));return obj}},ObjectNode.prototype.forEach=function(callback){for(var key in this.properties)(0,_object.hasOwnProperty)(this.properties,key)&&callback(this.properties[key],"properties["+(0,_string.stringify)(key)+"]",this)},ObjectNode.prototype.map=function(callback){var properties={};for(var key in this.properties)(0,_object.hasOwnProperty)(this.properties,key)&&(properties[key]=this._ifNode(callback(this.properties[key],"properties["+(0,_string.stringify)(key)+"]",this)));return new ObjectNode(properties)},ObjectNode.prototype.clone=function(){var properties={};for(var key in this.properties)(0,_object.hasOwnProperty)(this.properties,key)&&(properties[key]=this.properties[key]);return new ObjectNode(properties)},ObjectNode.prototype._toString=function(options){var entries=[];for(var key in this.properties)(0,_object.hasOwnProperty)(this.properties,key)&&entries.push((0,_string.stringify)(key)+": "+this.properties[key].toString(options));return"{"+entries.join(", ")+"}"},ObjectNode.prototype.toJSON=function(){return{mathjs:"ObjectNode",properties:this.properties}},ObjectNode.fromJSON=function(json){return new ObjectNode(json.properties)},ObjectNode.prototype.toHTML=function(options){var entries=[];for(var key in this.properties)(0,_object.hasOwnProperty)(this.properties,key)&&entries.push('<span class="math-symbol math-property">'+(0,_string.escape)(key)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[key].toHTML(options));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+entries.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'},ObjectNode.prototype._toTex=function(options){var entries=[];for(var key in this.properties)(0,_object.hasOwnProperty)(this.properties,key)&&entries.push("\\mathbf{"+key+":} & "+this.properties[key].toTex(options)+"\\\\");return"\\left\\{\\begin{array}{ll}".concat(entries.join("\n"),"\\end{array}\\right\\}")},ObjectNode},{isClass:!0,isNode:!0});exports.createObjectNode=createObjectNode},{"../../utils/customs":929,"../../utils/factory":931,"../../utils/is":933,"../../utils/object":938,"../../utils/string":941}],631:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOperatorNode=void 0;var _is=require("../../utils/is"),_array=require("../../utils/array"),_string=require("../../utils/string"),_customs=require("../../utils/customs"),_operators=require("../operators"),_latex=require("../../utils/latex"),dependencies=["Node"],createOperatorNode=(0,require("../../utils/factory").factory)("OperatorNode",dependencies,function(_ref){var Node=_ref.Node;function OperatorNode(op,fn,args,implicit){if(!(this instanceof OperatorNode))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof op)throw new TypeError('string expected for parameter "op"');if("string"!=typeof fn)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(args)||!args.every(_is.isNode))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===implicit,this.op=op,this.fn=fn,this.args=args||[]}function calculateNecessaryParentheses(root,parenthesis,implicit,args,latex){var result,precedence=(0,_operators.getPrecedence)(root,parenthesis),associativity=(0,_operators.getAssociativity)(root,parenthesis);if("all"===parenthesis||2<args.length&&"OperatorNode:add"!==root.getIdentifier()&&"OperatorNode:multiply"!==root.getIdentifier())return args.map(function(arg){switch(arg.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});switch(args.length){case 0:result=[];break;case 1:var operandPrecedence=(0,_operators.getPrecedence)(args[0],parenthesis);if(latex&&null!==operandPrecedence){var operandIdentifier,rootIdentifier="keep"===parenthesis?(operandIdentifier=args[0].getIdentifier(),root.getIdentifier()):(operandIdentifier=args[0].getContent().getIdentifier(),root.getContent().getIdentifier());if(!1===_operators.properties[precedence][rootIdentifier].latexLeftParens){result=[!1];break}if(!1===_operators.properties[operandPrecedence][operandIdentifier].latexParens){result=[!1];break}}if(null===operandPrecedence){result=[!1];break}if(operandPrecedence<=precedence){result=[!0];break}result=[!1];break;case 2:var _rootIdentifier,lhsIdentifier,rhsIdentifier,lhsPrecedence=(0,_operators.getPrecedence)(args[0],parenthesis),assocWithLhs=(0,_operators.isAssociativeWith)(root,args[0],parenthesis),lhsParens=null!==lhsPrecedence&&(lhsPrecedence===precedence&&"right"===associativity&&!assocWithLhs||lhsPrecedence<precedence),rhsPrecedence=(0,_operators.getPrecedence)(args[1],parenthesis),assocWithRhs=(0,_operators.isAssociativeWith)(root,args[1],parenthesis),rhsParens=null!==rhsPrecedence&&(rhsPrecedence===precedence&&"left"===associativity&&!assocWithRhs||rhsPrecedence<precedence);latex&&(rhsIdentifier="keep"===parenthesis?(_rootIdentifier=root.getIdentifier(),lhsIdentifier=root.args[0].getIdentifier(),root.args[1].getIdentifier()):(_rootIdentifier=root.getContent().getIdentifier(),lhsIdentifier=root.args[0].getContent().getIdentifier(),root.args[1].getContent().getIdentifier()),null!==lhsPrecedence&&(!1===_operators.properties[precedence][_rootIdentifier].latexLeftParens&&(lhsParens=!1),!1===_operators.properties[lhsPrecedence][lhsIdentifier].latexParens&&(lhsParens=!1)),null!==rhsPrecedence&&(!1===_operators.properties[precedence][_rootIdentifier].latexRightParens&&(rhsParens=!1),!1===_operators.properties[rhsPrecedence][rhsIdentifier].latexParens&&(rhsParens=!1))),result=[lhsParens,rhsParens];break;default:"OperatorNode:add"!==root.getIdentifier()&&"OperatorNode:multiply"!==root.getIdentifier()||(result=args.map(function(arg){var argPrecedence=(0,_operators.getPrecedence)(arg,parenthesis),assocWithArg=(0,_operators.isAssociativeWith)(root,arg,parenthesis),argAssociativity=(0,_operators.getAssociativity)(arg,parenthesis);return null!==argPrecedence&&(precedence===argPrecedence&&associativity===argAssociativity&&!assocWithArg||argPrecedence<precedence)}))}return 2<=args.length&&"OperatorNode:multiply"===root.getIdentifier()&&root.implicit&&"auto"===parenthesis&&"hide"===implicit&&(result=args.map(function(arg,index){var isParenthesisNode="ParenthesisNode"===arg.getIdentifier();return!(!result[index]&&!isParenthesisNode)})),result}return(OperatorNode.prototype=new Node).type="OperatorNode",OperatorNode.prototype.isOperatorNode=!0,OperatorNode.prototype._compile=function(math,argNames){if("string"!=typeof this.fn||!(0,_customs.isSafeMethod)(math,this.fn))throw math[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var fn=(0,_customs.getSafeProperty)(math,this.fn),evalArgs=(0,_array.map)(this.args,function(arg){return arg._compile(math,argNames)});if(1===evalArgs.length){var evalArg0=evalArgs[0];return function(scope,args,context){return fn(evalArg0(scope,args,context))}}if(2!==evalArgs.length)return function(scope,args,context){return fn.apply(null,(0,_array.map)(evalArgs,function(evalArg){return evalArg(scope,args,context)}))};var _evalArg=evalArgs[0],evalArg1=evalArgs[1];return function(scope,args,context){return fn(_evalArg(scope,args,context),evalArg1(scope,args,context))}},OperatorNode.prototype.forEach=function(callback){for(var i=0;i<this.args.length;i++)callback(this.args[i],"args["+i+"]",this)},OperatorNode.prototype.map=function(callback){for(var args=[],i=0;i<this.args.length;i++)args[i]=this._ifNode(callback(this.args[i],"args["+i+"]",this));return new OperatorNode(this.op,this.fn,args,this.implicit)},OperatorNode.prototype.clone=function(){return new OperatorNode(this.op,this.fn,this.args.slice(0),this.implicit)},OperatorNode.prototype.isUnary=function(){return 1===this.args.length},OperatorNode.prototype.isBinary=function(){return 2===this.args.length},OperatorNode.prototype._toString=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",implicit=options&&options.implicit?options.implicit:"hide",args=this.args,parens=calculateNecessaryParentheses(this,parenthesis,implicit,args,!1);if(1===args.length){var assoc=(0,_operators.getAssociativity)(this,parenthesis),operand=args[0].toString(options);parens[0]&&(operand="("+operand+")");var opIsNamed=/[a-zA-Z]+/.test(this.op);return"right"===assoc?this.op+(opIsNamed?" ":"")+operand:"left"===assoc?operand+(opIsNamed?" ":"")+this.op:operand+this.op}if(2===args.length){var lhs=args[0].toString(options),rhs=args[1].toString(options);return parens[0]&&(lhs="("+lhs+")"),parens[1]&&(rhs="("+rhs+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===implicit?lhs+" "+rhs:lhs+" "+this.op+" "+rhs}if(2<args.length&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var stringifiedArgs=args.map(function(arg,index){return arg=arg.toString(options),parens[index]&&(arg="("+arg+")"),arg});return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===implicit?stringifiedArgs.join(" "):stringifiedArgs.join(" "+this.op+" ")}return this.fn+"("+this.args.join(", ")+")"},OperatorNode.prototype.toJSON=function(){return{mathjs:"OperatorNode",op:this.op,fn:this.fn,args:this.args,implicit:this.implicit}},OperatorNode.fromJSON=function(json){return new OperatorNode(json.op,json.fn,json.args,json.implicit)},OperatorNode.prototype.toHTML=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",implicit=options&&options.implicit?options.implicit:"hide",args=this.args,parens=calculateNecessaryParentheses(this,parenthesis,implicit,args,!1);if(1===args.length){var assoc=(0,_operators.getAssociativity)(this,parenthesis),operand=args[0].toHTML(options);return parens[0]&&(operand='<span class="math-parenthesis math-round-parenthesis">(</span>'+operand+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===assoc?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+(0,_string.escape)(this.op)+"</span>"+operand:operand+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+(0,_string.escape)(this.op)+"</span>"}if(2===args.length){var lhs=args[0].toHTML(options),rhs=args[1].toHTML(options);return parens[0]&&(lhs='<span class="math-parenthesis math-round-parenthesis">(</span>'+lhs+'<span class="math-parenthesis math-round-parenthesis">)</span>'),parens[1]&&(rhs='<span class="math-parenthesis math-round-parenthesis">(</span>'+rhs+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===implicit?lhs+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+rhs:lhs+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+(0,_string.escape)(this.op)+"</span>"+rhs}var stringifiedArgs=args.map(function(arg,index){return arg=arg.toHTML(options),parens[index]&&(arg='<span class="math-parenthesis math-round-parenthesis">(</span>'+arg+'<span class="math-parenthesis math-round-parenthesis">)</span>'),arg});return 2<args.length&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())?this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===implicit?stringifiedArgs.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):stringifiedArgs.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+(0,_string.escape)(this.op)+"</span>"):'<span class="math-function">'+(0,_string.escape)(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+stringifiedArgs.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'},OperatorNode.prototype._toTex=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",implicit=options&&options.implicit?options.implicit:"hide",args=this.args,parens=calculateNecessaryParentheses(this,parenthesis,implicit,args,!0),op=void 0===(op=_latex.latexOperators[this.fn])?this.op:op;if(1===args.length){var assoc=(0,_operators.getAssociativity)(this,parenthesis),operand=args[0].toTex(options);return parens[0]&&(operand="\\left(".concat(operand,"\\right)")),"right"===assoc?op+operand:operand+op}if(2===args.length){var lhs=args[0],lhsTex=lhs.toTex(options);parens[0]&&(lhsTex="\\left(".concat(lhsTex,"\\right)"));var lhsIdentifier,rhsTex=args[1].toTex(options);switch(parens[1]&&(rhsTex="\\left(".concat(rhsTex,"\\right)")),lhsIdentifier="keep"===parenthesis?lhs.getIdentifier():lhs.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return op+"{"+lhsTex+"}{"+rhsTex+"}";case"OperatorNode:pow":switch(lhsTex="{"+lhsTex+"}",rhsTex="{"+rhsTex+"}",lhsIdentifier){case"ConditionalNode":case"OperatorNode:divide":lhsTex="\\left(".concat(lhsTex,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&"hide"===implicit)return lhsTex+"~"+rhsTex}return lhsTex+op+rhsTex}if(2<args.length&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var texifiedArgs=args.map(function(arg,index){return arg=arg.toTex(options),parens[index]&&(arg="\\left(".concat(arg,"\\right)")),arg});return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit?texifiedArgs.join("~"):texifiedArgs.join(op)}return"\\mathrm{"+this.fn+"}\\left("+args.map(function(arg){return arg.toTex(options)}).join(",")+"\\right)"},OperatorNode.prototype.getIdentifier=function(){return this.type+":"+this.fn},OperatorNode},{isClass:!0,isNode:!0});exports.createOperatorNode=createOperatorNode},{"../../utils/array":922,"../../utils/customs":929,"../../utils/factory":931,"../../utils/is":933,"../../utils/latex":934,"../../utils/string":941,"../operators":638}],632:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createParenthesisNode=void 0;var _is=require("../../utils/is"),dependencies=["Node"],createParenthesisNode=(0,require("../../utils/factory").factory)("ParenthesisNode",dependencies,function(_ref){var Node=_ref.Node;function ParenthesisNode(content){if(!(this instanceof ParenthesisNode))throw new SyntaxError("Constructor must be called with the new operator");if(!(0,_is.isNode)(content))throw new TypeError('Node expected for parameter "content"');this.content=content}return(ParenthesisNode.prototype=new Node).type="ParenthesisNode",ParenthesisNode.prototype.isParenthesisNode=!0,ParenthesisNode.prototype._compile=function(math,argNames){return this.content._compile(math,argNames)},ParenthesisNode.prototype.getContent=function(){return this.content.getContent()},ParenthesisNode.prototype.forEach=function(callback){callback(this.content,"content",this)},ParenthesisNode.prototype.map=function(callback){return new ParenthesisNode(callback(this.content,"content",this))},ParenthesisNode.prototype.clone=function(){return new ParenthesisNode(this.content)},ParenthesisNode.prototype._toString=function(options){return!options||options&&!options.parenthesis||options&&"keep"===options.parenthesis?"("+this.content.toString(options)+")":this.content.toString(options)},ParenthesisNode.prototype.toJSON=function(){return{mathjs:"ParenthesisNode",content:this.content}},ParenthesisNode.fromJSON=function(json){return new ParenthesisNode(json.content)},ParenthesisNode.prototype.toHTML=function(options){return!options||options&&!options.parenthesis||options&&"keep"===options.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(options)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(options)},ParenthesisNode.prototype._toTex=function(options){return!options||options&&!options.parenthesis||options&&"keep"===options.parenthesis?"\\left(".concat(this.content.toTex(options),"\\right)"):this.content.toTex(options)},ParenthesisNode},{isClass:!0,isNode:!0});exports.createParenthesisNode=createParenthesisNode},{"../../utils/factory":931,"../../utils/is":933}],633:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRangeNode=void 0;var _is=require("../../utils/is"),_factory=require("../../utils/factory"),_operators=require("../operators"),dependencies=["Node"],createRangeNode=(0,_factory.factory)("RangeNode",dependencies,function(_ref){var Node=_ref.Node;function RangeNode(start,end,step){if(!(this instanceof RangeNode))throw new SyntaxError("Constructor must be called with the new operator");if(!(0,_is.isNode)(start))throw new TypeError("Node expected");if(!(0,_is.isNode)(end))throw new TypeError("Node expected");if(step&&!(0,_is.isNode)(step))throw new TypeError("Node expected");if(3<arguments.length)throw new Error("Too many arguments");this.start=start,this.end=end,this.step=step||null}function calculateNecessaryParentheses(node,parenthesis){var stepPrecedence,precedence=(0,_operators.getPrecedence)(node,parenthesis),parens={},startPrecedence=(0,_operators.getPrecedence)(node.start,parenthesis);parens.start=null!==startPrecedence&&startPrecedence<=precedence||"all"===parenthesis,node.step&&(stepPrecedence=(0,_operators.getPrecedence)(node.step,parenthesis),parens.step=null!==stepPrecedence&&stepPrecedence<=precedence||"all"===parenthesis);var endPrecedence=(0,_operators.getPrecedence)(node.end,parenthesis);return parens.end=null!==endPrecedence&&endPrecedence<=precedence||"all"===parenthesis,parens}return(RangeNode.prototype=new Node).type="RangeNode",RangeNode.prototype.isRangeNode=!0,RangeNode.prototype.needsEnd=function(){return 0<this.filter(function(node){return(0,_is.isSymbolNode)(node)&&"end"===node.name}).length},RangeNode.prototype._compile=function(math,argNames){var range=math.range,evalStart=this.start._compile(math,argNames),evalEnd=this.end._compile(math,argNames);if(this.step){var evalStep=this.step._compile(math,argNames);return function(scope,args,context){return range(evalStart(scope,args,context),evalEnd(scope,args,context),evalStep(scope,args,context))}}return function(scope,args,context){return range(evalStart(scope,args,context),evalEnd(scope,args,context))}},RangeNode.prototype.forEach=function(callback){callback(this.start,"start",this),callback(this.end,"end",this),this.step&&callback(this.step,"step",this)},RangeNode.prototype.map=function(callback){return new RangeNode(this._ifNode(callback(this.start,"start",this)),this._ifNode(callback(this.end,"end",this)),this.step&&this._ifNode(callback(this.step,"step",this)))},RangeNode.prototype.clone=function(){return new RangeNode(this.start,this.end,this.step&&this.step)},RangeNode.prototype._toString=function(options){var str,step,parens=calculateNecessaryParentheses(this,options&&options.parenthesis?options.parenthesis:"keep"),start=this.start.toString(options);parens.start&&(start="("+start+")"),str=start,this.step&&(step=this.step.toString(options),parens.step&&(step="("+step+")"),str+=":"+step);var end=this.end.toString(options);return parens.end&&(end="("+end+")"),str+=":"+end},RangeNode.prototype.toJSON=function(){return{mathjs:"RangeNode",start:this.start,end:this.end,step:this.step}},RangeNode.fromJSON=function(json){return new RangeNode(json.start,json.end,json.step)},RangeNode.prototype.toHTML=function(options){var str,step,parens=calculateNecessaryParentheses(this,options&&options.parenthesis?options.parenthesis:"keep"),start=this.start.toHTML(options);parens.start&&(start='<span class="math-parenthesis math-round-parenthesis">(</span>'+start+'<span class="math-parenthesis math-round-parenthesis">)</span>'),str=start,this.step&&(step=this.step.toHTML(options),parens.step&&(step='<span class="math-parenthesis math-round-parenthesis">(</span>'+step+'<span class="math-parenthesis math-round-parenthesis">)</span>'),str+='<span class="math-operator math-range-operator">:</span>'+step);var end=this.end.toHTML(options);return parens.end&&(end='<span class="math-parenthesis math-round-parenthesis">(</span>'+end+'<span class="math-parenthesis math-round-parenthesis">)</span>'),str+='<span class="math-operator math-range-operator">:</span>'+end},RangeNode.prototype._toTex=function(options){var step,parens=calculateNecessaryParentheses(this,options&&options.parenthesis?options.parenthesis:"keep"),str=this.start.toTex(options);parens.start&&(str="\\left(".concat(str,"\\right)")),this.step&&(step=this.step.toTex(options),parens.step&&(step="\\left(".concat(step,"\\right)")),str+=":"+step);var end=this.end.toTex(options);return parens.end&&(end="\\left(".concat(end,"\\right)")),str+=":"+end},RangeNode},{isClass:!0,isNode:!0});exports.createRangeNode=createRangeNode},{"../../utils/factory":931,"../../utils/is":933,"../operators":638}],634:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRelationalNode=void 0;var _operators=require("../operators"),_string=require("../../utils/string"),_customs=require("../../utils/customs"),_latex=require("../../utils/latex"),dependencies=["Node"],createRelationalNode=(0,require("../../utils/factory").factory)("RelationalNode",dependencies,function(_ref){var Node=_ref.Node;function RelationalNode(conditionals,params){if(!(this instanceof RelationalNode))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(conditionals))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(params))throw new TypeError("Parameter params must be an array");if(conditionals.length!==params.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=conditionals,this.params=params}return(RelationalNode.prototype=new Node).type="RelationalNode",RelationalNode.prototype.isRelationalNode=!0,RelationalNode.prototype._compile=function(math,argNames){var self=this,compiled=this.params.map(function(p){return p._compile(math,argNames)});return function(scope,args,context){for(var evalRhs=compiled[0](scope,args,context),i=0;i<self.conditionals.length;i++){var evalLhs=evalRhs,evalRhs=compiled[i+1](scope,args,context);if(!(0,_customs.getSafeProperty)(math,self.conditionals[i])(evalLhs,evalRhs))return!1}return!0}},RelationalNode.prototype.forEach=function(callback){var _this=this;this.params.forEach(function(n,i){return callback(n,"params["+i+"]",_this)},this)},RelationalNode.prototype.map=function(callback){var _this2=this;return new RelationalNode(this.conditionals.slice(),this.params.map(function(n,i){return _this2._ifNode(callback(n,"params["+i+"]",_this2))},this))},RelationalNode.prototype.clone=function(){return new RelationalNode(this.conditionals,this.params)},RelationalNode.prototype._toString=function(options){for(var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",precedence=(0,_operators.getPrecedence)(this,parenthesis),paramStrings=this.params.map(function(p,index){var paramPrecedence=(0,_operators.getPrecedence)(p,parenthesis);return"all"===parenthesis||null!==paramPrecedence&&paramPrecedence<=precedence?"("+p.toString(options)+")":p.toString(options)}),operatorMap={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},ret=paramStrings[0],i=0;i<this.conditionals.length;i++)ret+=" "+operatorMap[this.conditionals[i]]+" "+paramStrings[i+1];return ret},RelationalNode.prototype.toJSON=function(){return{mathjs:"RelationalNode",conditionals:this.conditionals,params:this.params}},RelationalNode.fromJSON=function(json){return new RelationalNode(json.conditionals,json.params)},RelationalNode.prototype.toHTML=function(options){for(var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",precedence=(0,_operators.getPrecedence)(this,parenthesis),paramStrings=this.params.map(function(p,index){var paramPrecedence=(0,_operators.getPrecedence)(p,parenthesis);return"all"===parenthesis||null!==paramPrecedence&&paramPrecedence<=precedence?'<span class="math-parenthesis math-round-parenthesis">(</span>'+p.toHTML(options)+'<span class="math-parenthesis math-round-parenthesis">)</span>':p.toHTML(options)}),operatorMap={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},ret=paramStrings[0],i=0;i<this.conditionals.length;i++)ret+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+(0,_string.escape)(operatorMap[this.conditionals[i]])+"</span>"+paramStrings[i+1];return ret},RelationalNode.prototype._toTex=function(options){for(var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",precedence=(0,_operators.getPrecedence)(this,parenthesis),paramStrings=this.params.map(function(p,index){var paramPrecedence=(0,_operators.getPrecedence)(p,parenthesis);return"all"===parenthesis||null!==paramPrecedence&&paramPrecedence<=precedence?"\\left("+p.toTex(options)+"\right)":p.toTex(options)}),ret=paramStrings[0],i=0;i<this.conditionals.length;i++)ret+=_latex.latexOperators[this.conditionals[i]]+paramStrings[i+1];return ret},RelationalNode},{isClass:!0,isNode:!0});exports.createRelationalNode=createRelationalNode},{"../../utils/customs":929,"../../utils/factory":931,"../../utils/latex":934,"../../utils/string":941,"../operators":638}],635:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSymbolNode=void 0;var _string=require("../../utils/string"),_customs=require("../../utils/customs"),_factory=require("../../utils/factory"),_latex=require("../../utils/latex"),dependencies=["math","?Unit","Node"],createSymbolNode=(0,_factory.factory)("SymbolNode",dependencies,function(_ref){var math=_ref.math,Unit=_ref.Unit,Node=_ref.Node;function isValuelessUnit(name){return!!Unit&&Unit.isValuelessUnit(name)}function SymbolNode(name){if(!(this instanceof SymbolNode))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof name)throw new TypeError('String expected for parameter "name"');this.name=name}return(SymbolNode.prototype=new Node).type="SymbolNode",SymbolNode.prototype.isSymbolNode=!0,SymbolNode.prototype._compile=function(math,argNames){var name=this.name;if(!0===argNames[name])return function(scope,args,context){return args[name]};if(name in math)return function(scope,args,context){return name in scope?(0,_customs.getSafeProperty)(scope,name):(0,_customs.getSafeProperty)(math,name)};var isUnit=isValuelessUnit(name);return function(scope,args,context){return name in scope?(0,_customs.getSafeProperty)(scope,name):isUnit?new Unit(null,name):function(name){throw new Error("Undefined symbol "+name)}(name)}},SymbolNode.prototype.forEach=function(callback){},SymbolNode.prototype.map=function(callback){return this.clone()},SymbolNode.prototype.clone=function(){return new SymbolNode(this.name)},SymbolNode.prototype._toString=function(options){return this.name},SymbolNode.prototype.toHTML=function(options){var name=(0,_string.escape)(this.name);return"true"===name||"false"===name?'<span class="math-symbol math-boolean">'+name+"</span>":"i"===name?'<span class="math-symbol math-imaginary-symbol">'+name+"</span>":"Infinity"===name?'<span class="math-symbol math-infinity-symbol">'+name+"</span>":"NaN"===name?'<span class="math-symbol math-nan-symbol">'+name+"</span>":"null"===name?'<span class="math-symbol math-null-symbol">'+name+"</span>":"undefined"===name?'<span class="math-symbol math-undefined-symbol">'+name+"</span>":'<span class="math-symbol">'+name+"</span>"},SymbolNode.prototype.toJSON=function(){return{mathjs:"SymbolNode",name:this.name}},SymbolNode.fromJSON=function(json){return new SymbolNode(json.name)},SymbolNode.prototype._toTex=function(options){var isUnit=!1;void 0===math[this.name]&&isValuelessUnit(this.name)&&(isUnit=!0);var symbol=(0,_latex.toSymbol)(this.name,isUnit);return"\\"===symbol[0]?symbol:" "+symbol},SymbolNode},{isClass:!0,isNode:!0});exports.createSymbolNode=createSymbolNode},{"../../utils/customs":929,"../../utils/factory":931,"../../utils/latex":934,"../../utils/string":941}],636:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.accessFactory=function(_ref){var subset=_ref.subset;return function(object,index){try{if(Array.isArray(object))return subset(object,index);if(object&&"function"==typeof object.subset)return object.subset(index);if("string"==typeof object)return subset(object,index);if("object"!==_typeof(object))throw new TypeError("Cannot apply index: unsupported type of object");if(!index.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return(0,_customs.getSafeProperty)(object,index.getObjectProperty())}catch(err){throw(0,_errorTransform.errorTransform)(err)}}};var _errorTransform=require("../../transform/utils/errorTransform"),_customs=require("../../../utils/customs");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}},{"../../../utils/customs":929,"../../transform/utils/errorTransform":656}],637:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assignFactory=function(_ref){var subset=_ref.subset,matrix=_ref.matrix;return function(object,index,value){try{if(Array.isArray(object))return matrix(object).subset(index,value).valueOf();if(object&&"function"==typeof object.subset)return object.subset(index,value);if("string"==typeof object)return subset(object,index,value);if("object"!==_typeof(object))throw new TypeError("Cannot apply index: unsupported type of object");if(!index.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return(0,_customs.setSafeProperty)(object,index.getObjectProperty(),value),object}catch(err){throw(0,_errorTransform.errorTransform)(err)}}};var _errorTransform=require("../../transform/utils/errorTransform"),_customs=require("../../../utils/customs");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}},{"../../../utils/customs":929,"../../transform/utils/errorTransform":656}],638:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPrecedence=getPrecedence,exports.getAssociativity=function(_node,parenthesis){var node=_node;"keep"!==parenthesis&&(node=_node.getContent());var identifier=node.getIdentifier(),index=getPrecedence(node,parenthesis);if(null===index)return null;var property=properties[index][identifier];if((0,_object.hasOwnProperty)(property,"associativity")){if("left"===property.associativity)return"left";if("right"===property.associativity)return"right";throw Error("'"+identifier+"' has the invalid associativity '"+property.associativity+"'.")}return null},exports.isAssociativeWith=function(nodeA,nodeB,parenthesis){var a="keep"!==parenthesis?nodeA.getContent():nodeA,b="keep"!==parenthesis?nodeA.getContent():nodeB,identifierA=a.getIdentifier(),identifierB=b.getIdentifier(),index=getPrecedence(a,parenthesis);if(null===index)return null;var property=properties[index][identifierA];if((0,_object.hasOwnProperty)(property,"associativeWith")&&property.associativeWith instanceof Array){for(var i=0;i<property.associativeWith.length;i++)if(property.associativeWith[i]===identifierB)return!0;return!1}return null},exports.properties=void 0;var _object=require("../utils/object"),properties=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];function getPrecedence(_node,parenthesis){var node=_node;"keep"!==parenthesis&&(node=_node.getContent());for(var identifier=node.getIdentifier(),i=0;i<properties.length;i++)if(identifier in properties[i])return i;return null}exports.properties=properties},{"../utils/object":938}],639:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createParse=void 0;var _factory=require("../utils/factory"),_is=require("../utils/is"),_collection=require("../utils/collection"),_object=require("../utils/object");function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var dependencies=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],createParse=(0,_factory.factory)("parse",dependencies,function(_ref){var typed=_ref.typed,numeric=_ref.numeric,config=_ref.config,AccessorNode=_ref.AccessorNode,ArrayNode=_ref.ArrayNode,AssignmentNode=_ref.AssignmentNode,BlockNode=_ref.BlockNode,ConditionalNode=_ref.ConditionalNode,ConstantNode=_ref.ConstantNode,FunctionAssignmentNode=_ref.FunctionAssignmentNode,FunctionNode=_ref.FunctionNode,IndexNode=_ref.IndexNode,ObjectNode=_ref.ObjectNode,OperatorNode=_ref.OperatorNode,ParenthesisNode=_ref.ParenthesisNode,RangeNode=_ref.RangeNode,RelationalNode=_ref.RelationalNode,SymbolNode=_ref.SymbolNode,parse=typed("parse",{string:function(expression){return parseStart(expression,{})},"Array | Matrix":function(expressions){return parseMultiple(expressions,{})},"string, Object":function(expression,options){return parseStart(expression,void 0!==options.nodes?options.nodes:{})},"Array | Matrix, Object":parseMultiple});function parseMultiple(expressions){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},extraNodes=void 0!==options.nodes?options.nodes:{};return(0,_collection.deepMap)(expressions,function(elem){if("string"!=typeof elem)throw new TypeError("String expected");return parseStart(elem,extraNodes)})}var TOKENTYPE={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},DELIMITERS={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},NAMED_DELIMITERS={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},CONSTANTS={true:!0,false:!1,null:null,undefined:void 0},NUMERIC_CONSTANTS=["NaN","Infinity"];function currentString(state,length){return state.expression.substr(state.index,length)}function currentCharacter(state){return currentString(state,1)}function next(state){state.index++}function prevCharacter(state){return state.expression.charAt(state.index-1)}function nextCharacter(state){return state.expression.charAt(state.index+1)}function getToken(state){for(state.tokenType=TOKENTYPE.NULL,state.token="",state.comment="";parse.isWhitespace(currentCharacter(state),state.nestingLevel);)next(state);if("#"===currentCharacter(state))for(;"\n"!==currentCharacter(state)&&""!==currentCharacter(state);)state.comment+=currentCharacter(state),next(state);if(""!==currentCharacter(state)){if("\n"===currentCharacter(state)&&!state.nestingLevel)return state.tokenType=TOKENTYPE.DELIMITER,state.token=currentCharacter(state),void next(state);var c1=currentCharacter(state),c2=currentString(state,2),c3=currentString(state,3);if(3===c3.length&&DELIMITERS[c3])return state.tokenType=TOKENTYPE.DELIMITER,state.token=c3,next(state),next(state),void next(state);if(2===c2.length&&DELIMITERS[c2])return state.tokenType=TOKENTYPE.DELIMITER,state.token=c2,next(state),void next(state);if(DELIMITERS[c1])return state.tokenType=TOKENTYPE.DELIMITER,state.token=c1,void next(state);if(parse.isDigitDot(c1)){if(state.tokenType=TOKENTYPE.NUMBER,"."===currentCharacter(state))state.token+=currentCharacter(state),next(state),parse.isDigit(currentCharacter(state))||(state.tokenType=TOKENTYPE.DELIMITER);else{for(;parse.isDigit(currentCharacter(state));)state.token+=currentCharacter(state),next(state);parse.isDecimalMark(currentCharacter(state),nextCharacter(state))&&(state.token+=currentCharacter(state),next(state))}for(;parse.isDigit(currentCharacter(state));)state.token+=currentCharacter(state),next(state);if("E"===currentCharacter(state)||"e"===currentCharacter(state))if(parse.isDigit(nextCharacter(state))||"-"===nextCharacter(state)||"+"===nextCharacter(state)){if(state.token+=currentCharacter(state),next(state),"+"!==currentCharacter(state)&&"-"!==currentCharacter(state)||(state.token+=currentCharacter(state),next(state)),!parse.isDigit(currentCharacter(state)))throw createSyntaxError(state,'Digit expected, got "'+currentCharacter(state)+'"');for(;parse.isDigit(currentCharacter(state));)state.token+=currentCharacter(state),next(state);if(parse.isDecimalMark(currentCharacter(state),nextCharacter(state)))throw createSyntaxError(state,'Digit expected, got "'+currentCharacter(state)+'"')}else if("."===nextCharacter(state))throw next(state),createSyntaxError(state,'Digit expected, got "'+currentCharacter(state)+'"')}else{if(!parse.isAlpha(currentCharacter(state),prevCharacter(state),nextCharacter(state))){for(state.tokenType=TOKENTYPE.UNKNOWN;""!==currentCharacter(state);)state.token+=currentCharacter(state),next(state);throw createSyntaxError(state,'Syntax error in part "'+state.token+'"')}for(;parse.isAlpha(currentCharacter(state),prevCharacter(state),nextCharacter(state))||parse.isDigit(currentCharacter(state));)state.token+=currentCharacter(state),next(state);(0,_object.hasOwnProperty)(NAMED_DELIMITERS,state.token)?state.tokenType=TOKENTYPE.DELIMITER:state.tokenType=TOKENTYPE.SYMBOL}}else state.tokenType=TOKENTYPE.DELIMITER}function getTokenSkipNewline(state){for(;getToken(state),"\n"===state.token;);}function openParams(state){state.nestingLevel++}function closeParams(state){state.nestingLevel--}function parseStart(expression,extraNodes){var state={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:TOKENTYPE.NULL,nestingLevel:0,conditionalLevel:null};_extends(state,{expression:expression,extraNodes:extraNodes}),getToken(state);var node=function(state){var node,visible,blocks=[];""!==state.token&&"\n"!==state.token&&";"!==state.token&&((node=parseAssignment(state)).comment=state.comment);for(;"\n"===state.token||";"===state.token;)0===blocks.length&&node&&(visible=";"!==state.token,blocks.push({node:node,visible:visible})),getToken(state),"\n"!==state.token&&";"!==state.token&&""!==state.token&&((node=parseAssignment(state)).comment=state.comment,visible=";"!==state.token,blocks.push({node:node,visible:visible}));return 0<blocks.length?new BlockNode(blocks):(node||((node=new ConstantNode(void 0)).comment=state.comment),node)}(state);if(""!==state.token)throw state.tokenType===TOKENTYPE.DELIMITER?createError(state,"Unexpected operator "+state.token):createSyntaxError(state,'Unexpected part "'+state.token+'"');return node}function parseAssignment(state){var name,args,value,valid,node=function(state){var node=function(state){var node=parseLogicalXor(state);for(;"or"===state.token;)getTokenSkipNewline(state),node=new OperatorNode("or","or",[node,parseLogicalXor(state)]);return node}(state);for(;"?"===state.token;){var prev=state.conditionalLevel;state.conditionalLevel=state.nestingLevel,getTokenSkipNewline(state);var condition=node,trueExpr=parseAssignment(state);if(":"!==state.token)throw createSyntaxError(state,"False part of conditional expression expected");state.conditionalLevel=null,getTokenSkipNewline(state);var falseExpr=parseAssignment(state);node=new ConditionalNode(condition,trueExpr,falseExpr),state.conditionalLevel=prev}return node}(state);if("="!==state.token)return node;if((0,_is.isSymbolNode)(node))return name=node.name,getTokenSkipNewline(state),value=parseAssignment(state),new AssignmentNode(new SymbolNode(name),value);if((0,_is.isAccessorNode)(node))return getTokenSkipNewline(state),value=parseAssignment(state),new AssignmentNode(node.object,node.index,value);if((0,_is.isFunctionNode)(node)&&(0,_is.isSymbolNode)(node.fn)&&(valid=!0,args=[],name=node.name,node.args.forEach(function(arg,index){(0,_is.isSymbolNode)(arg)?args[index]=arg.name:valid=!1}),valid))return getTokenSkipNewline(state),value=parseAssignment(state),new FunctionAssignmentNode(name,args,value);throw createSyntaxError(state,"Invalid left hand side of assignment operator =")}function parseLogicalXor(state){for(var node=parseLogicalAnd(state);"xor"===state.token;)getTokenSkipNewline(state),node=new OperatorNode("xor","xor",[node,parseLogicalAnd(state)]);return node}function parseLogicalAnd(state){for(var node=parseBitwiseOr(state);"and"===state.token;)getTokenSkipNewline(state),node=new OperatorNode("and","and",[node,parseBitwiseOr(state)]);return node}function parseBitwiseOr(state){for(var node=parseBitwiseXor(state);"|"===state.token;)getTokenSkipNewline(state),node=new OperatorNode("|","bitOr",[node,parseBitwiseXor(state)]);return node}function parseBitwiseXor(state){for(var node=parseBitwiseAnd(state);"^|"===state.token;)getTokenSkipNewline(state),node=new OperatorNode("^|","bitXor",[node,parseBitwiseAnd(state)]);return node}function parseBitwiseAnd(state){for(var node=parseRelational(state);"&"===state.token;)getTokenSkipNewline(state),node=new OperatorNode("&","bitAnd",[node,parseRelational(state)]);return node}function parseRelational(state){for(var params=[parseShift(state)],conditionals=[],operators={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};(0,_object.hasOwnProperty)(operators,state.token);){var cond={name:state.token,fn:operators[state.token]};conditionals.push(cond),getTokenSkipNewline(state),params.push(parseShift(state))}return 1===params.length?params[0]:2===params.length?new OperatorNode(conditionals[0].name,conditionals[0].fn,params):new RelationalNode(conditionals.map(function(c){return c.fn}),params)}function parseShift(state){for(var name,fn,params,node=parseConversion(state),operators={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};(0,_object.hasOwnProperty)(operators,state.token);)fn=operators[name=state.token],getTokenSkipNewline(state),params=[node,parseConversion(state)],node=new OperatorNode(name,fn,params);return node}function parseConversion(state){for(var name,fn,params,node=parseRange(state),operators={to:"to",in:"to"};(0,_object.hasOwnProperty)(operators,state.token);)fn=operators[name=state.token],getTokenSkipNewline(state),node="in"===name&&""===state.token?new OperatorNode("*","multiply",[node,new SymbolNode("in")],!0):(params=[node,parseRange(state)],new OperatorNode(name,fn,params));return node}function parseRange(state){var params=[],node=":"===state.token?new ConstantNode(1):parseAddSubtract(state);if(":"===state.token&&state.conditionalLevel!==state.nestingLevel){for(params.push(node);":"===state.token&&params.length<3;)getTokenSkipNewline(state),")"===state.token||"]"===state.token||","===state.token||""===state.token?params.push(new SymbolNode("end")):params.push(parseAddSubtract(state));node=3===params.length?new RangeNode(params[0],params[2],params[1]):new RangeNode(params[0],params[1])}return node}function parseAddSubtract(state){for(var name,fn,params,node=parseMultiplyDivide(state),operators={"+":"add","-":"subtract"};(0,_object.hasOwnProperty)(operators,state.token);)fn=operators[name=state.token],getTokenSkipNewline(state),params=[node,parseMultiplyDivide(state)],node=new OperatorNode(name,fn,params);return node}function parseMultiplyDivide(state){for(var name,fn,last,node=parseImplicitMultiplication(state),operators={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};(0,_object.hasOwnProperty)(operators,state.token);)fn=operators[name=state.token],getTokenSkipNewline(state),last=parseImplicitMultiplication(state),node=new OperatorNode(name,fn,[node,last]);return node}function parseImplicitMultiplication(state){for(var node=parseRule2(state),last=node;state.tokenType===TOKENTYPE.SYMBOL||"in"===state.token&&(0,_is.isConstantNode)(node)||!(state.tokenType!==TOKENTYPE.NUMBER||(0,_is.isConstantNode)(last)||(0,_is.isOperatorNode)(last)&&"!"!==last.op)||"("===state.token;)last=parseRule2(state),node=new OperatorNode("*","multiply",[node,last],!0);return node}function parseRule2(state){for(var node=parseUnary(state),last=node,tokenStates=[];"/"===state.token&&(0,_is.isConstantNode)(last);){if(tokenStates.push(_extends({},state)),getTokenSkipNewline(state),state.tokenType!==TOKENTYPE.NUMBER){_extends(state,tokenStates.pop());break}if(tokenStates.push(_extends({},state)),getTokenSkipNewline(state),state.tokenType!==TOKENTYPE.SYMBOL&&"("!==state.token){tokenStates.pop(),_extends(state,tokenStates.pop());break}_extends(state,tokenStates.pop()),tokenStates.pop(),last=parseUnary(state),node=new OperatorNode("/","divide",[node,last])}return node}function parseUnary(state){var name,params,fn,operators={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return(0,_object.hasOwnProperty)(operators,state.token)?(fn=operators[state.token],name=state.token,getTokenSkipNewline(state),params=[parseUnary(state)],new OperatorNode(name,fn,params)):function(state){var node,name,fn,params;node=function(state){var node,name,fn;node=function(state){var params=[];if(state.tokenType===TOKENTYPE.SYMBOL&&(0,_object.hasOwnProperty)(state.extraNodes,state.token)){var CustomNode=state.extraNodes[state.token];if(getToken(state),"("===state.token){if(params=[],openParams(state),getToken(state),")"!==state.token)for(params.push(parseAssignment(state));","===state.token;)getToken(state),params.push(parseAssignment(state));if(")"!==state.token)throw createSyntaxError(state,"Parenthesis ) expected");closeParams(state),getToken(state)}return new CustomNode(params)}return function(state){var node,name;if(state.tokenType===TOKENTYPE.SYMBOL||state.tokenType===TOKENTYPE.DELIMITER&&state.token in NAMED_DELIMITERS)return name=state.token,getToken(state),node=(0,_object.hasOwnProperty)(CONSTANTS,name)?new ConstantNode(CONSTANTS[name]):-1!==NUMERIC_CONSTANTS.indexOf(name)?new ConstantNode(numeric(name,"number")):new SymbolNode(name),node=parseAccessors(state,node);return function(state){var node,str;return'"'!==state.token?function(state){var node,str;return"'"!==state.token?function(state){var array,params,rows,cols;if("["!==state.token)return function(state){if("{"!==state.token)return function(state){var numberStr;return state.tokenType!==TOKENTYPE.NUMBER?function(state){var node;if("("!==state.token)return function(state){throw""===state.token?createSyntaxError(state,"Unexpected end of expression"):createSyntaxError(state,"Value expected")}(state);if(openParams(state),getToken(state),node=parseAssignment(state),")"===state.token)return closeParams(state),getToken(state),node=new ParenthesisNode(node),node=parseAccessors(state,node);throw createSyntaxError(state,"Parenthesis ) expected")}(state):(numberStr=state.token,getToken(state),new ConstantNode(numeric(numberStr,config.number)))}(state);var key;openParams(state);var properties={};do{if(getToken(state),"}"!==state.token){if('"'===state.token)key=parseDoubleQuotesStringToken(state);else if("'"===state.token)key=parseSingleQuotesStringToken(state);else{if(!(state.tokenType===TOKENTYPE.SYMBOL||state.tokenType===TOKENTYPE.DELIMITER&&state.token in NAMED_DELIMITERS))throw createSyntaxError(state,"Symbol or string expected as object key");key=state.token,getToken(state)}if(":"!==state.token)throw createSyntaxError(state,"Colon : expected after object key");getToken(state),properties[key]=parseAssignment(state)}}while(","===state.token);if("}"!==state.token)throw createSyntaxError(state,"Comma , or bracket } expected after object value");closeParams(state),getToken(state);var node=new ObjectNode(properties);return node=parseAccessors(state,node)}(state);if(openParams(state),getToken(state),"]"!==state.token){var row=parseRow(state);if(";"===state.token){for(rows=1,params=[row];";"===state.token;)getToken(state),params[rows]=parseRow(state),rows++;if("]"!==state.token)throw createSyntaxError(state,"End of matrix ] expected");closeParams(state),getToken(state),cols=params[0].items.length;for(var r=1;r<rows;r++)if(params[r].items.length!==cols)throw createError(state,"Column dimensions mismatch ("+params[r].items.length+" !== "+cols+")");array=new ArrayNode(params)}else{if("]"!==state.token)throw createSyntaxError(state,"End of matrix ] expected");closeParams(state),getToken(state),array=row}}else closeParams(state),getToken(state),array=new ArrayNode([]);return parseAccessors(state,array)}(state):(str=parseSingleQuotesStringToken(state),node=new ConstantNode(str),node=parseAccessors(state,node))}(state):(str=parseDoubleQuotesStringToken(state),node=new ConstantNode(str),node=parseAccessors(state,node))}(state)}(state)}(state);var operators={"!":"factorial","'":"ctranspose"};for(;(0,_object.hasOwnProperty)(operators,state.token);)name=state.token,fn=operators[name],getToken(state),node=new OperatorNode(name,fn,[node]),node=parseAccessors(state,node);return node}(state),"^"!==state.token&&".^"!==state.token||(name=state.token,fn="^"===name?"pow":"dotPow",getTokenSkipNewline(state),params=[node,parseUnary(state)],node=new OperatorNode(name,fn,params));return node}(state)}function parseAccessors(state,node,types){for(var params;!("("!==state.token&&"["!==state.token&&"."!==state.token||types&&-1===types.indexOf(state.token));)if(params=[],"("===state.token){if(!(0,_is.isSymbolNode)(node)&&!(0,_is.isAccessorNode)(node))return node;if(openParams(state),getToken(state),")"!==state.token)for(params.push(parseAssignment(state));","===state.token;)getToken(state),params.push(parseAssignment(state));if(")"!==state.token)throw createSyntaxError(state,"Parenthesis ) expected");closeParams(state),getToken(state),node=new FunctionNode(node,params)}else if("["===state.token){if(openParams(state),getToken(state),"]"!==state.token)for(params.push(parseAssignment(state));","===state.token;)getToken(state),params.push(parseAssignment(state));if("]"!==state.token)throw createSyntaxError(state,"Parenthesis ] expected");closeParams(state),getToken(state),node=new AccessorNode(node,new IndexNode(params))}else{if(getToken(state),state.tokenType!==TOKENTYPE.SYMBOL)throw createSyntaxError(state,"Property name expected after dot");params.push(new ConstantNode(state.token)),getToken(state);node=new AccessorNode(node,new IndexNode(params,!0))}return node}function parseDoubleQuotesStringToken(state){for(var str="";""!==currentCharacter(state)&&'"'!==currentCharacter(state);)"\\"===currentCharacter(state)&&(str+=currentCharacter(state),next(state)),str+=currentCharacter(state),next(state);if(getToken(state),'"'!==state.token)throw createSyntaxError(state,'End of string " expected');return getToken(state),JSON.parse('"'+str+'"')}function parseSingleQuotesStringToken(state){for(var str="";""!==currentCharacter(state)&&"'"!==currentCharacter(state);)"\\"===currentCharacter(state)&&(str+=currentCharacter(state),next(state)),str+=currentCharacter(state),next(state);if(getToken(state),"'"!==state.token)throw createSyntaxError(state,"End of string ' expected");return getToken(state),JSON.parse('"'+str+'"')}function parseRow(state){for(var params=[parseAssignment(state)],len=1;","===state.token;)getToken(state),params[len]=parseAssignment(state),len++;return new ArrayNode(params)}function col(state){return state.index-state.token.length+1}function createSyntaxError(state,message){var c=col(state),error=new SyntaxError(message+" (char "+c+")");return error.char=c,error}function createError(state,message){var c=col(state),error=new SyntaxError(message+" (char "+c+")");return error.char=c,error}return parse.isAlpha=function(c,cPrev,cNext){return parse.isValidLatinOrGreek(c)||parse.isValidMathSymbol(c,cNext)||parse.isValidMathSymbol(cPrev,c)},parse.isValidLatinOrGreek=function(c){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(c)},parse.isValidMathSymbol=function(high,low){return/^[\uD835]$/.test(high)&&/^[\uDC00-\uDFFF]$/.test(low)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(low)},parse.isWhitespace=function(c,nestingLevel){return" "===c||"\t"===c||"\n"===c&&0<nestingLevel},parse.isDecimalMark=function(c,cNext){return"."===c&&"/"!==cNext&&"*"!==cNext&&"^"!==cNext},parse.isDigitDot=function(c){return"0"<=c&&c<="9"||"."===c},parse.isDigit=function(c){return"0"<=c&&c<="9"},parse});exports.createParse=createParse},{"../utils/collection":927,"../utils/factory":931,"../utils/is":933,"../utils/object":938}],640:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createApplyTransform=void 0;var _errorTransform=require("./utils/errorTransform"),_factory=require("../../utils/factory"),_apply=require("../../function/matrix/apply"),_is=require("../../utils/is"),dependencies=["typed","isInteger"],createApplyTransform=(0,_factory.factory)("apply",dependencies,function(_ref){var typed=_ref.typed,isInteger=_ref.isInteger,apply=(0,_apply.createApply)({typed:typed,isInteger:isInteger});return typed("apply",{"...any":function(args){var dim=args[1];(0,_is.isNumber)(dim)?args[1]=dim-1:(0,_is.isBigNumber)(dim)&&(args[1]=dim.minus(1));try{return apply.apply(null,args)}catch(err){throw(0,_errorTransform.errorTransform)(err)}}})},{isTransformFunction:!0});exports.createApplyTransform=createApplyTransform},{"../../function/matrix/apply":749,"../../utils/factory":931,"../../utils/is":933,"./utils/errorTransform":656}],641:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createColumnTransform=void 0;var _errorTransform=require("./utils/errorTransform"),_factory=require("../../utils/factory"),_column=require("../../function/matrix/column"),_is=require("../../utils/is"),dependencies=["typed","Index","matrix","range"],createColumnTransform=(0,_factory.factory)("column",dependencies,function(_ref){var typed=_ref.typed,Index=_ref.Index,matrix=_ref.matrix,range=_ref.range,column=(0,_column.createColumn)({typed:typed,Index:Index,matrix:matrix,range:range});return typed("column",{"...any":function(args){var lastIndex=args.length-1,last=args[lastIndex];(0,_is.isNumber)(last)&&(args[lastIndex]=last-1);try{return column.apply(null,args)}catch(err){throw(0,_errorTransform.errorTransform)(err)}}})},{isTransformFunction:!0});exports.createColumnTransform=createColumnTransform},{"../../function/matrix/column":750,"../../utils/factory":931,"../../utils/is":933,"./utils/errorTransform":656}],642:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConcatTransform=void 0;var _is=require("../../utils/is"),_errorTransform=require("./utils/errorTransform"),_factory=require("../../utils/factory"),_concat=require("../../function/matrix/concat"),dependencies=["typed","matrix","isInteger"],createConcatTransform=(0,_factory.factory)("concat",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,isInteger=_ref.isInteger,concat=(0,_concat.createConcat)({typed:typed,matrix:matrix,isInteger:isInteger});return typed("concat",{"...any":function(args){var lastIndex=args.length-1,last=args[lastIndex];(0,_is.isNumber)(last)?args[lastIndex]=last-1:(0,_is.isBigNumber)(last)&&(args[lastIndex]=last.minus(1));try{return concat.apply(null,args)}catch(err){throw(0,_errorTransform.errorTransform)(err)}}})},{isTransformFunction:!0});exports.createConcatTransform=createConcatTransform},{"../../function/matrix/concat":751,"../../utils/factory":931,"../../utils/is":933,"./utils/errorTransform":656}],643:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFilterTransform=void 0;var _is=require("../../utils/is"),_array=require("../../utils/array"),_function=require("../../utils/function"),_compileInlineExpression=require("./utils/compileInlineExpression"),dependencies=["typed"],createFilterTransform=(0,require("../../utils/factory").factory)("filter",dependencies,function(_ref){var typed=_ref.typed;function filterTransform(args,math,scope){var x,callback;return args[0]&&(x=args[0].compile().evaluate(scope)),args[1]&&(callback=(0,_is.isSymbolNode)(args[1])||(0,_is.isFunctionAssignmentNode)(args[1])?args[1].compile().evaluate(scope):(0,_compileInlineExpression.compileInlineExpression)(args[1],math,scope)),filter(x,callback)}filterTransform.rawArgs=!0;var filter=typed("filter",{"Array, function":_filter,"Matrix, function":function(x,test){return x.create(_filter(x.toArray(),test))},"Array, RegExp":_array.filterRegExp,"Matrix, RegExp":function(x,test){return x.create((0,_array.filterRegExp)(x.toArray(),test))}});return filterTransform},{isTransformFunction:!0});function _filter(x,callback){var args=(0,_function.maxArgumentCount)(callback);return(0,_array.filter)(x,function(value,index,array){return 1===args?callback(value):2===args?callback(value,[index+1]):callback(value,[index+1],array)})}exports.createFilterTransform=createFilterTransform},{"../../utils/array":922,"../../utils/factory":931,"../../utils/function":932,"../../utils/is":933,"./utils/compileInlineExpression":655}],644:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createForEachTransform=void 0;var _is=require("../../utils/is"),_function=require("../../utils/function"),_array=require("../../utils/array"),_factory=require("../../utils/factory"),_compileInlineExpression=require("./utils/compileInlineExpression"),dependencies=["typed"],createForEachTransform=(0,_factory.factory)("forEach",dependencies,function(_ref){var typed=_ref.typed;function forEachTransform(args,math,scope){var x,callback;return args[0]&&(x=args[0].compile().evaluate(scope)),args[1]&&(callback=(0,_is.isSymbolNode)(args[1])||(0,_is.isFunctionAssignmentNode)(args[1])?args[1].compile().evaluate(scope):(0,_compileInlineExpression.compileInlineExpression)(args[1],math,scope)),_forEach(x,callback)}forEachTransform.rawArgs=!0;var _forEach=typed("forEach",{"Array | Matrix, function":function(array,callback){var args=(0,_function.maxArgumentCount)(callback);!function recurse(value,index){Array.isArray(value)?(0,_array.forEach)(value,function(child,i){recurse(child,index.concat(i+1))}):1===args?callback(value):2===args?callback(value,index):callback(value,index,array)}(array.valueOf(),[])}});return forEachTransform},{isTransformFunction:!0});exports.createForEachTransform=createForEachTransform},{"../../utils/array":922,"../../utils/factory":931,"../../utils/function":932,"../../utils/is":933,"./utils/compileInlineExpression":655}],645:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIndexTransform=void 0;var _is=require("../../utils/is"),dependencies=["Index"],createIndexTransform=(0,require("../../utils/factory").factory)("index",dependencies,function(_ref){var Index=_ref.Index;return function(){for(var args=[],i=0,ii=arguments.length;i<ii;i++){var arg=arguments[i];if((0,_is.isRange)(arg))arg.start--,arg.end-=0<arg.step?0:2;else if(arg&&!0===arg.isSet)arg=arg.map(function(v){return v-1});else if((0,_is.isArray)(arg)||(0,_is.isMatrix)(arg))arg=arg.map(function(v){return v-1});else if((0,_is.isNumber)(arg))arg--;else if((0,_is.isBigNumber)(arg))arg=arg.toNumber()-1;else if("string"!=typeof arg)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");args[i]=arg}var res=new Index;return Index.apply(res,args),res}},{isTransformFunction:!0});exports.createIndexTransform=createIndexTransform},{"../../utils/factory":931,"../../utils/is":933}],646:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMapTransform=void 0;var _is=require("../../utils/is"),_function=require("../../utils/function"),_array=require("../../utils/array"),_factory=require("../../utils/factory"),_compileInlineExpression=require("./utils/compileInlineExpression"),dependencies=["typed"],createMapTransform=(0,_factory.factory)("map",dependencies,function(_ref){var typed=_ref.typed;function mapTransform(args,math,scope){var x,callback;return args[0]&&(x=args[0].compile().evaluate(scope)),args[1]&&(callback=(0,_is.isSymbolNode)(args[1])||(0,_is.isFunctionAssignmentNode)(args[1])?args[1].compile().evaluate(scope):(0,_compileInlineExpression.compileInlineExpression)(args[1],math,scope)),map(x,callback)}mapTransform.rawArgs=!0;var map=typed("map",{"Array, function":function(x,callback){return _map(x,callback,x)},"Matrix, function":function(x,callback){return x.create(_map(x.valueOf(),callback,x))}});return mapTransform},{isTransformFunction:!0});function _map(array,callback,orig){var argsCount=(0,_function.maxArgumentCount)(callback);return function recurse(value,index){return Array.isArray(value)?(0,_array.map)(value,function(child,i){return recurse(child,index.concat(i+1))}):1===argsCount?callback(value):2===argsCount?callback(value,index):callback(value,index,orig)}(array,[])}exports.createMapTransform=createMapTransform},{"../../utils/array":922,"../../utils/factory":931,"../../utils/function":932,"../../utils/is":933,"./utils/compileInlineExpression":655}],647:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMaxTransform=void 0;var _is=require("../../utils/is"),_factory=require("../../utils/factory"),_errorTransform=require("./utils/errorTransform"),_max=require("../../function/statistics/max"),dependencies=["typed","larger"],createMaxTransform=(0,_factory.factory)("max",dependencies,function(_ref){var typed=_ref.typed,larger=_ref.larger,max=(0,_max.createMax)({typed:typed,larger:larger});return typed("max",{"...any":function(args){var dim;2===args.length&&(0,_is.isCollection)(args[0])&&(dim=args[1],(0,_is.isNumber)(dim)?args[1]=dim-1:(0,_is.isBigNumber)(dim)&&(args[1]=dim.minus(1)));try{return max.apply(null,args)}catch(err){throw(0,_errorTransform.errorTransform)(err)}}})},{isTransformFunction:!0});exports.createMaxTransform=createMaxTransform},{"../../function/statistics/max":818,"../../utils/factory":931,"../../utils/is":933,"./utils/errorTransform":656}],648:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMeanTransform=void 0;var _is=require("../../utils/is"),_factory=require("../../utils/factory"),_errorTransform=require("./utils/errorTransform"),_mean=require("../../function/statistics/mean"),dependencies=["typed","add","divide"],createMeanTransform=(0,_factory.factory)("mean",dependencies,function(_ref){var typed=_ref.typed,add=_ref.add,divide=_ref.divide,mean=(0,_mean.createMean)({typed:typed,add:add,divide:divide});return typed("mean",{"...any":function(args){var dim;2===args.length&&(0,_is.isCollection)(args[0])&&(dim=args[1],(0,_is.isNumber)(dim)?args[1]=dim-1:(0,_is.isBigNumber)(dim)&&(args[1]=dim.minus(1)));try{return mean.apply(null,args)}catch(err){throw(0,_errorTransform.errorTransform)(err)}}})},{isTransformFunction:!0});exports.createMeanTransform=createMeanTransform},{"../../function/statistics/mean":819,"../../utils/factory":931,"../../utils/is":933,"./utils/errorTransform":656}],649:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMinTransform=void 0;var _is=require("../../utils/is"),_factory=require("../../utils/factory"),_errorTransform=require("./utils/errorTransform"),_min=require("../../function/statistics/min"),dependencies=["typed","smaller"],createMinTransform=(0,_factory.factory)("min",dependencies,function(_ref){var typed=_ref.typed,smaller=_ref.smaller,min=(0,_min.createMin)({typed:typed,smaller:smaller});return typed("min",{"...any":function(args){var dim;2===args.length&&(0,_is.isCollection)(args[0])&&(dim=args[1],(0,_is.isNumber)(dim)?args[1]=dim-1:(0,_is.isBigNumber)(dim)&&(args[1]=dim.minus(1)));try{return min.apply(null,args)}catch(err){throw(0,_errorTransform.errorTransform)(err)}}})},{isTransformFunction:!0});exports.createMinTransform=createMinTransform},{"../../function/statistics/min":821,"../../utils/factory":931,"../../utils/is":933,"./utils/errorTransform":656}],650:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRangeTransform=void 0;var _factory=require("../../utils/factory"),_range=require("../../function/matrix/range"),dependencies=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],createRangeTransform=(0,_factory.factory)("range",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,matrix=_ref.matrix,bignumber=_ref.bignumber,smaller=_ref.smaller,smallerEq=_ref.smallerEq,larger=_ref.larger,largerEq=_ref.largerEq,range=(0,_range.createRange)({typed:typed,config:config,matrix:matrix,bignumber:bignumber,smaller:smaller,smallerEq:smallerEq,larger:larger,largerEq:largerEq});return typed("range",{"...any":function(args){return"boolean"!=typeof args[args.length-1]&&args.push(!0),range.apply(null,args)}})},{isTransformFunction:!0});exports.createRangeTransform=createRangeTransform},{"../../function/matrix/range":770,"../../utils/factory":931}],651:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRowTransform=void 0;var _factory=require("../../utils/factory"),_row=require("../../function/matrix/row"),_errorTransform=require("./utils/errorTransform"),_is=require("../../utils/is"),dependencies=["typed","Index","matrix","range"],createRowTransform=(0,_factory.factory)("row",dependencies,function(_ref){var typed=_ref.typed,Index=_ref.Index,matrix=_ref.matrix,range=_ref.range,row=(0,_row.createRow)({typed:typed,Index:Index,matrix:matrix,range:range});return typed("row",{"...any":function(args){var lastIndex=args.length-1,last=args[lastIndex];(0,_is.isNumber)(last)&&(args[lastIndex]=last-1);try{return row.apply(null,args)}catch(err){throw(0,_errorTransform.errorTransform)(err)}}})},{isTransformFunction:!0});exports.createRowTransform=createRowTransform},{"../../function/matrix/row":773,"../../utils/factory":931,"../../utils/is":933,"./utils/errorTransform":656}],652:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStdTransform=void 0;var _factory=require("../../utils/factory"),_std=require("../../function/statistics/std"),_is=require("../../utils/is"),_errorTransform=require("./utils/errorTransform"),dependencies=["typed","sqrt","variance"],createStdTransform=(0,_factory.factory)("std",dependencies,function(_ref){var typed=_ref.typed,sqrt=_ref.sqrt,variance=_ref.variance,std=(0,_std.createStd)({typed:typed,sqrt:sqrt,variance:variance});return typed("std",{"...any":function(args){var dim;2<=args.length&&(0,_is.isCollection)(args[0])&&(dim=args[1],(0,_is.isNumber)(dim)?args[1]=dim-1:(0,_is.isBigNumber)(dim)&&(args[1]=dim.minus(1)));try{return std.apply(null,args)}catch(err){throw(0,_errorTransform.errorTransform)(err)}}})},{isTransformFunction:!0});exports.createStdTransform=createStdTransform},{"../../function/statistics/std":825,"../../utils/factory":931,"../../utils/is":933,"./utils/errorTransform":656}],653:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSubsetTransform=void 0;var _factory=require("../../utils/factory"),_errorTransform=require("./utils/errorTransform"),_subset=require("../../function/matrix/subset"),dependencies=["typed","matrix"],createSubsetTransform=(0,_factory.factory)("subset",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,subset=(0,_subset.createSubset)({typed:typed,matrix:matrix});return typed("subset",{"...any":function(args){try{return subset.apply(null,args)}catch(err){throw(0,_errorTransform.errorTransform)(err)}}})},{isTransformFunction:!0});exports.createSubsetTransform=createSubsetTransform},{"../../function/matrix/subset":778,"../../utils/factory":931,"./utils/errorTransform":656}],654:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSumTransform=void 0;var _is=require("../../utils/is"),_factory=require("../../utils/factory"),_errorTransform=require("./utils/errorTransform"),_sum=require("../../function/statistics/sum"),dependencies=["typed","config","add","?bignumber","?fraction"],createSumTransform=(0,_factory.factory)("sum",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,add=_ref.add,bignumber=_ref.bignumber,fraction=_ref.fraction,sum=(0,_sum.createSum)({typed:typed,config:config,add:add,bignumber:bignumber,fraction:fraction});return typed("sum",{"...any":function(args){var dim;2===args.length&&(0,_is.isCollection)(args[0])&&(dim=args[1],(0,_is.isNumber)(dim)?args[1]=dim-1:(0,_is.isBigNumber)(dim)&&(args[1]=dim.minus(1)));try{return sum.apply(null,args)}catch(err){throw(0,_errorTransform.errorTransform)(err)}}})},{isTransformFunction:!0});exports.createSumTransform=createSumTransform},{"../../function/statistics/sum":826,"../../utils/factory":931,"../../utils/is":933,"./utils/errorTransform":656}],655:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compileInlineExpression=function(expression,math,scope){var symbol=expression.filter(function(node){return(0,_is.isSymbolNode)(node)&&!(node.name in math)&&!(node.name in scope)})[0];if(!symbol)throw new Error('No undefined variable found in inline expression "'+expression+'"');var name=symbol.name,subScope=Object.create(scope),eq=expression.compile();return function(x){return subScope[name]=x,eq.evaluate(subScope)}};var _is=require("../../../utils/is")},{"../../../utils/is":933}],656:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.errorTransform=function(err){if(err&&err.isIndexError)return new _IndexError.IndexError(err.index+1,err.min+1,void 0!==err.max?err.max+1:void 0);return err};var _IndexError=require("../../../error/IndexError")},{"../../../error/IndexError":400}],657:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createVarianceTransform=void 0;var _factory=require("../../utils/factory"),_is=require("../../utils/is"),_errorTransform=require("./utils/errorTransform"),_variance=require("../../function/statistics/variance"),dependencies=["typed","add","subtract","multiply","divide","apply","isNaN"],createVarianceTransform=(0,_factory.factory)("variance",dependencies,function(_ref){var typed=_ref.typed,add=_ref.add,subtract=_ref.subtract,multiply=_ref.multiply,divide=_ref.divide,apply=_ref.apply,isNaN=_ref.isNaN,variance=(0,_variance.createVariance)({typed:typed,add:add,subtract:subtract,multiply:multiply,divide:divide,apply:apply,isNaN:isNaN});return typed("variance",{"...any":function(args){var dim;2<=args.length&&(0,_is.isCollection)(args[0])&&(dim=args[1],(0,_is.isNumber)(dim)?args[1]=dim-1:(0,_is.isBigNumber)(dim)&&(args[1]=dim.minus(1)));try{return variance.apply(null,args)}catch(err){throw(0,_errorTransform.errorTransform)(err)}}})},{isTransformFunction:!0});exports.createVarianceTransform=createVarianceTransform},{"../../function/statistics/variance":828,"../../utils/factory":931,"../../utils/is":933,"./utils/errorTransform":656}],658:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"createTyped",{enumerable:!0,get:function(){return _typed.createTyped}}),Object.defineProperty(exports,"createResultSet",{enumerable:!0,get:function(){return _ResultSet.createResultSet}}),Object.defineProperty(exports,"createBigNumberClass",{enumerable:!0,get:function(){return _BigNumber.createBigNumberClass}}),Object.defineProperty(exports,"createComplexClass",{enumerable:!0,get:function(){return _Complex.createComplexClass}}),Object.defineProperty(exports,"createFractionClass",{enumerable:!0,get:function(){return _Fraction.createFractionClass}}),Object.defineProperty(exports,"createRangeClass",{enumerable:!0,get:function(){return _Range.createRangeClass}}),Object.defineProperty(exports,"createMatrixClass",{enumerable:!0,get:function(){return _Matrix.createMatrixClass}}),Object.defineProperty(exports,"createDenseMatrixClass",{enumerable:!0,get:function(){return _DenseMatrix.createDenseMatrixClass}}),Object.defineProperty(exports,"createClone",{enumerable:!0,get:function(){return _clone.createClone}}),Object.defineProperty(exports,"createIsInteger",{enumerable:!0,get:function(){return _isInteger.createIsInteger}}),Object.defineProperty(exports,"createIsNegative",{enumerable:!0,get:function(){return _isNegative.createIsNegative}}),Object.defineProperty(exports,"createIsNumeric",{enumerable:!0,get:function(){return _isNumeric.createIsNumeric}}),Object.defineProperty(exports,"createHasNumericValue",{enumerable:!0,get:function(){return _hasNumericValue.createHasNumericValue}}),Object.defineProperty(exports,"createIsPositive",{enumerable:!0,get:function(){return _isPositive.createIsPositive}}),Object.defineProperty(exports,"createIsZero",{enumerable:!0,get:function(){return _isZero.createIsZero}}),Object.defineProperty(exports,"createIsNaN",{enumerable:!0,get:function(){return _isNaN.createIsNaN}}),Object.defineProperty(exports,"createTypeOf",{enumerable:!0,get:function(){return _typeOf.createTypeOf}}),Object.defineProperty(exports,"createDeprecatedTypeof",{enumerable:!0,get:function(){return _typeOf.createDeprecatedTypeof}}),Object.defineProperty(exports,"createEqualScalar",{enumerable:!0,get:function(){return _equalScalar.createEqualScalar}}),Object.defineProperty(exports,"createSparseMatrixClass",{enumerable:!0,get:function(){return _SparseMatrix.createSparseMatrixClass}}),Object.defineProperty(exports,"createNumber",{enumerable:!0,get:function(){return _number.createNumber}}),Object.defineProperty(exports,"createString",{enumerable:!0,get:function(){return _string.createString}}),Object.defineProperty(exports,"createBoolean",{enumerable:!0,get:function(){return _boolean.createBoolean}}),Object.defineProperty(exports,"createBignumber",{enumerable:!0,get:function(){return _bignumber.createBignumber}}),Object.defineProperty(exports,"createComplex",{enumerable:!0,get:function(){return _complex.createComplex}}),Object.defineProperty(exports,"createFraction",{enumerable:!0,get:function(){return _fraction.createFraction}}),Object.defineProperty(exports,"createMatrix",{enumerable:!0,get:function(){return _matrix.createMatrix}}),Object.defineProperty(exports,"createSplitUnit",{enumerable:!0,get:function(){return _splitUnit.createSplitUnit}}),Object.defineProperty(exports,"createUnaryMinus",{enumerable:!0,get:function(){return _unaryMinus.createUnaryMinus}}),Object.defineProperty(exports,"createUnaryPlus",{enumerable:!0,get:function(){return _unaryPlus.createUnaryPlus}}),Object.defineProperty(exports,"createAbs",{enumerable:!0,get:function(){return _abs.createAbs}}),Object.defineProperty(exports,"createApply",{enumerable:!0,get:function(){return _apply.createApply}}),Object.defineProperty(exports,"createAddScalar",{enumerable:!0,get:function(){return _addScalar.createAddScalar}}),Object.defineProperty(exports,"createCbrt",{enumerable:!0,get:function(){return _cbrt.createCbrt}}),Object.defineProperty(exports,"createCeil",{enumerable:!0,get:function(){return _ceil.createCeil}}),Object.defineProperty(exports,"createCube",{enumerable:!0,get:function(){return _cube.createCube}}),Object.defineProperty(exports,"createExp",{enumerable:!0,get:function(){return _exp.createExp}}),Object.defineProperty(exports,"createExpm1",{enumerable:!0,get:function(){return _expm.createExpm1}}),Object.defineProperty(exports,"createFix",{enumerable:!0,get:function(){return _fix.createFix}}),Object.defineProperty(exports,"createFloor",{enumerable:!0,get:function(){return _floor.createFloor}}),Object.defineProperty(exports,"createGcd",{enumerable:!0,get:function(){return _gcd.createGcd}}),Object.defineProperty(exports,"createLcm",{enumerable:!0,get:function(){return _lcm.createLcm}}),Object.defineProperty(exports,"createLog10",{enumerable:!0,get:function(){return _log.createLog10}}),Object.defineProperty(exports,"createLog2",{enumerable:!0,get:function(){return _log2.createLog2}}),Object.defineProperty(exports,"createMod",{enumerable:!0,get:function(){return _mod.createMod}}),Object.defineProperty(exports,"createMultiplyScalar",{enumerable:!0,get:function(){return _multiplyScalar.createMultiplyScalar}}),Object.defineProperty(exports,"createMultiply",{enumerable:!0,get:function(){return _multiply.createMultiply}}),Object.defineProperty(exports,"createNthRoot",{enumerable:!0,get:function(){return _nthRoot.createNthRoot}}),Object.defineProperty(exports,"createSign",{enumerable:!0,get:function(){return _sign.createSign}}),Object.defineProperty(exports,"createSqrt",{enumerable:!0,get:function(){return _sqrt.createSqrt}}),Object.defineProperty(exports,"createSquare",{enumerable:!0,get:function(){return _square.createSquare}}),Object.defineProperty(exports,"createSubtract",{enumerable:!0,get:function(){return _subtract.createSubtract}}),Object.defineProperty(exports,"createXgcd",{enumerable:!0,get:function(){return _xgcd.createXgcd}}),Object.defineProperty(exports,"createDotMultiply",{enumerable:!0,get:function(){return _dotMultiply.createDotMultiply}}),Object.defineProperty(exports,"createBitAnd",{enumerable:!0,get:function(){return _bitAnd.createBitAnd}}),Object.defineProperty(exports,"createBitNot",{enumerable:!0,get:function(){return _bitNot.createBitNot}}),Object.defineProperty(exports,"createBitOr",{enumerable:!0,get:function(){return _bitOr.createBitOr}}),Object.defineProperty(exports,"createBitXor",{enumerable:!0,get:function(){return _bitXor.createBitXor}}),Object.defineProperty(exports,"createArg",{enumerable:!0,get:function(){return _arg.createArg}}),Object.defineProperty(exports,"createConj",{enumerable:!0,get:function(){return _conj.createConj}}),Object.defineProperty(exports,"createIm",{enumerable:!0,get:function(){return _im.createIm}}),Object.defineProperty(exports,"createRe",{enumerable:!0,get:function(){return _re.createRe}}),Object.defineProperty(exports,"createNot",{enumerable:!0,get:function(){return _not.createNot}}),Object.defineProperty(exports,"createOr",{enumerable:!0,get:function(){return _or.createOr}}),Object.defineProperty(exports,"createXor",{enumerable:!0,get:function(){return _xor.createXor}}),Object.defineProperty(exports,"createConcat",{enumerable:!0,get:function(){return _concat.createConcat}}),Object.defineProperty(exports,"createColumn",{enumerable:!0,get:function(){return _column.createColumn}}),Object.defineProperty(exports,"createCross",{enumerable:!0,get:function(){return _cross.createCross}}),Object.defineProperty(exports,"createDiag",{enumerable:!0,get:function(){return _diag.createDiag}}),Object.defineProperty(exports,"createEye",{enumerable:!0,get:function(){return _eye.createEye}}),Object.defineProperty(exports,"createFilter",{enumerable:!0,get:function(){return _filter.createFilter}}),Object.defineProperty(exports,"createFlatten",{enumerable:!0,get:function(){return _flatten.createFlatten}}),Object.defineProperty(exports,"createForEach",{enumerable:!0,get:function(){return _forEach.createForEach}}),Object.defineProperty(exports,"createGetMatrixDataType",{enumerable:!0,get:function(){return _getMatrixDataType.createGetMatrixDataType}}),Object.defineProperty(exports,"createIdentity",{enumerable:!0,get:function(){return _identity.createIdentity}}),Object.defineProperty(exports,"createKron",{enumerable:!0,get:function(){return _kron.createKron}}),Object.defineProperty(exports,"createMap",{enumerable:!0,get:function(){return _map.createMap}}),Object.defineProperty(exports,"createOnes",{enumerable:!0,get:function(){return _ones.createOnes}}),Object.defineProperty(exports,"createRange",{enumerable:!0,get:function(){return _range.createRange}}),Object.defineProperty(exports,"createReshape",{enumerable:!0,get:function(){return _reshape.createReshape}}),Object.defineProperty(exports,"createResize",{enumerable:!0,get:function(){return _resize.createResize}}),Object.defineProperty(exports,"createRow",{enumerable:!0,get:function(){return _row.createRow}}),Object.defineProperty(exports,"createSize",{enumerable:!0,get:function(){return _size.createSize}}),Object.defineProperty(exports,"createSqueeze",{enumerable:!0,get:function(){return _squeeze.createSqueeze}}),Object.defineProperty(exports,"createSubset",{enumerable:!0,get:function(){return _subset.createSubset}}),Object.defineProperty(exports,"createTranspose",{enumerable:!0,get:function(){return _transpose.createTranspose}}),Object.defineProperty(exports,"createCtranspose",{enumerable:!0,get:function(){return _ctranspose.createCtranspose}}),Object.defineProperty(exports,"createZeros",{enumerable:!0,get:function(){return _zeros.createZeros}}),Object.defineProperty(exports,"createErf",{enumerable:!0,get:function(){return _erf.createErf}}),Object.defineProperty(exports,"createMode",{enumerable:!0,get:function(){return _mode.createMode}}),Object.defineProperty(exports,"createProd",{enumerable:!0,get:function(){return _prod.createProd}}),Object.defineProperty(exports,"createFormat",{enumerable:!0,get:function(){return _format.createFormat}}),Object.defineProperty(exports,"createPrint",{enumerable:!0,get:function(){return _print.createPrint}}),Object.defineProperty(exports,"createTo",{enumerable:!0,get:function(){return _to.createTo}}),Object.defineProperty(exports,"createIsPrime",{enumerable:!0,get:function(){return _isPrime.createIsPrime}}),Object.defineProperty(exports,"createNumeric",{enumerable:!0,get:function(){return _numeric.createNumeric}}),Object.defineProperty(exports,"createDivideScalar",{enumerable:!0,get:function(){return _divideScalar.createDivideScalar}}),Object.defineProperty(exports,"createPow",{enumerable:!0,get:function(){return _pow.createPow}}),Object.defineProperty(exports,"createRound",{enumerable:!0,get:function(){return _round.createRound}}),Object.defineProperty(exports,"createLog",{enumerable:!0,get:function(){return _log3.createLog}}),Object.defineProperty(exports,"createLog1p",{enumerable:!0,get:function(){return _log1p.createLog1p}}),Object.defineProperty(exports,"createNthRoots",{enumerable:!0,get:function(){return _nthRoots.createNthRoots}}),Object.defineProperty(exports,"createDotPow",{enumerable:!0,get:function(){return _dotPow.createDotPow}}),Object.defineProperty(exports,"createDotDivide",{enumerable:!0,get:function(){return _dotDivide.createDotDivide}}),Object.defineProperty(exports,"createLsolve",{enumerable:!0,get:function(){return _lsolve.createLsolve}}),Object.defineProperty(exports,"createUsolve",{enumerable:!0,get:function(){return _usolve.createUsolve}}),Object.defineProperty(exports,"createLeftShift",{enumerable:!0,get:function(){return _leftShift.createLeftShift}}),Object.defineProperty(exports,"createRightArithShift",{enumerable:!0,get:function(){return _rightArithShift.createRightArithShift}}),Object.defineProperty(exports,"createRightLogShift",{enumerable:!0,get:function(){return _rightLogShift.createRightLogShift}}),Object.defineProperty(exports,"createAnd",{enumerable:!0,get:function(){return _and.createAnd}}),Object.defineProperty(exports,"createCompare",{enumerable:!0,get:function(){return _compare.createCompare}}),Object.defineProperty(exports,"createCompareNatural",{enumerable:!0,get:function(){return _compareNatural.createCompareNatural}}),Object.defineProperty(exports,"createCompareText",{enumerable:!0,get:function(){return _compareText.createCompareText}}),Object.defineProperty(exports,"createEqual",{enumerable:!0,get:function(){return _equal.createEqual}}),Object.defineProperty(exports,"createEqualText",{enumerable:!0,get:function(){return _equalText.createEqualText}}),Object.defineProperty(exports,"createSmaller",{enumerable:!0,get:function(){return _smaller.createSmaller}}),Object.defineProperty(exports,"createSmallerEq",{enumerable:!0,get:function(){return _smallerEq.createSmallerEq}}),Object.defineProperty(exports,"createLarger",{enumerable:!0,get:function(){return _larger.createLarger}}),Object.defineProperty(exports,"createLargerEq",{enumerable:!0,get:function(){return _largerEq.createLargerEq}}),Object.defineProperty(exports,"createDeepEqual",{enumerable:!0,get:function(){return _deepEqual.createDeepEqual}}),Object.defineProperty(exports,"createUnequal",{enumerable:!0,get:function(){return _unequal.createUnequal}}),Object.defineProperty(exports,"createPartitionSelect",{enumerable:!0,get:function(){return _partitionSelect.createPartitionSelect}}),Object.defineProperty(exports,"createSort",{enumerable:!0,get:function(){return _sort.createSort}}),Object.defineProperty(exports,"createMax",{enumerable:!0,get:function(){return _max.createMax}}),Object.defineProperty(exports,"createMin",{enumerable:!0,get:function(){return _min.createMin}}),Object.defineProperty(exports,"createImmutableDenseMatrixClass",{enumerable:!0,get:function(){return _ImmutableDenseMatrix.createImmutableDenseMatrixClass}}),Object.defineProperty(exports,"createIndexClass",{enumerable:!0,get:function(){return _MatrixIndex.createIndexClass}}),Object.defineProperty(exports,"createFibonacciHeapClass",{enumerable:!0,get:function(){return _FibonacciHeap.createFibonacciHeapClass}}),Object.defineProperty(exports,"createSpaClass",{enumerable:!0,get:function(){return _Spa.createSpaClass}}),Object.defineProperty(exports,"createUnitClass",{enumerable:!0,get:function(){return _Unit.createUnitClass}}),Object.defineProperty(exports,"createUnitFunction",{enumerable:!0,get:function(){return _unit.createUnitFunction}}),Object.defineProperty(exports,"createSparse",{enumerable:!0,get:function(){return _sparse.createSparse}}),Object.defineProperty(exports,"createCreateUnit",{enumerable:!0,get:function(){return _createUnit.createCreateUnit}}),Object.defineProperty(exports,"createAcos",{enumerable:!0,get:function(){return _acos.createAcos}}),Object.defineProperty(exports,"createAcosh",{enumerable:!0,get:function(){return _acosh.createAcosh}}),Object.defineProperty(exports,"createAcot",{enumerable:!0,get:function(){return _acot.createAcot}}),Object.defineProperty(exports,"createAcoth",{enumerable:!0,get:function(){return _acoth.createAcoth}}),Object.defineProperty(exports,"createAcsc",{enumerable:!0,get:function(){return _acsc.createAcsc}}),Object.defineProperty(exports,"createAcsch",{enumerable:!0,get:function(){return _acsch.createAcsch}}),Object.defineProperty(exports,"createAsec",{enumerable:!0,get:function(){return _asec.createAsec}}),Object.defineProperty(exports,"createAsech",{enumerable:!0,get:function(){return _asech.createAsech}}),Object.defineProperty(exports,"createAsin",{enumerable:!0,get:function(){return _asin.createAsin}}),Object.defineProperty(exports,"createAsinh",{enumerable:!0,get:function(){return _asinh.createAsinh}}),Object.defineProperty(exports,"createAtan",{enumerable:!0,get:function(){return _atan.createAtan}}),Object.defineProperty(exports,"createAtan2",{enumerable:!0,get:function(){return _atan2.createAtan2}}),Object.defineProperty(exports,"createAtanh",{enumerable:!0,get:function(){return _atanh.createAtanh}}),Object.defineProperty(exports,"createCos",{enumerable:!0,get:function(){return _cos.createCos}}),Object.defineProperty(exports,"createCosh",{enumerable:!0,get:function(){return _cosh.createCosh}}),Object.defineProperty(exports,"createCot",{enumerable:!0,get:function(){return _cot.createCot}}),Object.defineProperty(exports,"createCoth",{enumerable:!0,get:function(){return _coth.createCoth}}),Object.defineProperty(exports,"createCsc",{enumerable:!0,get:function(){return _csc.createCsc}}),Object.defineProperty(exports,"createCsch",{enumerable:!0,get:function(){return _csch.createCsch}}),Object.defineProperty(exports,"createSec",{enumerable:!0,get:function(){return _sec.createSec}}),Object.defineProperty(exports,"createSech",{enumerable:!0,get:function(){return _sech.createSech}}),Object.defineProperty(exports,"createSin",{enumerable:!0,get:function(){return _sin.createSin}}),Object.defineProperty(exports,"createSinh",{enumerable:!0,get:function(){return _sinh.createSinh}}),Object.defineProperty(exports,"createTan",{enumerable:!0,get:function(){return _tan.createTan}}),Object.defineProperty(exports,"createTanh",{enumerable:!0,get:function(){return _tanh.createTanh}}),Object.defineProperty(exports,"createSetCartesian",{enumerable:!0,get:function(){return _setCartesian.createSetCartesian}}),Object.defineProperty(exports,"createSetDifference",{enumerable:!0,get:function(){return _setDifference.createSetDifference}}),Object.defineProperty(exports,"createSetDistinct",{enumerable:!0,get:function(){return _setDistinct.createSetDistinct}}),Object.defineProperty(exports,"createSetIntersect",{enumerable:!0,get:function(){return _setIntersect.createSetIntersect}}),Object.defineProperty(exports,"createSetIsSubset",{enumerable:!0,get:function(){return _setIsSubset.createSetIsSubset}}),Object.defineProperty(exports,"createSetMultiplicity",{enumerable:!0,get:function(){return _setMultiplicity.createSetMultiplicity}}),Object.defineProperty(exports,"createSetPowerset",{enumerable:!0,get:function(){return _setPowerset.createSetPowerset}}),Object.defineProperty(exports,"createSetSize",{enumerable:!0,get:function(){return _setSize.createSetSize}}),Object.defineProperty(exports,"createSetSymDifference",{enumerable:!0,get:function(){return _setSymDifference.createSetSymDifference}}),Object.defineProperty(exports,"createSetUnion",{enumerable:!0,get:function(){return _setUnion.createSetUnion}}),Object.defineProperty(exports,"createAdd",{enumerable:!0,get:function(){return _add.createAdd}}),Object.defineProperty(exports,"createHypot",{enumerable:!0,get:function(){return _hypot.createHypot}}),Object.defineProperty(exports,"createNorm",{enumerable:!0,get:function(){return _norm.createNorm}}),Object.defineProperty(exports,"createDot",{enumerable:!0,get:function(){return _dot.createDot}}),Object.defineProperty(exports,"createTrace",{enumerable:!0,get:function(){return _trace.createTrace}}),Object.defineProperty(exports,"createIndex",{enumerable:!0,get:function(){return _function.createIndex}}),Object.defineProperty(exports,"createNode",{enumerable:!0,get:function(){return _Node.createNode}}),Object.defineProperty(exports,"createAccessorNode",{enumerable:!0,get:function(){return _AccessorNode.createAccessorNode}}),Object.defineProperty(exports,"createArrayNode",{enumerable:!0,get:function(){return _ArrayNode.createArrayNode}}),Object.defineProperty(exports,"createAssignmentNode",{enumerable:!0,get:function(){return _AssignmentNode.createAssignmentNode}}),Object.defineProperty(exports,"createBlockNode",{enumerable:!0,get:function(){return _BlockNode.createBlockNode}}),Object.defineProperty(exports,"createConditionalNode",{enumerable:!0,get:function(){return _ConditionalNode.createConditionalNode}}),Object.defineProperty(exports,"createConstantNode",{enumerable:!0,get:function(){return _ConstantNode.createConstantNode}}),Object.defineProperty(exports,"createFunctionAssignmentNode",{enumerable:!0,get:function(){return _FunctionAssignmentNode.createFunctionAssignmentNode}}),Object.defineProperty(exports,"createIndexNode",{enumerable:!0,get:function(){return _IndexNode.createIndexNode}}),Object.defineProperty(exports,"createObjectNode",{enumerable:!0,get:function(){return _ObjectNode.createObjectNode}}),Object.defineProperty(exports,"createOperatorNode",{enumerable:!0,get:function(){return _OperatorNode.createOperatorNode}}),Object.defineProperty(exports,"createParenthesisNode",{enumerable:!0,get:function(){return _ParenthesisNode.createParenthesisNode}}),Object.defineProperty(exports,"createRangeNode",{enumerable:!0,get:function(){return _RangeNode.createRangeNode}}),Object.defineProperty(exports,"createRelationalNode",{enumerable:!0,get:function(){return _RelationalNode.createRelationalNode}}),Object.defineProperty(exports,"createSymbolNode",{enumerable:!0,get:function(){return _SymbolNode.createSymbolNode}}),Object.defineProperty(exports,"createFunctionNode",{enumerable:!0,get:function(){return _FunctionNode.createFunctionNode}}),Object.defineProperty(exports,"createParse",{enumerable:!0,get:function(){return _parse.createParse}}),Object.defineProperty(exports,"createCompile",{enumerable:!0,get:function(){return _compile.createCompile}}),Object.defineProperty(exports,"createEvaluate",{enumerable:!0,get:function(){return _evaluate.createEvaluate}}),Object.defineProperty(exports,"createDeprecatedEval",{enumerable:!0,get:function(){return _eval.createDeprecatedEval}}),Object.defineProperty(exports,"createParserClass",{enumerable:!0,get:function(){return _Parser.createParserClass}}),Object.defineProperty(exports,"createParser",{enumerable:!0,get:function(){return _parser.createParser}}),Object.defineProperty(exports,"createLup",{enumerable:!0,get:function(){return _lup.createLup}}),Object.defineProperty(exports,"createQr",{enumerable:!0,get:function(){return _qr.createQr}}),Object.defineProperty(exports,"createSlu",{enumerable:!0,get:function(){return _slu.createSlu}}),Object.defineProperty(exports,"createLusolve",{enumerable:!0,get:function(){return _lusolve.createLusolve}}),Object.defineProperty(exports,"createHelpClass",{enumerable:!0,get:function(){return _Help.createHelpClass}}),Object.defineProperty(exports,"createChainClass",{enumerable:!0,get:function(){return _Chain.createChainClass}}),Object.defineProperty(exports,"createHelp",{enumerable:!0,get:function(){return _help.createHelp}}),Object.defineProperty(exports,"createChain",{enumerable:!0,get:function(){return _chain.createChain}}),Object.defineProperty(exports,"createDet",{enumerable:!0,get:function(){return _det.createDet}}),Object.defineProperty(exports,"createInv",{enumerable:!0,get:function(){return _inv.createInv}}),Object.defineProperty(exports,"createEigs",{enumerable:!0,get:function(){return _eigs.createEigs}}),Object.defineProperty(exports,"createExpm",{enumerable:!0,get:function(){return _expm2.createExpm}}),Object.defineProperty(exports,"createSqrtm",{enumerable:!0,get:function(){return _sqrtm.createSqrtm}}),Object.defineProperty(exports,"createDivide",{enumerable:!0,get:function(){return _divide.createDivide}}),Object.defineProperty(exports,"createDistance",{enumerable:!0,get:function(){return _distance.createDistance}}),Object.defineProperty(exports,"createIntersect",{enumerable:!0,get:function(){return _intersect.createIntersect}}),Object.defineProperty(exports,"createSum",{enumerable:!0,get:function(){return _sum.createSum}}),Object.defineProperty(exports,"createMean",{enumerable:!0,get:function(){return _mean.createMean}}),Object.defineProperty(exports,"createMedian",{enumerable:!0,get:function(){return _median.createMedian}}),Object.defineProperty(exports,"createMad",{enumerable:!0,get:function(){return _mad.createMad}}),Object.defineProperty(exports,"createVariance",{enumerable:!0,get:function(){return _variance.createVariance}}),Object.defineProperty(exports,"createDeprecatedVar",{enumerable:!0,get:function(){return _variance.createDeprecatedVar}}),Object.defineProperty(exports,"createQuantileSeq",{enumerable:!0,get:function(){return _quantileSeq.createQuantileSeq}}),Object.defineProperty(exports,"createStd",{enumerable:!0,get:function(){return _std.createStd}}),Object.defineProperty(exports,"createCombinations",{enumerable:!0,get:function(){return _combinations.createCombinations}}),Object.defineProperty(exports,"createCombinationsWithRep",{enumerable:!0,get:function(){return _combinationsWithRep.createCombinationsWithRep}}),Object.defineProperty(exports,"createGamma",{enumerable:!0,get:function(){return _gamma.createGamma}}),Object.defineProperty(exports,"createFactorial",{enumerable:!0,get:function(){return _factorial.createFactorial}}),Object.defineProperty(exports,"createKldivergence",{enumerable:!0,get:function(){return _kldivergence.createKldivergence}}),Object.defineProperty(exports,"createMultinomial",{enumerable:!0,get:function(){return _multinomial.createMultinomial}}),Object.defineProperty(exports,"createPermutations",{enumerable:!0,get:function(){return _permutations.createPermutations}}),Object.defineProperty(exports,"createPickRandom",{enumerable:!0,get:function(){return _pickRandom.createPickRandom}}),Object.defineProperty(exports,"createRandom",{enumerable:!0,get:function(){return _random.createRandom}}),Object.defineProperty(exports,"createRandomInt",{enumerable:!0,get:function(){return _randomInt.createRandomInt}}),Object.defineProperty(exports,"createStirlingS2",{enumerable:!0,get:function(){return _stirlingS.createStirlingS2}}),Object.defineProperty(exports,"createBellNumbers",{enumerable:!0,get:function(){return _bellNumbers.createBellNumbers}}),Object.defineProperty(exports,"createCatalan",{enumerable:!0,get:function(){return _catalan.createCatalan}}),Object.defineProperty(exports,"createComposition",{enumerable:!0,get:function(){return _composition.createComposition}}),Object.defineProperty(exports,"createSimplify",{enumerable:!0,get:function(){return _simplify.createSimplify}}),Object.defineProperty(exports,"createDerivative",{enumerable:!0,get:function(){return _derivative.createDerivative}}),Object.defineProperty(exports,"createRationalize",{enumerable:!0,get:function(){return _rationalize.createRationalize}}),Object.defineProperty(exports,"createReviver",{enumerable:!0,get:function(){return _reviver.createReviver}}),Object.defineProperty(exports,"createReplacer",{enumerable:!0,get:function(){return _replacer.createReplacer}}),Object.defineProperty(exports,"createE",{enumerable:!0,get:function(){return _constants.createE}}),Object.defineProperty(exports,"createUppercaseE",{enumerable:!0,get:function(){return _constants.createUppercaseE}}),Object.defineProperty(exports,"createFalse",{enumerable:!0,get:function(){return _constants.createFalse}}),Object.defineProperty(exports,"createI",{enumerable:!0,get:function(){return _constants.createI}}),Object.defineProperty(exports,"createInfinity",{enumerable:!0,get:function(){return _constants.createInfinity}}),Object.defineProperty(exports,"createLN10",{enumerable:!0,get:function(){return _constants.createLN10}}),Object.defineProperty(exports,"createLN2",{enumerable:!0,get:function(){return _constants.createLN2}}),Object.defineProperty(exports,"createLOG10E",{enumerable:!0,get:function(){return _constants.createLOG10E}}),Object.defineProperty(exports,"createLOG2E",{enumerable:!0,get:function(){return _constants.createLOG2E}}),Object.defineProperty(exports,"createNaN",{enumerable:!0,get:function(){return _constants.createNaN}}),Object.defineProperty(exports,"createNull",{enumerable:!0,get:function(){return _constants.createNull}}),Object.defineProperty(exports,"createPhi",{enumerable:!0,get:function(){return _constants.createPhi}}),Object.defineProperty(exports,"createPi",{enumerable:!0,get:function(){return _constants.createPi}}),Object.defineProperty(exports,"createUppercasePi",{enumerable:!0,get:function(){return _constants.createUppercasePi}}),Object.defineProperty(exports,"createSQRT1_2",{enumerable:!0,get:function(){return _constants.createSQRT1_2}}),Object.defineProperty(exports,"createSQRT2",{enumerable:!0,get:function(){return _constants.createSQRT2}}),Object.defineProperty(exports,"createTau",{enumerable:!0,get:function(){return _constants.createTau}}),Object.defineProperty(exports,"createTrue",{enumerable:!0,get:function(){return _constants.createTrue}}),Object.defineProperty(exports,"createVersion",{enumerable:!0,get:function(){return _constants.createVersion}}),Object.defineProperty(exports,"createAtomicMass",{enumerable:!0,get:function(){return _physicalConstants.createAtomicMass}}),Object.defineProperty(exports,"createAvogadro",{enumerable:!0,get:function(){return _physicalConstants.createAvogadro}}),Object.defineProperty(exports,"createBohrMagneton",{enumerable:!0,get:function(){return _physicalConstants.createBohrMagneton}}),Object.defineProperty(exports,"createBohrRadius",{enumerable:!0,get:function(){return _physicalConstants.createBohrRadius}}),Object.defineProperty(exports,"createBoltzmann",{enumerable:!0,get:function(){return _physicalConstants.createBoltzmann}}),Object.defineProperty(exports,"createClassicalElectronRadius",{enumerable:!0,get:function(){return _physicalConstants.createClassicalElectronRadius}}),Object.defineProperty(exports,"createConductanceQuantum",{enumerable:!0,get:function(){return _physicalConstants.createConductanceQuantum}}),Object.defineProperty(exports,"createCoulomb",{enumerable:!0,get:function(){return _physicalConstants.createCoulomb}}),Object.defineProperty(exports,"createDeuteronMass",{enumerable:!0,get:function(){return _physicalConstants.createDeuteronMass}}),Object.defineProperty(exports,"createEfimovFactor",{enumerable:!0,get:function(){return _physicalConstants.createEfimovFactor}}),Object.defineProperty(exports,"createElectricConstant",{enumerable:!0,get:function(){return _physicalConstants.createElectricConstant}}),Object.defineProperty(exports,"createElectronMass",{enumerable:!0,get:function(){return _physicalConstants.createElectronMass}}),Object.defineProperty(exports,"createElementaryCharge",{enumerable:!0,get:function(){return _physicalConstants.createElementaryCharge}}),Object.defineProperty(exports,"createFaraday",{enumerable:!0,get:function(){return _physicalConstants.createFaraday}}),Object.defineProperty(exports,"createFermiCoupling",{enumerable:!0,get:function(){return _physicalConstants.createFermiCoupling}}),Object.defineProperty(exports,"createFineStructure",{enumerable:!0,get:function(){return _physicalConstants.createFineStructure}}),Object.defineProperty(exports,"createFirstRadiation",{enumerable:!0,get:function(){return _physicalConstants.createFirstRadiation}}),Object.defineProperty(exports,"createGasConstant",{enumerable:!0,get:function(){return _physicalConstants.createGasConstant}}),Object.defineProperty(exports,"createGravitationConstant",{enumerable:!0,get:function(){return _physicalConstants.createGravitationConstant}}),Object.defineProperty(exports,"createGravity",{enumerable:!0,get:function(){return _physicalConstants.createGravity}}),Object.defineProperty(exports,"createHartreeEnergy",{enumerable:!0,get:function(){return _physicalConstants.createHartreeEnergy}}),Object.defineProperty(exports,"createInverseConductanceQuantum",{enumerable:!0,get:function(){return _physicalConstants.createInverseConductanceQuantum}}),Object.defineProperty(exports,"createKlitzing",{enumerable:!0,get:function(){return _physicalConstants.createKlitzing}}),Object.defineProperty(exports,"createLoschmidt",{enumerable:!0,get:function(){return _physicalConstants.createLoschmidt}}),Object.defineProperty(exports,"createMagneticConstant",{enumerable:!0,get:function(){return _physicalConstants.createMagneticConstant}}),Object.defineProperty(exports,"createMagneticFluxQuantum",{enumerable:!0,get:function(){return _physicalConstants.createMagneticFluxQuantum}}),Object.defineProperty(exports,"createMolarMass",{enumerable:!0,get:function(){return _physicalConstants.createMolarMass}}),Object.defineProperty(exports,"createMolarMassC12",{enumerable:!0,get:function(){return _physicalConstants.createMolarMassC12}}),Object.defineProperty(exports,"createMolarPlanckConstant",{enumerable:!0,get:function(){return _physicalConstants.createMolarPlanckConstant}}),Object.defineProperty(exports,"createMolarVolume",{enumerable:!0,get:function(){return _physicalConstants.createMolarVolume}}),Object.defineProperty(exports,"createNeutronMass",{enumerable:!0,get:function(){return _physicalConstants.createNeutronMass}}),Object.defineProperty(exports,"createNuclearMagneton",{enumerable:!0,get:function(){return _physicalConstants.createNuclearMagneton}}),Object.defineProperty(exports,"createPlanckCharge",{enumerable:!0,get:function(){return _physicalConstants.createPlanckCharge}}),Object.defineProperty(exports,"createPlanckConstant",{enumerable:!0,get:function(){return _physicalConstants.createPlanckConstant}}),Object.defineProperty(exports,"createPlanckLength",{enumerable:!0,get:function(){return _physicalConstants.createPlanckLength}}),Object.defineProperty(exports,"createPlanckMass",{enumerable:!0,get:function(){return _physicalConstants.createPlanckMass}}),Object.defineProperty(exports,"createPlanckTemperature",{enumerable:!0,get:function(){return _physicalConstants.createPlanckTemperature}}),Object.defineProperty(exports,"createPlanckTime",{enumerable:!0,get:function(){return _physicalConstants.createPlanckTime}}),Object.defineProperty(exports,"createProtonMass",{enumerable:!0,get:function(){return _physicalConstants.createProtonMass}}),Object.defineProperty(exports,"createQuantumOfCirculation",{enumerable:!0,get:function(){return _physicalConstants.createQuantumOfCirculation}}),Object.defineProperty(exports,"createReducedPlanckConstant",{enumerable:!0,get:function(){return _physicalConstants.createReducedPlanckConstant}}),Object.defineProperty(exports,"createRydberg",{enumerable:!0,get:function(){return _physicalConstants.createRydberg}}),Object.defineProperty(exports,"createSackurTetrode",{enumerable:!0,get:function(){return _physicalConstants.createSackurTetrode}}),Object.defineProperty(exports,"createSecondRadiation",{enumerable:!0,get:function(){return _physicalConstants.createSecondRadiation}}),Object.defineProperty(exports,"createSpeedOfLight",{enumerable:!0,get:function(){return _physicalConstants.createSpeedOfLight}}),Object.defineProperty(exports,"createStefanBoltzmann",{enumerable:!0,get:function(){return _physicalConstants.createStefanBoltzmann}}),Object.defineProperty(exports,"createThomsonCrossSection",{enumerable:!0,get:function(){return _physicalConstants.createThomsonCrossSection}}),Object.defineProperty(exports,"createVacuumImpedance",{enumerable:!0,get:function(){return _physicalConstants.createVacuumImpedance}}),Object.defineProperty(exports,"createWeakMixingAngle",{enumerable:!0,get:function(){return _physicalConstants.createWeakMixingAngle}}),Object.defineProperty(exports,"createWienDisplacement",{enumerable:!0,get:function(){return _physicalConstants.createWienDisplacement}}),Object.defineProperty(exports,"createApplyTransform",{enumerable:!0,get:function(){return _apply2.createApplyTransform}}),Object.defineProperty(exports,"createColumnTransform",{enumerable:!0,get:function(){return _column2.createColumnTransform}}),Object.defineProperty(exports,"createFilterTransform",{enumerable:!0,get:function(){return _filter2.createFilterTransform}}),Object.defineProperty(exports,"createForEachTransform",{enumerable:!0,get:function(){return _forEach2.createForEachTransform}}),Object.defineProperty(exports,"createIndexTransform",{enumerable:!0,get:function(){return _index.createIndexTransform}}),Object.defineProperty(exports,"createMapTransform",{enumerable:!0,get:function(){return _map2.createMapTransform}}),Object.defineProperty(exports,"createMaxTransform",{enumerable:!0,get:function(){return _max2.createMaxTransform}}),Object.defineProperty(exports,"createMeanTransform",{enumerable:!0,get:function(){return _mean2.createMeanTransform}}),Object.defineProperty(exports,"createMinTransform",{enumerable:!0,get:function(){return _min2.createMinTransform}}),Object.defineProperty(exports,"createRangeTransform",{enumerable:!0,get:function(){return _range2.createRangeTransform}}),Object.defineProperty(exports,"createRowTransform",{enumerable:!0,get:function(){return _row2.createRowTransform}}),Object.defineProperty(exports,"createSubsetTransform",{enumerable:!0,get:function(){return _subset2.createSubsetTransform}}),Object.defineProperty(exports,"createConcatTransform",{enumerable:!0,get:function(){return _concat2.createConcatTransform}}),Object.defineProperty(exports,"createStdTransform",{enumerable:!0,get:function(){return _std2.createStdTransform}}),Object.defineProperty(exports,"createSumTransform",{enumerable:!0,get:function(){return _sum2.createSumTransform}}),Object.defineProperty(exports,"createVarianceTransform",{enumerable:!0,get:function(){return _variance2.createVarianceTransform}});var _typed=require("./core/function/typed"),_ResultSet=require("./type/resultset/ResultSet"),_BigNumber=require("./type/bignumber/BigNumber"),_Complex=require("./type/complex/Complex"),_Fraction=require("./type/fraction/Fraction"),_Range=require("./type/matrix/Range"),_Matrix=require("./type/matrix/Matrix"),_DenseMatrix=require("./type/matrix/DenseMatrix"),_clone=require("./function/utils/clone"),_isInteger=require("./function/utils/isInteger"),_isNegative=require("./function/utils/isNegative"),_isNumeric=require("./function/utils/isNumeric"),_hasNumericValue=require("./function/utils/hasNumericValue"),_isPositive=require("./function/utils/isPositive"),_isZero=require("./function/utils/isZero"),_isNaN=require("./function/utils/isNaN"),_typeOf=require("./function/utils/typeOf"),_equalScalar=require("./function/relational/equalScalar"),_SparseMatrix=require("./type/matrix/SparseMatrix"),_number=require("./type/number"),_string=require("./type/string"),_boolean=require("./type/boolean"),_bignumber=require("./type/bignumber/function/bignumber"),_complex=require("./type/complex/function/complex"),_fraction=require("./type/fraction/function/fraction"),_matrix=require("./type/matrix/function/matrix"),_splitUnit=require("./type/unit/function/splitUnit"),_unaryMinus=require("./function/arithmetic/unaryMinus"),_unaryPlus=require("./function/arithmetic/unaryPlus"),_abs=require("./function/arithmetic/abs"),_apply=require("./function/matrix/apply"),_addScalar=require("./function/arithmetic/addScalar"),_cbrt=require("./function/arithmetic/cbrt"),_ceil=require("./function/arithmetic/ceil"),_cube=require("./function/arithmetic/cube"),_exp=require("./function/arithmetic/exp"),_expm=require("./function/arithmetic/expm1"),_fix=require("./function/arithmetic/fix"),_floor=require("./function/arithmetic/floor"),_gcd=require("./function/arithmetic/gcd"),_lcm=require("./function/arithmetic/lcm"),_log=require("./function/arithmetic/log10"),_log2=require("./function/arithmetic/log2"),_mod=require("./function/arithmetic/mod"),_multiplyScalar=require("./function/arithmetic/multiplyScalar"),_multiply=require("./function/arithmetic/multiply"),_nthRoot=require("./function/arithmetic/nthRoot"),_sign=require("./function/arithmetic/sign"),_sqrt=require("./function/arithmetic/sqrt"),_square=require("./function/arithmetic/square"),_subtract=require("./function/arithmetic/subtract"),_xgcd=require("./function/arithmetic/xgcd"),_dotMultiply=require("./function/arithmetic/dotMultiply"),_bitAnd=require("./function/bitwise/bitAnd"),_bitNot=require("./function/bitwise/bitNot"),_bitOr=require("./function/bitwise/bitOr"),_bitXor=require("./function/bitwise/bitXor"),_arg=require("./function/complex/arg"),_conj=require("./function/complex/conj"),_im=require("./function/complex/im"),_re=require("./function/complex/re"),_not=require("./function/logical/not"),_or=require("./function/logical/or"),_xor=require("./function/logical/xor"),_concat=require("./function/matrix/concat"),_column=require("./function/matrix/column"),_cross=require("./function/matrix/cross"),_diag=require("./function/matrix/diag"),_eye=require("./function/matrix/eye"),_filter=require("./function/matrix/filter"),_flatten=require("./function/matrix/flatten"),_forEach=require("./function/matrix/forEach"),_getMatrixDataType=require("./function/matrix/getMatrixDataType"),_identity=require("./function/matrix/identity"),_kron=require("./function/matrix/kron"),_map=require("./function/matrix/map"),_ones=require("./function/matrix/ones"),_range=require("./function/matrix/range"),_reshape=require("./function/matrix/reshape"),_resize=require("./function/matrix/resize"),_row=require("./function/matrix/row"),_size=require("./function/matrix/size"),_squeeze=require("./function/matrix/squeeze"),_subset=require("./function/matrix/subset"),_transpose=require("./function/matrix/transpose"),_ctranspose=require("./function/matrix/ctranspose"),_zeros=require("./function/matrix/zeros"),_erf=require("./function/special/erf"),_mode=require("./function/statistics/mode"),_prod=require("./function/statistics/prod"),_format=require("./function/string/format"),_print=require("./function/string/print"),_to=require("./function/unit/to"),_isPrime=require("./function/utils/isPrime"),_numeric=require("./function/utils/numeric"),_divideScalar=require("./function/arithmetic/divideScalar"),_pow=require("./function/arithmetic/pow"),_round=require("./function/arithmetic/round"),_log3=require("./function/arithmetic/log"),_log1p=require("./function/arithmetic/log1p"),_nthRoots=require("./function/arithmetic/nthRoots"),_dotPow=require("./function/arithmetic/dotPow"),_dotDivide=require("./function/arithmetic/dotDivide"),_lsolve=require("./function/algebra/solver/lsolve"),_usolve=require("./function/algebra/solver/usolve"),_leftShift=require("./function/bitwise/leftShift"),_rightArithShift=require("./function/bitwise/rightArithShift"),_rightLogShift=require("./function/bitwise/rightLogShift"),_and=require("./function/logical/and"),_compare=require("./function/relational/compare"),_compareNatural=require("./function/relational/compareNatural"),_compareText=require("./function/relational/compareText"),_equal=require("./function/relational/equal"),_equalText=require("./function/relational/equalText"),_smaller=require("./function/relational/smaller"),_smallerEq=require("./function/relational/smallerEq"),_larger=require("./function/relational/larger"),_largerEq=require("./function/relational/largerEq"),_deepEqual=require("./function/relational/deepEqual"),_unequal=require("./function/relational/unequal"),_partitionSelect=require("./function/matrix/partitionSelect"),_sort=require("./function/matrix/sort"),_max=require("./function/statistics/max"),_min=require("./function/statistics/min"),_ImmutableDenseMatrix=require("./type/matrix/ImmutableDenseMatrix"),_MatrixIndex=require("./type/matrix/MatrixIndex"),_FibonacciHeap=require("./type/matrix/FibonacciHeap"),_Spa=require("./type/matrix/Spa"),_Unit=require("./type/unit/Unit"),_unit=require("./type/unit/function/unit"),_sparse=require("./type/matrix/function/sparse"),_createUnit=require("./type/unit/function/createUnit"),_acos=require("./function/trigonometry/acos"),_acosh=require("./function/trigonometry/acosh"),_acot=require("./function/trigonometry/acot"),_acoth=require("./function/trigonometry/acoth"),_acsc=require("./function/trigonometry/acsc"),_acsch=require("./function/trigonometry/acsch"),_asec=require("./function/trigonometry/asec"),_asech=require("./function/trigonometry/asech"),_asin=require("./function/trigonometry/asin"),_asinh=require("./function/trigonometry/asinh"),_atan=require("./function/trigonometry/atan"),_atan2=require("./function/trigonometry/atan2"),_atanh=require("./function/trigonometry/atanh"),_cos=require("./function/trigonometry/cos"),_cosh=require("./function/trigonometry/cosh"),_cot=require("./function/trigonometry/cot"),_coth=require("./function/trigonometry/coth"),_csc=require("./function/trigonometry/csc"),_csch=require("./function/trigonometry/csch"),_sec=require("./function/trigonometry/sec"),_sech=require("./function/trigonometry/sech"),_sin=require("./function/trigonometry/sin"),_sinh=require("./function/trigonometry/sinh"),_tan=require("./function/trigonometry/tan"),_tanh=require("./function/trigonometry/tanh"),_setCartesian=require("./function/set/setCartesian"),_setDifference=require("./function/set/setDifference"),_setDistinct=require("./function/set/setDistinct"),_setIntersect=require("./function/set/setIntersect"),_setIsSubset=require("./function/set/setIsSubset"),_setMultiplicity=require("./function/set/setMultiplicity"),_setPowerset=require("./function/set/setPowerset"),_setSize=require("./function/set/setSize"),_setSymDifference=require("./function/set/setSymDifference"),_setUnion=require("./function/set/setUnion"),_add=require("./function/arithmetic/add"),_hypot=require("./function/arithmetic/hypot"),_norm=require("./function/arithmetic/norm"),_dot=require("./function/matrix/dot"),_trace=require("./function/matrix/trace"),_function=require("./type/matrix/function"),_Node=require("./expression/node/Node"),_AccessorNode=require("./expression/node/AccessorNode"),_ArrayNode=require("./expression/node/ArrayNode"),_AssignmentNode=require("./expression/node/AssignmentNode"),_BlockNode=require("./expression/node/BlockNode"),_ConditionalNode=require("./expression/node/ConditionalNode"),_ConstantNode=require("./expression/node/ConstantNode"),_FunctionAssignmentNode=require("./expression/node/FunctionAssignmentNode"),_IndexNode=require("./expression/node/IndexNode"),_ObjectNode=require("./expression/node/ObjectNode"),_OperatorNode=require("./expression/node/OperatorNode"),_ParenthesisNode=require("./expression/node/ParenthesisNode"),_RangeNode=require("./expression/node/RangeNode"),_RelationalNode=require("./expression/node/RelationalNode"),_SymbolNode=require("./expression/node/SymbolNode"),_FunctionNode=require("./expression/node/FunctionNode"),_parse=require("./expression/parse"),_compile=require("./expression/function/compile"),_evaluate=require("./expression/function/evaluate"),_eval=require("./expression/function/eval"),_Parser=require("./expression/Parser"),_parser=require("./expression/function/parser"),_lup=require("./function/algebra/decomposition/lup"),_qr=require("./function/algebra/decomposition/qr"),_slu=require("./function/algebra/decomposition/slu"),_lusolve=require("./function/algebra/solver/lusolve"),_Help=require("./expression/Help"),_Chain=require("./type/chain/Chain"),_help=require("./expression/function/help"),_chain=require("./type/chain/function/chain"),_det=require("./function/matrix/det"),_inv=require("./function/matrix/inv"),_eigs=require("./function/matrix/eigs"),_expm2=require("./function/matrix/expm"),_sqrtm=require("./function/matrix/sqrtm"),_divide=require("./function/arithmetic/divide"),_distance=require("./function/geometry/distance"),_intersect=require("./function/geometry/intersect"),_sum=require("./function/statistics/sum"),_mean=require("./function/statistics/mean"),_median=require("./function/statistics/median"),_mad=require("./function/statistics/mad"),_variance=require("./function/statistics/variance"),_quantileSeq=require("./function/statistics/quantileSeq"),_std=require("./function/statistics/std"),_combinations=require("./function/probability/combinations"),_combinationsWithRep=require("./function/probability/combinationsWithRep"),_gamma=require("./function/probability/gamma"),_factorial=require("./function/probability/factorial"),_kldivergence=require("./function/probability/kldivergence"),_multinomial=require("./function/probability/multinomial"),_permutations=require("./function/probability/permutations"),_pickRandom=require("./function/probability/pickRandom"),_random=require("./function/probability/random"),_randomInt=require("./function/probability/randomInt"),_stirlingS=require("./function/combinatorics/stirlingS2"),_bellNumbers=require("./function/combinatorics/bellNumbers"),_catalan=require("./function/combinatorics/catalan"),_composition=require("./function/combinatorics/composition"),_simplify=require("./function/algebra/simplify"),_derivative=require("./function/algebra/derivative"),_rationalize=require("./function/algebra/rationalize"),_reviver=require("./json/reviver"),_replacer=require("./json/replacer"),_constants=require("./constants"),_physicalConstants=require("./type/unit/physicalConstants"),_apply2=require("./expression/transform/apply.transform"),_column2=require("./expression/transform/column.transform"),_filter2=require("./expression/transform/filter.transform"),_forEach2=require("./expression/transform/forEach.transform"),_index=require("./expression/transform/index.transform"),_map2=require("./expression/transform/map.transform"),_max2=require("./expression/transform/max.transform"),_mean2=require("./expression/transform/mean.transform"),_min2=require("./expression/transform/min.transform"),_range2=require("./expression/transform/range.transform"),_row2=require("./expression/transform/row.transform"),_subset2=require("./expression/transform/subset.transform"),_concat2=require("./expression/transform/concat.transform"),_std2=require("./expression/transform/std.transform"),_sum2=require("./expression/transform/sum.transform"),_variance2=require("./expression/transform/variance.transform")},{"./constants":59,"./core/function/typed":65,"./expression/Help":401,"./expression/Parser":402,"./expression/function/compile":614,"./expression/function/eval":615,"./expression/function/evaluate":616,"./expression/function/help":617,"./expression/function/parser":618,"./expression/node/AccessorNode":620,"./expression/node/ArrayNode":621,"./expression/node/AssignmentNode":622,"./expression/node/BlockNode":623,"./expression/node/ConditionalNode":624,"./expression/node/ConstantNode":625,"./expression/node/FunctionAssignmentNode":626,"./expression/node/FunctionNode":627,"./expression/node/IndexNode":628,"./expression/node/Node":629,"./expression/node/ObjectNode":630,"./expression/node/OperatorNode":631,"./expression/node/ParenthesisNode":632,"./expression/node/RangeNode":633,"./expression/node/RelationalNode":634,"./expression/node/SymbolNode":635,"./expression/parse":639,"./expression/transform/apply.transform":640,"./expression/transform/column.transform":641,"./expression/transform/concat.transform":642,"./expression/transform/filter.transform":643,"./expression/transform/forEach.transform":644,"./expression/transform/index.transform":645,"./expression/transform/map.transform":646,"./expression/transform/max.transform":647,"./expression/transform/mean.transform":648,"./expression/transform/min.transform":649,"./expression/transform/range.transform":650,"./expression/transform/row.transform":651,"./expression/transform/std.transform":652,"./expression/transform/subset.transform":653,"./expression/transform/sum.transform":654,"./expression/transform/variance.transform":657,"./function/algebra/decomposition/lup":659,"./function/algebra/decomposition/qr":660,"./function/algebra/decomposition/slu":661,"./function/algebra/derivative":662,"./function/algebra/rationalize":663,"./function/algebra/simplify":664,"./function/algebra/solver/lsolve":669,"./function/algebra/solver/lusolve":670,"./function/algebra/solver/usolve":671,"./function/arithmetic/abs":691,"./function/arithmetic/add":692,"./function/arithmetic/addScalar":693,"./function/arithmetic/cbrt":694,"./function/arithmetic/ceil":695,"./function/arithmetic/cube":696,"./function/arithmetic/divide":697,"./function/arithmetic/divideScalar":698,"./function/arithmetic/dotDivide":699,"./function/arithmetic/dotMultiply":700,"./function/arithmetic/dotPow":701,"./function/arithmetic/exp":702,"./function/arithmetic/expm1":703,"./function/arithmetic/fix":704,"./function/arithmetic/floor":705,"./function/arithmetic/gcd":706,"./function/arithmetic/hypot":707,"./function/arithmetic/lcm":708,"./function/arithmetic/log":709,"./function/arithmetic/log10":710,"./function/arithmetic/log1p":711,"./function/arithmetic/log2":712,"./function/arithmetic/mod":713,"./function/arithmetic/multiply":714,"./function/arithmetic/multiplyScalar":715,"./function/arithmetic/norm":716,"./function/arithmetic/nthRoot":717,"./function/arithmetic/nthRoots":718,"./function/arithmetic/pow":719,"./function/arithmetic/round":720,"./function/arithmetic/sign":721,"./function/arithmetic/sqrt":722,"./function/arithmetic/square":723,"./function/arithmetic/subtract":724,"./function/arithmetic/unaryMinus":725,"./function/arithmetic/unaryPlus":726,"./function/arithmetic/xgcd":727,"./function/bitwise/bitAnd":728,"./function/bitwise/bitNot":729,"./function/bitwise/bitOr":730,"./function/bitwise/bitXor":731,"./function/bitwise/leftShift":732,"./function/bitwise/rightArithShift":733,"./function/bitwise/rightLogShift":734,"./function/combinatorics/bellNumbers":735,"./function/combinatorics/catalan":736,"./function/combinatorics/composition":737,"./function/combinatorics/stirlingS2":738,"./function/complex/arg":739,"./function/complex/conj":740,"./function/complex/im":741,"./function/complex/re":742,"./function/geometry/distance":743,"./function/geometry/intersect":744,"./function/logical/and":745,"./function/logical/not":746,"./function/logical/or":747,"./function/logical/xor":748,"./function/matrix/apply":749,"./function/matrix/column":750,"./function/matrix/concat":751,"./function/matrix/cross":752,"./function/matrix/ctranspose":753,"./function/matrix/det":754,"./function/matrix/diag":755,"./function/matrix/dot":756,"./function/matrix/eigs":757,"./function/matrix/expm":758,"./function/matrix/eye":759,"./function/matrix/filter":760,"./function/matrix/flatten":761,"./function/matrix/forEach":762,"./function/matrix/getMatrixDataType":763,"./function/matrix/identity":764,"./function/matrix/inv":765,"./function/matrix/kron":766,"./function/matrix/map":767,"./function/matrix/ones":768,"./function/matrix/partitionSelect":769,"./function/matrix/range":770,"./function/matrix/reshape":771,"./function/matrix/resize":772,"./function/matrix/row":773,"./function/matrix/size":774,"./function/matrix/sort":775,"./function/matrix/sqrtm":776,"./function/matrix/squeeze":777,"./function/matrix/subset":778,"./function/matrix/trace":779,"./function/matrix/transpose":780,"./function/matrix/zeros":781,"./function/probability/combinations":782,"./function/probability/combinationsWithRep":783,"./function/probability/factorial":784,"./function/probability/gamma":785,"./function/probability/kldivergence":786,"./function/probability/multinomial":787,"./function/probability/permutations":788,"./function/probability/pickRandom":789,"./function/probability/random":790,"./function/probability/randomInt":791,"./function/relational/compare":794,"./function/relational/compareNatural":795,"./function/relational/compareText":796,"./function/relational/deepEqual":797,"./function/relational/equal":798,"./function/relational/equalScalar":799,"./function/relational/equalText":800,"./function/relational/larger":801,"./function/relational/largerEq":802,"./function/relational/smaller":803,"./function/relational/smallerEq":804,"./function/relational/unequal":805,"./function/set/setCartesian":806,"./function/set/setDifference":807,"./function/set/setDistinct":808,"./function/set/setIntersect":809,"./function/set/setIsSubset":810,"./function/set/setMultiplicity":811,"./function/set/setPowerset":812,"./function/set/setSize":813,"./function/set/setSymDifference":814,"./function/set/setUnion":815,"./function/special/erf":816,"./function/statistics/mad":817,"./function/statistics/max":818,"./function/statistics/mean":819,"./function/statistics/median":820,"./function/statistics/min":821,"./function/statistics/mode":822,"./function/statistics/prod":823,"./function/statistics/quantileSeq":824,"./function/statistics/std":825,"./function/statistics/sum":826,"./function/statistics/variance":828,"./function/string/format":829,"./function/string/print":830,"./function/trigonometry/acos":831,"./function/trigonometry/acosh":832,"./function/trigonometry/acot":833,"./function/trigonometry/acoth":834,"./function/trigonometry/acsc":835,"./function/trigonometry/acsch":836,"./function/trigonometry/asec":837,"./function/trigonometry/asech":838,"./function/trigonometry/asin":839,"./function/trigonometry/asinh":840,"./function/trigonometry/atan":841,"./function/trigonometry/atan2":842,"./function/trigonometry/atanh":843,"./function/trigonometry/cos":844,"./function/trigonometry/cosh":845,"./function/trigonometry/cot":846,"./function/trigonometry/coth":847,"./function/trigonometry/csc":848,"./function/trigonometry/csch":849,"./function/trigonometry/sec":850,"./function/trigonometry/sech":851,"./function/trigonometry/sin":852,"./function/trigonometry/sinh":853,"./function/trigonometry/tan":854,"./function/trigonometry/tanh":855,"./function/unit/to":856,"./function/utils/clone":857,"./function/utils/hasNumericValue":858,"./function/utils/isInteger":859,"./function/utils/isNaN":860,"./function/utils/isNegative":861,"./function/utils/isNumeric":862,"./function/utils/isPositive":863,"./function/utils/isPrime":864,"./function/utils/isZero":865,"./function/utils/numeric":866,"./function/utils/typeOf":867,"./json/replacer":868,"./json/reviver":869,"./type/bignumber/BigNumber":880,"./type/bignumber/function/bignumber":881,"./type/boolean":882,"./type/chain/Chain":883,"./type/chain/function/chain":884,"./type/complex/Complex":885,"./type/complex/function/complex":886,"./type/fraction/Fraction":887,"./type/fraction/function/fraction":888,"./type/matrix/DenseMatrix":889,"./type/matrix/FibonacciHeap":890,"./type/matrix/ImmutableDenseMatrix":891,"./type/matrix/Matrix":892,"./type/matrix/MatrixIndex":893,"./type/matrix/Range":894,"./type/matrix/Spa":895,"./type/matrix/SparseMatrix":896,"./type/matrix/function":897,"./type/matrix/function/matrix":898,"./type/matrix/function/sparse":899,"./type/number":914,"./type/resultset/ResultSet":915,"./type/string":916,"./type/unit/Unit":917,"./type/unit/function/createUnit":918,"./type/unit/function/splitUnit":919,"./type/unit/function/unit":920,"./type/unit/physicalConstants":921}],659:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLup=void 0;var _object=require("../../../utils/object"),_factory=require("../../../utils/factory"),dependencies=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],createLup=(0,_factory.factory)("lup",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,abs=_ref.abs,addScalar=_ref.addScalar,divideScalar=_ref.divideScalar,multiplyScalar=_ref.multiplyScalar,subtract=_ref.subtract,larger=_ref.larger,equalScalar=_ref.equalScalar,unaryMinus=_ref.unaryMinus,DenseMatrix=_ref.DenseMatrix,SparseMatrix=_ref.SparseMatrix,Spa=_ref.Spa;return typed("lup",{DenseMatrix:_denseLUP,SparseMatrix:_sparseLUP,Array:function(a){var r=_denseLUP(matrix(a));return{L:r.L.valueOf(),U:r.U.valueOf(),p:r.p}}});function _denseLUP(m){var j,rows=m._size[0],columns=m._size[1],n=Math.min(rows,columns),data=(0,_object.clone)(m._data),ldata=[],lsize=[rows,n],udata=[],usize=[n,columns],p=[];for(i=0;i<rows;i++)p[i]=i;for(j=0;j<columns;j++){if(0<j)for(i=0;i<rows;i++){for(var min=Math.min(i,j),s=0,k=0;k<min;k++)s=addScalar(s,multiplyScalar(data[i][k],data[k][j]));data[i][j]=subtract(data[i][j],s)}for(var pi=j,pabsv=0,vjj=0,i=j;i<rows;i++){var v=data[i][j],absv=abs(v);larger(absv,pabsv)&&(pi=i,pabsv=absv,vjj=v)}if(j!==pi&&(p[j]=[p[pi],p[pi]=p[j]][0],DenseMatrix._swapRows(j,pi,data)),j<rows)for(i=j+1;i<rows;i++){var vij=data[i][j];equalScalar(vij,0)||(data[i][j]=divideScalar(data[i][j],vjj))}}for(j=0;j<columns;j++)for(i=0;i<rows;i++)0===j&&(i<columns&&(udata[i]=[]),ldata[i]=[]),i<j?(i<columns&&(udata[i][j]=data[i][j]),j<rows&&(ldata[i][j]=0)):i!==j?(i<columns&&(udata[i][j]=0),j<rows&&(ldata[i][j]=data[i][j])):(i<columns&&(udata[i][j]=data[i][j]),j<rows&&(ldata[i][j]=1));var l=new DenseMatrix({data:ldata,size:lsize}),u=new DenseMatrix({data:udata,size:usize}),pv=[];for(i=0,n=p.length;i<n;i++)pv[p[i]]=i;return{L:l,U:u,p:pv,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}function _sparseLUP(m){for(var k,rows=m._size[0],columns=m._size[1],n=Math.min(rows,columns),values=m._values,index=m._index,ptr=m._ptr,lvalues=[],lindex=[],lptr=[],lsize=[rows,n],uvalues=[],uindex=[],uptr=[],usize=[n,columns],pvCo=[],pvOc=[],i=0;i<rows;i++)pvCo[i]=i,pvOc[i]=i;for(var _loop=function(){var spa=new Spa;j<rows&&(lptr.push(lvalues.length),lvalues.push(1),lindex.push(j)),uptr.push(uvalues.length);var k0=ptr[j],k1=ptr[j+1];for(k=k0;k<k1;k++)i=index[k],spa.set(pvCo[i],values[k]);0<j&&spa.forEach(0,j-1,function(k,vkj){SparseMatrix._forEachRow(k,lvalues,lindex,lptr,function(i,vik){k<i&&spa.accumulate(i,unaryMinus(multiplyScalar(vik,vkj)))})});var x,y,kx,ky,pi=j,vjj=spa.get(j),pabsv=abs(vjj);spa.forEach(j+1,rows-1,function(x,v){var absv=abs(v);larger(absv,pabsv)&&(pi=x,pabsv=absv,vjj=v)}),j!==pi&&(SparseMatrix._swapRows(j,pi,lsize[1],lvalues,lindex,lptr),SparseMatrix._swapRows(j,pi,usize[1],uvalues,uindex,uptr),spa.swap(j,pi),y=pi,kx=pvOc[x=j],ky=pvOc[y],pvCo[kx]=y,pvCo[ky]=x,pvOc[x]=ky,pvOc[y]=kx),spa.forEach(0,rows-1,function(x,v){x<=j?(uvalues.push(v),uindex.push(x)):(v=divideScalar(v,vjj),equalScalar(v,0)||(lvalues.push(v),lindex.push(x)))})},j=0;j<columns;j++)_loop();return uptr.push(uvalues.length),lptr.push(lvalues.length),{L:new SparseMatrix({values:lvalues,index:lindex,ptr:lptr,size:lsize}),U:new SparseMatrix({values:uvalues,index:uindex,ptr:uptr,size:usize}),p:pvCo,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}});exports.createLup=createLup},{"../../../utils/factory":931,"../../../utils/object":938}],660:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createQr=void 0;var _factory=require("../../../utils/factory");function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var dependencies=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],createQr=(0,_factory.factory)("qr",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,zeros=_ref.zeros,identity=_ref.identity,isZero=_ref.isZero,equal=_ref.equal,sign=_ref.sign,sqrt=_ref.sqrt,conj=_ref.conj,unaryMinus=_ref.unaryMinus,addScalar=_ref.addScalar,divideScalar=_ref.divideScalar,multiplyScalar=_ref.multiplyScalar,subtract=_ref.subtract,complex=_ref.complex;return _extends(typed("qr",{DenseMatrix:_denseQR,SparseMatrix:function(){throw new Error("qr not implemented for sparse matrices yet")},Array:function(a){var r=_denseQR(matrix(a));return{Q:r.Q.valueOf(),R:r.R.valueOf()}}}),{_denseQRimpl:_denseQRimpl});function _denseQRimpl(m){for(var rows=m._size[0],cols=m._size[1],Q=identity([rows],"dense"),Qdata=Q._data,R=m.clone(),Rdata=R._data,w=zeros([rows],""),k=0;k<Math.min(cols,rows);++k){var pivot=Rdata[k][k],sgn=unaryMinus(equal(pivot,0)?1:sign(pivot)),conjSgn=conj(sgn),alphaSquared=0;for(i=k;i<rows;i++)alphaSquared=addScalar(alphaSquared,multiplyScalar(Rdata[i][k],conj(Rdata[i][k])));var alpha=multiplyScalar(sgn,sqrt(alphaSquared));if(!isZero(alpha)){for(var u1=subtract(pivot,alpha),i=k+(w[k]=1);i<rows;i++)w[i]=divideScalar(Rdata[i][k],u1);for(var tau=unaryMinus(conj(divideScalar(u1,alpha))),s=void 0,j=k;j<cols;j++){for(s=0,i=k;i<rows;i++)s=addScalar(s,multiplyScalar(conj(w[i]),Rdata[i][j]));for(s=multiplyScalar(s,tau),i=k;i<rows;i++)Rdata[i][j]=multiplyScalar(subtract(Rdata[i][j],multiplyScalar(w[i],s)),conjSgn)}for(i=0;i<rows;i++){for(s=0,j=k;j<rows;j++)s=addScalar(s,multiplyScalar(Qdata[i][j],w[j]));for(s=multiplyScalar(s,tau),j=k;j<rows;++j)Qdata[i][j]=divideScalar(subtract(Qdata[i][j],multiplyScalar(s,conj(w[j]))),conjSgn)}}}return{Q:Q,R:R,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function _denseQR(m){var ret=_denseQRimpl(m),Rdata=ret.R._data;if(0<m._data.length)for(var zero="Complex"===Rdata[0][0].type?complex(0):0,i=0;i<Rdata.length;++i)for(var j=0;j<i&&j<(Rdata[0]||[]).length;++j)Rdata[i][j]=zero;return ret}});exports.createQr=createQr},{"../../../utils/factory":931}],661:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSlu=void 0;var _number=require("../../../utils/number"),_factory=require("../../../utils/factory"),_csSqr=require("../sparse/csSqr"),_csLu=require("../sparse/csLu"),dependencies=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],createSlu=(0,_factory.factory)("slu",dependencies,function(_ref){var typed=_ref.typed,abs=_ref.abs,add=_ref.add,multiply=_ref.multiply,transpose=_ref.transpose,divideScalar=_ref.divideScalar,subtract=_ref.subtract,larger=_ref.larger,largerEq=_ref.largerEq,SparseMatrix=_ref.SparseMatrix,csSqr=(0,_csSqr.createCsSqr)({add:add,multiply:multiply,transpose:transpose}),csLu=(0,_csLu.createCsLu)({abs:abs,divideScalar:divideScalar,multiply:multiply,subtract:subtract,larger:larger,largerEq:largerEq,SparseMatrix:SparseMatrix});return typed("slu",{"SparseMatrix, number, number":function(a,order,threshold){if(!(0,_number.isInteger)(order)||order<0||3<order)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(threshold<0||1<threshold)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var s=csSqr(order,a,!1),f=csLu(a,s,threshold);return{L:f.L,U:f.U,p:f.pinv,q:s.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}})});exports.createSlu=createSlu},{"../../../utils/factory":931,"../../../utils/number":937,"../sparse/csLu":681,"../sparse/csSqr":688}],662:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDerivative=void 0;var _is=require("../../utils/is"),dependencies=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],createDerivative=(0,require("../../utils/factory").factory)("derivative",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,parse=_ref.parse,simplify=_ref.simplify,equal=_ref.equal,isZero=_ref.isZero,numeric=_ref.numeric,ConstantNode=_ref.ConstantNode,FunctionNode=_ref.FunctionNode,OperatorNode=_ref.OperatorNode,ParenthesisNode=_ref.ParenthesisNode,SymbolNode=_ref.SymbolNode,derivative=typed("derivative",{"Node, SymbolNode, Object":function(expr,variable,options){var constNodes={};constTag(constNodes,expr,variable.name);var res=_derivative(expr,constNodes);return options.simplify?simplify(res):res},"Node, SymbolNode":function(expr,variable){return derivative(expr,variable,{simplify:!0})},"string, SymbolNode":function(expr,variable){return derivative(parse(expr),variable)},"string, SymbolNode, Object":function(expr,variable,options){return derivative(parse(expr),variable,options)},"string, string":function(expr,variable){return derivative(parse(expr),parse(variable))},"string, string, Object":function(expr,variable,options){return derivative(parse(expr),parse(variable),options)},"Node, string":function(expr,variable){return derivative(expr,parse(variable))},"Node, string, Object":function(expr,variable,options){return derivative(expr,parse(variable),options)}});derivative._simplify=!0,derivative.toTex=function(deriv){return _derivTex.apply(null,deriv.args)};var _derivTex=typed("_derivTex",{"Node, SymbolNode":function(expr,x){return(0,_is.isConstantNode)(expr)&&"string"===(0,_is.typeOf)(expr.value)?_derivTex(parse(expr.value).toString(),x.toString(),1):_derivTex(expr.toString(),x.toString(),1)},"Node, ConstantNode":function(expr,x){if("string"===(0,_is.typeOf)(x.value))return _derivTex(expr,parse(x.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(expr,x,order){return _derivTex(expr.toString(),x.name,order.value)},"string, string, number":function(expr,x,order){var d=1===order?"{d\\over d"+x+"}":"{d^{"+order+"}\\over d"+x+"^{"+order+"}}";return d+"\\left[".concat(expr,"\\right]")}}),constTag=typed("constTag",{"Object, ConstantNode, string":function(constNodes,node){return constNodes[node]=!0},"Object, SymbolNode, string":function(constNodes,node,varName){return node.name!==varName&&(constNodes[node]=!0)},"Object, ParenthesisNode, string":function(constNodes,node,varName){return constTag(constNodes,node.content,varName)},"Object, FunctionAssignmentNode, string":function(constNodes,node,varName){return-1===node.params.indexOf(varName)?constNodes[node]=!0:constTag(constNodes,node.expr,varName)},"Object, FunctionNode | OperatorNode, string":function(constNodes,node,varName){if(0<node.args.length){for(var isConst=constTag(constNodes,node.args[0],varName),i=1;i<node.args.length;++i)isConst=constTag(constNodes,node.args[i],varName)&&isConst;if(isConst)return constNodes[node]=!0}return!1}}),_derivative=typed("_derivative",{"ConstantNode, Object":function(){return createConstantNode(0)},"SymbolNode, Object":function(node,constNodes){return void 0!==constNodes[node]?createConstantNode(0):createConstantNode(1)},"ParenthesisNode, Object":function(node,constNodes){return new ParenthesisNode(_derivative(node.content,constNodes))},"FunctionAssignmentNode, Object":function(node,constNodes){return void 0!==constNodes[node]?createConstantNode(0):_derivative(node.expr,constNodes)},"FunctionNode, Object":function(node,constNodes){if(1!==node.args.length&&function(node){if(("log"===node.name||"nthRoot"===node.name||"pow"===node.name)&&2===node.args.length)return;for(var i=0;i<node.args.length;++i)node.args[i]=createConstantNode(0);throw node.compile().evaluate(),new Error("Expected TypeError, but none found")}(node),void 0!==constNodes[node])return createConstantNode(0);var arg1,funcDerivative,op,func,arg0=node.args[0],div=!1,negative=!1;switch(node.name){case"cbrt":div=!0,funcDerivative=new OperatorNode("*","multiply",[createConstantNode(3),new OperatorNode("^","pow",[arg0,new OperatorNode("/","divide",[createConstantNode(2),createConstantNode(3)])])]);break;case"sqrt":case"nthRoot":if(1===node.args.length)div=!0,funcDerivative=new OperatorNode("*","multiply",[createConstantNode(2),new FunctionNode("sqrt",[arg0])]);else if(2===node.args.length)return constNodes[arg1=new OperatorNode("/","divide",[createConstantNode(1),node.args[1]])]=constNodes[node.args[1]],_derivative(new OperatorNode("^","pow",[arg0,arg1]),constNodes);break;case"log10":arg1=createConstantNode(10);case"log":if(arg1||1!==node.args.length){if(1===node.args.length&&arg1||2===node.args.length&&void 0!==constNodes[node.args[1]])funcDerivative=new OperatorNode("*","multiply",[arg0.clone(),new FunctionNode("log",[arg1||node.args[1]])]),div=!0;else if(2===node.args.length)return _derivative(new OperatorNode("/","divide",[new FunctionNode("log",[arg0]),new FunctionNode("log",[node.args[1]])]),constNodes)}else funcDerivative=arg0.clone(),div=!0;break;case"pow":return constNodes[arg1]=constNodes[node.args[1]],_derivative(new OperatorNode("^","pow",[arg0,node.args[1]]),constNodes);case"exp":funcDerivative=new FunctionNode("exp",[arg0.clone()]);break;case"sin":funcDerivative=new FunctionNode("cos",[arg0.clone()]);break;case"cos":funcDerivative=new OperatorNode("-","unaryMinus",[new FunctionNode("sin",[arg0.clone()])]);break;case"tan":funcDerivative=new OperatorNode("^","pow",[new FunctionNode("sec",[arg0.clone()]),createConstantNode(2)]);break;case"sec":funcDerivative=new OperatorNode("*","multiply",[node,new FunctionNode("tan",[arg0.clone()])]);break;case"csc":negative=!0,funcDerivative=new OperatorNode("*","multiply",[node,new FunctionNode("cot",[arg0.clone()])]);break;case"cot":negative=!0,funcDerivative=new OperatorNode("^","pow",[new FunctionNode("csc",[arg0.clone()]),createConstantNode(2)]);break;case"asin":div=!0,funcDerivative=new FunctionNode("sqrt",[new OperatorNode("-","subtract",[createConstantNode(1),new OperatorNode("^","pow",[arg0.clone(),createConstantNode(2)])])]);break;case"acos":negative=div=!0,funcDerivative=new FunctionNode("sqrt",[new OperatorNode("-","subtract",[createConstantNode(1),new OperatorNode("^","pow",[arg0.clone(),createConstantNode(2)])])]);break;case"atan":div=!0,funcDerivative=new OperatorNode("+","add",[new OperatorNode("^","pow",[arg0.clone(),createConstantNode(2)]),createConstantNode(1)]);break;case"asec":div=!0,funcDerivative=new OperatorNode("*","multiply",[new FunctionNode("abs",[arg0.clone()]),new FunctionNode("sqrt",[new OperatorNode("-","subtract",[new OperatorNode("^","pow",[arg0.clone(),createConstantNode(2)]),createConstantNode(1)])])]);break;case"acsc":negative=div=!0,funcDerivative=new OperatorNode("*","multiply",[new FunctionNode("abs",[arg0.clone()]),new FunctionNode("sqrt",[new OperatorNode("-","subtract",[new OperatorNode("^","pow",[arg0.clone(),createConstantNode(2)]),createConstantNode(1)])])]);break;case"acot":negative=div=!0,funcDerivative=new OperatorNode("+","add",[new OperatorNode("^","pow",[arg0.clone(),createConstantNode(2)]),createConstantNode(1)]);break;case"sinh":funcDerivative=new FunctionNode("cosh",[arg0.clone()]);break;case"cosh":funcDerivative=new FunctionNode("sinh",[arg0.clone()]);break;case"tanh":funcDerivative=new OperatorNode("^","pow",[new FunctionNode("sech",[arg0.clone()]),createConstantNode(2)]);break;case"sech":negative=!0,funcDerivative=new OperatorNode("*","multiply",[node,new FunctionNode("tanh",[arg0.clone()])]);break;case"csch":negative=!0,funcDerivative=new OperatorNode("*","multiply",[node,new FunctionNode("coth",[arg0.clone()])]);break;case"coth":negative=!0,funcDerivative=new OperatorNode("^","pow",[new FunctionNode("csch",[arg0.clone()]),createConstantNode(2)]);break;case"asinh":div=!0,funcDerivative=new FunctionNode("sqrt",[new OperatorNode("+","add",[new OperatorNode("^","pow",[arg0.clone(),createConstantNode(2)]),createConstantNode(1)])]);break;case"acosh":div=!0,funcDerivative=new FunctionNode("sqrt",[new OperatorNode("-","subtract",[new OperatorNode("^","pow",[arg0.clone(),createConstantNode(2)]),createConstantNode(1)])]);break;case"atanh":div=!0,funcDerivative=new OperatorNode("-","subtract",[createConstantNode(1),new OperatorNode("^","pow",[arg0.clone(),createConstantNode(2)])]);break;case"asech":negative=div=!0,funcDerivative=new OperatorNode("*","multiply",[arg0.clone(),new FunctionNode("sqrt",[new OperatorNode("-","subtract",[createConstantNode(1),new OperatorNode("^","pow",[arg0.clone(),createConstantNode(2)])])])]);break;case"acsch":negative=div=!0,funcDerivative=new OperatorNode("*","multiply",[new FunctionNode("abs",[arg0.clone()]),new FunctionNode("sqrt",[new OperatorNode("+","add",[new OperatorNode("^","pow",[arg0.clone(),createConstantNode(2)]),createConstantNode(1)])])]);break;case"acoth":negative=div=!0,funcDerivative=new OperatorNode("-","subtract",[createConstantNode(1),new OperatorNode("^","pow",[arg0.clone(),createConstantNode(2)])]);break;case"abs":funcDerivative=new OperatorNode("/","divide",[new FunctionNode(new SymbolNode("abs"),[arg0.clone()]),arg0.clone()]);break;case"gamma":default:throw new Error('Function "'+node.name+'" is not supported by derivative, or a wrong number of arguments is passed')}func=div?(op="/","divide"):(op="*","multiply");var chainDerivative=_derivative(arg0,constNodes);return negative&&(chainDerivative=new OperatorNode("-","unaryMinus",[chainDerivative])),new OperatorNode(op,func,[chainDerivative,funcDerivative])},"OperatorNode, Object":function(node,constNodes){if(void 0!==constNodes[node])return createConstantNode(0);if("+"===node.op)return new OperatorNode(node.op,node.fn,node.args.map(function(arg){return _derivative(arg,constNodes)}));if("-"===node.op){if(node.isUnary())return new OperatorNode(node.op,node.fn,[_derivative(node.args[0],constNodes)]);if(node.isBinary())return new OperatorNode(node.op,node.fn,[_derivative(node.args[0],constNodes),_derivative(node.args[1],constNodes)])}if("*"===node.op){var constantTerms=node.args.filter(function(arg){return void 0!==constNodes[arg]});if(0<constantTerms.length){var nonConstantTerms=node.args.filter(function(arg){return void 0===constNodes[arg]}),nonConstantNode=1===nonConstantTerms.length?nonConstantTerms[0]:new OperatorNode("*","multiply",nonConstantTerms),newArgs=constantTerms.concat(_derivative(nonConstantNode,constNodes));return new OperatorNode("*","multiply",newArgs)}return new OperatorNode("+","add",node.args.map(function(argOuter){return new OperatorNode("*","multiply",node.args.map(function(argInner){return argInner===argOuter?_derivative(argInner,constNodes):argInner.clone()}))}))}if("/"===node.op&&node.isBinary()){var arg0=node.args[0],arg1=node.args[1];return void 0!==constNodes[arg1]?new OperatorNode("/","divide",[_derivative(arg0,constNodes),arg1]):void 0!==constNodes[arg0]?new OperatorNode("*","multiply",[new OperatorNode("-","unaryMinus",[arg0]),new OperatorNode("/","divide",[_derivative(arg1,constNodes),new OperatorNode("^","pow",[arg1.clone(),createConstantNode(2)])])]):new OperatorNode("/","divide",[new OperatorNode("-","subtract",[new OperatorNode("*","multiply",[_derivative(arg0,constNodes),arg1.clone()]),new OperatorNode("*","multiply",[arg0.clone(),_derivative(arg1,constNodes)])]),new OperatorNode("^","pow",[arg1.clone(),createConstantNode(2)])])}if("^"===node.op&&node.isBinary()){var _arg=node.args[0],_arg2=node.args[1];if(void 0!==constNodes[_arg])return(0,_is.isConstantNode)(_arg)&&(isZero(_arg.value)||equal(_arg.value,1))?createConstantNode(0):new OperatorNode("*","multiply",[node,new OperatorNode("*","multiply",[new FunctionNode("log",[_arg.clone()]),_derivative(_arg2.clone(),constNodes)])]);if(void 0===constNodes[_arg2])return new OperatorNode("*","multiply",[new OperatorNode("^","pow",[_arg.clone(),_arg2.clone()]),new OperatorNode("+","add",[new OperatorNode("*","multiply",[_derivative(_arg,constNodes),new OperatorNode("/","divide",[_arg2.clone(),_arg.clone()])]),new OperatorNode("*","multiply",[_derivative(_arg2,constNodes),new FunctionNode("log",[_arg.clone()])])])]);if((0,_is.isConstantNode)(_arg2)){if(isZero(_arg2.value))return createConstantNode(0);if(equal(_arg2.value,1))return _derivative(_arg,constNodes)}var powMinusOne=new OperatorNode("^","pow",[_arg.clone(),new OperatorNode("-","subtract",[_arg2,createConstantNode(1)])]);return new OperatorNode("*","multiply",[_arg2.clone(),new OperatorNode("*","multiply",[_derivative(_arg,constNodes),powMinusOne])])}throw new Error('Operator "'+node.op+'" is not supported by derivative, or a wrong number of arguments is passed')}});function createConstantNode(value,valueType){return new ConstantNode(numeric(value,valueType||config.number))}return derivative});exports.createDerivative=createDerivative},{"../../utils/factory":931,"../../utils/is":933}],663:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRationalize=void 0;var _number=require("../../utils/number"),_factory=require("../../utils/factory"),_simplifyConstant=require("./simplify/simplifyConstant"),_simplifyCore=require("./simplify/simplifyCore"),dependencies=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplify","?bignumber","?fraction","mathWithTransform","ConstantNode","OperatorNode","FunctionNode","SymbolNode","ParenthesisNode"],createRationalize=(0,_factory.factory)("rationalize",dependencies,function(_ref){var config=_ref.config,typed=_ref.typed,equal=_ref.equal,isZero=_ref.isZero,add=_ref.add,subtract=_ref.subtract,multiply=_ref.multiply,divide=_ref.divide,pow=_ref.pow,parse=_ref.parse,simplify=_ref.simplify,fraction=_ref.fraction,bignumber=_ref.bignumber,mathWithTransform=_ref.mathWithTransform,ConstantNode=_ref.ConstantNode,OperatorNode=_ref.OperatorNode,FunctionNode=_ref.FunctionNode,SymbolNode=_ref.SymbolNode,ParenthesisNode=_ref.ParenthesisNode,simplifyConstant=(0,_simplifyConstant.createSimplifyConstant)({typed:typed,config:config,mathWithTransform:mathWithTransform,fraction:fraction,bignumber:bignumber,ConstantNode:ConstantNode,OperatorNode:OperatorNode,FunctionNode:FunctionNode,SymbolNode:SymbolNode}),simplifyCore=(0,_simplifyCore.createSimplifyCore)({equal:equal,isZero:isZero,add:add,subtract:subtract,multiply:multiply,divide:divide,pow:pow,ConstantNode:ConstantNode,OperatorNode:OperatorNode,FunctionNode:FunctionNode,ParenthesisNode:ParenthesisNode}),rationalize=typed("rationalize",{string:function(expr){return rationalize(parse(expr),{},!1)},"string, boolean":function(expr,detailed){return rationalize(parse(expr),{},detailed)},"string, Object":function(expr,scope){return rationalize(parse(expr),scope,!1)},"string, Object, boolean":function(expr,scope,detailed){return rationalize(parse(expr),scope,detailed)},Node:function(expr){return rationalize(expr,{},!1)},"Node, boolean":function(expr,detailed){return rationalize(expr,{},detailed)},"Node, Object":function(expr,scope){return rationalize(expr,scope,!1)},"Node, Object, boolean":function(expr,scope,detailed){var sBefore,rules,setRules=function(){var oldRules=[simplifyCore,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},simplifyConstant,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],rulesFirst=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],rulesSucDiv=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],setRules={};return setRules.firstRules=oldRules.concat(rulesFirst,rulesSucDiv),setRules.distrDivRules=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],setRules.sucDivRules=rulesSucDiv,setRules.firstRulesAgain=oldRules.concat(rulesFirst),setRules.finalRules=[simplifyCore,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},simplifyConstant,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],setRules}(),polyRet=function(expr,scope,extended,rules){var variables=[],node=simplify(expr,rules,scope,{exactFractions:!1}),oper="+-*"+((extended=!!extended)?"/":"");!function recPoly(node){var tp=node.type;{if("FunctionNode"===tp)throw new Error("There is an unsolved function call");if("OperatorNode"===tp)if("^"===node.op){if("ConstantNode"!==node.args[1].type||!(0,_number.isInteger)(parseFloat(node.args[1].value)))throw new Error("There is a non-integer exponent");recPoly(node.args[0])}else{if(-1===oper.indexOf(node.op))throw new Error("Operator "+node.op+" invalid in polynomial expression");for(var i=0;i<node.args.length;i++)recPoly(node.args[i])}else if("SymbolNode"===tp){var _name=node.name,pos=variables.indexOf(_name);-1===pos&&variables.push(_name)}else if("ParenthesisNode"===tp)recPoly(node.content);else if("ConstantNode"!==tp)throw new Error("type "+tp+" is not allowed in polynomial expression")}}(node);var retFunc={};return retFunc.expression=node,retFunc.variables=variables,retFunc}(expr,scope,!0,setRules.firstRules),nVars=polyRet.variables.length;if(expr=polyRet.expression,1<=nVars){expr=function expandPower(node,parent,indParent){var tp=node.type;var internal=1<arguments.length;{var does,val,nEsqTopo,nDirTopo;"OperatorNode"===tp&&node.isBinary()&&(does=!1,"^"===node.op&&("ParenthesisNode"!==node.args[0].type&&"OperatorNode"!==node.args[0].type||"ConstantNode"!==node.args[1].type||(val=parseFloat(node.args[1].value),does=2<=val&&(0,_number.isInteger)(val))),does&&(node=2<val?(nEsqTopo=node.args[0],nDirTopo=new OperatorNode("^","pow",[node.args[0].cloneDeep(),new ConstantNode(val-1)]),new OperatorNode("*","multiply",[nEsqTopo,nDirTopo])):new OperatorNode("*","multiply",[node.args[0],node.args[0].cloneDeep()]),internal&&("content"===indParent?parent.content=node:parent.args[indParent]=node)))}if("ParenthesisNode"===tp)expandPower(node.content,node,"content");else if("ConstantNode"!==tp&&"SymbolNode"!==tp)for(var i=0;i<node.args.length;i++)expandPower(node.args[i],node,i);if(!internal)return node}(expr);var s,eDistrDiv=!0,redoInic=!1;for(expr=simplify(expr,setRules.firstRules,{},{exactFractions:!1});rules=eDistrDiv?setRules.distrDivRules:setRules.sucDivRules,eDistrDiv=!eDistrDiv,(s=(expr=simplify(expr,rules)).toString())!==sBefore;)redoInic=!0,sBefore=s;redoInic&&(expr=simplify(expr,setRules.firstRulesAgain,{},{exactFractions:!1})),expr=simplify(expr,setRules.finalRules,{},{exactFractions:!1})}var coefficients=[],retRationalize={};return"OperatorNode"===expr.type&&expr.isBinary()&&"/"===expr.op?(1===nVars&&(expr.args[0]=polyToCanonical(expr.args[0],coefficients),expr.args[1]=polyToCanonical(expr.args[1])),detailed&&(retRationalize.numerator=expr.args[0],retRationalize.denominator=expr.args[1])):(1===nVars&&(expr=polyToCanonical(expr,coefficients)),detailed&&(retRationalize.numerator=expr,retRationalize.denominator=null)),detailed?(retRationalize.coefficients=coefficients,retRationalize.variables=polyRet.variables,retRationalize.expression=expr,retRationalize):expr}});function polyToCanonical(node,coefficients){void 0===coefficients&&(coefficients=[]);var o={cte:1,oper:"+",fire:""},maxExpo=coefficients[0]=0,varname="";!function recurPol(node,noPai,o){var tp=node.type;{if("FunctionNode"===tp)throw new Error("There is an unsolved function call");if("OperatorNode"===tp){if(-1==="+-*^".indexOf(node.op))throw new Error("Operator "+node.op+" invalid");if(null!==noPai){if(("unaryMinus"===node.fn||"pow"===node.fn)&&"add"!==noPai.fn&&"subtract"!==noPai.fn&&"multiply"!==noPai.fn)throw new Error("Invalid "+node.op+" placing");if(("subtract"===node.fn||"add"===node.fn||"multiply"===node.fn)&&"add"!==noPai.fn&&"subtract"!==noPai.fn)throw new Error("Invalid "+node.op+" placing");if(("subtract"===node.fn||"add"===node.fn||"unaryMinus"===node.fn)&&0!==o.noFil)throw new Error("Invalid "+node.op+" placing")}"^"!==node.op&&"*"!==node.op||(o.fire=node.op);for(var _i=0;_i<node.args.length;_i++)"unaryMinus"===node.fn&&(o.oper="-"),"+"!==node.op&&"subtract"!==node.fn||(o.fire="",o.cte=1,o.oper=0===_i?"+":node.op),o.noFil=_i,recurPol(node.args[_i],node,o)}else if("SymbolNode"===tp){if(node.name!==varname&&""!==varname)throw new Error("There is more than one variable");if(varname=node.name,null===noPai)return void(coefficients[1]=1);if("^"===noPai.op&&0!==o.noFil)throw new Error("In power the variable should be the first parameter");if("*"===noPai.op&&1!==o.noFil)throw new Error("In multiply the variable should be the second parameter");""!==o.fire&&"*"!==o.fire||(maxExpo<1&&(coefficients[1]=0),coefficients[1]+=o.cte*("+"===o.oper?1:-1),maxExpo=Math.max(1,maxExpo))}else{if("ConstantNode"!==tp)throw new Error("Type "+tp+" is not allowed");var valor=parseFloat(node.value);if(null===noPai)return void(coefficients[0]=valor);if("^"===noPai.op){if(1!==o.noFil)throw new Error("Constant cannot be powered");if(!(0,_number.isInteger)(valor)||valor<=0)throw new Error("Non-integer exponent is not allowed");for(var _i2=maxExpo+1;_i2<valor;_i2++)coefficients[_i2]=0;return maxExpo<valor&&(coefficients[valor]=0),coefficients[valor]+=o.cte*("+"===o.oper?1:-1),void(maxExpo=Math.max(valor,maxExpo))}o.cte=valor,""===o.fire&&(coefficients[0]+=o.cte*("+"===o.oper?1:-1))}}}(node,null,o);for(var no,n1,op,n3,n2,first=!0,i=maxExpo=coefficients.length-1;0<=i;i--){0!==coefficients[i]&&(n1=new ConstantNode(first?coefficients[i]:Math.abs(coefficients[i])),op=coefficients[i]<0?"-":"+",0<i&&(n2=new SymbolNode(varname),1<i&&(n3=new ConstantNode(i),n2=new OperatorNode("^","pow",[n2,n3])),n1=-1===coefficients[i]&&first?new OperatorNode("-","unaryMinus",[n2]):1===Math.abs(coefficients[i])?n2:new OperatorNode("*","multiply",[n1,n2])),no=first?n1:"+"==op?new OperatorNode("+","add",[no,n1]):new OperatorNode("-","subtract",[no,n1]),first=!1)}return first?new ConstantNode(0):no}return rationalize});exports.createRationalize=createRationalize},{"../../utils/factory":931,"../../utils/number":937,"./simplify/simplifyConstant":666,"./simplify/simplifyCore":667}],664:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSimplify=void 0;var _is=require("../../utils/is"),_factory=require("../../utils/factory"),_util=require("./simplify/util"),_simplifyCore=require("./simplify/simplifyCore"),_simplifyConstant=require("./simplify/simplifyConstant"),_resolve=require("./simplify/resolve"),_object=require("../../utils/object");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var dependencies=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","?fraction","?bignumber","mathWithTransform","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],createSimplify=(0,_factory.factory)("simplify",dependencies,function(_ref){var config=_ref.config,typed=_ref.typed,parse=_ref.parse,add=_ref.add,subtract=_ref.subtract,multiply=_ref.multiply,divide=_ref.divide,pow=_ref.pow,isZero=_ref.isZero,equal=_ref.equal,fraction=_ref.fraction,bignumber=_ref.bignumber,mathWithTransform=_ref.mathWithTransform,ConstantNode=_ref.ConstantNode,FunctionNode=_ref.FunctionNode,OperatorNode=_ref.OperatorNode,ParenthesisNode=_ref.ParenthesisNode,SymbolNode=_ref.SymbolNode,simplifyConstant=(0,_simplifyConstant.createSimplifyConstant)({typed:typed,config:config,mathWithTransform:mathWithTransform,fraction:fraction,bignumber:bignumber,ConstantNode:ConstantNode,OperatorNode:OperatorNode,FunctionNode:FunctionNode,SymbolNode:SymbolNode}),simplifyCore=(0,_simplifyCore.createSimplifyCore)({equal:equal,isZero:isZero,add:add,subtract:subtract,multiply:multiply,divide:divide,pow:pow,ConstantNode:ConstantNode,OperatorNode:OperatorNode,FunctionNode:FunctionNode,ParenthesisNode:ParenthesisNode}),resolve=(0,_resolve.createResolve)({parse:parse,FunctionNode:FunctionNode,OperatorNode:OperatorNode,ParenthesisNode:ParenthesisNode}),_createUtil=(0,_util.createUtil)({FunctionNode:FunctionNode,OperatorNode:OperatorNode,SymbolNode:SymbolNode}),isCommutative=_createUtil.isCommutative,isAssociative=_createUtil.isAssociative,flatten=_createUtil.flatten,unflattenr=_createUtil.unflattenr,unflattenl=_createUtil.unflattenl,createMakeNodeFunction=_createUtil.createMakeNodeFunction,simplify=typed("simplify",{string:function(expr){return simplify(parse(expr),simplify.rules,{},{})},"string, Object":function(expr,scope){return simplify(parse(expr),simplify.rules,scope,{})},"string, Object, Object":function(expr,scope,options){return simplify(parse(expr),simplify.rules,scope,options)},"string, Array":function(expr,rules){return simplify(parse(expr),rules,{},{})},"string, Array, Object":function(expr,rules,scope){return simplify(parse(expr),rules,scope,{})},"string, Array, Object, Object":function(expr,rules,scope,options){return simplify(parse(expr),rules,scope,options)},"Node, Object":function(expr,scope){return simplify(expr,simplify.rules,scope,{})},"Node, Object, Object":function(expr,scope,options){return simplify(expr,simplify.rules,scope,options)},Node:function(expr){return simplify(expr,simplify.rules,{},{})},"Node, Array":function(expr,rules){return simplify(expr,rules,{},{})},"Node, Array, Object":function(expr,rules,scope){return simplify(expr,rules,scope,{})},"Node, Array, Object, Object":function(expr,rules,scope,options){rules=function(rules){for(var ruleSet=[],i=0;i<rules.length;i++){var makeNode,expandsym,rule=rules[i],newRule=void 0,ruleType=_typeof(rule);switch(ruleType){case"string":var lr=rule.split("->");if(2!==lr.length)throw SyntaxError("Could not parse rule: "+rule);rule={l:lr[0],r:lr[1]};case"object":newRule={l:removeParens(parse(rule.l)),r:removeParens(parse(rule.r))},rule.context&&(newRule.evaluate=rule.context),rule.evaluate&&(newRule.evaluate=parse(rule.evaluate)),isAssociative(newRule.l)&&(makeNode=createMakeNodeFunction(newRule.l),expandsym=new SymbolNode("_p"+_lastsym++),newRule.expanded={},newRule.expanded.l=makeNode([newRule.l.clone(),expandsym]),flatten(newRule.expanded.l),unflattenr(newRule.expanded.l),newRule.expanded.r=makeNode([newRule.r,expandsym]));break;case"function":newRule=rule;break;default:throw TypeError("Unsupported type of rule: "+ruleType)}ruleSet.push(newRule)}return ruleSet}(rules);for(var res=resolve(expr,scope),visited={},str=(res=removeParens(res)).toString({parenthesis:"all"});!visited[str];){visited[str]=!0;for(var i=_lastsym=0;i<rules.length;i++)res="function"==typeof rules[i]?rules[i](res,options):(flatten(res),applyRule(res,rules[i])),unflattenl(res);str=res.toString({parenthesis:"all"})}return res}});function removeParens(node){return node.transform(function(node,path,parent){return(0,_is.isParenthesisNode)(node)?removeParens(node.content):node})}simplify.simplifyCore=simplifyCore,simplify.resolve=resolve;var SUPPORTED_CONSTANTS={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};simplify.rules=[simplifyCore,{l:"log(e)",r:"1"},{l:"n-n1",r:"n+-n1"},{l:"-(c*v)",r:"(-c) * v"},{l:"-v",r:"(-1) * v"},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{l:"(n ^ n1) ^ n2",r:"n ^ (n1 * n2)"},{l:"n*n",r:"n^2"},{l:"n * n^n1",r:"n^(n1+1)"},{l:"n^n1 * n^n2",r:"n^(n1+n2)"},{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},{l:"n1*n2 + n2",r:"(n1+1)*n2"},{l:"n1*n3 + n2*n3",r:"(n1+n2)*n3"},{l:"n1 + -1 * (n2 + n3)",r:"n1 + -1 * n2 + -1 * n3"},simplifyConstant,{l:"(-n)*n1",r:"-(n*n1)"},{l:"c+v",r:"v+c",context:{add:{commutative:!1}}},{l:"v*c",r:"c*v",context:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"n-(n1+n2)",r:"n-n1-n2"},{l:"1*n",r:"n"},{l:"n1/(n2/n3)",r:"(n1*n3)/n2"}];var _lastsym=0;var applyRule=typed("applyRule",{"Node, Object":function(node,rule){var res=node;if(res instanceof OperatorNode||res instanceof FunctionNode){if(res.args)for(var i=0;i<res.args.length;i++)res.args[i]=applyRule(res.args[i],rule)}else res instanceof ParenthesisNode&&res.content&&(res.content=applyRule(res.content,rule));var implicit,repl=rule.r,matches=_ruleMatch(rule.l,res)[0];return!matches&&rule.expanded&&(repl=rule.expanded.r,matches=_ruleMatch(rule.expanded.l,res)[0]),matches&&(implicit=res.implicit,res=repl.clone(),implicit&&"implicit"in repl&&(res.implicit=!0),res=res.transform(function(node){return node.isSymbolNode&&(0,_object.hasOwnProperty)(matches.placeholders,node.name)?matches.placeholders[node.name].clone():node})),res}});function mergeMatch(match1,match2){var res={placeholders:{}};if(!match1.placeholders&&!match2.placeholders)return res;if(!match1.placeholders)return match2;if(!match2.placeholders)return match1;for(var key in match1.placeholders)if(res.placeholders[key]=match1.placeholders[key],(0,_object.hasOwnProperty)(match2.placeholders,key)&&!function _exactMatch(p,q){if(p instanceof ConstantNode&&q instanceof ConstantNode){if(!equal(p.value,q.value))return!1}else if(p instanceof SymbolNode&&q instanceof SymbolNode){if(p.name!==q.name)return!1}else{if(!(p instanceof OperatorNode&&q instanceof OperatorNode||p instanceof FunctionNode&&q instanceof FunctionNode))return!1;if(p instanceof OperatorNode){if(p.op!==q.op||p.fn!==q.fn)return!1}else if(p instanceof FunctionNode&&p.name!==q.name)return!1;if(p.args.length!==q.args.length)return!1;for(var i=0;i<p.args.length;i++)if(!_exactMatch(p.args[i],q.args[i]))return!1}return!0}(match1.placeholders[key],match2.placeholders[key]))return null;for(var _key in match2.placeholders)res.placeholders[_key]=match2.placeholders[_key];return res}function combineChildMatches(list1,list2){var merged,res=[];if(0===list1.length||0===list2.length)return res;for(var i1=0;i1<list1.length;i1++)for(var i2=0;i2<list2.length;i2++)(merged=mergeMatch(list1[i1],list2[i2]))&&res.push(merged);return res}function _ruleMatch(rule,node,isSplit){var res=[{placeholders:{}}];if(rule instanceof OperatorNode&&node instanceof OperatorNode||rule instanceof FunctionNode&&node instanceof FunctionNode){if(rule instanceof OperatorNode){if(rule.op!==node.op||rule.fn!==node.fn)return[]}else if(rule instanceof FunctionNode&&rule.name!==node.name)return[];if((1!==node.args.length||1!==rule.args.length)&&isAssociative(node)&&!isSplit){if(2<=node.args.length&&2===rule.args.length){for(var splits=function(node,context){var right,rightArgs,res=[],makeNode=createMakeNodeFunction(node);if(isCommutative(node,context))for(var i=0;i<node.args.length;i++)(rightArgs=node.args.slice(0)).splice(i,1),right=1===rightArgs.length?rightArgs[0]:makeNode(rightArgs),res.push(makeNode([node.args[i],right]));else right=1===(rightArgs=node.args.slice(1)).length?rightArgs[0]:makeNode(rightArgs),res.push(makeNode([node.args[0],right]));return res}(node,rule.context),splitMatches=[],_i=0;_i<splits.length;_i++)var matchSet=_ruleMatch(rule,splits[_i],!0),splitMatches=splitMatches.concat(matchSet);return splitMatches}if(2<rule.args.length)throw Error("Unexpected non-binary associative function: "+rule.toString());return[]}for(var childMatches=[],i=0;i<rule.args.length;i++){var childMatch=_ruleMatch(rule.args[i],node.args[i]);if(0===childMatch.length)return[];childMatches.push(childMatch)}res=function(childMatches){if(0===childMatches.length)return childMatches;for(var sets=childMatches.reduce(combineChildMatches),uniqueSets=[],unique={},i=0;i<sets.length;i++){var s=JSON.stringify(sets[i]);unique[s]||(unique[s]=!0,uniqueSets.push(sets[i]))}return uniqueSets}(childMatches)}else if(rule instanceof SymbolNode){if(0===rule.name.length)throw new Error("Symbol in rule has 0 length...!?");if(SUPPORTED_CONSTANTS[rule.name]){if(rule.name!==node.name)return[]}else if("n"===rule.name[0]||"_p"===rule.name.substring(0,2))res[0].placeholders[rule.name]=node;else if("v"===rule.name[0]){if((0,_is.isConstantNode)(node))return[];res[0].placeholders[rule.name]=node}else{if("c"!==rule.name[0])throw new Error("Invalid symbol in rule: "+rule.name);if(!(node instanceof ConstantNode))return[];res[0].placeholders[rule.name]=node}}else{if(!(rule instanceof ConstantNode))return[];if(!equal(rule.value,node.value))return[]}return res}return simplify});exports.createSimplify=createSimplify},{"../../utils/factory":931,"../../utils/is":933,"../../utils/object":938,"./simplify/resolve":665,"./simplify/simplifyConstant":666,"./simplify/simplifyCore":667,"./simplify/util":668}],665:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createResolve=void 0;var _is=require("../../../utils/is"),dependencies=["parse","FunctionNode","OperatorNode","ParenthesisNode"],createResolve=(0,require("../../../utils/factory").factory)("resolve",dependencies,function(_ref){var parse=_ref.parse,FunctionNode=_ref.FunctionNode,OperatorNode=_ref.OperatorNode,ParenthesisNode=_ref.ParenthesisNode;return function resolve(node,scope){if(!scope)return node;if((0,_is.isSymbolNode)(node)){var value=scope[node.name];if((0,_is.isNode)(value))return resolve(value,scope);if("number"==typeof value)return parse(String(value))}else{if((0,_is.isOperatorNode)(node)){var args=node.args.map(function(arg){return resolve(arg,scope)});return new OperatorNode(node.op,node.fn,args,node.implicit)}if((0,_is.isParenthesisNode)(node))return new ParenthesisNode(resolve(node.content,scope));if((0,_is.isFunctionNode)(node)){var _args=node.args.map(function(arg){return resolve(arg,scope)});return new FunctionNode(node.name,_args)}}return node}});exports.createResolve=createResolve},{"../../../utils/factory":931,"../../../utils/is":933}],666:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSimplifyConstant=void 0;var _is=require("../../../utils/is"),_factory=require("../../../utils/factory"),_util=require("./util"),_noop=require("../../../utils/noop"),dependencies=["typed","config","mathWithTransform","?fraction","?bignumber","ConstantNode","OperatorNode","FunctionNode","SymbolNode"],createSimplifyConstant=(0,_factory.factory)("simplifyConstant",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,mathWithTransform=_ref.mathWithTransform,fraction=_ref.fraction,bignumber=_ref.bignumber,ConstantNode=_ref.ConstantNode,OperatorNode=_ref.OperatorNode,FunctionNode=_ref.FunctionNode,SymbolNode=_ref.SymbolNode,_createUtil=(0,_util.createUtil)({FunctionNode:FunctionNode,OperatorNode:OperatorNode,SymbolNode:SymbolNode}),isCommutative=_createUtil.isCommutative,isAssociative=_createUtil.isAssociative,allChildren=_createUtil.allChildren,createMakeNodeFunction=_createUtil.createMakeNodeFunction;function _eval(fnname,args,options){try{return _toNumber(mathWithTransform[fnname].apply(null,args),options)}catch(ignore){return args=args.map(function(x){return(0,_is.isFraction)(x)?x.valueOf():x}),_toNumber(mathWithTransform[fnname].apply(null,args),options)}}var _toNode=typed({Fraction:function(f){var n,vn=f.s*f.n;n=vn<0?new OperatorNode("-","unaryMinus",[new ConstantNode(-vn)]):new ConstantNode(vn);return 1!==f.d?new OperatorNode("/","divide",[n,new ConstantNode(f.d)]):n},number:function(n){return n<0?unaryMinusNode(new ConstantNode(-n)):new ConstantNode(n)},BigNumber:function(n){return n<0?unaryMinusNode(new ConstantNode(-n)):new ConstantNode(n)},Complex:function(){throw new Error("Cannot convert Complex number to Node")}});function _exactFraction(n,options){if(options&&!1!==options.exactFractions&&isFinite(n)&&fraction){var f=fraction(n);if(f.valueOf()===n)return f}return n}var _toNumber=typed({"string, Object":function(s,options){return"BigNumber"===config.number?(void 0===bignumber&&(0,_noop.noBignumber)(),bignumber(s)):"Fraction"===config.number?(void 0===fraction&&(0,_noop.noFraction)(),fraction(s)):_exactFraction(parseFloat(s),options)},"Fraction, Object":function(s){return s},"BigNumber, Object":function(s){return s},"number, Object":_exactFraction,"Complex, Object":function(s,options){return 0!==s.im?s:_exactFraction(s.re,options)}});function unaryMinusNode(n){return new OperatorNode("-","unaryMinus",[n])}function foldOp(fn,args,makeNode,options){return args.reduce(function(a,b){if((0,_is.isNode)(a)||(0,_is.isNode)(b))(0,_is.isNode)(a)?(0,_is.isNode)(b)||(b=_toNode(b)):a=_toNode(a);else{try{return _eval(fn,[a,b],options)}catch(ignoreandcontinue){}a=_toNode(a),b=_toNode(b)}return makeNode([a,b])})}return function(expr,options){var res=function foldFraction(node,options){switch(node.type){case"SymbolNode":return node;case"ConstantNode":return"number"!=typeof node.value&&isNaN(node.value)?node:_toNumber(node.value,options);case"FunctionNode":if(mathWithTransform[node.name]&&mathWithTransform[node.name].rawArgs)return node;var operatorFunctions=["add","multiply"];if(-1===operatorFunctions.indexOf(node.name)){var args=node.args.map(function(arg){return foldFraction(arg,options)});if(!args.some(_is.isNode))try{return _eval(node.name,args,options)}catch(ignoreandcontine){}return args=args.map(function(arg){return(0,_is.isNode)(arg)?arg:_toNode(arg)}),new FunctionNode(node.name,args)}case"OperatorNode":var _args,res,fn=node.fn.toString(),makeNode=createMakeNodeFunction(node);if((0,_is.isOperatorNode)(node)&&node.isUnary())_args=[foldFraction(node.args[0],options)],res=(0,_is.isNode)(_args[0])?makeNode(_args):_eval(fn,_args,options);else if(isAssociative(node))if(_args=(_args=allChildren(node)).map(function(arg){return foldFraction(arg,options)}),isCommutative(fn)){for(var consts=[],vars=[],i=0;i<_args.length;i++)(0,_is.isNode)(_args[i])?vars.push(_args[i]):consts.push(_args[i]);res=1<consts.length?(res=foldOp(fn,consts,makeNode,options),vars.unshift(res),foldOp(fn,vars,makeNode,options)):foldOp(fn,_args,makeNode,options)}else res=foldOp(fn,_args,makeNode,options);else _args=node.args.map(function(arg){return foldFraction(arg,options)}),res=foldOp(fn,_args,makeNode,options);return res;case"ParenthesisNode":return foldFraction(node.content,options);case"AccessorNode":case"ArrayNode":case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"IndexNode":case"ObjectNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(node.type))}}(expr,options);return(0,_is.isNode)(res)?res:_toNode(res)}});exports.createSimplifyConstant=createSimplifyConstant},{"../../../utils/factory":931,"../../../utils/is":933,"../../../utils/noop":936,"./util":668}],667:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSimplifyCore=void 0;var _is=require("../../../utils/is"),dependencies=["equal","isZero","add","subtract","multiply","divide","pow","ConstantNode","OperatorNode","FunctionNode","ParenthesisNode"],createSimplifyCore=(0,require("../../../utils/factory").factory)("simplifyCore",dependencies,function(_ref){var equal=_ref.equal,isZero=_ref.isZero,add=_ref.add,subtract=_ref.subtract,multiply=_ref.multiply,divide=_ref.divide,pow=_ref.pow,ConstantNode=_ref.ConstantNode,OperatorNode=_ref.OperatorNode,FunctionNode=_ref.FunctionNode,ParenthesisNode=_ref.ParenthesisNode,node0=new ConstantNode(0),node1=new ConstantNode(1);return function simplifyCore(node){if((0,_is.isOperatorNode)(node)&&node.isUnary()){var a0=simplifyCore(node.args[0]);if("+"===node.op)return a0;if("-"===node.op){if((0,_is.isOperatorNode)(a0)){if(a0.isUnary()&&"-"===a0.op)return a0.args[0];if(a0.isBinary()&&"subtract"===a0.fn)return new OperatorNode("-","subtract",[a0.args[1],a0.args[0]])}return new OperatorNode(node.op,node.fn,[a0])}}else if((0,_is.isOperatorNode)(node)&&node.isBinary()){var _a=simplifyCore(node.args[0]),a1=simplifyCore(node.args[1]);if("+"===node.op){if((0,_is.isConstantNode)(_a)){if(isZero(_a.value))return a1;if((0,_is.isConstantNode)(a1))return new ConstantNode(add(_a.value,a1.value))}return(0,_is.isConstantNode)(a1)&&isZero(a1.value)?_a:(0,_is.isOperatorNode)(a1)&&a1.isUnary()&&"-"===a1.op?new OperatorNode("-","subtract",[_a,a1.args[0]]):new OperatorNode(node.op,node.fn,a1?[_a,a1]:[_a])}if("-"===node.op){if((0,_is.isConstantNode)(_a)&&a1){if((0,_is.isConstantNode)(a1))return new ConstantNode(subtract(_a.value,a1.value));if(isZero(_a.value))return new OperatorNode("-","unaryMinus",[a1])}if("subtract"===node.fn)return(0,_is.isConstantNode)(a1)&&isZero(a1.value)?_a:(0,_is.isOperatorNode)(a1)&&a1.isUnary()&&"-"===a1.op?simplifyCore(new OperatorNode("+","add",[_a,a1.args[0]])):new OperatorNode(node.op,node.fn,[_a,a1])}else{if("*"===node.op){if((0,_is.isConstantNode)(_a)){if(isZero(_a.value))return node0;if(equal(_a.value,1))return a1;if((0,_is.isConstantNode)(a1))return new ConstantNode(multiply(_a.value,a1.value))}if((0,_is.isConstantNode)(a1)){if(isZero(a1.value))return node0;if(equal(a1.value,1))return _a;if((0,_is.isOperatorNode)(_a)&&_a.isBinary()&&_a.op===node.op){var a00=_a.args[0];if((0,_is.isConstantNode)(a00)){var a00a1=new ConstantNode(multiply(a00.value,a1.value));return new OperatorNode(node.op,node.fn,[a00a1,_a.args[1]],node.implicit)}}return new OperatorNode(node.op,node.fn,[a1,_a],node.implicit)}return new OperatorNode(node.op,node.fn,[_a,a1],node.implicit)}if("/"===node.op){if((0,_is.isConstantNode)(_a)){if(isZero(_a.value))return node0;if((0,_is.isConstantNode)(a1)&&(equal(a1.value,1)||equal(a1.value,2)||equal(a1.value,4)))return new ConstantNode(divide(_a.value,a1.value))}return new OperatorNode(node.op,node.fn,[_a,a1])}if("^"===node.op){if((0,_is.isConstantNode)(a1)){if(isZero(a1.value))return node1;if(equal(a1.value,1))return _a;if((0,_is.isConstantNode)(_a))return new ConstantNode(pow(_a.value,a1.value));if((0,_is.isOperatorNode)(_a)&&_a.isBinary()&&"^"===_a.op){var a01=_a.args[1];if((0,_is.isConstantNode)(a01))return new OperatorNode(node.op,node.fn,[_a.args[0],new ConstantNode(multiply(a01.value,a1.value))])}}return new OperatorNode(node.op,node.fn,[_a,a1])}}}else{if((0,_is.isParenthesisNode)(node)){var c=simplifyCore(node.content);return(0,_is.isParenthesisNode)(c)||(0,_is.isSymbolNode)(c)||(0,_is.isConstantNode)(c)?c:new ParenthesisNode(c)}if((0,_is.isFunctionNode)(node)){var args=node.args.map(simplifyCore).map(function(arg){return(0,_is.isParenthesisNode)(arg)?arg.content:arg});return new FunctionNode(simplifyCore(node.fn),args)}}return node}});exports.createSimplifyCore=createSimplifyCore},{"../../../utils/factory":931,"../../../utils/is":933}],668:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUtil=void 0;var _is=require("../../../utils/is"),_factory=require("../../../utils/factory"),_object=require("../../../utils/object"),dependencies=["FunctionNode","OperatorNode","SymbolNode"],createUtil=(0,_factory.factory)("simplifyUtil",dependencies,function(_ref){var FunctionNode=_ref.FunctionNode,OperatorNode=_ref.OperatorNode,SymbolNode=_ref.SymbolNode,commutative={add:!0,multiply:!0},associative={add:!0,multiply:!0};function isAssociative(node,context){if(!(0,_is.isOperatorNode)(node))return!1;var name=node.fn.toString();return context&&(0,_object.hasOwnProperty)(context,name)&&(0,_object.hasOwnProperty)(context[name],"associative")?context[name].associative:associative[name]||!1}function allChildren(node){var op,children=[];return isAssociative(node)?(op=node.op,function findChildren(node){for(var i=0;i<node.args.length;i++){var child=node.args[i];(0,_is.isOperatorNode)(child)&&op===child.op?findChildren(child):children.push(child)}}(node),children):node.args}function createMakeNodeFunction(node){return(0,_is.isOperatorNode)(node)?function(args){try{return new OperatorNode(node.op,node.fn,args,node.implicit)}catch(err){return console.error(err),[]}}:function(args){return new FunctionNode(new SymbolNode(node.name),args)}}return{createMakeNodeFunction:createMakeNodeFunction,isCommutative:function(node,context){if(!(0,_is.isOperatorNode)(node))return!0;var name=node.fn.toString();return context&&(0,_object.hasOwnProperty)(context,name)&&(0,_object.hasOwnProperty)(context[name],"commutative")?context[name].commutative:commutative[name]||!1},isAssociative:isAssociative,flatten:function flatten(node){if(!node.args||0===node.args.length)return node;node.args=allChildren(node);for(var i=0;i<node.args.length;i++)flatten(node.args[i])},allChildren:allChildren,unflattenr:function unflattenr(node){if(node.args&&0!==node.args.length){for(var makeNode=createMakeNodeFunction(node),l=node.args.length,i=0;i<l;i++)unflattenr(node.args[i]);if(2<l&&isAssociative(node)){for(var curnode=node.args.pop();0<node.args.length;)curnode=makeNode([node.args.pop(),curnode]);node.args=curnode.args}}},unflattenl:function unflattenl(node){if(node.args&&0!==node.args.length){for(var makeNode=createMakeNodeFunction(node),l=node.args.length,i=0;i<l;i++)unflattenl(node.args[i]);if(2<l&&isAssociative(node)){for(var curnode=node.args.shift();0<node.args.length;)curnode=makeNode([curnode,node.args.shift()]);node.args=curnode.args}}}}});exports.createUtil=createUtil},{"../../../utils/factory":931,"../../../utils/is":933,"../../../utils/object":938}],669:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLsolve=void 0;var _factory=require("../../../utils/factory"),_solveValidation=require("./utils/solveValidation"),dependencies=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],createLsolve=(0,_factory.factory)("lsolve",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,divideScalar=_ref.divideScalar,multiplyScalar=_ref.multiplyScalar,subtract=_ref.subtract,equalScalar=_ref.equalScalar,DenseMatrix=_ref.DenseMatrix,solveValidation=(0,_solveValidation.createSolveValidation)({DenseMatrix:DenseMatrix});return typed("lsolve",{"SparseMatrix, Array | Matrix":function(m,b){for(var i,k,bdata=(b=solveValidation(m,b,!0))._data,rows=m._size[0],columns=m._size[1],values=m._values,index=m._index,ptr=m._ptr,x=[],j=0;j<columns;j++){var bj=bdata[j][0]||0;if(equalScalar(bj,0))x[j]=[0];else{var vjj=0,jvalues=[],jindex=[],l=ptr[j+1];for(k=ptr[j];k<l;k++)(i=index[k])===j?vjj=values[k]:j<i&&(jvalues.push(values[k]),jindex.push(i));if(equalScalar(vjj,0))throw new Error("Linear system cannot be solved since matrix is singular");var xj=divideScalar(bj,vjj);for(k=0,l=jindex.length;k<l;k++)i=jindex[k],bdata[i]=[subtract(bdata[i][0]||0,multiplyScalar(xj,jvalues[k]))];x[j]=[xj]}}return new DenseMatrix({data:x,size:[rows,1]})},"DenseMatrix, Array | Matrix":_denseForwardSubstitution,"Array, Array | Matrix":function(a,b){return _denseForwardSubstitution(matrix(a),b).valueOf()}});function _denseForwardSubstitution(m,b){for(var bdata=(b=solveValidation(m,b,!0))._data,rows=m._size[0],columns=m._size[1],x=[],data=m._data,j=0;j<columns;j++){var bj=bdata[j][0]||0,xj=void 0;if(equalScalar(bj,0))xj=0;else{var vjj=data[j][j];if(equalScalar(vjj,0))throw new Error("Linear system cannot be solved since matrix is singular");xj=divideScalar(bj,vjj);for(var i=j+1;i<rows;i++)bdata[i]=[subtract(bdata[i][0]||0,multiplyScalar(xj,data[i][j]))]}x[j]=[xj]}return new DenseMatrix({data:x,size:[rows,1]})}});exports.createLsolve=createLsolve},{"../../../utils/factory":931,"./utils/solveValidation":672}],670:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLusolve=void 0;var _is=require("../../../utils/is"),_factory=require("../../../utils/factory"),_solveValidation=require("./utils/solveValidation"),_csIpvec=require("../sparse/csIpvec"),dependencies=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],createLusolve=(0,_factory.factory)("lusolve",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,lup=_ref.lup,slu=_ref.slu,usolve=_ref.usolve,lsolve=_ref.lsolve,DenseMatrix=_ref.DenseMatrix,solveValidation=(0,_solveValidation.createSolveValidation)({DenseMatrix:DenseMatrix});return typed("lusolve",{"Array, Array | Matrix":function(a,b){a=matrix(a);var d=lup(a);return _lusolve(d.L,d.U,d.p,null,b).valueOf()},"DenseMatrix, Array | Matrix":function(a,b){var d=lup(a);return _lusolve(d.L,d.U,d.p,null,b)},"SparseMatrix, Array | Matrix":function(a,b){var d=lup(a);return _lusolve(d.L,d.U,d.p,null,b)},"SparseMatrix, Array | Matrix, number, number":function(a,b,order,threshold){var d=slu(a,order,threshold);return _lusolve(d.L,d.U,d.p,d.q,b)},"Object, Array | Matrix":function(d,b){return _lusolve(d.L,d.U,d.p,d.q,b)}});function _toMatrix(a){if((0,_is.isMatrix)(a))return a;if((0,_is.isArray)(a))return matrix(a);throw new TypeError("Invalid Matrix LU decomposition")}function _lusolve(l,u,p,q,b){l=_toMatrix(l),u=_toMatrix(u),b=solveValidation(l,b,!1),p&&(b._data=(0,_csIpvec.csIpvec)(p,b._data));var y=lsolve(l,b),x=usolve(u,y);return q&&(x._data=(0,_csIpvec.csIpvec)(q,x._data)),x}});exports.createLusolve=createLusolve},{"../../../utils/factory":931,"../../../utils/is":933,"../sparse/csIpvec":679,"./utils/solveValidation":672}],671:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUsolve=void 0;var _factory=require("../../../utils/factory"),_solveValidation=require("./utils/solveValidation"),dependencies=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],createUsolve=(0,_factory.factory)("usolve",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,divideScalar=_ref.divideScalar,multiplyScalar=_ref.multiplyScalar,subtract=_ref.subtract,equalScalar=_ref.equalScalar,DenseMatrix=_ref.DenseMatrix,solveValidation=(0,_solveValidation.createSolveValidation)({DenseMatrix:DenseMatrix});return typed("usolve",{"SparseMatrix, Array | Matrix":function(m,b){for(var i,k,bdata=(b=solveValidation(m,b,!0))._data,rows=m._size[0],columns=m._size[1],values=m._values,index=m._index,ptr=m._ptr,x=[],j=columns-1;0<=j;j--){var bj=bdata[j][0]||0;if(equalScalar(bj,0))x[j]=[0];else{var vjj=0,jvalues=[],jindex=[],f=ptr[j],l=ptr[j+1];for(k=l-1;f<=k;k--)(i=index[k])===j?vjj=values[k]:i<j&&(jvalues.push(values[k]),jindex.push(i));if(equalScalar(vjj,0))throw new Error("Linear system cannot be solved since matrix is singular");var xj=divideScalar(bj,vjj);for(k=0,l=jindex.length;k<l;k++)i=jindex[k],bdata[i]=[subtract(bdata[i][0],multiplyScalar(xj,jvalues[k]))];x[j]=[xj]}}return new DenseMatrix({data:x,size:[rows,1]})},"DenseMatrix, Array | Matrix":_denseBackwardSubstitution,"Array, Array | Matrix":function(a,b){return _denseBackwardSubstitution(matrix(a),b).valueOf()}});function _denseBackwardSubstitution(m,b){for(var bdata=(b=solveValidation(m,b,!0))._data,rows=m._size[0],columns=m._size[1],x=[],data=m._data,j=columns-1;0<=j;j--){var bj=bdata[j][0]||0,xj=void 0;if(equalScalar(bj,0))xj=0;else{var vjj=data[j][j];if(equalScalar(vjj,0))throw new Error("Linear system cannot be solved since matrix is singular");xj=divideScalar(bj,vjj);for(var i=j-1;0<=i;i--)bdata[i]=[subtract(bdata[i][0]||0,multiplyScalar(xj,data[i][j]))]}x[j]=[xj]}return new DenseMatrix({data:x,size:[rows,1]})}});exports.createUsolve=createUsolve},{"../../../utils/factory":931,"./utils/solveValidation":672}],672:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSolveValidation=function(_ref){var DenseMatrix=_ref.DenseMatrix;return function(m,b,copy){var size=m.size();if(2!==size.length)throw new RangeError("Matrix must be two dimensional (size: "+(0,_string.format)(size)+")");var data,i,bdata,rows=size[0];if(rows!==size[1])throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")");if((0,_is.isMatrix)(b)){var msize=b.size();if(1===msize.length){if(msize[0]!==rows)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(data=[],bdata=b._data,i=0;i<rows;i++)data[i]=[bdata[i]];return new DenseMatrix({data:data,size:[rows,1],datatype:b._datatype})}if(2!==msize.length)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(msize[0]!==rows||1!==msize[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if((0,_is.isDenseMatrix)(b)){if(copy){for(data=[],bdata=b._data,i=0;i<rows;i++)data[i]=[bdata[i][0]];return new DenseMatrix({data:data,size:[rows,1],datatype:b._datatype})}return b}for(data=[],i=0;i<rows;i++)data[i]=[0];for(var values=b._values,index=b._index,ptr=b._ptr,k1=ptr[1],k=ptr[0];k<k1;k++)data[i=index[k]][0]=values[k];return new DenseMatrix({data:data,size:[rows,1],datatype:b._datatype})}if((0,_is.isArray)(b)){var asize=(0,_array.arraySize)(b);if(1===asize.length){if(asize[0]!==rows)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(data=[],i=0;i<rows;i++)data[i]=[b[i]];return new DenseMatrix({data:data,size:[rows,1]})}if(2!==asize.length)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(asize[0]!==rows||1!==asize[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(data=[],i=0;i<rows;i++)data[i]=[b[i][0]];return new DenseMatrix({data:data,size:[rows,1]})}}};var _is=require("../../../../utils/is"),_array=require("../../../../utils/array"),_string=require("../../../../utils/string")},{"../../../../utils/array":922,"../../../../utils/is":933,"../../../../utils/string":941}],673:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCsAmd=void 0;var _factory=require("../../../utils/factory"),_csFkeep=require("./csFkeep"),_csFlip=require("./csFlip"),_csTdfs=require("./csTdfs"),dependencies=["add","multiply","transpose"],createCsAmd=(0,_factory.factory)("csAmd",dependencies,function(_ref){var add=_ref.add,multiply=_ref.multiply,transpose=_ref.transpose;return function(order,a){if(!a||order<=0||3<order)return null;var asize=a._size,m=asize[0],n=asize[1],lemax=0,dense=Math.max(16,10*Math.sqrt(n)),cm=function(order,a,m,n,dense){var at=transpose(a);if(1===order&&n===m)return add(a,at);if(2!==order)return multiply(at,a);for(var tindex=at._index,tptr=at._ptr,p2=0,j=0;j<m;j++){var p=tptr[j];if(tptr[j]=p2,!(tptr[j+1]-p>dense))for(var p1=tptr[j+1];p<p1;p++)tindex[p2++]=tindex[p]}return tptr[m]=p2,a=transpose(at),multiply(at,a)}(order,a,m,n,dense=Math.min(n-2,dense));(0,_csFkeep.csFkeep)(cm,_diag,null);for(var i,k,k2,pj,ln,nvi,pk,eln,p2,pn,h,d,cindex=cm._index,cptr=cm._ptr,cnz=cptr[n],P=[],W=[],nv=n+1,next=2*(n+1),head=3*(n+1),elen=4*(n+1),degree=5*(n+1),w=6*(n+1),hhead=7*(n+1),last=P,mark=function(n,cptr,W,len,head,last,next,hhead,nv,w,elen,degree){for(var k=0;k<n;k++)W[len+k]=cptr[k+1]-cptr[k];for(var i=W[len+n]=0;i<=n;i++)W[head+i]=-1,last[i]=-1,W[next+i]=-1,W[hhead+i]=-1,W[nv+i]=1,W[w+i]=1,W[elen+i]=0,W[degree+i]=W[len+i];var mark=_wclear(0,0,W,w,n);return W[elen+n]=-2,cptr[n]=-1,W[w+n]=0,mark}(n,cptr,W,0,head,last,next,hhead,nv,w,elen,degree),nel=function(n,cptr,W,degree,elen,w,dense,nv,head,last,next){for(var nel=0,i=0;i<n;i++){var h,d=W[degree+i];0===d?(W[elen+i]=-2,nel++,cptr[i]=-1,W[w+i]=0):dense<d?(W[nv+i]=0,W[elen+i]=-1,nel++,cptr[i]=(0,_csFlip.csFlip)(n),W[nv+n]++):(-1!==(h=W[head+d])&&(last[h]=i),W[next+i]=W[head+d],W[head+d]=i)}return nel}(n,cptr,W,degree,elen,w,dense,nv,head,last,next),mindeg=0;nel<n;){for(k=-1;mindeg<n&&-1===(k=W[head+mindeg]);mindeg++);-1!==W[next+k]&&(last[W[next+k]]=-1),W[head+mindeg]=W[next+k];var elenk=W[elen+k],nvk=W[nv+k];nel+=nvk;var dk=0;W[nv+k]=-nvk;for(var dext,e,p=cptr[k],pk1=0===elenk?p:cnz,pk2=pk1,k1=1;k1<=elenk+1;k1++){for(ln=elenk<k1?(pj=p,W[0+(e=k)]-elenk):(pj=cptr[e=cindex[p++]],W[0+e]),k2=1;k2<=ln;k2++)(nvi=W[nv+(i=cindex[pj++])])<=0||(dk+=nvi,W[nv+i]=-nvi,-1!==W[next+(cindex[pk2++]=i)]&&(last[W[next+i]]=last[i]),-1!==last[i]?W[next+last[i]]=W[next+i]:W[head+W[degree+i]]=W[next+i]);e!==k&&(cptr[e]=(0,_csFlip.csFlip)(k),W[w+e]=0)}for(0!==elenk&&(cnz=pk2),W[degree+k]=dk,cptr[k]=pk1,W[0+k]=pk2-pk1,W[elen+k]=-2,mark=_wclear(mark,lemax,W,w,n),pk=pk1;pk<pk2;pk++)if(!((eln=W[elen+(i=cindex[pk])])<=0))for(var wnvi=mark-(nvi=-W[nv+i]),p=cptr[i],p1=cptr[i]+eln-1;p<=p1;p++)W[w+(e=cindex[p])]>=mark?W[w+e]-=nvi:0!==W[w+e]&&(W[w+e]=W[degree+e]+wnvi);for(pk=pk1;pk<pk2;pk++){for(p2=(p1=cptr[i=cindex[pk]])+W[elen+i]-1,d=h=0,p=pn=p1;p<=p2;p++){0!==W[w+(e=cindex[p])]&&(0<(dext=W[w+e]-mark)?(d+=dext,h+=cindex[pn++]=e):(cptr[e]=(0,_csFlip.csFlip)(k),W[w+e]=0))}W[elen+i]=pn-p1+1;var p3=pn,p4=p1+W[0+i];for(p=1+p2;p<p4;p++){var nvj=W[nv+(j=cindex[p])];nvj<=0||(d+=nvj,h+=cindex[pn++]=j)}0===d?(cptr[i]=(0,_csFlip.csFlip)(k),dk-=nvi=-W[nv+i],nvk+=nvi,nel+=nvi,W[nv+i]=0,W[elen+i]=-1):(W[degree+i]=Math.min(W[degree+i],d),cindex[pn]=cindex[p3],cindex[p3]=cindex[p1],cindex[p1]=k,W[0+i]=pn-p1+1,h=(h<0?-h:h)%n,W[next+i]=W[hhead+h],last[W[hhead+h]=i]=h)}for(W[degree+k]=dk,mark=_wclear(mark+(lemax=Math.max(lemax,dk)),lemax,W,w,n),pk=pk1;pk<pk2;pk++)if(!(0<=W[nv+(i=cindex[pk])]))for(i=W[hhead+(h=last[i])],W[hhead+h]=-1;-1!==i&&-1!==W[next+i];i=W[next+i],mark++){for(ln=W[0+i],eln=W[elen+i],p=cptr[i]+1;p<=cptr[i]+ln-1;p++)W[w+cindex[p]]=mark;for(var jlast=i,j=W[next+i];-1!==j;){var ok=W[0+j]===ln&&W[elen+j]===eln;for(p=cptr[j]+1;ok&&p<=cptr[j]+ln-1;p++)W[w+cindex[p]]!==mark&&(ok=0);ok?(cptr[j]=(0,_csFlip.csFlip)(i),W[nv+i]+=W[nv+j],W[nv+j]=0,W[elen+j]=-1,j=W[next+j],W[next+jlast]=j):j=W[next+(jlast=j)]}}for(pk=p=pk1;pk<pk2;pk++)(nvi=-W[nv+(i=cindex[pk])])<=0||(W[nv+i]=nvi,d=W[degree+i]+dk-nvi,-1!==W[head+(d=Math.min(d,n-nel-nvi))]&&(last[W[head+d]]=i),W[next+i]=W[head+d],last[i]=-1,W[head+d]=i,mindeg=Math.min(mindeg,d),W[degree+i]=d,cindex[p++]=i);W[nv+k]=nvk,0==(W[0+k]=p-pk1)&&(cptr[k]=-1,W[w+k]=0),0!==elenk&&(cnz=p)}for(i=0;i<n;i++)cptr[i]=(0,_csFlip.csFlip)(cptr[i]);for(j=0;j<=n;j++)W[head+j]=-1;for(j=n;0<=j;j--)0<W[nv+j]||(W[next+j]=W[head+cptr[j]],W[head+cptr[j]]=j);for(e=n;0<=e;e--)W[nv+e]<=0||-1!==cptr[e]&&(W[next+e]=W[head+cptr[e]],W[head+cptr[e]]=e);for(i=k=0;i<=n;i++)-1===cptr[i]&&(k=(0,_csTdfs.csTdfs)(i,k,W,head,next,P,w));return P.splice(P.length-1,1),P};function _wclear(mark,lemax,W,w,n){if(mark<2||mark+lemax<0){for(var k=0;k<n;k++)0!==W[w+k]&&(W[w+k]=1);mark=2}return mark}function _diag(i,j){return i!==j}});exports.createCsAmd=createCsAmd},{"../../../utils/factory":931,"./csFkeep":677,"./csFlip":678,"./csTdfs":689}],674:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCsCounts=void 0;var _factory=require("../../../utils/factory"),_csLeaf=require("./csLeaf"),dependencies=["transpose"],createCsCounts=(0,_factory.factory)("csCounts",dependencies,function(_ref){var transpose=_ref.transpose;return function(a,parent,post,ata){if(!a||!parent||!post)return null;for(var i,j,J,p,p0,p1,asize=a._size,m=asize[0],n=asize[1],s=4*n+(ata?n+m+1:0),w=[],maxfirst=n,prevleaf=2*n,first=3*n,head=4*n,next=5*n+1,k=0;k<s;k++)w[k]=-1;var colcount=[],at=transpose(a),tindex=at._index,tptr=at._ptr;for(k=0;k<n;k++)for(colcount[j=post[k]]=-1===w[first+j]?1:0;-1!==j&&-1===w[first+j];j=parent[j])w[first+j]=k;if(ata){for(k=0;k<n;k++)w[post[k]]=k;for(i=0;i<m;i++){for(k=n,p0=tptr[i],p1=tptr[i+1],p=p0;p<p1;p++)k=Math.min(k,w[tindex[p]]);w[next+i]=w[head+k],w[head+k]=i}}for(i=0;i<n;i++)w[0+i]=i;for(k=0;k<n;k++){for(-1!==parent[j=post[k]]&&colcount[parent[j]]--,J=ata?w[head+k]:j;-1!==J;J=ata?w[next+J]:-1)for(p=tptr[J];p<tptr[J+1];p++){i=tindex[p];var r=(0,_csLeaf.csLeaf)(i,j,w,first,maxfirst,prevleaf,0);1<=r.jleaf&&colcount[j]++,2===r.jleaf&&colcount[r.q]--}-1!==parent[j]&&(w[0+j]=parent[j])}for(j=0;j<n;j++)-1!==parent[j]&&(colcount[parent[j]]+=colcount[j]);return colcount}});exports.createCsCounts=createCsCounts},{"../../../utils/factory":931,"./csLeaf":680}],675:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csDfs=function(j,g,top,xi,pinv){var i,p,p2,index=g._index,ptr=g._ptr,n=g._size[1],head=0;xi[0]=j;for(;0<=head;){j=xi[head];var jnew=pinv?pinv[j]:j;(0,_csMarked.csMarked)(ptr,j)||((0,_csMark.csMark)(ptr,j),xi[n+head]=jnew<0?0:(0,_csUnflip.csUnflip)(ptr[jnew]));var done=1;for(p=xi[n+head],p2=jnew<0?0:(0,_csUnflip.csUnflip)(ptr[jnew+1]);p<p2;p++)if(i=index[p],!(0,_csMarked.csMarked)(ptr,i)){xi[n+head]=p,xi[++head]=i,done=0;break}done&&(head--,xi[--top]=j)}return top};var _csMarked=require("./csMarked"),_csMark=require("./csMark"),_csUnflip=require("./csUnflip")},{"./csMark":682,"./csMarked":683,"./csUnflip":690}],676:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csEtree=function(a,ata){if(!a)return null;var i,inext,aindex=a._index,aptr=a._ptr,asize=a._size,m=asize[0],n=asize[1],parent=[],w=[],prev=n;if(ata)for(i=0;i<m;i++)w[prev+i]=-1;for(var k=0;k<n;k++){parent[k]=-1,w[0+k]=-1;for(var p0=aptr[k],p1=aptr[k+1],p=p0;p<p1;p++){var r=aindex[p];for(i=ata?w[prev+r]:r;-1!==i&&i<k;i=inext)inext=w[0+i],w[0+i]=k,-1===inext&&(parent[i]=k);ata&&(w[prev+r]=k)}}return parent}},{}],677:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csFkeep=function(a,callback,other){for(var avalues=a._values,aindex=a._index,aptr=a._ptr,n=a._size[1],nz=0,j=0;j<n;j++){var p=aptr[j];for(aptr[j]=nz;p<aptr[j+1];p++)callback(aindex[p],j,avalues?avalues[p]:1,other)&&(aindex[nz]=aindex[p],avalues&&(avalues[nz]=avalues[p]),nz++)}aptr[n]=nz,aindex.splice(nz,aindex.length-nz),avalues&&avalues.splice(nz,avalues.length-nz);return nz}},{}],678:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csFlip=function(i){return-i-2}},{}],679:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csIpvec=function(p,b){var k,n=b.length,x=[];if(p)for(k=0;k<n;k++)x[p[k]]=b[k];else for(k=0;k<n;k++)x[k]=b[k];return x}},{}],680:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csLeaf=function(i,j,w,first,maxfirst,prevleaf,ancestor){var s,sparent,q,jleaf=0;if(i<=j||w[first+j]<=w[maxfirst+i])return-1;w[maxfirst+i]=w[first+j];var jprev=w[prevleaf+i];if(w[prevleaf+i]=j,-1===jprev)jleaf=1,q=i;else{for(jleaf=2,q=jprev;q!==w[ancestor+q];q=w[ancestor+q]);for(s=jprev;s!==q;s=sparent)sparent=w[ancestor+s],w[ancestor+s]=q}return{jleaf:jleaf,q:q}}},{}],681:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCsLu=void 0;var _factory=require("../../../utils/factory"),_csSpsolve=require("./csSpsolve"),dependencies=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],createCsLu=(0,_factory.factory)("csLu",dependencies,function(_ref){var abs=_ref.abs,divideScalar=_ref.divideScalar,multiply=_ref.multiply,subtract=_ref.subtract,larger=_ref.larger,largerEq=_ref.largerEq,SparseMatrix=_ref.SparseMatrix,csSpsolve=(0,_csSpsolve.createCsSpsolve)({divideScalar:divideScalar,multiply:multiply,subtract:subtract});return function(m,s,tol){if(!m)return null;var q,n=m._size[1],lnz=100,unz=100;s&&(q=s.q,lnz=s.lnz||lnz,unz=s.unz||unz);var lvalues=[],lindex=[],lptr=[],L=new SparseMatrix({values:lvalues,index:lindex,ptr:lptr,size:[n,n]}),uvalues=[],uindex=[],uptr=[],U=new SparseMatrix({values:uvalues,index:uindex,ptr:uptr,size:[n,n]}),pinv=[],x=[],xi=[];for(i=0;i<n;i++)x[i]=0,pinv[i]=-1,lptr[i+1]=0;for(var k=unz=lnz=0;k<n;k++){lptr[k]=lnz,uptr[k]=unz;for(var xabs,i,col=q?q[k]:k,top=csSpsolve(L,m,col,xi,x,pinv,1),ipiv=-1,a=-1,p=top;p<n;p++){pinv[i=xi[p]]<0?(xabs=abs(x[i]),larger(xabs,a)&&(a=xabs,ipiv=i)):(uindex[unz]=pinv[i],uvalues[unz++]=x[i])}if(-1===ipiv||a<=0)return null;pinv[col]<0&&largerEq(abs(x[col]),multiply(a,tol))&&(ipiv=col);var pivot=x[ipiv];for(uindex[unz]=k,uvalues[unz++]=pivot,pinv[ipiv]=k,lindex[lnz]=ipiv,lvalues[lnz++]=1,p=top;p<n;p++)pinv[i=xi[p]]<0&&(lindex[lnz]=i,lvalues[lnz++]=divideScalar(x[i],pivot)),x[i]=0}for(lptr[n]=lnz,uptr[n]=unz,p=0;p<lnz;p++)lindex[p]=pinv[lindex[p]];return lvalues.splice(lnz,lvalues.length-lnz),lindex.splice(lnz,lindex.length-lnz),uvalues.splice(unz,uvalues.length-unz),uindex.splice(unz,uindex.length-unz),{L:L,U:U,pinv:pinv}}});exports.createCsLu=createCsLu},{"../../../utils/factory":931,"./csSpsolve":687}],682:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csMark=function(w,j){w[j]=(0,_csFlip.csFlip)(w[j])};var _csFlip=require("./csFlip")},{"./csFlip":678}],683:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csMarked=function(w,j){return w[j]<0}},{}],684:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csPermute=function(a,pinv,q,values){for(var avalues=a._values,aindex=a._index,aptr=a._ptr,asize=a._size,adt=a._datatype,m=asize[0],n=asize[1],cvalues=values&&a._values?[]:null,cindex=[],cptr=[],nz=0,k=0;k<n;k++){cptr[k]=nz;for(var j=q?q[k]:k,t0=aptr[j],t1=aptr[j+1],t=t0;t<t1;t++){var r=pinv?pinv[aindex[t]]:aindex[t];cindex[nz]=r,cvalues&&(cvalues[nz]=avalues[t]),nz++}}return cptr[n]=nz,a.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[m,n],datatype:adt})}},{}],685:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csPost=function(parent,n){if(!parent)return null;var j,k=0,post=[],w=[],next=n,stack=2*n;for(j=0;j<n;j++)w[0+j]=-1;for(j=n-1;0<=j;j--)-1!==parent[j]&&(w[next+j]=w[0+parent[j]],w[0+parent[j]]=j);for(j=0;j<n;j++)-1===parent[j]&&(k=(0,_csTdfs.csTdfs)(j,k,w,0,next,post,stack));return post};var _csTdfs=require("./csTdfs")},{"./csTdfs":689}],686:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csReach=function(g,b,k,xi,pinv){var p,p0,p1,gptr=g._ptr,gsize=g._size,bindex=b._index,bptr=b._ptr,n=gsize[1],top=n;for(p0=bptr[k],p1=bptr[k+1],p=p0;p<p1;p++){var i=bindex[p];(0,_csMarked.csMarked)(gptr,i)||(top=(0,_csDfs.csDfs)(i,g,top,xi,pinv))}for(p=top;p<n;p++)(0,_csMark.csMark)(gptr,xi[p]);return top};var _csMarked=require("./csMarked"),_csMark=require("./csMark"),_csDfs=require("./csDfs")},{"./csDfs":675,"./csMark":682,"./csMarked":683}],687:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCsSpsolve=void 0;var _csReach=require("./csReach"),dependencies=["divideScalar","multiply","subtract"],createCsSpsolve=(0,require("../../../utils/factory").factory)("csSpsolve",dependencies,function(_ref){var divideScalar=_ref.divideScalar,multiply=_ref.multiply,subtract=_ref.subtract;return function(g,b,k,xi,x,pinv,lo){for(var p0,p1,q,gvalues=g._values,gindex=g._index,gptr=g._ptr,n=g._size[1],bvalues=b._values,bindex=b._index,bptr=b._ptr,top=(0,_csReach.csReach)(g,b,k,xi,pinv),p=top;p<n;p++)x[xi[p]]=0;for(p0=bptr[k],p1=bptr[k+1],p=p0;p<p1;p++)x[bindex[p]]=bvalues[p];for(var px=top;px<n;px++){var j=xi[px],J=pinv?pinv[j]:j;if(!(J<0))for(p0=gptr[J],p1=gptr[J+1],x[j]=divideScalar(x[j],gvalues[lo?p0:p1-1]),p=lo?p0+1:p0,q=lo?p1:p1-1;p<q;p++){var i=gindex[p];x[i]=subtract(x[i],multiply(gvalues[p],x[j]))}}return top}});exports.createCsSpsolve=createCsSpsolve},{"../../../utils/factory":931,"./csReach":686}],688:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCsSqr=void 0;var _csPermute=require("./csPermute"),_csPost=require("./csPost"),_csEtree=require("./csEtree"),_csAmd=require("./csAmd"),_csCounts=require("./csCounts"),dependencies=["add","multiply","transpose"],createCsSqr=(0,require("../../../utils/factory").factory)("csSqr",dependencies,function(_ref){var add=_ref.add,multiply=_ref.multiply,transpose=_ref.transpose,csAmd=(0,_csAmd.createCsAmd)({add:add,multiply:multiply,transpose:transpose}),csCounts=(0,_csCounts.createCsCounts)({transpose:transpose});return function(order,a,qr){var k,aptr=a._ptr,n=a._size[1],s={};if(s.q=csAmd(order,a),order&&!s.q)return null;if(qr){var c=order?(0,_csPermute.csPermute)(a,null,s.q,0):a;s.parent=(0,_csEtree.csEtree)(c,1);var post=(0,_csPost.csPost)(s.parent,n);if(s.cp=csCounts(c,s.parent,post,1),c&&s.parent&&s.cp&&function(a,s){var aptr=a._ptr,aindex=a._index,asize=a._size,m=asize[0],n=asize[1];s.pinv=[],s.leftmost=[];var i,k,p,p0,p1,parent=s.parent,pinv=s.pinv,leftmost=s.leftmost,w=[],head=m,tail=m+n,nque=m+2*n;for(k=0;k<n;k++)w[head+k]=-1,w[tail+k]=-1,w[nque+k]=0;for(i=0;i<m;i++)leftmost[i]=-1;for(k=n-1;0<=k;k--)for(p0=aptr[k],p1=aptr[k+1],p=p0;p<p1;p++)leftmost[aindex[p]]=k;for(i=m-1;0<=i;i--)(pinv[i]=-1)!==(k=leftmost[i])&&(0==w[nque+k]++&&(w[tail+k]=i),w[0+i]=w[head+k],w[head+k]=i);for(s.lnz=0,s.m2=m,k=0;k<n;k++){var pa;i=w[head+k],s.lnz++,i<0&&(i=s.m2++),pinv[i]=k,--nque[k]<=0||(s.lnz+=w[nque+k],-1!==(pa=parent[k])&&(0===w[nque+pa]&&(w[tail+pa]=w[tail+k]),w[0+w[tail+k]]=w[head+pa],w[head+pa]=w[0+i],w[nque+pa]+=w[nque+k]))}for(i=0;i<m;i++)pinv[i]<0&&(pinv[i]=k++);return!0}(c,s))for(k=s.unz=0;k<n;k++)s.unz+=s.cp[k]}else s.unz=4*aptr[n]+n,s.lnz=s.unz;return s}});exports.createCsSqr=createCsSqr},{"../../../utils/factory":931,"./csAmd":673,"./csCounts":674,"./csEtree":676,"./csPermute":684,"./csPost":685}],689:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csTdfs=function(j,k,w,head,next,post,stack){var top=0;w[stack]=j;for(;0<=top;){var p=w[stack+top],i=w[head+p];-1===i?(top--,post[k++]=p):(w[head+p]=w[next+i],w[stack+ ++top]=i)}return k}},{}],690:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csUnflip=function(i){return i<0?(0,_csFlip.csFlip)(i):i};var _csFlip=require("./csFlip")},{"./csFlip":678}],691:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAbs=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed"],createAbs=(0,_factory.factory)("abs",dependencies,function(_ref){var abs=(0,_ref.typed)("abs",{number:_number.absNumber,Complex:function(x){return x.abs()},BigNumber:function(x){return x.abs()},Fraction:function(x){return x.abs()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,abs,!0)},Unit:function(x){return x.abs()}});return abs});exports.createAbs=createAbs},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],692:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAdd=void 0;var _factory=require("../../utils/factory"),_object=require("../../utils/object"),_algorithm=require("../../type/matrix/utils/algorithm01"),_algorithm2=require("../../type/matrix/utils/algorithm04"),_algorithm3=require("../../type/matrix/utils/algorithm10"),_algorithm4=require("../../type/matrix/utils/algorithm13"),_algorithm5=require("../../type/matrix/utils/algorithm14"),dependencies=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],createAdd=(0,_factory.factory)("add",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,addScalar=_ref.addScalar,equalScalar=_ref.equalScalar,DenseMatrix=_ref.DenseMatrix,algorithm01=(_ref.SparseMatrix,(0,_algorithm.createAlgorithm01)({typed:typed})),algorithm04=(0,_algorithm2.createAlgorithm04)({typed:typed,equalScalar:equalScalar}),algorithm10=(0,_algorithm3.createAlgorithm10)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm4.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm5.createAlgorithm14)({typed:typed}),add=typed("add",(0,_object.extend)({"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,addScalar)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm01(x,y,addScalar,!1)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm01(y,x,addScalar,!0)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm04(x,y,addScalar)},"Array, Array":function(x,y){return add(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return add(matrix(x),y)},"Matrix, Array":function(x,y){return add(x,matrix(y))},"DenseMatrix, any":function(x,y){return algorithm14(x,y,addScalar,!1)},"SparseMatrix, any":function(x,y){return algorithm10(x,y,addScalar,!1)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,addScalar,!0)},"any, SparseMatrix":function(x,y){return algorithm10(y,x,addScalar,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,addScalar,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,addScalar,!0).valueOf()},"any, any":addScalar,"any, any, ...any":function(x,y,rest){for(var result=add(x,y),i=0;i<rest.length;i++)result=add(result,rest[i]);return result}},addScalar.signatures));return add});exports.createAdd=createAdd},{"../../type/matrix/utils/algorithm01":900,"../../type/matrix/utils/algorithm04":903,"../../type/matrix/utils/algorithm10":909,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931,"../../utils/object":938}],693:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddScalar=void 0;var _factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed"],createAddScalar=(0,_factory.factory)("addScalar",dependencies,function(_ref){var addScalar=(0,_ref.typed)("addScalar",{"number, number":_number.addNumber,"Complex, Complex":function(x,y){return x.add(y)},"BigNumber, BigNumber":function(x,y){return x.plus(y)},"Fraction, Fraction":function(x,y){return x.add(y)},"Unit, Unit":function(x,y){if(null===x.value||void 0===x.value)throw new Error("Parameter x contains a unit with undefined value");if(null===y.value||void 0===y.value)throw new Error("Parameter y contains a unit with undefined value");if(!x.equalBase(y))throw new Error("Units do not match");var res=x.clone();return res.value=addScalar(res.value,y.value),res.fixPrefix=!1,res}});return addScalar});exports.createAddScalar=createAddScalar},{"../../plain/number":874,"../../utils/factory":931}],694:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCbrt=void 0;var _factory=require("../../utils/factory"),_is=require("../../utils/is"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],createCbrt=(0,_factory.factory)("cbrt",dependencies,function(_ref){var config=_ref.config,typed=_ref.typed,isNegative=_ref.isNegative,unaryMinus=_ref.unaryMinus,matrix=_ref.matrix,Complex=_ref.Complex,BigNumber=_ref.BigNumber,Fraction=_ref.Fraction,cbrt=typed("cbrt",{number:_number.cbrtNumber,Complex:_cbrtComplex,"Complex, boolean":_cbrtComplex,BigNumber:function(x){return x.cbrt()},Unit:function(x){{if(x.value&&(0,_is.isComplex)(x.value)){var result=x.clone();return result.value=1,(result=result.pow(1/3)).value=_cbrtComplex(x.value),result}var third,negate=isNegative(x.value);negate&&(x.value=unaryMinus(x.value)),third=(0,_is.isBigNumber)(x.value)?new BigNumber(1).div(3):(0,_is.isFraction)(x.value)?new Fraction(1,3):1/3;var _result=x.pow(third);return negate&&(_result.value=unaryMinus(_result.value)),_result}},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,cbrt,!0)}});function _cbrtComplex(x,allRoots){var arg3=x.arg()/3,abs=x.abs(),principal=new Complex((0,_number.cbrtNumber)(abs),0).mul(new Complex(0,arg3).exp());if(allRoots){var all=[principal,new Complex((0,_number.cbrtNumber)(abs),0).mul(new Complex(0,arg3+2*Math.PI/3).exp()),new Complex((0,_number.cbrtNumber)(abs),0).mul(new Complex(0,arg3-2*Math.PI/3).exp())];return"Array"===config.matrix?all:matrix(all)}return principal}return cbrt});exports.createCbrt=createCbrt},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931,"../../utils/is":933}],695:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCeil=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../utils/number"),_nearlyEqual=require("../../utils/bignumber/nearlyEqual"),_number2=require("../../plain/number"),dependencies=["typed","config","round"],createCeil=(0,_factory.factory)("ceil",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,round=_ref.round,ceil=typed("ceil",{number:function(x){return((0,_number.nearlyEqual)(x,round(x),config.epsilon)?round:(0,_number2.ceilNumber))(x)},Complex:function(x){return x.ceil()},BigNumber:function(x){return(0,_nearlyEqual.nearlyEqual)(x,round(x),config.epsilon)?round(x):x.ceil()},Fraction:function(x){return x.ceil()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,ceil,!0)}});return ceil});exports.createCeil=createCeil},{"../../plain/number":874,"../../utils/bignumber/nearlyEqual":926,"../../utils/collection":927,"../../utils/factory":931,"../../utils/number":937}],696:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCube=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed"],createCube=(0,_factory.factory)("cube",dependencies,function(_ref){var cube=(0,_ref.typed)("cube",{number:_number.cubeNumber,Complex:function(x){return x.mul(x).mul(x)},BigNumber:function(x){return x.times(x).times(x)},Fraction:function(x){return x.pow(3)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,cube,!0)},Unit:function(x){return x.pow(3)}});return cube});exports.createCube=createCube},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],697:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDivide=void 0;var _factory=require("../../utils/factory"),_object=require("../../utils/object"),_algorithm=require("../../type/matrix/utils/algorithm11"),_algorithm2=require("../../type/matrix/utils/algorithm14"),dependencies=["typed","matrix","multiply","equalScalar","divideScalar","inv"],createDivide=(0,_factory.factory)("divide",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,multiply=_ref.multiply,equalScalar=_ref.equalScalar,divideScalar=_ref.divideScalar,inv=_ref.inv,algorithm11=(0,_algorithm.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm14=(0,_algorithm2.createAlgorithm14)({typed:typed});return typed("divide",(0,_object.extend)({"Array | Matrix, Array | Matrix":function(x,y){return multiply(x,inv(y))},"DenseMatrix, any":function(x,y){return algorithm14(x,y,divideScalar,!1)},"SparseMatrix, any":function(x,y){return algorithm11(x,y,divideScalar,!1)},"Array, any":function(x,y){return algorithm14(matrix(x),y,divideScalar,!1).valueOf()},"any, Array | Matrix":function(x,y){return multiply(x,inv(y))}},divideScalar.signatures))});exports.createDivide=createDivide},{"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931,"../../utils/object":938}],698:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDivideScalar=void 0;var _factory=require("../../utils/factory"),_is=require("../../utils/is"),dependencies=["typed","numeric"],createDivideScalar=(0,_factory.factory)("divideScalar",dependencies,function(_ref){var typed=_ref.typed,numeric=_ref.numeric,divideScalar=typed("divideScalar",{"number, number":function(x,y){return x/y},"Complex, Complex":function(x,y){return x.div(y)},"BigNumber, BigNumber":function(x,y){return x.div(y)},"Fraction, Fraction":function(x,y){return x.div(y)},"Unit, number | Fraction | BigNumber":function(x,y){var res=x.clone(),one=numeric(1,(0,_is.typeOf)(y));return res.value=divideScalar(null===res.value?res._normalize(one):res.value,y),res},"number | Fraction | BigNumber, Unit":function(x,y){var res=(res=y.clone()).pow(-1),one=numeric(1,(0,_is.typeOf)(x));return res.value=divideScalar(x,null===y.value?y._normalize(one):y.value),res},"Unit, Unit":function(x,y){return x.divide(y)}});return divideScalar});exports.createDivideScalar=createDivideScalar},{"../../utils/factory":931,"../../utils/is":933}],699:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDotDivide=void 0;var _factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm02"),_algorithm2=require("../../type/matrix/utils/algorithm03"),_algorithm3=require("../../type/matrix/utils/algorithm07"),_algorithm4=require("../../type/matrix/utils/algorithm11"),_algorithm5=require("../../type/matrix/utils/algorithm12"),_algorithm6=require("../../type/matrix/utils/algorithm13"),_algorithm7=require("../../type/matrix/utils/algorithm14"),dependencies=["typed","matrix","equalScalar","divideScalar","DenseMatrix"],createDotDivide=(0,_factory.factory)("dotDivide",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,divideScalar=_ref.divideScalar,DenseMatrix=_ref.DenseMatrix,algorithm02=(0,_algorithm.createAlgorithm02)({typed:typed,equalScalar:equalScalar}),algorithm03=(0,_algorithm2.createAlgorithm03)({typed:typed}),algorithm07=(0,_algorithm3.createAlgorithm07)({typed:typed,DenseMatrix:DenseMatrix}),algorithm11=(0,_algorithm4.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm12=(0,_algorithm5.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm6.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm7.createAlgorithm14)({typed:typed}),dotDivide=typed("dotDivide",{"any, any":divideScalar,"SparseMatrix, SparseMatrix":function(x,y){return algorithm07(x,y,divideScalar,!1)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm02(y,x,divideScalar,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,divideScalar,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,divideScalar)},"Array, Array":function(x,y){return dotDivide(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return dotDivide(matrix(x),y)},"Matrix, Array":function(x,y){return dotDivide(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm11(x,y,divideScalar,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,divideScalar,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,divideScalar,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,divideScalar,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,divideScalar,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,divideScalar,!0).valueOf()}});return dotDivide});exports.createDotDivide=createDotDivide},{"../../type/matrix/utils/algorithm02":901,"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm07":906,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],700:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDotMultiply=void 0;var _factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm02"),_algorithm2=require("../../type/matrix/utils/algorithm09"),_algorithm3=require("../../type/matrix/utils/algorithm11"),_algorithm4=require("../../type/matrix/utils/algorithm13"),_algorithm5=require("../../type/matrix/utils/algorithm14"),dependencies=["typed","matrix","equalScalar","multiplyScalar"],createDotMultiply=(0,_factory.factory)("dotMultiply",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,multiplyScalar=_ref.multiplyScalar,algorithm02=(0,_algorithm.createAlgorithm02)({typed:typed,equalScalar:equalScalar}),algorithm09=(0,_algorithm2.createAlgorithm09)({typed:typed,equalScalar:equalScalar}),algorithm11=(0,_algorithm3.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm13=(0,_algorithm4.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm5.createAlgorithm14)({typed:typed}),dotMultiply=typed("dotMultiply",{"any, any":multiplyScalar,"SparseMatrix, SparseMatrix":function(x,y){return algorithm09(x,y,multiplyScalar,!1)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm02(y,x,multiplyScalar,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm02(x,y,multiplyScalar,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,multiplyScalar)},"Array, Array":function(x,y){return dotMultiply(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return dotMultiply(matrix(x),y)},"Matrix, Array":function(x,y){return dotMultiply(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm11(x,y,multiplyScalar,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,multiplyScalar,!1)},"any, SparseMatrix":function(x,y){return algorithm11(y,x,multiplyScalar,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,multiplyScalar,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,multiplyScalar,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,multiplyScalar,!0).valueOf()}});return dotMultiply});exports.createDotMultiply=createDotMultiply},{"../../type/matrix/utils/algorithm02":901,"../../type/matrix/utils/algorithm09":908,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],701:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDotPow=void 0;var _factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm03"),_algorithm2=require("../../type/matrix/utils/algorithm07"),_algorithm3=require("../../type/matrix/utils/algorithm11"),_algorithm4=require("../../type/matrix/utils/algorithm12"),_algorithm5=require("../../type/matrix/utils/algorithm13"),_algorithm6=require("../../type/matrix/utils/algorithm14"),dependencies=["typed","equalScalar","matrix","pow","DenseMatrix"],createDotPow=(0,_factory.factory)("dotPow",dependencies,function(_ref){var typed=_ref.typed,equalScalar=_ref.equalScalar,matrix=_ref.matrix,pow=_ref.pow,DenseMatrix=_ref.DenseMatrix,algorithm03=(0,_algorithm.createAlgorithm03)({typed:typed}),algorithm07=(0,_algorithm2.createAlgorithm07)({typed:typed,DenseMatrix:DenseMatrix}),algorithm11=(0,_algorithm3.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm12=(0,_algorithm4.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm5.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm6.createAlgorithm14)({typed:typed}),dotPow=typed("dotPow",{"any, any":pow,"SparseMatrix, SparseMatrix":function(x,y){return algorithm07(x,y,pow,!1)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm03(y,x,pow,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,pow,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,pow)},"Array, Array":function(x,y){return dotPow(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return dotPow(matrix(x),y)},"Matrix, Array":function(x,y){return dotPow(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm11(x,y,dotPow,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,dotPow,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,dotPow,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,dotPow,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,dotPow,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,dotPow,!0).valueOf()}});return dotPow});exports.createDotPow=createDotPow},{"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm07":906,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],702:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExp=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed"],createExp=(0,_factory.factory)("exp",dependencies,function(_ref){var exp=(0,_ref.typed)("exp",{number:_number.expNumber,Complex:function(x){return x.exp()},BigNumber:function(x){return x.exp()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,exp)}});return exp});exports.createExp=createExp},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],703:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExpm1=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","Complex"],createExpm1=(0,_factory.factory)("expm1",dependencies,function(_ref){var typed=_ref.typed,_Complex=_ref.Complex,expm1=typed("expm1",{number:_number.expm1Number,Complex:function(x){var r=Math.exp(x.re);return new _Complex(r*Math.cos(x.im)-1,r*Math.sin(x.im))},BigNumber:function(x){return x.exp().minus(1)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,expm1)}});return expm1});exports.createExpm1=createExpm1},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],704:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFix=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),dependencies=["typed","Complex","ceil","floor"],createFix=(0,_factory.factory)("fix",dependencies,function(_ref){var typed=_ref.typed,_Complex=_ref.Complex,ceil=_ref.ceil,floor=_ref.floor,fix=typed("fix",{number:function(x){return(0<x?floor:ceil)(x)},Complex:function(x){return new _Complex(0<x.re?Math.floor(x.re):Math.ceil(x.re),0<x.im?Math.floor(x.im):Math.ceil(x.im))},BigNumber:function(x){return(x.isNegative()?ceil:floor)(x)},Fraction:function(x){return x.s<0?x.ceil():x.floor()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,fix,!0)}});return fix});exports.createFix=createFix},{"../../utils/collection":927,"../../utils/factory":931}],705:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFloor=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../utils/number"),_nearlyEqual=require("../../utils/bignumber/nearlyEqual"),dependencies=["typed","config","round"],createFloor=(0,_factory.factory)("floor",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,round=_ref.round,floor=typed("floor",{number:function(x){return(0,_number.nearlyEqual)(x,round(x),config.epsilon)?round(x):Math.floor(x)},Complex:function(x){return x.floor()},BigNumber:function(x){return(0,_nearlyEqual.nearlyEqual)(x,round(x),config.epsilon)?round(x):x.floor()},Fraction:function(x){return x.floor()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,floor,!0)}});return floor});exports.createFloor=createFloor},{"../../utils/bignumber/nearlyEqual":926,"../../utils/collection":927,"../../utils/factory":931,"../../utils/number":937}],706:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGcd=void 0;var _factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm01"),_algorithm2=require("../../type/matrix/utils/algorithm04"),_algorithm3=require("../../type/matrix/utils/algorithm10"),_algorithm4=require("../../type/matrix/utils/algorithm13"),_algorithm5=require("../../type/matrix/utils/algorithm14"),_number=require("../../plain/number"),dependencies=["typed","matrix","equalScalar","BigNumber","DenseMatrix"],createGcd=(0,_factory.factory)("gcd",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,BigNumber=_ref.BigNumber,DenseMatrix=_ref.DenseMatrix,algorithm01=(0,_algorithm.createAlgorithm01)({typed:typed}),algorithm04=(0,_algorithm2.createAlgorithm04)({typed:typed,equalScalar:equalScalar}),algorithm10=(0,_algorithm3.createAlgorithm10)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm4.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm5.createAlgorithm14)({typed:typed}),gcd=typed("gcd",{"number, number":_number.gcdNumber,"BigNumber, BigNumber":function(a,b){if(!a.isInt()||!b.isInt())throw new Error("Parameters in function gcd must be integer numbers");var zero=new BigNumber(0);for(;!b.isZero();){var r=a.mod(b);a=b,b=r}return a.lt(zero)?a.neg():a},"Fraction, Fraction":function(x,y){return x.gcd(y)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm04(x,y,gcd)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm01(y,x,gcd,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm01(x,y,gcd,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,gcd)},"Array, Array":function(x,y){return gcd(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return gcd(matrix(x),y)},"Matrix, Array":function(x,y){return gcd(x,matrix(y))},"SparseMatrix, number | BigNumber":function(x,y){return algorithm10(x,y,gcd,!1)},"DenseMatrix, number | BigNumber":function(x,y){return algorithm14(x,y,gcd,!1)},"number | BigNumber, SparseMatrix":function(x,y){return algorithm10(y,x,gcd,!0)},"number | BigNumber, DenseMatrix":function(x,y){return algorithm14(y,x,gcd,!0)},"Array, number | BigNumber":function(x,y){return algorithm14(matrix(x),y,gcd,!1).valueOf()},"number | BigNumber, Array":function(x,y){return algorithm14(matrix(y),x,gcd,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(a,b,args){for(var res=gcd(a,b),i=0;i<args.length;i++)res=gcd(res,args[i]);return res}});return gcd});exports.createGcd=createGcd},{"../../plain/number":874,"../../type/matrix/utils/algorithm01":900,"../../type/matrix/utils/algorithm04":903,"../../type/matrix/utils/algorithm10":909,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],707:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHypot=void 0;var _factory=require("../../utils/factory"),_array=require("../../utils/array"),dependencies=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],createHypot=(0,_factory.factory)("hypot",dependencies,function(_ref){var typed=_ref.typed,abs=_ref.abs,addScalar=_ref.addScalar,divideScalar=_ref.divideScalar,multiplyScalar=_ref.multiplyScalar,sqrt=_ref.sqrt,smaller=_ref.smaller,isPositive=_ref.isPositive,hypot=typed("hypot",{"... number | BigNumber":function(args){for(var result=0,largest=0,i=0;i<args.length;i++){var value=abs(args[i]);smaller(largest,value)?(result=multiplyScalar(result,multiplyScalar(divideScalar(largest,value),divideScalar(largest,value))),result=addScalar(result,1),largest=value):result=addScalar(result,isPositive(value)?multiplyScalar(divideScalar(value,largest),divideScalar(value,largest)):value)}return multiplyScalar(largest,sqrt(result))},Array:function(x){return hypot.apply(hypot,(0,_array.flatten)(x))},Matrix:function(x){return hypot.apply(hypot,(0,_array.flatten)(x.toArray()))}});return hypot});exports.createHypot=createHypot},{"../../utils/array":922,"../../utils/factory":931}],708:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLcm=void 0;var _factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm02"),_algorithm2=require("../../type/matrix/utils/algorithm06"),_algorithm3=require("../../type/matrix/utils/algorithm11"),_algorithm4=require("../../type/matrix/utils/algorithm13"),_algorithm5=require("../../type/matrix/utils/algorithm14"),_number=require("../../plain/number"),dependencies=["typed","matrix","equalScalar"],createLcm=(0,_factory.factory)("lcm",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,algorithm02=(0,_algorithm.createAlgorithm02)({typed:typed,equalScalar:equalScalar}),algorithm06=(0,_algorithm2.createAlgorithm06)({typed:typed,equalScalar:equalScalar}),algorithm11=(0,_algorithm3.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm13=(0,_algorithm4.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm5.createAlgorithm14)({typed:typed}),lcm=typed("lcm",{"number, number":_number.lcmNumber,"BigNumber, BigNumber":function(a,b){if(!a.isInt()||!b.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(a.isZero())return a;if(b.isZero())return b;var prod=a.times(b);for(;!b.isZero();){var t=b;b=a.mod(t),a=t}return prod.div(a).abs()},"Fraction, Fraction":function(x,y){return x.lcm(y)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm06(x,y,lcm)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm02(y,x,lcm,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm02(x,y,lcm,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,lcm)},"Array, Array":function(x,y){return lcm(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return lcm(matrix(x),y)},"Matrix, Array":function(x,y){return lcm(x,matrix(y))},"SparseMatrix, number | BigNumber":function(x,y){return algorithm11(x,y,lcm,!1)},"DenseMatrix, number | BigNumber":function(x,y){return algorithm14(x,y,lcm,!1)},"number | BigNumber, SparseMatrix":function(x,y){return algorithm11(y,x,lcm,!0)},"number | BigNumber, DenseMatrix":function(x,y){return algorithm14(y,x,lcm,!0)},"Array, number | BigNumber":function(x,y){return algorithm14(matrix(x),y,lcm,!1).valueOf()},"number | BigNumber, Array":function(x,y){return algorithm14(matrix(y),x,lcm,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(a,b,args){for(var res=lcm(a,b),i=0;i<args.length;i++)res=lcm(res,args[i]);return res}});return lcm});exports.createLcm=createLcm},{"../../plain/number":874,"../../type/matrix/utils/algorithm02":901,"../../type/matrix/utils/algorithm06":905,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],709:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLog=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["config","typed","divideScalar","Complex"],createLog=(0,_factory.factory)("log",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,divideScalar=_ref.divideScalar,Complex=_ref.Complex,log=typed("log",{number:function(x){return 0<=x||config.predictable?(0,_number.logNumber)(x):new Complex(x,0).log()},Complex:function(x){return x.log()},BigNumber:function(x){return!x.isNegative()||config.predictable?x.ln():new Complex(x.toNumber(),0).log()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,log)},"any, any":function(x,base){return divideScalar(log(x),log(base))}});return log});exports.createLog=createLog},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],710:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLog10=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","config","Complex"],createLog10=(0,_factory.factory)("log10",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,_Complex=_ref.Complex,log10=typed("log10",{number:function(x){return 0<=x||config.predictable?(0,_number.log10Number)(x):new _Complex(x,0).log().div(Math.LN10)},Complex:function(x){return new _Complex(x).log().div(Math.LN10)},BigNumber:function(x){return!x.isNegative()||config.predictable?x.log():new _Complex(x.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,log10)}});return log10});exports.createLog10=createLog10},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],711:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLog1p=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../utils/number"),dependencies=["typed","config","divideScalar","log","Complex"],createLog1p=(0,_factory.factory)("log1p",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,divideScalar=_ref.divideScalar,log=_ref.log,Complex=_ref.Complex,log1p=typed("log1p",{number:function(x){return-1<=x||config.predictable?(0,_number.log1p)(x):_log1pComplex(new Complex(x,0))},Complex:_log1pComplex,BigNumber:function(x){var y=x.plus(1);return!y.isNegative()||config.predictable?y.ln():_log1pComplex(new Complex(x.toNumber(),0))},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,log1p)},"any, any":function(x,base){return divideScalar(log1p(x),log(base))}});function _log1pComplex(x){var xRe1p=x.re+1;return new Complex(Math.log(Math.sqrt(xRe1p*xRe1p+x.im*x.im)),Math.atan2(x.im,xRe1p))}return log1p});exports.createLog1p=createLog1p},{"../../utils/collection":927,"../../utils/factory":931,"../../utils/number":937}],712:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLog2=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","config","Complex"],createLog2=(0,_factory.factory)("log2",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,Complex=_ref.Complex,log2=typed("log2",{number:function(x){return 0<=x||config.predictable?(0,_number.log2Number)(x):_log2Complex(new Complex(x,0))},Complex:_log2Complex,BigNumber:function(x){return!x.isNegative()||config.predictable?x.log(2):_log2Complex(new Complex(x.toNumber(),0))},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,log2)}});function _log2Complex(x){var newX=Math.sqrt(x.re*x.re+x.im*x.im);return new Complex(Math.log2?Math.log2(newX):Math.log(newX)/Math.LN2,Math.atan2(x.im,x.re)/Math.LN2)}return log2});exports.createLog2=createLog2},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],713:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMod=void 0;var _factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm02"),_algorithm2=require("../../type/matrix/utils/algorithm03"),_algorithm3=require("../../type/matrix/utils/algorithm05"),_algorithm4=require("../../type/matrix/utils/algorithm11"),_algorithm5=require("../../type/matrix/utils/algorithm12"),_algorithm6=require("../../type/matrix/utils/algorithm13"),_algorithm7=require("../../type/matrix/utils/algorithm14"),_number=require("../../plain/number"),dependencies=["typed","matrix","equalScalar","DenseMatrix"],createMod=(0,_factory.factory)("mod",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,DenseMatrix=_ref.DenseMatrix,algorithm02=(0,_algorithm.createAlgorithm02)({typed:typed,equalScalar:equalScalar}),algorithm03=(0,_algorithm2.createAlgorithm03)({typed:typed}),algorithm05=(0,_algorithm3.createAlgorithm05)({typed:typed,equalScalar:equalScalar}),algorithm11=(0,_algorithm4.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm12=(0,_algorithm5.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm6.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm7.createAlgorithm14)({typed:typed}),mod=typed("mod",{"number, number":_number.modNumber,"BigNumber, BigNumber":function(x,y){return y.isZero()?x:x.mod(y)},"Fraction, Fraction":function(x,y){return x.mod(y)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm05(x,y,mod,!1)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm02(y,x,mod,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,mod,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,mod)},"Array, Array":function(x,y){return mod(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return mod(matrix(x),y)},"Matrix, Array":function(x,y){return mod(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm11(x,y,mod,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,mod,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,mod,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,mod,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,mod,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,mod,!0).valueOf()}});return mod});exports.createMod=createMod},{"../../plain/number":874,"../../type/matrix/utils/algorithm02":901,"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm05":904,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],714:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMultiply=void 0;var _factory=require("../../utils/factory"),_is=require("../../utils/is"),_object=require("../../utils/object"),_array=require("../../utils/array"),_algorithm=require("../../type/matrix/utils/algorithm11"),_algorithm2=require("../../type/matrix/utils/algorithm14"),dependencies=["typed","matrix","addScalar","multiplyScalar","equalScalar"],createMultiply=(0,_factory.factory)("multiply",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,addScalar=_ref.addScalar,multiplyScalar=_ref.multiplyScalar,equalScalar=_ref.equalScalar,algorithm11=(0,_algorithm.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm14=(0,_algorithm2.createAlgorithm14)({typed:typed}),multiply=typed("multiply",(0,_object.extend)({"Array, Array":function(x,y){_validateMatrixDimensions((0,_array.arraySize)(x),(0,_array.arraySize)(y));var m=multiply(matrix(x),matrix(y));return(0,_is.isMatrix)(m)?m.valueOf():m},"Matrix, Matrix":function(x,y){var xsize=x.size(),ysize=y.size();return _validateMatrixDimensions(xsize,ysize),1===xsize.length?1===ysize.length?function(a,b,n){if(0===n)throw new Error("Cannot multiply two empty vectors");var dt,adata=a._data,adt=a._datatype,bdata=b._data,bdt=b._datatype,af=addScalar,mf=multiplyScalar;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]));for(var c=mf(adata[0],bdata[0]),i=1;i<n;i++)c=af(c,mf(adata[i],bdata[i]));return c}(x,y,xsize[0]):function(a,b){if("dense"===b.storage())return function(a,b){var dt,adata=a._data,asize=a._size,adt=a._datatype,bdata=b._data,bsize=b._size,bdt=b._datatype,alength=asize[0],bcolumns=bsize[1],af=addScalar,mf=multiplyScalar;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]));for(var c=[],j=0;j<bcolumns;j++){for(var sum=mf(adata[0],bdata[0][j]),i=1;i<alength;i++)sum=af(sum,mf(adata[i],bdata[i][j]));c[j]=sum}return a.createDenseMatrix({data:c,size:[bcolumns],datatype:dt})}(a,b);throw new Error("Support for SparseMatrix not implemented")}(x,y):(1===ysize.length?_multiplyMatrixVector:_multiplyMatrixMatrix)(x,y)},"Matrix, Array":function(x,y){return multiply(x,matrix(y))},"Array, Matrix":function(x,y){return multiply(matrix(x,y.storage()),y)},"SparseMatrix, any":function(x,y){return algorithm11(x,y,multiplyScalar,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,multiplyScalar,!1)},"any, SparseMatrix":function(x,y){return algorithm11(y,x,multiplyScalar,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,multiplyScalar,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,multiplyScalar,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,multiplyScalar,!0).valueOf()},"any, any":multiplyScalar,"any, any, ...any":function(x,y,rest){for(var result=multiply(x,y),i=0;i<rest.length;i++)result=multiply(result,rest[i]);return result}},multiplyScalar.signatures));function _validateMatrixDimensions(size1,size2){switch(size1.length){case 1:switch(size2.length){case 1:if(size1[0]!==size2[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(size1[0]!==size2[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+size1[0]+") must match Matrix rows ("+size2[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+size2.length+" dimensions)")}break;case 2:switch(size2.length){case 1:if(size1[1]!==size2[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+size1[1]+") must match Vector length ("+size2[0]+")");break;case 2:if(size1[1]!==size2[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+size1[1]+") must match Matrix B rows ("+size2[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+size2.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+size1.length+" dimensions)")}}var _multiplyMatrixVector=typed("_multiplyMatrixVector",{"DenseMatrix, any":function(a,b){var dt,adata=a._data,asize=a._size,adt=a._datatype,bdata=b._data,bdt=b._datatype,arows=asize[0],acolumns=asize[1],af=addScalar,mf=multiplyScalar;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]));for(var c=[],i=0;i<arows;i++){for(var row=adata[i],sum=mf(row[0],bdata[0]),j=1;j<acolumns;j++)sum=af(sum,mf(row[j],bdata[j]));c[i]=sum}return a.createDenseMatrix({data:c,size:[arows],datatype:dt})},"SparseMatrix, any":function(a,b){var avalues=a._values,aindex=a._index,aptr=a._ptr,adt=a._datatype;if(!avalues)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var dt,bdata=b._data,bdt=b._datatype,arows=a._size[0],brows=b._size[0],cvalues=[],cindex=[],cptr=[],af=addScalar,mf=multiplyScalar,eq=equalScalar,zero=0;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]),eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt));for(var x=[],w=[],ib=cptr[0]=0;ib<brows;ib++){var vbi=bdata[ib];if(!eq(vbi,zero))for(var ka0=aptr[ib],ka1=aptr[ib+1],ka=ka0;ka<ka1;ka++){var ia=aindex[ka];w[ia]?x[ia]=af(x[ia],mf(vbi,avalues[ka])):(w[ia]=!0,cindex.push(ia),x[ia]=mf(vbi,avalues[ka]))}}for(var p1=cindex.length,p=0;p<p1;p++){var ic=cindex[p];cvalues[p]=x[ic]}return cptr[1]=cindex.length,a.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[arows,1],datatype:dt})}}),_multiplyMatrixMatrix=typed("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(a,b){var dt,adata=a._data,asize=a._size,adt=a._datatype,bdata=b._data,bsize=b._size,bdt=b._datatype,arows=asize[0],acolumns=asize[1],bcolumns=bsize[1],af=addScalar,mf=multiplyScalar;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]));for(var c=[],i=0;i<arows;i++){var row=adata[i];c[i]=[];for(var j=0;j<bcolumns;j++){for(var sum=mf(row[0],bdata[0][j]),x=1;x<acolumns;x++)sum=af(sum,mf(row[x],bdata[x][j]));c[i][j]=sum}}return a.createDenseMatrix({data:c,size:[arows,bcolumns],datatype:dt})},"DenseMatrix, SparseMatrix":function(a,b){var adata=a._data,asize=a._size,adt=a._datatype,bvalues=b._values,bindex=b._index,bptr=b._ptr,bsize=b._size,bdt=b._datatype;if(!bvalues)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var dt,arows=asize[0],bcolumns=bsize[1],af=addScalar,mf=multiplyScalar,eq=equalScalar,zero=0;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]),eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt));for(var cvalues=[],cindex=[],cptr=[],c=b.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[arows,bcolumns],datatype:dt}),jb=0;jb<bcolumns;jb++){cptr[jb]=cindex.length;var kb0=bptr[jb],kb1=bptr[jb+1];if(kb0<kb1)for(var last=0,i=0;i<arows;i++){for(var mark=i+1,cij=void 0,kb=kb0;kb<kb1;kb++){var ib=bindex[kb];last!==mark?(cij=mf(adata[i][ib],bvalues[kb]),last=mark):cij=af(cij,mf(adata[i][ib],bvalues[kb]))}last!==mark||eq(cij,zero)||(cindex.push(i),cvalues.push(cij))}}return cptr[bcolumns]=cindex.length,c},"SparseMatrix, DenseMatrix":function(a,b){var avalues=a._values,aindex=a._index,aptr=a._ptr,adt=a._datatype;if(!avalues)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var dt,bdata=b._data,bdt=b._datatype,arows=a._size[0],brows=b._size[0],bcolumns=b._size[1],af=addScalar,mf=multiplyScalar,eq=equalScalar,zero=0;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]),eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt));for(var cvalues=[],cindex=[],cptr=[],c=a.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[arows,bcolumns],datatype:dt}),x=[],w=[],jb=0;jb<bcolumns;jb++){cptr[jb]=cindex.length;for(var mark=jb+1,ib=0;ib<brows;ib++){var vbij=bdata[ib][jb];if(!eq(vbij,zero))for(var ka0=aptr[ib],ka1=aptr[ib+1],ka=ka0;ka<ka1;ka++){var ia=aindex[ka];w[ia]!==mark?(w[ia]=mark,cindex.push(ia),x[ia]=mf(vbij,avalues[ka])):x[ia]=af(x[ia],mf(vbij,avalues[ka]))}}for(var p0=cptr[jb],p1=cindex.length,p=p0;p<p1;p++){var ic=cindex[p];cvalues[p]=x[ic]}}return cptr[bcolumns]=cindex.length,c},"SparseMatrix, SparseMatrix":function(a,b){var dt,avalues=a._values,aindex=a._index,aptr=a._ptr,adt=a._datatype,bvalues=b._values,bindex=b._index,bptr=b._ptr,bdt=b._datatype,arows=a._size[0],bcolumns=b._size[1],values=avalues&&bvalues,af=addScalar,mf=multiplyScalar;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]));for(var ka,ka0,ka1,kb,kb0,kb1,ia,ib,cvalues=values?[]:void 0,cindex=[],cptr=[],c=a.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[arows,bcolumns],datatype:dt}),x=values?[]:void 0,w=[],jb=0;jb<bcolumns;jb++){cptr[jb]=cindex.length;var mark=jb+1;for(kb0=bptr[jb],kb1=bptr[jb+1],kb=kb0;kb<kb1;kb++)if(ib=bindex[kb],values)for(ka0=aptr[ib],ka1=aptr[ib+1],ka=ka0;ka<ka1;ka++)ia=aindex[ka],w[ia]!==mark?(w[ia]=mark,cindex.push(ia),x[ia]=mf(bvalues[kb],avalues[ka])):x[ia]=af(x[ia],mf(bvalues[kb],avalues[ka]));else for(ka0=aptr[ib],ka1=aptr[ib+1],ka=ka0;ka<ka1;ka++)ia=aindex[ka],w[ia]!==mark&&(w[ia]=mark,cindex.push(ia));if(values)for(var p0=cptr[jb],p1=cindex.length,p=p0;p<p1;p++){var ic=cindex[p];cvalues[p]=x[ic]}}return cptr[bcolumns]=cindex.length,c}});return multiply});exports.createMultiply=createMultiply},{"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm14":913,"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/object":938}],715:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMultiplyScalar=void 0;var _factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed"],createMultiplyScalar=(0,_factory.factory)("multiplyScalar",dependencies,function(_ref){var multiplyScalar=(0,_ref.typed)("multiplyScalar",{"number, number":_number.multiplyNumber,"Complex, Complex":function(x,y){return x.mul(y)},"BigNumber, BigNumber":function(x,y){return x.times(y)},"Fraction, Fraction":function(x,y){return x.mul(y)},"number | Fraction | BigNumber | Complex, Unit":function(x,y){var res=y.clone();return res.value=null===res.value?res._normalize(x):multiplyScalar(res.value,x),res},"Unit, number | Fraction | BigNumber | Complex":function(x,y){var res=x.clone();return res.value=null===res.value?res._normalize(y):multiplyScalar(res.value,y),res},"Unit, Unit":function(x,y){return x.multiply(y)}});return multiplyScalar});exports.createMultiplyScalar=createMultiplyScalar},{"../../plain/number":874,"../../utils/factory":931}],716:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNorm=void 0;var _factory=require("../../utils/factory"),dependencies=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix"],createNorm=(0,_factory.factory)("norm",dependencies,function(_ref){var typed=_ref.typed,abs=_ref.abs,add=_ref.add,pow=_ref.pow,conj=_ref.conj,sqrt=_ref.sqrt,multiply=_ref.multiply,equalScalar=_ref.equalScalar,larger=_ref.larger,smaller=_ref.smaller,matrix=_ref.matrix,norm=typed("norm",{number:Math.abs,Complex:function(x){return x.abs()},BigNumber:function(x){return x.abs()},boolean:function(x){return Math.abs(x)},Array:function(x){return _norm(matrix(x),2)},Matrix:function(x){return _norm(x,2)},"number | Complex | BigNumber | boolean, number | BigNumber | string":function(x){return norm(x)},"Array, number | BigNumber | string":function(x,p){return _norm(matrix(x),p)},"Matrix, number | BigNumber | string":_norm});function _norm(x,p){var ninf,sizeX=x.size();if(1===sizeX.length){if(p===Number.POSITIVE_INFINITY||"inf"===p){var pinf=0;return x.forEach(function(value){var v=abs(value);larger(v,pinf)&&(pinf=v)},!0),pinf}if(p===Number.NEGATIVE_INFINITY||"-inf"===p)return x.forEach(function(value){var v=abs(value);ninf&&!smaller(v,ninf)||(ninf=v)},!0),ninf||0;if("fro"===p)return _norm(x,2);if("number"!=typeof p||isNaN(p))throw new Error("Unsupported parameter value");if(equalScalar(p,0))return Number.POSITIVE_INFINITY;var n=0;return x.forEach(function(value){n=add(pow(abs(value),p),n)},!0),pow(n,1/p)}if(2===sizeX.length){if(1===p){var c=[],maxc=0;return x.forEach(function(value,index){var j=index[1],cj=add(c[j]||0,abs(value));larger(cj,maxc)&&(maxc=cj),c[j]=cj},!0),maxc}if(p===Number.POSITIVE_INFINITY||"inf"===p){var r=[],maxr=0;return x.forEach(function(value,index){var i=index[0],ri=add(r[i]||0,abs(value));larger(ri,maxr)&&(maxr=ri),r[i]=ri},!0),maxr}if("fro"===p){var fro=0;return x.forEach(function(value,index){fro=add(fro,multiply(value,conj(value)))}),abs(sqrt(fro))}if(2===p)throw new Error("Unsupported parameter value, missing implementation of matrix singular value decomposition");throw new Error("Unsupported parameter value")}}return norm});exports.createNorm=createNorm},{"../../utils/factory":931}],717:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNthRootNumber=exports.createNthRoot=void 0;var _factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm01"),_algorithm2=require("../../type/matrix/utils/algorithm02"),_algorithm3=require("../../type/matrix/utils/algorithm06"),_algorithm4=require("../../type/matrix/utils/algorithm11"),_algorithm5=require("../../type/matrix/utils/algorithm13"),_algorithm6=require("../../type/matrix/utils/algorithm14"),_number=require("../../plain/number"),name="nthRoot",dependencies=["typed","matrix","equalScalar","BigNumber"],createNthRoot=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,_BigNumber=_ref.BigNumber,algorithm01=(0,_algorithm.createAlgorithm01)({typed:typed}),algorithm02=(0,_algorithm2.createAlgorithm02)({typed:typed,equalScalar:equalScalar}),algorithm06=(0,_algorithm3.createAlgorithm06)({typed:typed,equalScalar:equalScalar}),algorithm11=(0,_algorithm4.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm13=(0,_algorithm5.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm6.createAlgorithm14)({typed:typed}),complexErr="Complex number not supported in function nthRoot. Use nthRoots instead.",nthRoot=typed(name,{number:function(x){return(0,_number.nthRootNumber)(x,2)},"number, number":_number.nthRootNumber,BigNumber:function(x){return _bigNthRoot(x,new _BigNumber(2))},Complex:function(){throw new Error(complexErr)},"Complex, number":function(){throw new Error(complexErr)},"BigNumber, BigNumber":_bigNthRoot,"Array | Matrix":function(x){return nthRoot(x,2)},"SparseMatrix, SparseMatrix":function(x,y){if(1===y.density())return algorithm06(x,y,nthRoot);throw new Error("Root must be non-zero")},"SparseMatrix, DenseMatrix":function(x,y){return algorithm02(y,x,nthRoot,!0)},"DenseMatrix, SparseMatrix":function(x,y){if(1===y.density())return algorithm01(x,y,nthRoot,!1);throw new Error("Root must be non-zero")},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,nthRoot)},"Array, Array":function(x,y){return nthRoot(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return nthRoot(matrix(x),y)},"Matrix, Array":function(x,y){return nthRoot(x,matrix(y))},"SparseMatrix, number | BigNumber":function(x,y){return algorithm11(x,y,nthRoot,!1)},"DenseMatrix, number | BigNumber":function(x,y){return algorithm14(x,y,nthRoot,!1)},"number | BigNumber, SparseMatrix":function(x,y){if(1===y.density())return algorithm11(y,x,nthRoot,!0);throw new Error("Root must be non-zero")},"number | BigNumber, DenseMatrix":function(x,y){return algorithm14(y,x,nthRoot,!0)},"Array, number | BigNumber":function(x,y){return nthRoot(matrix(x),y).valueOf()},"number | BigNumber, Array":function(x,y){return nthRoot(x,matrix(y)).valueOf()}});return nthRoot;function _bigNthRoot(a,root){var precision=_BigNumber.precision,Big=_BigNumber.clone({precision:precision+2}),zero=new _BigNumber(0),one=new Big(1),inv=root.isNegative();if(inv&&(root=root.neg()),root.isZero())throw new Error("Root must be non-zero");if(a.isNegative()&&!root.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(a.isZero())return inv?new Big(1/0):0;if(!a.isFinite())return inv?zero:a;var x=a.abs().pow(one.div(root)),x=a.isNeg()?x.neg():x;return new _BigNumber((inv?one.div(x):x).toPrecision(precision))}});exports.createNthRoot=createNthRoot;var createNthRootNumber=(0,_factory.factory)(name,["typed"],function(_ref2){return(0,_ref2.typed)(name,{number:_number.nthRootNumber,"number, number":_number.nthRootNumber})});exports.createNthRootNumber=createNthRootNumber},{"../../plain/number":874,"../../type/matrix/utils/algorithm01":900,"../../type/matrix/utils/algorithm02":901,"../../type/matrix/utils/algorithm06":905,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],718:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNthRoots=void 0;var _factory=require("../../utils/factory"),dependencies=["config","typed","divideScalar","Complex"],createNthRoots=(0,_factory.factory)("nthRoots",dependencies,function(_ref){var typed=_ref.typed,Complex=(_ref.config,_ref.divideScalar,_ref.Complex),nthRoots=typed("nthRoots",{Complex:function(x){return _nthComplexRoots(x,2)},"Complex, number":_nthComplexRoots}),_calculateExactResult=[function(val){return new Complex(val,0)},function(val){return new Complex(0,val)},function(val){return new Complex(-val,0)},function(val){return new Complex(0,-val)}];function _nthComplexRoots(a,root){if(root<0)throw new Error("Root must be greater than zero");if(0===root)throw new Error("Root must be non-zero");if(root%1!=0)throw new Error("Root must be an integer");if(0===a||0===a.abs())return[new Complex(0,0)];var offset,aIsNumeric="number"==typeof a;!aIsNumeric&&0!==a.re&&0!==a.im||(offset=aIsNumeric?2*(a<0):0===a.im?2*(a.re<0):2*(a.im<0)+1);for(var arg=a.arg(),abs=a.abs(),roots=[],r=Math.pow(abs,1/root),k=0;k<root;k++){var halfPiFactor=(offset+4*k)/root;halfPiFactor!==Math.round(halfPiFactor)?roots.push(new Complex({r:r,phi:(arg+2*Math.PI*k)/root})):roots.push(_calculateExactResult[halfPiFactor%4](r))}return roots}return nthRoots});exports.createNthRoots=createNthRoots},{"../../utils/factory":931}],719:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPow=void 0;var _factory=require("../../utils/factory"),_number=require("../../utils/number"),_array=require("../../utils/array"),_number2=require("../../plain/number"),dependencies=["typed","config","identity","multiply","matrix","fraction","number","Complex"],createPow=(0,_factory.factory)("pow",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,identity=_ref.identity,multiply=_ref.multiply,matrix=_ref.matrix,number=_ref.number,fraction=_ref.fraction,Complex=_ref.Complex;return typed("pow",{"number, number":_pow,"Complex, Complex":function(x,y){return x.pow(y)},"BigNumber, BigNumber":function(x,y){return y.isInteger()||0<=x||config.predictable?x.pow(y):new Complex(x.toNumber(),0).pow(y.toNumber(),0)},"Fraction, Fraction":function(x,y){if(1===y.d)return x.pow(y);if(config.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return _pow(x.valueOf(),y.valueOf())},"Array, number":_powArray,"Array, BigNumber":function(x,y){return _powArray(x,y.toNumber())},"Matrix, number":_powMatrix,"Matrix, BigNumber":function(x,y){return _powMatrix(x,y.toNumber())},"Unit, number | BigNumber":function(x,y){return x.pow(y)}});function _pow(x,y){if(config.predictable&&!(0,_number.isInteger)(y)&&x<0)try{var yFrac=fraction(y),yNum=number(yFrac);if((y===yNum||Math.abs((y-yNum)/y)<1e-14)&&yFrac.d%2==1)return(yFrac.n%2==0?1:-1)*Math.pow(-x,y)}catch(ex){}return config.predictable&&(x<-1&&y===1/0||-1<x&&x<0&&y===-1/0)?NaN:(0,_number.isInteger)(y)||0<=x||config.predictable?(0,_number2.powNumber)(x,y):x*x<1&&y===1/0||1<x*x&&y===-1/0?0:new Complex(x,0).pow(y,0)}function _powArray(x,y){if(!(0,_number.isInteger)(y)||y<0)throw new TypeError("For A^b, b must be a positive integer (value is "+y+")");var s=(0,_array.arraySize)(x);if(2!==s.length)throw new Error("For A^b, A must be 2 dimensional (A has "+s.length+" dimensions)");if(s[0]!==s[1])throw new Error("For A^b, A must be square (size is "+s[0]+"x"+s[1]+")");for(var res=identity(s[0]).valueOf(),px=x;1<=y;)1==(1&y)&&(res=multiply(px,res)),y>>=1,px=multiply(px,px);return res}function _powMatrix(x,y){return matrix(_powArray(x.valueOf(),y))}});exports.createPow=createPow},{"../../plain/number":874,"../../utils/array":922,"../../utils/factory":931,"../../utils/number":937}],720:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRoundNumber=exports.createRound=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../utils/number"),_algorithm=require("../../type/matrix/utils/algorithm11"),_algorithm2=require("../../type/matrix/utils/algorithm12"),_algorithm3=require("../../type/matrix/utils/algorithm14"),_number2=require("../../plain/number");function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}var NO_INT="Number of decimals in function round must be an integer",dependencies=["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],createRound=(0,_factory.factory)("round",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,zeros=_ref.zeros,BigNumber=_ref.BigNumber,DenseMatrix=_ref.DenseMatrix,algorithm11=(0,_algorithm.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm12=(0,_algorithm2.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm14=(0,_algorithm3.createAlgorithm14)({typed:typed}),round=typed("round",_objectSpread(_objectSpread({},roundNumberSignatures),{},{Complex:function(x){return x.round()},"Complex, number":function(x,n){if(n%1)throw new TypeError(NO_INT);return x.round(n)},"Complex, BigNumber":function(x,n){if(!n.isInteger())throw new TypeError(NO_INT);var _n=n.toNumber();return x.round(_n)},"number, BigNumber":function(x,n){if(!n.isInteger())throw new TypeError(NO_INT);return new BigNumber(x).toDecimalPlaces(n.toNumber())},BigNumber:function(x){return x.toDecimalPlaces(0)},"BigNumber, BigNumber":function(x,n){if(!n.isInteger())throw new TypeError(NO_INT);return x.toDecimalPlaces(n.toNumber())},Fraction:function(x){return x.round()},"Fraction, number":function(x,n){if(n%1)throw new TypeError(NO_INT);return x.round(n)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,round,!0)},"SparseMatrix, number | BigNumber":function(x,y){return algorithm11(x,y,round,!1)},"DenseMatrix, number | BigNumber":function(x,y){return algorithm14(x,y,round,!1)},"number | Complex | BigNumber, SparseMatrix":function(x,y){return equalScalar(x,0)?zeros(y.size(),y.storage()):algorithm12(y,x,round,!0)},"number | Complex | BigNumber, DenseMatrix":function(x,y){return equalScalar(x,0)?zeros(y.size(),y.storage()):algorithm14(y,x,round,!0)},"Array, number | BigNumber":function(x,y){return algorithm14(matrix(x),y,round,!1).valueOf()},"number | Complex | BigNumber, Array":function(x,y){return algorithm14(matrix(y),x,round,!0).valueOf()}}));return round});exports.createRound=createRound;var roundNumberSignatures={number:_number2.roundNumber,"number, number":function(x,n){if(!(0,_number.isInteger)(n))throw new TypeError(NO_INT);if(n<0||15<n)throw new Error("Number of decimals in function round must be in te range of 0-15");return(0,_number2.roundNumber)(x,n)}},createRoundNumber=(0,_factory.factory)("round",["typed"],function(_ref2){return(0,_ref2.typed)("round",roundNumberSignatures)});exports.createRoundNumber=createRoundNumber},{"../../plain/number":874,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm14":913,"../../utils/collection":927,"../../utils/factory":931,"../../utils/number":937}],721:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSign=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","BigNumber","Fraction","complex"],createSign=(0,_factory.factory)("sign",dependencies,function(_ref){var typed=_ref.typed,_BigNumber=_ref.BigNumber,complex=_ref.complex,_Fraction=_ref.Fraction,sign=typed("sign",{number:_number.signNumber,Complex:function(x){return 0===x.im?complex((0,_number.signNumber)(x.re)):x.sign()},BigNumber:function(x){return new _BigNumber(x.cmp(0))},Fraction:function(x){return new _Fraction(x.s,1)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,sign,!0)},Unit:function(x){return sign(x.value)}});return sign});exports.createSign=createSign},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],722:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSqrt=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),dependencies=["config","typed","Complex"],createSqrt=(0,_factory.factory)("sqrt",dependencies,function(_ref){var config=_ref.config,typed=_ref.typed,Complex=_ref.Complex,sqrt=typed("sqrt",{number:_sqrtNumber,Complex:function(x){return x.sqrt()},BigNumber:function(x){return!x.isNegative()||config.predictable?x.sqrt():_sqrtNumber(x.toNumber())},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,sqrt,!0)},Unit:function(x){return x.pow(.5)}});function _sqrtNumber(x){return isNaN(x)?NaN:0<=x||config.predictable?Math.sqrt(x):new Complex(x,0).sqrt()}return sqrt});exports.createSqrt=createSqrt},{"../../utils/collection":927,"../../utils/factory":931}],723:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSquare=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed"],createSquare=(0,_factory.factory)("square",dependencies,function(_ref){var square=(0,_ref.typed)("square",{number:_number.squareNumber,Complex:function(x){return x.mul(x)},BigNumber:function(x){return x.times(x)},Fraction:function(x){return x.mul(x)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,square,!0)},Unit:function(x){return x.pow(2)}});return square});exports.createSquare=createSquare},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],724:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSubtract=void 0;var _factory=require("../../utils/factory"),_DimensionError=require("../../error/DimensionError"),_algorithm=require("../../type/matrix/utils/algorithm01"),_algorithm2=require("../../type/matrix/utils/algorithm03"),_algorithm3=require("../../type/matrix/utils/algorithm05"),_algorithm4=require("../../type/matrix/utils/algorithm10"),_algorithm5=require("../../type/matrix/utils/algorithm13"),_algorithm6=require("../../type/matrix/utils/algorithm14"),dependencies=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],createSubtract=(0,_factory.factory)("subtract",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,addScalar=_ref.addScalar,unaryMinus=_ref.unaryMinus,DenseMatrix=_ref.DenseMatrix,algorithm01=(0,_algorithm.createAlgorithm01)({typed:typed}),algorithm03=(0,_algorithm2.createAlgorithm03)({typed:typed}),algorithm05=(0,_algorithm3.createAlgorithm05)({typed:typed,equalScalar:equalScalar}),algorithm10=(0,_algorithm4.createAlgorithm10)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm5.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm6.createAlgorithm14)({typed:typed}),subtract=typed("subtract",{"number, number":function(x,y){return x-y},"Complex, Complex":function(x,y){return x.sub(y)},"BigNumber, BigNumber":function(x,y){return x.minus(y)},"Fraction, Fraction":function(x,y){return x.sub(y)},"Unit, Unit":function(x,y){if(null===x.value)throw new Error("Parameter x contains a unit with undefined value");if(null===y.value)throw new Error("Parameter y contains a unit with undefined value");if(!x.equalBase(y))throw new Error("Units do not match");var res=x.clone();return res.value=subtract(res.value,y.value),res.fixPrefix=!1,res},"SparseMatrix, SparseMatrix":function(x,y){return checkEqualDimensions(x,y),algorithm05(x,y,subtract)},"SparseMatrix, DenseMatrix":function(x,y){return checkEqualDimensions(x,y),algorithm03(y,x,subtract,!0)},"DenseMatrix, SparseMatrix":function(x,y){return checkEqualDimensions(x,y),algorithm01(x,y,subtract,!1)},"DenseMatrix, DenseMatrix":function(x,y){return checkEqualDimensions(x,y),algorithm13(x,y,subtract)},"Array, Array":function(x,y){return subtract(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return subtract(matrix(x),y)},"Matrix, Array":function(x,y){return subtract(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm10(x,unaryMinus(y),addScalar)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,subtract)},"any, SparseMatrix":function(x,y){return algorithm10(y,x,subtract,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,subtract,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,subtract,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,subtract,!0).valueOf()}});return subtract});function checkEqualDimensions(x,y){var xsize=x.size(),ysize=y.size();if(xsize.length!==ysize.length)throw new _DimensionError.DimensionError(xsize.length,ysize.length)}exports.createSubtract=createSubtract},{"../../error/DimensionError":399,"../../type/matrix/utils/algorithm01":900,"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm05":904,"../../type/matrix/utils/algorithm10":909,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],725:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUnaryMinus=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed"],createUnaryMinus=(0,_factory.factory)("unaryMinus",dependencies,function(_ref){var unaryMinus=(0,_ref.typed)("unaryMinus",{number:_number.unaryMinusNumber,Complex:function(x){return x.neg()},BigNumber:function(x){return x.neg()},Fraction:function(x){return x.neg()},Unit:function(x){var res=x.clone();return res.value=unaryMinus(x.value),res},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,unaryMinus,!0)}});return unaryMinus});exports.createUnaryMinus=createUnaryMinus},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],726:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUnaryPlus=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","config","BigNumber"],createUnaryPlus=(0,_factory.factory)("unaryPlus",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,BigNumber=_ref.BigNumber,unaryPlus=typed("unaryPlus",{number:_number.unaryPlusNumber,Complex:function(x){return x},BigNumber:function(x){return x},Fraction:function(x){return x},Unit:function(x){return x.clone()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,unaryPlus,!0)},"boolean | string":function(x){return"BigNumber"===config.number?new BigNumber(+x):+x}});return unaryPlus});exports.createUnaryPlus=createUnaryPlus},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],727:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createXgcd=void 0;var _factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed","config","matrix","BigNumber"],createXgcd=(0,_factory.factory)("xgcd",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,matrix=_ref.matrix,BigNumber=_ref.BigNumber;return typed("xgcd",{"number, number":function(a,b){var res=(0,_number.xgcdNumber)(a,b);return"Array"===config.matrix?res:matrix(res)},"BigNumber, BigNumber":function(a,b){var t,q,r,res,zero=new BigNumber(0),one=new BigNumber(1),x=zero,lastx=one,y=one,lasty=zero;if(!a.isInt()||!b.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!b.isZero();)q=a.div(b).floor(),r=a.mod(b),t=x,x=lastx.minus(q.times(x)),lastx=t,t=y,y=lasty.minus(q.times(y)),lasty=t,a=b,b=r;res=a.lt(zero)?[a.neg(),lastx.neg(),lasty.neg()]:[a,a.isZero()?0:lastx,lasty];return"Array"===config.matrix?res:matrix(res)}})});exports.createXgcd=createXgcd},{"../../plain/number":874,"../../utils/factory":931}],728:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBitAnd=void 0;var _bitwise=require("../../utils/bignumber/bitwise"),_algorithm=require("../../type/matrix/utils/algorithm02"),_algorithm2=require("../../type/matrix/utils/algorithm11"),_algorithm3=require("../../type/matrix/utils/algorithm13"),_algorithm4=require("../../type/matrix/utils/algorithm14"),_algorithm5=require("../../type/matrix/utils/algorithm06"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed","matrix","equalScalar"],createBitAnd=(0,_factory.factory)("bitAnd",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,algorithm02=(0,_algorithm.createAlgorithm02)({typed:typed,equalScalar:equalScalar}),algorithm06=(0,_algorithm5.createAlgorithm06)({typed:typed,equalScalar:equalScalar}),algorithm11=(0,_algorithm2.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm13=(0,_algorithm3.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm4.createAlgorithm14)({typed:typed}),bitAnd=typed("bitAnd",{"number, number":_number.bitAndNumber,"BigNumber, BigNumber":_bitwise.bitAndBigNumber,"SparseMatrix, SparseMatrix":function(x,y){return algorithm06(x,y,bitAnd,!1)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm02(y,x,bitAnd,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm02(x,y,bitAnd,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,bitAnd)},"Array, Array":function(x,y){return bitAnd(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return bitAnd(matrix(x),y)},"Matrix, Array":function(x,y){return bitAnd(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm11(x,y,bitAnd,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,bitAnd,!1)},"any, SparseMatrix":function(x,y){return algorithm11(y,x,bitAnd,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,bitAnd,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,bitAnd,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,bitAnd,!0).valueOf()}});return bitAnd});exports.createBitAnd=createBitAnd},{"../../plain/number":874,"../../type/matrix/utils/algorithm02":901,"../../type/matrix/utils/algorithm06":905,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/bignumber/bitwise":923,"../../utils/factory":931}],729:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBitNot=void 0;var _bitwise=require("../../utils/bignumber/bitwise"),_collection=require("../../utils/collection"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed"],createBitNot=(0,_factory.factory)("bitNot",dependencies,function(_ref){var bitNot=(0,_ref.typed)("bitNot",{number:_number.bitNotNumber,BigNumber:_bitwise.bitNotBigNumber,"Array | Matrix":function(x){return(0,_collection.deepMap)(x,bitNot)}});return bitNot});exports.createBitNot=createBitNot},{"../../plain/number":874,"../../utils/bignumber/bitwise":923,"../../utils/collection":927,"../../utils/factory":931}],730:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBitOr=void 0;var _bitwise=require("../../utils/bignumber/bitwise"),_factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm14"),_algorithm2=require("../../type/matrix/utils/algorithm13"),_algorithm3=require("../../type/matrix/utils/algorithm10"),_algorithm4=require("../../type/matrix/utils/algorithm04"),_algorithm5=require("../../type/matrix/utils/algorithm01"),_number=require("../../plain/number"),dependencies=["typed","matrix","equalScalar","DenseMatrix"],createBitOr=(0,_factory.factory)("bitOr",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,DenseMatrix=_ref.DenseMatrix,algorithm01=(0,_algorithm5.createAlgorithm01)({typed:typed}),algorithm04=(0,_algorithm4.createAlgorithm04)({typed:typed,equalScalar:equalScalar}),algorithm10=(0,_algorithm3.createAlgorithm10)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm2.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm.createAlgorithm14)({typed:typed}),bitOr=typed("bitOr",{"number, number":_number.bitOrNumber,"BigNumber, BigNumber":_bitwise.bitOrBigNumber,"SparseMatrix, SparseMatrix":function(x,y){return algorithm04(x,y,bitOr)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm01(y,x,bitOr,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm01(x,y,bitOr,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,bitOr)},"Array, Array":function(x,y){return bitOr(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return bitOr(matrix(x),y)},"Matrix, Array":function(x,y){return bitOr(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm10(x,y,bitOr,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,bitOr,!1)},"any, SparseMatrix":function(x,y){return algorithm10(y,x,bitOr,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,bitOr,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,bitOr,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,bitOr,!0).valueOf()}});return bitOr});exports.createBitOr=createBitOr},{"../../plain/number":874,"../../type/matrix/utils/algorithm01":900,"../../type/matrix/utils/algorithm04":903,"../../type/matrix/utils/algorithm10":909,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/bignumber/bitwise":923,"../../utils/factory":931}],731:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBitXor=void 0;var _bitwise=require("../../utils/bignumber/bitwise"),_algorithm=require("../../type/matrix/utils/algorithm03"),_algorithm2=require("../../type/matrix/utils/algorithm07"),_algorithm3=require("../../type/matrix/utils/algorithm12"),_algorithm4=require("../../type/matrix/utils/algorithm13"),_algorithm5=require("../../type/matrix/utils/algorithm14"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed","matrix","DenseMatrix"],createBitXor=(0,_factory.factory)("bitXor",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,DenseMatrix=_ref.DenseMatrix,algorithm03=(0,_algorithm.createAlgorithm03)({typed:typed}),algorithm07=(0,_algorithm2.createAlgorithm07)({typed:typed,DenseMatrix:DenseMatrix}),algorithm12=(0,_algorithm3.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm4.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm5.createAlgorithm14)({typed:typed}),bitXor=typed("bitXor",{"number, number":_number.bitXorNumber,"BigNumber, BigNumber":_bitwise.bitXor,"SparseMatrix, SparseMatrix":function(x,y){return algorithm07(x,y,bitXor)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm03(y,x,bitXor,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,bitXor,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,bitXor)},"Array, Array":function(x,y){return bitXor(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return bitXor(matrix(x),y)},"Matrix, Array":function(x,y){return bitXor(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm12(x,y,bitXor,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,bitXor,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,bitXor,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,bitXor,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,bitXor,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,bitXor,!0).valueOf()}});return bitXor});exports.createBitXor=createBitXor},{"../../plain/number":874,"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm07":906,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/bignumber/bitwise":923,"../../utils/factory":931}],732:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLeftShift=void 0;var _algorithm=require("../../type/matrix/utils/algorithm02"),_algorithm2=require("../../type/matrix/utils/algorithm11"),_algorithm3=require("../../type/matrix/utils/algorithm13"),_algorithm4=require("../../type/matrix/utils/algorithm14"),_algorithm5=require("../../type/matrix/utils/algorithm01"),_algorithm6=require("../../type/matrix/utils/algorithm10"),_algorithm7=require("../../type/matrix/utils/algorithm08"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),_bitwise=require("../../utils/bignumber/bitwise"),dependencies=["typed","matrix","equalScalar","zeros","DenseMatrix"],createLeftShift=(0,_factory.factory)("leftShift",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,zeros=_ref.zeros,DenseMatrix=_ref.DenseMatrix,algorithm01=(0,_algorithm5.createAlgorithm01)({typed:typed}),algorithm02=(0,_algorithm.createAlgorithm02)({typed:typed,equalScalar:equalScalar}),algorithm08=(0,_algorithm7.createAlgorithm08)({typed:typed,equalScalar:equalScalar}),algorithm10=(0,_algorithm6.createAlgorithm10)({typed:typed,DenseMatrix:DenseMatrix}),algorithm11=(0,_algorithm2.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm13=(0,_algorithm3.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm4.createAlgorithm14)({typed:typed}),leftShift=typed("leftShift",{"number, number":_number.leftShiftNumber,"BigNumber, BigNumber":_bitwise.leftShiftBigNumber,"SparseMatrix, SparseMatrix":function(x,y){return algorithm08(x,y,leftShift,!1)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm02(y,x,leftShift,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm01(x,y,leftShift,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,leftShift)},"Array, Array":function(x,y){return leftShift(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return leftShift(matrix(x),y)},"Matrix, Array":function(x,y){return leftShift(x,matrix(y))},"SparseMatrix, number | BigNumber":function(x,y){return equalScalar(y,0)?x.clone():algorithm11(x,y,leftShift,!1)},"DenseMatrix, number | BigNumber":function(x,y){return equalScalar(y,0)?x.clone():algorithm14(x,y,leftShift,!1)},"number | BigNumber, SparseMatrix":function(x,y){return equalScalar(x,0)?zeros(y.size(),y.storage()):algorithm10(y,x,leftShift,!0)},"number | BigNumber, DenseMatrix":function(x,y){return equalScalar(x,0)?zeros(y.size(),y.storage()):algorithm14(y,x,leftShift,!0)},"Array, number | BigNumber":function(x,y){return leftShift(matrix(x),y).valueOf()},"number | BigNumber, Array":function(x,y){return leftShift(x,matrix(y)).valueOf()}});return leftShift});exports.createLeftShift=createLeftShift},{"../../plain/number":874,"../../type/matrix/utils/algorithm01":900,"../../type/matrix/utils/algorithm02":901,"../../type/matrix/utils/algorithm08":907,"../../type/matrix/utils/algorithm10":909,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/bignumber/bitwise":923,"../../utils/factory":931}],733:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRightArithShift=void 0;var _bitwise=require("../../utils/bignumber/bitwise"),_algorithm=require("../../type/matrix/utils/algorithm02"),_algorithm2=require("../../type/matrix/utils/algorithm11"),_algorithm3=require("../../type/matrix/utils/algorithm13"),_algorithm4=require("../../type/matrix/utils/algorithm14"),_algorithm5=require("../../type/matrix/utils/algorithm01"),_algorithm6=require("../../type/matrix/utils/algorithm10"),_algorithm7=require("../../type/matrix/utils/algorithm08"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),name="rightArithShift",dependencies=["typed","matrix","equalScalar","zeros","DenseMatrix"],createRightArithShift=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,zeros=_ref.zeros,DenseMatrix=_ref.DenseMatrix,algorithm01=(0,_algorithm5.createAlgorithm01)({typed:typed}),algorithm02=(0,_algorithm.createAlgorithm02)({typed:typed,equalScalar:equalScalar}),algorithm08=(0,_algorithm7.createAlgorithm08)({typed:typed,equalScalar:equalScalar}),algorithm10=(0,_algorithm6.createAlgorithm10)({typed:typed,DenseMatrix:DenseMatrix}),algorithm11=(0,_algorithm2.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm13=(0,_algorithm3.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm4.createAlgorithm14)({typed:typed}),rightArithShift=typed(name,{"number, number":_number.rightArithShiftNumber,"BigNumber, BigNumber":_bitwise.rightArithShiftBigNumber,"SparseMatrix, SparseMatrix":function(x,y){return algorithm08(x,y,rightArithShift,!1)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm02(y,x,rightArithShift,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm01(x,y,rightArithShift,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,rightArithShift)},"Array, Array":function(x,y){return rightArithShift(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return rightArithShift(matrix(x),y)},"Matrix, Array":function(x,y){return rightArithShift(x,matrix(y))},"SparseMatrix, number | BigNumber":function(x,y){return equalScalar(y,0)?x.clone():algorithm11(x,y,rightArithShift,!1)},"DenseMatrix, number | BigNumber":function(x,y){return equalScalar(y,0)?x.clone():algorithm14(x,y,rightArithShift,!1)},"number | BigNumber, SparseMatrix":function(x,y){return equalScalar(x,0)?zeros(y.size(),y.storage()):algorithm10(y,x,rightArithShift,!0)},"number | BigNumber, DenseMatrix":function(x,y){return equalScalar(x,0)?zeros(y.size(),y.storage()):algorithm14(y,x,rightArithShift,!0)},"Array, number | BigNumber":function(x,y){return rightArithShift(matrix(x),y).valueOf()},"number | BigNumber, Array":function(x,y){return rightArithShift(x,matrix(y)).valueOf()}});return rightArithShift});exports.createRightArithShift=createRightArithShift},{"../../plain/number":874,"../../type/matrix/utils/algorithm01":900,"../../type/matrix/utils/algorithm02":901,"../../type/matrix/utils/algorithm08":907,"../../type/matrix/utils/algorithm10":909,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/bignumber/bitwise":923,"../../utils/factory":931}],734:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRightLogShift=void 0;var _algorithm=require("../../type/matrix/utils/algorithm02"),_algorithm2=require("../../type/matrix/utils/algorithm11"),_algorithm3=require("../../type/matrix/utils/algorithm13"),_algorithm4=require("../../type/matrix/utils/algorithm14"),_algorithm5=require("../../type/matrix/utils/algorithm01"),_algorithm6=require("../../type/matrix/utils/algorithm10"),_algorithm7=require("../../type/matrix/utils/algorithm08"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),name="rightLogShift",dependencies=["typed","matrix","equalScalar","zeros","DenseMatrix"],createRightLogShift=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,zeros=_ref.zeros,DenseMatrix=_ref.DenseMatrix,algorithm01=(0,_algorithm5.createAlgorithm01)({typed:typed}),algorithm02=(0,_algorithm.createAlgorithm02)({typed:typed,equalScalar:equalScalar}),algorithm08=(0,_algorithm7.createAlgorithm08)({typed:typed,equalScalar:equalScalar}),algorithm10=(0,_algorithm6.createAlgorithm10)({typed:typed,DenseMatrix:DenseMatrix}),algorithm11=(0,_algorithm2.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm13=(0,_algorithm3.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm4.createAlgorithm14)({typed:typed}),rightLogShift=typed(name,{"number, number":_number.rightLogShiftNumber,"SparseMatrix, SparseMatrix":function(x,y){return algorithm08(x,y,rightLogShift,!1)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm02(y,x,rightLogShift,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm01(x,y,rightLogShift,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,rightLogShift)},"Array, Array":function(x,y){return rightLogShift(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return rightLogShift(matrix(x),y)},"Matrix, Array":function(x,y){return rightLogShift(x,matrix(y))},"SparseMatrix, number | BigNumber":function(x,y){return equalScalar(y,0)?x.clone():algorithm11(x,y,rightLogShift,!1)},"DenseMatrix, number | BigNumber":function(x,y){return equalScalar(y,0)?x.clone():algorithm14(x,y,rightLogShift,!1)},"number | BigNumber, SparseMatrix":function(x,y){return equalScalar(x,0)?zeros(y.size(),y.storage()):algorithm10(y,x,rightLogShift,!0)},"number | BigNumber, DenseMatrix":function(x,y){return equalScalar(x,0)?zeros(y.size(),y.storage()):algorithm14(y,x,rightLogShift,!0)},"Array, number | BigNumber":function(x,y){return rightLogShift(matrix(x),y).valueOf()},"number | BigNumber, Array":function(x,y){return rightLogShift(x,matrix(y)).valueOf()}});return rightLogShift});exports.createRightLogShift=createRightLogShift},{"../../plain/number":874,"../../type/matrix/utils/algorithm01":900,"../../type/matrix/utils/algorithm02":901,"../../type/matrix/utils/algorithm08":907,"../../type/matrix/utils/algorithm10":909,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],735:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBellNumbers=void 0;var _factory=require("../../utils/factory"),dependencies=["typed","addScalar","isNegative","isInteger","stirlingS2"],createBellNumbers=(0,_factory.factory)("bellNumbers",dependencies,function(_ref){var typed=_ref.typed,addScalar=_ref.addScalar,isNegative=_ref.isNegative,isInteger=_ref.isInteger,stirlingS2=_ref.stirlingS2;return typed("bellNumbers",{"number | BigNumber":function(n){if(!isInteger(n)||isNegative(n))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var result=0,i=0;i<=n;i++)result=addScalar(result,stirlingS2(n,i));return result}})});exports.createBellNumbers=createBellNumbers},{"../../utils/factory":931}],736:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCatalan=void 0;var _factory=require("../../utils/factory"),dependencies=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],createCatalan=(0,_factory.factory)("catalan",dependencies,function(_ref){var typed=_ref.typed,addScalar=_ref.addScalar,divideScalar=_ref.divideScalar,multiplyScalar=_ref.multiplyScalar,combinations=_ref.combinations,isNegative=_ref.isNegative,isInteger=_ref.isInteger;return typed("catalan",{"number | BigNumber":function(n){if(!isInteger(n)||isNegative(n))throw new TypeError("Non-negative integer value expected in function catalan");return divideScalar(combinations(multiplyScalar(n,2),n),addScalar(n,1))}})});exports.createCatalan=createCatalan},{"../../utils/factory":931}],737:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createComposition=void 0;var _factory=require("../../utils/factory"),dependencies=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],createComposition=(0,_factory.factory)("composition",dependencies,function(_ref){var typed=_ref.typed,addScalar=_ref.addScalar,combinations=_ref.combinations,isPositive=_ref.isPositive,isInteger=(_ref.isNegative,_ref.isInteger),larger=_ref.larger;return typed("composition",{"number | BigNumber, number | BigNumber":function(n,k){if(!(isInteger(n)&&isPositive(n)&&isInteger(k)&&isPositive(k)))throw new TypeError("Positive integer value expected in function composition");if(larger(k,n))throw new TypeError("k must be less than or equal to n in function composition");return combinations(addScalar(n,-1),addScalar(k,-1))}})});exports.createComposition=createComposition},{"../../utils/factory":931}],738:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStirlingS2=void 0;var _factory=require("../../utils/factory"),dependencies=["typed","addScalar","subtract","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","larger"],createStirlingS2=(0,_factory.factory)("stirlingS2",dependencies,function(_ref){var typed=_ref.typed,addScalar=_ref.addScalar,subtract=_ref.subtract,multiplyScalar=_ref.multiplyScalar,divideScalar=_ref.divideScalar,pow=_ref.pow,factorial=_ref.factorial,combinations=_ref.combinations,isNegative=_ref.isNegative,isInteger=_ref.isInteger,larger=_ref.larger;return typed("stirlingS2",{"number | BigNumber, number | BigNumber":function(n,k){if(!isInteger(n)||isNegative(n)||!isInteger(k)||isNegative(k))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(larger(k,n))throw new TypeError("k must be less than or equal to n in function stirlingS2");for(var kFactorial=factorial(k),result=0,i=0;i<=k;i++)var negativeOne=pow(-1,subtract(k,i)),kChooseI=combinations(k,i),iPower=pow(i,n),result=addScalar(result,multiplyScalar(multiplyScalar(kChooseI,iPower),negativeOne));return divideScalar(result,kFactorial)}})});exports.createStirlingS2=createStirlingS2},{"../../utils/factory":931}],739:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createArg=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),dependencies=["typed"],createArg=(0,_factory.factory)("arg",dependencies,function(_ref){var arg=(0,_ref.typed)("arg",{number:function(x){return Math.atan2(0,x)},BigNumber:function(x){return x.constructor.atan2(0,x)},Complex:function(x){return x.arg()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,arg)}});return arg});exports.createArg=createArg},{"../../utils/collection":927,"../../utils/factory":931}],740:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConj=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),dependencies=["typed"],createConj=(0,_factory.factory)("conj",dependencies,function(_ref){var conj=(0,_ref.typed)("conj",{number:function(x){return x},BigNumber:function(x){return x},Complex:function(x){return x.conjugate()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,conj)}});return conj});exports.createConj=createConj},{"../../utils/collection":927,"../../utils/factory":931}],741:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIm=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),dependencies=["typed"],createIm=(0,_factory.factory)("im",dependencies,function(_ref){var im=(0,_ref.typed)("im",{number:function(){return 0},BigNumber:function(x){return x.mul(0)},Complex:function(x){return x.im},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,im)}});return im});exports.createIm=createIm},{"../../utils/collection":927,"../../utils/factory":931}],742:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRe=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),dependencies=["typed"],createRe=(0,_factory.factory)("re",dependencies,function(_ref){var re=(0,_ref.typed)("re",{number:function(x){return x},BigNumber:function(x){return x},Complex:function(x){return x.re},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,re)}});return re});exports.createRe=createRe},{"../../utils/collection":927,"../../utils/factory":931}],743:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDistance=void 0;var _is=require("../../utils/is"),_factory=require("../../utils/factory"),dependencies=["typed","addScalar","subtract","divideScalar","multiplyScalar","unaryMinus","sqrt","abs"],createDistance=(0,_factory.factory)("distance",dependencies,function(_ref){var typed=_ref.typed,addScalar=_ref.addScalar,subtract=_ref.subtract,multiplyScalar=_ref.multiplyScalar,divideScalar=_ref.divideScalar,unaryMinus=_ref.unaryMinus,sqrt=_ref.sqrt,abs=_ref.abs;return typed("distance",{"Array, Array, Array":function(x,y,z){if(2!==x.length||2!==y.length||2!==z.length)throw new TypeError("Invalid Arguments: Try again");if(!_2d(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!_2d(y))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!_2d(z))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");var m=divideScalar(subtract(z[1],z[0]),subtract(y[1],y[0])),xCoeff=multiplyScalar(multiplyScalar(m,m),y[0]),yCoeff=unaryMinus(multiplyScalar(m,y[0])),constant=x[1];return _distancePointLine2D(x[0],x[1],xCoeff,yCoeff,constant)},"Object, Object, Object":function(x,y,z){if(2!==Object.keys(x).length||2!==Object.keys(y).length||2!==Object.keys(z).length)throw new TypeError("Invalid Arguments: Try again");if(!_2d(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!_2d(y))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!_2d(z))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"lineOnePtX"in y&&"lineOnePtY"in y&&"lineTwoPtX"in z&&"lineTwoPtY"in z){var m=divideScalar(subtract(z.lineTwoPtY,z.lineTwoPtX),subtract(y.lineOnePtY,y.lineOnePtX)),xCoeff=multiplyScalar(multiplyScalar(m,m),y.lineOnePtX),yCoeff=unaryMinus(multiplyScalar(m,y.lineOnePtX)),constant=x.pointX;return _distancePointLine2D(x.pointX,x.pointY,xCoeff,yCoeff,constant)}throw new TypeError("Key names do not match")},"Array, Array":function(x,y){if(2===x.length&&3===y.length){if(!_2d(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!_3d(y))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return _distancePointLine2D(x[0],x[1],y[0],y[1],y[2])}if(3===x.length&&6===y.length){if(!_3d(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!_parametricLine(y))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return _distancePointLine3D(x[0],x[1],x[2],y[0],y[1],y[2],y[3],y[4],y[5])}if(x.length===y.length&&0<x.length){if(!_containsOnlyNumbers(x))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!_containsOnlyNumbers(y))throw new TypeError("All values of an array should be numbers or BigNumbers");return _euclideanDistance(x,y)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(x,y){if(2===Object.keys(x).length&&3===Object.keys(y).length){if(!_2d(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!_3d(y))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"xCoeffLine"in y&&"yCoeffLine"in y&&"constant"in y)return _distancePointLine2D(x.pointX,x.pointY,y.xCoeffLine,y.yCoeffLine,y.constant);throw new TypeError("Key names do not match")}if(3===Object.keys(x).length&&6===Object.keys(y).length){if(!_3d(x))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!_parametricLine(y))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"x0"in y&&"y0"in y&&"z0"in y&&"a"in y&&"b"in y&&"c"in y)return _distancePointLine3D(x.pointX,x.pointY,x.pointZ,y.x0,y.y0,y.z0,y.a,y.b,y.c);throw new TypeError("Key names do not match")}if(2===Object.keys(x).length&&2===Object.keys(y).length){if(!_2d(x))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!_2d(y))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointTwoX"in y&&"pointTwoY"in y)return _euclideanDistance([x.pointOneX,x.pointOneY],[y.pointTwoX,y.pointTwoY]);throw new TypeError("Key names do not match")}if(3!==Object.keys(x).length||3!==Object.keys(y).length)throw new TypeError("Invalid Arguments: Try again");if(!_3d(x))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!_3d(y))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointOneZ"in x&&"pointTwoX"in y&&"pointTwoY"in y&&"pointTwoZ"in y)return _euclideanDistance([x.pointOneX,x.pointOneY,x.pointOneZ],[y.pointTwoX,y.pointTwoY,y.pointTwoZ]);throw new TypeError("Key names do not match")},Array:function(arr){if(!function(a){if(2===a[0].length&&_isNumber(a[0][0])&&_isNumber(a[0][1])){if(a.some(function(aI){return 2!==aI.length||!_isNumber(aI[0])||!_isNumber(aI[1])}))return!1}else{if(!(3===a[0].length&&_isNumber(a[0][0])&&_isNumber(a[0][1])&&_isNumber(a[0][2])))return!1;if(a.some(function(aI){return 3!==aI.length||!_isNumber(aI[0])||!_isNumber(aI[1])||!_isNumber(aI[2])}))return!1}return!0}(arr))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return function(a){for(var result=[],pointA=[],pointB=[],i=0;i<a.length-1;i++)for(var j=i+1;j<a.length;j++)2===a[0].length?(pointA=[a[i][0],a[i][1]],pointB=[a[j][0],a[j][1]]):3===a[0].length&&(pointA=[a[i][0],a[i][1],a[i][2]],pointB=[a[j][0],a[j][1],a[j][2]]),result.push(_euclideanDistance(pointA,pointB));return result}(arr)}});function _isNumber(a){return"number"==typeof a||(0,_is.isBigNumber)(a)}function _2d(a){return a.constructor!==Array&&(a=_objectToArray(a)),_isNumber(a[0])&&_isNumber(a[1])}function _3d(a){return a.constructor!==Array&&(a=_objectToArray(a)),_isNumber(a[0])&&_isNumber(a[1])&&_isNumber(a[2])}function _containsOnlyNumbers(a){return Array.isArray(a)||(a=_objectToArray(a)),a.every(_isNumber)}function _parametricLine(a){return a.constructor!==Array&&(a=_objectToArray(a)),_isNumber(a[0])&&_isNumber(a[1])&&_isNumber(a[2])&&_isNumber(a[3])&&_isNumber(a[4])&&_isNumber(a[5])}function _objectToArray(o){for(var keys=Object.keys(o),a=[],i=0;i<keys.length;i++)a.push(o[keys[i]]);return a}function _distancePointLine2D(x,y,a,b,c){var num=abs(addScalar(addScalar(multiplyScalar(a,x),multiplyScalar(b,y)),c)),den=sqrt(addScalar(multiplyScalar(a,a),multiplyScalar(b,b)));return divideScalar(num,den)}function _distancePointLine3D(x,y,z,x0,y0,z0,a,b,c){var num=[subtract(multiplyScalar(subtract(y0,y),c),multiplyScalar(subtract(z0,z),b)),subtract(multiplyScalar(subtract(z0,z),a),multiplyScalar(subtract(x0,x),c)),subtract(multiplyScalar(subtract(x0,x),b),multiplyScalar(subtract(y0,y),a))],num=sqrt(addScalar(addScalar(multiplyScalar(num[0],num[0]),multiplyScalar(num[1],num[1])),multiplyScalar(num[2],num[2]))),den=sqrt(addScalar(addScalar(multiplyScalar(a,a),multiplyScalar(b,b)),multiplyScalar(c,c)));return divideScalar(num,den)}function _euclideanDistance(x,y){for(var diff,vectorSize=x.length,result=0,i=0;i<vectorSize;i++)diff=subtract(x[i],y[i]),result=addScalar(multiplyScalar(diff,diff),result);return sqrt(result)}});exports.createDistance=createDistance},{"../../utils/factory":931,"../../utils/is":933}],744:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIntersect=void 0;var _is=require("../../utils/is"),dependencies=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar"],createIntersect=(0,require("../../utils/factory").factory)("intersect",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,abs=_ref.abs,add=_ref.add,addScalar=_ref.addScalar,matrix=_ref.matrix,multiply=_ref.multiply,multiplyScalar=_ref.multiplyScalar,divideScalar=_ref.divideScalar,subtract=_ref.subtract,smaller=_ref.smaller,equalScalar=_ref.equalScalar,intersect=typed("intersect",{"Array, Array, Array":function(x,y,plane){if(!_3d(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!_3d(y))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!function(x){return 4===x.length&&_isNumeric(x[0])&&_isNumeric(x[1])&&_isNumeric(x[2])&&_isNumeric(x[3])}(plane))throw new TypeError("Array with 4 numbers expected as third argument");return function(x1,y1,z1,x2,y2,z2,x,y,z,c){var x1x=multiplyScalar(x1,x),x2x=multiplyScalar(x2,x),y1y=multiplyScalar(y1,y),y2y=multiplyScalar(y2,y),z1z=multiplyScalar(z1,z),z2z=multiplyScalar(z2,z),t=divideScalar(subtract(subtract(subtract(c,x1x),y1y),z1z),subtract(subtract(subtract(addScalar(addScalar(x2x,y2y),z2z),x1x),y1y),z1z)),px=addScalar(x1,multiplyScalar(t,subtract(x2,x1))),py=addScalar(y1,multiplyScalar(t,subtract(y2,y1))),pz=addScalar(z1,multiplyScalar(t,subtract(z2,z1)));return[px,py,pz]}(x[0],x[1],x[2],y[0],y[1],y[2],plane[0],plane[1],plane[2],plane[3])},"Array, Array, Array, Array":function(w,x,y,z){if(2===w.length){if(!_2d(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!_2d(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!_2d(y))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!_2d(z))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(p1a,p1b,p2a,p2b){var o1=p1a,o2=p2a,d1=subtract(o1,p1b),d2=subtract(o2,p2b),det=subtract(multiplyScalar(d1[0],d2[1]),multiplyScalar(d2[0],d1[1]));if(smaller(abs(det),config.epsilon))return null;var d20o11=multiplyScalar(d2[0],o1[1]),d21o10=multiplyScalar(d2[1],o1[0]),d20o21=multiplyScalar(d2[0],o2[1]),d21o20=multiplyScalar(d2[1],o2[0]),t=divideScalar(addScalar(subtract(subtract(d20o11,d21o10),d20o21),d21o20),det);return add(multiply(d1,t),o1)}(w,x,y,z)}if(3!==w.length)throw new TypeError("Arrays with two or thee dimensional points expected");if(!_3d(w))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!_3d(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!_3d(y))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!_3d(z))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return x1=w[0],y1=w[1],z1=w[2],x2=x[0],y2=x[1],z2=x[2],x3=y[0],y3=y[1],z3=y[2],x4=z[0],y4=z[1],z4=z[2],d1343=_intersect3dHelper(x1,x3,x4,x3,y1,y3,y4,y3,z1,z3,z4,z3),d4321=_intersect3dHelper(x4,x3,x2,x1,y4,y3,y2,y1,z4,z3,z2,z1),d1321=_intersect3dHelper(x1,x3,x2,x1,y1,y3,y2,y1,z1,z3,z2,z1),d4343=_intersect3dHelper(x4,x3,x4,x3,y4,y3,y4,y3,z4,z3,z4,z3),d2121=_intersect3dHelper(x2,x1,x2,x1,y2,y1,y2,y1,z2,z1,z2,z1),ta=divideScalar(subtract(multiplyScalar(d1343,d4321),multiplyScalar(d1321,d4343)),subtract(multiplyScalar(d2121,d4343),multiplyScalar(d4321,d4321))),tb=divideScalar(addScalar(d1343,multiplyScalar(ta,d4321)),d4343),pax=addScalar(x1,multiplyScalar(ta,subtract(x2,x1))),pay=addScalar(y1,multiplyScalar(ta,subtract(y2,y1))),paz=addScalar(z1,multiplyScalar(ta,subtract(z2,z1))),pbx=addScalar(x3,multiplyScalar(tb,subtract(x4,x3))),pby=addScalar(y3,multiplyScalar(tb,subtract(y4,y3))),pbz=addScalar(z3,multiplyScalar(tb,subtract(z4,z3))),equalScalar(pax,pbx)&&equalScalar(pay,pby)&&equalScalar(paz,pbz)?[pax,pay,paz]:null;var x1,y1,z1,x2,y2,z2,x3,y3,z3,x4,y4,z4,d1343,d4321,d1321,d4343,d2121,ta,tb,pax,pay,paz,pbx,pby,pbz},"Matrix, Matrix, Matrix":function(x,y,plane){return matrix(intersect(x.valueOf(),y.valueOf(),plane.valueOf()))},"Matrix, Matrix, Matrix, Matrix":function(w,x,y,z){return matrix(intersect(w.valueOf(),x.valueOf(),y.valueOf(),z.valueOf()))}});function _isNumeric(a){return"number"==typeof a||(0,_is.isBigNumber)(a)}function _2d(x){return 2===x.length&&_isNumeric(x[0])&&_isNumeric(x[1])}function _3d(x){return 3===x.length&&_isNumeric(x[0])&&_isNumeric(x[1])&&_isNumeric(x[2])}function _intersect3dHelper(a,b,c,d,e,f,g,h,i,j,k,l){var add1=multiplyScalar(subtract(a,b),subtract(c,d)),add2=multiplyScalar(subtract(e,f),subtract(g,h)),add3=multiplyScalar(subtract(i,j),subtract(k,l));return addScalar(addScalar(add1,add2),add3)}return intersect});exports.createIntersect=createIntersect},{"../../utils/factory":931,"../../utils/is":933}],745:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAnd=void 0;var _algorithm=require("../../type/matrix/utils/algorithm02"),_algorithm2=require("../../type/matrix/utils/algorithm11"),_algorithm3=require("../../type/matrix/utils/algorithm13"),_algorithm4=require("../../type/matrix/utils/algorithm14"),_algorithm5=require("../../type/matrix/utils/algorithm06"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed","matrix","equalScalar","zeros","not"],createAnd=(0,_factory.factory)("and",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,zeros=_ref.zeros,not=_ref.not,algorithm02=(0,_algorithm.createAlgorithm02)({typed:typed,equalScalar:equalScalar}),algorithm06=(0,_algorithm5.createAlgorithm06)({typed:typed,equalScalar:equalScalar}),algorithm11=(0,_algorithm2.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm13=(0,_algorithm3.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm4.createAlgorithm14)({typed:typed}),and=typed("and",{"number, number":_number.andNumber,"Complex, Complex":function(x,y){return!(0===x.re&&0===x.im||0===y.re&&0===y.im)},"BigNumber, BigNumber":function(x,y){return!(x.isZero()||y.isZero()||x.isNaN()||y.isNaN())},"Unit, Unit":function(x,y){return and(x.value||0,y.value||0)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm06(x,y,and,!1)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm02(y,x,and,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm02(x,y,and,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,and)},"Array, Array":function(x,y){return and(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return and(matrix(x),y)},"Matrix, Array":function(x,y){return and(x,matrix(y))},"SparseMatrix, any":function(x,y){return not(y)?zeros(x.size(),x.storage()):algorithm11(x,y,and,!1)},"DenseMatrix, any":function(x,y){return not(y)?zeros(x.size(),x.storage()):algorithm14(x,y,and,!1)},"any, SparseMatrix":function(x,y){return not(x)?zeros(x.size(),x.storage()):algorithm11(y,x,and,!0)},"any, DenseMatrix":function(x,y){return not(x)?zeros(x.size(),x.storage()):algorithm14(y,x,and,!0)},"Array, any":function(x,y){return and(matrix(x),y).valueOf()},"any, Array":function(x,y){return and(x,matrix(y)).valueOf()}});return and});exports.createAnd=createAnd},{"../../plain/number":874,"../../type/matrix/utils/algorithm02":901,"../../type/matrix/utils/algorithm06":905,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],746:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNot=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed"],createNot=(0,_factory.factory)("not",dependencies,function(_ref){var not=(0,_ref.typed)("not",{number:_number.notNumber,Complex:function(x){return 0===x.re&&0===x.im},BigNumber:function(x){return x.isZero()||x.isNaN()},Unit:function(x){return null===x.value||not(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,not)}});return not});exports.createNot=createNot},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],747:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOr=void 0;var _algorithm=require("../../type/matrix/utils/algorithm03"),_algorithm2=require("../../type/matrix/utils/algorithm12"),_algorithm3=require("../../type/matrix/utils/algorithm13"),_algorithm4=require("../../type/matrix/utils/algorithm14"),_algorithm5=require("../../type/matrix/utils/algorithm05"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed","matrix","equalScalar","DenseMatrix"],createOr=(0,_factory.factory)("or",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,DenseMatrix=_ref.DenseMatrix,algorithm03=(0,_algorithm.createAlgorithm03)({typed:typed}),algorithm05=(0,_algorithm5.createAlgorithm05)({typed:typed,equalScalar:equalScalar}),algorithm12=(0,_algorithm2.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm3.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm4.createAlgorithm14)({typed:typed}),or=typed("or",{"number, number":_number.orNumber,"Complex, Complex":function(x,y){return 0!==x.re||0!==x.im||0!==y.re||0!==y.im},"BigNumber, BigNumber":function(x,y){return!x.isZero()&&!x.isNaN()||!y.isZero()&&!y.isNaN()},"Unit, Unit":function(x,y){return or(x.value||0,y.value||0)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm05(x,y,or)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm03(y,x,or,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,or,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,or)},"Array, Array":function(x,y){return or(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return or(matrix(x),y)},"Matrix, Array":function(x,y){return or(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm12(x,y,or,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,or,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,or,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,or,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,or,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,or,!0).valueOf()}});return or});exports.createOr=createOr},{"../../plain/number":874,"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm05":904,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],748:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createXor=void 0;var _algorithm=require("../../type/matrix/utils/algorithm03"),_algorithm2=require("../../type/matrix/utils/algorithm07"),_algorithm3=require("../../type/matrix/utils/algorithm12"),_algorithm4=require("../../type/matrix/utils/algorithm13"),_algorithm5=require("../../type/matrix/utils/algorithm14"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed","matrix","DenseMatrix"],createXor=(0,_factory.factory)("xor",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,DenseMatrix=_ref.DenseMatrix,algorithm03=(0,_algorithm.createAlgorithm03)({typed:typed}),algorithm07=(0,_algorithm2.createAlgorithm07)({typed:typed,DenseMatrix:DenseMatrix}),algorithm12=(0,_algorithm3.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm4.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm5.createAlgorithm14)({typed:typed}),xor=typed("xor",{"number, number":_number.xorNumber,"Complex, Complex":function(x,y){return(0!==x.re||0!==x.im)!=(0!==y.re||0!==y.im)},"BigNumber, BigNumber":function(x,y){return(!x.isZero()&&!x.isNaN())!=(!y.isZero()&&!y.isNaN())},"Unit, Unit":function(x,y){return xor(x.value||0,y.value||0)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm07(x,y,xor)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm03(y,x,xor,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,xor,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,xor)},"Array, Array":function(x,y){return xor(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return xor(matrix(x),y)},"Matrix, Array":function(x,y){return xor(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm12(x,y,xor,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,xor,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,xor,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,xor,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,xor,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,xor,!0).valueOf()}});return xor});exports.createXor=createXor},{"../../plain/number":874,"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm07":906,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],749:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createApply=void 0;var _factory=require("../../utils/factory"),_array=require("../../utils/array"),_is=require("../../utils/is"),_IndexError=require("../../error/IndexError"),dependencies=["typed","isInteger"],createApply=(0,_factory.factory)("apply",dependencies,function(_ref){var typed=_ref.typed,isInteger=_ref.isInteger;return typed("apply",{"Array | Matrix, number | BigNumber, function":function(mat,dim,callback){if(!isInteger(dim))throw new TypeError("Integer number expected for dimension");var size=Array.isArray(mat)?(0,_array.arraySize)(mat):mat.size();if(dim<0||dim>=size.length)throw new _IndexError.IndexError(dim,size.length);return(0,_is.isMatrix)(mat)?mat.create(_apply(mat.valueOf(),dim,callback)):_apply(mat,dim,callback)}})});function _apply(mat,dim,callback){var i,ret,tran;if(dim<=0){if(Array.isArray(mat[0])){for(tran=function(mat){var i,j,I=mat.length,J=mat[0].length,ret=[];for(j=0;j<J;j++){var tmp=[];for(i=0;i<I;i++)tmp.push(mat[i][j]);ret.push(tmp)}return ret}(mat),ret=[],i=0;i<tran.length;i++)ret[i]=_apply(tran[i],dim-1,callback);return ret}return callback(mat)}for(ret=[],i=0;i<mat.length;i++)ret[i]=_apply(mat[i],dim-1,callback);return ret}exports.createApply=createApply},{"../../error/IndexError":400,"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933}],750:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createColumn=void 0;var _factory=require("../../utils/factory"),_object=require("../../utils/object"),_array=require("../../utils/array"),dependencies=["typed","Index","matrix","range"],createColumn=(0,_factory.factory)("column",dependencies,function(_ref){var typed=_ref.typed,Index=_ref.Index,matrix=_ref.matrix,range=_ref.range;return typed("column",{"Matrix, number":_column,"Array, number":function(value,column){return _column(matrix((0,_object.clone)(value)),column).valueOf()}});function _column(value,column){if(2!==value.size().length)throw new Error("Only two dimensional matrix is supported");(0,_array.validateIndex)(column,value.size()[1]);var rowRange=range(0,value.size()[0]),index=new Index(rowRange,column);return value.subset(index)}});exports.createColumn=createColumn},{"../../utils/array":922,"../../utils/factory":931,"../../utils/object":938}],751:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConcat=void 0;var _is=require("../../utils/is"),_object=require("../../utils/object"),_array=require("../../utils/array"),_IndexError=require("../../error/IndexError"),_DimensionError=require("../../error/DimensionError"),_factory=require("../../utils/factory"),dependencies=["typed","matrix","isInteger"],createConcat=(0,_factory.factory)("concat",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,isInteger=_ref.isInteger;return typed("concat",{"...Array | Matrix | number | BigNumber":function(args){for(var prevDim,len=args.length,dim=-1,asMatrix=!1,matrices=[],i=0;i<len;i++){var arg=args[i];if((0,_is.isMatrix)(arg)&&(asMatrix=!0),(0,_is.isNumber)(arg)||(0,_is.isBigNumber)(arg)){if(i!==len-1)throw new Error("Dimension must be specified as last argument");if(prevDim=dim,dim=arg.valueOf(),!isInteger(dim))throw new TypeError("Integer number expected for dimension");if(dim<0||0<i&&prevDim<dim)throw new _IndexError.IndexError(dim,prevDim+1)}else{var m=(0,_object.clone)(arg).valueOf(),size=(0,_array.arraySize)(m);if(matrices[i]=m,prevDim=dim,dim=size.length-1,0<i&&dim!==prevDim)throw new _DimensionError.DimensionError(prevDim+1,dim+1)}}if(0===matrices.length)throw new SyntaxError("At least one matrix expected");for(var res=matrices.shift();matrices.length;)res=function _concat(a,b,concatDim,dim){{if(dim<concatDim){if(a.length!==b.length)throw new _DimensionError.DimensionError(a.length,b.length);for(var c=[],i=0;i<a.length;i++)c[i]=_concat(a[i],b[i],concatDim,dim+1);return c}return a.concat(b)}}(res,matrices.shift(),dim,0);return asMatrix?matrix(res):res},"...string":function(args){return args.join("")}})});exports.createConcat=createConcat},{"../../error/DimensionError":399,"../../error/IndexError":400,"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/object":938}],752:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCross=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","matrix","subtract","multiply"],createCross=(0,_factory.factory)("cross",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,subtract=_ref.subtract,multiply=_ref.multiply;return typed("cross",{"Matrix, Matrix":function(x,y){return matrix(_cross(x.toArray(),y.toArray()))},"Matrix, Array":function(x,y){return matrix(_cross(x.toArray(),y))},"Array, Matrix":function(x,y){return matrix(_cross(x,y.toArray()))},"Array, Array":_cross});function _cross(x,y){var highestDimension=Math.max((0,_array.arraySize)(x).length,(0,_array.arraySize)(y).length);x=(0,_array.squeeze)(x),y=(0,_array.squeeze)(y);var xSize=(0,_array.arraySize)(x),ySize=(0,_array.arraySize)(y);if(1!==xSize.length||1!==ySize.length||3!==xSize[0]||3!==ySize[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+xSize.join(", ")+"], B = ["+ySize.join(", ")+"])");var product=[subtract(multiply(x[1],y[2]),multiply(x[2],y[1])),subtract(multiply(x[2],y[0]),multiply(x[0],y[2])),subtract(multiply(x[0],y[1]),multiply(x[1],y[0]))];return 1<highestDimension?[product]:product}});exports.createCross=createCross},{"../../utils/array":922,"../../utils/factory":931}],753:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCtranspose=void 0;var _factory=require("../../utils/factory"),dependencies=["typed","transpose","conj"],createCtranspose=(0,_factory.factory)("ctranspose",dependencies,function(_ref){var typed=_ref.typed,transpose=_ref.transpose,conj=_ref.conj;return typed("ctranspose",{any:function(x){return conj(transpose(x))}})});exports.createCtranspose=createCtranspose},{"../../utils/factory":931}],754:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDet=void 0;var _is=require("../../utils/is"),_object=require("../../utils/object"),_string=require("../../utils/string"),_factory=require("../../utils/factory"),dependencies=["typed","matrix","subtract","multiply","unaryMinus","lup"],createDet=(0,_factory.factory)("det",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,subtract=_ref.subtract,multiply=_ref.multiply,unaryMinus=_ref.unaryMinus,lup=_ref.lup;return typed("det",{any:function(x){return(0,_object.clone)(x)},"Array | Matrix":function(x){var size=(0,_is.isMatrix)(x)?x.size():Array.isArray(x)?(x=matrix(x)).size():[];switch(size.length){case 0:return(0,_object.clone)(x);case 1:if(1===size[0])return(0,_object.clone)(x.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")");case 2:var rows=size[0];if(rows===size[1])return function(matrix,rows){{if(1===rows)return(0,_object.clone)(matrix[0][0]);if(2===rows)return subtract(multiply(matrix[0][0],matrix[1][1]),multiply(matrix[1][0],matrix[0][1]));for(var decomp=lup(matrix),det=decomp.U[0][0],_i=1;_i<rows;_i++)det=multiply(det,decomp.U[_i][_i]);for(var evenCycles=0,i=0,visited=[];;){for(;visited[i];)i++;if(rows<=i)break;for(var j=i,cycleLen=0;!visited[decomp.p[j]];)visited[decomp.p[j]]=!0,j=decomp.p[j],cycleLen++;cycleLen%2==0&&evenCycles++}return evenCycles%2==0?det:unaryMinus(det)}}(x.clone().valueOf(),rows);throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+(0,_string.format)(size)+")")}}})});exports.createDet=createDet},{"../../utils/factory":931,"../../utils/is":933,"../../utils/object":938,"../../utils/string":941}],755:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDiag=void 0;var _is=require("../../utils/is"),_array=require("../../utils/array"),_number=require("../../utils/number"),_factory=require("../../utils/factory"),dependencies=["typed","matrix","DenseMatrix","SparseMatrix"],createDiag=(0,_factory.factory)("diag",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,DenseMatrix=_ref.DenseMatrix,SparseMatrix=_ref.SparseMatrix;return typed("diag",{Array:function(x){return _diag(x,0,(0,_array.arraySize)(x),null)},"Array, number":function(x,k){return _diag(x,k,(0,_array.arraySize)(x),null)},"Array, BigNumber":function(x,k){return _diag(x,k.toNumber(),(0,_array.arraySize)(x),null)},"Array, string":function(x,format){return _diag(x,0,(0,_array.arraySize)(x),format)},"Array, number, string":function(x,k,format){return _diag(x,k,(0,_array.arraySize)(x),format)},"Array, BigNumber, string":function(x,k,format){return _diag(x,k.toNumber(),(0,_array.arraySize)(x),format)},Matrix:function(x){return _diag(x,0,x.size(),x.storage())},"Matrix, number":function(x,k){return _diag(x,k,x.size(),x.storage())},"Matrix, BigNumber":function(x,k){return _diag(x,k.toNumber(),x.size(),x.storage())},"Matrix, string":function(x,format){return _diag(x,0,x.size(),format)},"Matrix, number, string":function(x,k,format){return _diag(x,k,x.size(),format)},"Matrix, BigNumber, string":function(x,k,format){return _diag(x,k.toNumber(),x.size(),format)}});function _diag(x,k,size,format){if(!(0,_number.isInteger)(k))throw new TypeError("Second parameter in function diag must be an integer");var kSuper=0<k?k:0,kSub=k<0?-k:0;switch(size.length){case 1:return function(x,k,format,l,kSub,kSuper){var ms=[l+kSub,l+kSuper];if(format&&"sparse"!==format&&"dense"!==format)throw new TypeError("Unknown matrix type ".concat(format,'"'));var m="sparse"===format?SparseMatrix.diagonal(ms,x,k):DenseMatrix.diagonal(ms,x,k);return null!==format?m:m.valueOf()}(x,k,format,size[0],kSub,kSuper);case 2:return function(x,k,format,s,kSub,kSuper){if((0,_is.isMatrix)(x)){var dm=x.diagonal(k);return null!==format?format!==dm.storage()?matrix(dm,format):dm:dm.valueOf()}for(var n=Math.min(s[0]-kSub,s[1]-kSuper),vector=[],i=0;i<n;i++)vector[i]=x[i+kSub][i+kSuper];return null!==format?matrix(vector):vector}(x,k,format,size,kSub,kSuper)}throw new RangeError("Matrix for function diag must be 2 dimensional")}});exports.createDiag=createDiag},{"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937}],756:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDot=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","add","multiply"],createDot=(0,_factory.factory)("dot",dependencies,function(_ref){var typed=_ref.typed,add=_ref.add,multiply=_ref.multiply;return typed("dot",{"Matrix, Matrix":function(x,y){return _dot(x.toArray(),y.toArray())},"Matrix, Array":function(x,y){return _dot(x.toArray(),y)},"Array, Matrix":function(x,y){return _dot(x,y.toArray())},"Array, Array":_dot});function _dot(x,y){var xSize=(0,_array.arraySize)(x),ySize=(0,_array.arraySize)(y),len=xSize[0];if(1!==xSize.length||1!==ySize.length)throw new RangeError("Vector expected");if(xSize[0]!==ySize[0])throw new RangeError("Vectors must have equal length ("+xSize[0]+" != "+ySize[0]+")");if(0===len)throw new RangeError("Cannot calculate the dot product of empty vectors");for(var prod=0,i=0;i<len;i++)prod=add(prod,multiply(x[i],y[i]));return prod}});exports.createDot=createDot},{"../../utils/array":922,"../../utils/factory":931}],757:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEigs=void 0;var _object=require("../../utils/object"),_factory=require("../../utils/factory"),_string=require("../../utils/string"),dependencies=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","inv","bignumber","multiply","add"],createEigs=(0,_factory.factory)("eigs",dependencies,function(_ref){var config=_ref.config,typed=_ref.typed,matrix=_ref.matrix,addScalar=_ref.addScalar,subtract=_ref.subtract,equal=_ref.equal,abs=_ref.abs,atan=_ref.atan,cos=_ref.cos,sin=_ref.sin,multiplyScalar=_ref.multiplyScalar,inv=_ref.inv,bignumber=_ref.bignumber,multiply=_ref.multiply,add=_ref.add;function checkAndSubmit(x,n){var type=x.datatype();if(void 0===type&&(type=x.getDataType()),"number"!==type&&"BigNumber"!==type&&"Fraction"!==type)throw"mixed"===type?new TypeError("Mixed matrix element type is not supported"):new TypeError("Matrix element type not supported ("+type+")");if(!function(x,n){for(var i=0;i<n;i++)for(var j=i;j<n;j++)if(!equal(x[i][j],x[j][i]))throw new TypeError("Input matrix is not symmetric")}(x.toArray(),n),"number"===type)return diag(x.toArray());if("Fraction"!==type)return"BigNumber"===type?function(x){for(var psi,N=x.length,e0=abs(config.epsilon/N),Sij=new Array(N),i=0;i<N;i++)Sij[i]=createArray(N,0),Sij[i][i]=1;var Vab=getAijBig(x);for(;abs(Vab[1])>=abs(e0);){var _i3=Vab[0][0],j=Vab[0][1];psi=function(aii,ajj,aij){var denom=subtract(ajj,aii);return abs(denom)<=config.epsilon?bignumber(-1).acos().div(4):multiplyScalar(.5,atan(multiply(2,aij,inv(denom))))}(x[_i3][_i3],x[j][j],x[_i3][j]),x=function(Hij,theta,i,j){for(var N=Hij.length,c=bignumber(cos(theta)),s=bignumber(sin(theta)),c2=multiplyScalar(c,c),s2=multiplyScalar(s,s),Aki=createArray(N,bignumber(0)),Akj=createArray(N,bignumber(0)),csHij=multiply(bignumber(2),c,s,Hij[i][j]),Aii=addScalar(subtract(multiplyScalar(c2,Hij[i][i]),csHij),multiplyScalar(s2,Hij[j][j])),Ajj=add(multiplyScalar(s2,Hij[i][i]),csHij,multiplyScalar(c2,Hij[j][j])),k=0;k<N;k++)Aki[k]=subtract(multiplyScalar(c,Hij[i][k]),multiplyScalar(s,Hij[j][k])),Akj[k]=addScalar(multiplyScalar(s,Hij[i][k]),multiplyScalar(c,Hij[j][k]));Hij[i][i]=Aii,Hij[j][j]=Ajj,Hij[i][j]=bignumber(0),Hij[j][i]=bignumber(0);for(var _k3=0;_k3<N;_k3++)_k3!==i&&_k3!==j&&(Hij[i][_k3]=Aki[_k3],Hij[_k3][i]=Aki[_k3],Hij[j][_k3]=Akj[_k3],Hij[_k3][j]=Akj[_k3]);return Hij}(x,psi,_i3,j),Sij=function(Sij,theta,i,j){for(var N=Sij.length,c=cos(theta),s=sin(theta),Ski=createArray(N,bignumber(0)),Skj=createArray(N,bignumber(0)),k=0;k<N;k++)Ski[k]=subtract(multiplyScalar(c,Sij[k][i]),multiplyScalar(s,Sij[k][j])),Skj[k]=addScalar(multiplyScalar(s,Sij[k][i]),multiplyScalar(c,Sij[k][j]));for(var _k2=0;_k2<N;_k2++)Sij[_k2][i]=Ski[_k2],Sij[_k2][j]=Skj[_k2];return Sij}(Sij,psi,_i3,j),Vab=getAijBig(x)}for(var Ei=createArray(N,0),_i4=0;_i4<N;_i4++)Ei[_i4]=x[_i4][_i4];return sorting((0,_object.clone)(Ei),(0,_object.clone)(Sij))}(x.toArray()):void 0;for(var xArr=x.toArray(),i=0;i<n;i++)for(var j=i;j<n;j++)xArr[i][j]=xArr[i][j].valueOf(),xArr[j][i]=xArr[i][j];return diag(x.toArray())}function diag(x){for(var psi,N=x.length,e0=Math.abs(config.epsilon/N),Sij=new Array(N),i=0;i<N;i++)Sij[i]=createArray(N,0),Sij[i][i]=1;for(var aii,ajj,aij,denom,Vab=getAij(x);Math.abs(Vab[1])>=Math.abs(e0);){var _i=Vab[0][0],j=Vab[0][1];aii=x[_i][_i],ajj=x[j][j],aij=x[_i][j],denom=void 0,denom=ajj-aii,x=function(Hij,theta,i,j){for(var N=Hij.length,c=Math.cos(theta),s=Math.sin(theta),c2=c*c,s2=s*s,Aki=createArray(N,0),Akj=createArray(N,0),Aii=c2*Hij[i][i]-2*c*s*Hij[i][j]+s2*Hij[j][j],Ajj=s2*Hij[i][i]+2*c*s*Hij[i][j]+c2*Hij[j][j],k=0;k<N;k++)Aki[k]=c*Hij[i][k]-s*Hij[j][k],Akj[k]=s*Hij[i][k]+c*Hij[j][k];Hij[i][i]=Aii,Hij[j][j]=Ajj,Hij[i][j]=0;for(var _k4=Hij[j][i]=0;_k4<N;_k4++)_k4!==i&&_k4!==j&&(Hij[i][_k4]=Aki[_k4],Hij[_k4][i]=Aki[_k4],Hij[j][_k4]=Akj[_k4],Hij[_k4][j]=Akj[_k4]);return Hij}(x,psi=Math.abs(denom)<=config.epsilon?Math.PI/4:.5*Math.atan(2*aij/(ajj-aii)),_i,j),Sij=function(Sij,theta,i,j){for(var N=Sij.length,c=Math.cos(theta),s=Math.sin(theta),Ski=createArray(N,0),Skj=createArray(N,0),k=0;k<N;k++)Ski[k]=c*Sij[k][i]-s*Sij[k][j],Skj[k]=s*Sij[k][i]+c*Sij[k][j];for(var _k=0;_k<N;_k++)Sij[_k][i]=Ski[_k],Sij[_k][j]=Skj[_k];return Sij}(Sij,psi,_i,j),Vab=getAij(x)}for(var Ei=createArray(N,0),_i2=0;_i2<N;_i2++)Ei[_i2]=x[_i2][_i2];return sorting((0,_object.clone)(Ei),(0,_object.clone)(Sij))}function getAij(Mij){for(var N=Mij.length,maxMij=0,maxIJ=[0,1],i=0;i<N;i++)for(var j=i+1;j<N;j++)Math.abs(maxMij)<Math.abs(Mij[i][j])&&(maxMij=Math.abs(Mij[i][j]),maxIJ=[i,j]);return[maxIJ,maxMij]}function getAijBig(Mij){for(var N=Mij.length,maxMij=0,maxIJ=[0,1],i=0;i<N;i++)for(var j=i+1;j<N;j++)abs(maxMij)<abs(Mij[i][j])&&(maxMij=abs(Mij[i][j]),maxIJ=[i,j]);return[maxIJ,maxMij]}function sorting(E,S){for(var N=E.length,Ef=Array(N),Sf=Array(N),k=0;k<N;k++)Sf[k]=Array(N);for(var i=0;i<N;i++){for(var minID=0,minE=E[0],j=0;j<E.length;j++)E[j]<minE&&(minE=E[minID=j]);Ef[i]=E.splice(minID,1)[0];for(var _k5=0;_k5<N;_k5++)Sf[_k5][i]=S[_k5][minID],S[_k5].splice(minID,1)}return[(0,_object.clone)(Ef),(0,_object.clone)(Sf)]}function createArray(size,value){for(var array=new Array(size),i=0;i<size;i++)array[i]=value;return array}return typed("eigs",{Array:function(x){var mat=matrix(x),size=mat.size();if(2!==size.length||size[0]!==size[1])throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")");var ans=checkAndSubmit(mat,size[0]);return{values:ans[0],vectors:ans[1]}},Matrix:function(x){var size=x.size();if(2!==size.length||size[0]!==size[1])throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")");var ans=checkAndSubmit(x,size[0]);return{values:matrix(ans[0]),vectors:matrix(ans[1])}}})});exports.createEigs=createEigs},{"../../utils/factory":931,"../../utils/object":938,"../../utils/string":941}],758:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExpm=void 0;var _is=require("../../utils/is"),_string=require("../../utils/string"),_factory=require("../../utils/factory"),dependencies=["typed","abs","add","identity","inv","multiply"],createExpm=(0,_factory.factory)("expm",dependencies,function(_ref){var typed=_ref.typed,abs=_ref.abs,add=_ref.add,identity=_ref.identity,inv=_ref.inv,multiply=_ref.multiply;return typed("expm",{Matrix:function(A){var size=A.size();if(2!==size.length||size[0]!==size[1])throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")");for(var n=size[0],params=function(infNorm,eps){for(var k=0;k<30;k++)for(var q=0;q<=k;q++){var j=k-q;if(function(infNorm,q,j){for(var qfac=1,i=2;i<=q;i++)qfac*=i;for(var twoqfac=qfac,_i2=q+1;_i2<=2*q;_i2++)twoqfac*=_i2;var twoqp1fac=twoqfac*(2*q+1);return 8*Math.pow(infNorm/Math.pow(2,j),2*q)*qfac*qfac/(twoqfac*twoqp1fac)}(infNorm,q,j)<eps)return{q:q,j:j}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}(function(A){for(var n=A.size()[0],infNorm=0,i=0;i<n;i++){for(var rowSum=0,j=0;j<n;j++)rowSum+=abs(A.get([i,j]));infNorm=Math.max(rowSum,infNorm)}return infNorm}(A),1e-15),q=params.q,j=params.j,Apos=multiply(A,Math.pow(2,-j)),N=identity(n),D=identity(n),factor=1,AposToI=Apos,alternate=-1,i=1;i<=q;i++)1<i&&(AposToI=multiply(AposToI,Apos),alternate=-alternate),N=add(N,multiply(factor=factor*(q-i+1)/((2*q-i+1)*i),AposToI)),D=add(D,multiply(factor*alternate,AposToI));for(var R=multiply(inv(D),N),_i=0;_i<j;_i++)R=multiply(R,R);return(0,_is.isSparseMatrix)(A)?A.createSparseMatrix(R):R}})});exports.createExpm=createExpm},{"../../utils/factory":931,"../../utils/is":933,"../../utils/string":941}],759:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var createEye=(exports.createEye=void 0,require("../../utils/factory").factory)("eye",[],function(){return function(){throw new Error('Function "eye" is renamed to "identity" since mathjs version 5.0.0. To keep eye working, create an alias for it using "math.import({eye: math.identity}, {override: true})"')}});exports.createEye=createEye},{"../../utils/factory":931}],760:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFilter=void 0;var _array=require("../../utils/array"),_function=require("../../utils/function"),dependencies=["typed"],createFilter=(0,require("../../utils/factory").factory)("filter",dependencies,function(_ref){return(0,_ref.typed)("filter",{"Array, function":_filterCallback,"Matrix, function":function(x,test){return x.create(_filterCallback(x.toArray(),test))},"Array, RegExp":_array.filterRegExp,"Matrix, RegExp":function(x,test){return x.create((0,_array.filterRegExp)(x.toArray(),test))}})});function _filterCallback(x,callback){var args=(0,_function.maxArgumentCount)(callback);return(0,_array.filter)(x,function(value,index,array){return 1===args?callback(value):2===args?callback(value,[index]):callback(value,[index],array)})}exports.createFilter=createFilter},{"../../utils/array":922,"../../utils/factory":931,"../../utils/function":932}],761:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFlatten=void 0;var _object=require("../../utils/object"),_array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","matrix"],createFlatten=(0,_factory.factory)("flatten",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix;return typed("flatten",{Array:function(x){return(0,_array.flatten)((0,_object.clone)(x))},Matrix:function(x){var flat=(0,_array.flatten)((0,_object.clone)(x.toArray()));return matrix(flat)}})});exports.createFlatten=createFlatten},{"../../utils/array":922,"../../utils/factory":931,"../../utils/object":938}],762:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createForEach=void 0;var _function=require("../../utils/function"),_array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed"],createForEach=(0,_factory.factory)("forEach",dependencies,function(_ref){return(0,_ref.typed)("forEach",{"Array, function":_forEach,"Matrix, function":function(x,callback){return x.forEach(callback)}})});function _forEach(array,callback){var args=(0,_function.maxArgumentCount)(callback);!function recurse(value,index){Array.isArray(value)?(0,_array.forEach)(value,function(child,i){recurse(child,index.concat(i))}):1===args?callback(value):2===args?callback(value,index):callback(value,index,array)}(array,[])}exports.createForEach=createForEach},{"../../utils/array":922,"../../utils/factory":931,"../../utils/function":932}],763:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetMatrixDataType=void 0;var _factory=require("../../utils/factory"),_array=require("../../utils/array"),_is=require("../../utils/is"),name="getMatrixDataType",dependencies=["typed"],createGetMatrixDataType=(0,_factory.factory)(name,dependencies,function(_ref){return(0,_ref.typed)(name,{Array:function(x){return(0,_array.getArrayDataType)(x,_is.typeOf)},Matrix:function(x){return x.getDataType()}})});exports.createGetMatrixDataType=createGetMatrixDataType},{"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933}],764:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIdentity=void 0;var _is=require("../../utils/is"),_array=require("../../utils/array"),_number=require("../../utils/number"),_factory=require("../../utils/factory"),dependencies=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],createIdentity=(0,_factory.factory)("identity",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,matrix=_ref.matrix,BigNumber=_ref.BigNumber,DenseMatrix=_ref.DenseMatrix,SparseMatrix=_ref.SparseMatrix;return typed("identity",{"":function(){return"Matrix"===config.matrix?matrix([]):[]},string:function(format){return matrix(format)},"number | BigNumber":function(rows){return _identity(rows,rows,"Matrix"===config.matrix?"dense":void 0)},"number | BigNumber, string":function(rows,format){return _identity(rows,rows,format)},"number | BigNumber, number | BigNumber":function(rows,cols){return _identity(rows,cols,"Matrix"===config.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":_identity,Array:function(size){return _identityVector(size)},"Array, string":_identityVector,Matrix:function(size){return _identityVector(size.valueOf(),size.storage())},"Matrix, string":function(size,format){return _identityVector(size.valueOf(),format)}});function _identityVector(size,format){switch(size.length){case 0:return format?matrix(format):[];case 1:return _identity(size[0],size[0],format);case 2:return _identity(size[0],size[1],format);default:throw new Error("Vector containing two values expected")}}function _identity(rows,cols,format){var Big=(0,_is.isBigNumber)(rows)||(0,_is.isBigNumber)(cols)?BigNumber:null;if((0,_is.isBigNumber)(rows)&&(rows=rows.toNumber()),(0,_is.isBigNumber)(cols)&&(cols=cols.toNumber()),!(0,_number.isInteger)(rows)||rows<1)throw new Error("Parameters in function identity must be positive integers");if(!(0,_number.isInteger)(cols)||cols<1)throw new Error("Parameters in function identity must be positive integers");var one=Big?new BigNumber(1):1,defaultValue=Big?new Big(0):0,size=[rows,cols];if(format){if("sparse"===format)return SparseMatrix.diagonal(size,one,0,defaultValue);if("dense"===format)return DenseMatrix.diagonal(size,one,0,defaultValue);throw new TypeError('Unknown matrix type "'.concat(format,'"'))}for(var res=(0,_array.resize)([],size,defaultValue),minimum=rows<cols?rows:cols,d=0;d<minimum;d++)res[d][d]=one;return res}});exports.createIdentity=createIdentity},{"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937}],765:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createInv=void 0;var _is=require("../../utils/is"),_array=require("../../utils/array"),_factory=require("../../utils/factory"),_string=require("../../utils/string"),dependencies=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],createInv=(0,_factory.factory)("inv",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,divideScalar=_ref.divideScalar,addScalar=_ref.addScalar,multiply=_ref.multiply,unaryMinus=_ref.unaryMinus,det=_ref.det,identity=_ref.identity,abs=_ref.abs;return typed("inv",{"Array | Matrix":function(x){var size=(0,_is.isMatrix)(x)?x.size():(0,_array.arraySize)(x);switch(size.length){case 1:if(1===size[0])return(0,_is.isMatrix)(x)?matrix([divideScalar(1,x.valueOf()[0])]):[divideScalar(1,x[0])];throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")");case 2:var rows=size[0],cols=size[1];if(rows===cols)return(0,_is.isMatrix)(x)?matrix(_inv(x.valueOf(),rows,cols),x.storage()):_inv(x,rows,cols);throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+(0,_string.format)(size)+")")}},any:function(x){return divideScalar(1,x)}});function _inv(mat,rows,cols){var s,f,value,temp;if(1===rows){if(0===(value=mat[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[divideScalar(1,value)]]}if(2===rows){var d=det(mat);if(0===d)throw Error("Cannot calculate inverse, determinant is zero");return[[divideScalar(mat[1][1],d),divideScalar(unaryMinus(mat[0][1]),d)],[divideScalar(unaryMinus(mat[1][0]),d),divideScalar(mat[0][0],d)]]}var A=mat.concat();for(r=0;r<rows;r++)A[r]=A[r].concat();for(var B=identity(rows).valueOf(),c=0;c<cols;c++){for(var ABig=abs(A[c][c]),rBig=c,r=c+1;r<rows;)abs(A[r][c])>ABig&&(ABig=abs(A[r][c]),rBig=r),r++;if(0===ABig)throw Error("Cannot calculate inverse, determinant is zero");(r=rBig)!==c&&(temp=A[c],A[c]=A[r],A[r]=temp,temp=B[c],B[c]=B[r],B[r]=temp);var Ac=A[c],Bc=B[c];for(r=0;r<rows;r++){var Ar=A[r],Br=B[r];if(r!==c){if(0!==Ar[c]){for(f=divideScalar(unaryMinus(Ar[c]),Ac[c]),s=c;s<cols;s++)Ar[s]=addScalar(Ar[s],multiply(f,Ac[s]));for(s=0;s<cols;s++)Br[s]=addScalar(Br[s],multiply(f,Bc[s]))}}else{for(f=Ac[c],s=c;s<cols;s++)Ar[s]=divideScalar(Ar[s],f);for(s=0;s<cols;s++)Br[s]=divideScalar(Br[s],f)}}}return B}});exports.createInv=createInv},{"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/string":941}],766:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createKron=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","matrix","multiplyScalar"],createKron=(0,_factory.factory)("kron",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,multiplyScalar=_ref.multiplyScalar;return typed("kron",{"Matrix, Matrix":function(x,y){return matrix(_kron(x.toArray(),y.toArray()))},"Matrix, Array":function(x,y){return matrix(_kron(x.toArray(),y))},"Array, Matrix":function(x,y){return matrix(_kron(x,y.toArray()))},"Array, Array":_kron});function _kron(a,b){if(1===(0,_array.arraySize)(a).length&&(a=[a]),1===(0,_array.arraySize)(b).length&&(b=[b]),2<(0,_array.arraySize)(a).length||2<(0,_array.arraySize)(b).length)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(a.length)+", y = "+JSON.stringify(b.length)+")");var t=[],r=[];return a.map(function(a){return b.map(function(b){return r=[],t.push(r),a.map(function(y){return b.map(function(x){return r.push(multiplyScalar(y,x))})})})})&&t}});exports.createKron=createKron},{"../../utils/array":922,"../../utils/factory":931}],767:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMap=void 0;var _function=require("../../utils/function"),_factory=require("../../utils/factory"),dependencies=["typed"],createMap=(0,_factory.factory)("map",dependencies,function(_ref){return(0,_ref.typed)("map",{"Array, function":_map,"Matrix, function":function(x,callback){return x.map(callback)}})});function _map(array,callback){var args=(0,_function.maxArgumentCount)(callback);return function recurse(value,index){return Array.isArray(value)?value.map(function(child,i){return recurse(child,index.concat(i))}):1===args?callback(value):2===args?callback(value,index):callback(value,index,array)}(array,[])}exports.createMap=createMap},{"../../utils/factory":931,"../../utils/function":932}],768:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOnes=void 0;var _is=require("../../utils/is"),_number=require("../../utils/number"),_array=require("../../utils/array"),dependencies=["typed","config","matrix","BigNumber"],createOnes=(0,require("../../utils/factory").factory)("ones",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,matrix=_ref.matrix,BigNumber=_ref.BigNumber;return typed("ones",{"":function(){return"Array"===config.matrix?_ones([]):_ones([],"default")},"...number | BigNumber | string":function(size){if("string"!=typeof size[size.length-1])return"Array"===config.matrix?_ones(size):_ones(size,"default");var format=size.pop();return _ones(size,format)},Array:_ones,Matrix:function(size){var format=size.storage();return _ones(size.valueOf(),format)},"Array | Matrix, string":function(size,format){return _ones(size.valueOf(),format)}});function _ones(size,format){var defaultValue=function(size){var hasBigNumbers=!1;return size.forEach(function(value,index,arr){(0,_is.isBigNumber)(value)&&(hasBigNumbers=!0,arr[index]=value.toNumber())}),hasBigNumbers}(size)?new BigNumber(1):1;if(!function(size){size.forEach(function(value){if("number"!=typeof value||!(0,_number.isInteger)(value)||value<0)throw new Error("Parameters in function ones must be positive integers")})}(size),format){var m=matrix(format);return 0<size.length?m.resize(size,defaultValue):m}var arr=[];return 0<size.length?(0,_array.resize)(arr,size,defaultValue):arr}});exports.createOnes=createOnes},{"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937}],769:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPartitionSelect=void 0;var _is=require("../../utils/is"),_number=require("../../utils/number"),_factory=require("../../utils/factory"),name="partitionSelect",dependencies=["typed","isNumeric","isNaN","compare"],createPartitionSelect=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,isNumeric=_ref.isNumeric,isNaN=_ref.isNaN,compare=_ref.compare,asc=compare,desc=function(a,b){return-compare(a,b)};return typed(name,{"Array | Matrix, number":function(x,k){return _partitionSelect(x,k,asc)},"Array | Matrix, number, string":function(x,k,compare){if("asc"===compare)return _partitionSelect(x,k,asc);if("desc"===compare)return _partitionSelect(x,k,desc);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":_partitionSelect});function _partitionSelect(x,k,compare){if(!(0,_number.isInteger)(k)||k<0)throw new Error("k must be a non-negative integer");if((0,_is.isMatrix)(x)){if(1<x.size().length)throw new Error("Only one dimensional matrices supported");return quickSelect(x.valueOf(),k,compare)}if(Array.isArray(x))return quickSelect(x,k,compare)}function quickSelect(arr,k,compare){if(k>=arr.length)throw new Error("k out of bounds");for(var i=0;i<arr.length;i++)if(isNumeric(arr[i])&&isNaN(arr[i]))return arr[i];for(var from=0,to=arr.length-1;from<to;){for(var tmp,r=from,w=to,pivot=arr[Math.floor(Math.random()*(to-from+1))+from];r<w;){0<=compare(arr[r],pivot)?(tmp=arr[w],arr[w]=arr[r],arr[r]=tmp,--w):++r}0<compare(arr[r],pivot)&&--r,k<=r?to=r:from=r+1}return arr[k]}});exports.createPartitionSelect=createPartitionSelect},{"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937}],770:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRange=void 0;var _factory=require("../../utils/factory"),_noop=require("../../utils/noop"),dependencies=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],createRange=(0,_factory.factory)("range",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,matrix=_ref.matrix,bignumber=_ref.bignumber,smaller=_ref.smaller,smallerEq=_ref.smallerEq,larger=_ref.larger,largerEq=_ref.largerEq;return typed("range",{string:_strRange,"string, boolean":_strRange,"number, number":function(start,end){return _out(_rangeEx(start,end,1))},"number, number, number":function(start,end,step){return _out(_rangeEx(start,end,step))},"number, number, boolean":function(start,end,includeEnd){return _out((includeEnd?_rangeInc:_rangeEx)(start,end,1))},"number, number, number, boolean":function(start,end,step,includeEnd){return _out((includeEnd?_rangeInc:_rangeEx)(start,end,step))},"BigNumber, BigNumber":function(start,end){return _out(_bigRangeEx(start,end,new start.constructor(1)))},"BigNumber, BigNumber, BigNumber":function(start,end,step){return _out(_bigRangeEx(start,end,step))},"BigNumber, BigNumber, boolean":function(start,end,includeEnd){var BigNumber=start.constructor;return _out((includeEnd?_bigRangeInc:_bigRangeEx)(start,end,new BigNumber(1)))},"BigNumber, BigNumber, BigNumber, boolean":function(start,end,step,includeEnd){return _out((includeEnd?_bigRangeInc:_bigRangeEx)(start,end,step))}});function _out(arr){return"Matrix"===config.matrix?matrix?matrix(arr):(0,_noop.noMatrix)():arr}function _strRange(str,includeEnd){var r=function(str){var nums=str.split(":").map(function(arg){return Number(arg)});if(nums.some(function(num){return isNaN(num)}))return null;switch(nums.length){case 2:return{start:nums[0],end:nums[1],step:1};case 3:return{start:nums[0],end:nums[2],step:nums[1]};default:return null}}(str);if(!r)throw new SyntaxError('String "'+str+'" is no valid range');return"BigNumber"===config.number?(void 0===bignumber&&(0,_noop.noBignumber)(),_out((includeEnd?_bigRangeInc:_bigRangeEx)(bignumber(r.start),bignumber(r.end),bignumber(r.step)))):_out((includeEnd?_rangeInc:_rangeEx)(r.start,r.end,r.step))}function _rangeEx(start,end,step){var array=[],x=start;if(0<step)for(;smaller(x,end);)array.push(x),x+=step;else if(step<0)for(;larger(x,end);)array.push(x),x+=step;return array}function _rangeInc(start,end,step){var array=[],x=start;if(0<step)for(;smallerEq(x,end);)array.push(x),x+=step;else if(step<0)for(;largerEq(x,end);)array.push(x),x+=step;return array}function _bigRangeEx(start,end,step){var zero=bignumber(0),array=[],x=start;if(step.gt(zero))for(;smaller(x,end);)array.push(x),x=x.plus(step);else if(step.lt(zero))for(;larger(x,end);)array.push(x),x=x.plus(step);return array}function _bigRangeInc(start,end,step){var zero=bignumber(0),array=[],x=start;if(step.gt(zero))for(;smallerEq(x,end);)array.push(x),x=x.plus(step);else if(step.lt(zero))for(;largerEq(x,end);)array.push(x),x=x.plus(step);return array}});exports.createRange=createRange},{"../../utils/factory":931,"../../utils/noop":936}],771:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createReshape=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","isInteger","matrix"],createReshape=(0,_factory.factory)("reshape",dependencies,function(_ref){var typed=_ref.typed,isInteger=_ref.isInteger,matrix=_ref.matrix;return typed("reshape",{"Matrix, Array":function(x,sizes){return x.reshape?x.reshape(sizes):matrix((0,_array.reshape)(x.valueOf(),sizes))},"Array, Array":function(x,sizes){return sizes.forEach(function(size){if(!isInteger(size))throw new TypeError("Invalid size for dimension: "+size)}),(0,_array.reshape)(x,sizes)}})});exports.createReshape=createReshape},{"../../utils/array":922,"../../utils/factory":931}],772:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createResize=void 0;var _is=require("../../utils/is"),_DimensionError=require("../../error/DimensionError"),_ArgumentsError=require("../../error/ArgumentsError"),_number=require("../../utils/number"),_string=require("../../utils/string"),_object=require("../../utils/object"),_array=require("../../utils/array"),dependencies=["config","matrix"],createResize=(0,require("../../utils/factory").factory)("resize",dependencies,function(_ref){var config=_ref.config,matrix=_ref.matrix;return function(x,size,defaultValue){if(2!==arguments.length&&3!==arguments.length)throw new _ArgumentsError.ArgumentsError("resize",arguments.length,2,3);if((0,_is.isMatrix)(size)&&(size=size.valueOf()),(0,_is.isBigNumber)(size[0])&&(size=size.map(function(value){return(0,_is.isBigNumber)(value)?value.toNumber():value})),(0,_is.isMatrix)(x))return x.resize(size,defaultValue,!0);if("string"==typeof x)return function(str,size,defaultChar){if(void 0!==defaultChar){if("string"!=typeof defaultChar||1!==defaultChar.length)throw new TypeError("Single character expected as defaultValue")}else defaultChar=" ";if(1!==size.length)throw new _DimensionError.DimensionError(size.length,1);var len=size[0];if("number"!=typeof len||!(0,_number.isInteger)(len))throw new TypeError("Invalid size, must contain positive integers (size: "+(0,_string.format)(size)+")");{if(str.length>len)return str.substring(0,len);if(str.length<len){for(var res=str,i=0,ii=len-str.length;i<ii;i++)res+=defaultChar;return res}return str}}(x,size,defaultValue);var asMatrix=!Array.isArray(x)&&"Array"!==config.matrix;if(0===size.length){for(;Array.isArray(x);)x=x[0];return(0,_object.clone)(x)}Array.isArray(x)||(x=[x]),x=(0,_object.clone)(x);var res=(0,_array.resize)(x,size,defaultValue);return asMatrix?matrix(res):res}});exports.createResize=createResize},{"../../error/ArgumentsError":398,"../../error/DimensionError":399,"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937,"../../utils/object":938,"../../utils/string":941}],773:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRow=void 0;var _factory=require("../../utils/factory"),_object=require("../../utils/object"),_array=require("../../utils/array"),dependencies=["typed","Index","matrix","range"],createRow=(0,_factory.factory)("row",dependencies,function(_ref){var typed=_ref.typed,Index=_ref.Index,matrix=_ref.matrix,range=_ref.range;return typed("row",{"Matrix, number":_row,"Array, number":function(value,row){return _row(matrix((0,_object.clone)(value)),row).valueOf()}});function _row(value,row){if(2!==value.size().length)throw new Error("Only two dimensional matrix is supported");(0,_array.validateIndex)(row,value.size()[0]);var columnRange=range(0,value.size()[1]),index=new Index(row,columnRange);return value.subset(index)}});exports.createRow=createRow},{"../../utils/array":922,"../../utils/factory":931,"../../utils/object":938}],774:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSize=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),_noop=require("../../utils/noop"),dependencies=["typed","config","?matrix"],createSize=(0,_factory.factory)("size",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,matrix=_ref.matrix;return typed("size",{Matrix:function(x){return x.create(x.size())},Array:_array.arraySize,string:function(x){return"Array"===config.matrix?[x.length]:matrix([x.length])},"number | Complex | BigNumber | Unit | boolean | null":function(){return"Array"===config.matrix?[]:matrix?matrix([]):(0,_noop.noMatrix)()}})});exports.createSize=createSize},{"../../utils/array":922,"../../utils/factory":931,"../../utils/noop":936}],775:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSort=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","matrix","compare","compareNatural"],createSort=(0,_factory.factory)("sort",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,compare=_ref.compare,compareNatural=_ref.compareNatural,compareAsc=compare,compareDesc=function(a,b){return-compare(a,b)};return typed("sort",{Array:function(x){return _arrayIsVector(x),x.sort(compareAsc)},Matrix:function(x){return _matrixIsVector(x),matrix(x.toArray().sort(compareAsc),x.storage())},"Array, function":function(x,_comparator){return _arrayIsVector(x),x.sort(_comparator)},"Matrix, function":function(x,_comparator){return _matrixIsVector(x),matrix(x.toArray().sort(_comparator),x.storage())},"Array, string":function(x,order){return _arrayIsVector(x),x.sort(_comparator(order))},"Matrix, string":function(x,order){return _matrixIsVector(x),matrix(x.toArray().sort(_comparator(order)),x.storage())}});function _comparator(order){if("asc"===order)return compareAsc;if("desc"===order)return compareDesc;if("natural"===order)return compareNatural;throw new Error('String "asc", "desc", or "natural" expected')}function _arrayIsVector(array){if(1!==(0,_array.arraySize)(array).length)throw new Error("One dimensional array expected")}function _matrixIsVector(matrix){if(1!==matrix.size().length)throw new Error("One dimensional matrix expected")}});exports.createSort=createSort},{"../../utils/array":922,"../../utils/factory":931}],776:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSqrtm=void 0;var _is=require("../../utils/is"),_string=require("../../utils/string"),_array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","abs","add","multiply","sqrt","subtract","inv","size","max","identity"],createSqrtm=(0,_factory.factory)("sqrtm",dependencies,function(_ref){var typed=_ref.typed,abs=_ref.abs,add=_ref.add,multiply=_ref.multiply,sqrt=_ref.sqrt,subtract=_ref.subtract,inv=_ref.inv,size=_ref.size,max=_ref.max,identity=_ref.identity,sqrtm=typed("sqrtm",{"Array | Matrix":function(A){var size=(0,_is.isMatrix)(A)?A.size():(0,_array.arraySize)(A);switch(size.length){case 1:if(1===size[0])return sqrt(A);throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")");case 2:if(size[0]===size[1])return _denmanBeavers(A);throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")")}}}),_maxIterations=1e3,_tolerance=1e-6;function _denmanBeavers(A){var iterations=0,Y=A,Z=identity(size(A));do{var Yk=Y,Y=multiply(.5,add(Yk,inv(Z))),Z=multiply(.5,add(Z,inv(Yk))),error=max(abs(subtract(Y,Yk)));if(_tolerance<error&&++iterations>_maxIterations)throw new Error("computing square root of matrix: iterative method could not converge")}while(_tolerance<error);return Y}return sqrtm});exports.createSqrtm=createSqrtm},{"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/string":941}],777:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSqueeze=void 0;var _object=require("../../utils/object"),_array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","matrix"],createSqueeze=(0,_factory.factory)("squeeze",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix;return typed("squeeze",{Array:function(x){return(0,_array.squeeze)((0,_object.clone)(x))},Matrix:function(x){var res=(0,_array.squeeze)(x.toArray());return Array.isArray(res)?matrix(res):res},any:function(x){return(0,_object.clone)(x)}})});exports.createSqueeze=createSqueeze},{"../../utils/array":922,"../../utils/factory":931,"../../utils/object":938}],778:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSubset=void 0;var _is=require("../../utils/is"),_object=require("../../utils/object"),_array=require("../../utils/array"),_customs=require("../../utils/customs"),_DimensionError=require("../../error/DimensionError"),_factory=require("../../utils/factory"),dependencies=["typed","matrix"],createSubset=(0,_factory.factory)("subset",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix;return typed("subset",{"Array, Index":function(value,index){var subset=matrix(value).subset(index);return index.isScalar()?subset:subset.valueOf()},"Matrix, Index":function(value,index){return value.subset(index)},"Object, Index":_getObjectProperty,"string, Index":_getSubstring,"Array, Index, any":function(value,index,replacement){return matrix((0,_object.clone)(value)).subset(index,replacement,void 0).valueOf()},"Array, Index, any, any":function(value,index,replacement,defaultValue){return matrix((0,_object.clone)(value)).subset(index,replacement,defaultValue).valueOf()},"Matrix, Index, any":function(value,index,replacement){return value.clone().subset(index,replacement)},"Matrix, Index, any, any":function(value,index,replacement,defaultValue){return value.clone().subset(index,replacement,defaultValue)},"string, Index, string":_setSubstring,"string, Index, string, string":_setSubstring,"Object, Index, any":_setObjectProperty})});function _getSubstring(str,index){if(!(0,_is.isIndex)(index))throw new TypeError("Index expected");if(1!==index.size().length)throw new _DimensionError.DimensionError(index.size().length,1);var strLen=str.length;(0,_array.validateIndex)(index.min()[0],strLen),(0,_array.validateIndex)(index.max()[0],strLen);var range=index.dimension(0),substr="";return range.forEach(function(v){substr+=str.charAt(v)}),substr}function _setSubstring(str,index,replacement,defaultValue){if(!index||!0!==index.isIndex)throw new TypeError("Index expected");if(1!==index.size().length)throw new _DimensionError.DimensionError(index.size().length,1);if(void 0!==defaultValue){if("string"!=typeof defaultValue||1!==defaultValue.length)throw new TypeError("Single character expected as defaultValue")}else defaultValue=" ";var range=index.dimension(0);if(range.size()[0]!==replacement.length)throw new _DimensionError.DimensionError(range.size()[0],replacement.length);var strLen=str.length;(0,_array.validateIndex)(index.min()[0]),(0,_array.validateIndex)(index.max()[0]);for(var chars=[],i=0;i<strLen;i++)chars[i]=str.charAt(i);if(range.forEach(function(v,i){chars[v]=replacement.charAt(i[0])}),chars.length>strLen)for(var _i=strLen-1,_len=chars.length;_i<_len;_i++)chars[_i]||(chars[_i]=defaultValue);return chars.join("")}function _getObjectProperty(object,index){if(1!==index.size().length)throw new _DimensionError.DimensionError(index.size(),1);var key=index.dimension(0);if("string"!=typeof key)throw new TypeError("String expected as index to retrieve an object property");return(0,_customs.getSafeProperty)(object,key)}function _setObjectProperty(object,index,replacement){if(1!==index.size().length)throw new _DimensionError.DimensionError(index.size(),1);var key=index.dimension(0);if("string"!=typeof key)throw new TypeError("String expected as index to retrieve an object property");var updated=(0,_object.clone)(object);return(0,_customs.setSafeProperty)(updated,key,replacement),updated}exports.createSubset=createSubset},{"../../error/DimensionError":399,"../../utils/array":922,"../../utils/customs":929,"../../utils/factory":931,"../../utils/is":933,"../../utils/object":938}],779:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTrace=void 0;var _object=require("../../utils/object"),_string=require("../../utils/string"),dependencies=["typed","matrix","add"],createTrace=(0,require("../../utils/factory").factory)("trace",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,add=_ref.add;return typed("trace",{Array:function(x){return _denseTrace(matrix(x))},SparseMatrix:function(m){var values=m._values,index=m._index,ptr=m._ptr,size=m._size,rows=size[0],columns=size[1];if(rows!==columns)throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")");var sum=0;if(0<values.length)for(var j=0;j<columns;j++)for(var k0=ptr[j],k1=ptr[j+1],k=k0;k<k1;k++){var i=index[k];if(i===j){sum=add(sum,values[k]);break}if(j<i)break}return sum},DenseMatrix:_denseTrace,any:_object.clone});function _denseTrace(m){var size=m._size,data=m._data;switch(size.length){case 1:if(1===size[0])return(0,_object.clone)(data[0]);throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")");case 2:var rows=size[0];if(rows!==size[1])throw new RangeError("Matrix must be square (size: "+(0,_string.format)(size)+")");for(var sum=0,i=0;i<rows;i++)sum=add(sum,data[i][i]);return sum;default:throw new RangeError("Matrix must be two dimensional (size: "+(0,_string.format)(size)+")")}}});exports.createTrace=createTrace},{"../../utils/factory":931,"../../utils/object":938,"../../utils/string":941}],780:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTranspose=void 0;var _object=require("../../utils/object"),_string=require("../../utils/string"),dependencies=["typed","matrix"],createTranspose=(0,require("../../utils/factory").factory)("transpose",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,transpose=typed("transpose",{Array:function(x){return transpose(matrix(x)).valueOf()},Matrix:function(x){var c,size=x.size();switch(size.length){case 1:c=x.clone();break;case 2:var rows=size[0],columns=size[1];if(0===columns)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+(0,_string.format)(size)+")");switch(x.storage()){case"dense":c=function(m,rows,columns){for(var transposedRow,data=m._data,transposed=[],j=0;j<columns;j++){transposedRow=transposed[j]=[];for(var i=0;i<rows;i++)transposedRow[i]=(0,_object.clone)(data[i][j])}return m.createDenseMatrix({data:transposed,size:[columns,rows],datatype:m._datatype})}(x,rows,columns);break;case"sparse":c=function(m,rows,columns){for(var p,l,j,values=m._values,index=m._index,ptr=m._ptr,cvalues=values?[]:void 0,cindex=[],cptr=[],w=[],x=0;x<rows;x++)w[x]=0;for(p=0,l=index.length;p<l;p++)w[index[p]]++;for(var sum=0,i=0;i<rows;i++)cptr.push(sum),sum+=w[i],w[i]=cptr[i];for(cptr.push(sum),j=0;j<columns;j++)for(var k0=ptr[j],k1=ptr[j+1],k=k0;k<k1;k++){var q=w[index[k]]++;cindex[q]=j,values&&(cvalues[q]=(0,_object.clone)(values[k]))}return m.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[columns,rows],datatype:m._datatype})}(x,rows,columns)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+(0,_string.format)(this._size)+")")}return c},any:function(x){return(0,_object.clone)(x)}});return transpose});exports.createTranspose=createTranspose},{"../../utils/factory":931,"../../utils/object":938,"../../utils/string":941}],781:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createZeros=void 0;var _is=require("../../utils/is"),_number=require("../../utils/number"),_array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","config","matrix","BigNumber"],createZeros=(0,_factory.factory)("zeros",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,matrix=_ref.matrix,BigNumber=_ref.BigNumber;return typed("zeros",{"":function(){return"Array"===config.matrix?_zeros([]):_zeros([],"default")},"...number | BigNumber | string":function(size){if("string"!=typeof size[size.length-1])return"Array"===config.matrix?_zeros(size):_zeros(size,"default");var format=size.pop();return _zeros(size,format)},Array:_zeros,Matrix:function(size){var format=size.storage();return _zeros(size.valueOf(),format)},"Array | Matrix, string":function(size,format){return _zeros(size.valueOf(),format)}});function _zeros(size,format){var defaultValue=function(size){var hasBigNumbers=!1;return size.forEach(function(value,index,arr){(0,_is.isBigNumber)(value)&&(hasBigNumbers=!0,arr[index]=value.toNumber())}),hasBigNumbers}(size)?new BigNumber(0):0;if(!function(size){size.forEach(function(value){if("number"!=typeof value||!(0,_number.isInteger)(value)||value<0)throw new Error("Parameters in function zeros must be positive integers")})}(size),format){var m=matrix(format);return 0<size.length?m.resize(size,defaultValue):m}var arr=[];return 0<size.length?(0,_array.resize)(arr,size,defaultValue):arr}});exports.createZeros=createZeros},{"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937}],782:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCombinations=void 0;var _factory=require("../../utils/factory"),_combinations=require("../../plain/number/combinations"),dependencies=["typed"],createCombinations=(0,_factory.factory)("combinations",dependencies,function(_ref){return(0,_ref.typed)("combinations",{"number, number":_combinations.combinationsNumber,"BigNumber, BigNumber":function(n,k){var result,i,BigNumber=n.constructor,nMinusk=n.minus(k),one=new BigNumber(1);if(!isPositiveInteger(n)||!isPositiveInteger(k))throw new TypeError("Positive integer value expected in function combinations");if(k.gt(n))throw new TypeError("k must be less than n in function combinations");if(result=one,k.lt(nMinusk))for(i=one;i.lte(nMinusk);i=i.plus(one))result=result.times(k.plus(i)).dividedBy(i);else for(i=one;i.lte(k);i=i.plus(one))result=result.times(nMinusk.plus(i)).dividedBy(i);return result}})});function isPositiveInteger(n){return n.isInteger()&&n.gte(0)}exports.createCombinations=createCombinations},{"../../plain/number/combinations":872,"../../utils/factory":931}],783:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCombinationsWithRep=void 0;var _factory=require("../../utils/factory"),_number=require("../../utils/number"),_product=require("../../utils/product"),name="combinationsWithRep",dependencies=["typed"],createCombinationsWithRep=(0,_factory.factory)(name,dependencies,function(_ref){return(0,_ref.typed)(name,{"number, number":function(n,k){if(!(0,_number.isInteger)(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!(0,_number.isInteger)(k)||k<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");return k<n-1?(0,_product.product)(n,n+k-1)/(0,_product.product)(1,k):(0,_product.product)(k+1,n+k-1)/(0,_product.product)(1,n-1)},"BigNumber, BigNumber":function(n,k){var result,i,one=new n.constructor(1),nMinusOne=n.minus(one);if(!isPositiveInteger(n)||!isPositiveInteger(k))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(one))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(result=one,k.lt(nMinusOne))for(i=one;i.lte(nMinusOne);i=i.plus(one))result=result.times(k.plus(i)).dividedBy(i);else for(i=one;i.lte(k);i=i.plus(one))result=result.times(nMinusOne.plus(i)).dividedBy(i);return result}})});function isPositiveInteger(n){return n.isInteger()&&n.gte(0)}exports.createCombinationsWithRep=createCombinationsWithRep},{"../../utils/factory":931,"../../utils/number":937,"../../utils/product":940}],784:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFactorial=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),dependencies=["typed","gamma"],createFactorial=(0,_factory.factory)("factorial",dependencies,function(_ref){var typed=_ref.typed,gamma=_ref.gamma,factorial=typed("factorial",{number:function(n){if(n<0)throw new Error("Value must be non-negative");return gamma(n+1)},BigNumber:function(n){if(n.isNegative())throw new Error("Value must be non-negative");return gamma(n.plus(1))},"Array | Matrix":function(n){return(0,_collection.deepMap)(n,factorial)}});return factorial});exports.createFactorial=createFactorial},{"../../utils/collection":927,"../../utils/factory":931}],785:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGamma=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed","config","multiplyScalar","pow","BigNumber","Complex"],createGamma=(0,_factory.factory)("gamma",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,multiplyScalar=_ref.multiplyScalar,pow=_ref.pow,_BigNumber=_ref.BigNumber,_Complex=_ref.Complex,gamma=typed("gamma",{number:_number.gammaNumber,Complex:function(n){if(0===n.im)return gamma(n.re);n=new _Complex(n.re-1,n.im);for(var x=new _Complex(_number.gammaP[0],0),i=1;i<_number.gammaP.length;++i){var real=n.re+i,den=real*real+n.im*n.im;0!=den?(x.re+=_number.gammaP[i]*real/den,x.im+=-(_number.gammaP[i]*n.im)/den):x.re=_number.gammaP[i]<0?-1/0:1/0}var t=new _Complex(n.re+_number.gammaG+.5,n.im),twoPiSqrt=Math.sqrt(2*Math.PI);n.re+=.5;var result=pow(t,n);0===result.im?result.re*=twoPiSqrt:(0===result.re||(result.re*=twoPiSqrt),result.im*=twoPiSqrt);var r=Math.exp(-t.re);return t.re=r*Math.cos(-t.im),t.im=r*Math.sin(-t.im),multiplyScalar(multiplyScalar(result,t),x)},BigNumber:function(n){if(n.isInteger())return n.isNegative()||n.isZero()?new _BigNumber(1/0):function bigFactorial(n){if(n<8)return new _BigNumber([1,1,2,6,24,120,720,5040][n]);var precision=config.precision+(0|Math.log(n.toNumber()));var Big=_BigNumber.clone({precision:precision});if(n%2==1)return n.times(bigFactorial(new _BigNumber(n-1)));var p=n;var prod=new Big(n);var sum=n.toNumber();for(;2<p;)sum+=p-=2,prod=prod.times(sum);return new _BigNumber(prod.toPrecision(_BigNumber.precision))}(n.minus(1));if(!n.isFinite())return new _BigNumber(n.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(n){return(0,_collection.deepMap)(n,gamma)}});return gamma});exports.createGamma=createGamma},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],786:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createKldivergence=void 0;var _factory=require("../../utils/factory"),dependencies=["typed","matrix","divide","sum","multiply","dotDivide","log","isNumeric"],createKldivergence=(0,_factory.factory)("kldivergence",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,divide=_ref.divide,sum=_ref.sum,multiply=_ref.multiply,dotDivide=_ref.dotDivide,log=_ref.log,isNumeric=_ref.isNumeric;return typed("kldivergence",{"Array, Array":function(q,p){return _kldiv(matrix(q),matrix(p))},"Matrix, Array":function(q,p){return _kldiv(q,matrix(p))},"Array, Matrix":function(q,p){return _kldiv(matrix(q),p)},"Matrix, Matrix":_kldiv});function _kldiv(q,p){var plength=p.size().length,qlength=q.size().length;if(1<plength)throw new Error("first object must be one dimensional");if(1<qlength)throw new Error("second object must be one dimensional");if(plength!==qlength)throw new Error("Length of two vectors must be equal");if(0===sum(q))throw new Error("Sum of elements in first object must be non zero");if(0===sum(p))throw new Error("Sum of elements in second object must be non zero");var qnorm=divide(q,sum(q)),pnorm=divide(p,sum(p)),result=sum(multiply(qnorm,log(dotDivide(qnorm,pnorm))));return isNumeric(result)?result:Number.NaN}});exports.createKldivergence=createKldivergence},{"../../utils/factory":931}],787:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMultinomial=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),dependencies=["typed","add","divide","multiply","factorial","isInteger","isPositive"],createMultinomial=(0,_factory.factory)("multinomial",dependencies,function(_ref){var typed=_ref.typed,add=_ref.add,divide=_ref.divide,multiply=_ref.multiply,factorial=_ref.factorial,isInteger=_ref.isInteger,isPositive=_ref.isPositive;return typed("multinomial",{"Array | Matrix":function(a){var sum=0,denom=1;return(0,_collection.deepForEach)(a,function(ai){if(!isInteger(ai)||!isPositive(ai))throw new TypeError("Positive integer value expected in function multinomial");sum=add(sum,ai),denom=multiply(denom,factorial(ai))}),divide(factorial(sum),denom)}})});exports.createMultinomial=createMultinomial},{"../../utils/collection":927,"../../utils/factory":931}],788:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPermutations=void 0;var _number=require("../../utils/number"),_product=require("../../utils/product"),_factory=require("../../utils/factory"),dependencies=["typed","factorial"],createPermutations=(0,_factory.factory)("permutations",dependencies,function(_ref){return(0,_ref.typed)("permutations",{"number | BigNumber":_ref.factorial,"number, number":function(n,k){if(!(0,_number.isInteger)(n)||n<0)throw new TypeError("Positive integer value expected in function permutations");if(!(0,_number.isInteger)(k)||k<0)throw new TypeError("Positive integer value expected in function permutations");if(n<k)throw new TypeError("second argument k must be less than or equal to first argument n");return(0,_product.product)(n-k+1,n)},"BigNumber, BigNumber":function(n,k){if(!isPositiveInteger(n)||!isPositiveInteger(k))throw new TypeError("Positive integer value expected in function permutations");if(k.gt(n))throw new TypeError("second argument k must be less than or equal to first argument n");for(var result=n.mul(0).add(1),i=n.minus(k).plus(1);i.lte(n);i=i.plus(1))result=result.times(i);return result}})});function isPositiveInteger(n){return n.isInteger()&&n.gte(0)}exports.createPermutations=createPermutations},{"../../utils/factory":931,"../../utils/number":937,"../../utils/product":940}],789:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPickRandom=void 0;var _factory=require("../../utils/factory"),_is=require("../../utils/is"),_array=require("../../utils/array"),_seededRNG=require("./util/seededRNG"),dependencies=["typed","config","?on"],createPickRandom=(0,_factory.factory)("pickRandom",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,on=_ref.on,rng=(0,_seededRNG.createRng)(config.randomSeed);return on&&on("config",function(curr,prev){curr.randomSeed!==prev.randomSeed&&(rng=(0,_seededRNG.createRng)(curr.randomSeed))}),typed({"Array | Matrix":function(possibles){return _pickRandom(possibles)},"Array | Matrix, number":function(possibles,number){return _pickRandom(possibles,number,void 0)},"Array | Matrix, Array":function(possibles,weights){return _pickRandom(possibles,void 0,weights)},"Array | Matrix, Array | Matrix, number":function(possibles,weights,number){return _pickRandom(possibles,number,weights)},"Array | Matrix, number, Array | Matrix":_pickRandom});function _pickRandom(possibles,number,weights){var single=void 0===number;if(single&&(number=1),possibles=possibles.valueOf(),weights=weights&&weights.valueOf(),1<(0,_array.arraySize)(possibles).length)throw new Error("Only one dimensional vectors supported");var totalWeights=0;if(void 0!==weights){if(weights.length!==possibles.length)throw new Error("Weights must have the same length as possibles");for(var i=0,len=weights.length;i<len;i++){if(!(0,_is.isNumber)(weights[i])||weights[i]<0)throw new Error("Weights must be an array of positive numbers");totalWeights+=weights[i]}}var length=possibles.length;if(0===length)return[];if(length<=number)return 1<number?possibles:possibles[0];for(var pick,result=[];result.length<number;){if(void 0===weights)pick=possibles[Math.floor(rng()*length)];else for(var randKey=rng()*totalWeights,_i=0,_len=possibles.length;_i<_len;_i++)if((randKey-=weights[_i])<0){pick=possibles[_i];break}-1===result.indexOf(pick)&&result.push(pick)}return single?result[0]:result}});exports.createPickRandom=createPickRandom},{"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"./util/seededRNG":793}],790:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRandomNumber=exports.createRandom=void 0;var _factory=require("../../utils/factory"),_is=require("../../utils/is"),_seededRNG=require("./util/seededRNG"),_randomMatrix2=require("./util/randomMatrix"),name="random",dependencies=["typed","config","?on"],createRandom=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,on=_ref.on,rng=(0,_seededRNG.createRng)(config.randomSeed);return on&&on("config",function(curr,prev){curr.randomSeed!==prev.randomSeed&&(rng=(0,_seededRNG.createRng)(curr.randomSeed))}),typed(name,{"":function(){return _random(0,1)},number:function(max){return _random(0,max)},"number, number":_random,"Array | Matrix":function(size){return _randomMatrix(size,0,1)},"Array | Matrix, number":function(size,max){return _randomMatrix(size,0,max)},"Array | Matrix, number, number":_randomMatrix});function _randomMatrix(size,min,max){var res=(0,_randomMatrix2.randomMatrix)(size.valueOf(),function(){return _random(min,max)});return(0,_is.isMatrix)(size)?size.create(res):res}function _random(min,max){return min+rng()*(max-min)}});exports.createRandom=createRandom;var createRandomNumber=(0,_factory.factory)(name,["typed","config","?on"],function(_ref2){var typed=_ref2.typed,config=_ref2.config,on=_ref2.on,rng=(_ref2.matrix,(0,_seededRNG.createRng)(config.randomSeed));return on&&on("config",function(curr,prev){curr.randomSeed!==prev.randomSeed&&(rng=(0,_seededRNG.createRng)(curr.randomSeed))}),typed(name,{"":function(){return _random(0,1)},number:function(max){return _random(0,max)},"number, number":_random});function _random(min,max){return min+rng()*(max-min)}});exports.createRandomNumber=createRandomNumber},{"../../utils/factory":931,"../../utils/is":933,"./util/randomMatrix":792,"./util/seededRNG":793}],791:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRandomInt=void 0;var _factory=require("../../utils/factory"),_randomMatrix=require("./util/randomMatrix"),_seededRNG=require("./util/seededRNG"),_is=require("../../utils/is"),dependencies=["typed","config","?on"],createRandomInt=(0,_factory.factory)("randomInt",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,on=_ref.on,rng=(0,_seededRNG.createRng)(config.randomSeed);return on&&on("config",function(curr,prev){curr.randomSeed!==prev.randomSeed&&(rng=(0,_seededRNG.createRng)(curr.randomSeed))}),typed("randomInt",{"":function(){return _randomInt(0,1)},number:function(max){return _randomInt(0,max)},"number, number":_randomInt,"Array | Matrix":function(size){return _randomIntMatrix(size,0,1)},"Array | Matrix, number":function(size,max){return _randomIntMatrix(size,0,max)},"Array | Matrix, number, number":_randomIntMatrix});function _randomIntMatrix(size,min,max){var res=(0,_randomMatrix.randomMatrix)(size.valueOf(),function(){return _randomInt(min,max)});return(0,_is.isMatrix)(size)?size.create(res):res}function _randomInt(min,max){return Math.floor(min+rng()*(max-min))}});exports.createRandomInt=createRandomInt},{"../../utils/factory":931,"../../utils/is":933,"./util/randomMatrix":792,"./util/seededRNG":793}],792:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomMatrix=function randomMatrix(size,random){var data=[];size=size.slice(0);if(1<size.length)for(var i=0,length=size.shift();i<length;i++)data.push(randomMatrix(size,random));else for(var _i=0,_length=size.shift();_i<_length;_i++)data.push(random());return data}},{}],793:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRng=function(randomSeed){var random;return function(seed){random=null===seed?singletonRandom:(0,_seedRandom.default)(String(seed))}(randomSeed),function(){return random()}};var obj,_seedRandom=(obj=require("seed-random"))&&obj.__esModule?obj:{default:obj};var singletonRandom=(0,_seedRandom.default)()},{"seed-random":944}],794:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCompareNumber=exports.createCompare=void 0;var _nearlyEqual=require("../../utils/bignumber/nearlyEqual"),_number=require("../../utils/number"),_factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm03"),_algorithm2=require("../../type/matrix/utils/algorithm12"),_algorithm3=require("../../type/matrix/utils/algorithm14"),_algorithm4=require("../../type/matrix/utils/algorithm13"),_algorithm5=require("../../type/matrix/utils/algorithm05"),name="compare",dependencies=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix"],createCompare=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,equalScalar=_ref.equalScalar,matrix=_ref.matrix,BigNumber=_ref.BigNumber,Fraction=_ref.Fraction,DenseMatrix=_ref.DenseMatrix,algorithm03=(0,_algorithm.createAlgorithm03)({typed:typed}),algorithm05=(0,_algorithm5.createAlgorithm05)({typed:typed,equalScalar:equalScalar}),algorithm12=(0,_algorithm2.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm4.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm3.createAlgorithm14)({typed:typed}),compare=typed(name,{"boolean, boolean":function(x,y){return x===y?0:y<x?1:-1},"number, number":function(x,y){return(0,_number.nearlyEqual)(x,y,config.epsilon)?0:y<x?1:-1},"BigNumber, BigNumber":function(x,y){return(0,_nearlyEqual.nearlyEqual)(x,y,config.epsilon)?new BigNumber(0):new BigNumber(x.cmp(y))},"Fraction, Fraction":function(x,y){return new Fraction(x.compare(y))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return compare(x.value,y.value)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm05(x,y,compare)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm03(y,x,compare,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,compare,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,compare)},"Array, Array":function(x,y){return compare(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return compare(matrix(x),y)},"Matrix, Array":function(x,y){return compare(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm12(x,y,compare,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,compare,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,compare,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,compare,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,compare,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,compare,!0).valueOf()}});return compare});exports.createCompare=createCompare;var createCompareNumber=(0,_factory.factory)(name,["typed","config"],function(_ref2){var typed=_ref2.typed,config=_ref2.config;return typed(name,{"number, number":function(x,y){return(0,_number.nearlyEqual)(x,y,config.epsilon)?0:y<x?1:-1}})});exports.createCompareNumber=createCompareNumber},{"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm05":904,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/bignumber/nearlyEqual":926,"../../utils/factory":931,"../../utils/number":937}],795:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCompareNatural=void 0;var obj,_javascriptNaturalSort=(obj=require("javascript-natural-sort"))&&obj.__esModule?obj:{default:obj},_is=require("../../utils/is"),_factory=require("../../utils/factory");var name="compareNatural",dependencies=["typed","compare"],createCompareNatural=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,compare=_ref.compare,compareBooleans=compare.signatures["boolean,boolean"],compareNatural=typed(name,{"any, any":function(x,y){var c,typeX=(0,_is.typeOf)(x),typeY=(0,_is.typeOf)(y);if(!("number"!==typeX&&"BigNumber"!==typeX&&"Fraction"!==typeX||"number"!==typeY&&"BigNumber"!==typeY&&"Fraction"!==typeY))return"0"!==(c=compare(x,y)).toString()?0<c?1:-1:(0,_javascriptNaturalSort.default)(typeX,typeY);if("Array"===typeX||"Matrix"===typeX||"Array"===typeY||"Matrix"===typeY)return 0!==(c=function compareMatricesAndArrays(x,y){if((0,_is.isSparseMatrix)(x)&&(0,_is.isSparseMatrix)(y))return compareArrays(x.toJSON().values,y.toJSON().values);if((0,_is.isSparseMatrix)(x))return compareMatricesAndArrays(x.toArray(),y);if((0,_is.isSparseMatrix)(y))return compareMatricesAndArrays(x,y.toArray());if((0,_is.isDenseMatrix)(x))return compareMatricesAndArrays(x.toJSON().data,y);if((0,_is.isDenseMatrix)(y))return compareMatricesAndArrays(x,y.toJSON().data);if(!Array.isArray(x))return compareMatricesAndArrays([x],y);if(!Array.isArray(y))return compareMatricesAndArrays(x,[y]);return compareArrays(x,y)}(x,y))?c:(0,_javascriptNaturalSort.default)(typeX,typeY);if(typeX!==typeY)return(0,_javascriptNaturalSort.default)(typeX,typeY);if("Complex"===typeX)return function(x,y){if(x.re>y.re)return 1;if(x.re<y.re)return-1;if(x.im>y.im)return 1;if(x.im<y.im)return-1;return 0}(x,y);if("Unit"===typeX)return x.equalBase(y)?compareNatural(x.value,y.value):compareArrays(x.formatUnits(),y.formatUnits());if("boolean"===typeX)return compareBooleans(x,y);if("string"===typeX)return(0,_javascriptNaturalSort.default)(x,y);if("Object"===typeX)return function(x,y){var keysX=Object.keys(x),keysY=Object.keys(y);keysX.sort(_javascriptNaturalSort.default),keysY.sort(_javascriptNaturalSort.default);var c=compareArrays(keysX,keysY);if(0!==c)return c;for(var i=0;i<keysX.length;i++){var v=compareNatural(x[keysX[i]],y[keysY[i]]);if(0!==v)return v}return 0}(x,y);if("null"===typeX)return 0;if("undefined"===typeX)return 0;throw new TypeError('Unsupported type of value "'+typeX+'"')}});function compareArrays(x,y){for(var i=0,ii=Math.min(x.length,y.length);i<ii;i++){var v=compareNatural(x[i],y[i]);if(0!==v)return v}return x.length>y.length?1:x.length<y.length?-1:0}return compareNatural});exports.createCompareNatural=createCompareNatural},{"../../utils/factory":931,"../../utils/is":933,"javascript-natural-sort":58}],796:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCompareTextNumber=exports.createCompareText=void 0;var _string=require("../../utils/string"),_factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm14"),_algorithm2=require("../../type/matrix/utils/algorithm13"),name="compareText",dependencies=["typed","matrix"],createCompareText=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,algorithm13=(0,_algorithm2.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm.createAlgorithm14)({typed:typed}),compareText=typed(name,{"any, any":_string.compareText,"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,_string.compareText)},"Array, Array":function(x,y){return compareText(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return compareText(matrix(x),y)},"Matrix, Array":function(x,y){return compareText(x,matrix(y))},"DenseMatrix, any":function(x,y){return algorithm14(x,y,_string.compareText,!1)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,_string.compareText,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,_string.compareText,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,_string.compareText,!0).valueOf()}});return compareText});exports.createCompareText=createCompareText;var createCompareTextNumber=(0,_factory.factory)(name,["typed"],function(_ref2){return(0,_ref2.typed)(name,{"any, any":_string.compareText})});exports.createCompareTextNumber=createCompareTextNumber},{"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931,"../../utils/string":941}],797:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDeepEqual=void 0;var _factory=require("../../utils/factory"),dependencies=["typed","equal"],createDeepEqual=(0,_factory.factory)("deepEqual",dependencies,function(_ref){var typed=_ref.typed,equal=_ref.equal;return typed("deepEqual",{"any, any":function(x,y){return function _deepEqual(x,y){{if(Array.isArray(x)){if(Array.isArray(y)){var len=x.length;if(len!==y.length)return!1;for(var i=0;i<len;i++)if(!_deepEqual(x[i],y[i]))return!1;return!0}return!1}return!Array.isArray(y)&&equal(x,y)}}(x.valueOf(),y.valueOf())}})});exports.createDeepEqual=createDeepEqual},{"../../utils/factory":931}],798:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEqualNumber=exports.createEqual=void 0;var _factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm03"),_algorithm2=require("../../type/matrix/utils/algorithm07"),_algorithm3=require("../../type/matrix/utils/algorithm12"),_algorithm4=require("../../type/matrix/utils/algorithm13"),_algorithm5=require("../../type/matrix/utils/algorithm14"),dependencies=["typed","matrix","equalScalar","DenseMatrix"],createEqual=(0,_factory.factory)("equal",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,DenseMatrix=_ref.DenseMatrix,algorithm03=(0,_algorithm.createAlgorithm03)({typed:typed}),algorithm07=(0,_algorithm2.createAlgorithm07)({typed:typed,DenseMatrix:DenseMatrix}),algorithm12=(0,_algorithm3.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm4.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm5.createAlgorithm14)({typed:typed}),equal=typed("equal",{"any, any":function(x,y){return null===x?null===y:null===y?null===x:void 0===x?void 0===y:void 0===y?void 0===x:equalScalar(x,y)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm07(x,y,equalScalar)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm03(y,x,equalScalar,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,equalScalar,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,equalScalar)},"Array, Array":function(x,y){return equal(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return equal(matrix(x),y)},"Matrix, Array":function(x,y){return equal(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm12(x,y,equalScalar,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,equalScalar,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,equalScalar,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,equalScalar,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,equalScalar,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,equalScalar,!0).valueOf()}});return equal});exports.createEqual=createEqual;var createEqualNumber=(0,_factory.factory)("equal",["typed","equalScalar"],function(_ref2){var typed=_ref2.typed,equalScalar=_ref2.equalScalar;return typed("equal",{"any, any":function(x,y){return null===x?null===y:null===y?null===x:void 0===x?void 0===y:void 0===y?void 0===x:equalScalar(x,y)}})});exports.createEqualNumber=createEqualNumber},{"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm07":906,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],799:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEqualScalarNumber=exports.createEqualScalar=void 0;var _nearlyEqual=require("../../utils/bignumber/nearlyEqual"),_number=require("../../utils/number"),_factory=require("../../utils/factory"),_complex=require("../../utils/complex"),name="equalScalar",dependencies=["typed","config"],createEqualScalar=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,equalScalar=typed(name,{"boolean, boolean":function(x,y){return x===y},"number, number":function(x,y){return(0,_number.nearlyEqual)(x,y,config.epsilon)},"BigNumber, BigNumber":function(x,y){return x.eq(y)||(0,_nearlyEqual.nearlyEqual)(x,y,config.epsilon)},"Fraction, Fraction":function(x,y){return x.equals(y)},"Complex, Complex":function(x,y){return(0,_complex.complexEquals)(x,y,config.epsilon)},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return equalScalar(x.value,y.value)}});return equalScalar});exports.createEqualScalar=createEqualScalar;var createEqualScalarNumber=(0,_factory.factory)(name,["typed","config"],function(_ref2){var typed=_ref2.typed,config=_ref2.config;return typed(name,{"number, number":function(x,y){return(0,_number.nearlyEqual)(x,y,config.epsilon)}})});exports.createEqualScalarNumber=createEqualScalarNumber},{"../../utils/bignumber/nearlyEqual":926,"../../utils/complex":928,"../../utils/factory":931,"../../utils/number":937}],800:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEqualText=void 0;var _factory=require("../../utils/factory"),dependencies=["typed","compareText","isZero"],createEqualText=(0,_factory.factory)("equalText",dependencies,function(_ref){var typed=_ref.typed,compareText=_ref.compareText,isZero=_ref.isZero;return typed("equalText",{"any, any":function(x,y){return isZero(compareText(x,y))}})});exports.createEqualText=createEqualText},{"../../utils/factory":931}],801:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLargerNumber=exports.createLarger=void 0;var _nearlyEqual=require("../../utils/bignumber/nearlyEqual"),_number=require("../../utils/number"),_factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm03"),_algorithm2=require("../../type/matrix/utils/algorithm07"),_algorithm3=require("../../type/matrix/utils/algorithm12"),_algorithm4=require("../../type/matrix/utils/algorithm14"),_algorithm5=require("../../type/matrix/utils/algorithm13"),name="larger",dependencies=["typed","config","matrix","DenseMatrix"],createLarger=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,matrix=_ref.matrix,DenseMatrix=_ref.DenseMatrix,algorithm03=(0,_algorithm.createAlgorithm03)({typed:typed}),algorithm07=(0,_algorithm2.createAlgorithm07)({typed:typed,DenseMatrix:DenseMatrix}),algorithm12=(0,_algorithm3.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm5.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm4.createAlgorithm14)({typed:typed}),larger=typed(name,{"boolean, boolean":function(x,y){return y<x},"number, number":function(x,y){return y<x&&!(0,_number.nearlyEqual)(x,y,config.epsilon)},"BigNumber, BigNumber":function(x,y){return x.gt(y)&&!(0,_nearlyEqual.nearlyEqual)(x,y,config.epsilon)},"Fraction, Fraction":function(x,y){return 1===x.compare(y)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return larger(x.value,y.value)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm07(x,y,larger)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm03(y,x,larger,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,larger,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,larger)},"Array, Array":function(x,y){return larger(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return larger(matrix(x),y)},"Matrix, Array":function(x,y){return larger(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm12(x,y,larger,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,larger,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,larger,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,larger,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,larger,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,larger,!0).valueOf()}});return larger});exports.createLarger=createLarger;var createLargerNumber=(0,_factory.factory)(name,["typed","config"],function(_ref2){var typed=_ref2.typed,config=_ref2.config;return typed(name,{"number, number":function(x,y){return y<x&&!(0,_number.nearlyEqual)(x,y,config.epsilon)}})});exports.createLargerNumber=createLargerNumber},{"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm07":906,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/bignumber/nearlyEqual":926,"../../utils/factory":931,"../../utils/number":937}],802:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLargerEqNumber=exports.createLargerEq=void 0;var _nearlyEqual=require("../../utils/bignumber/nearlyEqual"),_number=require("../../utils/number"),_factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm03"),_algorithm2=require("../../type/matrix/utils/algorithm07"),_algorithm3=require("../../type/matrix/utils/algorithm12"),_algorithm4=require("../../type/matrix/utils/algorithm14"),_algorithm5=require("../../type/matrix/utils/algorithm13"),name="largerEq",dependencies=["typed","config","matrix","DenseMatrix"],createLargerEq=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,matrix=_ref.matrix,DenseMatrix=_ref.DenseMatrix,algorithm03=(0,_algorithm.createAlgorithm03)({typed:typed}),algorithm07=(0,_algorithm2.createAlgorithm07)({typed:typed,DenseMatrix:DenseMatrix}),algorithm12=(0,_algorithm3.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm5.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm4.createAlgorithm14)({typed:typed}),largerEq=typed(name,{"boolean, boolean":function(x,y){return y<=x},"number, number":function(x,y){return y<=x||(0,_number.nearlyEqual)(x,y,config.epsilon)},"BigNumber, BigNumber":function(x,y){return x.gte(y)||(0,_nearlyEqual.nearlyEqual)(x,y,config.epsilon)},"Fraction, Fraction":function(x,y){return-1!==x.compare(y)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return largerEq(x.value,y.value)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm07(x,y,largerEq)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm03(y,x,largerEq,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,largerEq,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,largerEq)},"Array, Array":function(x,y){return largerEq(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return largerEq(matrix(x),y)},"Matrix, Array":function(x,y){return largerEq(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm12(x,y,largerEq,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,largerEq,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,largerEq,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,largerEq,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,largerEq,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,largerEq,!0).valueOf()}});return largerEq});exports.createLargerEq=createLargerEq;var createLargerEqNumber=(0,_factory.factory)(name,["typed","config"],function(_ref2){var typed=_ref2.typed,config=_ref2.config;return typed(name,{"number, number":function(x,y){return y<=x||(0,_number.nearlyEqual)(x,y,config.epsilon)}})});exports.createLargerEqNumber=createLargerEqNumber},{"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm07":906,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/bignumber/nearlyEqual":926,"../../utils/factory":931,"../../utils/number":937}],803:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSmallerNumber=exports.createSmaller=void 0;var _nearlyEqual=require("../../utils/bignumber/nearlyEqual"),_number=require("../../utils/number"),_factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm03"),_algorithm2=require("../../type/matrix/utils/algorithm07"),_algorithm3=require("../../type/matrix/utils/algorithm12"),_algorithm4=require("../../type/matrix/utils/algorithm14"),_algorithm5=require("../../type/matrix/utils/algorithm13"),name="smaller",dependencies=["typed","config","matrix","DenseMatrix"],createSmaller=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,matrix=_ref.matrix,DenseMatrix=_ref.DenseMatrix,algorithm03=(0,_algorithm.createAlgorithm03)({typed:typed}),algorithm07=(0,_algorithm2.createAlgorithm07)({typed:typed,DenseMatrix:DenseMatrix}),algorithm12=(0,_algorithm3.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm5.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm4.createAlgorithm14)({typed:typed}),smaller=typed(name,{"boolean, boolean":function(x,y){return x<y},"number, number":function(x,y){return x<y&&!(0,_number.nearlyEqual)(x,y,config.epsilon)},"BigNumber, BigNumber":function(x,y){return x.lt(y)&&!(0,_nearlyEqual.nearlyEqual)(x,y,config.epsilon)},"Fraction, Fraction":function(x,y){return-1===x.compare(y)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return smaller(x.value,y.value)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm07(x,y,smaller)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm03(y,x,smaller,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,smaller,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,smaller)},"Array, Array":function(x,y){return smaller(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return smaller(matrix(x),y)},"Matrix, Array":function(x,y){return smaller(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm12(x,y,smaller,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,smaller,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,smaller,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,smaller,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,smaller,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,smaller,!0).valueOf()}});return smaller});exports.createSmaller=createSmaller;var createSmallerNumber=(0,_factory.factory)(name,["typed","config"],function(_ref2){var typed=_ref2.typed,config=_ref2.config;return typed(name,{"number, number":function(x,y){return x<y&&!(0,_number.nearlyEqual)(x,y,config.epsilon)}})});exports.createSmallerNumber=createSmallerNumber},{"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm07":906,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/bignumber/nearlyEqual":926,"../../utils/factory":931,"../../utils/number":937}],804:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSmallerEqNumber=exports.createSmallerEq=void 0;var _nearlyEqual=require("../../utils/bignumber/nearlyEqual"),_number=require("../../utils/number"),_factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm03"),_algorithm2=require("../../type/matrix/utils/algorithm07"),_algorithm3=require("../../type/matrix/utils/algorithm12"),_algorithm4=require("../../type/matrix/utils/algorithm14"),_algorithm5=require("../../type/matrix/utils/algorithm13"),name="smallerEq",dependencies=["typed","config","matrix","DenseMatrix"],createSmallerEq=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,matrix=_ref.matrix,DenseMatrix=_ref.DenseMatrix,algorithm03=(0,_algorithm.createAlgorithm03)({typed:typed}),algorithm07=(0,_algorithm2.createAlgorithm07)({typed:typed,DenseMatrix:DenseMatrix}),algorithm12=(0,_algorithm3.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm5.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm4.createAlgorithm14)({typed:typed}),smallerEq=typed(name,{"boolean, boolean":function(x,y){return x<=y},"number, number":function(x,y){return x<=y||(0,_number.nearlyEqual)(x,y,config.epsilon)},"BigNumber, BigNumber":function(x,y){return x.lte(y)||(0,_nearlyEqual.nearlyEqual)(x,y,config.epsilon)},"Fraction, Fraction":function(x,y){return 1!==x.compare(y)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return smallerEq(x.value,y.value)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm07(x,y,smallerEq)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm03(y,x,smallerEq,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,smallerEq,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,smallerEq)},"Array, Array":function(x,y){return smallerEq(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return smallerEq(matrix(x),y)},"Matrix, Array":function(x,y){return smallerEq(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm12(x,y,smallerEq,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,smallerEq,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,smallerEq,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,smallerEq,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,smallerEq,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,smallerEq,!0).valueOf()}});return smallerEq});exports.createSmallerEq=createSmallerEq;var createSmallerEqNumber=(0,_factory.factory)(name,["typed","config"],function(_ref2){var typed=_ref2.typed,config=_ref2.config;return typed(name,{"number, number":function(x,y){return x<=y||(0,_number.nearlyEqual)(x,y,config.epsilon)}})});exports.createSmallerEqNumber=createSmallerEqNumber},{"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm07":906,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/bignumber/nearlyEqual":926,"../../utils/factory":931,"../../utils/number":937}],805:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUnequalNumber=exports.createUnequal=void 0;var _factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm03"),_algorithm2=require("../../type/matrix/utils/algorithm07"),_algorithm3=require("../../type/matrix/utils/algorithm12"),_algorithm4=require("../../type/matrix/utils/algorithm14"),_algorithm5=require("../../type/matrix/utils/algorithm13"),dependencies=["typed","config","equalScalar","matrix","DenseMatrix"],createUnequal=(0,_factory.factory)("unequal",dependencies,function(_ref){var typed=_ref.typed,equalScalar=(_ref.config,_ref.equalScalar),matrix=_ref.matrix,DenseMatrix=_ref.DenseMatrix,algorithm03=(0,_algorithm.createAlgorithm03)({typed:typed}),algorithm07=(0,_algorithm2.createAlgorithm07)({typed:typed,DenseMatrix:DenseMatrix}),algorithm12=(0,_algorithm3.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm5.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm4.createAlgorithm14)({typed:typed}),unequal=typed("unequal",{"any, any":function(x,y){return null===x?null!==y:null===y?null!==x:void 0===x?void 0!==y:void 0===y?void 0!==x:_unequal(x,y)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm07(x,y,_unequal)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm03(y,x,_unequal,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,_unequal,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,_unequal)},"Array, Array":function(x,y){return unequal(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return unequal(matrix(x),y)},"Matrix, Array":function(x,y){return unequal(x,matrix(y))},"SparseMatrix, any":function(x,y){return algorithm12(x,y,_unequal,!1)},"DenseMatrix, any":function(x,y){return algorithm14(x,y,_unequal,!1)},"any, SparseMatrix":function(x,y){return algorithm12(y,x,_unequal,!0)},"any, DenseMatrix":function(x,y){return algorithm14(y,x,_unequal,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,_unequal,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,_unequal,!0).valueOf()}});function _unequal(x,y){return!equalScalar(x,y)}return unequal});exports.createUnequal=createUnequal;var createUnequalNumber=(0,_factory.factory)("unequal",["typed","equalScalar"],function(_ref2){var typed=_ref2.typed,equalScalar=_ref2.equalScalar;return typed("unequal",{"any, any":function(x,y){return null===x?null!==y:null===y?null!==x:void 0===x?void 0!==y:void 0===y?void 0!==x:!equalScalar(x,y)}})});exports.createUnequalNumber=createUnequalNumber},{"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm07":906,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],806:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSetCartesian=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","size","subset","compareNatural","Index","DenseMatrix"],createSetCartesian=(0,_factory.factory)("setCartesian",dependencies,function(_ref){var typed=_ref.typed,size=_ref.size,subset=_ref.subset,compareNatural=_ref.compareNatural,Index=_ref.Index,DenseMatrix=_ref.DenseMatrix;return typed("setCartesian",{"Array | Matrix, Array | Matrix":function(a1,a2){var result=[];if(0!==subset(size(a1),new Index(0))&&0!==subset(size(a2),new Index(0)))for(var b1=(0,_array.flatten)(Array.isArray(a1)?a1:a1.toArray()).sort(compareNatural),b2=(0,_array.flatten)(Array.isArray(a2)?a2:a2.toArray()).sort(compareNatural),result=[],i=0;i<b1.length;i++)for(var j=0;j<b2.length;j++)result.push([b1[i],b2[j]]);return Array.isArray(a1)&&Array.isArray(a2)?result:new DenseMatrix(result)}})});exports.createSetCartesian=createSetCartesian},{"../../utils/array":922,"../../utils/factory":931}],807:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSetDifference=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),name="setDifference",dependencies=["typed","size","subset","compareNatural","Index","DenseMatrix"],createSetDifference=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,size=_ref.size,subset=_ref.subset,compareNatural=_ref.compareNatural,Index=_ref.Index,DenseMatrix=_ref.DenseMatrix;return typed(name,{"Array | Matrix, Array | Matrix":function(a1,a2){if(0===subset(size(a1),new Index(0)))result=[];else{if(0===subset(size(a2),new Index(0)))return(0,_array.flatten)(a1.toArray());for(var inb2,b1=(0,_array.identify)((0,_array.flatten)(Array.isArray(a1)?a1:a1.toArray()).sort(compareNatural)),b2=(0,_array.identify)((0,_array.flatten)(Array.isArray(a2)?a2:a2.toArray()).sort(compareNatural)),result=[],i=0;i<b1.length;i++){inb2=!1;for(var j=0;j<b2.length;j++)if(0===compareNatural(b1[i].value,b2[j].value)&&b1[i].identifier===b2[j].identifier){inb2=!0;break}inb2||result.push(b1[i])}}return Array.isArray(a1)&&Array.isArray(a2)?(0,_array.generalize)(result):new DenseMatrix((0,_array.generalize)(result))}})});exports.createSetDifference=createSetDifference},{"../../utils/array":922,"../../utils/factory":931}],808:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSetDistinct=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","size","subset","compareNatural","Index","DenseMatrix"],createSetDistinct=(0,_factory.factory)("setDistinct",dependencies,function(_ref){var typed=_ref.typed,size=_ref.size,subset=_ref.subset,compareNatural=_ref.compareNatural,Index=_ref.Index,DenseMatrix=_ref.DenseMatrix;return typed("setDistinct",{"Array | Matrix":function(a){if(0===subset(size(a),new Index(0)))result=[];else{var result,b=(0,_array.flatten)(Array.isArray(a)?a:a.toArray()).sort(compareNatural);(result=[]).push(b[0]);for(var i=1;i<b.length;i++)0!==compareNatural(b[i],b[i-1])&&result.push(b[i])}return Array.isArray(a)?result:new DenseMatrix(result)}})});exports.createSetDistinct=createSetDistinct},{"../../utils/array":922,"../../utils/factory":931}],809:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSetIntersect=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","size","subset","compareNatural","Index","DenseMatrix"],createSetIntersect=(0,_factory.factory)("setIntersect",dependencies,function(_ref){var typed=_ref.typed,size=_ref.size,subset=_ref.subset,compareNatural=_ref.compareNatural,Index=_ref.Index,DenseMatrix=_ref.DenseMatrix;return typed("setIntersect",{"Array | Matrix, Array | Matrix":function(a1,a2){if(0===subset(size(a1),new Index(0))||0===subset(size(a2),new Index(0)))result=[];else for(var b1=(0,_array.identify)((0,_array.flatten)(Array.isArray(a1)?a1:a1.toArray()).sort(compareNatural)),b2=(0,_array.identify)((0,_array.flatten)(Array.isArray(a2)?a2:a2.toArray()).sort(compareNatural)),result=[],i=0;i<b1.length;i++)for(var j=0;j<b2.length;j++)if(0===compareNatural(b1[i].value,b2[j].value)&&b1[i].identifier===b2[j].identifier){result.push(b1[i]);break}return Array.isArray(a1)&&Array.isArray(a2)?(0,_array.generalize)(result):new DenseMatrix((0,_array.generalize)(result))}})});exports.createSetIntersect=createSetIntersect},{"../../utils/array":922,"../../utils/factory":931}],810:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSetIsSubset=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","size","subset","compareNatural","Index"],createSetIsSubset=(0,_factory.factory)("setIsSubset",dependencies,function(_ref){var typed=_ref.typed,size=_ref.size,subset=_ref.subset,compareNatural=_ref.compareNatural,Index=_ref.Index;return typed("setIsSubset",{"Array | Matrix, Array | Matrix":function(a1,a2){if(0===subset(size(a1),new Index(0)))return!0;if(0===subset(size(a2),new Index(0)))return!1;for(var inb2,b1=(0,_array.identify)((0,_array.flatten)(Array.isArray(a1)?a1:a1.toArray()).sort(compareNatural)),b2=(0,_array.identify)((0,_array.flatten)(Array.isArray(a2)?a2:a2.toArray()).sort(compareNatural)),i=0;i<b1.length;i++){inb2=!1;for(var j=0;j<b2.length;j++)if(0===compareNatural(b1[i].value,b2[j].value)&&b1[i].identifier===b2[j].identifier){inb2=!0;break}if(!1===inb2)return!1}return!0}})});exports.createSetIsSubset=createSetIsSubset},{"../../utils/array":922,"../../utils/factory":931}],811:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSetMultiplicity=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),name="setMultiplicity",dependencies=["typed","size","subset","compareNatural","Index"],createSetMultiplicity=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,size=_ref.size,subset=_ref.subset,compareNatural=_ref.compareNatural,Index=_ref.Index;return typed(name,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(e,a){if(0===subset(size(a),new Index(0)))return 0;for(var b=(0,_array.flatten)(Array.isArray(a)?a:a.toArray()),count=0,i=0;i<b.length;i++)0===compareNatural(b[i],e)&&count++;return count}})});exports.createSetMultiplicity=createSetMultiplicity},{"../../utils/array":922,"../../utils/factory":931}],812:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSetPowerset=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","size","subset","compareNatural","Index"],createSetPowerset=(0,_factory.factory)("setPowerset",dependencies,function(_ref){var typed=_ref.typed,size=_ref.size,subset=_ref.subset,compareNatural=_ref.compareNatural,Index=_ref.Index;return typed("setPowerset",{"Array | Matrix":function(a){if(0===subset(size(a),new Index(0)))return[];for(var b=(0,_array.flatten)(Array.isArray(a)?a:a.toArray()).sort(compareNatural),result=[],number=0;number.toString(2).length<=b.length;)result.push(function(array,bitarray){for(var result=[],i=0;i<bitarray.length;i++)"1"===bitarray[i]&&result.push(array[i]);return result}(b,number.toString(2).split("").reverse())),number++;return function(array){for(var temp=[],i=array.length-1;0<i;i--)for(var j=0;j<i;j++)array[j].length>array[j+1].length&&(temp=array[j],array[j]=array[j+1],array[j+1]=temp);return array}(result)}})});exports.createSetPowerset=createSetPowerset},{"../../utils/array":922,"../../utils/factory":931}],813:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSetSize=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","compareNatural"],createSetSize=(0,_factory.factory)("setSize",dependencies,function(_ref){var typed=_ref.typed,compareNatural=_ref.compareNatural;return typed("setSize",{"Array | Matrix":function(a){return Array.isArray(a)?(0,_array.flatten)(a).length:(0,_array.flatten)(a.toArray()).length},"Array | Matrix, boolean":function(a,unique){if(!1===unique||0===a.length)return Array.isArray(a)?(0,_array.flatten)(a).length:(0,_array.flatten)(a.toArray()).length;for(var b=(0,_array.flatten)(Array.isArray(a)?a:a.toArray()).sort(compareNatural),count=1,i=1;i<b.length;i++)0!==compareNatural(b[i],b[i-1])&&count++;return count}})});exports.createSetSize=createSetSize},{"../../utils/array":922,"../../utils/factory":931}],814:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSetSymDifference=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),name="setSymDifference",dependencies=["typed","size","concat","subset","setDifference","Index"],createSetSymDifference=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,size=_ref.size,concat=_ref.concat,subset=_ref.subset,setDifference=_ref.setDifference,Index=_ref.Index;return typed(name,{"Array | Matrix, Array | Matrix":function(a1,a2){if(0===subset(size(a1),new Index(0)))return(0,_array.flatten)(a2);if(0===subset(size(a2),new Index(0)))return(0,_array.flatten)(a1);var b1=(0,_array.flatten)(a1),b2=(0,_array.flatten)(a2);return concat(setDifference(b1,b2),setDifference(b2,b1))}})});exports.createSetSymDifference=createSetSymDifference},{"../../utils/array":922,"../../utils/factory":931}],815:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSetUnion=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],createSetUnion=(0,_factory.factory)("setUnion",dependencies,function(_ref){var typed=_ref.typed,size=_ref.size,concat=_ref.concat,subset=_ref.subset,setIntersect=_ref.setIntersect,setSymDifference=_ref.setSymDifference,Index=_ref.Index;return typed("setUnion",{"Array | Matrix, Array | Matrix":function(a1,a2){if(0===subset(size(a1),new Index(0)))return(0,_array.flatten)(a2);if(0===subset(size(a2),new Index(0)))return(0,_array.flatten)(a1);var b1=(0,_array.flatten)(a1),b2=(0,_array.flatten)(a2);return concat(setSymDifference(b1,b2),setIntersect(b1,b2))}})});exports.createSetUnion=createSetUnion},{"../../utils/array":922,"../../utils/factory":931}],816:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createErf=void 0;var _collection=require("../../utils/collection"),_number=require("../../utils/number"),dependencies=["typed"],createErf=(0,require("../../utils/factory").factory)("erf",dependencies,function(_ref){var erf=(0,_ref.typed)("name",{number:function(x){var y=Math.abs(x);return MAX_NUM<=y?(0,_number.sign)(x):y<=THRESH?(0,_number.sign)(x)*function(y){var i,ysq=y*y,xnum=P[0][4]*ysq,xden=ysq;for(i=0;i<3;i+=1)xnum=(xnum+P[0][i])*ysq,xden=(xden+Q[0][i])*ysq;return y*(xnum+P[0][3])/(xden+Q[0][3])}(y):y<=4?(0,_number.sign)(x)*(1-function(y){var i,xnum=P[1][8]*y,xden=y;for(i=0;i<7;i+=1)xnum=(xnum+P[1][i])*y,xden=(xden+Q[1][i])*y;var result=(xnum+P[1][7])/(xden+Q[1][7]),ysq=parseInt(16*y)/16,del=(y-ysq)*(y+ysq);return Math.exp(-ysq*ysq)*Math.exp(-del)*result}(y)):(0,_number.sign)(x)*(1-function(y){var i,ysq=1/(y*y),xnum=P[2][5]*ysq,xden=ysq;for(i=0;i<4;i+=1)xnum=(xnum+P[2][i])*ysq,xden=(xden+Q[2][i])*ysq;var result=ysq*(xnum+P[2][4])/(xden+Q[2][4]);result=(SQRPI-result)/y,ysq=parseInt(16*y)/16;var del=(y-ysq)*(y+ysq);return Math.exp(-ysq*ysq)*Math.exp(-del)*result}(y))},"Array | Matrix":function(n){return(0,_collection.deepMap)(n,erf)}});return erf});exports.createErf=createErf;var THRESH=.46875,SQRPI=.5641895835477563,P=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,2.1531153547440383e-8],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Q=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],MAX_NUM=Math.pow(2,53)},{"../../utils/collection":927,"../../utils/factory":931,"../../utils/number":937}],817:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMad=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),_improveErrorMessage=require("./utils/improveErrorMessage"),dependencies=["typed","abs","map","median","subtract"],createMad=(0,_factory.factory)("mad",dependencies,function(_ref){var typed=_ref.typed,abs=_ref.abs,map=_ref.map,median=_ref.median,subtract=_ref.subtract;return typed("mad",{"Array | Matrix":_mad,"...":_mad});function _mad(array){if(0===(array=(0,_array.flatten)(array.valueOf())).length)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var med=median(array);return median(map(array,function(value){return abs(subtract(value,med))}))}catch(err){throw err instanceof TypeError&&-1!==err.message.indexOf("median")?new TypeError(err.message.replace("median","mad")):(0,_improveErrorMessage.improveErrorMessage)(err,"mad")}}});exports.createMad=createMad},{"../../utils/array":922,"../../utils/factory":931,"./utils/improveErrorMessage":827}],818:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMax=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),_improveErrorMessage=require("./utils/improveErrorMessage"),dependencies=["typed","larger"],createMax=(0,_factory.factory)("max",dependencies,function(_ref){var typed=_ref.typed,larger=_ref.larger;return typed("max",{"Array | Matrix":_max,"Array | Matrix, number | BigNumber":function(array,dim){return(0,_collection.reduce)(array,dim.valueOf(),_largest)},"...":function(args){if((0,_collection.containsCollections)(args))throw new TypeError("Scalar values expected in function max");return _max(args)}});function _largest(x,y){try{return larger(x,y)?x:y}catch(err){throw(0,_improveErrorMessage.improveErrorMessage)(err,"max",y)}}function _max(array){var res;if((0,_collection.deepForEach)(array,function(value){try{isNaN(value)&&"number"==typeof value?res=NaN:void 0!==res&&!larger(value,res)||(res=value)}catch(err){throw(0,_improveErrorMessage.improveErrorMessage)(err,"max",value)}}),void 0===res)throw new Error("Cannot calculate max of an empty array");return res}});exports.createMax=createMax},{"../../utils/collection":927,"../../utils/factory":931,"./utils/improveErrorMessage":827}],819:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMean=void 0;var _collection=require("../../utils/collection"),_array=require("../../utils/array"),_factory=require("../../utils/factory"),_improveErrorMessage=require("./utils/improveErrorMessage"),dependencies=["typed","add","divide"],createMean=(0,_factory.factory)("mean",dependencies,function(_ref){var typed=_ref.typed,add=_ref.add,divide=_ref.divide;return typed("mean",{"Array | Matrix":_mean,"Array | Matrix, number | BigNumber":function(array,dim){try{var sum=(0,_collection.reduce)(array,dim,add),s=Array.isArray(array)?(0,_array.arraySize)(array):array.size();return divide(sum,s[dim])}catch(err){throw(0,_improveErrorMessage.improveErrorMessage)(err,"mean")}},"...":function(args){if((0,_collection.containsCollections)(args))throw new TypeError("Scalar values expected in function mean");return _mean(args)}});function _mean(array){var sum,num=0;if((0,_collection.deepForEach)(array,function(value){try{sum=void 0===sum?value:add(sum,value),num++}catch(err){throw(0,_improveErrorMessage.improveErrorMessage)(err,"mean",value)}}),0===num)throw new Error("Cannot calculate the mean of an empty array");return divide(sum,num)}});exports.createMean=createMean},{"../../utils/array":922,"../../utils/collection":927,"../../utils/factory":931,"./utils/improveErrorMessage":827}],820:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMedian=void 0;var _collection=require("../../utils/collection"),_array=require("../../utils/array"),_factory=require("../../utils/factory"),_improveErrorMessage=require("./utils/improveErrorMessage"),dependencies=["typed","add","divide","compare","partitionSelect"],createMedian=(0,_factory.factory)("median",dependencies,function(_ref){var typed=_ref.typed,add=_ref.add,divide=_ref.divide,compare=_ref.compare,partitionSelect=_ref.partitionSelect,median=typed("median",{"Array | Matrix":_median,"Array | Matrix, number | BigNumber":function(){throw new Error("median(A, dim) is not yet supported")},"...":function(args){if((0,_collection.containsCollections)(args))throw new TypeError("Scalar values expected in function median");return _median(args)}});function _median(array){try{var num=(array=(0,_array.flatten)(array.valueOf())).length;if(0===num)throw new Error("Cannot calculate median of an empty array");if(num%2==0){for(var mid=num/2-1,right=partitionSelect(array,1+mid),left=array[mid],i=0;i<mid;++i)0<compare(array[i],left)&&(left=array[i]);return middle2(left,right)}var m=partitionSelect(array,(num-1)/2);return middle(m)}catch(err){throw(0,_improveErrorMessage.improveErrorMessage)(err,"median")}}var middle=typed({"number | BigNumber | Complex | Unit":function(value){return value}}),middle2=typed({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(left,right){return divide(add(left,right),2)}});return median});exports.createMedian=createMedian},{"../../utils/array":922,"../../utils/collection":927,"../../utils/factory":931,"./utils/improveErrorMessage":827}],821:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMin=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),_improveErrorMessage=require("./utils/improveErrorMessage"),dependencies=["typed","smaller"],createMin=(0,_factory.factory)("min",dependencies,function(_ref){var typed=_ref.typed,smaller=_ref.smaller;return typed("min",{"Array | Matrix":_min,"Array | Matrix, number | BigNumber":function(array,dim){return(0,_collection.reduce)(array,dim.valueOf(),_smallest)},"...":function(args){if((0,_collection.containsCollections)(args))throw new TypeError("Scalar values expected in function min");return _min(args)}});function _smallest(x,y){try{return smaller(x,y)?x:y}catch(err){throw(0,_improveErrorMessage.improveErrorMessage)(err,"min",y)}}function _min(array){var min;if((0,_collection.deepForEach)(array,function(value){try{isNaN(value)&&"number"==typeof value?min=NaN:void 0!==min&&!smaller(value,min)||(min=value)}catch(err){throw(0,_improveErrorMessage.improveErrorMessage)(err,"min",value)}}),void 0===min)throw new Error("Cannot calculate min of an empty array");return min}});exports.createMin=createMin},{"../../utils/collection":927,"../../utils/factory":931,"./utils/improveErrorMessage":827}],822:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMode=void 0;var _array=require("../../utils/array"),_factory=require("../../utils/factory"),dependencies=["typed","isNaN","isNumeric"],createMode=(0,_factory.factory)("mode",dependencies,function(_ref){var typed=_ref.typed,isNaN=_ref.isNaN,isNumeric=_ref.isNumeric;return typed("mode",{"Array | Matrix":_mode,"...":_mode});function _mode(values){if(0===(values=(0,_array.flatten)(values.valueOf())).length)throw new Error("Cannot calculate mode of an empty array");for(var count={},mode=[],max=0,i=0;i<values.length;i++){var value=values[i];if(isNumeric(value)&&isNaN(value))throw new Error("Cannot calculate mode of an array containing NaN values");value in count||(count[value]=0),count[value]++,count[value]===max?mode.push(value):count[value]>max&&(max=count[value],mode=[value])}return mode}});exports.createMode=createMode},{"../../utils/array":922,"../../utils/factory":931}],823:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createProd=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),_improveErrorMessage=require("./utils/improveErrorMessage"),dependencies=["typed","multiply"],createProd=(0,_factory.factory)("prod",dependencies,function(_ref){var typed=_ref.typed,multiply=_ref.multiply;return typed("prod",{"Array | Matrix":_prod,"Array | Matrix, number | BigNumber":function(){throw new Error("prod(A, dim) is not yet supported")},"...":_prod});function _prod(array){var prod;if((0,_collection.deepForEach)(array,function(value){try{prod=void 0===prod?value:multiply(prod,value)}catch(err){throw(0,_improveErrorMessage.improveErrorMessage)(err,"prod",value)}}),void 0===prod)throw new Error("Cannot calculate prod of an empty array");return prod}});exports.createProd=createProd},{"../../utils/collection":927,"../../utils/factory":931,"./utils/improveErrorMessage":827}],824:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createQuantileSeq=void 0;var _is=require("../../utils/is"),_number=require("../../utils/number"),_array=require("../../utils/array"),dependencies=["typed","add","multiply","partitionSelect","compare"],createQuantileSeq=(0,require("../../utils/factory").factory)("quantileSeq",dependencies,function(_ref){var typed=_ref.typed,add=_ref.add,multiply=_ref.multiply,partitionSelect=_ref.partitionSelect,compare=_ref.compare;function _quantileSeq(array,prob,sorted){var flat=(0,_array.flatten)(array),len=flat.length;if(0===len)throw new Error("Cannot calculate quantile of an empty sequence");if((0,_is.isNumber)(prob)){var _index=prob*(len-1),_fracPart=_index%1;if(0==_fracPart){var value=sorted?flat[_index]:partitionSelect(flat,_index);return validate(value),value}var _left,_right,_integerPart=Math.floor(_index);if(sorted)_left=flat[_integerPart],_right=flat[_integerPart+1];else{_right=partitionSelect(flat,_integerPart+1),_left=flat[_integerPart];for(var i=0;i<_integerPart;++i)0<compare(flat[i],_left)&&(_left=flat[i])}return validate(_left),validate(_right),add(multiply(_left,1-_fracPart),multiply(_right,_fracPart))}var index=prob.times(len-1);if(index.isInteger()){index=index.toNumber();var _value=sorted?flat[index]:partitionSelect(flat,index);return validate(_value),_value}var left,right,integerPart=index.floor(),fracPart=index.minus(integerPart),integerPartNumber=integerPart.toNumber();if(sorted)left=flat[integerPartNumber],right=flat[integerPartNumber+1];else{right=partitionSelect(flat,integerPartNumber+1),left=flat[integerPartNumber];for(var _i3=0;_i3<integerPartNumber;++_i3)0<compare(flat[_i3],left)&&(left=flat[_i3])}validate(left),validate(right);var one=new fracPart.constructor(1);return add(multiply(left,one.minus(fracPart)),multiply(right,fracPart))}var validate=typed({"number | BigNumber | Unit":function(x){return x}});return function(data,probOrN,sorted){var dataArr,one;if(arguments.length<2||3<arguments.length)throw new SyntaxError("Function quantileSeq requires two or three parameters");if((0,_is.isCollection)(data)){if("boolean"!=typeof(sorted=sorted||!1))throw new TypeError("Unexpected type of argument in function quantileSeq");if(dataArr=data.valueOf(),(0,_is.isNumber)(probOrN)){if(probOrN<0)throw new Error("N/prob must be non-negative");if(probOrN<=1)return _quantileSeq(dataArr,probOrN,sorted);if(1<probOrN){if(!(0,_number.isInteger)(probOrN))throw new Error("N must be a positive integer");for(var nPlusOne=probOrN+1,probArr=new Array(probOrN),i=0;i<probOrN;)probArr[i]=_quantileSeq(dataArr,++i/nPlusOne,sorted);return probArr}}if((0,_is.isBigNumber)(probOrN)){var BigNumber=probOrN.constructor;if(probOrN.isNegative())throw new Error("N/prob must be non-negative");if(one=new BigNumber(1),probOrN.lte(one))return new BigNumber(_quantileSeq(dataArr,probOrN,sorted));if(probOrN.gt(one)){if(!probOrN.isInteger())throw new Error("N must be a positive integer");var intN=probOrN.toNumber();if(4294967295<intN)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var _nPlusOne=new BigNumber(intN+1);probArr=new Array(intN);for(var _i=0;_i<intN;)probArr[_i]=new BigNumber(_quantileSeq(dataArr,new BigNumber(++_i).div(_nPlusOne),sorted));return probArr}}if(Array.isArray(probOrN)){probArr=new Array(probOrN.length);for(var _i2=0;_i2<probArr.length;++_i2){var currProb=probOrN[_i2];if((0,_is.isNumber)(currProb)){if(currProb<0||1<currProb)throw new Error("Probability must be between 0 and 1, inclusive")}else{if(!(0,_is.isBigNumber)(currProb))throw new TypeError("Unexpected type of argument in function quantileSeq");if(one=new currProb.constructor(1),currProb.isNegative()||currProb.gt(one))throw new Error("Probability must be between 0 and 1, inclusive")}probArr[_i2]=_quantileSeq(dataArr,currProb,sorted)}return probArr}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}});exports.createQuantileSeq=createQuantileSeq},{"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937}],825:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStd=void 0;var _factory=require("../../utils/factory"),dependencies=["typed","sqrt","variance"],createStd=(0,_factory.factory)("std",dependencies,function(_ref){var typed=_ref.typed,sqrt=_ref.sqrt,variance=_ref.variance;return typed("std",{"Array | Matrix":_std,"Array | Matrix, string":_std,"Array | Matrix, number | BigNumber":_std,"Array | Matrix, number | BigNumber, string":_std,"...":function(args){return _std(args)}});function _std(array,normalization){if(0===array.length)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{return sqrt(variance.apply(null,arguments))}catch(err){throw err instanceof TypeError&&-1!==err.message.indexOf(" variance")?new TypeError(err.message.replace(" variance"," std")):err}}});exports.createStd=createStd},{"../../utils/factory":931}],826:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSum=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),_improveErrorMessage=require("./utils/improveErrorMessage"),_noop=require("../../utils/noop"),dependencies=["typed","config","add","?bignumber","?fraction"],createSum=(0,_factory.factory)("sum",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,add=_ref.add,bignumber=_ref.bignumber,fraction=_ref.fraction;return typed("sum",{"Array | Matrix":_sum,"Array | Matrix, number | BigNumber":function(array,dim){try{return(0,_collection.reduce)(array,dim,add)}catch(err){throw(0,_improveErrorMessage.improveErrorMessage)(err,"sum")}},"...":function(args){if((0,_collection.containsCollections)(args))throw new TypeError("Scalar values expected in function sum");return _sum(args)}});function _sum(array){var sum;if((0,_collection.deepForEach)(array,function(value){try{sum=void 0===sum?value:add(sum,value)}catch(err){throw(0,_improveErrorMessage.improveErrorMessage)(err,"sum",value)}}),void 0===sum)switch(config.number){case"number":return 0;case"BigNumber":return bignumber?bignumber(0):(0,_noop.noBignumber)();case"Fraction":return fraction?fraction(0):(0,_noop.noFraction)();default:return 0}return sum}});exports.createSum=createSum},{"../../utils/collection":927,"../../utils/factory":931,"../../utils/noop":936,"./utils/improveErrorMessage":827}],827:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.improveErrorMessage=function(err,fnName,value){var details;return-1===String(err).indexOf("Unexpected type")?-1===String(err).indexOf("complex numbers")?err:(details=2<arguments.length?" (type: "+(0,_is.typeOf)(value)+", value: "+JSON.stringify(value)+")":"",new TypeError("Cannot calculate "+fnName+", no ordering relation is defined for complex numbers"+details)):(details=2<arguments.length?" (type: "+(0,_is.typeOf)(value)+", value: "+JSON.stringify(value)+")":" (type: "+err.data.actual+")",new TypeError("Cannot calculate "+fnName+", unexpected type of argument"+details))};var _is=require("../../../utils/is")},{"../../../utils/is":933}],828:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDeprecatedVar=exports.createVariance=void 0;var _collection=require("../../utils/collection"),_is=require("../../utils/is"),_factory=require("../../utils/factory"),_improveErrorMessage=require("./utils/improveErrorMessage"),_log=require("../../utils/log"),dependencies=["typed","add","subtract","multiply","divide","apply","isNaN"],createVariance=(0,_factory.factory)("variance",dependencies,function(_ref){var typed=_ref.typed,add=_ref.add,subtract=_ref.subtract,multiply=_ref.multiply,divide=_ref.divide,apply=_ref.apply,isNaN=_ref.isNaN;return typed("variance",{"Array | Matrix":function(array){return _var(array,"unbiased")},"Array | Matrix, string":_var,"Array | Matrix, number | BigNumber":function(array,dim){return _varDim(array,dim,"unbiased")},"Array | Matrix, number | BigNumber, string":_varDim,"...":function(args){return _var(args,"unbiased")}});function _var(array,normalization){var sum=0,num=0;if(0===array.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if((0,_collection.deepForEach)(array,function(value){try{sum=add(sum,value),num++}catch(err){throw(0,_improveErrorMessage.improveErrorMessage)(err,"variance",value)}}),0===num)throw new Error("Cannot calculate variance of an empty array");var mean=divide(sum,num),sum=0;if((0,_collection.deepForEach)(array,function(value){var diff=subtract(value,mean);sum=add(sum,multiply(diff,diff))}),isNaN(sum))return sum;switch(normalization){case"uncorrected":return divide(sum,num);case"biased":return divide(sum,num+1);case"unbiased":var zero=(0,_is.isBigNumber)(sum)?sum.mul(0):0;return 1===num?zero:divide(sum,num-1);default:throw new Error('Unknown normalization "'+normalization+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function _varDim(array,dim,normalization){try{if(0===array.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return apply(array,dim,function(x){return _var(x,normalization)})}catch(err){throw(0,_improveErrorMessage.improveErrorMessage)(err,"variance")}}});exports.createVariance=createVariance;var createDeprecatedVar=(0,_factory.factory)("var",["variance"],function(_ref2){var variance=_ref2.variance;return function(){(0,_log.warnOnce)('Function "var" has been renamed to "variance" in v6.0.0, please use the new function instead.');for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return variance.apply(variance,args)}});exports.createDeprecatedVar=createDeprecatedVar},{"../../utils/collection":927,"../../utils/factory":931,"../../utils/is":933,"../../utils/log":935,"./utils/improveErrorMessage":827}],829:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFormat=void 0;var _string=require("../../utils/string"),_factory=require("../../utils/factory"),dependencies=["typed"],createFormat=(0,_factory.factory)("format",dependencies,function(_ref){return(0,_ref.typed)("format",{any:_string.format,"any, Object | function | number":_string.format})});exports.createFormat=createFormat},{"../../utils/factory":931,"../../utils/string":941}],830:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPrint=void 0;var _string=require("../../utils/string"),_is=require("../../utils/is"),_factory=require("../../utils/factory"),dependencies=["typed"],createPrint=(0,_factory.factory)("print",dependencies,function(_ref){return(0,_ref.typed)("print",{"string, Object | Array":_print,"string, Object | Array, number | Object":_print})});function _print(template,values,options){return template.replace(/\$([\w.]+)/g,function(original,key){for(var keys=key.split("."),value=values[keys.shift()];keys.length&&void 0!==value;)var k=keys.shift(),value=k?value[k]:value+".";return void 0!==value?(0,_is.isString)(value)?value:(0,_string.format)(value,options):original})}exports.createPrint=createPrint},{"../../utils/factory":931,"../../utils/is":933,"../../utils/string":941}],831:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAcos=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),dependencies=["typed","config","Complex"],createAcos=(0,_factory.factory)("acos",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,Complex=_ref.Complex,acos=typed("acos",{number:function(x){return-1<=x&&x<=1||config.predictable?Math.acos(x):new Complex(x,0).acos()},Complex:function(x){return x.acos()},BigNumber:function(x){return x.acos()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,acos)}});return acos});exports.createAcos=createAcos},{"../../utils/collection":927,"../../utils/factory":931}],832:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAcosh=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","config","Complex"],createAcosh=(0,_factory.factory)("acosh",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,Complex=_ref.Complex,acosh=typed("acosh",{number:function(x){return 1<=x||config.predictable?(0,_number.acoshNumber)(x):x<=-1?new Complex(Math.log(Math.sqrt(x*x-1)-x),Math.PI):new Complex(x,0).acosh()},Complex:function(x){return x.acosh()},BigNumber:function(x){return x.acosh()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,acosh)}});return acosh});exports.createAcosh=createAcosh},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],833:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAcot=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","BigNumber"],createAcot=(0,_factory.factory)("acot",dependencies,function(_ref){var typed=_ref.typed,_BigNumber=_ref.BigNumber,acot=typed("acot",{number:_number.acotNumber,Complex:function(x){return x.acot()},BigNumber:function(x){return new _BigNumber(1).div(x).atan()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,acot)}});return acot});exports.createAcot=createAcot},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],834:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAcoth=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","config","Complex","BigNumber"],createAcoth=(0,_factory.factory)("acoth",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,Complex=_ref.Complex,_BigNumber=_ref.BigNumber,acoth=typed("acoth",{number:function(x){return 1<=x||x<=-1||config.predictable?(0,_number.acothNumber)(x):new Complex(x,0).acoth()},Complex:function(x){return x.acoth()},BigNumber:function(x){return new _BigNumber(1).div(x).atanh()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,acoth)}});return acoth});exports.createAcoth=createAcoth},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],835:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAcsc=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","config","Complex","BigNumber"],createAcsc=(0,_factory.factory)("acsc",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,Complex=_ref.Complex,_BigNumber=_ref.BigNumber,acsc=typed("acsc",{number:function(x){return x<=-1||1<=x||config.predictable?(0,_number.acscNumber)(x):new Complex(x,0).acsc()},Complex:function(x){return x.acsc()},BigNumber:function(x){return new _BigNumber(1).div(x).asin()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,acsc)}});return acsc});exports.createAcsc=createAcsc},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],836:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAcsch=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","BigNumber"],createAcsch=(0,_factory.factory)("acsch",dependencies,function(_ref){var typed=_ref.typed,_BigNumber=_ref.BigNumber,acsch=typed("acsch",{number:_number.acschNumber,Complex:function(x){return x.acsch()},BigNumber:function(x){return new _BigNumber(1).div(x).asinh()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,acsch)}});return acsch});exports.createAcsch=createAcsch},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],837:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAsec=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","config","Complex","BigNumber"],createAsec=(0,_factory.factory)("asec",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,Complex=_ref.Complex,_BigNumber=_ref.BigNumber,asec=typed("asec",{number:function(x){return x<=-1||1<=x||config.predictable?(0,_number.asecNumber)(x):new Complex(x,0).asec()},Complex:function(x){return x.asec()},BigNumber:function(x){return new _BigNumber(1).div(x).acos()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,asec)}});return asec});exports.createAsec=createAsec},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],838:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAsech=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","config","Complex","BigNumber"],createAsech=(0,_factory.factory)("asech",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,Complex=_ref.Complex,_BigNumber=_ref.BigNumber,asech=typed("asech",{number:function(x){if(x<=1&&-1<=x||config.predictable){var xInv=1/x;if(0<xInv||config.predictable)return(0,_number.asechNumber)(x);var ret=Math.sqrt(xInv*xInv-1);return new Complex(Math.log(ret-xInv),Math.PI)}return new Complex(x,0).asech()},Complex:function(x){return x.asech()},BigNumber:function(x){return new _BigNumber(1).div(x).acosh()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,asech)}});return asech});exports.createAsech=createAsech},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],839:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAsin=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),dependencies=["typed","config","Complex"],createAsin=(0,_factory.factory)("asin",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,Complex=_ref.Complex,asin=typed("asin",{number:function(x){return-1<=x&&x<=1||config.predictable?Math.asin(x):new Complex(x,0).asin()},Complex:function(x){return x.asin()},BigNumber:function(x){return x.asin()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,asin,!0)}});return asin});exports.createAsin=createAsin},{"../../utils/collection":927,"../../utils/factory":931}],840:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAsinh=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed"],createAsinh=(0,_factory.factory)("asinh",dependencies,function(_ref){var asinh=(0,_ref.typed)("asinh",{number:_number.asinhNumber,Complex:function(x){return x.asinh()},BigNumber:function(x){return x.asinh()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,asinh,!0)}});return asinh});exports.createAsinh=createAsinh},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],841:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAtan=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),dependencies=["typed"],createAtan=(0,_factory.factory)("atan",dependencies,function(_ref){var atan=(0,_ref.typed)("atan",{number:function(x){return Math.atan(x)},Complex:function(x){return x.atan()},BigNumber:function(x){return x.atan()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,atan,!0)}});return atan});exports.createAtan=createAtan},{"../../utils/collection":927,"../../utils/factory":931}],842:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAtan2=void 0;var _factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm02"),_algorithm2=require("../../type/matrix/utils/algorithm03"),_algorithm3=require("../../type/matrix/utils/algorithm09"),_algorithm4=require("../../type/matrix/utils/algorithm11"),_algorithm5=require("../../type/matrix/utils/algorithm12"),_algorithm6=require("../../type/matrix/utils/algorithm13"),_algorithm7=require("../../type/matrix/utils/algorithm14"),dependencies=["typed","matrix","equalScalar","BigNumber","DenseMatrix"],createAtan2=(0,_factory.factory)("atan2",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,equalScalar=_ref.equalScalar,BigNumber=_ref.BigNumber,DenseMatrix=_ref.DenseMatrix,algorithm02=(0,_algorithm.createAlgorithm02)({typed:typed,equalScalar:equalScalar}),algorithm03=(0,_algorithm2.createAlgorithm03)({typed:typed}),algorithm09=(0,_algorithm3.createAlgorithm09)({typed:typed,equalScalar:equalScalar}),algorithm11=(0,_algorithm4.createAlgorithm11)({typed:typed,equalScalar:equalScalar}),algorithm12=(0,_algorithm5.createAlgorithm12)({typed:typed,DenseMatrix:DenseMatrix}),algorithm13=(0,_algorithm6.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm7.createAlgorithm14)({typed:typed}),atan2=typed("atan2",{"number, number":Math.atan2,"BigNumber, BigNumber":function(y,x){return BigNumber.atan2(y,x)},"SparseMatrix, SparseMatrix":function(x,y){return algorithm09(x,y,atan2,!1)},"SparseMatrix, DenseMatrix":function(x,y){return algorithm02(y,x,atan2,!0)},"DenseMatrix, SparseMatrix":function(x,y){return algorithm03(x,y,atan2,!1)},"DenseMatrix, DenseMatrix":function(x,y){return algorithm13(x,y,atan2)},"Array, Array":function(x,y){return atan2(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return atan2(matrix(x),y)},"Matrix, Array":function(x,y){return atan2(x,matrix(y))},"SparseMatrix, number | BigNumber":function(x,y){return algorithm11(x,y,atan2,!1)},"DenseMatrix, number | BigNumber":function(x,y){return algorithm14(x,y,atan2,!1)},"number | BigNumber, SparseMatrix":function(x,y){return algorithm12(y,x,atan2,!0)},"number | BigNumber, DenseMatrix":function(x,y){return algorithm14(y,x,atan2,!0)},"Array, number | BigNumber":function(x,y){return algorithm14(matrix(x),y,atan2,!1).valueOf()},"number | BigNumber, Array":function(x,y){return algorithm14(matrix(y),x,atan2,!0).valueOf()}});return atan2});exports.createAtan2=createAtan2},{"../../type/matrix/utils/algorithm02":901,"../../type/matrix/utils/algorithm03":902,"../../type/matrix/utils/algorithm09":908,"../../type/matrix/utils/algorithm11":910,"../../type/matrix/utils/algorithm12":911,"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],843:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAtanh=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","config","Complex"],createAtanh=(0,_factory.factory)("atanh",dependencies,function(_ref){var typed=_ref.typed,config=_ref.config,Complex=_ref.Complex,atanh=typed("atanh",{number:function(x){return x<=1&&-1<=x||config.predictable?(0,_number.atanhNumber)(x):new Complex(x,0).atanh()},Complex:function(x){return x.atanh()},BigNumber:function(x){return x.atanh()},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,atanh,!0)}});return atanh});exports.createAtanh=createAtanh},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],844:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCos=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),dependencies=["typed"],createCos=(0,_factory.factory)("cos",dependencies,function(_ref){var cos=(0,_ref.typed)("cos",{number:Math.cos,Complex:function(x){return x.cos()},BigNumber:function(x){return x.cos()},Unit:function(x){if(!x.hasBase(x.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return cos(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,cos)}});return cos});exports.createCos=createCos},{"../../utils/collection":927,"../../utils/factory":931}],845:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCosh=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../utils/number"),dependencies=["typed"],createCosh=(0,_factory.factory)("cosh",dependencies,function(_ref){var cosh=(0,_ref.typed)("cosh",{number:_number.cosh,Complex:function(x){return x.cosh()},BigNumber:function(x){return x.cosh()},Unit:function(x){if(!x.hasBase(x.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return cosh(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,cosh)}});return cosh});exports.createCosh=createCosh},{"../../utils/collection":927,"../../utils/factory":931,"../../utils/number":937}],846:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCot=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","BigNumber"],createCot=(0,_factory.factory)("cot",dependencies,function(_ref){var typed=_ref.typed,_BigNumber=_ref.BigNumber,cot=typed("cot",{number:_number.cotNumber,Complex:function(x){return x.cot()},BigNumber:function(x){return new _BigNumber(1).div(x.tan())},Unit:function(x){if(!x.hasBase(x.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return cot(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,cot)}});return cot});exports.createCot=createCot},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],847:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCoth=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","BigNumber"],createCoth=(0,_factory.factory)("coth",dependencies,function(_ref){var typed=_ref.typed,_BigNumber=_ref.BigNumber,coth=typed("coth",{number:_number.cothNumber,Complex:function(x){return x.coth()},BigNumber:function(x){return new _BigNumber(1).div(x.tanh())},Unit:function(x){if(!x.hasBase(x.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function coth is no angle");return coth(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,coth)}});return coth});exports.createCoth=createCoth},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],848:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCsc=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","BigNumber"],createCsc=(0,_factory.factory)("csc",dependencies,function(_ref){var typed=_ref.typed,_BigNumber=_ref.BigNumber,csc=typed("csc",{number:_number.cscNumber,Complex:function(x){return x.csc()},BigNumber:function(x){return new _BigNumber(1).div(x.sin())},Unit:function(x){if(!x.hasBase(x.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csc is no angle");return csc(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,csc)}});return csc});exports.createCsc=createCsc},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],849:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCsch=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","BigNumber"],createCsch=(0,_factory.factory)("csch",dependencies,function(_ref){var typed=_ref.typed,_BigNumber=_ref.BigNumber,csch=typed("csch",{number:_number.cschNumber,Complex:function(x){return x.csch()},BigNumber:function(x){return new _BigNumber(1).div(x.sinh())},Unit:function(x){if(!x.hasBase(x.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csch is no angle");return csch(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,csch)}});return csch});exports.createCsch=createCsch},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],850:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSec=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","BigNumber"],createSec=(0,_factory.factory)("sec",dependencies,function(_ref){var typed=_ref.typed,_BigNumber=_ref.BigNumber,sec=typed("sec",{number:_number.secNumber,Complex:function(x){return x.sec()},BigNumber:function(x){return new _BigNumber(1).div(x.cos())},Unit:function(x){if(!x.hasBase(x.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sec is no angle");return sec(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,sec)}});return sec});exports.createSec=createSec},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],851:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSech=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed","BigNumber"],createSech=(0,_factory.factory)("sech",dependencies,function(_ref){var typed=_ref.typed,_BigNumber=_ref.BigNumber,sech=typed("sech",{number:_number.sechNumber,Complex:function(x){return x.sech()},BigNumber:function(x){return new _BigNumber(1).div(x.cosh())},Unit:function(x){if(!x.hasBase(x.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sech is no angle");return sech(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,sech)}});return sech});exports.createSech=createSech},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],852:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSin=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),dependencies=["typed"],createSin=(0,_factory.factory)("sin",dependencies,function(_ref){var sin=(0,_ref.typed)("sin",{number:Math.sin,Complex:function(x){return x.sin()},BigNumber:function(x){return x.sin()},Unit:function(x){if(!x.hasBase(x.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return sin(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,sin,!0)}});return sin});exports.createSin=createSin},{"../../utils/collection":927,"../../utils/factory":931}],853:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSinh=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../plain/number"),dependencies=["typed"],createSinh=(0,_factory.factory)("sinh",dependencies,function(_ref){var sinh=(0,_ref.typed)("sinh",{number:_number.sinhNumber,Complex:function(x){return x.sinh()},BigNumber:function(x){return x.sinh()},Unit:function(x){if(!x.hasBase(x.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return sinh(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,sinh,!0)}});return sinh});exports.createSinh=createSinh},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],854:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTan=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),dependencies=["typed"],createTan=(0,_factory.factory)("tan",dependencies,function(_ref){var tan=(0,_ref.typed)("tan",{number:Math.tan,Complex:function(x){return x.tan()},BigNumber:function(x){return x.tan()},Unit:function(x){if(!x.hasBase(x.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tan is no angle");return tan(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,tan,!0)}});return tan});exports.createTan=createTan},{"../../utils/collection":927,"../../utils/factory":931}],855:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTanh=void 0;var _factory=require("../../utils/factory"),_collection=require("../../utils/collection"),_number=require("../../utils/number"),dependencies=["typed"],createTanh=(0,_factory.factory)("tanh",dependencies,function(_ref){var tanh=(0,_ref.typed)("tanh",{number:_number.tanh,Complex:function(x){return x.tanh()},BigNumber:function(x){return x.tanh()},Unit:function(x){if(!x.hasBase(x.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tanh is no angle");return tanh(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,tanh,!0)}});return tanh});exports.createTanh=createTanh},{"../../utils/collection":927,"../../utils/factory":931,"../../utils/number":937}],856:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTo=void 0;var _factory=require("../../utils/factory"),_algorithm=require("../../type/matrix/utils/algorithm13"),_algorithm2=require("../../type/matrix/utils/algorithm14"),dependencies=["typed","matrix"],createTo=(0,_factory.factory)("to",dependencies,function(_ref){var typed=_ref.typed,matrix=_ref.matrix,algorithm13=(0,_algorithm.createAlgorithm13)({typed:typed}),algorithm14=(0,_algorithm2.createAlgorithm14)({typed:typed}),to=typed("to",{"Unit, Unit | string":function(x,unit){return x.to(unit)},"Matrix, Matrix":function(x,y){return algorithm13(x,y,to)},"Array, Array":function(x,y){return to(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return to(matrix(x),y)},"Matrix, Array":function(x,y){return to(x,matrix(y))},"Matrix, any":function(x,y){return algorithm14(x,y,to,!1)},"any, Matrix":function(x,y){return algorithm14(y,x,to,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,to,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,to,!0).valueOf()}});return to});exports.createTo=createTo},{"../../type/matrix/utils/algorithm13":912,"../../type/matrix/utils/algorithm14":913,"../../utils/factory":931}],857:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createClone=void 0;var _object=require("../../utils/object"),_factory=require("../../utils/factory"),dependencies=["typed"],createClone=(0,_factory.factory)("clone",dependencies,function(_ref){return(0,_ref.typed)("clone",{any:_object.clone})});exports.createClone=createClone},{"../../utils/factory":931,"../../utils/object":938}],858:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHasNumericValue=void 0;var _factory=require("../../utils/factory"),name="hasNumericValue",dependencies=["typed","isNumeric"],createHasNumericValue=(0,_factory.factory)(name,dependencies,function(_ref){var typed=_ref.typed,isNumeric=_ref.isNumeric;return typed(name,{string:function(x){return 0<x.trim().length&&!isNaN(Number(x))},any:function(x){return isNumeric(x)}})});exports.createHasNumericValue=createHasNumericValue},{"../../utils/factory":931}],859:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsInteger=void 0;var _collection=require("../../utils/collection"),_number=require("../../utils/number"),_factory=require("../../utils/factory"),dependencies=["typed"],createIsInteger=(0,_factory.factory)("isInteger",dependencies,function(_ref){var isInteger=(0,_ref.typed)("isInteger",{number:_number.isInteger,BigNumber:function(x){return x.isInt()},Fraction:function(x){return 1===x.d&&isFinite(x.n)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,isInteger)}});return isInteger});exports.createIsInteger=createIsInteger},{"../../utils/collection":927,"../../utils/factory":931,"../../utils/number":937}],860:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNaN=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed"],createIsNaN=(0,_factory.factory)("isNaN",dependencies,function(_ref){return(0,_ref.typed)("isNaN",{number:_number.isNaNNumber,BigNumber:function(x){return x.isNaN()},Fraction:function(){return!1},Complex:function(x){return x.isNaN()},Unit:function(x){return Number.isNaN(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,Number.isNaN)}})});exports.createIsNaN=createIsNaN},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],861:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNegative=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed"],createIsNegative=(0,_factory.factory)("isNegative",dependencies,function(_ref){var isNegative=(0,_ref.typed)("isNegative",{number:_number.isNegativeNumber,BigNumber:function(x){return x.isNeg()&&!x.isZero()&&!x.isNaN()},Fraction:function(x){return x.s<0},Unit:function(x){return isNegative(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,isNegative)}});return isNegative});exports.createIsNegative=createIsNegative},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],862:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNumeric=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),dependencies=["typed"],createIsNumeric=(0,_factory.factory)("isNumeric",dependencies,function(_ref){var isNumeric=(0,_ref.typed)("isNumeric",{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string | null | undefined | Node":function(){return!1},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,isNumeric)}});return isNumeric});exports.createIsNumeric=createIsNumeric},{"../../utils/collection":927,"../../utils/factory":931}],863:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsPositive=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed"],createIsPositive=(0,_factory.factory)("isPositive",dependencies,function(_ref){var isPositive=(0,_ref.typed)("isPositive",{number:_number.isPositiveNumber,BigNumber:function(x){return!x.isNeg()&&!x.isZero()&&!x.isNaN()},Fraction:function(x){return 0<x.s&&0<x.n},Unit:function(x){return isPositive(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,isPositive)}});return isPositive});exports.createIsPositive=createIsPositive},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],864:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsPrime=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),dependencies=["typed"],createIsPrime=(0,_factory.factory)("isPrime",dependencies,function(_ref){var isPrime=(0,_ref.typed)("isPrime",{number:function(x){if(0*x!=0)return!1;if(x<=3)return 1<x;if(x%2==0||x%3==0)return!1;for(var i=5;i*i<=x;i+=6)if(x%i==0||x%(i+2)==0)return!1;return!0},BigNumber:function(n){if(0*n.toNumber()!=0)return!1;if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;for(var i=5;n.gte(i*i);i+=6)if(n.mod(i).eq(0)||n.mod(i+2).eq(0))return!1;return!0},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,isPrime)}});return isPrime});exports.createIsPrime=createIsPrime},{"../../utils/collection":927,"../../utils/factory":931}],865:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsZero=void 0;var _collection=require("../../utils/collection"),_factory=require("../../utils/factory"),_number=require("../../plain/number"),dependencies=["typed"],createIsZero=(0,_factory.factory)("isZero",dependencies,function(_ref){var isZero=(0,_ref.typed)("isZero",{number:_number.isZeroNumber,BigNumber:function(x){return x.isZero()},Complex:function(x){return 0===x.re&&0===x.im},Fraction:function(x){return 1===x.d&&0===x.n},Unit:function(x){return isZero(x.value)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,isZero)}});return isZero});exports.createIsZero=createIsZero},{"../../plain/number":874,"../../utils/collection":927,"../../utils/factory":931}],866:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNumeric=void 0;var _is=require("../../utils/is"),_factory=require("../../utils/factory"),_noop=require("../../utils/noop"),dependencies=["number","?bignumber","?fraction"],createNumeric=(0,_factory.factory)("numeric",dependencies,function(_ref){var _number=_ref.number,bignumber=_ref.bignumber,fraction=_ref.fraction,validInputTypes={string:!0,number:!0,BigNumber:!0,Fraction:!0},validOutputTypes={number:function(x){return _number(x)},BigNumber:bignumber?function(x){return bignumber(x)}:_noop.noBignumber,Fraction:fraction?function(x){return fraction(x)}:_noop.noFraction};return function(value,outputType){var inputType=(0,_is.typeOf)(value);if(!(inputType in validInputTypes))throw new TypeError("Cannot convert "+value+' of type "'+inputType+'"; valid input types are '+Object.keys(validInputTypes).join(", "));if(!(outputType in validOutputTypes))throw new TypeError("Cannot convert "+value+' to type "'+outputType+'"; valid output types are '+Object.keys(validOutputTypes).join(", "));return outputType===inputType?value:validOutputTypes[outputType](value)}});exports.createNumeric=createNumeric},{"../../utils/factory":931,"../../utils/is":933,"../../utils/noop":936}],867:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDeprecatedTypeof=exports.createTypeOf=void 0;var _factory=require("../../utils/factory"),_is=require("../../utils/is"),_log=require("../../utils/log"),dependencies=["typed"],createTypeOf=(0,_factory.factory)("typeOf",dependencies,function(_ref){return(0,_ref.typed)("typeOf",{any:_is.typeOf})});exports.createTypeOf=createTypeOf;var createDeprecatedTypeof=(0,_factory.factory)("typeof",[],function(){return function(){(0,_log.warnOnce)('Function "typeof" has been renamed to "typeOf" in v6.0.0, please use the new function instead.');for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _is.typeOf.apply(_is.typeOf,args)}});exports.createDeprecatedTypeof=createDeprecatedTypeof},{"../../utils/factory":931,"../../utils/is":933,"../../utils/log":935}],868:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dependencies=[],createReplacer=(exports.createReplacer=void 0,require("../utils/factory").factory)("replacer",dependencies,function(){return function(key,value){return"number"!=typeof value||isFinite(value)&&!isNaN(value)?value:{mathjs:"number",value:String(value)}}});exports.createReplacer=createReplacer},{"../utils/factory":931}],869:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dependencies=["classes"],createReviver=(exports.createReviver=void 0,require("../utils/factory").factory)("reviver",dependencies,function(_ref){var classes=_ref.classes;return function(key,value){var constructor=classes[value&&value.mathjs];return constructor&&"function"==typeof constructor.fromJSON?constructor.fromJSON(value):value}});exports.createReviver=createReviver},{"../utils/factory":931}],870:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absNumber=absNumber,exports.addNumber=addNumber,exports.subtractNumber=subtractNumber,exports.multiplyNumber=multiplyNumber,exports.divideNumber=divideNumber,exports.unaryMinusNumber=unaryMinusNumber,exports.unaryPlusNumber=unaryPlusNumber,exports.cbrtNumber=cbrtNumber,exports.ceilNumber=ceilNumber,exports.cubeNumber=cubeNumber,exports.expNumber=expNumber,exports.expm1Number=expm1Number,exports.fixNumber=fixNumber,exports.floorNumber=floorNumber,exports.gcdNumber=gcdNumber,exports.lcmNumber=lcmNumber,exports.logNumber=logNumber,exports.log10Number=log10Number,exports.log2Number=log2Number,exports.log1pNumber=log1pNumber,exports.modNumber=modNumber,exports.nthRootNumber=nthRootNumber,exports.signNumber=signNumber,exports.sqrtNumber=sqrtNumber,exports.squareNumber=squareNumber,exports.xgcdNumber=xgcdNumber,exports.powNumber=powNumber,exports.roundNumber=roundNumber,exports.normNumber=normNumber;var _number=require("../../utils/number"),n1="number",n2="number, number";function absNumber(a){return Math.abs(a)}function addNumber(a,b){return a+b}function subtractNumber(a,b){return a-b}function multiplyNumber(a,b){return a*b}function divideNumber(a,b){return a/b}function unaryMinusNumber(x){return-x}function unaryPlusNumber(x){return x}function cbrtNumber(x){return(0,_number.cbrt)(x)}function ceilNumber(x){return Math.ceil(x)}function cubeNumber(x){return x*x*x}function expNumber(x){return Math.exp(x)}function expm1Number(x){return(0,_number.expm1)(x)}function fixNumber(x){return 0<x?Math.floor(x):Math.ceil(x)}function floorNumber(x){return Math.floor(x)}function gcdNumber(a,b){if(!(0,_number.isInteger)(a)||!(0,_number.isInteger)(b))throw new Error("Parameters in function gcd must be integer numbers");for(var r;0!==b;)r=a%b,a=b,b=r;return a<0?-a:a}function lcmNumber(a,b){if(!(0,_number.isInteger)(a)||!(0,_number.isInteger)(b))throw new Error("Parameters in function lcm must be integer numbers");if(0===a||0===b)return 0;for(var t,prod=a*b;0!==b;)b=a%(t=b),a=t;return Math.abs(prod/a)}function logNumber(x){return Math.log(x)}function log10Number(x){return(0,_number.log10)(x)}function log2Number(x){return(0,_number.log2)(x)}function log1pNumber(x){return(0,_number.log1p)(x)}function modNumber(x,y){if(0<y)return x-y*Math.floor(x/y);if(0===y)return x;throw new Error("Cannot calculate mod for a negative divisor")}function nthRootNumber(a,root){var inv=root<0;if(inv&&(root=-root),0===root)throw new Error("Root must be non-zero");if(a<0&&Math.abs(root)%2!=1)throw new Error("Root must be odd when a is negative.");if(0===a)return inv?1/0:0;if(!isFinite(a))return inv?0:a;var x=Math.pow(Math.abs(a),1/root),x=a<0?-x:x;return inv?1/x:x}function signNumber(x){return(0,_number.sign)(x)}function sqrtNumber(x){return Math.sqrt(x)}function squareNumber(x){return x*x}function xgcdNumber(a,b){var t,q,r,x=0,lastx=1,y=1,lasty=0;if(!(0,_number.isInteger)(a)||!(0,_number.isInteger)(b))throw new Error("Parameters in function xgcd must be integer numbers");for(;b;)r=a-(q=Math.floor(a/b))*b,x=lastx-q*(t=x),lastx=t,y=lasty-q*(t=y),lasty=t,a=b,b=r;return a<0?[-a,-lastx,-lasty]:[a,a?lastx:0,lasty]}function powNumber(x,y){return x*x<1&&y===1/0||1<x*x&&y===-1/0?0:Math.pow(x,y)}function roundNumber(value){var decimals=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return parseFloat((0,_number.toFixed)(value,decimals))}function normNumber(x){return Math.abs(x)}absNumber.signature=n1,divideNumber.signature=multiplyNumber.signature=subtractNumber.signature=addNumber.signature=n2,floorNumber.signature=fixNumber.signature=expm1Number.signature=expNumber.signature=cubeNumber.signature=ceilNumber.signature=cbrtNumber.signature=unaryPlusNumber.signature=unaryMinusNumber.signature=n1,lcmNumber.signature=gcdNumber.signature=n2,log1pNumber.signature=log2Number.signature=log10Number.signature=logNumber.signature=n1,nthRootNumber.signature=modNumber.signature=n2,squareNumber.signature=sqrtNumber.signature=signNumber.signature=n1,roundNumber.signature=powNumber.signature=xgcdNumber.signature=n2,normNumber.signature=n1},{"../../utils/number":937}],871:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bitAndNumber=bitAndNumber,exports.bitNotNumber=bitNotNumber,exports.bitOrNumber=bitOrNumber,exports.bitXorNumber=bitXorNumber,exports.leftShiftNumber=leftShiftNumber,exports.rightArithShiftNumber=rightArithShiftNumber,exports.rightLogShiftNumber=rightLogShiftNumber;var _number=require("../../utils/number"),n2="number, number";function bitAndNumber(x,y){if(!(0,_number.isInteger)(x)||!(0,_number.isInteger)(y))throw new Error("Integers expected in function bitAnd");return x&y}function bitNotNumber(x){if(!(0,_number.isInteger)(x))throw new Error("Integer expected in function bitNot");return~x}function bitOrNumber(x,y){if(!(0,_number.isInteger)(x)||!(0,_number.isInteger)(y))throw new Error("Integers expected in function bitOr");return x|y}function bitXorNumber(x,y){if(!(0,_number.isInteger)(x)||!(0,_number.isInteger)(y))throw new Error("Integers expected in function bitXor");return x^y}function leftShiftNumber(x,y){if(!(0,_number.isInteger)(x)||!(0,_number.isInteger)(y))throw new Error("Integers expected in function leftShift");return x<<y}function rightArithShiftNumber(x,y){if(!(0,_number.isInteger)(x)||!(0,_number.isInteger)(y))throw new Error("Integers expected in function rightArithShift");return x>>y}function rightLogShiftNumber(x,y){if(!(0,_number.isInteger)(x)||!(0,_number.isInteger)(y))throw new Error("Integers expected in function rightLogShift");return x>>>y}bitAndNumber.signature=n2,bitNotNumber.signature="number",rightLogShiftNumber.signature=rightArithShiftNumber.signature=leftShiftNumber.signature=bitXorNumber.signature=bitOrNumber.signature=n2},{"../../utils/number":937}],872:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.combinationsNumber=combinationsNumber;var _number=require("../../utils/number"),_product=require("../../utils/product");function combinationsNumber(n,k){if(!(0,_number.isInteger)(n)||n<0)throw new TypeError("Positive integer value expected in function combinations");if(!(0,_number.isInteger)(k)||k<0)throw new TypeError("Positive integer value expected in function combinations");if(n<k)throw new TypeError("k must be less than or equal to n");var nMinusk=n-k;return k<nMinusk?(0,_product.product)(1+nMinusk,n)/(0,_product.product)(1,k):(0,_product.product)(k+1,n)/(0,_product.product)(1,nMinusk)}combinationsNumber.signature="number, number"},{"../../utils/number":937,"../../utils/product":940}],873:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.phi=exports.e=exports.tau=exports.pi=void 0;var pi=Math.PI;exports.pi=pi;var tau=2*Math.PI;exports.tau=tau;var e=Math.E;exports.e=e;exports.phi=1.618033988749895},{}],874:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _arithmetic=require("./arithmetic");Object.keys(_arithmetic).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _arithmetic[key]}})});var _bitwise=require("./bitwise");Object.keys(_bitwise).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _bitwise[key]}})});var _combinations=require("./combinations");Object.keys(_combinations).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _combinations[key]}})});var _constants=require("./constants");Object.keys(_constants).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _constants[key]}})});var _logical=require("./logical");Object.keys(_logical).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _logical[key]}})});var _relational=require("./relational");Object.keys(_relational).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _relational[key]}})});var _probability=require("./probability");Object.keys(_probability).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _probability[key]}})});var _trigonometry=require("./trigonometry");Object.keys(_trigonometry).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _trigonometry[key]}})});var _utils=require("./utils");Object.keys(_utils).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _utils[key]}})})},{"./arithmetic":870,"./bitwise":871,"./combinations":872,"./constants":873,"./logical":875,"./probability":876,"./relational":877,"./trigonometry":878,"./utils":879}],875:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notNumber=notNumber,exports.orNumber=orNumber,exports.xorNumber=xorNumber,exports.andNumber=andNumber;var n2="number, number";function notNumber(x){return!x}function orNumber(x,y){return!(!x&&!y)}function xorNumber(x,y){return!!x!=!!y}function andNumber(x,y){return!(!x||!y)}notNumber.signature="number",andNumber.signature=xorNumber.signature=orNumber.signature=n2},{}],876:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gammaNumber=gammaNumber,exports.gammaP=exports.gammaG=void 0;var _number=require("../../utils/number"),_product=require("../../utils/product");function gammaNumber(n){var x;if((0,_number.isInteger)(n))return n<=0?isFinite(n)?1/0:NaN:171<n?1/0:(0,_product.product)(1,n-1);if(n<.5)return Math.PI/(Math.sin(Math.PI*n)*gammaNumber(1-n));if(171.35<=n)return 1/0;if(85<n){var twoN=n*n,threeN=twoN*n,fourN=threeN*n,fiveN=fourN*n;return Math.sqrt(2*Math.PI/n)*Math.pow(n/Math.E,n)*(1+1/(12*n)+1/(288*twoN)-139/(51840*threeN)-571/(2488320*fourN)+163879/(209018880*fiveN)+5246819/(75246796800*fiveN*n))}--n,x=gammaP[0];for(var i=1;i<gammaP.length;++i)x+=gammaP[i]/(n+i);var t=n+gammaG+.5;return Math.sqrt(2*Math.PI)*Math.pow(t,n+.5)*Math.exp(-t)*x}gammaNumber.signature="number";var gammaG=4.7421875;exports.gammaG=gammaG;var gammaP=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];exports.gammaP=gammaP},{"../../utils/number":937,"../../utils/product":940}],877:[function(require,module,exports){},{}],878:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosNumber=acosNumber,exports.acoshNumber=acoshNumber,exports.acotNumber=acotNumber,exports.acothNumber=acothNumber,exports.acscNumber=acscNumber,exports.acschNumber=acschNumber,exports.asecNumber=asecNumber,exports.asechNumber=asechNumber,exports.asinNumber=asinNumber,exports.asinhNumber=asinhNumber,exports.atanNumber=atanNumber,exports.atan2Number=atan2Number,exports.atanhNumber=atanhNumber,exports.cosNumber=cosNumber,exports.coshNumber=coshNumber,exports.cotNumber=cotNumber,exports.cothNumber=cothNumber,exports.cscNumber=cscNumber,exports.cschNumber=cschNumber,exports.secNumber=secNumber,exports.sechNumber=sechNumber,exports.sinNumber=sinNumber,exports.sinhNumber=sinhNumber,exports.tanNumber=tanNumber,exports.tanhNumber=tanhNumber;var _number=require("../../utils/number"),n1="number";function acosNumber(x){return Math.acos(x)}function acoshNumber(x){return(0,_number.acosh)(x)}function acotNumber(x){return Math.atan(1/x)}function acothNumber(x){return isFinite(x)?(Math.log((x+1)/x)+Math.log(x/(x-1)))/2:0}function acscNumber(x){return Math.asin(1/x)}function acschNumber(x){var xInv=1/x;return Math.log(xInv+Math.sqrt(xInv*xInv+1))}function asecNumber(x){return Math.acos(1/x)}function asechNumber(x){var xInv=1/x,ret=Math.sqrt(xInv*xInv-1);return Math.log(ret+xInv)}function asinNumber(x){return Math.asin(x)}function asinhNumber(x){return(0,_number.asinh)(x)}function atanNumber(x){return Math.atan(x)}function atan2Number(y,x){return Math.atan2(y,x)}function atanhNumber(x){return(0,_number.atanh)(x)}function cosNumber(x){return Math.cos(x)}function coshNumber(x){return(0,_number.cosh)(x)}function cotNumber(x){return 1/Math.tan(x)}function cothNumber(x){var e=Math.exp(2*x);return(e+1)/(e-1)}function cscNumber(x){return 1/Math.sin(x)}function cschNumber(x){return 0===x?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(x)-Math.exp(-x)))*(0,_number.sign)(x)}function secNumber(x){return 1/Math.cos(x)}function sechNumber(x){return 2/(Math.exp(x)+Math.exp(-x))}function sinNumber(x){return Math.sin(x)}function sinhNumber(x){return(0,_number.sinh)(x)}function tanNumber(x){return Math.tan(x)}function tanhNumber(x){return(0,_number.tanh)(x)}atanNumber.signature=asinhNumber.signature=asinNumber.signature=asechNumber.signature=asecNumber.signature=acschNumber.signature=acscNumber.signature=acothNumber.signature=acotNumber.signature=acoshNumber.signature=acosNumber.signature=n1,atan2Number.signature="number, number",tanhNumber.signature=tanNumber.signature=sinhNumber.signature=sinNumber.signature=sechNumber.signature=secNumber.signature=cschNumber.signature=cscNumber.signature=cothNumber.signature=cotNumber.signature=coshNumber.signature=cosNumber.signature=atanhNumber.signature=n1},{"../../utils/number":937}],879:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isIntegerNumber=isIntegerNumber,exports.isNegativeNumber=isNegativeNumber,exports.isPositiveNumber=isPositiveNumber,exports.isZeroNumber=isZeroNumber,exports.isNaNNumber=isNaNNumber;var _number=require("../../utils/number"),n1="number";function isIntegerNumber(x){return(0,_number.isInteger)(x)}function isNegativeNumber(x){return x<0}function isPositiveNumber(x){return 0<x}function isZeroNumber(x){return 0===x}function isNaNNumber(x){return Number.isNaN(x)}isNaNNumber.signature=isZeroNumber.signature=isPositiveNumber.signature=isNegativeNumber.signature=isIntegerNumber.signature=n1},{"../../utils/number":937}],880:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBigNumberClass=void 0;var obj,_decimal=(obj=require("decimal.js"))&&obj.__esModule?obj:{default:obj};var dependencies=["?on","config"],createBigNumberClass=(0,require("../../utils/factory").factory)("BigNumber",dependencies,function(_ref){var on=_ref.on,config=_ref.config,BigNumber=_decimal.default.clone({precision:config.precision});return BigNumber.prototype.type="BigNumber",BigNumber.prototype.isBigNumber=!0,BigNumber.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},BigNumber.fromJSON=function(json){return new BigNumber(json.value)},on&&on("config",function(curr,prev){curr.precision!==prev.precision&&BigNumber.config({precision:curr.precision})}),BigNumber},{isClass:!0});exports.createBigNumberClass=createBigNumberClass},{"../../utils/factory":931,"decimal.js":55}],881:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBignumber=void 0;var _factory=require("../../../utils/factory"),_collection=require("../../../utils/collection"),dependencies=["typed","BigNumber"],createBignumber=(0,_factory.factory)("bignumber",dependencies,function(_ref){var typed=_ref.typed,BigNumber=_ref.BigNumber,bignumber=typed("bignumber",{"":function(){return new BigNumber(0)},number:function(x){return new BigNumber(x+"")},string:function(x){return new BigNumber(x)},BigNumber:function(x){return x},Fraction:function(x){return new BigNumber(x.n).div(x.d).times(x.s)},null:function(){return new BigNumber(0)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,bignumber)}});return bignumber});exports.createBignumber=createBignumber},{"../../../utils/collection":927,"../../../utils/factory":931}],882:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBoolean=void 0;var _factory=require("../utils/factory"),_collection=require("../utils/collection"),dependencies=["typed"],createBoolean=(0,_factory.factory)("boolean",dependencies,function(_ref){var bool=(0,_ref.typed)("boolean",{"":function(){return!1},boolean:function(x){return x},number:function(x){return!!x},null:function(){return!1},BigNumber:function(x){return!x.isZero()},string:function(x){var lcase=x.toLowerCase();if("true"===lcase)return!0;if("false"===lcase)return!1;var num=Number(x);if(""!==x&&!isNaN(num))return!!num;throw new Error('Cannot convert "'+x+'" to a boolean')},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,bool)}});return bool});exports.createBoolean=createBoolean},{"../utils/collection":927,"../utils/factory":931}],883:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createChainClass=void 0;var _is=require("../../utils/is"),_string=require("../../utils/string"),_object=require("../../utils/object"),dependencies=["?on","math"],createChainClass=(0,require("../../utils/factory").factory)("Chain",dependencies,function(_ref){var on=_ref.on,math=_ref.math;function Chain(value){if(!(this instanceof Chain))throw new SyntaxError("Constructor must be called with the new operator");(0,_is.isChain)(value)?this.value=value.value:this.value=value}function createLazyProxy(name,resolver){(0,_object.lazy)(Chain.prototype,name,function(){var fn=resolver();if("function"==typeof fn)return chainify(fn)})}function chainify(fn){return function(){for(var args=[this.value],i=0;i<arguments.length;i++)args[i+1]=arguments[i];return new Chain(fn.apply(fn,args))}}Chain.prototype.type="Chain",Chain.prototype.isChain=!0,Chain.prototype.done=function(){return this.value},Chain.prototype.valueOf=function(){return this.value},Chain.prototype.toString=function(){return(0,_string.format)(this.value)},Chain.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},Chain.fromJSON=function(json){return new Chain(json.value)},Chain.createProxy=function(arg0,arg1){if("string"==typeof arg0)name=arg0,"function"==typeof(fn=arg1)&&(Chain.prototype[name]=chainify(fn));else{for(var _name in arg0)!function(_name){(0,_object.hasOwnProperty)(arg0,_name)&&void 0===excludedNames[_name]&&createLazyProxy(_name,function(){return arg0[_name]})}(_name)}var name,fn};var excludedNames={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return Chain.createProxy(math),on&&on("import",function(name,resolver,path){path||createLazyProxy(name,resolver)}),Chain},{isClass:!0});exports.createChainClass=createChainClass},{"../../utils/factory":931,"../../utils/is":933,"../../utils/object":938,"../../utils/string":941}],884:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createChain=void 0;var _factory=require("../../../utils/factory"),dependencies=["typed","Chain"],createChain=(0,_factory.factory)("chain",dependencies,function(_ref){var typed=_ref.typed,Chain=_ref.Chain;return typed("chain",{"":function(){return new Chain},any:function(value){return new Chain(value)}})});exports.createChain=createChain},{"../../../utils/factory":931}],885:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createComplexClass=void 0;var obj,_complex=(obj=require("complex.js"))&&obj.__esModule?obj:{default:obj},_number=require("../../utils/number"),_is=require("../../utils/is");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var dependencies=[],createComplexClass=(0,require("../../utils/factory").factory)("Complex",dependencies,function(){return _complex.default.prototype.type="Complex",_complex.default.prototype.isComplex=!0,_complex.default.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},_complex.default.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},_complex.default.prototype.format=function(options){var epsilon,im=this.im,re=this.re,strRe=(0,_number.format)(this.re,options),strIm=(0,_number.format)(this.im,options),precision=(0,_is.isNumber)(options)?options:options?options.precision:null;return null!==precision&&(epsilon=Math.pow(10,-precision),Math.abs(re/im)<epsilon&&(re=0),Math.abs(im/re)<epsilon&&(im=0)),0===im?strRe:0===re?1===im?"i":-1===im?"-i":strIm+"i":im<0?-1===im?strRe+" - i":strRe+" - "+strIm.substring(1)+"i":1===im?strRe+" + i":strRe+" + "+strIm+"i"},_complex.default.fromPolar=function(args){switch(arguments.length){case 1:var arg=args;if("object"===_typeof(arg))return(0,_complex.default)(arg);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var r=args,phi=arguments[1];if((0,_is.isNumber)(r)){if((0,_is.isUnit)(phi)&&phi.hasBase("ANGLE")&&(phi=phi.toNumber("rad")),(0,_is.isNumber)(phi))return new _complex.default({r:r,phi:phi});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},_complex.default.prototype.valueOf=_complex.default.prototype.toString,_complex.default.fromJSON=function(json){return new _complex.default(json)},_complex.default.compare=function(a,b){return a.re>b.re?1:a.re<b.re?-1:a.im>b.im?1:a.im<b.im?-1:0},_complex.default},{isClass:!0});exports.createComplexClass=createComplexClass},{"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937,"complex.js":54}],886:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createComplex=void 0;var _factory=require("../../../utils/factory"),_collection=require("../../../utils/collection"),dependencies=["typed","Complex"],createComplex=(0,_factory.factory)("complex",dependencies,function(_ref){var typed=_ref.typed,Complex=_ref.Complex,complex=typed("complex",{"":function(){return Complex.ZERO},number:function(x){return new Complex(x,0)},"number, number":function(re,im){return new Complex(re,im)},"BigNumber, BigNumber":function(re,im){return new Complex(re.toNumber(),im.toNumber())},Fraction:function(x){return new Complex(x.valueOf(),0)},Complex:function(x){return x.clone()},string:function(x){return Complex(x)},null:function(){return Complex(0)},Object:function(x){if("re"in x&&"im"in x)return new Complex(x.re,x.im);if("r"in x&&"phi"in x||"abs"in x&&"arg"in x)return new Complex(x);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,complex)}});return complex});exports.createComplex=createComplex},{"../../../utils/collection":927,"../../../utils/factory":931}],887:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFractionClass=void 0;var obj,_fraction=(obj=require("fraction.js"))&&obj.__esModule?obj:{default:obj};var dependencies=[],createFractionClass=(0,require("../../utils/factory").factory)("Fraction",dependencies,function(){return _fraction.default.prototype.type="Fraction",_fraction.default.prototype.isFraction=!0,_fraction.default.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},_fraction.default.fromJSON=function(json){return new _fraction.default(json)},_fraction.default},{isClass:!0});exports.createFractionClass=createFractionClass},{"../../utils/factory":931,"fraction.js":57}],888:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFraction=void 0;var _factory=require("../../../utils/factory"),_collection=require("../../../utils/collection"),dependencies=["typed","Fraction"],createFraction=(0,_factory.factory)("fraction",dependencies,function(_ref){var typed=_ref.typed,Fraction=_ref.Fraction,fraction=typed("fraction",{number:function(x){if(!isFinite(x)||isNaN(x))throw new Error(x+" cannot be represented as a fraction");return new Fraction(x)},string:function(x){return new Fraction(x)},"number, number":function(numerator,denominator){return new Fraction(numerator,denominator)},null:function(){return new Fraction(0)},BigNumber:function(x){return new Fraction(x.toString())},Fraction:function(x){return x},Object:function(x){return new Fraction(x)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,fraction)}});return fraction});exports.createFraction=createFraction},{"../../../utils/collection":927,"../../../utils/factory":931}],889:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDenseMatrixClass=void 0;var _is=require("../../utils/is"),_array=require("../../utils/array"),_string=require("../../utils/string"),_number=require("../../utils/number"),_object=require("../../utils/object"),_DimensionError=require("../../error/DimensionError"),dependencies=["Matrix"],createDenseMatrixClass=(0,require("../../utils/factory").factory)("DenseMatrix",dependencies,function(_ref){var Matrix=_ref.Matrix;function DenseMatrix(data,datatype){if(!(this instanceof DenseMatrix))throw new SyntaxError("Constructor must be called with the new operator");if(datatype&&!(0,_is.isString)(datatype))throw new Error("Invalid datatype: "+datatype);if((0,_is.isMatrix)(data))"DenseMatrix"===data.type?(this._data=(0,_object.clone)(data._data),this._size=(0,_object.clone)(data._size)):(this._data=data.toArray(),this._size=data.size()),this._datatype=datatype||data._datatype;else if(data&&(0,_is.isArray)(data.data)&&(0,_is.isArray)(data.size))this._data=data.data,this._size=data.size,(0,_array.validate)(this._data,this._size),this._datatype=datatype||data.datatype;else if((0,_is.isArray)(data))this._data=function preprocess(data){for(var i=0,ii=data.length;i<ii;i++){var elem=data[i];(0,_is.isArray)(elem)?data[i]=preprocess(elem):elem&&!0===elem.isMatrix&&(data[i]=preprocess(elem.valueOf()))}return data}(data),this._size=(0,_array.arraySize)(this._data),(0,_array.validate)(this._data,this._size),this._datatype=datatype;else{if(data)throw new TypeError("Unsupported type of data ("+(0,_is.typeOf)(data)+")");this._data=[],this._size=[0],this._datatype=datatype}}function _resize(matrix,size,defaultValue){if(0!==size.length)return matrix._size=size.slice(0),matrix._data=(0,_array.resize)(matrix._data,matrix._size,defaultValue),matrix;for(var v=matrix._data;(0,_is.isArray)(v);)v=v[0];return v}function _fit(matrix,size,defaultValue){for(var newSize=matrix._size.slice(0),changed=!1;newSize.length<size.length;)newSize.push(0),changed=!0;for(var i=0,ii=size.length;i<ii;i++)size[i]>newSize[i]&&(newSize[i]=size[i],changed=!0);changed&&_resize(matrix,newSize,defaultValue)}return(DenseMatrix.prototype=new Matrix).createDenseMatrix=function(data,datatype){return new DenseMatrix(data,datatype)},DenseMatrix.prototype.type="DenseMatrix",DenseMatrix.prototype.isDenseMatrix=!0,DenseMatrix.prototype.getDataType=function(){return(0,_array.getArrayDataType)(this._data,_is.typeOf)},DenseMatrix.prototype.storage=function(){return"dense"},DenseMatrix.prototype.datatype=function(){return this._datatype},DenseMatrix.prototype.create=function(data,datatype){return new DenseMatrix(data,datatype)},DenseMatrix.prototype.subset=function(index,replacement,defaultValue){switch(arguments.length){case 1:return function(matrix,index){if(!(0,_is.isIndex)(index))throw new TypeError("Invalid index");{if(index.isScalar())return matrix.get(index.min());var size=index.size();if(size.length!==matrix._size.length)throw new _DimensionError.DimensionError(size.length,matrix._size.length);for(var min=index.min(),max=index.max(),i=0,ii=matrix._size.length;i<ii;i++)(0,_array.validateIndex)(min[i],matrix._size[i]),(0,_array.validateIndex)(max[i],matrix._size[i]);return new DenseMatrix(function _getSubmatrix(data,index,dims,dim){var last=dim===dims-1;var range=index.dimension(dim);return last?range.map(function(i){return(0,_array.validateIndex)(i,data.length),data[i]}).valueOf():range.map(function(i){(0,_array.validateIndex)(i,data.length);var child=data[i];return _getSubmatrix(child,index,dims,dim+1)}).valueOf()}(matrix._data,index,size.length,0),matrix._datatype)}}(this,index);case 2:case 3:return function(matrix,index,submatrix,defaultValue){if(!index||!0!==index.isIndex)throw new TypeError("Invalid index");var sSize,iSize=index.size(),isScalar=index.isScalar();(0,_is.isMatrix)(submatrix)?(sSize=submatrix.size(),submatrix=submatrix.valueOf()):sSize=(0,_array.arraySize)(submatrix);if(isScalar){if(0!==sSize.length)throw new TypeError("Scalar expected");matrix.set(index.min(),submatrix,defaultValue)}else{if(iSize.length<matrix._size.length)throw new _DimensionError.DimensionError(iSize.length,matrix._size.length,"<");if(sSize.length<iSize.length){for(var i=0,outer=0;1===iSize[i]&&1===sSize[i];)i++;for(;1===iSize[i];)outer++,i++;submatrix=(0,_array.unsqueeze)(submatrix,iSize.length,outer,sSize)}if(!(0,_object.deepStrictEqual)(iSize,sSize))throw new _DimensionError.DimensionError(iSize,sSize,">");var size=index.max().map(function(i){return i+1});_fit(matrix,size,defaultValue);var dims=iSize.length;!function _setSubmatrix(data,index,submatrix,dims,dim){var last=dim===dims-1;var range=index.dimension(dim);last?range.forEach(function(dataIndex,subIndex){(0,_array.validateIndex)(dataIndex),data[dataIndex]=submatrix[subIndex[0]]}):range.forEach(function(dataIndex,subIndex){(0,_array.validateIndex)(dataIndex),_setSubmatrix(data[dataIndex],index,submatrix[subIndex[0]],dims,dim+1)})}(matrix._data,index,submatrix,dims,0)}return matrix}(this,index,replacement,defaultValue);default:throw new SyntaxError("Wrong number of arguments")}},DenseMatrix.prototype.get=function(index){if(!(0,_is.isArray)(index))throw new TypeError("Array expected");if(index.length!==this._size.length)throw new _DimensionError.DimensionError(index.length,this._size.length);for(var x=0;x<index.length;x++)(0,_array.validateIndex)(index[x],this._size[x]);for(var data=this._data,i=0,ii=index.length;i<ii;i++){var indexI=index[i];(0,_array.validateIndex)(indexI,data.length),data=data[indexI]}return data},DenseMatrix.prototype.set=function(index,value,defaultValue){if(!(0,_is.isArray)(index))throw new TypeError("Array expected");if(index.length<this._size.length)throw new _DimensionError.DimensionError(index.length,this._size.length,"<");var indexI;_fit(this,index.map(function(i){return i+1}),defaultValue);for(var data=this._data,i=0,ii=index.length-1;i<ii;i++)indexI=index[i],(0,_array.validateIndex)(indexI,data.length),data=data[indexI];return indexI=index[index.length-1],(0,_array.validateIndex)(indexI,data.length),data[indexI]=value,this},DenseMatrix.prototype.resize=function(size,defaultValue,copy){if(!(0,_is.isArray)(size))throw new TypeError("Array expected");return _resize(copy?this.clone():this,size,defaultValue)},DenseMatrix.prototype.reshape=function(size,copy){var m=copy?this.clone():this;return m._data=(0,_array.reshape)(m._data,size),m._size=size.slice(0),m},DenseMatrix.prototype.clone=function(){return new DenseMatrix({data:(0,_object.clone)(this._data),size:(0,_object.clone)(this._size),datatype:this._datatype})},DenseMatrix.prototype.size=function(){return this._size.slice(0)},DenseMatrix.prototype.map=function(callback){var me=this,data=function recurse(value,index){return(0,_is.isArray)(value)?value.map(function(child,i){return recurse(child,index.concat(i))}):callback(value,index,me)}(this._data,[]);return new DenseMatrix(data,void 0!==this._datatype?(0,_array.getArrayDataType)(data,_is.typeOf):void 0)},DenseMatrix.prototype.forEach=function(callback){var me=this;!function recurse(value,index){(0,_is.isArray)(value)?value.forEach(function(child,i){recurse(child,index.concat(i))}):callback(value,index,me)}(this._data,[])},DenseMatrix.prototype.toArray=function(){return(0,_object.clone)(this._data)},DenseMatrix.prototype.valueOf=function(){return this._data},DenseMatrix.prototype.format=function(options){return(0,_string.format)(this._data,options)},DenseMatrix.prototype.toString=function(){return(0,_string.format)(this._data)},DenseMatrix.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},DenseMatrix.prototype.diagonal=function(k){if(k){if((0,_is.isBigNumber)(k)&&(k=k.toNumber()),!(0,_is.isNumber)(k)||!(0,_number.isInteger)(k))throw new TypeError("The parameter k must be an integer number")}else k=0;for(var kSuper=0<k?k:0,kSub=k<0?-k:0,rows=this._size[0],columns=this._size[1],n=Math.min(rows-kSub,columns-kSuper),data=[],i=0;i<n;i++)data[i]=this._data[i+kSub][i+kSuper];return new DenseMatrix({data:data,size:[n],datatype:this._datatype})},DenseMatrix.diagonal=function(size,value,k,defaultValue){if(!(0,_is.isArray)(size))throw new TypeError("Array expected, size parameter");if(2!==size.length)throw new Error("Only two dimensions matrix are supported");if(size=size.map(function(s){if((0,_is.isBigNumber)(s)&&(s=s.toNumber()),!(0,_is.isNumber)(s)||!(0,_number.isInteger)(s)||s<1)throw new Error("Size values must be positive integers");return s}),k){if((0,_is.isBigNumber)(k)&&(k=k.toNumber()),!(0,_is.isNumber)(k)||!(0,_number.isInteger)(k))throw new TypeError("The parameter k must be an integer number")}else k=0;var _value,kSuper=0<k?k:0,kSub=k<0?-k:0,rows=size[0],columns=size[1],n=Math.min(rows-kSub,columns-kSuper);if((0,_is.isArray)(value)){if(value.length!==n)throw new Error("Invalid value array length");_value=function(i){return value[i]}}else if((0,_is.isMatrix)(value)){var ms=value.size();if(1!==ms.length||ms[0]!==n)throw new Error("Invalid matrix length");_value=function(i){return value.get([i])}}else _value=function(){return value};defaultValue=defaultValue||((0,_is.isBigNumber)(_value(0))?_value(0).mul(0):0);var data=[];if(0<size.length){data=(0,_array.resize)(data,size,defaultValue);for(var d=0;d<n;d++)data[d+kSub][d+kSuper]=_value(d)}return new DenseMatrix({data:data,size:[rows,columns]})},DenseMatrix.fromJSON=function(json){return new DenseMatrix(json)},DenseMatrix.prototype.swapRows=function(i,j){if(!((0,_is.isNumber)(i)&&(0,_number.isInteger)(i)&&(0,_is.isNumber)(j)&&(0,_number.isInteger)(j)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return(0,_array.validateIndex)(i,this._size[0]),(0,_array.validateIndex)(j,this._size[0]),DenseMatrix._swapRows(i,j,this._data),this},DenseMatrix._swapRows=function(i,j,data){var vi=data[i];data[i]=data[j],data[j]=vi},DenseMatrix},{isClass:!0});exports.createDenseMatrixClass=createDenseMatrixClass},{"../../error/DimensionError":399,"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937,"../../utils/object":938,"../../utils/string":941}],890:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dependencies=["smaller","larger"],createFibonacciHeapClass=(exports.createFibonacciHeapClass=void 0,require("../../utils/factory").factory)("FibonacciHeap",dependencies,function(_ref){var smaller=_ref.smaller,larger=_ref.larger,oneOverLogPhi=1/Math.log((1+Math.sqrt(5))/2);function FibonacciHeap(){if(!(this instanceof FibonacciHeap))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function _cut(minimum,node,parent){node.left.right=node.right,node.right.left=node.left,parent.degree--,parent.child===node&&(parent.child=node.right),0===parent.degree&&(parent.child=null),node.left=minimum,node.right=minimum.right,((minimum.right=node).right.left=node).parent=null,node.mark=!1}FibonacciHeap.prototype.type="FibonacciHeap",FibonacciHeap.prototype.isFibonacciHeap=!0,FibonacciHeap.prototype.insert=function(key,value){var minimum,node={key:key,value:value,degree:0};return this._minimum?(minimum=this._minimum,node.left=minimum,node.right=minimum.right,(minimum.right=node).right.left=node,smaller(key,minimum.key)&&(this._minimum=node)):((node.left=node).right=node,this._minimum=node),this._size++,node},FibonacciHeap.prototype.size=function(){return this._size},FibonacciHeap.prototype.clear=function(){this._minimum=null,this._size=0},FibonacciHeap.prototype.isEmpty=function(){return 0===this._size},FibonacciHeap.prototype.extractMinimum=function(){var node=this._minimum;if(null===node)return node;for(var minimum=this._minimum,numberOfChildren=node.degree,x=node.child;0<numberOfChildren;){var tempRight=x.right;x.left.right=x.right,x.right.left=x.left,x.left=minimum,x.right=minimum.right,((minimum.right=x).right.left=x).parent=null,x=tempRight,numberOfChildren--}return node.left.right=node.right,node.right.left=node.left,minimum=node===node.right?null:function(minimum,size){var y,arraySize=Math.floor(Math.log(size)*oneOverLogPhi)+1,array=new Array(arraySize),numRoots=0,x=minimum;if(x)for(numRoots++,x=x.right;x!==minimum;)numRoots++,x=x.right;for(;0<numRoots;){for(var temp,d=x.degree,next=x.right;y=array[d];){larger(x.key,y.key)&&(temp=y,y=x,x=temp),_linkNodes(y,x),array[d]=null,d++}array[d]=x,x=next,numRoots--}minimum=null;for(var i=0;i<arraySize;i++)(y=array[i])&&(minimum?(y.left.right=y.right,y.right.left=y.left,y.left=minimum,y.right=minimum.right,(minimum.right=y).right.left=y,smaller(y.key,minimum.key)&&(minimum=y)):minimum=y);return minimum}(minimum=node.right,this._size),this._size--,this._minimum=minimum,node},FibonacciHeap.prototype.remove=function(node){this._minimum=function(minimum,node,key){node.key=key;var parent=node.parent;parent&&smaller(node.key,parent.key)&&(_cut(minimum,node,parent),function _cascadingCut(minimum,node){var parent=node.parent;if(!parent)return;node.mark?(_cut(minimum,node,parent),_cascadingCut(parent)):node.mark=!0}(minimum,parent));smaller(node.key,minimum.key)&&(minimum=node);return minimum}(this._minimum,node,-1),this.extractMinimum()};var _linkNodes=function(node,parent){node.left.right=node.right,node.right.left=node.left,(node.parent=parent).child?(node.left=parent.child,node.right=parent.child.right,(parent.child.right=node).right.left=node):((parent.child=node).right=node).left=node,parent.degree++,node.mark=!1};return FibonacciHeap},{isClass:!0});exports.createFibonacciHeapClass=createFibonacciHeapClass},{"../../utils/factory":931}],891:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createImmutableDenseMatrixClass=void 0;var _is=require("../../utils/is"),_object=require("../../utils/object"),dependencies=["smaller","DenseMatrix"],createImmutableDenseMatrixClass=(0,require("../../utils/factory").factory)("ImmutableDenseMatrix",dependencies,function(_ref){var smaller=_ref.smaller,DenseMatrix=_ref.DenseMatrix;function ImmutableDenseMatrix(data,datatype){if(!(this instanceof ImmutableDenseMatrix))throw new SyntaxError("Constructor must be called with the new operator");if(datatype&&!(0,_is.isString)(datatype))throw new Error("Invalid datatype: "+datatype);if((0,_is.isMatrix)(data)||(0,_is.isArray)(data)){var matrix=new DenseMatrix(data,datatype);this._data=matrix._data,this._size=matrix._size,this._datatype=matrix._datatype,this._min=null,this._max=null}else if(data&&(0,_is.isArray)(data.data)&&(0,_is.isArray)(data.size))this._data=data.data,this._size=data.size,this._datatype=data.datatype,this._min=void 0!==data.min?data.min:null,this._max=void 0!==data.max?data.max:null;else{if(data)throw new TypeError("Unsupported type of data ("+(0,_is.typeOf)(data)+")");this._data=[],this._size=[0],this._datatype=datatype,this._min=null,this._max=null}}return(ImmutableDenseMatrix.prototype=new DenseMatrix).type="ImmutableDenseMatrix",ImmutableDenseMatrix.prototype.isImmutableDenseMatrix=!0,ImmutableDenseMatrix.prototype.subset=function(index){switch(arguments.length){case 1:var m=DenseMatrix.prototype.subset.call(this,index);return(0,_is.isMatrix)(m)?new ImmutableDenseMatrix({data:m._data,size:m._size,datatype:m._datatype}):m;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},ImmutableDenseMatrix.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},ImmutableDenseMatrix.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},ImmutableDenseMatrix.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},ImmutableDenseMatrix.prototype.clone=function(){return new ImmutableDenseMatrix({data:(0,_object.clone)(this._data),size:(0,_object.clone)(this._size),datatype:this._datatype})},ImmutableDenseMatrix.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},ImmutableDenseMatrix.fromJSON=function(json){return new ImmutableDenseMatrix(json)},ImmutableDenseMatrix.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},ImmutableDenseMatrix.prototype.min=function(){var m;return null===this._min&&(m=null,this.forEach(function(v){null!==m&&!smaller(v,m)||(m=v)}),this._min=null!==m?m:void 0),this._min},ImmutableDenseMatrix.prototype.max=function(){var m;return null===this._max&&(m=null,this.forEach(function(v){null!==m&&!smaller(m,v)||(m=v)}),this._max=null!==m?m:void 0),this._max},ImmutableDenseMatrix},{isClass:!0});exports.createImmutableDenseMatrixClass=createImmutableDenseMatrixClass},{"../../utils/factory":931,"../../utils/is":933,"../../utils/object":938}],892:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dependencies=[],createMatrixClass=(exports.createMatrixClass=void 0,require("../../utils/factory").factory)("Matrix",dependencies,function(){function Matrix(){if(!(this instanceof Matrix))throw new SyntaxError("Constructor must be called with the new operator")}return Matrix.prototype.type="Matrix",Matrix.prototype.isMatrix=!0,Matrix.storage=function(format){throw new Error("Matrix.storage is deprecated since v6.0.0. Use the factory function math.matrix instead.")},Matrix.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},Matrix.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},Matrix.prototype.create=function(data,datatype){throw new Error("Cannot invoke create on a Matrix interface")},Matrix.prototype.subset=function(index,replacement,defaultValue){throw new Error("Cannot invoke subset on a Matrix interface")},Matrix.prototype.get=function(index){throw new Error("Cannot invoke get on a Matrix interface")},Matrix.prototype.set=function(index,value,defaultValue){throw new Error("Cannot invoke set on a Matrix interface")},Matrix.prototype.resize=function(size,defaultValue){throw new Error("Cannot invoke resize on a Matrix interface")},Matrix.prototype.reshape=function(size,defaultValue){throw new Error("Cannot invoke reshape on a Matrix interface")},Matrix.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},Matrix.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},Matrix.prototype.map=function(callback,skipZeros){throw new Error("Cannot invoke map on a Matrix interface")},Matrix.prototype.forEach=function(callback){throw new Error("Cannot invoke forEach on a Matrix interface")},Matrix.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},Matrix.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},Matrix.prototype.format=function(options){throw new Error("Cannot invoke format on a Matrix interface")},Matrix.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},Matrix},{isClass:!0});exports.createMatrixClass=createMatrixClass},{"../../utils/factory":931}],893:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIndexClass=void 0;var _is=require("../../utils/is"),_object=require("../../utils/object"),_number=require("../../utils/number"),dependencies=["ImmutableDenseMatrix"],createIndexClass=(0,require("../../utils/factory").factory)("Index",dependencies,function(_ref){var ImmutableDenseMatrix=_ref.ImmutableDenseMatrix;function Index(ranges){if(!(this instanceof Index))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var i=0,ii=arguments.length;i<ii;i++){var arg=arguments[i];if((0,_is.isRange)(arg))this._dimensions.push(arg),this._isScalar=!1;else if(Array.isArray(arg)||(0,_is.isMatrix)(arg)){var m=_createImmutableMatrix(arg.valueOf());this._dimensions.push(m);var size=m.size();1===size.length&&1===size[0]||(this._isScalar=!1)}else if("number"==typeof arg)this._dimensions.push(_createImmutableMatrix([arg]));else{if("string"!=typeof arg)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(arg)}}}function _createImmutableMatrix(arg){for(var i=0,l=arg.length;i<l;i++)if("number"!=typeof arg[i]||!(0,_number.isInteger)(arg[i]))throw new TypeError("Index parameters must be positive integer numbers");return new ImmutableDenseMatrix(arg)}return Index.prototype.type="Index",Index.prototype.isIndex=!0,Index.prototype.clone=function(){var index=new Index;return index._dimensions=(0,_object.clone)(this._dimensions),index._isScalar=this._isScalar,index},Index.create=function(ranges){var index=new Index;return Index.apply(index,ranges),index},Index.prototype.size=function(){for(var size=[],i=0,ii=this._dimensions.length;i<ii;i++){var d=this._dimensions[i];size[i]="string"==typeof d?1:d.size()[0]}return size},Index.prototype.max=function(){for(var values=[],i=0,ii=this._dimensions.length;i<ii;i++){var range=this._dimensions[i];values[i]="string"==typeof range?range:range.max()}return values},Index.prototype.min=function(){for(var values=[],i=0,ii=this._dimensions.length;i<ii;i++){var range=this._dimensions[i];values[i]="string"==typeof range?range:range.min()}return values},Index.prototype.forEach=function(callback){for(var i=0,ii=this._dimensions.length;i<ii;i++)callback(this._dimensions[i],i,this)},Index.prototype.dimension=function(dim){return this._dimensions[dim]||null},Index.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},Index.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},Index.prototype.isScalar=function(){return this._isScalar},Index.prototype.valueOf=Index.prototype.toArray=function(){for(var array=[],i=0,ii=this._dimensions.length;i<ii;i++){var dimension=this._dimensions[i];array.push("string"==typeof dimension?dimension:dimension.toArray())}return array},Index.prototype.toString=function(){for(var strings=[],i=0,ii=this._dimensions.length;i<ii;i++){var dimension=this._dimensions[i];"string"==typeof dimension?strings.push(JSON.stringify(dimension)):strings.push(dimension.toString())}return"["+strings.join(", ")+"]"},Index.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},Index.fromJSON=function(json){return Index.create(json.dimensions)},Index},{isClass:!0});exports.createIndexClass=createIndexClass},{"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937,"../../utils/object":938}],894:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRangeClass=void 0;var _is=require("../../utils/is"),_number=require("../../utils/number"),dependencies=[],createRangeClass=(0,require("../../utils/factory").factory)("Range",dependencies,function(){function Range(start,end,step){if(!(this instanceof Range))throw new SyntaxError("Constructor must be called with the new operator");var hasStart=null!=start,hasEnd=null!=end,hasStep=null!=step;if(hasStart)if((0,_is.isBigNumber)(start))start=start.toNumber();else if("number"!=typeof start)throw new TypeError("Parameter start must be a number");if(hasEnd)if((0,_is.isBigNumber)(end))end=end.toNumber();else if("number"!=typeof end)throw new TypeError("Parameter end must be a number");if(hasStep)if((0,_is.isBigNumber)(step))step=step.toNumber();else if("number"!=typeof step)throw new TypeError("Parameter step must be a number");this.start=hasStart?parseFloat(start):0,this.end=hasEnd?parseFloat(end):0,this.step=hasStep?parseFloat(step):1}return Range.prototype.type="Range",Range.prototype.isRange=!0,Range.parse=function(str){if("string"!=typeof str)return null;var nums=str.split(":").map(function(arg){return parseFloat(arg)});if(nums.some(function(num){return isNaN(num)}))return null;switch(nums.length){case 2:return new Range(nums[0],nums[1]);case 3:return new Range(nums[0],nums[2],nums[1]);default:return null}},Range.prototype.clone=function(){return new Range(this.start,this.end,this.step)},Range.prototype.size=function(){var len=0,start=this.start,step=this.step,diff=this.end-start;return(0,_number.sign)(step)===(0,_number.sign)(diff)?len=Math.ceil(diff/step):0==diff&&(len=0),isNaN(len)&&(len=0),[len]},Range.prototype.min=function(){var size=this.size()[0];return 0<size?0<this.step?this.start:this.start+(size-1)*this.step:void 0},Range.prototype.max=function(){var size=this.size()[0];return 0<size?0<this.step?this.start+(size-1)*this.step:this.start:void 0},Range.prototype.forEach=function(callback){var x=this.start,step=this.step,end=this.end,i=0;if(0<step)for(;x<end;)callback(x,[i],this),x+=step,i++;else if(step<0)for(;end<x;)callback(x,[i],this),x+=step,i++},Range.prototype.map=function(callback){var array=[];return this.forEach(function(value,index,obj){array[index[0]]=callback(value,index,obj)}),array},Range.prototype.toArray=function(){var array=[];return this.forEach(function(value,index){array[index[0]]=value}),array},Range.prototype.valueOf=function(){return this.toArray()},Range.prototype.format=function(options){var str=(0,_number.format)(this.start,options);return 1!==this.step&&(str+=":"+(0,_number.format)(this.step,options)),str+=":"+(0,_number.format)(this.end,options)},Range.prototype.toString=function(){return this.format()},Range.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},Range.fromJSON=function(json){return new Range(json.start,json.end,json.step)},Range},{isClass:!0});exports.createRangeClass=createRangeClass},{"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937}],895:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dependencies=["addScalar","equalScalar","FibonacciHeap"],createSpaClass=(exports.createSpaClass=void 0,require("../../utils/factory").factory)("Spa",dependencies,function(_ref){var addScalar=_ref.addScalar,equalScalar=_ref.equalScalar,FibonacciHeap=_ref.FibonacciHeap;function Spa(){if(!(this instanceof Spa))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new FibonacciHeap}return Spa.prototype.type="Spa",Spa.prototype.isSpa=!0,Spa.prototype.set=function(i,v){var node;this._values[i]?this._values[i].value=v:(node=this._heap.insert(i,v),this._values[i]=node)},Spa.prototype.get=function(i){var node=this._values[i];return node?node.value:0},Spa.prototype.accumulate=function(i,v){var node=this._values[i];node?node.value=addScalar(node.value,v):(node=this._heap.insert(i,v),this._values[i]=node)},Spa.prototype.forEach=function(from,to,callback){var heap=this._heap,values=this._values,nodes=[];for((node=heap.extractMinimum())&&nodes.push(node);node&&node.key<=to;)node.key>=from&&(equalScalar(node.value,0)||callback(node.key,node.value,this)),(node=heap.extractMinimum())&&nodes.push(node);for(var i=0;i<nodes.length;i++){var node,n=nodes[i];values[(node=heap.insert(n.key,n.value)).key]=node}},Spa.prototype.swap=function(i,j){var v,nodei=this._values[i],nodej=this._values[j];!nodei&&nodej?(nodei=this._heap.insert(i,nodej.value),this._heap.remove(nodej),this._values[i]=nodei,this._values[j]=void 0):nodei&&!nodej?(nodej=this._heap.insert(j,nodei.value),this._heap.remove(nodei),this._values[j]=nodej,this._values[i]=void 0):nodei&&nodej&&(v=nodei.value,nodei.value=nodej.value,nodej.value=v)},Spa},{isClass:!0});exports.createSpaClass=createSpaClass},{"../../utils/factory":931}],896:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSparseMatrixClass=void 0;var _is=require("../../utils/is"),_number=require("../../utils/number"),_string=require("../../utils/string"),_object=require("../../utils/object"),_array=require("../../utils/array"),_factory=require("../../utils/factory"),_DimensionError=require("../../error/DimensionError"),dependencies=["typed","equalScalar","Matrix"],createSparseMatrixClass=(0,_factory.factory)("SparseMatrix",dependencies,function(_ref){var typed=_ref.typed,equalScalar=_ref.equalScalar,Matrix=_ref.Matrix;function SparseMatrix(data,datatype){if(!(this instanceof SparseMatrix))throw new SyntaxError("Constructor must be called with the new operator");if(datatype&&!(0,_is.isString)(datatype))throw new Error("Invalid datatype: "+datatype);if((0,_is.isMatrix)(data))!function(matrix,source,datatype){"SparseMatrix"===source.type?(matrix._values=source._values?(0,_object.clone)(source._values):void 0,matrix._index=(0,_object.clone)(source._index),matrix._ptr=(0,_object.clone)(source._ptr),matrix._size=(0,_object.clone)(source._size),matrix._datatype=datatype||source._datatype):_createFromArray(matrix,source.valueOf(),datatype||source._datatype)}(this,data,datatype);else if(data&&(0,_is.isArray)(data.index)&&(0,_is.isArray)(data.ptr)&&(0,_is.isArray)(data.size))this._values=data.values,this._index=data.index,this._ptr=data.ptr,this._size=data.size,this._datatype=datatype||data.datatype;else if((0,_is.isArray)(data))_createFromArray(this,data,datatype);else{if(data)throw new TypeError("Unsupported type of data ("+(0,_is.typeOf)(data)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=datatype}}function _createFromArray(matrix,data,datatype){matrix._values=[],matrix._index=[],matrix._ptr=[],matrix._datatype=datatype;var rows=data.length,columns=0,eq=equalScalar,zero=0;if((0,_is.isString)(datatype)&&(eq=typed.find(equalScalar,[datatype,datatype])||equalScalar,zero=typed.convert(0,datatype)),0<rows){var j=0;do{matrix._ptr.push(matrix._index.length);for(var i=0;i<rows;i++){var v,row=data[i];(0,_is.isArray)(row)?(0===j&&columns<row.length&&(columns=row.length),j<row.length&&(eq(v=row[j],zero)||(matrix._values.push(v),matrix._index.push(i)))):(0===j&&columns<1&&(columns=1),eq(row,zero)||(matrix._values.push(row),matrix._index.push(i)))}j++}while(j<columns)}matrix._ptr.push(matrix._index.length),matrix._size=[rows,columns]}function _getValueIndex(i,top,bottom,index){if(bottom-top==0)return bottom;for(var r=top;r<bottom;r++)if(index[r]===i)return r;return top}function _insert(k,i,j,v,values,index,ptr){values.splice(k,0,v),index.splice(k,0,i);for(var x=j+1;x<ptr.length;x++)ptr[x]++}function _resize(matrix,rows,columns,defaultValue){var value=defaultValue||0,eq=equalScalar,zero=0;(0,_is.isString)(matrix._datatype)&&(eq=typed.find(equalScalar,[matrix._datatype,matrix._datatype])||equalScalar,zero=typed.convert(0,matrix._datatype),value=typed.convert(value,matrix._datatype));var ins=!eq(value,zero),r=matrix._size[0],c=matrix._size[1];if(c<columns){for(j=c;j<columns;j++)if(matrix._ptr[j]=matrix._values.length,ins)for(i=0;i<r;i++)matrix._values.push(value),matrix._index.push(i);matrix._ptr[columns]=matrix._values.length}else columns<c&&(matrix._ptr.splice(columns+1,c-columns),matrix._values.splice(matrix._ptr[columns],matrix._values.length),matrix._index.splice(matrix._ptr[columns],matrix._index.length));if(c=columns,r<rows){if(ins){for(var n=0,j=0;j<c;j++){matrix._ptr[j]=matrix._ptr[j]+n,k=matrix._ptr[j+1]+n;for(var p=0,i=r;i<rows;i++,p++)matrix._values.splice(k+p,0,value),matrix._index.splice(k+p,0,i),n++}matrix._ptr[c]=matrix._values.length}}else if(rows<r){var d=0;for(j=0;j<c;j++){matrix._ptr[j]=matrix._ptr[j]-d;for(var k0=matrix._ptr[j],k1=matrix._ptr[j+1]-d,k=k0;k<k1;k++)rows-1<(i=matrix._index[k])&&(matrix._values.splice(k,1),matrix._index.splice(k,1),d++)}matrix._ptr[j]=matrix._values.length}return matrix._size[0]=rows,matrix._size[1]=columns,matrix}function _toArray(values,index,ptr,size,copy){for(var j,rows=size[0],columns=size[1],a=[],i=0;i<rows;i++)for(a[i]=[],j=0;j<columns;j++)a[i][j]=0;for(j=0;j<columns;j++)for(var k0=ptr[j],k1=ptr[j+1],k=k0;k<k1;k++)a[i=index[k]][j]=values?copy?(0,_object.clone)(values[k]):values[k]:1;return a}return(SparseMatrix.prototype=new Matrix).createSparseMatrix=function(data,datatype){return new SparseMatrix(data,datatype)},SparseMatrix.prototype.type="SparseMatrix",SparseMatrix.prototype.isSparseMatrix=!0,SparseMatrix.prototype.getDataType=function(){return(0,_array.getArrayDataType)(this._values,_is.typeOf)},SparseMatrix.prototype.storage=function(){return"sparse"},SparseMatrix.prototype.datatype=function(){return this._datatype},SparseMatrix.prototype.create=function(data,datatype){return new SparseMatrix(data,datatype)},SparseMatrix.prototype.density=function(){var rows=this._size[0],columns=this._size[1];return 0!==rows&&0!==columns?this._index.length/(rows*columns):0},SparseMatrix.prototype.subset=function(index,replacement,defaultValue){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function(matrix,idx){if(!(0,_is.isIndex)(idx))throw new TypeError("Invalid index");if(idx.isScalar())return matrix.get(idx.min());var i,ii,k,kk,size=idx.size();if(size.length!==matrix._size.length)throw new _DimensionError.DimensionError(size.length,matrix._size.length);var min=idx.min(),max=idx.max();for(i=0,ii=matrix._size.length;i<ii;i++)(0,_array.validateIndex)(min[i],matrix._size[i]),(0,_array.validateIndex)(max[i],matrix._size[i]);var mvalues=matrix._values,mindex=matrix._index,mptr=matrix._ptr,rows=idx.dimension(0),columns=idx.dimension(1),w=[],pv=[];rows.forEach(function(i,r){pv[i]=r[0],w[i]=!0});var values=mvalues?[]:void 0,index=[],ptr=[];return columns.forEach(function(j){for(ptr.push(index.length),k=mptr[j],kk=mptr[j+1];k<kk;k++)i=mindex[k],!0===w[i]&&(index.push(pv[i]),values&&values.push(mvalues[k]))}),ptr.push(index.length),new SparseMatrix({values:values,index:index,ptr:ptr,size:size,datatype:matrix._datatype})}(this,index);case 2:case 3:return function(matrix,index,submatrix,defaultValue){if(!index||!0!==index.isIndex)throw new TypeError("Invalid index");var sSize,iSize=index.size(),isScalar=index.isScalar();(0,_is.isMatrix)(submatrix)?(sSize=submatrix.size(),submatrix=submatrix.toArray()):sSize=(0,_array.arraySize)(submatrix);if(isScalar){if(0!==sSize.length)throw new TypeError("Scalar expected");matrix.set(index.min(),submatrix,defaultValue)}else{if(1!==iSize.length&&2!==iSize.length)throw new _DimensionError.DimensionError(iSize.length,matrix._size.length,"<");if(sSize.length<iSize.length){for(var i=0,outer=0;1===iSize[i]&&1===sSize[i];)i++;for(;1===iSize[i];)outer++,i++;submatrix=(0,_array.unsqueeze)(submatrix,iSize.length,outer,sSize)}if(!(0,_object.deepStrictEqual)(iSize,sSize))throw new _DimensionError.DimensionError(iSize,sSize,">");for(var x0=index.min()[0],y0=index.min()[1],m=sSize[0],n=sSize[1],x=0;x<m;x++)for(var y=0;y<n;y++){var v=submatrix[x][y];matrix.set([x+x0,y+y0],v,defaultValue)}}return matrix}(this,index,replacement,defaultValue);default:throw new SyntaxError("Wrong number of arguments")}},SparseMatrix.prototype.get=function(index){if(!(0,_is.isArray)(index))throw new TypeError("Array expected");if(index.length!==this._size.length)throw new _DimensionError.DimensionError(index.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var i=index[0],j=index[1];(0,_array.validateIndex)(i,this._size[0]),(0,_array.validateIndex)(j,this._size[1]);var k=_getValueIndex(i,this._ptr[j],this._ptr[j+1],this._index);return k<this._ptr[j+1]&&this._index[k]===i?this._values[k]:0},SparseMatrix.prototype.set=function(index,v,defaultValue){if(!(0,_is.isArray)(index))throw new TypeError("Array expected");if(index.length!==this._size.length)throw new _DimensionError.DimensionError(index.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var i=index[0],j=index[1],rows=this._size[0],columns=this._size[1],eq=equalScalar,zero=0;(0,_is.isString)(this._datatype)&&(eq=typed.find(equalScalar,[this._datatype,this._datatype])||equalScalar,zero=typed.convert(0,this._datatype)),(rows-1<i||columns-1<j)&&(_resize(this,Math.max(i+1,rows),Math.max(j+1,columns),defaultValue),rows=this._size[0],columns=this._size[1]),(0,_array.validateIndex)(i,rows),(0,_array.validateIndex)(j,columns);var k=_getValueIndex(i,this._ptr[j],this._ptr[j+1],this._index);return k<this._ptr[j+1]&&this._index[k]===i?eq(v,zero)?function(k,j,values,index,ptr){values.splice(k,1),index.splice(k,1);for(var x=j+1;x<ptr.length;x++)ptr[x]--}(k,j,this._values,this._index,this._ptr):this._values[k]=v:_insert(k,i,j,v,this._values,this._index,this._ptr),this},SparseMatrix.prototype.resize=function(size,defaultValue,copy){if(!(0,_is.isArray)(size))throw new TypeError("Array expected");if(2!==size.length)throw new Error("Only two dimensions matrix are supported");return size.forEach(function(value){if(!(0,_is.isNumber)(value)||!(0,_number.isInteger)(value)||value<0)throw new TypeError("Invalid size, must contain positive integers (size: "+(0,_string.format)(size)+")")}),_resize(copy?this.clone():this,size[0],size[1],defaultValue)},SparseMatrix.prototype.reshape=function(size,copy){if(!(0,_is.isArray)(size))throw new TypeError("Array expected");if(2!==size.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(size.forEach(function(value){if(!(0,_is.isNumber)(value)||!(0,_number.isInteger)(value)||value<0)throw new TypeError("Invalid size, must contain positive integers (size: "+(0,_string.format)(size)+")")}),this._size[0]*this._size[1]!=size[0]*size[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var m=copy?this.clone():this;if(this._size[0]===size[0]&&this._size[1]===size[1])return m;for(var colIndex=[],i=0;i<m._ptr.length;i++)for(var j=0;j<m._ptr[i+1]-m._ptr[i];j++)colIndex.push(i);for(var values=m._values.slice(),rowIndex=m._index.slice(),_i=0;_i<m._index.length;_i++){var r1=rowIndex[_i],c1=colIndex[_i],flat=r1*m._size[1]+c1;colIndex[_i]=flat%size[1],rowIndex[_i]=Math.floor(flat/size[1])}m._values.length=0,m._index.length=0,m._ptr.length=size[1]+1,m._size=size.slice();for(var _i2=0;_i2<m._ptr.length;_i2++)m._ptr[_i2]=0;for(var h=0;h<values.length;h++){var _i3=rowIndex[h],_j=colIndex[h],v=values[h];_insert(_getValueIndex(_i3,m._ptr[_j],m._ptr[_j+1],m._index),_i3,_j,v,m._values,m._index,m._ptr)}return m},SparseMatrix.prototype.clone=function(){return new SparseMatrix({values:this._values?(0,_object.clone)(this._values):void 0,index:(0,_object.clone)(this._index),ptr:(0,_object.clone)(this._ptr),size:(0,_object.clone)(this._size),datatype:this._datatype})},SparseMatrix.prototype.size=function(){return this._size.slice(0)},SparseMatrix.prototype.map=function(callback,skipZeros){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var me=this;return function(matrix,minRow,maxRow,minColumn,maxColumn,callback,skipZeros){var values=[],index=[],ptr=[],eq=equalScalar,zero=0;(0,_is.isString)(matrix._datatype)&&(eq=typed.find(equalScalar,[matrix._datatype,matrix._datatype])||equalScalar,zero=typed.convert(0,matrix._datatype));for(var invoke=function(v,x,y){v=callback(v,x,y),eq(v,zero)||(values.push(v),index.push(x))},j=minColumn;j<=maxColumn;j++){ptr.push(values.length);var k0=matrix._ptr[j],k1=matrix._ptr[j+1];if(skipZeros)for(var k=k0;k<k1;k++){var i=matrix._index[k];minRow<=i&&i<=maxRow&&invoke(matrix._values[k],i-minRow,j-minColumn)}else{for(var _values={},_k=k0;_k<k1;_k++){var _i4=matrix._index[_k];_values[_i4]=matrix._values[_k]}for(var _i5=minRow;_i5<=maxRow;_i5++){var value=_i5 in _values?_values[_i5]:0;invoke(value,_i5-minRow,j-minColumn)}}}return ptr.push(values.length),new SparseMatrix({values:values,index:index,ptr:ptr,size:[maxRow-minRow+1,maxColumn-minColumn+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,function(v,i,j){return callback(v,[i,j],me)},skipZeros)},SparseMatrix.prototype.forEach=function(callback,skipZeros){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var rows=this._size[0],columns=this._size[1],j=0;j<columns;j++){var k0=this._ptr[j],k1=this._ptr[j+1];if(skipZeros)for(var k=k0;k<k1;k++){var i=this._index[k];callback(this._values[k],[i,j],this)}else{for(var values={},_k2=k0;_k2<k1;_k2++){values[this._index[_k2]]=this._values[_k2]}for(var _i7=0;_i7<rows;_i7++){callback(_i7 in values?values[_i7]:0,[_i7,j],this)}}}},SparseMatrix.prototype.toArray=function(){return _toArray(this._values,this._index,this._ptr,this._size,!0)},SparseMatrix.prototype.valueOf=function(){return _toArray(this._values,this._index,this._ptr,this._size,!1)},SparseMatrix.prototype.format=function(options){for(var rows=this._size[0],columns=this._size[1],density=this.density(),str="Sparse Matrix ["+(0,_string.format)(rows,options)+" x "+(0,_string.format)(columns,options)+"] density: "+(0,_string.format)(density,options)+"\n",j=0;j<columns;j++)for(var k0=this._ptr[j],k1=this._ptr[j+1],k=k0;k<k1;k++){var i=this._index[k];str+="\n    ("+(0,_string.format)(i,options)+", "+(0,_string.format)(j,options)+") ==> "+(this._values?(0,_string.format)(this._values[k],options):"X")}return str},SparseMatrix.prototype.toString=function(){return(0,_string.format)(this.toArray())},SparseMatrix.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},SparseMatrix.prototype.diagonal=function(k){if(k){if((0,_is.isBigNumber)(k)&&(k=k.toNumber()),!(0,_is.isNumber)(k)||!(0,_number.isInteger)(k))throw new TypeError("The parameter k must be an integer number")}else k=0;var kSuper=0<k?k:0,kSub=k<0?-k:0,rows=this._size[0],columns=this._size[1],n=Math.min(rows-kSub,columns-kSuper),values=[],index=[],ptr=[];ptr[0]=0;for(var j=kSuper;j<columns&&values.length<n;j++)for(var k0=this._ptr[j],k1=this._ptr[j+1],x=k0;x<k1;x++){var i=this._index[x];if(i===j-kSuper+kSub){values.push(this._values[x]),index[values.length-1]=i-kSub;break}}return ptr.push(values.length),new SparseMatrix({values:values,index:index,ptr:ptr,size:[n,1]})},SparseMatrix.fromJSON=function(json){return new SparseMatrix(json)},SparseMatrix.diagonal=function(size,value,k,defaultValue,datatype){if(!(0,_is.isArray)(size))throw new TypeError("Array expected, size parameter");if(2!==size.length)throw new Error("Only two dimensions matrix are supported");if(size=size.map(function(s){if((0,_is.isBigNumber)(s)&&(s=s.toNumber()),!(0,_is.isNumber)(s)||!(0,_number.isInteger)(s)||s<1)throw new Error("Size values must be positive integers");return s}),k){if((0,_is.isBigNumber)(k)&&(k=k.toNumber()),!(0,_is.isNumber)(k)||!(0,_number.isInteger)(k))throw new TypeError("The parameter k must be an integer number")}else k=0;var eq=equalScalar,zero=0;(0,_is.isString)(datatype)&&(eq=typed.find(equalScalar,[datatype,datatype])||equalScalar,zero=typed.convert(0,datatype));var _value,kSuper=0<k?k:0,kSub=k<0?-k:0,rows=size[0],columns=size[1],n=Math.min(rows-kSub,columns-kSuper);if((0,_is.isArray)(value)){if(value.length!==n)throw new Error("Invalid value array length");_value=function(i){return value[i]}}else if((0,_is.isMatrix)(value)){var ms=value.size();if(1!==ms.length||ms[0]!==n)throw new Error("Invalid matrix length");_value=function(i){return value.get([i])}}else _value=function(){return value};for(var values=[],index=[],ptr=[],j=0;j<columns;j++){ptr.push(values.length);var v,i=j-kSuper;0<=i&&i<n&&(eq(v=_value(i),zero)||(index.push(i+kSub),values.push(v)))}return ptr.push(values.length),new SparseMatrix({values:values,index:index,ptr:ptr,size:[rows,columns]})},SparseMatrix.prototype.swapRows=function(i,j){if(!((0,_is.isNumber)(i)&&(0,_number.isInteger)(i)&&(0,_is.isNumber)(j)&&(0,_number.isInteger)(j)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return(0,_array.validateIndex)(i,this._size[0]),(0,_array.validateIndex)(j,this._size[0]),SparseMatrix._swapRows(i,j,this._size[1],this._values,this._index,this._ptr),this},SparseMatrix._forEachRow=function(j,values,index,ptr,callback){for(var k0=ptr[j],k1=ptr[j+1],k=k0;k<k1;k++)callback(index[k],values[k])},SparseMatrix._swapRows=function(x,y,columns,values,index,ptr){for(var j=0;j<columns;j++){var v,vx,vy,k0=ptr[j],k1=ptr[j+1],kx=_getValueIndex(x,k0,k1,index),ky=_getValueIndex(y,k0,k1,index);kx<k1&&ky<k1&&index[kx]===x&&index[ky]===y?values&&(v=values[kx],values[kx]=values[ky],values[ky]=v):kx<k1&&index[kx]===x&&(k1<=ky||index[ky]!==y)?(vx=values?values[kx]:void 0,index.splice(ky,0,y),values&&values.splice(ky,0,vx),index.splice(ky<=kx?kx+1:kx,1),values&&values.splice(ky<=kx?kx+1:kx,1)):ky<k1&&index[ky]===y&&(k1<=kx||index[kx]!==x)&&(vy=values?values[ky]:void 0,index.splice(kx,0,x),values&&values.splice(kx,0,vy),index.splice(kx<=ky?ky+1:ky,1),values&&values.splice(kx<=ky?ky+1:ky,1))}},SparseMatrix},{isClass:!0});exports.createSparseMatrixClass=createSparseMatrixClass},{"../../error/DimensionError":399,"../../utils/array":922,"../../utils/factory":931,"../../utils/is":933,"../../utils/number":937,"../../utils/object":938,"../../utils/string":941}],897:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIndex=void 0;var _factory=require("../../../utils/factory"),_is=require("../../../utils/is"),dependencies=["typed","Index"],createIndex=(0,_factory.factory)("index",dependencies,function(_ref){var typed=_ref.typed,Index=_ref.Index;return typed("index",{"...number | string | BigNumber | Range | Array | Matrix":function(args){var ranges=args.map(function(arg){return(0,_is.isBigNumber)(arg)?arg.toNumber():Array.isArray(arg)||(0,_is.isMatrix)(arg)?arg.map(function(elem){return(0,_is.isBigNumber)(elem)?elem.toNumber():elem}):arg}),res=new Index;return Index.apply(res,ranges),res}})});exports.createIndex=createIndex},{"../../../utils/factory":931,"../../../utils/is":933}],898:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMatrix=void 0;var _factory=require("../../../utils/factory"),dependencies=["typed","Matrix","DenseMatrix","SparseMatrix"],createMatrix=(0,_factory.factory)("matrix",dependencies,function(_ref){var typed=_ref.typed,DenseMatrix=(_ref.Matrix,_ref.DenseMatrix),SparseMatrix=_ref.SparseMatrix;return typed("matrix",{"":function(){return _create([])},string:function(format){return _create([],format)},"string, string":function(format,datatype){return _create([],format,datatype)},Array:function(data){return _create(data)},Matrix:function(data){return _create(data,data.storage())},"Array | Matrix, string":_create,"Array | Matrix, string, string":_create});function _create(data,format,datatype){if("dense"===format||"default"===format||void 0===format)return new DenseMatrix(data,datatype);if("sparse"===format)return new SparseMatrix(data,datatype);throw new TypeError("Unknown matrix type "+JSON.stringify(format)+".")}});exports.createMatrix=createMatrix},{"../../../utils/factory":931}],899:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSparse=void 0;var _factory=require("../../../utils/factory"),dependencies=["typed","SparseMatrix"],createSparse=(0,_factory.factory)("sparse",dependencies,function(_ref){var typed=_ref.typed,SparseMatrix=_ref.SparseMatrix;return typed("sparse",{"":function(){return new SparseMatrix([])},string:function(datatype){return new SparseMatrix([],datatype)},"Array | Matrix":function(data){return new SparseMatrix(data)},"Array | Matrix, string":function(data,datatype){return new SparseMatrix(data,datatype)}})});exports.createSparse=createSparse},{"../../../utils/factory":931}],900:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAlgorithm01=void 0;var _factory=require("../../../utils/factory"),_DimensionError=require("../../../error/DimensionError"),dependencies=["typed"],createAlgorithm01=(0,_factory.factory)("algorithm01",dependencies,function(_ref){var typed=_ref.typed;return function(denseMatrix,sparseMatrix,callback,inverse){var adata=denseMatrix._data,asize=denseMatrix._size,adt=denseMatrix._datatype,bvalues=sparseMatrix._values,bindex=sparseMatrix._index,bptr=sparseMatrix._ptr,bsize=sparseMatrix._size,bdt=sparseMatrix._datatype;if(asize.length!==bsize.length)throw new _DimensionError.DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");if(!bvalues)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");for(var rows=asize[0],columns=asize[1],dt="string"==typeof adt&&adt===bdt?adt:void 0,cf=dt?typed.find(callback,[dt,dt]):callback,cdata=[],i=0;i<rows;i++)cdata[i]=[];for(var x=[],w=[],j=0;j<columns;j++){for(var mark=j+1,k0=bptr[j],k1=bptr[j+1],k=k0;k<k1;k++)x[i=bindex[k]]=inverse?cf(bvalues[k],adata[i][j]):cf(adata[i][j],bvalues[k]),w[i]=mark;for(i=0;i<rows;i++)w[i]===mark?cdata[i][j]=x[i]:cdata[i][j]=adata[i][j]}return denseMatrix.createDenseMatrix({data:cdata,size:[rows,columns],datatype:dt})}});exports.createAlgorithm01=createAlgorithm01},{"../../../error/DimensionError":399,"../../../utils/factory":931}],901:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAlgorithm02=void 0;var _factory=require("../../../utils/factory"),_DimensionError=require("../../../error/DimensionError"),dependencies=["typed","equalScalar"],createAlgorithm02=(0,_factory.factory)("algorithm02",dependencies,function(_ref){var typed=_ref.typed,equalScalar=_ref.equalScalar;return function(denseMatrix,sparseMatrix,callback,inverse){var adata=denseMatrix._data,asize=denseMatrix._size,adt=denseMatrix._datatype,bvalues=sparseMatrix._values,bindex=sparseMatrix._index,bptr=sparseMatrix._ptr,bsize=sparseMatrix._size,bdt=sparseMatrix._datatype;if(asize.length!==bsize.length)throw new _DimensionError.DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");if(!bvalues)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));for(var cvalues=[],cindex=[],cptr=[],j=0;j<columns;j++){cptr[j]=cindex.length;for(var k0=bptr[j],k1=bptr[j+1],k=k0;k<k1;k++){var i=bindex[k],cij=inverse?cf(bvalues[k],adata[i][j]):cf(adata[i][j],bvalues[k]);eq(cij,zero)||(cindex.push(i),cvalues.push(cij))}}return cptr[columns]=cindex.length,sparseMatrix.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt})}});exports.createAlgorithm02=createAlgorithm02},{"../../../error/DimensionError":399,"../../../utils/factory":931}],902:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAlgorithm03=void 0;var _factory=require("../../../utils/factory"),_DimensionError=require("../../../error/DimensionError"),dependencies=["typed"],createAlgorithm03=(0,_factory.factory)("algorithm03",dependencies,function(_ref){var typed=_ref.typed;return function(denseMatrix,sparseMatrix,callback,inverse){var adata=denseMatrix._data,asize=denseMatrix._size,adt=denseMatrix._datatype,bvalues=sparseMatrix._values,bindex=sparseMatrix._index,bptr=sparseMatrix._ptr,bsize=sparseMatrix._size,bdt=sparseMatrix._datatype;if(asize.length!==bsize.length)throw new _DimensionError.DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");if(!bvalues)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var dt,rows=asize[0],columns=asize[1],zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));for(var cdata=[],z=0;z<rows;z++)cdata[z]=[];for(var x=[],w=[],j=0;j<columns;j++){for(var mark=j+1,k0=bptr[j],k1=bptr[j+1],k=k0;k<k1;k++){var i=bindex[k];x[i]=inverse?cf(bvalues[k],adata[i][j]):cf(adata[i][j],bvalues[k]),w[i]=mark}for(var y=0;y<rows;y++)w[y]===mark?cdata[y][j]=x[y]:cdata[y][j]=inverse?cf(zero,adata[y][j]):cf(adata[y][j],zero)}return denseMatrix.createDenseMatrix({data:cdata,size:[rows,columns],datatype:dt})}});exports.createAlgorithm03=createAlgorithm03},{"../../../error/DimensionError":399,"../../../utils/factory":931}],903:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAlgorithm04=void 0;var _factory=require("../../../utils/factory"),_DimensionError=require("../../../error/DimensionError"),dependencies=["typed","equalScalar"],createAlgorithm04=(0,_factory.factory)("algorithm04",dependencies,function(_ref){var typed=_ref.typed,equalScalar=_ref.equalScalar;return function(a,b,callback){var avalues=a._values,aindex=a._index,aptr=a._ptr,asize=a._size,adt=a._datatype,bvalues=b._values,bindex=b._index,bptr=b._ptr,bsize=b._size,bdt=b._datatype;if(asize.length!==bsize.length)throw new _DimensionError.DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));for(var cvalues=avalues&&bvalues?[]:void 0,cindex=[],cptr=[],xa=avalues&&bvalues?[]:void 0,xb=avalues&&bvalues?[]:void 0,wa=[],wb=[],j=0;j<columns;j++){cptr[j]=cindex.length;for(var v,i,mark=j+1,k0=aptr[j],k1=aptr[j+1],k=k0;k<k1;k++)i=aindex[k],cindex.push(i),wa[i]=mark,xa&&(xa[i]=avalues[k]);for(k0=bptr[j],k1=bptr[j+1],k=k0;k<k1;k++){wa[i=bindex[k]]===mark?xa&&(eq(v=cf(xa[i],bvalues[k]),zero)?wa[i]=null:xa[i]=v):(cindex.push(i),wb[i]=mark,xb&&(xb[i]=bvalues[k]))}if(xa&&xb)for(k=cptr[j];k<cindex.length;)wa[i=cindex[k]]===mark?(cvalues[k]=xa[i],k++):wb[i]===mark?(cvalues[k]=xb[i],k++):cindex.splice(k,1)}return cptr[columns]=cindex.length,a.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt})}});exports.createAlgorithm04=createAlgorithm04},{"../../../error/DimensionError":399,"../../../utils/factory":931}],904:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAlgorithm05=void 0;var _factory=require("../../../utils/factory"),_DimensionError=require("../../../error/DimensionError"),dependencies=["typed","equalScalar"],createAlgorithm05=(0,_factory.factory)("algorithm05",dependencies,function(_ref){var typed=_ref.typed,equalScalar=_ref.equalScalar;return function(a,b,callback){var avalues=a._values,aindex=a._index,aptr=a._ptr,asize=a._size,adt=a._datatype,bvalues=b._values,bindex=b._index,bptr=b._ptr,bsize=b._size,bdt=b._datatype;if(asize.length!==bsize.length)throw new _DimensionError.DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));for(var i,cvalues=avalues&&bvalues?[]:void 0,cindex=[],cptr=[],xa=cvalues?[]:void 0,xb=cvalues?[]:void 0,wa=[],wb=[],j=0;j<columns;j++){cptr[j]=cindex.length;for(var mark=j+1,k=aptr[j],k1=aptr[j+1];k<k1;k++)i=aindex[k],cindex.push(i),wa[i]=mark,xa&&(xa[i]=avalues[k]);for(k=bptr[j],k1=bptr[j+1];k<k1;k++)wa[i=bindex[k]]!==mark&&cindex.push(i),wb[i]=mark,xb&&(xb[i]=bvalues[k]);if(cvalues)for(k=cptr[j];k<cindex.length;){var vc,wai=wa[i=cindex[k]],wbi=wb[i];wai!==mark&&wbi!==mark||(eq(vc=cf(wai===mark?xa[i]:zero,wbi===mark?xb[i]:zero),zero)?cindex.splice(k,1):(cvalues.push(vc),k++))}}return cptr[columns]=cindex.length,a.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt})}});exports.createAlgorithm05=createAlgorithm05},{"../../../error/DimensionError":399,"../../../utils/factory":931}],905:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAlgorithm06=void 0;var _factory=require("../../../utils/factory"),_DimensionError=require("../../../error/DimensionError"),_collection=require("../../../utils/collection"),dependencies=["typed","equalScalar"],createAlgorithm06=(0,_factory.factory)("algorithm06",dependencies,function(_ref){var typed=_ref.typed,equalScalar=_ref.equalScalar;return function(a,b,callback){var avalues=a._values,asize=a._size,adt=a._datatype,bvalues=b._values,bsize=b._size,bdt=b._datatype;if(asize.length!==bsize.length)throw new _DimensionError.DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));for(var cvalues=avalues&&bvalues?[]:void 0,cindex=[],cptr=[],x=cvalues?[]:void 0,w=[],u=[],j=0;j<columns;j++){cptr[j]=cindex.length;var mark=j+1;if((0,_collection.scatter)(a,j,w,x,u,mark,cindex,cf),(0,_collection.scatter)(b,j,w,x,u,mark,cindex,cf),x)for(var k=cptr[j];k<cindex.length;){var v,i=cindex[k];u[i]!==mark||eq(v=x[i],zero)?cindex.splice(k,1):(cvalues.push(v),k++)}else for(var p=cptr[j];p<cindex.length;){u[cindex[p]]!==mark?cindex.splice(p,1):p++}}return cptr[columns]=cindex.length,a.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt})}});exports.createAlgorithm06=createAlgorithm06},{"../../../error/DimensionError":399,"../../../utils/collection":927,"../../../utils/factory":931}],906:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAlgorithm07=void 0;var _factory=require("../../../utils/factory"),_DimensionError=require("../../../error/DimensionError"),dependencies=["typed","DenseMatrix"],createAlgorithm07=(0,_factory.factory)("algorithm07",dependencies,function(_ref){var typed=_ref.typed,DenseMatrix=_ref.DenseMatrix;return function(a,b,callback){var asize=a._size,adt=a._datatype,bsize=b._size,bdt=b._datatype;if(asize.length!==bsize.length)throw new _DimensionError.DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");var dt,rows=asize[0],columns=asize[1],zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));for(var cdata=[],i=0;i<rows;i++)cdata[i]=[];for(var xa=[],xb=[],wa=[],wb=[],j=0;j<columns;j++){var mark=j+1;for(_scatter(a,j,wa,xa,mark),_scatter(b,j,wb,xb,mark),i=0;i<rows;i++){var va=wa[i]===mark?xa[i]:zero,vb=wb[i]===mark?xb[i]:zero;cdata[i][j]=cf(va,vb)}}return new DenseMatrix({data:cdata,size:[rows,columns],datatype:dt})};function _scatter(m,j,w,x,mark){for(var values=m._values,index=m._index,ptr=m._ptr,k=ptr[j],k1=ptr[j+1];k<k1;k++){var i=index[k];w[i]=mark,x[i]=values[k]}}});exports.createAlgorithm07=createAlgorithm07},{"../../../error/DimensionError":399,"../../../utils/factory":931}],907:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAlgorithm08=void 0;var _factory=require("../../../utils/factory"),_DimensionError=require("../../../error/DimensionError"),dependencies=["typed","equalScalar"],createAlgorithm08=(0,_factory.factory)("algorithm08",dependencies,function(_ref){var typed=_ref.typed,equalScalar=_ref.equalScalar;return function(a,b,callback){var avalues=a._values,aindex=a._index,aptr=a._ptr,asize=a._size,adt=a._datatype,bvalues=b._values,bindex=b._index,bptr=b._ptr,bsize=b._size,bdt=b._datatype;if(asize.length!==bsize.length)throw new _DimensionError.DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");if(!avalues||!bvalues)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));for(var i,cvalues=[],cindex=[],cptr=[],x=[],w=[],j=0;j<columns;j++){cptr[j]=cindex.length;for(var mark=j+1,k0=aptr[j],k1=aptr[j+1],k=k0;k<k1;k++)w[i=aindex[k]]=mark,x[i]=avalues[k],cindex.push(i);for(k0=bptr[j],k1=bptr[j+1],k=k0;k<k1;k++)w[i=bindex[k]]===mark&&(x[i]=cf(x[i],bvalues[k]));for(k=cptr[j];k<cindex.length;){var v=x[i=cindex[k]];eq(v,zero)?cindex.splice(k,1):(cvalues.push(v),k++)}}return cptr[columns]=cindex.length,a.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt})}});exports.createAlgorithm08=createAlgorithm08},{"../../../error/DimensionError":399,"../../../utils/factory":931}],908:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAlgorithm09=void 0;var _factory=require("../../../utils/factory"),_DimensionError=require("../../../error/DimensionError"),dependencies=["typed","equalScalar"],createAlgorithm09=(0,_factory.factory)("algorithm09",dependencies,function(_ref){var typed=_ref.typed,equalScalar=_ref.equalScalar;return function(a,b,callback){var avalues=a._values,aindex=a._index,aptr=a._ptr,asize=a._size,adt=a._datatype,bvalues=b._values,bindex=b._index,bptr=b._ptr,bsize=b._size,bdt=b._datatype;if(asize.length!==bsize.length)throw new _DimensionError.DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));for(var k,k0,k1,cvalues=avalues&&bvalues?[]:void 0,cindex=[],cptr=[],x=cvalues?[]:void 0,w=[],j=0;j<columns;j++){cptr[j]=cindex.length;var mark=j+1;if(x)for(k0=bptr[j],k1=bptr[j+1],k=k0;k<k1;k++)w[i=bindex[k]]=mark,x[i]=bvalues[k];for(k0=aptr[j],k1=aptr[j+1],k=k0;k<k1;k++){var vb,vc,i=aindex[k];x?(vb=w[i]===mark?x[i]:zero,eq(vc=cf(avalues[k],vb),zero)||(cindex.push(i),cvalues.push(vc))):cindex.push(i)}}return cptr[columns]=cindex.length,a.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt})}});exports.createAlgorithm09=createAlgorithm09},{"../../../error/DimensionError":399,"../../../utils/factory":931}],909:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dependencies=["typed","DenseMatrix"],createAlgorithm10=(exports.createAlgorithm10=void 0,require("../../../utils/factory").factory)("algorithm10",dependencies,function(_ref){var typed=_ref.typed,DenseMatrix=_ref.DenseMatrix;return function(s,b,callback,inverse){var avalues=s._values,aindex=s._index,aptr=s._ptr,asize=s._size,adt=s._datatype;if(!avalues)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var dt,rows=asize[0],columns=asize[1],cf=callback;"string"==typeof adt&&(dt=adt,b=typed.convert(b,dt),cf=typed.find(callback,[dt,dt]));for(var cdata=[],x=[],w=[],j=0;j<columns;j++){for(var mark=j+1,k0=aptr[j],k1=aptr[j+1],k=k0;k<k1;k++){var r=aindex[k];x[r]=avalues[k],w[r]=mark}for(var i=0;i<rows;i++)0===j&&(cdata[i]=[]),w[i]===mark?cdata[i][j]=inverse?cf(b,x[i]):cf(x[i],b):cdata[i][j]=b}return new DenseMatrix({data:cdata,size:[rows,columns],datatype:dt})}});exports.createAlgorithm10=createAlgorithm10},{"../../../utils/factory":931}],910:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dependencies=["typed","equalScalar"],createAlgorithm11=(exports.createAlgorithm11=void 0,require("../../../utils/factory").factory)("algorithm11",dependencies,function(_ref){var typed=_ref.typed,equalScalar=_ref.equalScalar;return function(s,b,callback,inverse){var avalues=s._values,aindex=s._index,aptr=s._ptr,asize=s._size,adt=s._datatype;if(!avalues)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),b=typed.convert(b,dt),cf=typed.find(callback,[dt,dt]));for(var cvalues=[],cindex=[],cptr=[],j=0;j<columns;j++){cptr[j]=cindex.length;for(var k0=aptr[j],k1=aptr[j+1],k=k0;k<k1;k++){var i=aindex[k],v=inverse?cf(b,avalues[k]):cf(avalues[k],b);eq(v,zero)||(cindex.push(i),cvalues.push(v))}}return cptr[columns]=cindex.length,s.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt})}});exports.createAlgorithm11=createAlgorithm11},{"../../../utils/factory":931}],911:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dependencies=["typed","DenseMatrix"],createAlgorithm12=(exports.createAlgorithm12=void 0,require("../../../utils/factory").factory)("algorithm12",dependencies,function(_ref){var typed=_ref.typed,DenseMatrix=_ref.DenseMatrix;return function(s,b,callback,inverse){var avalues=s._values,aindex=s._index,aptr=s._ptr,asize=s._size,adt=s._datatype;if(!avalues)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var dt,rows=asize[0],columns=asize[1],cf=callback;"string"==typeof adt&&(dt=adt,b=typed.convert(b,dt),cf=typed.find(callback,[dt,dt]));for(var cdata=[],x=[],w=[],j=0;j<columns;j++){for(var mark=j+1,k0=aptr[j],k1=aptr[j+1],k=k0;k<k1;k++){var r=aindex[k];x[r]=avalues[k],w[r]=mark}for(var i=0;i<rows;i++)0===j&&(cdata[i]=[]),w[i]===mark?cdata[i][j]=inverse?cf(b,x[i]):cf(x[i],b):cdata[i][j]=inverse?cf(b,0):cf(0,b)}return new DenseMatrix({data:cdata,size:[rows,columns],datatype:dt})}});exports.createAlgorithm12=createAlgorithm12},{"../../../utils/factory":931}],912:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAlgorithm13=void 0;var _factory=require("../../../utils/factory"),_DimensionError=require("../../../error/DimensionError"),dependencies=["typed"],createAlgorithm13=(0,_factory.factory)("algorithm13",dependencies,function(_ref){var typed=_ref.typed;return function(a,b,callback){var adata=a._data,asize=a._size,adt=a._datatype,bdata=b._data,bsize=b._size,bdt=b._datatype,csize=[];if(asize.length!==bsize.length)throw new _DimensionError.DimensionError(asize.length,bsize.length);for(var dt,s=0;s<asize.length;s++){if(asize[s]!==bsize[s])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");csize[s]=asize[s]}var cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,cf=typed.find(callback,[dt,dt]));var cdata=0<csize.length?function _iterate(f,level,s,n,av,bv){var cv=[];if(level===s.length-1)for(var i=0;i<n;i++)cv[i]=f(av[i],bv[i]);else for(var j=0;j<n;j++)cv[j]=_iterate(f,level+1,s,s[level+1],av[j],bv[j]);return cv}(cf,0,csize,csize[0],adata,bdata):[];return a.createDenseMatrix({data:cdata,size:csize,datatype:dt})}});exports.createAlgorithm13=createAlgorithm13},{"../../../error/DimensionError":399,"../../../utils/factory":931}],913:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAlgorithm14=void 0;var _factory=require("../../../utils/factory"),_object=require("../../../utils/object"),dependencies=["typed"],createAlgorithm14=(0,_factory.factory)("algorithm14",dependencies,function(_ref){var typed=_ref.typed;return function(a,b,callback,inverse){var dt,adata=a._data,asize=a._size,adt=a._datatype,cf=callback;"string"==typeof adt&&(dt=adt,b=typed.convert(b,dt),cf=typed.find(callback,[dt,dt]));var cdata=0<asize.length?function _iterate(f,level,s,n,av,bv,inverse){var cv=[];if(level===s.length-1)for(var i=0;i<n;i++)cv[i]=inverse?f(bv,av[i]):f(av[i],bv);else for(var j=0;j<n;j++)cv[j]=_iterate(f,level+1,s,s[level+1],av[j],bv,inverse);return cv}(cf,0,asize,asize[0],adata,b,inverse):[];return a.createDenseMatrix({data:cdata,size:(0,_object.clone)(asize),datatype:dt})}});exports.createAlgorithm14=createAlgorithm14},{"../../../utils/factory":931,"../../../utils/object":938}],914:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNumber=void 0;var _factory=require("../utils/factory"),_collection=require("../utils/collection"),dependencies=["typed"],createNumber=(0,_factory.factory)("number",dependencies,function(_ref){var number=(0,_ref.typed)("number",{"":function(){return 0},number:function(x){return x},string:function(x){if("NaN"===x)return NaN;var num=Number(x);if(isNaN(num))throw new SyntaxError('String "'+x+'" is no valid number');return num},BigNumber:function(x){return x.toNumber()},Fraction:function(x){return x.valueOf()},Unit:function(){throw new Error("Second argument with valueless unit expected")},null:function(){return 0},"Unit, string | Unit":function(unit,valuelessUnit){return unit.toNumber(valuelessUnit)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,number)}});return number.fromJSON=function(json){return parseFloat(json.value)},number});exports.createNumber=createNumber},{"../utils/collection":927,"../utils/factory":931}],915:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dependencies=[],createResultSet=(exports.createResultSet=void 0,require("../../utils/factory").factory)("ResultSet",dependencies,function(){function ResultSet(entries){if(!(this instanceof ResultSet))throw new SyntaxError("Constructor must be called with the new operator");this.entries=entries||[]}return ResultSet.prototype.type="ResultSet",ResultSet.prototype.isResultSet=!0,ResultSet.prototype.valueOf=function(){return this.entries},ResultSet.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},ResultSet.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},ResultSet.fromJSON=function(json){return new ResultSet(json.entries)},ResultSet},{isClass:!0});exports.createResultSet=createResultSet},{"../../utils/factory":931}],916:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createString=void 0;var _factory=require("../utils/factory"),_collection=require("../utils/collection"),_number=require("../utils/number"),dependencies=["typed"],createString=(0,_factory.factory)("string",dependencies,function(_ref){var string=(0,_ref.typed)("string",{"":function(){return""},number:_number.format,null:function(){return"null"},boolean:function(x){return x+""},string:function(x){return x},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,string)},any:function(x){return String(x)}});return string});exports.createString=createString},{"../utils/collection":927,"../utils/factory":931,"../utils/number":937}],917:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUnitClass=void 0;var _is=require("../../utils/is"),_factory=require("../../utils/factory"),_string=require("../../utils/string"),_object=require("../../utils/object"),_constants=require("../../utils/bignumber/constants");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var dependencies=["?on","config","addScalar","subtract","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],createUnitClass=(0,_factory.factory)("Unit",dependencies,function(_ref){var text,index,c,on=_ref.on,config=_ref.config,addScalar=_ref.addScalar,subtract=_ref.subtract,multiplyScalar=_ref.multiplyScalar,divideScalar=_ref.divideScalar,pow=_ref.pow,abs=_ref.abs,fix=_ref.fix,round=_ref.round,equal=_ref.equal,isNumeric=_ref.isNumeric,format=_ref.format,number=_ref.number,Complex=_ref.Complex,_BigNumber=_ref.BigNumber,_Fraction=_ref.Fraction,toNumber=number;function Unit(value,name){if(!(this instanceof Unit))throw new Error("Constructor must be called with the new operator");if(null!=value&&!isNumeric(value)&&!(0,_is.isComplex)(value))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(void 0!==name&&("string"!=typeof name||""===name))throw new TypeError("Second parameter in Unit constructor must be a string");if(void 0!==name){var u=Unit.parse(name);this.units=u.units,this.dimensions=u.dimensions}else{this.units=[{unit:UNIT_NONE,prefix:PREFIXES.NONE,power:0}],this.dimensions=[];for(var i=0;i<BASE_DIMENSIONS.length;i++)this.dimensions[i]=0}this.value=null!=value?this._normalize(value):null,this.fixPrefix=!1,this.skipAutomaticSimplification=!0}function skipWhitespace(){for(;" "===c||"\t"===c;)next()}function isDigit(c){return"0"<=c&&c<="9"}function next(){index++,c=text.charAt(index)}function revert(oldIndex){index=oldIndex,c=text.charAt(index)}function parseNumber(){var number="",oldIndex=index;if("+"===c?next():"-"===c&&(number+=c,next()),!function(c){return"0"<=c&&c<="9"||"."===c}(c))return revert(oldIndex),null;if("."===c){if(number+=c,next(),!isDigit(c))return revert(oldIndex),null}else{for(;isDigit(c);)number+=c,next();"."===c&&(number+=c,next())}for(;isDigit(c);)number+=c,next();if("E"===c||"e"===c){var tentativeNumber="",tentativeIndex=index;if(tentativeNumber+=c,next(),"+"!==c&&"-"!==c||(tentativeNumber+=c,next()),!isDigit(c))return revert(tentativeIndex),number;for(number+=tentativeNumber;isDigit(c);)number+=c,next()}return number}function parseCharacter(toFind){return c===toFind&&(next(),toFind)}function _findUnit(str){if((0,_object.hasOwnProperty)(UNITS,str)){var unit=UNITS[str];return{unit:unit,prefix:unit.prefixes[""]}}for(var _name in UNITS)if((0,_object.hasOwnProperty)(UNITS,_name)&&(0,_string.endsWith)(str,_name)){var _unit=UNITS[_name],prefixLen=str.length-_name.length,prefixName=str.substring(0,prefixLen),_prefix=(0,_object.hasOwnProperty)(_unit.prefixes,prefixName)?_unit.prefixes[prefixName]:void 0;if(void 0!==_prefix)return{unit:_unit,prefix:_prefix}}return null}function getNumericIfUnitless(unit){return unit.equalBase(BASE_UNITS.NONE)&&null!==unit.value&&!config.predictable?unit.value:unit}Unit.prototype.type="Unit",Unit.prototype.isUnit=!0,Unit.parse=function(str,options){if(options=options||{},index=-1,c="","string"!=typeof(text=str))throw new TypeError("Invalid argument in Unit.parse, string expected");var unit=new Unit,powerMultiplierCurrent=1,expectingUnit=!(unit.units=[]);next(),skipWhitespace();var valueStr=parseNumber(),value=null;if(valueStr){if("BigNumber"===config.number)value=new _BigNumber(valueStr);else if("Fraction"===config.number)try{value=new _Fraction(valueStr)}catch(err){value=parseFloat(valueStr)}else value=parseFloat(valueStr);skipWhitespace(),parseCharacter("*")?(powerMultiplierCurrent=1,expectingUnit=!0):parseCharacter("/")&&(powerMultiplierCurrent=-1,expectingUnit=!0)}for(var powerMultiplierStack=[],powerMultiplierStackProduct=1;;){for(skipWhitespace();"("===c;)powerMultiplierStack.push(powerMultiplierCurrent),powerMultiplierStackProduct*=powerMultiplierCurrent,powerMultiplierCurrent=1,next(),skipWhitespace();var uStr=void 0;if(!c)break;var oldC=c;if(null===(uStr=function(){for(var unitName="",code=text.charCodeAt(index);48<=code&&code<=57||65<=code&&code<=90||97<=code&&code<=122;)unitName+=c,next(),code=text.charCodeAt(index);return(65<=(code=unitName.charCodeAt(0))&&code<=90||97<=code&&code<=122)&&unitName||null}()))throw new SyntaxError('Unexpected "'+oldC+'" in "'+text+'" at index '+index.toString());var res=_findUnit(uStr);if(null===res)throw new SyntaxError('Unit "'+uStr+'" not found.');var power=powerMultiplierCurrent*powerMultiplierStackProduct;if(skipWhitespace(),parseCharacter("^")){skipWhitespace();var p=parseNumber();if(null===p)throw new SyntaxError('In "'+str+'", "^" must be followed by a floating-point number');power*=p}unit.units.push({unit:res.unit,prefix:res.prefix,power:power});for(var baseDim,i=0;i<BASE_DIMENSIONS.length;i++)unit.dimensions[i]+=(res.unit.dimensions[i]||0)*power;for(skipWhitespace();")"===c;){if(0===powerMultiplierStack.length)throw new SyntaxError('Unmatched ")" in "'+text+'" at index '+index.toString());powerMultiplierStackProduct/=powerMultiplierStack.pop(),next(),skipWhitespace()}expectingUnit=!1,parseCharacter("*")?(powerMultiplierCurrent=1,expectingUnit=!0):parseCharacter("/")?(powerMultiplierCurrent=-1,expectingUnit=!0):powerMultiplierCurrent=1,res.unit.base&&(baseDim=res.unit.base.key,UNIT_SYSTEMS.auto[baseDim]={unit:res.unit,prefix:res.prefix})}if(skipWhitespace(),c)throw new SyntaxError('Could not parse: "'+str+'"');if(expectingUnit)throw new SyntaxError('Trailing characters: "'+str+'"');if(0!==powerMultiplierStack.length)throw new SyntaxError('Unmatched "(" in "'+text+'"');if(0===unit.units.length&&!options.allowNoUnits)throw new SyntaxError('"'+str+'" contains no units');return unit.value=void 0!==value?unit._normalize(value):null,unit},Unit.prototype.clone=function(){var unit=new Unit;unit.fixPrefix=this.fixPrefix,unit.skipAutomaticSimplification=this.skipAutomaticSimplification,unit.value=(0,_object.clone)(this.value),unit.dimensions=this.dimensions.slice(0),unit.units=[];for(var i=0;i<this.units.length;i++)for(var p in unit.units[i]={},this.units[i])(0,_object.hasOwnProperty)(this.units[i],p)&&(unit.units[i][p]=this.units[i][p]);return unit},Unit.prototype._isDerived=function(){return 0!==this.units.length&&(1<this.units.length||1e-15<Math.abs(this.units[0].power-1))},Unit.prototype._normalize=function(value){var unitValue,unitOffset,unitPower,unitPrefixValue;if(null==value||0===this.units.length)return value;if(this._isDerived()){for(var res=value,convert=Unit._getNumberConverter((0,_is.typeOf)(value)),i=0;i<this.units.length;i++)unitValue=convert(this.units[i].unit.value),unitPrefixValue=convert(this.units[i].prefix.value),unitPower=convert(this.units[i].power),res=multiplyScalar(res,pow(multiplyScalar(unitValue,unitPrefixValue),unitPower));return res}return unitValue=(convert=Unit._getNumberConverter((0,_is.typeOf)(value)))(this.units[0].unit.value),unitOffset=convert(this.units[0].unit.offset),unitPrefixValue=convert(this.units[0].prefix.value),multiplyScalar(addScalar(value,unitOffset),multiplyScalar(unitValue,unitPrefixValue))},Unit.prototype._denormalize=function(value,prefixValue){var unitValue,unitOffset,unitPower,unitPrefixValue;if(null==value||0===this.units.length)return value;if(this._isDerived()){for(var res=value,convert=Unit._getNumberConverter((0,_is.typeOf)(value)),i=0;i<this.units.length;i++)unitValue=convert(this.units[i].unit.value),unitPrefixValue=convert(this.units[i].prefix.value),unitPower=convert(this.units[i].power),res=divideScalar(res,pow(multiplyScalar(unitValue,unitPrefixValue),unitPower));return res}return unitValue=(convert=Unit._getNumberConverter((0,_is.typeOf)(value)))(this.units[0].unit.value),unitPrefixValue=convert(this.units[0].prefix.value),unitOffset=convert(this.units[0].unit.offset),subtract(divideScalar(divideScalar(value,unitValue),null==prefixValue?unitPrefixValue:prefixValue),unitOffset)},Unit.isValuelessUnit=function(name){return null!==_findUnit(name)},Unit.prototype.hasBase=function(base){if("string"==typeof base&&(base=BASE_UNITS[base]),!base)return!1;for(var i=0;i<BASE_DIMENSIONS.length;i++)if(1e-12<Math.abs((this.dimensions[i]||0)-(base.dimensions[i]||0)))return!1;return!0},Unit.prototype.equalBase=function(other){for(var i=0;i<BASE_DIMENSIONS.length;i++)if(1e-12<Math.abs((this.dimensions[i]||0)-(other.dimensions[i]||0)))return!1;return!0},Unit.prototype.equals=function(other){return this.equalBase(other)&&equal(this.value,other.value)},Unit.prototype.multiply=function(other){for(var res=this.clone(),i=0;i<BASE_DIMENSIONS.length;i++)res.dimensions[i]=(this.dimensions[i]||0)+(other.dimensions[i]||0);for(var valThis,valOther,_i=0;_i<other.units.length;_i++){var inverted={};for(var key in other.units[_i])inverted[key]=other.units[_i][key];res.units.push(inverted)}return null!==this.value||null!==other.value?(valThis=null===this.value?this._normalize(1):this.value,valOther=null===other.value?other._normalize(1):other.value,res.value=multiplyScalar(valThis,valOther)):res.value=null,res.skipAutomaticSimplification=!1,getNumericIfUnitless(res)},Unit.prototype.divide=function(other){for(var res=this.clone(),i=0;i<BASE_DIMENSIONS.length;i++)res.dimensions[i]=(this.dimensions[i]||0)-(other.dimensions[i]||0);for(var valThis,valOther,_i2=0;_i2<other.units.length;_i2++){var inverted={};for(var key in other.units[_i2])inverted[key]=other.units[_i2][key];inverted.power=-inverted.power,res.units.push(inverted)}return null!==this.value||null!==other.value?(valThis=null===this.value?this._normalize(1):this.value,valOther=null===other.value?other._normalize(1):other.value,res.value=divideScalar(valThis,valOther)):res.value=null,res.skipAutomaticSimplification=!1,getNumericIfUnitless(res)},Unit.prototype.pow=function(p){for(var res=this.clone(),i=0;i<BASE_DIMENSIONS.length;i++)res.dimensions[i]=(this.dimensions[i]||0)*p;for(var _i3=0;_i3<res.units.length;_i3++)res.units[_i3].power*=p;return null!==res.value?res.value=pow(res.value,p):res.value=null,res.skipAutomaticSimplification=!1,getNumericIfUnitless(res)},Unit.prototype.abs=function(){var ret=this.clone();for(var i in ret.value=null!==ret.value?abs(ret.value):null,ret.units)"VA"!==ret.units[i].unit.name&&"VAR"!==ret.units[i].unit.name||(ret.units[i].unit=UNITS.W);return ret},Unit.prototype.to=function(valuelessUnit){var other,value=null===this.value?this._normalize(1):this.value;if("string"==typeof valuelessUnit){if(other=Unit.parse(valuelessUnit),!this.equalBase(other))throw new Error("Units do not match ('".concat(other.toString(),"' != '").concat(this.toString(),"')"));if(null!==other.value)throw new Error("Cannot convert to a unit with a value");return other.value=(0,_object.clone)(value),other.fixPrefix=!0,other.skipAutomaticSimplification=!0,other}if((0,_is.isUnit)(valuelessUnit)){if(!this.equalBase(valuelessUnit))throw new Error("Units do not match ('".concat(valuelessUnit.toString(),"' != '").concat(this.toString(),"')"));if(null!==valuelessUnit.value)throw new Error("Cannot convert to a unit with a value");return(other=valuelessUnit.clone()).value=(0,_object.clone)(value),other.fixPrefix=!0,other.skipAutomaticSimplification=!0,other}throw new Error("String or Unit expected as parameter")},Unit.prototype.toNumber=function(valuelessUnit){return toNumber(this.toNumeric(valuelessUnit))},Unit.prototype.toNumeric=function(valuelessUnit){var other=valuelessUnit?this.to(valuelessUnit):this.clone();return other._isDerived()||0===other.units.length?other._denormalize(other.value):other._denormalize(other.value,other.units[0].prefix.value)},Unit.prototype.toString=function(){return this.format()},Unit.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},Unit.fromJSON=function(json){var unit=new Unit(json.value,json.unit);return unit.fixPrefix=json.fixPrefix||!1,unit},Unit.prototype.valueOf=Unit.prototype.toString,Unit.prototype.simplify=function(){var matchingBase,matchingUnit,ret=this.clone(),proposedUnitList=[];for(var key in currentUnitSystem)if(ret.hasBase(BASE_UNITS[key])){matchingBase=key;break}if("NONE"===matchingBase)ret.units=[];else if(matchingBase&&(0,_object.hasOwnProperty)(currentUnitSystem,matchingBase)&&(matchingUnit=currentUnitSystem[matchingBase]),matchingUnit)ret.units=[{unit:matchingUnit.unit,prefix:matchingUnit.prefix,power:1}];else{for(var missingBaseDim=!1,i=0;i<BASE_DIMENSIONS.length;i++){var baseDim=BASE_DIMENSIONS[i];1e-12<Math.abs(ret.dimensions[i]||0)&&((0,_object.hasOwnProperty)(currentUnitSystem,baseDim)?proposedUnitList.push({unit:currentUnitSystem[baseDim].unit,prefix:currentUnitSystem[baseDim].prefix,power:ret.dimensions[i]||0}):missingBaseDim=!0)}proposedUnitList.length<ret.units.length&&!missingBaseDim&&(ret.units=proposedUnitList)}return ret},Unit.prototype.toSI=function(){for(var ret=this.clone(),proposedUnitList=[],i=0;i<BASE_DIMENSIONS.length;i++){var baseDim=BASE_DIMENSIONS[i];if(1e-12<Math.abs(ret.dimensions[i]||0)){if(!(0,_object.hasOwnProperty)(UNIT_SYSTEMS.si,baseDim))throw new Error("Cannot express custom unit "+baseDim+" in SI units");proposedUnitList.push({unit:UNIT_SYSTEMS.si[baseDim].unit,prefix:UNIT_SYSTEMS.si[baseDim].prefix,power:ret.dimensions[i]||0})}}return ret.units=proposedUnitList,ret.fixPrefix=!0,ret.skipAutomaticSimplification=!0,ret},Unit.prototype.formatUnits=function(){for(var strNum="",strDen="",nNum=0,nDen=0,i=0;i<this.units.length;i++)0<this.units[i].power?(nNum++,strNum+=" "+this.units[i].prefix.name+this.units[i].unit.name,1e-15<Math.abs(this.units[i].power-1)&&(strNum+="^"+this.units[i].power)):this.units[i].power<0&&nDen++;if(0<nDen)for(var _i4=0;_i4<this.units.length;_i4++)this.units[_i4].power<0&&(0<nNum?(strDen+=" "+this.units[_i4].prefix.name+this.units[_i4].unit.name,1e-15<Math.abs(this.units[_i4].power+1)&&(strDen+="^"+-this.units[_i4].power)):(strDen+=" "+this.units[_i4].prefix.name+this.units[_i4].unit.name,strDen+="^"+this.units[_i4].power));strNum=strNum.substr(1),strDen=strDen.substr(1),1<nNum&&0<nDen&&(strNum="("+strNum+")"),1<nDen&&0<nNum&&(strDen="("+strDen+")");var str=strNum;return 0<nNum&&0<nDen&&(str+=" / "),str+=strDen},Unit.prototype.format=function(options){var simp=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),isImaginary=!1;for(var i in void 0!==simp.value&&null!==simp.value&&(0,_is.isComplex)(simp.value)&&(isImaginary=Math.abs(simp.value.re)<1e-14),simp.units)simp.units[i].unit&&("VA"===simp.units[i].unit.name&&isImaginary?simp.units[i].unit=UNITS.VAR:"VAR"!==simp.units[i].unit.name||isImaginary||(simp.units[i].unit=UNITS.VA));1!==simp.units.length||simp.fixPrefix||Math.abs(simp.units[0].power-Math.round(simp.units[0].power))<1e-14&&(simp.units[0].prefix=simp._bestPrefix());var value=simp._denormalize(simp.value),str=null!==simp.value?format(value,options||{}):"",unitStr=simp.formatUnits();return simp.value&&(0,_is.isComplex)(simp.value)&&(str="("+str+")"),0<unitStr.length&&0<str.length&&(str+=" "),str+=unitStr},Unit.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(1e-14<=Math.abs(this.units[0].power-Math.round(this.units[0].power)))throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var absValue=null!==this.value?abs(this.value):0,absUnitValue=abs(this.units[0].unit.value),bestPrefix=this.units[0].prefix;if(0===absValue)return bestPrefix;var power=this.units[0].power,bestDiff=Math.log(absValue/Math.pow(bestPrefix.value*absUnitValue,power))/Math.LN10-1.2;if(-2.200001<bestDiff&&bestDiff<1.800001)return bestPrefix;bestDiff=Math.abs(bestDiff);var prefix,diff,prefixes=this.units[0].unit.prefixes;for(var p in prefixes){(0,_object.hasOwnProperty)(prefixes,p)&&(!(prefix=prefixes[p]).scientific||((diff=Math.abs(Math.log(absValue/Math.pow(prefix.value*absUnitValue,power))/Math.LN10-1.2))<bestDiff||diff===bestDiff&&prefix.name.length<bestPrefix.name.length)&&(bestPrefix=prefix,bestDiff=diff))}return bestPrefix};var PREFIXES={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!(Unit.prototype.splitUnit=function(parts){for(var x=this.clone(),ret=[],i=0;i<parts.length&&(x=x.to(parts[i]),i!==parts.length-1);i++){var xNumeric=x.toNumeric(),xRounded=round(xNumeric),y=new Unit(equal(xRounded,xNumeric)?xRounded:fix(x.toNumeric()),parts[i].toString());ret.push(y),x=subtract(x,y)}for(var testSum=0,_i5=0;_i5<ret.length;_i5++)testSum=addScalar(testSum,ret[_i5].value);return equal(testSum,this.value)&&(x.value=0),ret.push(x),ret})},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};PREFIXES.SHORTLONG=_extends({},PREFIXES.SHORT,PREFIXES.LONG),PREFIXES.BINARY_SHORT=_extends({},PREFIXES.BINARY_SHORT_SI,PREFIXES.BINARY_SHORT_IEC),PREFIXES.BINARY_LONG=_extends({},PREFIXES.BINARY_LONG_SI,PREFIXES.BINARY_LONG_IEC);var BASE_DIMENSIONS=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],BASE_UNITS={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var key in BASE_UNITS)BASE_UNITS[key].key=key;var UNIT_NONE={name:"",base:{},value:1,offset:0,dimensions:BASE_DIMENSIONS.map(function(x){return 0})},UNITS={meter:{name:"meter",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.LONG,value:1,offset:0},inch:{name:"inch",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.0254,offset:0},foot:{name:"foot",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.3048,offset:0},yard:{name:"yard",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.9144,offset:0},mile:{name:"mile",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:1609.344,offset:0},link:{name:"link",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.201168,offset:0},rod:{name:"rod",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:5.0292,offset:0},chain:{name:"chain",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:1e-10,offset:0},m:{name:"m",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.SHORT,value:1,offset:0},in:{name:"in",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.0254,offset:0},ft:{name:"ft",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.3048,offset:0},yd:{name:"yd",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.9144,offset:0},mi:{name:"mi",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:1609.344,offset:0},li:{name:"li",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.201168,offset:0},rd:{name:"rd",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:5.02921,offset:0},ch:{name:"ch",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:20.1168,offset:0},mil:{name:"mil",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:254e-7,offset:0},m2:{name:"m2",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:1e4,offset:0},m3:{name:"m3",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.CUBIC,value:1,offset:0},L:{name:"L",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.SHORT,value:.001,offset:0},l:{name:"l",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.SHORT,value:.001,offset:0},litre:{name:"litre",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.LONG,value:.001,offset:0},cuin:{name:"cuin",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:15e-6,offset:0},drop:{name:"drop",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:5e-8,offset:0},minim:{name:"minim",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:1e-6,offset:0},cup:{name:"cup",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.1173478,offset:0},obl:{name:"obl",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.1589873,offset:0},g:{name:"g",base:BASE_UNITS.MASS,prefixes:PREFIXES.SHORT,value:.001,offset:0},gram:{name:"gram",base:BASE_UNITS.MASS,prefixes:PREFIXES.LONG,value:.001,offset:0},ton:{name:"ton",base:BASE_UNITS.MASS,prefixes:PREFIXES.SHORT,value:907.18474,offset:0},t:{name:"t",base:BASE_UNITS.MASS,prefixes:PREFIXES.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:BASE_UNITS.MASS,prefixes:PREFIXES.LONG,value:1e3,offset:0},grain:{name:"grain",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:45.359237,offset:0},stick:{name:"stick",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.115,offset:0},stone:{name:"stone",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:45.359237,offset:0},s:{name:"s",base:BASE_UNITS.TIME,prefixes:PREFIXES.SHORT,value:1,offset:0},min:{name:"min",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:60,offset:0},h:{name:"h",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:3600,offset:0},second:{name:"second",base:BASE_UNITS.TIME,prefixes:PREFIXES.LONG,value:1,offset:0},sec:{name:"sec",base:BASE_UNITS.TIME,prefixes:PREFIXES.LONG,value:1,offset:0},minute:{name:"minute",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:60,offset:0},hour:{name:"hour",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:3600,offset:0},day:{name:"day",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:86400,offset:0},week:{name:"week",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:604800,offset:0},month:{name:"month",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:2629800,offset:0},year:{name:"year",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:31557600,offset:0},decade:{name:"decade",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:315576e3,offset:0},century:{name:"century",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:BASE_UNITS.FREQUENCY,prefixes:PREFIXES.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:BASE_UNITS.FREQUENCY,prefixes:PREFIXES.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.SHORT,value:1,offset:0},radian:{name:"radian",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.LONG,value:1,offset:0},deg:{name:"deg",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.SHORT,value:null,offset:0},degree:{name:"degree",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.LONG,value:null,offset:0},grad:{name:"grad",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.SHORT,value:null,offset:0},gradian:{name:"gradian",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.LONG,value:null,offset:0},cycle:{name:"cycle",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:null,offset:0},A:{name:"A",base:BASE_UNITS.CURRENT,prefixes:PREFIXES.SHORT,value:1,offset:0},ampere:{name:"ampere",base:BASE_UNITS.CURRENT,prefixes:PREFIXES.LONG,value:1,offset:0},K:{name:"K",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1,offset:0},degC:{name:"degC",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1,offset:273.15},degF:{name:"degF",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1,offset:0},celsius:{name:"celsius",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:BASE_UNITS.AMOUNT_OF_SUBSTANCE,prefixes:PREFIXES.SHORT,value:1,offset:0},mole:{name:"mole",base:BASE_UNITS.AMOUNT_OF_SUBSTANCE,prefixes:PREFIXES.LONG,value:1,offset:0},cd:{name:"cd",base:BASE_UNITS.LUMINOUS_INTENSITY,prefixes:PREFIXES.SHORT,value:1,offset:0},candela:{name:"candela",base:BASE_UNITS.LUMINOUS_INTENSITY,prefixes:PREFIXES.LONG,value:1,offset:0},N:{name:"N",base:BASE_UNITS.FORCE,prefixes:PREFIXES.SHORT,value:1,offset:0},newton:{name:"newton",base:BASE_UNITS.FORCE,prefixes:PREFIXES.LONG,value:1,offset:0},dyn:{name:"dyn",base:BASE_UNITS.FORCE,prefixes:PREFIXES.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:BASE_UNITS.FORCE,prefixes:PREFIXES.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:BASE_UNITS.FORCE,prefixes:PREFIXES.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:BASE_UNITS.FORCE,prefixes:PREFIXES.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:BASE_UNITS.FORCE,prefixes:PREFIXES.LONG,value:4448.2216,offset:0},J:{name:"J",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.SHORT,value:1,offset:0},joule:{name:"joule",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.SHORT,value:1,offset:0},erg:{name:"erg",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.NONE,value:1e-7,offset:0},Wh:{name:"Wh",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:BASE_UNITS.POWER,prefixes:PREFIXES.SHORT,value:1,offset:0},watt:{name:"watt",base:BASE_UNITS.POWER,prefixes:PREFIXES.LONG,value:1,offset:0},hp:{name:"hp",base:BASE_UNITS.POWER,prefixes:PREFIXES.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:BASE_UNITS.POWER,prefixes:PREFIXES.SHORT,value:Complex.I,offset:0},VA:{name:"VA",base:BASE_UNITS.POWER,prefixes:PREFIXES.SHORT,value:1,offset:0},Pa:{name:"Pa",base:BASE_UNITS.PRESSURE,prefixes:PREFIXES.SHORT,value:1,offset:0},psi:{name:"psi",base:BASE_UNITS.PRESSURE,prefixes:PREFIXES.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:BASE_UNITS.PRESSURE,prefixes:PREFIXES.NONE,value:101325,offset:0},bar:{name:"bar",base:BASE_UNITS.PRESSURE,prefixes:PREFIXES.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:BASE_UNITS.PRESSURE,prefixes:PREFIXES.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:BASE_UNITS.PRESSURE,prefixes:PREFIXES.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:BASE_UNITS.PRESSURE,prefixes:PREFIXES.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:BASE_UNITS.PRESSURE,prefixes:PREFIXES.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:BASE_UNITS.ELECTRIC_CHARGE,prefixes:PREFIXES.LONG,value:1,offset:0},C:{name:"C",base:BASE_UNITS.ELECTRIC_CHARGE,prefixes:PREFIXES.SHORT,value:1,offset:0},farad:{name:"farad",base:BASE_UNITS.ELECTRIC_CAPACITANCE,prefixes:PREFIXES.LONG,value:1,offset:0},F:{name:"F",base:BASE_UNITS.ELECTRIC_CAPACITANCE,prefixes:PREFIXES.SHORT,value:1,offset:0},volt:{name:"volt",base:BASE_UNITS.ELECTRIC_POTENTIAL,prefixes:PREFIXES.LONG,value:1,offset:0},V:{name:"V",base:BASE_UNITS.ELECTRIC_POTENTIAL,prefixes:PREFIXES.SHORT,value:1,offset:0},ohm:{name:"ohm",base:BASE_UNITS.ELECTRIC_RESISTANCE,prefixes:PREFIXES.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:BASE_UNITS.ELECTRIC_INDUCTANCE,prefixes:PREFIXES.LONG,value:1,offset:0},H:{name:"H",base:BASE_UNITS.ELECTRIC_INDUCTANCE,prefixes:PREFIXES.SHORT,value:1,offset:0},siemens:{name:"siemens",base:BASE_UNITS.ELECTRIC_CONDUCTANCE,prefixes:PREFIXES.LONG,value:1,offset:0},S:{name:"S",base:BASE_UNITS.ELECTRIC_CONDUCTANCE,prefixes:PREFIXES.SHORT,value:1,offset:0},weber:{name:"weber",base:BASE_UNITS.MAGNETIC_FLUX,prefixes:PREFIXES.LONG,value:1,offset:0},Wb:{name:"Wb",base:BASE_UNITS.MAGNETIC_FLUX,prefixes:PREFIXES.SHORT,value:1,offset:0},tesla:{name:"tesla",base:BASE_UNITS.MAGNETIC_FLUX_DENSITY,prefixes:PREFIXES.LONG,value:1,offset:0},T:{name:"T",base:BASE_UNITS.MAGNETIC_FLUX_DENSITY,prefixes:PREFIXES.SHORT,value:1,offset:0},b:{name:"b",base:BASE_UNITS.BIT,prefixes:PREFIXES.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:BASE_UNITS.BIT,prefixes:PREFIXES.BINARY_LONG,value:1,offset:0},B:{name:"B",base:BASE_UNITS.BIT,prefixes:PREFIXES.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:BASE_UNITS.BIT,prefixes:PREFIXES.BINARY_LONG,value:8,offset:0}},ALIASES={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function calculateAngleValues(config){var pi;"BigNumber"===config.number?(pi=(0,_constants.createBigNumberPi)(_BigNumber),UNITS.rad.value=new _BigNumber(1),UNITS.deg.value=pi.div(180),UNITS.grad.value=pi.div(200),UNITS.cycle.value=pi.times(2),UNITS.arcsec.value=pi.div(648e3),UNITS.arcmin.value=pi.div(10800)):(UNITS.rad.value=1,UNITS.deg.value=Math.PI/180,UNITS.grad.value=Math.PI/200,UNITS.cycle.value=2*Math.PI,UNITS.arcsec.value=Math.PI/648e3,UNITS.arcmin.value=Math.PI/10800),UNITS.radian.value=UNITS.rad.value,UNITS.degree.value=UNITS.deg.value,UNITS.gradian.value=UNITS.grad.value}calculateAngleValues(config),on&&on("config",function(curr,prev){curr.number!==prev.number&&calculateAngleValues(curr)});var UNIT_SYSTEMS={si:{NONE:{unit:UNIT_NONE,prefix:PREFIXES.NONE[""]},LENGTH:{unit:UNITS.m,prefix:PREFIXES.SHORT[""]},MASS:{unit:UNITS.g,prefix:PREFIXES.SHORT.k},TIME:{unit:UNITS.s,prefix:PREFIXES.SHORT[""]},CURRENT:{unit:UNITS.A,prefix:PREFIXES.SHORT[""]},TEMPERATURE:{unit:UNITS.K,prefix:PREFIXES.SHORT[""]},LUMINOUS_INTENSITY:{unit:UNITS.cd,prefix:PREFIXES.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:UNITS.mol,prefix:PREFIXES.SHORT[""]},ANGLE:{unit:UNITS.rad,prefix:PREFIXES.SHORT[""]},BIT:{unit:UNITS.bits,prefix:PREFIXES.SHORT[""]},FORCE:{unit:UNITS.N,prefix:PREFIXES.SHORT[""]},ENERGY:{unit:UNITS.J,prefix:PREFIXES.SHORT[""]},POWER:{unit:UNITS.W,prefix:PREFIXES.SHORT[""]},PRESSURE:{unit:UNITS.Pa,prefix:PREFIXES.SHORT[""]},ELECTRIC_CHARGE:{unit:UNITS.C,prefix:PREFIXES.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:UNITS.F,prefix:PREFIXES.SHORT[""]},ELECTRIC_POTENTIAL:{unit:UNITS.V,prefix:PREFIXES.SHORT[""]},ELECTRIC_RESISTANCE:{unit:UNITS.ohm,prefix:PREFIXES.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:UNITS.H,prefix:PREFIXES.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:UNITS.S,prefix:PREFIXES.SHORT[""]},MAGNETIC_FLUX:{unit:UNITS.Wb,prefix:PREFIXES.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:UNITS.T,prefix:PREFIXES.SHORT[""]},FREQUENCY:{unit:UNITS.Hz,prefix:PREFIXES.SHORT[""]}}};UNIT_SYSTEMS.cgs=JSON.parse(JSON.stringify(UNIT_SYSTEMS.si)),UNIT_SYSTEMS.cgs.LENGTH={unit:UNITS.m,prefix:PREFIXES.SHORT.c},UNIT_SYSTEMS.cgs.MASS={unit:UNITS.g,prefix:PREFIXES.SHORT[""]},UNIT_SYSTEMS.cgs.FORCE={unit:UNITS.dyn,prefix:PREFIXES.SHORT[""]},UNIT_SYSTEMS.cgs.ENERGY={unit:UNITS.erg,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.us=JSON.parse(JSON.stringify(UNIT_SYSTEMS.si)),UNIT_SYSTEMS.us.LENGTH={unit:UNITS.ft,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.us.MASS={unit:UNITS.lbm,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.us.TEMPERATURE={unit:UNITS.degF,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.us.FORCE={unit:UNITS.lbf,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.us.ENERGY={unit:UNITS.BTU,prefix:PREFIXES.BTU[""]},UNIT_SYSTEMS.us.POWER={unit:UNITS.hp,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.us.PRESSURE={unit:UNITS.psi,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.auto=JSON.parse(JSON.stringify(UNIT_SYSTEMS.si));var currentUnitSystem=UNIT_SYSTEMS.auto;for(var _key2 in Unit.setUnitSystem=function(name){if(!(0,_object.hasOwnProperty)(UNIT_SYSTEMS,name))throw new Error("Unit system "+name+" does not exist. Choices are: "+Object.keys(UNIT_SYSTEMS).join(", "));currentUnitSystem=UNIT_SYSTEMS[name]},Unit.getUnitSystem=function(){for(var _key in UNIT_SYSTEMS)if(UNIT_SYSTEMS[_key]===currentUnitSystem)return _key},Unit.typeConverters={BigNumber:function(x){return new _BigNumber(x+"")},Fraction:function(x){return new _Fraction(x)},Complex:function(x){return x},number:function(x){return x}},Unit._getNumberConverter=function(type){if(!Unit.typeConverters[type])throw new TypeError('Unsupported type "'+type+'"');return Unit.typeConverters[type]},UNITS){var unit=UNITS[_key2];unit.dimensions=unit.base.dimensions}for(var _name2 in ALIASES)if((0,_object.hasOwnProperty)(ALIASES,_name2)){var _unit2=UNITS[ALIASES[_name2]],alias={};for(var _key3 in _unit2)(0,_object.hasOwnProperty)(_unit2,_key3)&&(alias[_key3]=_unit2[_key3]);alias.name=_name2,UNITS[_name2]=alias}return Unit.createUnit=function(obj,options){if("object"!==_typeof(obj))throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(options&&options.override)for(var _key4 in obj)if((0,_object.hasOwnProperty)(obj,_key4)&&Unit.deleteUnit(_key4),obj[_key4].aliases)for(var i=0;i<obj[_key4].aliases.length;i++)Unit.deleteUnit(obj[_key4].aliases[i]);var lastUnit;for(var _key5 in obj)(0,_object.hasOwnProperty)(obj,_key5)&&(lastUnit=Unit.createUnitSingle(_key5,obj[_key5]));return lastUnit},Unit.createUnitSingle=function(name,obj,options){if(null==obj&&(obj={}),"string"!=typeof name)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if((0,_object.hasOwnProperty)(UNITS,name))throw new Error('Cannot create unit "'+name+'": a unit with that name already exists');!function(name){for(var c,i=0;i<name.length;i++){var _c=name.charAt(i),isValidAlpha=function(p){return/^[a-zA-Z]$/.test(p)};if(0===i&&!isValidAlpha(_c))throw new Error('Invalid unit name (must begin with alpha character): "'+name+'"');if(0<i&&!(isValidAlpha(_c)||"0"<=(c=_c)&&c<="9"))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+name+'"')}}(name);var definition,prefixes,baseName,defUnit=null,aliases=[],offset=0;if(obj&&"Unit"===obj.type)defUnit=obj.clone();else if("string"==typeof obj)""!==obj&&(definition=obj);else{if("object"!==_typeof(obj))throw new TypeError('Cannot create unit "'+name+'" from "'+obj.toString()+'": expecting "string" or "Unit" or "Object"');definition=obj.definition,prefixes=obj.prefixes,offset=obj.offset,baseName=obj.baseName,obj.aliases&&(aliases=obj.aliases.valueOf())}if(aliases)for(var i=0;i<aliases.length;i++)if((0,_object.hasOwnProperty)(UNITS,aliases[i]))throw new Error('Cannot create alias "'+aliases[i]+'": a unit with that name already exists');if(definition&&"string"==typeof definition&&!defUnit)try{defUnit=Unit.parse(definition,{allowNoUnits:!0})}catch(ex){throw ex.message='Could not create unit "'+name+'" from "'+definition+'": '+ex.message,ex}else definition&&"Unit"===definition.type&&(defUnit=definition.clone());aliases=aliases||[],offset=offset||0,prefixes=prefixes&&prefixes.toUpperCase&&PREFIXES[prefixes.toUpperCase()]||PREFIXES.NONE;var newUnit={};if(defUnit){var _newBaseUnit,anyMatch=!(newUnit={name:name,value:defUnit.value,dimensions:defUnit.dimensions.slice(0),prefixes:prefixes,offset:offset});for(var _i7 in BASE_UNITS)if((0,_object.hasOwnProperty)(BASE_UNITS,_i7)){for(var match=!0,j=0;j<BASE_DIMENSIONS.length;j++)if(1e-12<Math.abs((newUnit.dimensions[j]||0)-(BASE_UNITS[_i7].dimensions[j]||0))){match=!1;break}if(match){anyMatch=!0,newUnit.base=BASE_UNITS[_i7];break}}anyMatch||(baseName=baseName||name+"_STUFF",(_newBaseUnit={dimensions:defUnit.dimensions.slice(0)}).key=baseName,BASE_UNITS[baseName]=_newBaseUnit,currentUnitSystem[baseName]={unit:newUnit,prefix:PREFIXES.NONE[""]},newUnit.base=BASE_UNITS[baseName])}else{if(baseName=baseName||name+"_STUFF",0<=BASE_DIMENSIONS.indexOf(baseName))throw new Error('Cannot create new base unit "'+name+'": a base unit with that name already exists (and cannot be overridden)');for(var b in BASE_DIMENSIONS.push(baseName),BASE_UNITS)(0,_object.hasOwnProperty)(BASE_UNITS,b)&&(BASE_UNITS[b].dimensions[BASE_DIMENSIONS.length-1]=0);for(var newBaseUnit={dimensions:[]},_i6=0;_i6<BASE_DIMENSIONS.length;_i6++)newBaseUnit.dimensions[_i6]=0;newBaseUnit.dimensions[BASE_DIMENSIONS.length-1]=1,newBaseUnit.key=baseName,BASE_UNITS[baseName]=newBaseUnit,newUnit={name:name,value:1,dimensions:BASE_UNITS[baseName].dimensions.slice(0),prefixes:prefixes,offset:offset,base:BASE_UNITS[baseName]},currentUnitSystem[baseName]={unit:newUnit,prefix:PREFIXES.NONE[""]}}Unit.UNITS[name]=newUnit;for(var _i8=0;_i8<aliases.length;_i8++){var aliasName=aliases[_i8],_alias={};for(var _key6 in newUnit)(0,_object.hasOwnProperty)(newUnit,_key6)&&(_alias[_key6]=newUnit[_key6]);_alias.name=aliasName,Unit.UNITS[aliasName]=_alias}return new Unit(null,name)},Unit.deleteUnit=function(name){delete Unit.UNITS[name]},Unit.PREFIXES=PREFIXES,Unit.BASE_DIMENSIONS=BASE_DIMENSIONS,Unit.BASE_UNITS=BASE_UNITS,Unit.UNIT_SYSTEMS=UNIT_SYSTEMS,Unit.UNITS=UNITS,Unit},{isClass:!0});exports.createUnitClass=createUnitClass},{"../../utils/bignumber/constants":924,"../../utils/factory":931,"../../utils/is":933,"../../utils/object":938,"../../utils/string":941}],918:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCreateUnit=void 0;var _factory=require("../../../utils/factory"),dependencies=["typed","Unit"],createCreateUnit=(0,_factory.factory)("createUnit",dependencies,function(_ref){var typed=_ref.typed,Unit=_ref.Unit;return typed("createUnit",{"Object, Object":function(obj,options){return Unit.createUnit(obj,options)},Object:function(obj){return Unit.createUnit(obj,{})},"string, Unit | string | Object, Object":function(name,def,options){var obj={};return obj[name]=def,Unit.createUnit(obj,options)},"string, Unit | string | Object":function(name,def){var obj={};return obj[name]=def,Unit.createUnit(obj,{})},string:function(name){var obj={};return obj[name]={},Unit.createUnit(obj,{})}})});exports.createCreateUnit=createCreateUnit},{"../../../utils/factory":931}],919:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSplitUnit=void 0;var _factory=require("../../../utils/factory"),dependencies=["typed"],createSplitUnit=(0,_factory.factory)("splitUnit",dependencies,function(_ref){return(0,_ref.typed)("splitUnit",{"Unit, Array":function(unit,parts){return unit.splitUnit(parts)}})});exports.createSplitUnit=createSplitUnit},{"../../../utils/factory":931}],920:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUnitFunction=void 0;var _factory=require("../../../utils/factory"),_collection=require("../../../utils/collection"),dependencies=["typed","Unit"],createUnitFunction=(0,_factory.factory)("unit",dependencies,function(_ref){var typed=_ref.typed,Unit=_ref.Unit,unit=typed("unit",{Unit:function(x){return x.clone()},string:function(x){return Unit.isValuelessUnit(x)?new Unit(null,x):Unit.parse(x,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string":function(value,unit){return new Unit(value,unit)},"Array | Matrix":function(x){return(0,_collection.deepMap)(x,unit)}});return unit});exports.createUnitFunction=createUnitFunction},{"../../../utils/collection":927,"../../../utils/factory":931}],921:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPlanckTemperature=exports.createPlanckCharge=exports.createPlanckTime=exports.createPlanckMass=exports.createPlanckLength=exports.createGravity=exports.createMolarMassC12=exports.createMolarMass=exports.createWienDisplacement=exports.createStefanBoltzmann=exports.createSecondRadiation=exports.createSackurTetrode=exports.createMolarVolume=exports.createMolarPlanckConstant=exports.createGasConstant=exports.createLoschmidt=exports.createFirstRadiation=exports.createFaraday=exports.createBoltzmann=exports.createAvogadro=exports.createAtomicMass=exports.createEfimovFactor=exports.createWeakMixingAngle=exports.createThomsonCrossSection=exports.createRydberg=exports.createQuantumOfCirculation=exports.createNeutronMass=exports.createDeuteronMass=exports.createProtonMass=exports.createHartreeEnergy=exports.createFineStructure=exports.createFermiCoupling=exports.createElectronMass=exports.createClassicalElectronRadius=exports.createBohrRadius=exports.createJosephson=exports.createKlitzing=exports.createNuclearMagneton=exports.createMagneticFluxQuantum=exports.createInverseConductanceQuantum=exports.createConductanceQuantum=exports.createBohrMagneton=exports.createElementaryCharge=exports.createCoulomb=exports.createVacuumImpedance=exports.createElectricConstant=exports.createMagneticConstant=exports.createReducedPlanckConstant=exports.createPlanckConstant=exports.createGravitationConstant=exports.createSpeedOfLight=void 0;var _factory=require("../../utils/factory"),createSpeedOfLight=unitFactory("speedOfLight","299792458","m s^-1");exports.createSpeedOfLight=createSpeedOfLight;var createGravitationConstant=unitFactory("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2");exports.createGravitationConstant=createGravitationConstant;var createPlanckConstant=unitFactory("planckConstant","6.62607015e-34","J s");exports.createPlanckConstant=createPlanckConstant;var createReducedPlanckConstant=unitFactory("reducedPlanckConstant","1.0545718176461565e-34","J s");exports.createReducedPlanckConstant=createReducedPlanckConstant;var createMagneticConstant=unitFactory("magneticConstant","1.25663706212e-6","N A^-2");exports.createMagneticConstant=createMagneticConstant;var createElectricConstant=unitFactory("electricConstant","8.8541878128e-12","F m^-1");exports.createElectricConstant=createElectricConstant;var createVacuumImpedance=unitFactory("vacuumImpedance","376.730313667","ohm");exports.createVacuumImpedance=createVacuumImpedance;var createCoulomb=unitFactory("coulomb","8.987551792261171e9","N m^2 C^-2");exports.createCoulomb=createCoulomb;var createElementaryCharge=unitFactory("elementaryCharge","1.602176634e-19","C");exports.createElementaryCharge=createElementaryCharge;var createBohrMagneton=unitFactory("bohrMagneton","9.2740100783e-24","J T^-1");exports.createBohrMagneton=createBohrMagneton;var createConductanceQuantum=unitFactory("conductanceQuantum","7.748091729863649e-5","S");exports.createConductanceQuantum=createConductanceQuantum;var createInverseConductanceQuantum=unitFactory("inverseConductanceQuantum","12906.403729652257","ohm");exports.createInverseConductanceQuantum=createInverseConductanceQuantum;var createMagneticFluxQuantum=unitFactory("magneticFluxQuantum","2.0678338484619295e-15","Wb");exports.createMagneticFluxQuantum=createMagneticFluxQuantum;var createNuclearMagneton=unitFactory("nuclearMagneton","5.0507837461e-27","J T^-1");exports.createNuclearMagneton=createNuclearMagneton;var createKlitzing=unitFactory("klitzing","25812.807459304513","ohm");exports.createKlitzing=createKlitzing;var createJosephson=unitFactory("josephson","4.835978484169836e14 Hz V","Hz V^-1");exports.createJosephson=createJosephson;var createBohrRadius=unitFactory("bohrRadius","5.29177210903e-11","m");exports.createBohrRadius=createBohrRadius;var createClassicalElectronRadius=unitFactory("classicalElectronRadius","2.8179403262e-15","m");exports.createClassicalElectronRadius=createClassicalElectronRadius;var createElectronMass=unitFactory("electronMass","9.1093837015e-31","kg");exports.createElectronMass=createElectronMass;var createFermiCoupling=unitFactory("fermiCoupling","1.1663787e-5","GeV^-2");exports.createFermiCoupling=createFermiCoupling;var createFineStructure=numberFactory("fineStructure",.0072973525693);exports.createFineStructure=createFineStructure;var createHartreeEnergy=unitFactory("hartreeEnergy","4.3597447222071e-18","J");exports.createHartreeEnergy=createHartreeEnergy;var createProtonMass=unitFactory("protonMass","1.67262192369e-27","kg");exports.createProtonMass=createProtonMass;var createDeuteronMass=unitFactory("deuteronMass","3.3435830926e-27","kg");exports.createDeuteronMass=createDeuteronMass;var createNeutronMass=unitFactory("neutronMass","1.6749271613e-27","kg");exports.createNeutronMass=createNeutronMass;var createQuantumOfCirculation=unitFactory("quantumOfCirculation","3.6369475516e-4","m^2 s^-1");exports.createQuantumOfCirculation=createQuantumOfCirculation;var createRydberg=unitFactory("rydberg","10973731.568160","m^-1");exports.createRydberg=createRydberg;var createThomsonCrossSection=unitFactory("thomsonCrossSection","6.6524587321e-29","m^2");exports.createThomsonCrossSection=createThomsonCrossSection;var createWeakMixingAngle=numberFactory("weakMixingAngle",.2229);exports.createWeakMixingAngle=createWeakMixingAngle;var createEfimovFactor=numberFactory("efimovFactor",22.7);exports.createEfimovFactor=createEfimovFactor;var createAtomicMass=unitFactory("atomicMass","1.66053906660e-27","kg");exports.createAtomicMass=createAtomicMass;var createAvogadro=unitFactory("avogadro","6.02214076e23","mol^-1");exports.createAvogadro=createAvogadro;var createBoltzmann=unitFactory("boltzmann","1.380649e-23","J K^-1");exports.createBoltzmann=createBoltzmann;var createFaraday=unitFactory("faraday","96485.33212331001","C mol^-1");exports.createFaraday=createFaraday;var createFirstRadiation=unitFactory("firstRadiation","3.7417718521927573e-16","W m^2");exports.createFirstRadiation=createFirstRadiation;var createLoschmidt=unitFactory("loschmidt","2.686780111798444e25","m^-3");exports.createLoschmidt=createLoschmidt;var createGasConstant=unitFactory("gasConstant","8.31446261815324","J K^-1 mol^-1");exports.createGasConstant=createGasConstant;var createMolarPlanckConstant=unitFactory("molarPlanckConstant","3.990312712893431e-10","J s mol^-1");exports.createMolarPlanckConstant=createMolarPlanckConstant;var createMolarVolume=unitFactory("molarVolume","0.022413969545014137","m^3 mol^-1");exports.createMolarVolume=createMolarVolume;var createSackurTetrode=numberFactory("sackurTetrode",-1.16487052358);exports.createSackurTetrode=createSackurTetrode;var createSecondRadiation=unitFactory("secondRadiation","0.014387768775039337","m K");exports.createSecondRadiation=createSecondRadiation;var createStefanBoltzmann=unitFactory("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4");exports.createStefanBoltzmann=createStefanBoltzmann;var createWienDisplacement=unitFactory("wienDisplacement","2.897771955e-3","m K");exports.createWienDisplacement=createWienDisplacement;var createMolarMass=unitFactory("molarMass","0.99999999965e-3","kg mol^-1");exports.createMolarMass=createMolarMass;var createMolarMassC12=unitFactory("molarMassC12","11.9999999958e-3","kg mol^-1");exports.createMolarMassC12=createMolarMassC12;var createGravity=unitFactory("gravity","9.80665","m s^-2");exports.createGravity=createGravity;var createPlanckLength=unitFactory("planckLength","1.616255e-35","m");exports.createPlanckLength=createPlanckLength;var createPlanckMass=unitFactory("planckMass","2.176435e-8","kg");exports.createPlanckMass=createPlanckMass;var createPlanckTime=unitFactory("planckTime","5.391245e-44","s");exports.createPlanckTime=createPlanckTime;var createPlanckCharge=unitFactory("planckCharge","1.87554603778e-18","C");exports.createPlanckCharge=createPlanckCharge;var createPlanckTemperature=unitFactory("planckTemperature","1.416785e+32","K");function unitFactory(name,valueStr,unitStr){return(0,_factory.factory)(name,["config","Unit","BigNumber"],function(_ref){var config=_ref.config,Unit=_ref.Unit,BigNumber=_ref.BigNumber,unit=new Unit("BigNumber"===config.number?new BigNumber(valueStr):parseFloat(valueStr),unitStr);return unit.fixPrefix=!0,unit})}function numberFactory(name,value){return(0,_factory.factory)(name,["config","BigNumber"],function(_ref2){var config=_ref2.config,BigNumber=_ref2.BigNumber;return"BigNumber"===config.number?new BigNumber(value):value})}exports.createPlanckTemperature=createPlanckTemperature},{"../../utils/factory":931}],922:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.arraySize=arraySize,exports.validate=function(array,size){if(0===size.length){if(Array.isArray(array))throw new _DimensionError.DimensionError(array.length,0)}else!function _validate(array,size,dim){var i;var len=array.length;if(len!==size[dim])throw new _DimensionError.DimensionError(len,size[dim]);if(dim<size.length-1){var dimNext=dim+1;for(i=0;i<len;i++){var child=array[i];if(!Array.isArray(child))throw new _DimensionError.DimensionError(size.length-1,size.length,"<");_validate(array[i],size,dimNext)}}else for(i=0;i<len;i++)if(Array.isArray(array[i]))throw new _DimensionError.DimensionError(size.length+1,size.length,">")}(array,size,0)},exports.validateIndex=function(index,length){if(!(0,_is.isNumber)(index)||!(0,_number.isInteger)(index))throw new TypeError("Index must be an integer (value: "+index+")");if(index<0||"number"==typeof length&&length<=index)throw new _IndexError.IndexError(index,length)},exports.resize=function(array,size,defaultValue){if(!Array.isArray(array)||!Array.isArray(size))throw new TypeError("Array expected");if(0===size.length)throw new Error("Resizing to scalar is not supported");size.forEach(function(value){if(!(0,_is.isNumber)(value)||!(0,_number.isInteger)(value)||value<0)throw new TypeError("Invalid size, must contain positive integers (size: "+(0,_string.format)(size)+")")});var _defaultValue=void 0!==defaultValue?defaultValue:0;return function _resize(array,size,dim,defaultValue){var i;var elem;var oldLen=array.length;var newLen=size[dim];var minLen=Math.min(oldLen,newLen);array.length=newLen;if(dim<size.length-1){var dimNext=dim+1;for(i=0;i<minLen;i++)elem=array[i],Array.isArray(elem)||(elem=[elem],array[i]=elem),_resize(elem,size,dimNext,defaultValue);for(i=minLen;i<newLen;i++)elem=[],array[i]=elem,_resize(elem,size,dimNext,defaultValue)}else{for(i=0;i<minLen;i++)for(;Array.isArray(array[i]);)array[i]=array[i][0];for(i=minLen;i<newLen;i++)array[i]=defaultValue}}(array,size,0,_defaultValue),array},exports.reshape=function(array,sizes){var newArray,flatArray=flatten(array);function product(arr){return arr.reduce(function(prev,curr){return prev*curr})}if(!Array.isArray(array)||!Array.isArray(sizes))throw new TypeError("Array expected");if(0===sizes.length)throw new _DimensionError.DimensionError(0,product(arraySize(array)),"!=");for(var totalSize=1,sizeIndex=0;sizeIndex<sizes.length;sizeIndex++)totalSize*=sizes[sizeIndex];if(flatArray.length!==totalSize)throw new _DimensionError.DimensionError(product(sizes),product(arraySize(array)),"!=");try{newArray=function(array,sizes){for(var tmpArray2,tmpArray=array,sizeIndex=sizes.length-1;0<sizeIndex;sizeIndex--){var size=sizes[sizeIndex];tmpArray2=[];for(var length=tmpArray.length/size,i=0;i<length;i++)tmpArray2.push(tmpArray.slice(i*size,(i+1)*size));tmpArray=tmpArray2}return tmpArray}(flatArray,sizes)}catch(e){if(e instanceof _DimensionError.DimensionError)throw new _DimensionError.DimensionError(product(sizes),product(arraySize(array)),"!=");throw e}return newArray},exports.squeeze=function(array,size){var s=size||arraySize(array);for(;Array.isArray(array)&&1===array.length;)array=array[0],s.shift();var dims=s.length;for(;1===s[dims-1];)dims--;dims<s.length&&(array=function _squeeze(array,dims,dim){var i,ii;if(dim<dims){var next=dim+1;for(i=0,ii=array.length;i<ii;i++)array[i]=_squeeze(array[i],dims,next)}else for(;Array.isArray(array);)array=array[0];return array}(array,dims,0),s.length=dims);return array},exports.unsqueeze=function(array,dims,outer,size){var s=size||arraySize(array);if(outer)for(var i=0;i<outer;i++)array=[array],s.unshift(1);array=function _unsqueeze(array,dims,dim){var i,ii;if(Array.isArray(array)){var next=dim+1;for(i=0,ii=array.length;i<ii;i++)array[i]=_unsqueeze(array[i],dims,next)}else for(var d=dim;d<dims;d++)array=[array];return array}(array,dims,0);for(;s.length<dims;)s.push(1);return array},exports.flatten=flatten,exports.map=function(array,callback){return Array.prototype.map.call(array,callback)},exports.forEach=function(array,callback){Array.prototype.forEach.call(array,callback)},exports.filter=function(array,callback){if(1===arraySize(array).length)return Array.prototype.filter.call(array,callback);throw new Error("Only one dimensional matrices supported")},exports.filterRegExp=function(array,regexp){if(1===arraySize(array).length)return Array.prototype.filter.call(array,function(entry){return regexp.test(entry)});throw new Error("Only one dimensional matrices supported")},exports.join=function(array,separator){return Array.prototype.join.call(array,separator)},exports.identify=function(a){if(!Array.isArray(a))throw new TypeError("Array input expected");if(0===a.length)return a;var b=[],count=0;b[0]={value:a[0],identifier:0};for(var i=1;i<a.length;i++)a[i]===a[i-1]?count++:count=0,b.push({value:a[i],identifier:count});return b},exports.generalize=function(a){if(!Array.isArray(a))throw new TypeError("Array input expected");if(0===a.length)return a;for(var b=[],i=0;i<a.length;i++)b.push(a[i].value);return b},exports.getArrayDataType=function getArrayDataType(array,typeOf){var type;var length=0;for(var i=0;i<array.length;i++){var item=array[i],isArray=Array.isArray(item);if(0===i&&isArray&&(length=item.length),isArray&&item.length!==length)return;var itemType=isArray?getArrayDataType(item,typeOf):typeOf(item);if(void 0===type)type=itemType;else if(type!==itemType)return"mixed"}return type},exports.last=function(array){return array[array.length-1]},exports.initial=function(array){return array.slice(0,array.length-1)},exports.contains=function(array,item){return-1!==array.indexOf(item)};var _number=require("./number"),_is=require("./is"),_string=require("./string"),_DimensionError=require("../error/DimensionError"),_IndexError=require("../error/IndexError");function arraySize(x){for(var s=[];Array.isArray(x);)s.push(x.length),x=x[0];return s}function flatten(array){if(!Array.isArray(array))return array;var flat=[];return array.forEach(function callback(value){Array.isArray(value)?value.forEach(callback):flat.push(value)}),flat}},{"../error/DimensionError":399,"../error/IndexError":400,"./is":933,"./number":937,"./string":941}],923:[function(require,module,exports){"use strict";function bitNotBigNumber(x){if(x.isFinite()&&!x.isInteger())throw new Error("Integer expected in function bitNot");var BigNumber=x.constructor,prevPrec=BigNumber.precision;BigNumber.config({precision:1e9});var result=x.plus(new BigNumber(1));return result.s=-result.s||null,BigNumber.config({precision:prevPrec}),result}function bitwise(x,y,func){var xBits,yBits,minBits,maxBits,minSign,BigNumber=x.constructor,xSign=+(x.s<0),ySign=+(y.s<0);if(xSign){xBits=decCoefficientToBinaryString(bitNotBigNumber(x));for(var i=0;i<xBits.length;++i)xBits[i]^=1}else xBits=decCoefficientToBinaryString(x);if(ySign){yBits=decCoefficientToBinaryString(bitNotBigNumber(y));for(var _i=0;_i<yBits.length;++_i)yBits[_i]^=1}else yBits=decCoefficientToBinaryString(y);minSign=xBits.length<=yBits.length?(minBits=xBits,maxBits=yBits,xSign):(minBits=yBits,maxBits=xBits,ySign);var shortLen=minBits.length,longLen=maxBits.length,expFuncVal=1^func(xSign,ySign),outVal=new BigNumber(1^expFuncVal),twoPower=new BigNumber(1),two=new BigNumber(2),prevPrec=BigNumber.precision;for(BigNumber.config({precision:1e9});0<shortLen;)func(minBits[--shortLen],maxBits[--longLen])===expFuncVal&&(outVal=outVal.plus(twoPower)),twoPower=twoPower.times(two);for(;0<longLen;)func(minSign,maxBits[--longLen])===expFuncVal&&(outVal=outVal.plus(twoPower)),twoPower=twoPower.times(two);return BigNumber.config({precision:prevPrec}),0==expFuncVal&&(outVal.s=-outVal.s),outVal}function decCoefficientToBinaryString(x){for(var a=x.d,r=a[0]+"",i=1;i<a.length;++i){for(var s=a[i]+"",z=7-s.length;z--;)s="0"+s;r+=s}for(var j=r.length;"0"===r.charAt(j);)j--;var xe=x.e,str=r.slice(0,j+1||1),strL=str.length;if(0<xe)if(++xe>strL)for(xe-=strL;xe--;)str+="0";else xe<strL&&(str=str.slice(0,xe)+"."+str.slice(xe));for(var arr=[0],_i2=0;_i2<str.length;){for(var arrL=arr.length;arrL--;)arr[arrL]*=10;arr[0]+=parseInt(str.charAt(_i2++));for(var _j=0;_j<arr.length;++_j)1<arr[_j]&&(null!==arr[_j+1]&&void 0!==arr[_j+1]||(arr[_j+1]=0),arr[_j+1]+=arr[_j]>>1,arr[_j]&=1)}return arr.reverse()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.bitAndBigNumber=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger())throw new Error("Integers expected in function bitAnd");var BigNumber=x.constructor;if(x.isNaN()||y.isNaN())return new BigNumber(NaN);if(x.isZero()||y.eq(-1)||x.eq(y))return x;if(y.isZero()||x.eq(-1))return y;if(!x.isFinite()||!y.isFinite()){if(!x.isFinite()&&!y.isFinite())return x.isNegative()===y.isNegative()?x:new BigNumber(0);if(!x.isFinite())return y.isNegative()?x:x.isNegative()?new BigNumber(0):y;if(!y.isFinite())return x.isNegative()?y:y.isNegative()?new BigNumber(0):x}return bitwise(x,y,function(a,b){return a&b})},exports.bitNotBigNumber=bitNotBigNumber,exports.bitOrBigNumber=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger())throw new Error("Integers expected in function bitOr");var BigNumber=x.constructor;if(x.isNaN()||y.isNaN())return new BigNumber(NaN);var negOne=new BigNumber(-1);if(x.isZero()||y.eq(negOne)||x.eq(y))return y;if(y.isZero()||x.eq(negOne))return x;if(x.isFinite()&&y.isFinite())return bitwise(x,y,function(a,b){return a|b});if(!x.isFinite()&&!x.isNegative()&&y.isNegative()||x.isNegative()&&!y.isNegative()&&!y.isFinite())return negOne;if(x.isNegative()&&y.isNegative())return x.isFinite()?x:y;return x.isFinite()?y:x},exports.bitwise=bitwise,exports.bitXor=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger())throw new Error("Integers expected in function bitXor");var BigNumber=x.constructor;if(x.isNaN()||y.isNaN())return new BigNumber(NaN);if(x.isZero())return y;if(y.isZero())return x;if(x.eq(y))return new BigNumber(0);var negOne=new BigNumber(-1);if(x.eq(negOne))return bitNotBigNumber(y);if(y.eq(negOne))return bitNotBigNumber(x);return x.isFinite()&&y.isFinite()?bitwise(x,y,function(a,b){return a^b}):x.isFinite()||y.isFinite()?new BigNumber(x.isNegative()===y.isNegative()?1/0:-1/0):negOne},exports.leftShiftBigNumber=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger())throw new Error("Integers expected in function leftShift");var BigNumber=x.constructor;if(x.isNaN()||y.isNaN()||y.isNegative()&&!y.isZero())return new BigNumber(NaN);if(x.isZero()||y.isZero())return x;if(!x.isFinite()&&!y.isFinite())return new BigNumber(NaN);if(y.lt(55))return x.times(Math.pow(2,y.toNumber())+"");return x.times(new BigNumber(2).pow(y))},exports.rightArithShiftBigNumber=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger())throw new Error("Integers expected in function rightArithShift");var BigNumber=x.constructor;if(x.isNaN()||y.isNaN()||y.isNegative()&&!y.isZero())return new BigNumber(NaN);if(x.isZero()||y.isZero())return x;if(!y.isFinite())return x.isNegative()?new BigNumber(-1):x.isFinite()?new BigNumber(0):new BigNumber(NaN);if(y.lt(55))return x.div(Math.pow(2,y.toNumber())+"").floor();return x.div(new BigNumber(2).pow(y)).floor()}},{}],924:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBigNumberTau=exports.createBigNumberPi=exports.createBigNumberPhi=exports.createBigNumberE=void 0;var _function=require("../function"),createBigNumberE=(0,_function.memoize)(function(BigNumber){return new BigNumber(1).exp()},hasher);exports.createBigNumberE=createBigNumberE;var createBigNumberPhi=(0,_function.memoize)(function(BigNumber){return new BigNumber(1).plus(new BigNumber(5).sqrt()).div(2)},hasher);exports.createBigNumberPhi=createBigNumberPhi;var createBigNumberPi=(0,_function.memoize)(function(BigNumber){return BigNumber.acos(-1)},hasher);exports.createBigNumberPi=createBigNumberPi;var createBigNumberTau=(0,_function.memoize)(function(BigNumber){return createBigNumberPi(BigNumber).times(2)},hasher);function hasher(args){return args[0].precision}exports.createBigNumberTau=createBigNumberTau},{"../function":932}],925:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.format=function format(value,options){if("function"==typeof options)return options(value);if(!value.isFinite())return value.isNaN()?"NaN":value.gt(0)?"Infinity":"-Infinity";var notation="auto";var precision;void 0!==options&&(options.notation&&(notation=options.notation),"number"==typeof options?precision=options:options.precision&&(precision=options.precision));switch(notation){case"fixed":return toFixed(value,precision);case"exponential":return toExponential(value,precision);case"engineering":return toEngineering(value,precision);case"auto":if(options&&options.exponential&&(void 0!==options.exponential.lower||void 0!==options.exponential.upper)){var fixedOptions=(0,_object.mapObject)(options,function(x){return x});return(fixedOptions.exponential=void 0)!==options.exponential.lower&&(fixedOptions.lowerExp=Math.round(Math.log(options.exponential.lower)/Math.LN10)),void 0!==options.exponential.upper&&(fixedOptions.upperExp=Math.round(Math.log(options.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(options)+" with "+JSON.stringify(fixedOptions)),format(value,fixedOptions)}var lowerExp=options&&void 0!==options.lowerExp?options.lowerExp:-3,upperExp=options&&void 0!==options.upperExp?options.upperExp:5;if(value.isZero())return"0";var rounded=value.toSignificantDigits(precision),exp=rounded.e;return(lowerExp<=exp&&exp<upperExp?rounded.toFixed():toExponential(value,precision)).replace(/((\.\d*?)(0+))($|e)/,function(){var digits=arguments[2],e=arguments[4];return"."!==digits?digits+e:e});default:throw new Error('Unknown notation "'+notation+'". Choose "auto", "exponential", or "fixed".')}},exports.toEngineering=toEngineering,exports.toExponential=toExponential,exports.toFixed=toFixed;var _object=require("../object");function toEngineering(value,precision){var e=value.e,newExp=e%3==0?e:e<0?e-3-e%3:e-e%3,valueWithoutExp=value.mul(Math.pow(10,-newExp)),valueStr=valueWithoutExp.toPrecision(precision);return-1!==valueStr.indexOf("e")&&(valueStr=valueWithoutExp.toString()),valueStr+"e"+(0<=e?"+":"")+newExp.toString()}function toExponential(value,precision){return void 0!==precision?value.toExponential(precision-1):value.toExponential()}function toFixed(value,precision){return value.toFixed(precision)}},{"../object":938}],926:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nearlyEqual=function(x,y,epsilon){if(null==epsilon)return x.eq(y);if(x.eq(y))return!0;if(x.isNaN()||y.isNaN())return!1;if(x.isFinite()&&y.isFinite()){var diff=x.minus(y).abs();if(diff.isZero())return!0;var max=x.constructor.max(x.abs(),y.abs());return diff.lte(max.times(epsilon))}return!1}},{}],927:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.containsCollections=function(array){for(var i=0;i<array.length;i++)if((0,_is.isCollection)(array[i]))return!0;return!1},exports.deepForEach=function deepForEach(array,callback){(0,_is.isMatrix)(array)&&(array=array.valueOf());for(var i=0,ii=array.length;i<ii;i++){var value=array[i];Array.isArray(value)?deepForEach(value,callback):callback(value)}},exports.deepMap=function deepMap(array,callback,skipZeros){return array&&"function"==typeof array.map?array.map(function(x){return deepMap(x,callback,skipZeros)}):callback(array)},exports.reduce=function(mat,dim,callback){var size=Array.isArray(mat)?(0,_array.arraySize)(mat):mat.size();if(dim<0||dim>=size.length)throw new _IndexError.IndexError(dim,size.length);return(0,_is.isMatrix)(mat)?mat.create(_reduce(mat.valueOf(),dim,callback)):_reduce(mat,dim,callback)},exports.scatter=function(a,j,w,x,u,mark,cindex,f,inverse,update,value){var k,k0,k1,i,avalues=a._values,aindex=a._index,aptr=a._ptr;if(x)for(k0=aptr[j],k1=aptr[j+1],k=k0;k<k1;k++)i=aindex[k],w[i]!==mark?(w[i]=mark,cindex.push(i),update?(x[i]=inverse?f(avalues[k],value):f(value,avalues[k]),u[i]=mark):x[i]=avalues[k]):(x[i]=inverse?f(avalues[k],x[i]):f(x[i],avalues[k]),u[i]=mark);else for(k0=aptr[j],k1=aptr[j+1],k=k0;k<k1;k++)i=aindex[k],w[i]!==mark?(w[i]=mark,cindex.push(i)):u[i]=mark};var _is=require("./is"),_IndexError=require("../error/IndexError"),_array=require("./array");function _reduce(mat,dim,callback){var i,ret,val,tran;if(dim<=0){if(Array.isArray(mat[0])){for(tran=function(mat){var i,j,I=mat.length,J=mat[0].length,ret=[];for(j=0;j<J;j++){var tmp=[];for(i=0;i<I;i++)tmp.push(mat[i][j]);ret.push(tmp)}return ret}(mat),ret=[],i=0;i<tran.length;i++)ret[i]=_reduce(tran[i],dim-1,callback);return ret}for(val=mat[0],i=1;i<mat.length;i++)val=callback(val,mat[i]);return val}for(ret=[],i=0;i<mat.length;i++)ret[i]=_reduce(mat[i],dim-1,callback);return ret}},{"../error/IndexError":400,"./array":922,"./is":933}],928:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complexEquals=function(x,y,epsilon){return(0,_number.nearlyEqual)(x.re,y.re,epsilon)&&(0,_number.nearlyEqual)(x.im,y.im,epsilon)};var _number=require("./number")},{"./number":937}],929:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSafeProperty=function(object,prop){if(isPlainObject(object)&&isSafeProperty(object,prop))return object[prop];if("function"==typeof object[prop]&&isSafeMethod(object,prop))throw new Error('Cannot access method "'+prop+'" as a property');throw new Error('No access to property "'+prop+'"')},exports.setSafeProperty=function(object,prop,value){if(isPlainObject(object)&&isSafeProperty(object,prop))return object[prop]=value;throw new Error('No access to property "'+prop+'"')},exports.isSafeProperty=isSafeProperty,exports.validateSafeMethod=function(object,method){if(!isSafeMethod(object,method))throw new Error('No access to method "'+method+'"')},exports.isSafeMethod=isSafeMethod,exports.isPlainObject=isPlainObject;var _object=require("./object");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function isSafeProperty(object,prop){return!(!object||"object"!==_typeof(object))&&(!!(0,_object.hasOwnProperty)(safeNativeProperties,prop)||!(prop in Object.prototype)&&!(prop in Function.prototype))}function isSafeMethod(object,method){return null!=object&&"function"==typeof object[method]&&(!((0,_object.hasOwnProperty)(object,method)&&Object.getPrototypeOf&&method in Object.getPrototypeOf(object))&&(!!(0,_object.hasOwnProperty)(safeNativeMethods,method)||!(method in Object.prototype)&&!(method in Function.prototype)))}function isPlainObject(object){return"object"===_typeof(object)&&object&&object.constructor===Object}var safeNativeProperties={length:!0,name:!0},safeNativeMethods={toString:!0,valueOf:!0,toLocaleString:!0}},{"./object":938}],930:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mixin=function(obj){var emitter=new _tinyEmitter.default;return obj.on=emitter.on.bind(emitter),obj.off=emitter.off.bind(emitter),obj.once=emitter.once.bind(emitter),obj.emit=emitter.emit.bind(emitter),obj};var obj,_tinyEmitter=(obj=require("tiny-emitter"))&&obj.__esModule?obj:{default:obj}},{"tiny-emitter":945}],931:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.factory=function(name,dependencies,create,meta){function assertAndCreate(scope){var deps=(0,_object.pickShallow)(scope,dependencies.map(stripOptionalNotation));return assertDependencies(name,dependencies,scope),create(deps)}assertAndCreate.isFactory=!0,assertAndCreate.fn=name,assertAndCreate.dependencies=dependencies.slice().sort(),meta&&(assertAndCreate.meta=meta);return assertAndCreate},exports.sortFactories=sortFactories,exports.create=function(factories){var scope=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return sortFactories(factories).forEach(function(factory){return factory(scope)}),scope},exports.isFactory=isFactory,exports.assertDependencies=assertDependencies,exports.isOptionalDependency=isOptionalDependency,exports.stripOptionalNotation=stripOptionalNotation;var _array=require("./array"),_object=require("./object");function sortFactories(factories){var factoriesByName={};factories.forEach(function(factory){factoriesByName[factory.fn]=factory});var sorted=[];function addFactory(factory){for(var index=0;index<sorted.length&&!function containsDependency(factory,dependency){if(isFactory(factory)){if((0,_array.contains)(factory.dependencies,dependency.fn||dependency.name))return!0;if(factory.dependencies.some(function(d){return containsDependency(factoriesByName[d],dependency)}))return!0}return!1}(sorted[index],factory);)index++;sorted.splice(index,0,factory)}return factories.filter(isFactory).forEach(addFactory),factories.filter(function(factory){return!isFactory(factory)}).forEach(addFactory),sorted}function isFactory(obj){return"function"==typeof obj&&"string"==typeof obj.fn&&Array.isArray(obj.dependencies)}function assertDependencies(name,dependencies,scope){if(!dependencies.filter(function(dependency){return!isOptionalDependency(dependency)}).every(function(dependency){return void 0!==scope[dependency]})){var missingDependencies=dependencies.filter(function(dependency){return void 0===scope[dependency]});throw new Error('Cannot create function "'.concat(name,'", ')+"some dependencies are missing: ".concat(missingDependencies.map(function(d){return'"'.concat(d,'"')}).join(", "),"."))}}function isOptionalDependency(dependency){return dependency&&"?"===dependency[0]}function stripOptionalNotation(dependency){return dependency&&"?"===dependency[0]?dependency.slice(1):dependency}},{"./array":922,"./object":938}],932:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.memoize=function(fn,hasher){return function memoize(){"object"!==_typeof(memoize.cache)&&(memoize.cache={});for(var args=[],i=0;i<arguments.length;i++)args[i]=arguments[i];var hash=hasher?hasher(args):JSON.stringify(args);return hash in memoize.cache||(memoize.cache[hash]=fn.apply(fn,args)),memoize.cache[hash]}},exports.memoizeCompare=function(fn,isEqual){function memoize(){for(var args=[],i=0;i<arguments.length;i++)args[i]=arguments[i];for(var c=0;c<memoize.cache.length;c++){var cached=memoize.cache[c];if(isEqual(args,cached.args))return cached.res}var res=fn.apply(fn,args);return memoize.cache.unshift({args:args,res:res}),res}return memoize.cache=[],memoize},exports.maxArgumentCount=function(fn){return Object.keys(fn.signatures||{}).reduce(function(args,signature){var count=(signature.match(/,/g)||[]).length+1;return Math.max(args,count)},-1)}},{}],933:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function isBigNumber(x){return x&&!0===x.constructor.prototype.isBigNumber||!1}function isComplex(x){return x&&"object"===_typeof(x)&&!0===Object.getPrototypeOf(x).isComplex||!1}function isFraction(x){return x&&"object"===_typeof(x)&&!0===Object.getPrototypeOf(x).isFraction||!1}function isUnit(x){return x&&!0===x.constructor.prototype.isUnit||!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNumber=function(x){return"number"==typeof x},exports.isBigNumber=isBigNumber,exports.isComplex=isComplex,exports.isFraction=isFraction,exports.isUnit=isUnit,exports.isString=function(x){return"string"==typeof x},exports.isMatrix=isMatrix,exports.isCollection=function(x){return Array.isArray(x)||isMatrix(x)},exports.isDenseMatrix=function(x){return x&&x.isDenseMatrix&&!0===x.constructor.prototype.isMatrix||!1},exports.isSparseMatrix=function(x){return x&&x.isSparseMatrix&&!0===x.constructor.prototype.isMatrix||!1},exports.isRange=isRange,exports.isIndex=isIndex,exports.isBoolean=function(x){return"boolean"==typeof x},exports.isResultSet=isResultSet,exports.isHelp=isHelp,exports.isFunction=function(x){return"function"==typeof x},exports.isDate=function(x){return x instanceof Date},exports.isRegExp=function(x){return x instanceof RegExp},exports.isObject=function(x){return!(!x||"object"!==_typeof(x)||x.constructor!==Object||isComplex(x)||isFraction(x))},exports.isNull=function(x){return null===x},exports.isUndefined=function(x){return void 0===x},exports.isAccessorNode=function(x){return x&&!0===x.isAccessorNode&&!0===x.constructor.prototype.isNode||!1},exports.isArrayNode=function(x){return x&&!0===x.isArrayNode&&!0===x.constructor.prototype.isNode||!1},exports.isAssignmentNode=function(x){return x&&!0===x.isAssignmentNode&&!0===x.constructor.prototype.isNode||!1},exports.isBlockNode=function(x){return x&&!0===x.isBlockNode&&!0===x.constructor.prototype.isNode||!1},exports.isConditionalNode=function(x){return x&&!0===x.isConditionalNode&&!0===x.constructor.prototype.isNode||!1},exports.isConstantNode=function(x){return x&&!0===x.isConstantNode&&!0===x.constructor.prototype.isNode||!1},exports.isFunctionAssignmentNode=function(x){return x&&!0===x.isFunctionAssignmentNode&&!0===x.constructor.prototype.isNode||!1},exports.isFunctionNode=function(x){return x&&!0===x.isFunctionNode&&!0===x.constructor.prototype.isNode||!1},exports.isIndexNode=function(x){return x&&!0===x.isIndexNode&&!0===x.constructor.prototype.isNode||!1},exports.isNode=isNode,exports.isObjectNode=function(x){return x&&!0===x.isObjectNode&&!0===x.constructor.prototype.isNode||!1},exports.isOperatorNode=function(x){return x&&!0===x.isOperatorNode&&!0===x.constructor.prototype.isNode||!1},exports.isParenthesisNode=function(x){return x&&!0===x.isParenthesisNode&&!0===x.constructor.prototype.isNode||!1},exports.isRangeNode=function(x){return x&&!0===x.isRangeNode&&!0===x.constructor.prototype.isNode||!1},exports.isSymbolNode=function(x){return x&&!0===x.isSymbolNode&&!0===x.constructor.prototype.isNode||!1},exports.isChain=isChain,exports.typeOf=function(x){var t=_typeof(x);return"object"!==t?"function"===t?"Function":t:null===x?"null":Array.isArray(x)?"Array":x instanceof Date?"Date":x instanceof RegExp?"RegExp":isBigNumber(x)?"BigNumber":isComplex(x)?"Complex":isFraction(x)?"Fraction":isMatrix(x)?"Matrix":isUnit(x)?"Unit":isIndex(x)?"Index":isRange(x)?"Range":isResultSet(x)?"ResultSet":isNode(x)?x.type:isChain(x)?"Chain":isHelp(x)?"Help":"Object"},exports.isArray=void 0;var isArray=Array.isArray;function isMatrix(x){return x&&!0===x.constructor.prototype.isMatrix||!1}function isRange(x){return x&&!0===x.constructor.prototype.isRange||!1}function isIndex(x){return x&&!0===x.constructor.prototype.isIndex||!1}function isResultSet(x){return x&&!0===x.constructor.prototype.isResultSet||!1}function isHelp(x){return x&&!0===x.constructor.prototype.isHelp||!1}function isNode(x){return x&&!0===x.isNode&&!0===x.constructor.prototype.isNode||!1}function isChain(x){return x&&!0===x.constructor.prototype.isChain||!1}exports.isArray=isArray},{}],934:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.escapeLatex=escapeLatex,exports.toSymbol=function(name,isUnit){if(isUnit=void 0!==isUnit&&isUnit)return(0,_object.hasOwnProperty)(latexUnits,name)?latexUnits[name]:"\\mathrm{"+escapeLatex(name)+"}";if((0,_object.hasOwnProperty)(latexSymbols,name))return latexSymbols[name];return escapeLatex(name)},exports.defaultTemplate=exports.latexFunctions=exports.latexOperators=exports.latexSymbols=void 0;var obj,_escapeLatex=(obj=require("escape-latex"))&&obj.__esModule?obj:{default:obj},_object=require("./object");var latexSymbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"};exports.latexSymbols=latexSymbols;var latexOperators={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"};exports.latexOperators=latexOperators;var latexFunctions={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(latexOperators.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(latexOperators.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(latexOperators.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(latexOperators.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(latexOperators.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(latexOperators.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(latexOperators.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(latexOperators.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(latexOperators.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(latexOperators.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(latexOperators.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(latexOperators.bitAnd,"${args[1]}\\right)")},bitNot:{1:latexOperators.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(latexOperators.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(latexOperators.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(latexOperators.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(latexOperators.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(latexOperators.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(latexOperators.and,"${args[1]}\\right)")},not:{1:latexOperators.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(latexOperators.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(latexOperators.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(latexOperators.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},sqrtm:{1:"{${args[0]}}".concat(latexOperators.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(latexOperators.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(latexOperators.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(latexOperators.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(latexOperators.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(latexOperators.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(latexOperators.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(latexOperators.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(latexOperators.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(latexOperators.to,"${args[1]}\\right)")},numeric:function(node){return node.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(latexSymbols.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}};exports.latexFunctions=latexFunctions;exports.defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)";var latexUnits={deg:"^\\circ"};function escapeLatex(string){return(0,_escapeLatex.default)(string,{preserveFormatting:!0})}},{"./object":938,"escape-latex":56}],935:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.warnOnce=void 0;var messages,warnOnce=(messages={},function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var _console,message=args.join(", ");messages[message]||(messages[message]=!0,(_console=console).warn.apply(_console,["Warning:"].concat(args)))});exports.warnOnce=warnOnce},{}],936:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.noBignumber=function(){throw new Error('No "bignumber" implementation available')},exports.noFraction=function(){throw new Error('No "fraction" implementation available')},exports.noMatrix=function(){throw new Error('No "matrix" implementation available')},exports.noIndex=function(){throw new Error('No "index" implementation available')},exports.noSubset=function(){throw new Error('No "matrix" implementation available')}},{}],937:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInteger=function(value){return"boolean"==typeof value||!!isFinite(value)&&value===Math.round(value)},exports.format=function(value,options){if("function"==typeof options)return options(value);{if(value===1/0)return"Infinity";if(value===-1/0)return"-Infinity";if(isNaN(value))return"NaN"}var precision,notation="auto";options&&(options.notation&&(notation=options.notation),(0,_is.isNumber)(options)?precision=options:(0,_is.isNumber)(options.precision)&&(precision=options.precision));switch(notation){case"fixed":return toFixed(value,precision);case"exponential":return toExponential(value,precision);case"engineering":return toEngineering(value,precision);case"auto":if(!options||!options.exponential||void 0===options.exponential.lower&&void 0===options.exponential.upper)return toPrecision(value,precision,options&&options).replace(/((\.\d*?)(0+))($|e)/,function(){var digits=arguments[2],e=arguments[4];return"."!==digits?digits+e:e});var fixedOptions=(0,_object.mapObject)(options,function(x){return x});return(fixedOptions.exponential=void 0)!==options.exponential.lower&&(fixedOptions.lowerExp=Math.round(Math.log(options.exponential.lower)/Math.LN10)),void 0!==options.exponential.upper&&(fixedOptions.upperExp=Math.round(Math.log(options.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(options)+" with "+JSON.stringify(fixedOptions)),toPrecision(value,precision,fixedOptions);default:throw new Error('Unknown notation "'+notation+'". Choose "auto", "exponential", or "fixed".')}},exports.splitNumber=splitNumber,exports.toEngineering=toEngineering,exports.toFixed=toFixed,exports.toExponential=toExponential,exports.toPrecision=toPrecision,exports.roundDigits=roundDigits,exports.digits=function(value){return value.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length},exports.nearlyEqual=function(x,y,epsilon){if(null==epsilon)return x===y;if(x===y)return!0;if(isNaN(x)||isNaN(y))return!1;if(isFinite(x)&&isFinite(y)){var diff=Math.abs(x-y);return diff<DBL_EPSILON||diff<=Math.max(Math.abs(x),Math.abs(y))*epsilon}return!1},exports.tanh=exports.sinh=exports.cosh=exports.atanh=exports.asinh=exports.acosh=exports.DBL_EPSILON=exports.expm1=exports.cbrt=exports.log1p=exports.log10=exports.log2=exports.sign=void 0;var _object=require("./object"),_is=require("./is");var sign=Math.sign||function(x){return 0<x?1:x<0?-1:0};exports.sign=sign;var log2=Math.log2||function(x){return Math.log(x)/Math.LN2};exports.log2=log2;var log10=Math.log10||function(x){return Math.log(x)/Math.LN10};exports.log10=log10;var log1p=Math.log1p||function(x){return Math.log(x+1)};exports.log1p=log1p;var cbrt=Math.cbrt||function(x){if(0===x)return x;var result,negate=x<0;return negate&&(x=-x),result=isFinite(x)?(x/((result=Math.exp(Math.log(x)/3))*result)+2*result)/3:x,negate?-result:result};exports.cbrt=cbrt;var expm1=Math.expm1||function(x){return 2e-4<=x||x<=-2e-4?Math.exp(x)-1:x+x*x/2+x*x*x/6};function splitNumber(value){var match=String(value).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!match)throw new SyntaxError("Invalid number "+value);var sign=match[1],digits=match[2],exponent=parseFloat(match[4]||"0"),dot=digits.indexOf(".");exponent+=-1!==dot?dot-1:digits.length-1;var coefficients=digits.replace(".","").replace(/^0*/,function(zeros){return exponent-=zeros.length,""}).replace(/0*$/,"").split("").map(function(d){return parseInt(d)});return 0===coefficients.length&&(coefficients.push(0),exponent++),{sign:sign,coefficients:coefficients,exponent:exponent}}function toEngineering(value,precision){if(isNaN(value)||!isFinite(value))return String(value);var rounded=roundDigits(splitNumber(value),precision),e=rounded.exponent,c=rounded.coefficients,newExp=e%3==0?e:e<0?e-3-e%3:e-e%3;if((0,_is.isNumber)(precision))for(;precision>c.length||e-newExp+1>c.length;)c.push(0);else for(var missingZeros=Math.abs(e-newExp)-(c.length-1),i=0;i<missingZeros;i++)c.push(0);for(var expDiff=Math.abs(e-newExp),decimalIdx=1;0<expDiff;)decimalIdx++,expDiff--;var decimals=c.slice(decimalIdx).join(""),decimalVal=(0,_is.isNumber)(precision)&&decimals.length||decimals.match(/[1-9]/)?"."+decimals:"",str=c.slice(0,decimalIdx).join("")+decimalVal+"e"+(0<=e?"+":"")+newExp.toString();return rounded.sign+str}function toFixed(value,precision){if(isNaN(value)||!isFinite(value))return String(value);var splitValue=splitNumber(value),rounded="number"==typeof precision?roundDigits(splitValue,splitValue.exponent+1+precision):splitValue,c=rounded.coefficients,p=rounded.exponent+1,pp=p+(precision||0);return c.length<pp&&(c=c.concat(zeros(pp-c.length))),p<0&&(c=zeros(1-p).concat(c),p=1),p<c.length&&c.splice(p,0,0===p?"0.":"."),rounded.sign+c.join("")}function toExponential(value,precision){if(isNaN(value)||!isFinite(value))return String(value);var split=splitNumber(value),rounded=precision?roundDigits(split,precision):split,c=rounded.coefficients,e=rounded.exponent;c.length<precision&&(c=c.concat(zeros(precision-c.length)));var first=c.shift();return rounded.sign+first+(0<c.length?"."+c.join(""):"")+"e"+(0<=e?"+":"")+e}function toPrecision(value,precision,options){if(isNaN(value)||!isFinite(value))return String(value);var lowerExp=options&&void 0!==options.lowerExp?options.lowerExp:-3,upperExp=options&&void 0!==options.upperExp?options.upperExp:5,split=splitNumber(value),rounded=precision?roundDigits(split,precision):split;if(rounded.exponent<lowerExp||rounded.exponent>=upperExp)return toExponential(value,precision);var c=rounded.coefficients,e=rounded.exponent;c.length<precision&&(c=c.concat(zeros(precision-c.length))),c=c.concat(zeros(e-c.length+1+(c.length<precision?precision-c.length:0)));var dot=0<e?e:0;return dot<(c=zeros(-e).concat(c)).length-1&&c.splice(dot+1,0,"."),rounded.sign+c.join("")}function roundDigits(split,precision){for(var rounded={sign:split.sign,coefficients:split.coefficients,exponent:split.exponent},c=rounded.coefficients;precision<=0;)c.unshift(0),rounded.exponent++,precision++;if(c.length>precision&&5<=c.splice(precision,c.length-precision)[0]){var i=precision-1;for(c[i]++;10===c[i];)c.pop(),0===i&&(c.unshift(0),rounded.exponent++,i++),c[--i]++}return rounded}function zeros(length){for(var arr=[],i=0;i<length;i++)arr.push(0);return arr}exports.expm1=expm1;var DBL_EPSILON=Number.EPSILON||2220446049250313e-31;exports.DBL_EPSILON=DBL_EPSILON;var acosh=Math.acosh||function(x){return Math.log(Math.sqrt(x*x-1)+x)};exports.acosh=acosh;var asinh=Math.asinh||function(x){return Math.log(Math.sqrt(x*x+1)+x)};exports.asinh=asinh;var atanh=Math.atanh||function(x){return Math.log((1+x)/(1-x))/2};exports.atanh=atanh;var cosh=Math.cosh||function(x){return(Math.exp(x)+Math.exp(-x))/2};exports.cosh=cosh;var sinh=Math.sinh||function(x){return(Math.exp(x)-Math.exp(-x))/2};exports.sinh=sinh;var tanh=Math.tanh||function(x){var e=Math.exp(2*x);return(e-1)/(e+1)};exports.tanh=tanh},{"./is":933,"./object":938}],938:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clone=function clone(x){var type=_typeof(x);if("number"===type||"string"===type||"boolean"===type||null==x)return x;if("function"==typeof x.clone)return x.clone();if(Array.isArray(x))return x.map(function(value){return clone(value)});if(x instanceof Date)return new Date(x.valueOf());if((0,_is.isBigNumber)(x))return x;if(x instanceof RegExp)throw new TypeError("Cannot clone "+x);return mapObject(x,clone)},exports.mapObject=mapObject,exports.extend=function(a,b){for(var prop in b)hasOwnProperty(b,prop)&&(a[prop]=b[prop]);return a},exports.deepExtend=function deepExtend(a,b){if(Array.isArray(b))throw new TypeError("Arrays are not supported by deepExtend");for(var prop in b)if(hasOwnProperty(b,prop))if(b[prop]&&b[prop].constructor===Object)void 0===a[prop]&&(a[prop]={}),a[prop]&&a[prop].constructor===Object?deepExtend(a[prop],b[prop]):a[prop]=b[prop];else{if(Array.isArray(b[prop]))throw new TypeError("Arrays are not supported by deepExtend");a[prop]=b[prop]}return a},exports.deepStrictEqual=function deepStrictEqual(a,b){var prop,i,len;{if(Array.isArray(a)){if(!Array.isArray(b))return!1;if(a.length!==b.length)return!1;for(i=0,len=a.length;i<len;i++)if(!deepStrictEqual(a[i],b[i]))return!1;return!0}if("function"==typeof a)return a===b;if(a instanceof Object){if(Array.isArray(b)||!(b instanceof Object))return!1;for(prop in a)if(!(prop in b&&deepStrictEqual(a[prop],b[prop])))return!1;for(prop in b)if(!(prop in a&&deepStrictEqual(a[prop],b[prop])))return!1;return!0}return a===b}},exports.deepFlatten=function(nestedObject){var flattenedObject={};return function _deepFlatten(nestedObject,flattenedObject){for(var prop in nestedObject){var value;hasOwnProperty(nestedObject,prop)&&("object"===_typeof(value=nestedObject[prop])&&null!==value?_deepFlatten(value,flattenedObject):flattenedObject[prop]=value)}}(nestedObject,flattenedObject),flattenedObject},exports.canDefineProperty=function(){try{if(Object.defineProperty)return Object.defineProperty({},"x",{get:function(){}}),!0}catch(e){}return!1},exports.lazy=function(object,prop,valueResolver){var _value,_uninitialized=!0;Object.defineProperty(object,prop,{get:function(){return _uninitialized&&(_value=valueResolver(),_uninitialized=!1),_value},set:function(value){_value=value,_uninitialized=!1},configurable:!0,enumerable:!0})},exports.traverse=function traverse(object,path){if(path&&"string"==typeof path)return traverse(object,path.split("."));var obj=object;if(path)for(var i=0;i<path.length;i++){var key=path[i];key in obj||(obj[key]={}),obj=obj[key]}return obj},exports.hasOwnProperty=hasOwnProperty,exports.isLegacyFactory=function(object){return object&&"function"==typeof object.factory},exports.get=get,exports.set=set,exports.pick=function(object,properties,transform){for(var copy={},i=0;i<properties.length;i++){var key=properties[i],value=get(object,key);void 0!==value&&set(copy,key,transform?transform(value,key):value)}return copy},exports.pickShallow=function(object,properties){for(var copy={},i=0;i<properties.length;i++){var key=properties[i],value=object[key];void 0!==value&&(copy[key]=value)}return copy},exports.values=function(object){return Object.keys(object).map(function(key){return object[key]})};var _is=require("./is");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function mapObject(object,callback){var clone={};for(var key in object)hasOwnProperty(object,key)&&(clone[key]=callback(object[key]));return clone}function hasOwnProperty(object,property){return object&&Object.hasOwnProperty.call(object,property)}function get(object,path){if("string"==typeof path)return isPath(path)?get(object,path.split(".")):object[path];for(var child=object,i=0;i<path.length;i++)var key=path[i],child=child?child[key]:void 0;return child}function set(object,path,value){if("string"==typeof path)return isPath(path)?set(object,path.split("."),value):(object[path]=value,object);for(var child=object,i=0;i<path.length-1;i++){var key=path[i];void 0===child[key]&&(child[key]={}),child=child[key]}return 0<path.length&&(child[path[path.length-1]]=value),object}function isPath(str){return-1!==str.indexOf(".")}},{"./is":933}],939:[function(require,module,exports){"use strict";Number.isFinite=Number.isFinite||function(value){return"number"==typeof value&&isFinite(value)},Number.isNaN=Number.isNaN||function(value){return value!=value}},{}],940:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.product=function product(i,n){if(n<i)return 1;if(n===i)return n;var half=n+i>>1;return product(i,half)*product(1+half,n)}},{}],941:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.endsWith=function(text,search){var start=text.length-search.length,end=text.length;return text.substring(start,end)===search},exports.format=format,exports.stringify=function(value){var text=String(value),escaped="",i=0;for(;i<text.length;){var c=text.charAt(i);"\\"===c?(escaped+=c,i++,""!==(c=text.charAt(i))&&-1!=='"\\/bfnrtu'.indexOf(c)||(escaped+="\\"),escaped+=c):escaped+='"'===c?'\\"':c,i++}return'"'+escaped+'"'},exports.escape=function(value){var text=String(value);return text=text.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},exports.compareText=function(x,y){if(!(0,_is.isString)(x))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+(0,_is.typeOf)(x)+", index: 0)");if((0,_is.isString)(y))return x===y?0:y<x?1:-1;throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+(0,_is.typeOf)(y)+", index: 1)")};var _is=require("./is"),_number=require("./number"),_formatter=require("./bignumber/formatter");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function format(value,options){return"number"==typeof value?(0,_number.format)(value,options):(0,_is.isBigNumber)(value)?(0,_formatter.format)(value,options):function(value){return value&&"object"===_typeof(value)&&"number"==typeof value.s&&"number"==typeof value.n&&"number"==typeof value.d||!1}(value)?options&&"decimal"===options.fraction?value.toString():value.s*value.n+"/"+value.d:Array.isArray(value)?function formatArray(array,options){{if(Array.isArray(array)){for(var str="[",len=array.length,i=0;i<len;i++)0!==i&&(str+=", "),str+=formatArray(array[i],options);return str+="]"}return format(array,options)}}(value,options):(0,_is.isString)(value)?'"'+value+'"':"function"==typeof value?value.syntax?String(value.syntax):"function":value&&"object"===_typeof(value)?"function"==typeof value.format?value.format(options):value&&value.toString(options)!=={}.toString()?value.toString(options):"{"+Object.keys(value).map(function(key){return'"'+key+'": '+format(value[key],options)}).join(", ")+"}":String(value)}},{"./bignumber/formatter":925,"./is":933,"./number":937}],942:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;exports.version="6.6.5"},{}],943:[function(require,module,exports){module.exports=require("../../lib/entry/mainAny")},{"../../lib/entry/mainAny":395}],944:[function(require,module,exports){(function(global){"use strict";var pool=[],GLOBAL=void 0===global?window:global,startdenom=Math.pow(256,6),significance=Math.pow(2,52),overflow=2*significance,oldRandom=Math.random;function ARC4(key){var t,keylen=key.length,me=this,i=0,j=me.i=me.j=0,s=me.S=[];for(keylen||(key=[keylen++]);i<256;)s[i]=i++;for(i=0;i<256;i++)s[i]=s[j=255&j+key[i%keylen]+(t=s[i])],s[j]=t;(me.g=function(count){for(var t,r=0,i=me.i,j=me.j,s=me.S;count--;)t=s[i=255&i+1],r=256*r+s[255&(s[i]=s[j=255&j+t])+(s[j]=t)];return me.i=i,me.j=j,r})(256)}function mixkey(seed,key){for(var smear,stringseed=seed+"",j=0;j<stringseed.length;)key[255&j]=255&(smear^=19*key[255&j])+stringseed.charCodeAt(j++);return tostring(key)}function tostring(a){return String.fromCharCode.apply(0,a)}module.exports=function(seed,options){if(options&&!0===options.global)return options.global=!1,Math.random=module.exports(seed,options),options.global=!0,Math.random;var key=[],arc4=(mixkey(function flatten(obj,depth){var prop,result=[],typ=(typeof obj)[0];if(depth&&"o"==typ)for(prop in obj)try{result.push(flatten(obj[prop],depth-1))}catch(e){}return result.length?result:"s"==typ?obj:obj+"\0"}(options&&options.entropy||!1?[seed,tostring(pool)]:0 in arguments?seed:function(seed){try{return GLOBAL.crypto.getRandomValues(seed=new Uint8Array(256)),tostring(seed)}catch(e){return[+new Date,GLOBAL,GLOBAL.navigator&&GLOBAL.navigator.plugins,GLOBAL.screen,tostring(pool)]}}(),3),key),new ARC4(key));return mixkey(tostring(arc4.S),pool),function(){for(var n=arc4.g(6),d=startdenom,x=0;n<significance;)n=256*(n+x),d*=256,x=arc4.g(1);for(;overflow<=n;)n/=2,d/=2,x>>>=1;return(n+x)/d}},module.exports.resetGlobal=function(){Math.random=oldRandom},mixkey(Math.random(),pool)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],945:[function(require,module,exports){function E(){}E.prototype={on:function(name,callback,ctx){var e=this.e||(this.e={});return(e[name]||(e[name]=[])).push({fn:callback,ctx:ctx}),this},once:function(name,callback,ctx){var self=this;function listener(){self.off(name,listener),callback.apply(ctx,arguments)}return listener._=callback,this.on(name,listener,ctx)},emit:function(name){for(var data=[].slice.call(arguments,1),evtArr=((this.e||(this.e={}))[name]||[]).slice(),i=0,len=evtArr.length;i<len;i++)evtArr[i].fn.apply(evtArr[i].ctx,data);return this},off:function(name,callback){var e=this.e||(this.e={}),evts=e[name],liveEvents=[];if(evts&&callback)for(var i=0,len=evts.length;i<len;i++)evts[i].fn!==callback&&evts[i].fn._!==callback&&liveEvents.push(evts[i]);return liveEvents.length?e[name]=liveEvents:delete e[name],this}},module.exports=E,module.exports.TinyEmitter=E},{}],946:[function(require,module,exports){"use strict";var root,factory;root=this,factory=function(){function ok(){return!0}function notOk(){return!1}function undef(){}return function create(){var _types=[{name:"number",test:function(x){return"number"==typeof x}},{name:"string",test:function(x){return"string"==typeof x}},{name:"boolean",test:function(x){return"boolean"==typeof x}},{name:"Function",test:function(x){return"function"==typeof x}},{name:"Array",test:Array.isArray},{name:"Date",test:function(x){return x instanceof Date}},{name:"RegExp",test:function(x){return x instanceof RegExp}},{name:"Object",test:function(x){return"object"==typeof x&&null!==x&&x.constructor===Object}},{name:"null",test:function(x){return null===x}},{name:"undefined",test:function(x){return void 0===x}}],anyType={name:"any",test:ok},_ignore=[],_conversions=[],typed={types:_types,conversions:_conversions,ignore:_ignore};function findTypeByName(typeName){var entry=findInArray(typed.types,function(entry){return entry.name===typeName});if(entry)return entry;if("any"===typeName)return anyType;var hint=findInArray(typed.types,function(entry){return entry.name.toLowerCase()===typeName.toLowerCase()});throw new TypeError('Unknown type "'+typeName+'"'+(hint?'. Did you mean "'+hint.name+'"?':""))}function findTypeIndex(type){return type===anyType?999:typed.types.indexOf(type)}function findTypeName(value){var entry=findInArray(typed.types,function(entry){return entry.test(value)});if(entry)return entry.name;throw new TypeError("Value has unknown type. Value: "+value)}function stringifyParams(params){return params.map(function(param){var typeNames=param.types.map(getTypeName);return(param.restParam?"...":"")+typeNames.join("|")}).join(",")}function parseParam(param,conversions){var restParam=0===param.indexOf("..."),typeNames=(restParam?3<param.length?param.slice(3):"any":param).split("|").map(trim).filter(notEmpty).filter(notIgnore),matchingConversions=function(conversions,typeNames){var matches={};return conversions.forEach(function(conversion){-1!==typeNames.indexOf(conversion.from)||-1===typeNames.indexOf(conversion.to)||matches[conversion.from]||(matches[conversion.from]=conversion)}),Object.keys(matches).map(function(from){return matches[from]})}(conversions,typeNames),exactTypes=typeNames.map(function(typeName){var type=findTypeByName(typeName);return{name:typeName,typeIndex:findTypeIndex(type),test:type.test,conversion:null,conversionIndex:-1}}),convertibleTypes=matchingConversions.map(function(conversion){var type=findTypeByName(conversion.from);return{name:conversion.from,typeIndex:findTypeIndex(type),test:type.test,conversion:conversion,conversionIndex:conversions.indexOf(conversion)}});return{types:exactTypes.concat(convertibleTypes),restParam:restParam}}function hasRestParam(params){var param=last(params);return!!param&&param.restParam}function hasConversions(param){return param.types.some(function(type){return null!=type.conversion})}function compileTest(param){if(param&&0!==param.types.length){if(1===param.types.length)return findTypeByName(param.types[0].name).test;if(2===param.types.length){var test0=findTypeByName(param.types[0].name).test,test1=findTypeByName(param.types[1].name).test;return function(x){return test0(x)||test1(x)}}var tests=param.types.map(function(type){return findTypeByName(type.name).test});return function(x){for(var i=0;i<tests.length;i++)if(tests[i](x))return!0;return!1}}return ok}function compileTests(params){var tests,test0,test1,arr;if(hasRestParam(params)){var varIndex=(tests=(arr=params).slice(0,arr.length-1).map(compileTest)).length,lastTest=compileTest(last(params));return function(args){for(var i=0;i<tests.length;i++)if(!tests[i](args[i]))return!1;return function(args){for(var i=varIndex;i<args.length;i++)if(!lastTest(args[i]))return!1;return!0}(args)&&args.length>=varIndex+1}}return 0===params.length?function(args){return 0===args.length}:1===params.length?(test0=compileTest(params[0]),function(args){return test0(args[0])&&1===args.length}):2===params.length?(test0=compileTest(params[0]),test1=compileTest(params[1]),function(args){return test0(args[0])&&test1(args[1])&&2===args.length}):(tests=params.map(compileTest),function(args){for(var i=0;i<tests.length;i++)if(!tests[i](args[i]))return!1;return args.length===tests.length})}function getParamAtIndex(signature,index){return index<signature.params.length?signature.params[index]:hasRestParam(signature.params)?last(signature.params):null}function getExpectedTypeNames(signature,index,excludeConversions){var param=getParamAtIndex(signature,index);return(param?excludeConversions?param.types.filter(isExactType):param.types:[]).map(getTypeName)}function getTypeName(type){return type.name}function isExactType(type){return null===type.conversion||void 0===type.conversion}function mergeExpectedParams(signatures,index){var typeNames=function(arr){for(var entries={},i=0;i<arr.length;i++)entries[arr[i]]=!0;return Object.keys(entries)}(flatMap(signatures,function(signature){return getExpectedTypeNames(signature,index,!1)}));return-1!==typeNames.indexOf("any")?["any"]:typeNames}function getLowestTypeIndex(param){for(var min=999,i=0;i<param.types.length;i++)isExactType(param.types[i])&&(min=Math.min(min,param.types[i].typeIndex));return min}function getLowestConversionIndex(param){for(var min=999,i=0;i<param.types.length;i++)isExactType(param.types[i])||(min=Math.min(min,param.types[i].conversionIndex));return min}function compareSignatures(signature1,signature2){var i,len=Math.min(signature1.params.length,signature2.params.length),c=signature1.params.some(hasConversions)-signature2.params.some(hasConversions);if(0!==c)return c;for(i=0;i<len;i++)if(0!=(c=hasConversions(signature1.params[i])-hasConversions(signature2.params[i])))return c;for(i=0;i<len;i++)if(0!==(c=function(param1,param2){var c=param1.restParam-param2.restParam;return 0!==c||0!=(c=hasConversions(param1)-hasConversions(param2))||0!=(c=getLowestTypeIndex(param1)-getLowestTypeIndex(param2))?c:getLowestConversionIndex(param1)-getLowestConversionIndex(param2)}(signature1.params[i],signature2.params[i])))return c;return signature1.params.length-signature2.params.length}function compileArgConversion(param){var test0,test1,conversion0,conversion1,tests=[],conversions=[];switch(param.types.forEach(function(type){type.conversion&&(tests.push(findTypeByName(type.conversion.from).test),conversions.push(type.conversion.convert))}),conversions.length){case 0:return function(arg){return arg};case 1:return test0=tests[0],conversion0=conversions[0],function(arg){return test0(arg)?conversion0(arg):arg};case 2:return test0=tests[0],test1=tests[1],conversion0=conversions[0],conversion1=conversions[1],function(arg){return test0(arg)?conversion0(arg):test1(arg)?conversion1(arg):arg};default:return function(arg){for(var i=0;i<conversions.length;i++)if(tests[i](arg))return conversions[i](arg);return arg}}}function splitParams(params,ignoreConversionTypes){return function _splitParams(params,index,types){if(index<params.length){var exactTypes,param=params[index],filteredTypes=ignoreConversionTypes?param.types.filter(isExactType):param.types;return flatMap(param.restParam?(exactTypes=filteredTypes.filter(isExactType)).length<filteredTypes.length?[exactTypes,filteredTypes]:[filteredTypes]:filteredTypes.map(function(type){return[type]}),function(typeGroup){return _splitParams(params,index+1,types.concat([typeGroup]))})}return[types.map(function(type,typeIndex){return{types:type,restParam:typeIndex===params.length-1&&hasRestParam(params)}})]}(params,0,[])}function hasConflictingParams(signature1,signature2){for(var ii=Math.max(signature1.params.length,signature2.params.length),i=0;i<ii;i++)if(!function(array1,array2){for(var i=0;i<array1.length;i++)if(function(array,item){return-1!==array.indexOf(item)}(array2,array1[i]))return 1}(getExpectedTypeNames(signature1,i,!0),getExpectedTypeNames(signature2,i,!0)))return!1;var len1=signature1.params.length,len2=signature2.params.length,restParam1=hasRestParam(signature1.params),restParam2=hasRestParam(signature2.params);return restParam1?restParam2?len1===len2:len1<=len2:restParam2?len2<=len1:len1===len2}function createTypedFunction(name,signaturesMap){if(0===Object.keys(signaturesMap).length)throw new SyntaxError("No signatures provided");var parsedSignatures=[];Object.keys(signaturesMap).map(function(signature){return function(signature,fn,conversions){var params=[];return""!==signature.trim()&&(params=signature.split(",").map(trim).map(function(param,index,array){var parsedParam=parseParam(param,conversions);if(parsedParam.restParam&&index!==array.length-1)throw new SyntaxError('Unexpected rest parameter "'+param+'": only allowed for the last parameter');return parsedParam})),params.some(isInvalidParam)?null:{params:params,fn:fn}}(signature,signaturesMap[signature],typed.conversions)}).filter(notNull).forEach(function(parsedSignature){var conflictingSignature=findInArray(parsedSignatures,function(s){return hasConflictingParams(s,parsedSignature)});if(conflictingSignature)throw new TypeError('Conflicting signatures "'+stringifyParams(conflictingSignature.params)+'" and "'+stringifyParams(parsedSignature.params)+'".');parsedSignatures.push(parsedSignature)});var signatures=flatMap(parsedSignatures,function(parsedSignature){return(parsedSignature?splitParams(parsedSignature.params,!1):[]).map(function(params){return{params:params,fn:parsedSignature.fn}})}).filter(notNull);signatures.sort(compareSignatures);var ok0=signatures[0]&&signatures[0].params.length<=2&&!hasRestParam(signatures[0].params),ok1=signatures[1]&&signatures[1].params.length<=2&&!hasRestParam(signatures[1].params),ok2=signatures[2]&&signatures[2].params.length<=2&&!hasRestParam(signatures[2].params),ok3=signatures[3]&&signatures[3].params.length<=2&&!hasRestParam(signatures[3].params),ok4=signatures[4]&&signatures[4].params.length<=2&&!hasRestParam(signatures[4].params),ok5=signatures[5]&&signatures[5].params.length<=2&&!hasRestParam(signatures[5].params),allOk=ok0&&ok1&&ok2&&ok3&&ok4&&ok5,tests=signatures.map(function(signature){return compileTests(signature.params)}),test00=ok0?compileTest(signatures[0].params[0]):notOk,test10=ok1?compileTest(signatures[1].params[0]):notOk,test20=ok2?compileTest(signatures[2].params[0]):notOk,test30=ok3?compileTest(signatures[3].params[0]):notOk,test40=ok4?compileTest(signatures[4].params[0]):notOk,test50=ok5?compileTest(signatures[5].params[0]):notOk,test01=ok0?compileTest(signatures[0].params[1]):notOk,test11=ok1?compileTest(signatures[1].params[1]):notOk,test21=ok2?compileTest(signatures[2].params[1]):notOk,test31=ok3?compileTest(signatures[3].params[1]):notOk,test41=ok4?compileTest(signatures[4].params[1]):notOk,test51=ok5?compileTest(signatures[5].params[1]):notOk,fns=signatures.map(function(signature){return function(params,fn){var restParam,compiledConversions,fnConvert=fn;params.some(hasConversions)&&(restParam=hasRestParam(params),compiledConversions=params.map(compileArgConversion),fnConvert=function(){for(var args=[],last=restParam?arguments.length-1:arguments.length,i=0;i<last;i++)args[i]=compiledConversions[i](arguments[i]);return restParam&&(args[last]=arguments[last].map(compiledConversions[last])),fn.apply(null,args)});var offset,fnPreprocess=fnConvert;return hasRestParam(params)&&(offset=params.length-1,fnPreprocess=function(){return fnConvert.apply(null,slice(arguments,0,offset).concat([slice(arguments,offset)]))}),fnPreprocess}(signature.params,signature.fn)}),fn0=ok0?fns[0]:undef,fn1=ok1?fns[1]:undef,fn2=ok2?fns[2]:undef,fn3=ok3?fns[3]:undef,fn4=ok4?fns[4]:undef,fn5=ok5?fns[5]:undef,len0=ok0?signatures[0].params.length:-1,len1=ok1?signatures[1].params.length:-1,len2=ok2?signatures[2].params.length:-1,len3=ok3?signatures[3].params.length:-1,len4=ok4?signatures[4].params.length:-1,len5=ok5?signatures[5].params.length:-1,iStart=allOk?6:0,iEnd=signatures.length,generic=function(){for(var i=iStart;i<iEnd;i++)if(tests[i](arguments))return fns[i].apply(null,arguments);throw function(name,args,signatures){for(var expected,_name=name||"unnamed",matchingSignatures=signatures,index=0;index<args.length;index++){var nextMatchingDefs=matchingSignatures.filter(function(signature){var test=compileTest(getParamAtIndex(signature,index));return(index<signature.params.length||hasRestParam(signature.params))&&test(args[index])});if(0===nextMatchingDefs.length){if(0<(expected=mergeExpectedParams(matchingSignatures,index)).length){var err,actualType=findTypeName(args[index]);return(err=new TypeError("Unexpected type of argument in function "+_name+" (expected: "+expected.join(" or ")+", actual: "+actualType+", index: "+index+")")).data={category:"wrongType",fn:_name,index:index,actual:actualType,expected:expected},err}}else matchingSignatures=nextMatchingDefs}var lengths=matchingSignatures.map(function(signature){return hasRestParam(signature.params)?1/0:signature.params.length});if(args.length<Math.min.apply(null,lengths))return expected=mergeExpectedParams(matchingSignatures,index),(err=new TypeError("Too few arguments in function "+_name+" (expected: "+expected.join(" or ")+", index: "+args.length+")")).data={category:"tooFewArgs",fn:_name,index:args.length,expected:expected},err;var maxLength=Math.max.apply(null,lengths);return args.length>maxLength?(err=new TypeError("Too many arguments in function "+_name+" (expected: "+maxLength+", actual: "+args.length+")")).data={category:"tooManyArgs",fn:_name,index:args.length,expectedLength:maxLength}:(err=new TypeError('Arguments of type "'+args.join(", ")+'" do not match any of the defined signatures of function '+_name+".")).data={category:"mismatch",actual:args.map(findTypeName)},err}(name,arguments,signatures)},fn=function(arg0,arg1){return arguments.length===len0&&test00(arg0)&&test01(arg1)?fn0.apply(null,arguments):arguments.length===len1&&test10(arg0)&&test11(arg1)?fn1.apply(null,arguments):arguments.length===len2&&test20(arg0)&&test21(arg1)?fn2.apply(null,arguments):arguments.length===len3&&test30(arg0)&&test31(arg1)?fn3.apply(null,arguments):arguments.length===len4&&test40(arg0)&&test41(arg1)?fn4.apply(null,arguments):arguments.length===len5&&test50(arg0)&&test51(arg1)?fn5.apply(null,arguments):generic.apply(null,arguments)};try{Object.defineProperty(fn,"name",{value:name})}catch(err){}return fn.signatures=function(signatures){var signaturesMap={};return signatures.forEach(function(signature){signature.params.some(hasConversions)||splitParams(signature.params,!0).forEach(function(params){signaturesMap[stringifyParams(params)]=signature.fn})}),signaturesMap}(signatures),fn}function notIgnore(typeName){return-1===typed.ignore.indexOf(typeName)}function trim(str){return str.trim()}function notEmpty(str){return!!str}function notNull(value){return null!==value}function isInvalidParam(param){return 0===param.types.length}function last(arr){return arr[arr.length-1]}function slice(arr,start,end){return Array.prototype.slice.call(arr,start,end)}function findInArray(arr,test){for(var i=0;i<arr.length;i++)if(test(arr[i]))return arr[i]}function flatMap(arr,callback){return Array.prototype.concat.apply([],arr.map(callback))}function getName(fns){for(var name="",i=0;i<fns.length;i++){var fn=fns[i];if(("object"==typeof fn.signatures||"string"==typeof fn.signature)&&""!==fn.name)if(""===name)name=fn.name;else if(name!==fn.name){var err=new Error("Function names do not match (expected: "+name+", actual: "+fn.name+")");throw err.data={actual:fn.name,expected:name},err}}return name}function extractSignatures(fns){var err,signaturesMap={};function validateUnique(_signature,_fn){if(signaturesMap.hasOwnProperty(_signature)&&_fn!==signaturesMap[_signature])throw(err=new Error('Signature "'+_signature+'" is defined twice')).data={signature:_signature},err}for(var i=0;i<fns.length;i++){var fn=fns[i];if("object"==typeof fn.signatures)for(var signature in fn.signatures)fn.signatures.hasOwnProperty(signature)&&(validateUnique(signature,fn.signatures[signature]),signaturesMap[signature]=fn.signatures[signature]);else{if("string"!=typeof fn.signature)throw(err=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},err;validateUnique(fn.signature,fn),signaturesMap[fn.signature]=fn}}return signaturesMap}return(typed=createTypedFunction("typed",{"string, Object":createTypedFunction,Object:function(signaturesMap){var fns=[];for(var signature in signaturesMap)signaturesMap.hasOwnProperty(signature)&&fns.push(signaturesMap[signature]);return createTypedFunction(getName(fns),signaturesMap)},"...Function":function(fns){return createTypedFunction(getName(fns),extractSignatures(fns))},"string, ...Function":function(name,fns){return createTypedFunction(name,extractSignatures(fns))}})).create=create,typed.types=_types,typed.conversions=_conversions,typed.ignore=_ignore,typed.convert=function(value,type){var from=findTypeName(value);if(type===from)return value;for(var i=0;i<typed.conversions.length;i++){var conversion=typed.conversions[i];if(conversion.from===from&&conversion.to===type)return conversion.convert(value)}throw new Error("Cannot convert from "+from+" to "+type)},typed.find=function(fn,signature){if(!fn.signatures)throw new TypeError("Function is no typed-function");var arr;if("string"==typeof signature){arr=signature.split(",");for(var i=0;i<arr.length;i++)arr[i]=arr[i].trim()}else{if(!Array.isArray(signature))throw new TypeError("String array or a comma separated string expected");arr=signature}var str=arr.join(","),match=fn.signatures[str];if(match)return match;throw new TypeError("Signature not found (signature: "+(fn.name||"unnamed")+"("+arr.join(", ")+"))")},typed.addType=function(type,beforeObjectTest){if(!type||"string"!=typeof type.name||"function"!=typeof type.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==beforeObjectTest)for(var i=0;i<typed.types.length;i++)if("Object"===typed.types[i].name)return void typed.types.splice(i,0,type);typed.types.push(type)},typed.addConversion=function(conversion){if(!conversion||"string"!=typeof conversion.from||"string"!=typeof conversion.to||"function"!=typeof conversion.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");typed.conversions.push(conversion)},typed}()},"object"==typeof exports?module.exports=factory():root.typed=factory()},{}]},{},[5])(5)});
</script>
<script>
async function initTF() {
  try {
    await tf.setBackend('webgpu');
    await tf.ready();
  } catch (e) {
    await tf.setBackend('webgl');
    await tf.ready();
  }
}

initTF();
</script>
<script>
const QuantumCircuit = require("quantum-circuit");
const circuit = new QuantumCircuit(2);
circuit.createCreg("c", 2);
circuit.appendGate("h", 0, {});
circuit.appendGate("cx", [0,1], {});
circuit.addMeasure(0, "c", 0);
circuit.addMeasure(1, "c", 1);
circuit.run();
console.log("Probabilities:");
console.log(JSON.stringify(circuit.probabilities()));
console.log("Measure all:");
console.log(JSON.stringify(circuit.measureAll()));
console.log("Classical registers:");
console.log(circuit.cregsAsString());
</script>
<!doctype html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"> <title>Memory Game</title>  <style> html,body{   margin:0;   height:100%;   background:#06121f;   display:flex;   align-items:center;   justify-content:center;   font-family:Arial; } .container{   width:90vmin;   background:#0b1c33;   padding:12px;   border-radius:12px;   position:relative;   color:white; } header{   display:flex;   justify-content:space-between;   align-items:center;   margin-bottom:10px; } .score{   font-size:18px;   font-weight:bold; } .board{   display:grid;   grid-template-columns:1fr 1fr;   gap:12px; } .pad{   aspect-ratio:1 / 1;   border-radius:12px;   pointer-events:auto; } .pad.disabled{   pointer-events:none;   opacity:0.7; } .green{background:#22c55e} .red{background:#ef4444} .yellow{background:#facc15} .blue{background:#3b82f6} .flash{   filter:brightness(1.6); } .overlay{   position:absolute;   inset:0;   background:rgba(0,0,0,.85);   display:flex;   align-items:center;   justify-content:center;   flex-direction:column;   gap:12px; } button{   padding:16px 24px;   font-size:18px;   border:none;   border-radius:10px;   font-weight:bold; } </style> </head>  <body> <div class="container">   <header>     <div>Memory Game</div>     <div class="score">Score: <span id="score">0</span></div>   </header>    <div class="board">     <div class="pad green"></div>     <div class="pad red"></div>     <div class="pad yellow"></div>     <div class="pad blue"></div>   </div>    <div id="overlay" class="overlay">     <div>Memory Game</div>     <button id="startBtn">Play</button>   </div> </div>  <script> let sequence = []; let position = 0; let showing = false; let score = 0;  const pads = document.querySelectorAll(".pad"); const overlay = document.getElementById("overlay"); const startBtn = document.getElementById("startBtn"); const scoreEl = document.getElementById("score");  function setPadsEnabled(on){   pads.forEach(p=>{     p.classList.toggle("disabled", !on);   }); }  function flash(i){   pads[i].classList.add("flash");   setTimeout(()=>{     pads[i].classList.remove("flash");   },300); }  function playSequence(){   let i = 0;   showing = true;   setPadsEnabled(false);    const timer = setInterval(()=>{     flash(sequence[i]);     i++;     if(i >= sequence.length){       clearInterval(timer);       position = 0;       showing = false;       setTimeout(()=>setPadsEnabled(true),400);     }   },600); }  function startRound(){   setPadsEnabled(false);   showing = true;   setTimeout(playSequence,150); }  function startGame(){   sequence = [];   score = 0;   scoreEl.textContent = score;   overlay.style.display = "none";   sequence.push(Math.floor(Math.random()*4));   startRound(); }  /* PLAYER INPUT â NO FLASH HERE */ pads.forEach((pad, i)=>{   pad.addEventListener("click", ()=>{     if(showing) return;      if(i === sequence[position]){       position++;       if(position === sequence.length){         score++;         scoreEl.textContent = score;         setPadsEnabled(false);         sequence.push(Math.floor(Math.random()*4));         setTimeout(startRound,700);       }     } else {       overlay.style.display = "flex";       setPadsEnabled(false);     }   }); });  startBtn.onclick = startGame; </script> </body> </html>